<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>PostGIS 3.5.2手册</title><link rel="stylesheet" type="text/css" href="style.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.79.2"/><meta name="description" content="PostGIS 是一种扩展功能，适用于 PostgreSQL 对象关系数据库系统，它允许将 GIS（地理信息系统）对象存储在数据库中。PostGIS 包含对基于 GiST 的 R-Tree 空间索引的支持，以及用于分析和处理 GIS 对象的功能。  本手册的版本是 3.5.2 本作品已获得创作共用署名-相同方式共享 3.0 许可。请随意使用这份材料，任何您喜欢的方式，但我们要求您将荣誉归于 PostGIS 项目，尽可能提供返回https://postgis.net的链接。"/></head><body><div class="book" id="idm1"><div class="titlepage"><div><div><h1 class="title">PostGIS 3.5.2手册</h1></div><div><div class="author"><h3 class="author"><span class="orgname">PostGIS 开发团队</span></h3></div></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>PostGIS 是一种扩展功能，适用于 <a class="link" href="https://www.postgresql.org/" target="_top">PostgreSQL</a> 对象关系数据库系统，它允许将 GIS（地理信息系统）对象存储在数据库中。PostGIS 包含对基于 GiST 的 R-Tree 空间索引的支持，以及用于分析和处理 GIS 对象的功能。</p><p><span class="inlinemediaobject"><img src="images/PostGIS_logo.png"/></span>
            <span class="inlinemediaobject"><img src="images/osgeo_logo.png"/></span>
      </p><p>本手册的版本是 3.5.2</p><p><span class="inlinemediaobject"><img src="images/ccbysa.png"/></span> 本作品已获得<a class="link" href="http://creativecommons.org/licenses/by-sa/3.0/" target="_top">创作共用署名-相同方式共享 3.0 许可</a>。请随意使用这份材料，任何您喜欢的方式，但我们要求您将荣誉归于 PostGIS 项目，尽可能提供返回<a class="link" href="https://postgis.net" target="_top">https://postgis.net</a>的链接。</p></div></div></div><hr/></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="chapter"><a href="#postgis_introduction">1. 介绍</a></span><ul><li><span class="section"><a href="#psc">1.1. 项目指导委员会</a></span></li><li><span class="section"><a href="#credits_core_present">1.2. 当前的核心贡献者</a></span></li><li><span class="section"><a href="#credits_core_past">1.3. 过去的核心贡献者</a></span></li><li><span class="section"><a href="#credits_other_contributors">1.4. 其它贡献者</a></span></li></ul></li><li><span class="chapter"><a href="#postgis_installation">2. PostGIS 安装</a></span><ul><li><span class="section"><a href="#install_short_version">2.1. 简短版本</a></span></li><li><span class="section"><a href="#PGInstall">2.2. 从源代码编译和安装</a></span></li><li><span class="section"><a href="#installing_pagc_address_standardizer">2.3. 安装和使用地址标准化工具</a></span></li><li><span class="section"><a href="#loading_extras_tiger_geocoder">2.4. 安装、升级 Tiger地理编码器并加载数据</a></span></li><li><span class="section"><a href="#idm989">2.5. 常见问题</a></span></li></ul></li><li><span class="chapter"><a href="#postgis_administration">3. PostGIS 管理</a></span><ul><li><span class="section"><a href="#database_tuning_configuration">3.1. 性能调优</a></span></li><li><span class="section"><a href="#raster_configuration">3.2. 配置栅格支持</a></span></li><li><span class="section"><a href="#create_spatial_db">3.3. 创建空间数据库</a></span></li><li><span class="section"><a href="#upgrading">3.4. 升级空间数据库</a></span></li></ul></li><li><span class="chapter"><a href="#using_postgis_dbmanagement">4. 数据管理</a></span><ul><li><span class="section"><a href="#RefObject">4.1. 空间数据模型</a></span></li><li><span class="section"><a href="#PostGIS_Geometry">4.2. 几何数据类型</a></span></li><li><span class="section"><a href="#PostGIS_Geography">4.3. 地理数据类型</a></span></li><li><span class="section"><a href="#OGC_Validity">4.4. 几何有效性验证</a></span></li><li><span class="section"><a href="#spatial_ref_sys">4.5. 空间参考系统</a></span></li><li><span class="section"><a href="#idm2036">4.6. 空间表</a></span></li><li><span class="section"><a href="#loading-data">4.7. 加载空间数据</a></span></li><li><span class="section"><a href="#extracting-data">4.8. 提取空间数据</a></span></li><li><span class="section"><a href="#build-indexes">4.9. 空间索引</a></span></li></ul></li><li><span class="chapter"><a href="#using_postgis_query">5. 空间查询</a></span><ul><li><span class="section"><a href="#eval_spatial_rel">5.1. 空间关系的确定</a></span></li><li><span class="section"><a href="#using-query-indexes">5.2. 使用空间索引</a></span></li><li><span class="section"><a href="#examples_spatial_sql">5.3. 空间SQL示例</a></span></li></ul></li><li><span class="chapter"><a href="#performance_tips">6. 性能优化技巧</a></span><ul><li><span class="section"><a href="#small_tables_large_objects">6.1. 大几何形状的小表</a></span></li><li><span class="section"><a href="#database_clustering">6.2. 几何索引聚类</a></span></li><li><span class="section"><a href="#avoiding_dimension_conversion">6.3. 避免维度变换</a></span></li></ul></li><li><span class="chapter"><a href="#reference">7. PostGIS 参考手册</a></span><ul><li><span class="section"><a href="#PostGIS_Types">7.1. PostGIS Geometry/Geography/Box 数据类型</a></span></li><li><span class="section"><a href="#Management_Functions">7.2. 表管理功能</a></span></li><li><span class="section"><a href="#Geometry_Constructors">7.3. 几何构造函数</a></span></li><li><span class="section"><a href="#Geometry_Accessors">7.4. 几何访问器</a></span></li><li><span class="section"><a href="#Geometry_Editors">7.5. 几何编辑器</a></span></li><li><span class="section"><a href="#Geometry_Validation">7.6. 几何有效性验证</a></span></li><li><span class="section"><a href="#SRS_Functions">7.7. 空间参考系统功能</a></span></li><li><span class="section"><a href="#Geometry_Inputs">7.8. 几何输入</a></span></li><li><span class="section"><a href="#Geometry_Outputs">7.9. 几何输出</a></span></li><li><span class="section"><a href="#Operators">7.10. 运算符</a></span></li><li><span class="section"><a href="#Spatial_Relationships">7.11. 空间关系</a></span></li><li><span class="section"><a href="#Measurement_Functions">7.12. 测量函数</a></span></li><li><span class="section"><a href="#Overlay_Functions">7.13. 叠加函数</a></span></li><li><span class="section"><a href="#Geometry_Processing">7.14. 几何处理</a></span></li><li><span class="section"><a href="#Coverage">7.15. 覆盖范围</a></span></li><li><span class="section"><a href="#Affine_Transformation">7.16. 仿射变换</a></span></li><li><span class="section"><a href="#Clustering_Functions">7.17. 聚类函数</a></span></li><li><span class="section"><a href="#BBox_Functions">7.18. 边界框函数</a></span></li><li><span class="section"><a href="#Linear_Referencing">7.19. 线性参考</a></span></li><li><span class="section"><a href="#Temporal">7.20. 轨迹函数</a></span></li><li><span class="section"><a href="#Version_Functions">7.21. 版本函数</a></span></li><li><span class="section"><a href="#PostGIS_GUC">7.22. 大一统自定义变量 (GUCs)</a></span></li><li><span class="section"><a href="#Troubleshooting_Functions">7.23. 故障排除函数</a></span></li></ul></li><li><span class="chapter"><a href="#reference_sfcgal">8. SFCGAL函数参考</a></span><ul><li><span class="section"><a href="#sfcgal_management">8.1. SFCGAL管理函数</a></span></li><li><span class="section"><a href="#sfcgal_accessors">8.2. SFCGAL访问器和设置器</a></span></li><li><span class="section"><a href="#sfcgal_processing">8.3. SFCGAL处理和关系函数</a></span></li></ul></li><li><span class="chapter"><a href="#Topology">9. 拓扑结构</a></span><ul><li><span class="section"><a href="#Topology_Types">9.1. 拓扑类型</a></span></li><li><span class="section"><a href="#Topology_Domains">9.2. 拓扑域</a></span></li><li><span class="section"><a href="#Topology_ManagementFunctions">9.3. 拓扑和拓扑几何管理</a></span></li><li><span class="section"><a href="#Topology_StatsManagement">9.4. 拓扑统计管理</a></span></li><li><span class="section"><a href="#Topology_Constructors">9.5. 拓扑构造器</a></span></li><li><span class="section"><a href="#Topology_Editing">9.6. 拓扑编辑器</a></span></li><li><span class="section"><a href="#Topology_Accessors">9.7. 拓扑访问器</a></span></li><li><span class="section"><a href="#Topology_Processing">9.8. 拓扑处理</a></span></li><li><span class="section"><a href="#TopoGeometry_Constructors">9.9. 拓扑几何构造函数</a></span></li><li><span class="section"><a href="#TopoGeometry_Editors">9.10. 拓扑几何编辑器</a></span></li><li><span class="section"><a href="#TopoGeom_Accessors">9.11. 拓扑几何访问器</a></span></li><li><span class="section"><a href="#TopoGeometry_Outputs">9.12. 拓扑几何输出</a></span></li><li><span class="section"><a href="#Topology_Relationships">9.13. 拓扑空间关系</a></span></li><li><span class="section"><a href="#Topology_Import_Export">9.14. 导入和导出拓扑</a></span></li></ul></li><li><span class="chapter"><a href="#using_raster_dataman">10. 栅格数据管理、查询和应用程序</a></span><ul><li><span class="section"><a href="#RT_Loading_Rasters">10.1. 加载和创建栅格</a></span></li><li><span class="section"><a href="#RT_Raster_Catalog">10.2. 栅格目录</a></span></li><li><span class="section"><a href="#RT_Raster_Applications">10.3. 使用 PostGIS Raster 构建自定义应用程序</a></span></li></ul></li><li><span class="chapter"><a href="#RT_reference">11. 栅格参考</a></span><ul><li><span class="section"><a href="#Raster_Types">11.1. 栅格支持数据类型</a></span></li><li><span class="section"><a href="#Raster_Management_Functions">11.2. 栅格管理</a></span></li><li><span class="section"><a href="#Raster_Constructors">11.3. 栅格构造器</a></span></li><li><span class="section"><a href="#Raster_Accessors">11.4. 栅格访问器</a></span></li><li><span class="section"><a href="#RasterBand_Accessors">11.5. 栅格波段访问器</a></span></li><li><span class="section"><a href="#Raster_Pixel_Accessors">11.6. 栅格像素访问器和设置器</a></span></li><li><span class="section"><a href="#Raster_Editors">11.7. 栅格编辑器</a></span></li><li><span class="section"><a href="#RasterBand_Editors">11.8. 栅格波段编辑器</a></span></li><li><span class="section"><a href="#RasterBand_Stats">11.9. 栅格波段统计和分析</a></span></li><li><span class="section"><a href="#Raster_Inputs">11.10. 栅格输入</a></span></li><li><span class="section"><a href="#Raster_Outputs">11.11. 栅格输出</a></span></li><li><span class="section"><a href="#Raster_Processing_MapAlgebra">11.12. 栅格处理：地图代数</a></span></li><li><span class="section"><a href="#Raster_Processing_MapAlgebra_Callbacks">11.13. 内置地图代数回调函数</a></span></li><li><span class="section"><a href="#Raster_Processing_DEM">11.14. 栅格处理：DEM（高程）</a></span></li><li><span class="section"><a href="#Raster_Processing_Geometry">11.15. 栅格处理：栅格到几何</a></span></li><li><span class="section"><a href="#RT_Operators">11.16. 栅格运算符</a></span></li><li><span class="section"><a href="#Raster_Relationships">11.17. 栅格和栅格波段空间关系</a></span></li><li><span class="section"><a href="#Raster_Tips">11.18. 栅格提示</a></span></li></ul></li><li><span class="chapter"><a href="#Extras">12. PostGIS 补充</a></span><ul><li><span class="section"><a href="#Address_Standardizer">12.1. 地址标准化工具</a></span></li><li><span class="section"><a href="#Tiger_Geocoder">12.2. Tiger地理编码器</a></span></li></ul></li><li><span class="chapter"><a href="#PostGIS_Special_Functions_Index">13. PostGIS 特殊函数索引</a></span><ul><li><span class="section"><a href="#PostGIS_Aggregate_Functions">13.1. PostGIS 聚合函数</a></span></li><li><span class="section"><a href="#PostGIS_Window_Functions">13.2. PostGIS 窗口函数</a></span></li><li><span class="section"><a href="#PostGIS_SQLMM_Functions">13.3. PostGIS SQL-MM 兼容函数</a></span></li><li><span class="section"><a href="#PostGIS_GeographyFunctions">13.4. PostGIS 地理支持函数</a></span></li><li><span class="section"><a href="#PostGIS_RasterFunctions">13.5. PostGIS 栅格支持函数</a></span></li><li><span class="section"><a href="#PostGIS_Geometry_DumpFunctions">13.6. PostGIS 几何/地理/栅格导出函数</a></span></li><li><span class="section"><a href="#PostGIS_BoxFunctions">13.7. PostGIS 边界框函数</a></span></li><li><span class="section"><a href="#PostGIS_3D_Functions">13.8. 支持 3D 的 PostGIS 函数</a></span></li><li><span class="section"><a href="#PostGIS_Curved_GeometryFunctions">13.9. PostGIS 曲线几何支持函数</a></span></li><li><span class="section"><a href="#PostGIS_PS_GeometryFunctions">13.10. PostGIS 多面体曲面支持函数</a></span></li><li><span class="section"><a href="#PostGIS_TypeFunctionMatrix">13.11. PostGIS函数支持矩阵</a></span></li><li><span class="section"><a href="#NewFunctions">13.12. 新的、增强的或更改的 PostGIS 函数</a></span></li></ul></li><li><span class="chapter"><a href="#idm52797">14. 报告问题</a></span><ul><li><span class="section"><a href="#idm52799">14.1. 报告软件错误</a></span></li><li><span class="section"><a href="#idm52810">14.2. 报告文档问题</a></span></li></ul></li><li><span class="appendix"><a href="#release_notes">A. 附录</a></span><ul><li><span class="section"><a href="#idm52838">A.1. PostGIS 3.5.2</a></span></li><li><span class="section"><a href="#idm52850">A.2. PostGIS 3.5.1</a></span></li><li><span class="section"><a href="#idm52891">A.3. PostGIS 3.5.0</a></span></li></ul></li></ul></div><section class="chapter" id="postgis_introduction"><div class="titlepage"><div><div><h1 class="title">Chapter 1. 介绍</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#psc">1.1. 项目指导委员会</a></span></li><li><span class="section"><a href="#credits_core_present">1.2. 当前的核心贡献者</a></span></li><li><span class="section"><a href="#credits_core_past">1.3. 过去的核心贡献者</a></span></li><li><span class="section"><a href="#credits_other_contributors">1.4. 其它贡献者</a></span></li></ul></div><p>PostGIS是PostgreSQL关系数据库的空间扩展。由Refractions Research Inc创建，作为空间数据库技术的研究项目。Refractions是一家位于加拿大不列颠哥伦比亚省维多利亚市的GIS和数据库咨询公司，专门从事数据集成和定制软件开发。</p><p>PostGIS现在是OSGeo基金会的一个项目。世界各地大量FOSS4G开发商和公司从PostGIS的功能和多样性中受益匪浅，他们正在开发和资助PostGIS。</p><p>PostGIS 项目开发小组为 PostGIS 创建了一个数据源，以便在 OGC 和 SQL/MM 空间标准、高级拓扑构建（覆盖范围、表面、网络）、用于查看和编辑 GIS 数据的桌面用户界面工具的数据源以及基于 Web 的访问工具的数据源等领域提供重要的 GIS 功能。我们将提供支持和增强功能，以更好地做出响应。</p><section class="section" id="psc"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.1. 项目指导委员会</h2></div></div></div><p>PostGIS项目指导委员会（PSC）负责协调总体方向、发布周期、文档和支持活动。委员会还对涉及 PostGIS 的其他问题进行投票，例如整体用户支持、接受和应用 PostGIS 社区的补丁、开发人员提交访问权限、新委员会成员以及重要的 API 更改。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Raúl Marín Rodríguez</span></dt><dd><p>MVT 功能、纠错、性能和稳定性改进、GitHub 策展、PostGIS 和 PostgreSQL 版本调整</p></dd><dt><span class="term">Regina Obe</span></dt><dd><p>持续集成和网站维护，Windows生产和实验构建，文档编写，将PostGIS与PostgreSQL发布版本对齐，X3D支持，TIGER地理编码支持，管理功能。</p></dd><dt><span class="term">Darafei Praliaskouski</span></dt><dd><p>索引改进，故障修复和几何/地理函数改进，SFCGAL，栅格，GitHub维护，以及持续集成维护。</p></dd><dt><span class="term">Paul Ramsey（主席）</span></dt><dd><p>PostGIS项目的联合创始人。全面的错误修复、地理功能、地理和几何索引（2D、3D、n 维索引和任何空间索引）、几何内部、GEOS功能集成以及与GEOS版本的协调、与PostgreSQL版本的协调、加载器/转储程序、shapefile GUI 加载器。</p></dd><dt><span class="term">Sandro Santilli</span></dt><dd><p>错误修复和维护，持续集成维护，Git镜像管理，管理功能，集成新的GEOS功能并与GEOS发布对齐，拓扑支持，以及栅格框架和底层API函数。</p></dd></dl></div></section><section class="section" id="credits_core_present"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.2. 当前的核心贡献者</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Nicklas Avén</span></dt><dd><p>距离函数增强（包括 3D 距离和关系函数）和附加功能、Tiny WKB (TWKB) 输出格式和一般用户支持</p></dd><dt><span class="term">Loïc Bartoletti</span></dt><dd><p>SFCGAL 的增强和维护以及持续集成支持</p></dd><dt><span class="term">Dan Baston</span></dt><dd><p>几何聚类功能添加、其他几何算法增强、GEOS 增强和一般用户支持</p></dd><dt><span class="term">Martin Davis</span></dt><dd><p>GEOS 增强功能和文档</p></dd><dt><span class="term">Björn Harrtell</span></dt><dd><p>MapBox 矢量瓦片、GeoBuf 和 Flatgeobuf 函数。Gitea 测试和 GitLab 实验。</p></dd><dt><span class="term">Aliaksandr Kalenik</span></dt><dd><p>几何处理，PostgreSQL GiST，常见纠错</p></dd></dl></div></section><section class="section" id="credits_core_past"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.3. 过去的核心贡献者</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Bborie Park</span></dt><dd><p>前 PSC 成员。 栅格，与GDAL集成，栅格加载器，用户支持，常见纠错，在各种操作系统（Slackware，Mac，Windows等）上进行测试</p></dd><dt><span class="term">Mark Cave-Ayland</span></dt><dd><p>前 PSC 成员。 纠错和维护活动、空间索引选择性和绑定、加载器/转储程序和 shapefile GUI 加载器调整、新功能集成和增强。</p></dd><dt><span class="term">Jorge Arévalo</span></dt><dd><p>栅格开发，GDAL驱动功能，加载器</p></dd><dt><span class="term">Olivier Courtin</span></dt><dd><p>（荣誉）XML（KML， GML）/GEOJSON 输入/输出函数、3D 对应和纠错。</p></dd><dt><span class="term">Chris Hodgson</span></dt><dd><p>前 PSC 成员。一般开发，站点和构建机器人维护，OSGeo孵化管理</p></dd><dt><span class="term">Mateusz Loskot</span></dt><dd><p>CMake 对 PostGIS 的支持、原始栅格加载器的构造以及 Python 版本的低级栅格 API 函数</p></dd><dt><span class="term">Kevin Neufeld</span></dt><dd><p>前 PSC 成员。文档和文档辅助、Buildbot 维护、PostGIS 新闻组中的高级用户支持以及增强的 PostGIS 维护功能。</p></dd><dt><span class="term">Dave Blasby</span></dt><dd><p>PostGIS的原始开发者/联合创始人。编写了服务器端对象、索引绑定和许多服务器端分析函数。</p></dd><dt><span class="term">Jeff Lounsbury</span></dt><dd><p>shapefile loader/dumper 的原始开发人员。</p></dd><dt><span class="term">Mark Leslie</span></dt><dd><p>持续维护和开发核心功能。增强的曲线功能。形状文件 GUI 加载器。</p></dd><dt><span class="term">Pierre Racine</span></dt><dd><p>后 GIS 栅格实现设计。 光栅架构、原型设计和编程辅助</p></dd><dt><span class="term">David Zwarg</span></dt><dd><p>栅格开发（主要是地图代数分析函数）</p></dd></dl></div></section><section class="section" id="credits_other_contributors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.4. 其它贡献者</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">个人</span></dt><dd><p>
				</p><table style="border: 0; " class="simplelist"><tr><td>Alex Bodnaru</td><td>Gino Lucrezi</td><td>Maxime Guillaud</td></tr><tr><td>Alex Mayrhofer</td><td>Greg Troxel</td><td>Maxime van Noppen</td></tr><tr><td>Andrea Peri</td><td>Guillaume Lelarge</td><td>Maxime Schoemans</td></tr><tr><td>Andreas Forø Tollefsen</td><td>Giuseppe Broccolo</td><td>Michael Fuhr</td></tr><tr><td>Andreas Neumann</td><td>Han Wang</td><td>Mike Toews</td></tr><tr><td>Andrew Gierth</td><td>Hans Lemuet</td><td>Nathan Wagner</td></tr><tr><td>Anne Ghisla</td><td>Haribabu Kommi</td><td>Nathaniel Clay</td></tr><tr><td>Antoine Bajolet</td><td>Havard Tveite</td><td>Nikita Shulga</td></tr><tr><td>Arthur Lesuisse</td><td>IIDA Tetsushi</td><td>Norman Vine</td></tr><tr><td>Artur Zakirov</td><td>Ingvild Nystuen</td><td>Patricia Tozer</td></tr><tr><td>Barbara Phillipot</td><td>Jackie Leng</td><td>Rafal Magda</td></tr><tr><td>Ben Jubb</td><td>James Addison</td><td>Ralph Mason</td></tr><tr><td>Bernhard Reiter</td><td>James Marca</td><td>Rémi Cura</td></tr><tr><td>Björn Esser</td><td>Jan Katins</td><td>Richard Greenwood</td></tr><tr><td>Brian Hamlin</td><td>Jan Tojnar</td><td>Robert Coup</td></tr><tr><td>Bruce Rindahl</td><td>Jason Smith</td><td>Roger Crew</td></tr><tr><td>Bruno Wolff III</td><td>Jeff Adams</td><td>Ron Mayer</td></tr><tr><td>Bryce L. Nordgren</td><td>Jelte Fennema</td><td>Sam Peters</td></tr><tr><td>Carl Anderson</td><td>Jim Jones</td><td>Sebastiaan Couwenberg</td></tr><tr><td>Charlie Savage</td><td>Joe Conway</td><td>Sergei Shoulbakov</td></tr><tr><td>Chris Mayo</td><td>Jonne Savolainen</td><td>Sergey Fedoseev</td></tr><tr><td>Christian Schroeder</td><td>Jose Carlos Martinez Llari</td><td>Shinichi Sugiyama</td></tr><tr><td>Christoph Berg</td><td>Jörg Habenicht</td><td>Shoaib Burq</td></tr><tr><td>Christoph Moench-Tegeder</td><td>Julien Rouhaud</td><td>Silvio Grosso</td></tr><tr><td>Dane Springmeyer</td><td>Kashif Rasul</td><td>Stefan Corneliu Petrea</td></tr><tr><td>Dapeng Wang</td><td>Klaus Foerster</td><td>Steffen Macke</td></tr><tr><td>Daryl Herzmann</td><td>Kris Jurka</td><td>Stepan Kuzmin</td></tr><tr><td>Dave Fuhry</td><td>Laurenz Albe</td><td>Stephen Frost</td></tr><tr><td>David Garnier</td><td>Lars Roessiger</td><td>Steven Ottens</td></tr><tr><td>David Skea</td><td>Leo Hsu</td><td>Talha Rizwan</td></tr><tr><td>David Techer</td><td>Loic Dachary</td><td>Teramoto Ikuhiro</td></tr><tr><td>Dian M Fay</td><td>Luca S. Percich</td><td>Tom Glancy</td></tr><tr><td>Dmitry Vasilyev</td><td>Lucas C. Villa Real</td><td>Tom van Tilburg</td></tr><tr><td>Eduin Carrillo</td><td>Maria Arias de Reyna</td><td>Victor Collod</td></tr><tr><td>Esteban Zimanyi</td><td>Marc Ducobu</td><td>Vincent Bre</td></tr><tr><td>Eugene Antimirov</td><td>Mark Sondheim</td><td>Vincent Mora</td></tr><tr><td>Even Rouault</td><td>Markus Schaber</td><td>Vincent Picavet</td></tr><tr><td>Florian Weimer</td><td>Markus Wanner</td><td>Volf Tomáš</td></tr><tr><td>Frank Warmerdam</td><td>Matt Amos</td><td>Zuo Chenwei</td></tr><tr><td>George Silva</td><td>Matt Bretl</td><td> </td></tr><tr><td>Gerald Fenoy</td><td>Matthias Bay</td><td> </td></tr></table><p>
			</p></dd><dt><span class="term">企业团体</span></dt><dd><p>这些公司为PostGIS项目贡献了开发人员时间，托管或直接资金。按字母顺序排列： </p><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><a class="link" href="https://aiven.io" target="_top">Aiven</a></li><li class="listitem"><a class="link" href="https://arrival3d.com" target="_top">Arrival 3D</a></li><li class="listitem"><a class="link" href="http://gfoss.it" target="_top">Associazione Italiana per l'Informazione Geografica Libera (GFOSS.it)</a></li><li class="listitem"><a class="link" href="https://www.ausvet.com.au" target="_top">AusVet</a></li><li class="listitem">Avencia</li><li class="listitem"><a class="link" href="https://www.azavea.com" target="_top">Azavea</a></li><li class="listitem"><a class="link" href="https://www.boundlessgeo.com" target="_top">Boundless</a></li><li class="listitem"><a class="link" href="https://www.cadcorp.com" target="_top">Cadcorp</a></li><li class="listitem"><a class="link" href="https://www.camptocamp.com" target="_top">Camptocamp</a></li><li class="listitem"><a class="link" href="https://carto.com" target="_top">Carto</a></li><li class="listitem"><a class="link" href="https://www.crunchydata.com" target="_top">Crunchy Data</a></li><li class="listitem"><a class="link" href="https://www.boston.gov" target="_top">City of Boston (DND)</a></li><li class="listitem"><a class="link" href="https://www.hel.fi" target="_top">City of Helsinki</a></li><li class="listitem"><a class="link" href="https://blog.cleverelephant.ca" target="_top">Clever Elephant Solutions</a></li><li class="listitem"><a class="link" href="https://www.alveo.coop" target="_top">Cooperativa Alveo</a></li><li class="listitem"><a class="link" href="http://www.elecnor-deimos.com" target="_top">Deimos Space</a></li><li class="listitem"><a class="link" href="https://www.faunalia.eu" target="_top">Faunalia</a></li><li class="listitem"><a class="link" href="https://gov.bc.ca" target="_top">Geographic Data BC</a></li><li class="listitem"><a class="link" href="https://www.highgo.ca" target="_top">HighGo</a></li><li class="listitem">Hunter Systems Group</li><li class="listitem"><a class="link" href="https://pti-agriambio.csic.es" target="_top">
&gt;The National Institute for Agricultural and Food Research and Technology (INIA-CSIC)</a></li><li class="listitem"><a class="link" href="https://www.isciences.com" target="_top">ISciences, LLC</a></li><li class="listitem"><a class="link" href="https://www.kontur.io" target="_top">Kontur</a></li><li class="listitem"><a class="link" href="https://www.lidwala.com" target="_top">Lidwala Consulting Engineers</a></li><li class="listitem"><a class="link" href="https://www.jirotech.com" target="_top">LISAsoft</a></li><li class="listitem">Logical Tracking &amp; Tracing International AG</li><li class="listitem">Maponics</li><li class="listitem"><a class="link" href="http://www.mtri.org" target="_top">Michigan Tech Research Institute</a></li><li class="listitem"><a class="link" href="https://www.nrcan.gc.ca" target="_top">Natural Resources Canada</a></li><li class="listitem">Norwegian Forest and Landscape Institute</li><li class="listitem"><a class="link" href="https://www.nibio.no/" target="_top">Norwegian Institute of Bioeconomy Research (NIBIO)</a></li><li class="listitem"><a class="link" href="https://www.osgeo.org" target="_top">OSGeo</a></li><li class="listitem"><a class="link" href="https://oslandia.com" target="_top">Oslandia</a></li><li class="listitem"><a class="link" href="https://www.palantir.com" target="_top">Palantir Technologies</a></li><li class="listitem"><a class="link" href="https://www.paragoncorporation.com" target="_top">Paragon Corporation</a></li><li class="listitem"><a class="link" href="https://www.r3-gis.com" target="_top">R3 GIS</a></li><li class="listitem"><a class="link" href="http://www.refractions.net" target="_top">Refractions Research</a></li><li class="listitem"><a class="link" href="https://www.regione.toscana.it" target="_top">Regione Toscana - SITA</a></li><li class="listitem"><a class="link" href="https://www.safe.com" target="_top">Safe Software</a></li><li class="listitem">Sirius Corporation plc</li><li class="listitem"><a class="link" href="http://www.uster.ch" target="_top">Stadt Uster</a></li><li class="listitem"><a class="link" href="https://www.ucdavis.edu" target="_top">UC Davis Center for Vectorborne Diseases</a></li><li class="listitem"><a class="link" href="https://www.ulaval.ca" target="_top">Université Laval</a></li><li class="listitem"><a class="link" href="https://hiu.state.gov" target="_top">U.S. Department of State (HIU)</a></li><li class="listitem"><a class="link" href="https://www.zonarsystems.com" target="_top">Zonar Systems</a></li></ul></div><p>
		</p></dd><dt><span class="term">众筹活动</span></dt><dd><p>众筹活动是我们为了获得急需的功能而开展的活动，这些功能可以为大量的人提供服务。每个活动都专门针对一个特定功能或一组功能。每个赞助商都会投入所需资金的一小部分，并且有足够的个人/组织捐款，我们就有资金来支付将帮助许多人的工作。 如果您对某个功能有想法，并且认为许多其他人愿意共同资助，请将您的想法发布到 <a class="link" href="https://lists.osgeo.org/mailman/listinfo/postgis-users" target="_top">PostGIS 新闻组</a>，我们可以共同实现它。 </p><p>PostGIS 2.0.0 是我们尝试此策略的第一个版本。我们使用了<a class="link" href="http://www.pledgebank.com" target="_top">PledgeBank</a>，并从中举办了两次成功的活动。</p><p><a class="link" href="http://www.pledgebank.com/postgistopology" target="_top"><span class="bold"><strong>postgistopology</strong></span></a>-有10位赞助商每人捐赠了250美元来构建 "toTopoGeometry" 函数并加强2.0.0版本中的拓扑支持。这一目标已经实现。</p><p><a class="link" href="http://www.pledgebank.com/postgis64windows" target="_top"><span class="bold"><strong>postgis64windows</strong></span></a>-大约20位赞助商每人捐赠了100美元，用以支付在Windows上解决PostGIS 64位问题所需的工作。这一目标已经实现。</p></dd><dt><span class="term">重要的支持库</span></dt><dd><p><a class="link" href="https://libgeos.org" target="_top">GEOS</a>几何操作库</p><p><a class="link" href="https://gdal.org" target="_top">GDAL</a>地理空间数据抽象库用于支持 PostGIS 2 中引入的大部分栅格功能。同样，GDAL 中支持 PostGIS 所需的改进也将回馈给 GDAL 项目。</p><p><a class="link" href="https://www.proj4.org" target="_top">PROJ</a>地图投影库</p><p>最后但同样重要的是，PostGIS所依赖的庞然大物<a class="link" href="http://www.postgresql.org" target="_top">PostgreSQL</a>。PostGIS的速度和灵活性很大程度上得益于PostgreSQL提供的可扩展性、强大的查询规划器、GIST索引以及丰富的SQL功能。</p></dd></dl></div></section></section><section class="chapter" id="postgis_installation"><div class="titlepage"><div><div><h1 class="title">Chapter 2. PostGIS 安装</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#install_short_version">2.1. 简短版本</a></span></li><li><span class="section"><a href="#PGInstall">2.2. 从源代码编译和安装</a></span></li><li><span class="section"><a href="#installing_pagc_address_standardizer">2.3. 安装和使用地址标准化工具</a></span></li><li><span class="section"><a href="#loading_extras_tiger_geocoder">2.4. 安装、升级 Tiger地理编码器并加载数据</a></span></li><li><span class="section"><a href="#idm989">2.5. 常见问题</a></span></li></ul></div><p>本章介绍安装 PostGIS 所需的步骤。 </p><section class="section" id="install_short_version"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.1. 简短版本</h2></div></div></div><p>如果所有依赖项都在路径中，请按如下方式编译：</p><pre class="programlisting">tar -xvzf postgis-3.5.2.tar.gz
cd postgis-3.5.2
./configure
make
make install</pre><p>安装 PostGIS 后，您需要使每个数据库可用（<a class="xref" href="#create_spatial_db" title="3.3. 创建空间数据库">Section 3.3, “创建空间数据库”</a>）或升级它（<a class="xref" href="#upgrading" title="3.4. 升级空间数据库">Section 3.4, “升级空间数据库”</a>）。 </p></section><section class="section" id="PGInstall"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.2. 从源代码编译和安装</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#install_getting_source">2.2.1. 获取源代码</a></span></li><li><span class="section"><a href="#install_requirements">2.2.2. 安装要求</a></span></li><li><span class="section"><a href="#installation_configuration">2.2.3. 构建配置</a></span></li><li><span class="section"><a href="#idm680">2.2.4. 构建</a></span></li><li><span class="section"><a href="#make_install_postgis_extensions">2.2.5. 构建和部署PostGIS扩展</a></span></li><li><span class="section"><a href="#idm749">2.2.6. 测试</a></span></li><li><span class="section"><a href="#idm778">2.2.7. 安装</a></span></li></ul></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>现在许多操作系统都包含 PostgreSQL/PostGIS 的预构建包。 在许多情况下，只有当您想要最前沿的版本或者您是软件包维护者时才需要编译。 </p><p>本节提供一般编译过程。 如果您正在针对Windows或其他操作系统进行编译，则可以在<a class="link" href="https://trac.osgeo.org/postgis/wiki/UsersWikiInstall" target="_top">PostGIS 用户编译指南</a>或<a class="link" href="http://trac.osgeo.org/postgis/wiki/DevWikiMain" target="_top">PostGIS开发Wiki</a>中找到更详细的帮助。</p><p>可以在 PostGIS 预构建包中找到许多操作系统的<a class="link" href="https://trac.osgeo.org/postgis/wiki/UsersWikiPackages" target="_top">PostGIS 预构建包</a>列表</p><p>如果您是 Windows 用户，您可以通过 Stackbuilder 或 <a class="link" href="https://postgis.net/windows_downloads" target="_top">PostGIS Windows下载站点</a>获得稳定的版本。我们还有非常前沿的<a class="link" href="https://postgis.net/windows_downloads" target="_top">Windows实验性版本</a>，通常每周构建一次，或者在有令人兴奋的新变化发生时构建。你可以使用这些版本来尝试正在进行中的PostGIS发布</p></td></tr></table></div><p>PostGIS 模块是PostgreSQL服务的扩展。 PostGIS3.5.2 <span class="emphasis"><em>需要</em></span>完整的 PostgreSQL 服务器标头进行编译。你可以在PostgreSQL 12 - 17之间构建。 <span class="emphasis"><em>不</em></span>支持旧版本的PostgreSQL。 </p><p>如果您没有安装 PostgreSQL，请参阅PostgreSQL安装指南。它位于 <a class="link" href="https://www.postgresql.org" target="_top"> https://www.postgresql.org </a>。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于GEOS功能，当您安装PostgresQL时，您可能需要将PostgreSQL显式链接到标准C++库： </p><pre class="programlisting">LDFLAGS=-lstdc++ ./configure [YOUR OPTIONS HERE]</pre><p>这是解决与旧开发工具不正常交互的虚假C++异常的一种变通方法。如果你遇到奇怪的问题（例如，后端意外关闭或类似的问题），尝试这个技巧。当然，这将需要重新从头编译你的PostgreSQL。 </p></td></tr></table></div><p>下一步是概述 PostGIS 源配置和编译。 这些是为Linux用户编写的，不适用于Windows或Mac。 </p><section class="section" id="install_getting_source"><div class="titlepage"><div><div><h3 class="title">2.2.1. 获取源代码</h3></div></div></div><p>从下载站点 <a class="link" href="https://download.osgeo.org/postgis/source/postgis-3.5.2.tar.gz" target="_top"> https://download.osgeo.org/postgis/source/postgis-3.5.2.tar.gz </a> 获取源代码的存档 </p><pre class="programlisting">wget https://download.osgeo.org/postgis/source/postgis-3.5.2.tar.gz
tar -xvzf postgis-3.5.2.tar.gz
cd postgis-3.5.2</pre><p>这将在当前工作目录中创建一个名为 <code class="varname">postgis-3.5.2</code> 的目录。 </p><p>或者从<a class="link" href="https://git-scm.com/" target="_top"> git </a> 存储库 <a class="link" href="https://git.osgeo.org/gitea/postgis/postgis/" target="_top"> https://git.osgeo.org/gitea/postgis/postgis/ </a> 中查看它。 </p><pre class="programlisting">git clone https://git.osgeo.org/gitea/postgis/postgis.git postgis
cd postgis
sh autogen.sh
    </pre><p>切换到新创建的 <code class="varname">postgis</code>目录以继续安装。 </p><pre class="programlisting">./configure</pre></section><section class="section" id="install_requirements"><div class="titlepage"><div><div><h3 class="title">2.2.2. 安装要求</h3></div></div></div><p>要构建和使用 PostGIS，您需要： </p><p>
	  <span class="bold"><strong>不可缺少</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PostgreSQL12 - 16。需要完整安装 PostgreSQL（包括服务器标头）。PostgreSQL可从<a class="link" href="https://www.postgresql.org" target="_top">https://www.postgresql.org </a> 获取。 </p><p>请参阅 <a class="link" href="https://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS" target="_top">https://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS</a> 中完整的 PosgreSQL/PostGIS 和 PostGIS/GEOS 支持表 </p></li><li class="listitem"><p>GNU C 编译器 (<code class="filename">gcc</code>)。其他一些 ANSI C 编译器也可以用来编译PostGIS，但使用<code class="filename">gcc</code>编译时我们发现问题要少得多。 </p></li><li class="listitem"><p>GNU Make（<code class="filename">gmake</code> or <code class="filename">make</code>）。对于许多系统，GNU <code class="filename">make</code>是 make 的默认版本。通过调用<code class="filename">make -v</code>检查版本。 其他版本的<code class="filename">make</code>可能无法正确处理 PostGIS <code class="filename">Makefile</code>。 </p></li><li class="listitem"><p>Proj重投影库。需要项目 6.1 或更高版本。Proj 库用于在 PostGIS 中提供坐标重投影支持。Proj 可以从<a class="link" href="https://proj.org/" target="_top"> https://proj.org/ </a> 下载。 </p></li><li class="listitem"><p>GEOS 几何库，版本 3.8.0 或更高版本，但为了充分利用所有新的函数和特性，需要使用 GEOS 3.12+。您可以从以下链接下载 GEOS：<a class="link" href="https://libgeos.org/" target="_top"> https://libgeos.org </a>。 </p></li><li class="listitem"><p>LibXML2、2.5.x 或更高版本。 目前，导入函数（ST_GeomFromGML和ST_GeomFromKML）使用 LibXML2。 您可以从 <a class="link" href="https://gitlab.gnome.org/GNOME/libxml2/-/releases" target="_top">https://gitlab.gnome.org/GNOME/libxml2/-/releases</a> 下载 LibXML2。 </p></li><li class="listitem"><p>JSON-C 0.9或更高版本。JSON-C 目前用于按 ST_GeomFromGeoJson 导入 GeoJSON。 JSON-C 可从 <a class="link" href="https://github.com/json-c/json-c/releases" target="_top">https://github.com/json-c/json-c/releases/</a> 下载。 </p></li><li class="listitem"><p>GDAL, version 3+ is preferred. This is required for raster support. <a class="link" href="https://gdal.org/download.html" target="_top">https://gdal.org/download.html</a>. </p></li><li class="listitem"><p>要使用PostgreSQL+JIT进行编译，需要LLVM版本6或更高版本。请参阅 <a class="link" href="https://trac.osgeo.org/postgis/ticket/4125" target="_top">https://trac.osgeo.org/postgis/ticket/4125</a>。 </p></li></ul></div><p>
	  <span class="bold"><strong>可选择的</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>GDAL（伪可选）仅当您不需要栅格时才可以将其省略。另请确保启用您要使用的驱动程序，如<a class="xref" href="#raster_configuration" title="3.2. 配置栅格支持">Section 3.2, “配置栅格支持”</a>中所述。 </p></li><li class="listitem"><p>GTK（需要 GTK+2.0， 2.8+）。用于编译shp2pgsql-gui，一个shapefile loader。它位于 <a class="link" href="http://www.gtk.org/" target="_top"> http://www.gtk.org/ </a>。 </p></li><li class="listitem"><p>SFCGAL, 1.4.1 or higher is required and 1.5.0+ is needed to be able to use all functionality. SFCGAL can be used to provide additional 2D and 3D advanced analysis functions to PostGIS cf <a class="xref" href="#reference_sfcgal" title="Chapter 8. SFCGAL函数参考">Chapter 8, <em>SFCGAL函数参考</em></a>. And also allow to use SFCGAL rather than GEOS for some 2D functions provided by both backends (like ST_Intersection or ST_Area, for instance). A PostgreSQL configuration variable <code class="code">postgis.backend</code> allow end user to control which backend he want to use if SFCGAL is installed (GEOS by default). Nota: SFCGAL 1.2 require at least CGAL 4.3 and Boost 1.54 (cf: <a class="link" href="https://sfcgal.org" target="_top">https://sfcgal.org</a>) <a class="link" href="https://gitlab.com/sfcgal/SFCGAL/" target="_top">https://gitlab.com/sfcgal/SFCGAL/</a>. </p></li><li class="listitem"><p>要构建<a class="xref" href="#Address_Standardizer" title="12.1. 地址标准化工具">Section 12.1, “地址标准化工具”</a>，您还需要PCRE<a class="link" href="http://www.pcre.org" target="_top">http://www.pcre.org</a>（通常安装在 nix 系统上）。检测到 PCRE 库后，将自动构建<a class="xref" href="#Address_Standardizer" title="12.1. 地址标准化工具">Section 12.1, “地址标准化工具”</a> 。 或者，指定它在配置期间有效。<code class="varname">--with-pcre-dir=/path/to/pcre</code>。 </p></li><li class="listitem"><p>要启用ST_AsMVT，您需要ProtoBuf-C库（运行时）和ProtoC-C编译器（构建时）。要检查 protobuf-c 的正确最低版本，需要 pkg-config。 参见<a class="link" href="https://github.com/protobuf-c/protobuf-c" target="_top">protobuf-c</a>。默认情况下，PostGIS 使用 Wagyu 快速评估 MVT 多边形，但需要 C++11 编译器。 使用 CXXFLAGS 使用您用于 PostgreSQL 安装的相同编译器。如果要禁用此功能并改用 GEOS，请在配置期间指定它。 <code class="varname">--without-wagyu</code>。 </p></li><li class="listitem"><p>CUnit（<code class="filename">CUnit</code>）。 这是回归测试所需要的。 <a class="link" href="http://cunit.sourceforge.net/" target="_top">http://cunit.sourceforge.net/</a> </p></li><li class="listitem"><p>DocBook (<code class="filename">xsltproc</code>)构建文档需要。Docbook可从<a class="link" href="http://www.docbook.org/" target="_top"> http://www.docbook.org/ </a> 获取。 </p></li><li class="listitem"><p>DBLatex (<code class="filename">dblatex</code>)需要以 PDF 格式构建文档。它位于 <a class="link" href="http://dblatex.sourceforge.net/" target="_top"> http://dblatex.sourceforge.net/ </a>。 </p></li><li class="listitem"><p>ImageMagick (<code class="filename">convert</code>)生成文档中使用的图像。它位于<a class="link" href="http://www.imagemagick.org/" target="_top"> http://www.imagemagick.org/ </a>。 </p></li></ul></div></section><section class="section" id="installation_configuration"><div class="titlepage"><div><div><h3 class="title">2.2.3. 构建配置</h3></div></div></div><p>与大多数 Linux 安装一样，第一步是生成一个将用于构建源代码的 Makefile。 这是通过 shell 脚本完成的 </p><p>
		<span class="command"><strong>./configure</strong></span>
	  </p><p>如果未提供任何参数，此命令将自动查找在系统上构建 PostGIS 源代码所需的组件和库。<span class="command"><strong>./configure</strong></span> 是一种常见的用法，但它接受一些参数，以防您在非标准位置拥有必要的库或程序。 </p><p>以下列表显示了常用参数：有关完整列表，请使用 <span class="command"><strong>--help</strong></span> 或 <span class="command"><strong>--help=short</strong></span>参数。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--with-library-minor-version</code></span></dt><dd><p>从 PostGIS 3.0 开始，默认生成的库文件将不再将次要版本作为文件名的一部分。 这意味着所有 PostGIS 3 库都将以 <code class="code">postgis-3</code> 结尾。 这样做是为了使 pg_upgrade 更容易，缺点是您只能在服务器中安装一个版本的 PostGIS 3 系列。 要获取文件的旧行为（包括次要版本）：例如 <code class="code">postgis-3.0</code> 将此开关添加到您的配置语句中。</p></dd><dt><span class="term"><code class="option">--prefix=PREFIX</code></span></dt><dd><p>指定要安装 PostGIS 库和 SQL 脚本的位置。 默认情况下，它将与检测到的 PostgreSQL 安装位置相同。 </p><div class="caution"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Caution]" src="images/caution.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此参数当前已损坏，只会安装在PostgreSQL的位置。有关此错误的跟踪，请参阅 <a class="link" href="http://trac.osgeo.org/postgis/ticket/635" target="_top"> http://trac.osgeo.org/postgis/ticket/635 </a>。 </p></td></tr></table></div></dd><dt><span class="term"><code class="option">--with-pgconfig=FILE</code></span></dt><dd><p>PostgreSQL有一个名为<span class="command"><strong>pg_config</strong></span>的实用程序，使PostGIS等扩展能够定位PostgreSQL安装目录。使用此参数 （<span class="command"><strong>--with-pgconfig=/path/to/pg_config</strong></span>）可以手动指定 PostGIS 的特定 PostgreSQL 的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-gdalconfig=FILE</code></span></dt><dd><p>GDAL是必需的库，提供栅格支持 <span class="command"><strong>gdal-config</strong></span>所需的功能，以使软件安装能够找到 GDAL装目录。使用此参数 （<span class="command"><strong>--with-gdalconfig=/path/to/gdal-config</strong></span>）手动指定 PostGIS 将针对其构建的特定 GDAL的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-geosconfig=FILE</code></span></dt><dd><p>作为一个基本的几何库，GEOS 有一个名为 <span class="command"><strong>geos-config</strong></span>的实用程序，它会告诉您在安装软件时在哪里安装 GEOS。使用此参数 （<span class="command"><strong>--with-geosconfig=/path/to/geos-config</strong></span>） 手动指定要用于 PostGIS 构建的特定 GEOS的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-xml2config=FILE</code></span></dt><dd><p>LibXML 是执行 GeomFromKML/GML 过程所需的库。通常情况下，如果您已安装 libxml，它将被找到，但如果没有或者您想使用特定版本，您需要指定一个特定的 <code class="filename">xml2-config</code> 配置文件，以便让软件安装程序找到 LibXML 安装目录。使用这个参数 (<span class="command"><strong>&gt;--with-xml2config=/path/to/xml2-config</strong></span>) 来手动指定 PostGIS 将构建的特定 LibXML 安装。 </p></dd><dt><span class="term"><code class="option">--with-projdir=DIR</code></span></dt><dd><p>Proj是PostGIS必不可少的投影库。使用此参数 （<span class="command"><strong>--with-projdir=/path/to/projdir</strong></span>）手动指定要用于 PostGIS 构建的特定 Proj 的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-libiconv=DIR</code></span></dt><dd><p>iconv的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-jsondir=DIR</code></span></dt><dd><p><a class="link" href="http://oss.metaparadigm.com/json-c/" target="_top">JSON-C</a> 是 MIT 许可的 JSON 库，是 PostGIS ST_GeomFromJSON 所必需的。使用此参数 （<span class="command"><strong>--with-jsondir=/path/to/jsondir</strong></span>） 手动指定要用于 PostGIS 构建的特定 JSON-C的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-pcredir=DIR</code></span></dt><dd><p><a class="link" href="http://www.pcre.org/" target="_top">PCRE</a> 是 address_standardizer 扩展所需的 BSD 许可的 Perl 兼容正则表达式库。使用此参数 (<span class="command"><strong>--with-pcredir=/path/to/pcredir</strong></span>) 手动指定 PostGIS 将构建的特定 PCRE 的安装目录。 </p></dd><dt><span class="term"><code class="option">--with-gui</code></span></dt><dd><p>编译数据导入GUI（需要 GTK+2.0）。此参数为 shp2pgsql 创建一个名为 shp2pgsql-gui 的图形用户界面。 </p></dd><dt><span class="term"><code class="option">--without-raster</code></span></dt><dd><p>在没有栅格功能的情况下进行编译。 </p></dd><dt><span class="term"><code class="option">--without-topology</code></span></dt><dd><p>在没有拓扑支持的情况下进行编译。 拓扑所需的所有逻辑都是在postgis-3.5.2 库中创建的，因此没有关联的库。 </p></dd><dt><span class="term"><code class="option">--with-gettext=no</code></span></dt><dd><p>默认情况下，会检测 gettext 并使用它进行编译，但如果在导致加载程序损坏的不兼容问题下运行，则此命令可以禁用它。使用此功能的配置可以解决的问题示例，请参见<a class="link" href="http://trac.osgeo.org/postgis/ticket/748" target="_top">http://trac.osgeo.org/postgis/ticket/748</a>。 注意：关闭此功能不会消除许多功能。 它用于 GUI 加载器中的内部帮助/标签功能，这些功能尚未记录，处于实验阶段。 </p></dd><dt><span class="term"><code class="option">--with-sfcgal=PATH</code></span></dt><dd><p>默认情况下，如果没有此开关，PostGIS 将不会安装 sfcgal 支持。 <code class="varname">PATH</code> 是一个可选参数，允许指定 sfcgal-config 的备用 PATH。 </p></dd><dt><span class="term"><code class="option">--without-phony-revision</code></span></dt><dd><p>禁用 postgis_revision.h 更新以匹配 Git 存储库中的当前 HEAD。 </p></dd></dl></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果要从<a class="link" href="https://trac.osgeo.org/postgis/wiki/CodeRepository" target="_top">代码存储库</a> 获取PostGIS，请先运行以下脚本 </p><p>
		  <span class="command"><strong>./autogen.sh</strong></span>
		</p><p>此脚本生成<span class="command"><strong>配置</strong></span>脚本。这用于自定义 PostGIS 安装。 </p><p>如果要获取 PostGIS 作为存档文件，则无需<span class="command"><strong>./autogen.sh</strong></span>，因为 <span class="command"><strong>配置</strong></span>已经生成。 </p></td></tr></table></div></section><section class="section" id="idm680"><div class="titlepage"><div><div><h3 class="title">2.2.4. 构建</h3></div></div></div><p>生成Makefile后，构建PostGIS就像运行命令一样简单 </p><p>
		<span class="command"><strong>make</strong></span>
	  </p><p>如果在输出的最后一行看到“<code class="code">PostGIS was built successfully. Ready to install.</code>”，则表示您已完成 </p><p>从 PostGIS v1.4.0 开始，所有函数都有从文档生成的注释。如果您希望稍后将这些注释安装到空间数据库中，请运行需要的 docbook 命令。postgis_comments.sql 和其他包注释文件 raster_comments.sql、topology_comments.sql 也打包在 doc 文件夹中的 tar.gz 中，因此如果从 tar 包中安装，则无需进行注释。 注释包含在 CREATE EXTENSION 安装中。 </p><p>
		<span class="command"><strong>make comments</strong></span>
	  </p><p>它是在PostGIS 2.0中引入的。 生成适合快速参考和讲义的HTML备忘单，供正在学习的人使用。 xsltproc 是必需的，生成 4 个文件。<code class="filename">topology_cheatsheet.html</code>,<code class="filename">tiger_geocoder_cheatsheet.html</code>,<code class="filename">raster_cheatsheet.html</code>, <code class="filename">postgis_cheatsheet.html</code> </p><p>预构建的HTML和PDF版本可以在<a class="link" href="http://www.postgis.us/study_guides" target="_top">PostGIS / PostgreSQL学习指南</a>中找到</p><p>
		<span class="command"><strong>make cheatsheets</strong></span>
	  </p></section><section class="section" id="make_install_postgis_extensions"><div class="titlepage"><div><div><h3 class="title">2.2.5. 构建和部署PostGIS扩展</h3></div></div></div><p>如果您使用的是 PostgreSQL 9.1 或更高版本，则会自动构建并安装PostGIS 扩展。 </p><p>如果要从源存储库构建，则必须先构建函数描述。这些是在安装文档手册时构建的。 您也可以手动安装： </p><p>
	  <span class="command"><strong>make comments</strong></span>
    </p><p>如果从存档文件构建，则其中一些注释文件已经构建，因此无需构建注释。</p><p>如果您针对 PostgreSQL 9.1 进行构建，则应在 make 安装过程中自动构建扩展。如果需要，可以从扩展文件夹生成，或者根据需要在另一台服务器上复制该文件。 </p><pre class="programlisting">cd extensions
cd postgis
make clean
make
export PGUSER=postgres #overwrite psql variables
make check #to test before install
make install
# to test extensions
make check RUNTESTFLAGS=--extension</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="code">make check</code> 使用 psql 来运行测试，并使用 psql 环境变量。常用的可用于覆盖的有 <code class="varname">PGUSER</code> 、<code class="varname">PGPORT</code> 和 <code class="varname">PGHOST</code>。参考<a class="link" href="https://www.postgresql.org/docs/current/libpq-envars.html" target="_top">psql环境变量</a> </p></td></tr></table></div><p>无论操作系统如何，扩展文件在同一版本的 PostGIS 中始终相同。只要已安装 PostGIS 二进制文件，就可以将扩展文件从一个操作系统复制到另一个操作系统。 </p><p>如果您想在与您的开发不同的单独服务器上手动安装扩展，您需要将扩展文件夹中的以下文件复制到 PostgreSQL 安装的 <code class="filename">PostgreSQL/share/extension</code> 文件夹中 常规 PostGIS 所需的二进制文件（如果服务器上还没有它们）。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>这些控制文件表示信息，例如要安装的扩展版本（如果未指定）。 <code class="filename">postgis.control，postgis_topology.control</code>。 </p></li><li class="listitem"><p>每个扩展名的 /sql 文件夹中的所有文件。请注意，必须复制到 PostgreSQL 共享/扩展文件夹的顶层。<code class="filename">extensions/postgis/sql/*.sql</code>, <code class="filename">extensions/postgis_topology/sql/*.sql</code> </p></li></ul></div><p>完成这一步后，你应该在 PgAdmin&gt; 中看到 <code class="varname">postgis</code>、<code class="varname">postgis_topology</code> 作为可用的扩展。</p><p>如果使用 psql，则可以运行以下查询来验证是否已安装扩展：</p><pre class="programlisting">SELECT name, default_version,installed_version
FROM pg_available_extensions WHERE name LIKE 'postgis%' or name LIKE 'address%';

             name             | default_version | installed_version
------------------------------+-----------------+-------------------
 address_standardizer         | 3.5.2         | 3.5.2
 address_standardizer_data_us | 3.5.2         | 3.5.2
 postgis                      | 3.5.2         | 3.5.2
 postgis_raster               | 3.5.2         | 3.5.2
 postgis_sfcgal               | 3.5.2         |
 postgis_tiger_geocoder       | 3.5.2         | 3.5.2
 postgis_topology             | 3.5.2         |
(6 rows)</pre><p>如果您正在查询的数据库中安装了扩展程序，您将在 <code class="varname">installed_version</code> 列中看到提及。 如果您没有收到任何记录，则意味着您的服务器上根本没有安装 postgis 扩展。 PgAdmin III 1.14+ 还将在数据库浏览器树的<code class="varname">扩展</code> 部分中提供此信息，甚至允许通过右键单击进行升级或卸载。</p><p>如果您有有效的扩展，则可以使用 pgAdmin 扩展接口或通过运行以下 SQL 将 PostGIS 扩展安装到所选数据库：</p><pre class="programlisting">CREATE EXTENSION postgis;
CREATE EXTENSION postgis_raster;
CREATE EXTENSION postgis_sfcgal;
CREATE EXTENSION fuzzystrmatch; --needed for postgis_tiger_geocoder
--optional used by postgis_tiger_geocoder, or can be used standalone
CREATE EXTENSION address_standardizer;
CREATE EXTENSION address_standardizer_data_us;
CREATE EXTENSION postgis_tiger_geocoder;
CREATE EXTENSION postgis_topology;</pre><p>在 psql 中，你可以使用以下命令来查看你已安装的版本以及它们所在的模式。 </p><pre class="programlisting">\connect mygisdb
\x
\dx postgis*</pre><pre class="screen">List of installed extensions
-[ RECORD 1 ]-------------------------------------------------
Name        | postgis
Version     | 3.5.2
Schema      | public
Description | PostGIS geometry, geography, and raster spat..
-[ RECORD 2 ]-------------------------------------------------
Name        | postgis_raster
Version     | 3.0.0dev
Schema      | public
Description | PostGIS raster types and functions
-[ RECORD 3 ]-------------------------------------------------
Name        | postgis_tiger_geocoder
Version     | 3.5.2
Schema      | tiger
Description | PostGIS tiger geocoder and reverse geocoder
-[ RECORD 4 ]-------------------------------------------------
Name        | postgis_topology
Version     | 3.5.2
Schema      | topology
Description | PostGIS topology spatial types and functions</pre><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>无法直接备份扩展表 <code class="varname">spatial_ref_sys</code>、<code class="varname">layer</code>、<code class="varname">topology</code>。只有在备份相应的 <code class="varname">postgis</code> 或 <code class="varname">postgis_topology</code> 扩展时，它们才会被备份，而这似乎只会在备份整个数据库时发生。从 PostGIS 2.0.1 开始，仅在备份数据库时会备份未与 PostGIS 打包的 srid 记录，因此请不要随意更改我们打包的 srid，并期望您的更改会存在。如果您发现问题，请提交工单。由于扩展表的结构是使用 <code class="code">CREATE EXTENSION</code> 创建的，并且假定在给定版本的扩展中是相同的，因此它们永远不会被备份。这些行为内置在当前的 PostgreSQL 扩展模型中，所以我们无法改变这一点。</p></td></tr></table></div><p>如果你在没有使用扩展系统的情况下安装了3.5.2版本，你可以通过运行以下命令将其转换为基于扩展的安装方式，以将函数打包到各自的扩展中。在PostgreSQL 13中已移除了使用`unpackaged`安装方式，因此建议在升级到PostgreSQL 13之前切换到扩展构建方式。 </p><pre class="programlisting">CREATE EXTENSION postgis FROM unpackaged;
CREATE EXTENSION postgis_raster FROM unpackaged;
CREATE EXTENSION postgis_topology FROM unpackaged;
CREATE EXTENSION postgis_tiger_geocoder FROM unpackaged;
</pre></section><section class="section" id="idm749"><div class="titlepage"><div><div><h3 class="title">2.2.6. 测试</h3></div></div></div><p>要测试 PostGIS，请运行以下命令 </p><p>
		<span class="command"><strong>make check</strong></span>
	  </p><p>此命令使用针对实际 PostgreSQL 数据库生成的库执行各种检查和回归测试。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您使用非标准 PostgreSQL、GEOS 或 Proj 位置配置 PostGIS，则可能需要将它们的库位置添加到 <code class="varname">LD_LIBRARY_PATH</code> 环境变量中。 </p></td></tr></table></div><div class="caution"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Caution]" src="images/caution.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>目前，<span class="command"><strong>make check</strong></span> 依赖于<code class="code">PATH</code>和 <code class="code">PGPORT</code>环境变量来执行检查。它<span class="emphasis"><em>不</em></span>是使用 <span class="command"><strong>--with-pgconfig</strong></span>配置参数指定的 PostgreSQL。编辑路径以匹配在配置期间检测到的 PostgreSQL。 或者为不可避免的麻烦做好准备。 </p></td></tr></table></div><p>如果成功，make check 将产生近 500 个测试的输出。结果将类似于 以下（下面省略了许多行）： </p><pre class="programlisting">CUnit - A unit testing framework for C - Version 2.1-3
     http://cunit.sourceforge.net/

        .
        .
        .

Run Summary:    Type  Total    Ran Passed Failed Inactive
              suites     44     44    n/a      0        0
               tests    300    300    300      0        0
             asserts   4215   4215   4215      0      n/a
Elapsed time =    0.229 seconds

        .
        .
        .

Running tests

        .
        .
        .

Run tests: 134
Failed: 0


-- if you build with SFCGAL

        .
        .
        .

Running tests

        .
        .
        .

Run tests: 13
Failed: 0

-- if you built with raster support

        .
        .
        .

Run Summary:    Type  Total    Ran Passed Failed Inactive
              suites     12     12    n/a      0        0
               tests     65     65     65      0        0
             asserts  45896  45896  45896      0      n/a


        .
        .
        .

Running tests

        .
        .
        .

Run tests: 101
Failed: 0

-- topology regress

.
.
.

Running tests

        .
        .
        .

Run tests: 51
Failed: 0

-- if you built --with-gui, you should see this too

     CUnit - A unit testing framework for C - Version 2.1-2
     http://cunit.sourceforge.net/

        .
        .
        .

Run Summary:    Type  Total    Ran Passed Failed Inactive
              suites      2      2    n/a      0        0
               tests      4      4      4      0        0
             asserts      4      4      4      0      n/a</pre><p><code class="varname">postgis_tiger_geocoder</code> and <code class="varname">address_standardizer</code> 扩展目前仅支持标准的 PostgreSQL 安装检查。要测试这些，请使用以下命令。注意：如果您已经在 PostGIS 代码文件夹的根目录中进行了安装，则不需要进行安装。</p><p>对于address_standardizer: </p><pre class="programlisting">cd extensions/address_standardizer
make install
make installcheck
          </pre><p>输出应类似于以下内容： </p><pre class="screen">============== dropping database "contrib_regression" ==============
DROP DATABASE
============== creating database "contrib_regression" ==============
CREATE DATABASE
ALTER DATABASE
============== running regression test queries        ==============
test test-init-extensions     ... ok
test test-parseaddress        ... ok
test test-standardize_address_1 ... ok
test test-standardize_address_2 ... ok

=====================
 All 4 tests passed.
=====================</pre><p>对于 tiger 地理编码器，请确保您的 PostgreSQL 实例中具有可用的 postgis 和 fuzzystrmatch 扩展。如果您在address_standardizer支持下构建了postgis，address_standardizer测试也将启动： </p><pre class="programlisting">cd extensions/postgis_tiger_geocoder
make install
make installcheck
          </pre><p>输出应类似于以下内容: </p><pre class="screen">============== dropping database "contrib_regression" ==============
DROP DATABASE
============== creating database "contrib_regression" ==============
CREATE DATABASE
ALTER DATABASE
============== installing fuzzystrmatch               ==============
CREATE EXTENSION
============== installing postgis                     ==============
CREATE EXTENSION
============== installing postgis_tiger_geocoder      ==============
CREATE EXTENSION
============== installing address_standardizer        ==============
CREATE EXTENSION
============== running regression test queries        ==============
test test-normalize_address   ... ok
test test-pagc_normalize_address ... ok

=====================
All 2 tests passed.
=====================</pre></section><section class="section" id="idm778"><div class="titlepage"><div><div><h3 class="title">2.2.7. 安装</h3></div></div></div><p>要安装 PostGIS，请运行以下命令 </p><p>
		<span class="command"><strong>make install</strong></span>
	  </p><p>这会将 PostGIS 安装文件复制到由<span class="command"><strong>--prefix</strong></span>参数指定的相应子目录。以下是值得注意的子目录： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>加载程序和转储程序二进制文件安装在 <code class="filename">[prefix]/bin</code>。 </p></li><li class="listitem"><p>SQL 文件（例如 <code class="filename">postgis.sql</code>）安装在 <code class="filename">[prefix]/share/contrib</code> 中。 </p></li><li class="listitem"><p>PostGIS 库安装在<code class="filename">[prefix]/lib</code>。 </p></li></ul></div><p>如果之前生成了<span class="command"><strong>make 注释</strong></span>，请运行以下命令来安装这些 SQL 文件：<code class="filename">postgis_comments.sql</code>,<code class="filename">raster_comments.sql</code> </p><p>
		<span class="command"><strong>make comments-install</strong></span>
	  </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="filename">postgis_comments.sql</code>, <code class="filename">raster_comments.sql</code>, <code class="filename">topology_comments.sql</code>成为 <span class="command"><strong>xsltproc</strong></span> 的外部依赖关系，因此它与正常的构建和安装分离。 </p></td></tr></table></div></section></section><section class="section" id="installing_pagc_address_standardizer"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.3. 安装和使用地址标准化工具</h2></div></div></div><p><code class="code">address_standardizer</code>扩展是一个单独的包，需要单独下载。它包含在 PostGIS 2.2 中。有关address_standardize可以执行的操作以及如何配置它的其他信息，请参见<a class="xref" href="#Address_Standardizer" title="12.1. 地址标准化工具">Section 12.1, “地址标准化工具”</a>。</p><p>该标准化器可以与 PostGIS 打包的 Tiger 地理编码器扩展结合使用，作为所讨论的 <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> 的替代品。 要用作替代品，请参阅<a class="xref" href="#tiger_pagc_address_standardizing" title="2.4.2. 将地址标准化器扩展与 Tiger 地理编码器结合使用">Section 2.4.2, “将地址标准化器扩展与 Tiger 地理编码器结合使用”</a>。 您还可以将其用作您自己的地理编码器的构建块，或使用它来标准化您的地址，以便更轻松地比较地址。</p><p>地址标准化器依赖于 PCRE，它通常已安装在许多 Nix 系统上，但您可以在以下位置下载最新版本：<a class="link" href="http://www.pcre.org" target="_top">http://www.pcre.org</a>。如果在<a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a>期间找到 PCRE，则将自动构建地址标准化器扩展。如果您想使用自定义 pcre 安装，请传递到 <code class="code">--with-pcredir=/path/to/pcre</code>，其中<code class="filename">/path/to/pcre</code>是 pcre include 和 lib 目录的根文件夹。</p><p>在 Windows 上，PostGIS 2.1 及更高版本附带了地址标准化扩展，因此您无需编译即可立即使用。直接进入<code class="code">CREATE EXTENSION</code>步骤。</p><p>安装后，可以连接到目标数据库并执行以下 SQL：</p><pre class="programlisting">CREATE EXTENSION address_standardizer;</pre><p>对于下面的测试，我们不需要rules、gaz、lex 表</p><pre class="programlisting">SELECT num, street, city, state, zip
 FROM parse_address('1 Devonshire Place PH301, Boston, MA 02109');</pre><p>输出应类似于以下内容</p><pre class="screen">num |         street         |  city  | state |  zip
-----+------------------------+--------+-------+-------
 1   | Devonshire Place PH301 | Boston | MA    | 02109</pre></section><section class="section" id="loading_extras_tiger_geocoder"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.4. 安装、升级 Tiger地理编码器并加载数据</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#install_tiger_geocoder_extension">2.4.1. 在 PostGIS 数据库中启用Tiger地理编码器</a></span></li><li><span class="section"><a href="#tiger_pagc_address_standardizing">2.4.2. 将地址标准化器扩展与 Tiger 地理编码器结合使用</a></span></li><li><span class="section"><a href="#tiger_geocoder_required_tools">2.4.3. Tiger数据加载所需工具</a></span></li><li><span class="section"><a href="#upgrade_tiger_geocoder">2.4.4. 升级您的 Tiger 地理编码器 安装和数据</a></span></li></ul></div><p>像Tiger地理编码器这样的附加组件可能未包含在您的PostGIS分发中。如果您缺少tiger 地理编码器扩展或想要比您的安装提供的更新版本，那么可以使用适用于您PostgreSQL版本的<code class="filename">share/extension/postgis_tiger_geocoder.*</code>文件，这些文件可以从<a class="link" href="http://postgis.net/windows_downloads/" target="_top">Windows未发布版本</a>部分的软件包中获取。尽管这些软件包是为Windows准备的，但postgis_tiger_geocoder扩展文件将在任何操作系统上工作，因为该扩展只是一个SQL/plpgsql扩展。</p><section class="section" id="install_tiger_geocoder_extension"><div class="titlepage"><div><div><h3 class="title">2.4.1. 在 PostGIS 数据库中启用Tiger地理编码器</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>出于本主题的目的，我们假设您已经为 PostgreSQL 安装了postgis_tiger_geocoder扩展。</p></li><li class="listitem"><p>使用 psql、pgAdmin 或其他工具连接到数据库，然后运行以下 SQL 命令： 如果要在已有 PostGIS 的数据库上进行安装，则无需执行第一步。 如果已安装扩展，则不需要执行第二步<code class="varname">fuzzystrmatch</code>。</p><pre class="programlisting">CREATE EXTENSION postgis;
CREATE EXTENSION fuzzystrmatch;
CREATE EXTENSION postgis_tiger_geocoder;
--this one is optional if you want to use the rules based standardizer (pagc_normalize_address)
CREATE EXTENSION address_standardizer;</pre><p>如果已安装postgis_tiger_geocoder扩展，并且只想更新到最新版本，请运行：</p><pre class="programlisting">ALTER EXTENSION postgis UPDATE;
ALTER EXTENSION postgis_tiger_geocoder UPDATE;</pre><p>如果生成自己的条目或对<code class="varname">tiger.loader_platform</code>和<code class="varname">tiger.loader_variables</code>进行更改，则可能需要更新它们。</p></li><li class="listitem"><p>若要验证安装是否成功，请在目标数据库中运行以下 SQL：</p><pre class="programlisting">SELECT na.address, na.streetname,na.streettypeabbrev, na.zip
        FROM normalize_address('1 Devonshire Place, Boston, MA 02109') AS na;</pre><p>输出应类似于以下内容</p><pre class="screen">address | streetname | streettypeabbrev |  zip
---------+------------+------------------+-------
           1 | Devonshire | Pl               | 02109</pre></li><li class="listitem"><p><code class="varname">tiger.loader_platform</code>生成表的新记录，其中包含可执行文件或服务器的路径。 </p><p><code class="code">sh</code>作为在约定后生成名为 debbie 的配置文件的示例，请运行以下命令：</p><pre class="programlisting">INSERT INTO tiger.loader_platform(os, declare_sect, pgbin, wget, unzip_command, psql, path_sep,
                   loader, environ_set_command, county_process_command)
SELECT 'debbie', declare_sect, pgbin, wget, unzip_command, psql, path_sep,
           loader, environ_set_command, county_process_command
  FROM tiger.loader_platform
  WHERE os = 'sh';</pre><p>然后将<span class="emphasis"><em>declare_sect</em></span>列中的路径编辑为适合Debbie 的pg、unzip、shp2pgsql、psql 等路径位置。</p><p>如果您不编辑此 <code class="varname">loader_platform</code> 表，它将仅包含项目的常见位置，并且您必须在生成脚本后编辑生成的脚本。</p></li><li class="listitem"><p>从 PostGIS 2.4.1 开始，邮政编码 5 位制表区域 <code class="varname">zcta5</code>加载步骤已修改为加载当前 zcta5 数据，并且在启用时是<a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> 的一部分。默认情况下它是关闭的，因为它需要相当长的时间来加载（20 到 60 分钟），占用相当多的磁盘空间，并且不经常使用。</p><p>要启用它，请执行以下操作：</p><pre class="programlisting">UPDATE tiger.loader_lookuptables SET load = true WHERE table_name = 'zcta520';</pre><p>如果添加了边界过滤器并将其限制为边界内的 ZIP，则在存在 ZCTA5 的情况下将使用<a class="xref" href="#Geocode" title="Geocode">Geocode</a> 函数。当返回的地址没有邮政编码时，将使用<a class="xref" href="#Reverse_Geocode" title="Reverse_Geocode">Reverse_Geocode</a>函数，这通常发生在高速公路上的反向地理编码中。</p></li><li class="listitem"><p>如果您有到服务器的快速网络连接，请在服务器根目录或本地电脑上创建一个名为 <code class="filename">gisdata</code>的文件夹。该文件夹是 Tiger 文件下载和处理的位置。 如果您对该文件夹位于服务器根目录不满意，或者只是想更改为不同的文件夹进行暂存，请编辑 <code class="varname">tiger.loader_variables</code>表中的字段 <code class="varname">staging_fold</code>。</p></li><li class="listitem"><p><code class="filename">gisdata</code>在该文件夹中创建一个名为 temp 的文件夹。或者，创建由<code class="varname">staging_fold</code>指示的文件夹。 这是加载程序提取下载的 Tiger 数据的地方。</p></li><li class="listitem"><p>然后运行<a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a>SQL 函数，确保使用自定义配置文件的名称并将脚本复制到 .sh 或 .bat 文件。例如，如果要使用新的配置文件加载国家/地区：</p><pre class="programlisting">psql -c "SELECT Loader_Generate_Nation_Script('debbie')" -d geocoder -tA &gt; /gisdata/nation_script_load.sh</pre></li><li class="listitem"><p>运行命令行脚本以加载生成的国家/地区数据。</p><pre class="programlisting">cd /gisdata
sh nation_script_load.sh</pre></li><li class="listitem"><p>运行国家/地区脚本后，将在架构中创建三个表来存储数据。 从 psql 或 pgAdmin 运行以下查询进行验证： <code class="code">tiger_data</code></p><pre class="programlisting">SELECT count(*) FROM tiger_data.county_all;</pre><pre class="screen">count
-------
  3235
(1 row)</pre><pre class="programlisting">SELECT count(*) FROM tiger_data.state_all;</pre><pre class="screen">count
-------
    56
(1 row)
</pre><p>这将只包含数据，如果您标记了ZCTA5要加载</p><pre class="programlisting">SELECT count(*) FROM tiger_data.zcta5_all;</pre><pre class="screen">count
-------
  33933
(1 row)
</pre></li><li class="listitem"><p>默认情况下，不加载<code class="varname">bg</code>, <code class="varname">tract</code>, <code class="varname">tabblock20</code>对应的表。这些表不被地理编码器使用，但被人们用来进行人口统计。如果您希望将它们作为状态加载的一部分进行加载，请运行以下语句来启用它们。</p><pre class="programlisting">UPDATE tiger.loader_lookuptables SET load = true WHERE load = false AND lookup_name IN('tract', 'bg', 'tabblock20');</pre><p>或者,可以使用<a class="xref" href="#Loader_Generate_Census_Script" title="Loader_Generate_Census_Script">Loader_Generate_Census_Script</a>加载状态数据，然后仅加载这些表</p></li><li class="listitem"><p>对于要加载数据的每个状态，请使用<a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>创建状态脚本。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在完成加载国家/地区数据之前，请勿创建状态脚本。这是因为状态脚本使用国家/地区脚本中加载的国家/地区列表。</p></td></tr></table></div></li><li class="listitem"><pre class="programlisting">psql -c "SELECT Loader_Generate_Script(ARRAY['MA'], 'debbie')" -d geocoder -tA &gt; /gisdata/ma_load.sh</pre></li><li class="listitem"><p>运行生成的命令行脚本。</p><pre class="programlisting">cd /gisdata
sh ma_load.sh</pre></li><li class="listitem"><p>在所有数据完成加载或到达断点后，最好对所有tiger表运行分析以更新其状态（包括继承的表）</p><pre class="programlisting">SELECT install_missing_indexes();
vacuum (analyze, verbose) tiger.addr;
vacuum (analyze, verbose) tiger.edges;
vacuum (analyze, verbose) tiger.faces;
vacuum (analyze, verbose) tiger.featnames;
vacuum (analyze, verbose) tiger.place;
vacuum (analyze, verbose) tiger.cousub;
vacuum (analyze, verbose) tiger.county;
vacuum (analyze, verbose) tiger.state;
vacuum (analyze, verbose) tiger.zcta5;
vacuum (analyze, verbose) tiger.zip_lookup_base;
vacuum (analyze, verbose) tiger.zip_state;
vacuum (analyze, verbose) tiger.zip_state_loc;</pre></li></ol></div></section><section class="section" id="tiger_pagc_address_standardizing"><div class="titlepage"><div><div><h3 class="title">2.4.2. 将地址标准化器扩展与 Tiger 地理编码器结合使用</h3></div></div></div><p>您可能认为有问题的众多事情之一是在地理编码之前进行格式化地址的<a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> 函数。地址规范化远非完美，修补它可能会占用大量资源。 因此，我们将其集成到其他项目中，具有更好的地址标准化引擎。要使用此新的地址标准化，请按照<a class="xref" href="#installing_pagc_address_standardizer" title="2.3. 安装和使用地址标准化工具">Section 2.3, “安装和使用地址标准化工具”</a>中所述编译扩展并将其安装在数据库中。</p><p>在安装了 <code class="code">postgis_tiger_geocoder</code> 的同一数据库中安装此扩展程序后，就可以使用 <a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> 代替 <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>。 此扩展与 Tiger 无关，因此可以与其他数据源（例如国际地址）一起使用。 Tiger 地理编码器扩展确实附带了自己的自定义版本 <a class="xref" href="#rulestab" title="rules table">rules table</a> (<code class="code">tiger.pagc_rules</code>) 、 <a class="xref" href="#gaztab" title="gaz table">gaz table</a> (<code class="code">tiger. pagc_gaz</code>）和<a class="xref" href="#lextab" title="lex table">lex table</a> (<code class="code">tiger.pagc_lex</code>)。 您可以添加和更新这些内容，以根据自己的需求改善标准化体验。</p></section><section class="section" id="tiger_geocoder_required_tools"><div class="titlepage"><div><div><h3 class="title">2.4.3. Tiger数据加载所需工具</h3></div></div></div><p>加载过程从人口普查网站下载各个国家文件、所请求的州的数据，提取文件，然后将每个州加载到其自己单独的一组州表中。每个状态表都继承自 <code class="varname">tiger</code>模式中定义的表，因此，如果您需要重新加载状态或不需要重新加载状态，则只需查询这些表即可访问所有数据并随时使用 <a class="xref" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a> 删除一组状态表不再需要一个国家了。</p><p>启用数据加载需要以下工具：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>提取从人口普查网站获得的ZIP文件的工具。</p><p>在类Unix系统上，它是一个可执行文件。<code class="varname">unzip</code>通常已经安装在大多数类Unix平台上。</p><p>在Windows上，它是7-zip。它是一个免费的压缩解压缩工具，可以从<a class="link" href="http://www.7-zip.org/" target="_top">http://www.7-zip.org/</a>下载 </p></li><li class="listitem"><p><code class="filename">shp2pgsql</code> 命令。默认情况下，它在安装PostGIS时安装。</p></li><li class="listitem"><p><code class="filename">wget</code> 命令。它是一个Web检索工具，通常安装在大多数Unix / Linux系统上。</p><p>对于 Windows，您可以从<a class="link" href="http://gnuwin32.sourceforge.net/packages/wget.htm" target="_top">http://gnuwin32.sourceforge.net/packages/wget.htm</a> 获取编译的二进制文件 </p></li></ul></div><p>如果您要从 Tiger_2010 升级，则需要首先生成并运行 <a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a>。在加载任何州数据之前，您需要加载使用 <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> 执行的全国范围数据。这将为您生成一个加载器脚本。<a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> 是一个一次性步骤，应该在升级（从上一年的tiger普查数据）和新安装时完成。</p><p>要加载状态数据，请参阅<a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>为您的平台生成所需状态的数据加载脚本。 请注意，您可以零碎地安装这些。 您不必一次加载您想要的所有状态。 您可以根据需要加载它们。</p><p>加载所需的状态后，如</p><pre class="programlisting">SELECT install_missing_indexes();</pre><p>所示：尝试运行 <a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a>。</p><p>要测试您是否能够执行应执行的操作，您将在使用 <a class="xref" href="#Geocode" title="Geocode">Geocode</a>的州的地址上运行地理编码器 </p></section><section class="section" id="upgrade_tiger_geocoder"><div class="titlepage"><div><div><h3 class="title">2.4.4. 升级您的 Tiger 地理编码器 安装和数据</h3></div></div></div><p>首先postgis_tiger_geocoder按如下所示升级扩展：</p><pre class="programlisting">ALTER EXTENSION postgis_tiger_geocoder UPDATE;</pre><p>然后删除所有国家/地区表并加载新的国家/地区表。 如<a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a>中所述，使用此 SQL 语句生成删除脚本</p><pre class="programlisting">SELECT drop_nation_tables_generate_script();</pre><p>执行生成的删除SQL语句。</p><p>如<a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a>中所述，使用此 SELECT 语句生成删除脚本</p><p><span class="bold"><strong>对于Windows</strong></span></p><pre class="programlisting">SELECT loader_generate_nation_script('windows'); </pre><p><span class="bold"><strong>对于unix/linux</strong></span></p><pre class="programlisting">SELECT loader_generate_nation_script('sh');</pre><p>有关如何运行生成脚本的说明，请参见 <a class="xref" href="#install_tiger_geocoder_extension" title="2.4.1. 在 PostGIS 数据库中启用Tiger地理编码器">Section 2.4.1, “在 PostGIS 数据库中启用Tiger地理编码器”</a>。 您只需要执行此操作一次。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>您可以混合使用不同年份的状态表，并且可以单独升级每个状态。 在升级某个州之前，您首先需要使用 <a class="xref" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a> 删除该州前一年的州表。</p></td></tr></table></div></section></section><section class="section" id="idm989"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.5. 常见问题</h2></div></div></div><p>当安装或升级未按预期进行时，需要检查一些事项。 </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>请确保已安装 PostgreSQL12 或更新版本，并且你正在使用与正在运行的 PostgreSQL 版本相同的 PostgreSQL 源代码进行编译。当你的（Linux）发行版已经安装了 PostgreSQL，或者以其他方式安装了 PostgreSQL 但忘记了时，可能会出现混淆。PostGIS 只能与 PostgreSQL12 或更新版本一起使用，如果使用较旧版本，可能会出现奇怪且意想不到的错误消息。要检查正在运行的 PostgreSQL 版本，可以使用 psql 连接到数据库并运行以下查询： </p><pre class="programlisting">SELECT version();</pre><p>如果您运行的是基于 RPM 的发行版，则可以使用<span class="command"><strong>rpm</strong></span>命令检查是否存在带有 <span class="command"><strong>rpm -qa | grep postgresql</strong></span>的预安装软件包 </p></li><li class="listitem"><p>如果升级失败，请确保还原到已安装PostGIS的数据库。</p><pre class="programlisting">SELECT postgis_full_version();</pre></li></ol></div><p>此外，请检查配置是否正确检测到 PostgreSQL、Proj4 库和 GEOS 库的安装位置。 </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>配置的输出用于生成 <code class="filename">postgis_config.h</code> 文件。检查<code class="varname">POSTGIS_PGSQL_VERSION</code>, <code class="varname">POSTGIS_PROJ_VERSION</code>和<code class="varname">POSTGIS_GEOS_VERSION</code>变量是否已正确设置。 </p></li></ol></div></section></section><section class="chapter" id="postgis_administration"><div class="titlepage"><div><div><h1 class="title">Chapter 3. PostGIS 管理</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#database_tuning_configuration">3.1. 性能调优</a></span></li><li><span class="section"><a href="#raster_configuration">3.2. 配置栅格支持</a></span></li><li><span class="section"><a href="#create_spatial_db">3.3. 创建空间数据库</a></span></li><li><span class="section"><a href="#upgrading">3.4. 升级空间数据库</a></span></li></ul></div><section class="section" id="database_tuning_configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.1. 性能调优</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm1024">3.1.1. 启动</a></span></li><li><span class="section"><a href="#idm1049">3.1.2. 运行</a></span></li></ul></div><p>PostGIS 性能的调优与任何 PostgreSQL 工作负载的调优非常相似。 唯一需要额外考虑的是，几何图形和栅格通常很大，因此与内存相关的优化通常对 PostGIS 的影响比其他类型的 PostgreSQL 查询更大。</p><p>有关优化 PostgreSQL 的一般详细信息，请参阅 <a class="link" href="https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server" target="_top">调整 PostgreSQL 服务器</a>。</p><p>对于 PostgreSQL 9.4+，可以使用<code class="code"> ALTER SYSTEM</code> 命令在服务器级别设置配置，而无需触及 <code class="code">postgresql.conf</code> 或 <code class="code">postgresql.auto.conf</code>。</p><pre class="programlisting">ALTER SYSTEM SET work_mem = '256MB';
-- this forces non-startup configs to take effect for new connections
SELECT pg_reload_conf();
-- show current setting value
-- use SHOW ALL to see all settings
SHOW work_mem;</pre><p>除了 Postgres 设置之外，PostGIS 还有一些自定义设置，请参见<a class="xref" href="#PostGIS_GUC" title="7.22. 大一统自定义变量 (GUCs)">Section 7.22, “大一统自定义变量 (GUCs)”</a>。</p><section class="section" id="idm1024"><div class="titlepage"><div><div><h3 class="title">3.1.1. 启动</h3></div></div></div><p>这些设置在<code class="code"> postgresql.conf </code>中配置： </p><p>
         <a class="link" href="http://www.postgresql.org/docs/current/static/runtime-config-query.html#GUC-CONSTRAINT-EXCLUSION" target="_top">constraint_exclusion</a>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>默认：分区 </p></li><li class="listitem"><p>这通常用于表分区。默认设置为 "partition"，适用于 PostgreSQL 8.4 及更高版本，因为它将强制查询规划器仅在表处于继承层次结构中时分析约束考虑，否则将不会对规划器产生影响。 </p></li></ul></div><p>
         <a class="link" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-SHARED-BUFFERS" target="_top">共享缓冲区</a>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>默认值：PostgreSQL 9.6 中约为 128MB </p></li><li class="listitem"><p>将其设置为可用RAM的约 25% 到 40%。在 Windows 上，您可能无法设置得那么高。 </p></li></ul></div><p><a class="link" href="https://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAX-WORKER-PROCESSES" target="_top">max_worker_processes </a>此设置仅适用于 PostgreSQL 9.4 +。 对于 PostgreSQL 9.6+，此设置具有额外的重要性，因为它控制并行查询可以拥有的最大进程数。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>默认值：8 </p></li><li class="listitem"><p>设置系统可以支持的最大后台进程数。 该参数只能在服务器启动时设置。 </p></li></ul></div></section><section class="section" id="idm1049"><div class="titlepage"><div><div><h3 class="title">3.1.2. 运行</h3></div></div></div><p><a class="link" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-WORK-MEM" target="_top">work_mem</a> - 设置用于排序操作和复杂查询的内存大小 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>默认：1-4MB </p></li><li class="listitem"><p>针对大型数据库、复杂查询、大量 RAM 进行调整 </p></li><li class="listitem"><p>针对许多并发用户或 RAM 较低的情况进行下调。 </p></li><li class="listitem"><p>如果您有大量 RAM 而开发人员很少： </p><pre class="programlisting">SET work_mem TO '256MB';</pre><p>
          </p></li></ul></div><p><a class="link" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAINTENANCE-WORK-MEM" target="_top">Maintenance_work_mem</a> - 用于 VACUUM、CREATE INDEX 等的内存大小。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>默认值：16-64MB </p></li><li class="listitem"><p>通常太低 - 占用 I/O，在交换内存时锁定对象 </p></li><li class="listitem"><p>建议在具有/大量 RAM 的生产服务器上使用 32 MB 到 1GB，但取决于并发用户数。 如果您有大量 RAM 而开发人员很少： </p><pre class="programlisting">SET maintenance_work_mem TO '1GB';</pre><p>
          </p></li></ul></div><p>
        <a class="link" href="https://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAX-PARALLEL-WORKERS-PER-GATHER" target="_top">max_parallel_workers_per_gather</a>
      </p><p>此设置仅适用于 PostgreSQL 9.6+，并且只会影响 PostGIS 2.3 +，因为只有 PostGIS 2.3+ 支持并行查询。 如果设置为高于 0，则某些查询（例如涉及 <code class="code">ST_Intersects </code>等关系函数的查询）可以使用多个进程，并且运行速度可以提高两倍以上。 如果您有大量空闲处理器，则应将其值更改为您拥有的处理器数量。 还要确保将 <code class="code">max_worker_processes </code>提高到至少与此数字一样高。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>默认:0 </p></li><li class="listitem"><p>设置由单个<code class="varname"> Gather </code>节点启动的最大工作进程数。并行工作进程来自<code class="varname"> max_worker_processes </code>建立的进程池。请注意，在运行时，请求的工作进程数量可能实际上无法使用。如果出现这种情况，计划将以比预期更少的工作进程运行，这可能效率低下。将此值设置为默认值 0 将禁用并行查询执行。 </p></li></ul></div></section></section><section class="section" id="raster_configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.2. 配置栅格支持</h2></div></div></div><p>如果启用了栅格的支持，则可能需要读一下下面的内容来正确配置它。 </p><p>从 PostGIS 2.1.3 开始，默认情况下禁用数据库外栅格和所有栅格驱动程序要启用它们，请在服务器上设置环境变量 <code class="varname">POSTGIS_GDAL_ENABLED_DRIVERS</code> 和<code class="varname">POSTGIS_ENABLE_OUTDB_RASTERS</code>。PostGIS 2.2 提供了一种跨平台方法，用于根据第 <a class="xref" href="#PostGIS_GUC" title="7.22. 大一统自定义变量 (GUCs)">Section 7.22, “大一统自定义变量 (GUCs)”</a> 进行设置。</p><p>如果要启用离线栅格：</p><pre class="programlisting">POSTGIS_ENABLE_OUTDB_RASTERS=1</pre><p>如果包括任何其它值或不包含值，则会禁用离线栅格。</p><p>若想启用已经安装的 GDAL 驱动，请设置以下环境变量</p><pre class="programlisting">POSTGIS_GDAL_ENABLED_DRIVERS=ENABLE_ALL</pre><p>如果只想启用某些驱动，请按如下所示设置环境变量：</p><pre class="programlisting">POSTGIS_GDAL_ENABLED_DRIVERS="GTiff PNG JPEG GIF XYZ"</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 Windows 上，不要在驱动程序列表中加上引号</p></td></tr></table></div><p>环境变量的设置因操作系统而异。对于在 Ubuntu 或 Debian 上通过 apt-postgresql 安装的 PostgreSQL，首选方法是编辑<code class="filename">/etc/postgresql/<em class="replaceable"><code>10</code></em>/<em class="replaceable"><code>main</code></em>/environment</code> ，其中数字 10 是 PostgreSQL 的版本，main 表示集群。</p><p>在 Windows 上，如果您作为服务运行，则可以通过系统变量进行设置，对于 Windows 7，您可以通过右键单击计算机 -&gt; 属性高级系统设置或在资源管理器中导航至 <code class="varname">控制面板\所有 控制面板项目\系统</code>。 然后点击<span class="emphasis"><em>高级系统设置-&gt;高级-&gt;环境变量</em></span>并添加新的系统变量。</p><p>设置环境变量后，您需要重启 PostgreSQL 服务才能使更改生效。</p></section><section class="section" id="create_spatial_db"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.3. 创建空间数据库</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#create_new_db_extensions">3.3.1. 使用扩展（EXTENSION）启用空间数据库</a></span></li><li><span class="section"><a href="#create_new_db">3.3.2. 不通过扩展（EXTENSION）的方式启用空间数据库（不建议）</a></span></li></ul></div><section class="section" id="create_new_db_extensions"><div class="titlepage"><div><div><h3 class="title">3.3.1. 使用扩展（EXTENSION）启用空间数据库</h3></div></div></div><p>如果您使用的是 PostgreSQL 9.1 以上的版本，并且已经编译并安装了 postgis 扩展模块，那么数据库将在 PG 的扩展机制下成为空间数据库。 </p><p>postgis 的核心扩展包括几何、地理、spatial_ref_sys 以及所有函数和注释。栅格（Raster）和拓扑（Topology）打包为单独的扩展模块。 </p><p>在要启用空间的数据库中运行以下SQL代码段： </p><pre class="programlisting">CREATE EXTENSION IF NOT EXISTS plpgsql;
      CREATE EXTENSION postgis;
      CREATE EXTENSION postgis_raster; -- OPTIONAL
      CREATE EXTENSION postgis_topology; -- OPTIONAL
</pre><p>
	</p></section><section class="section" id="create_new_db"><div class="titlepage"><div><div><h3 class="title">3.3.2. 不通过扩展（EXTENSION）的方式启用空间数据库（不建议）</h3></div></div></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>通常，仅当你不能或不想在PostgreSQL扩展的目录中安装PostGIS时（例如，在测试或开发期间，或在受限环境中），才需要这样做。</p></td></tr></table></div><p>将 PostGIS 对象和函数定义添加到数据库中是通过加载位于构建阶段指定的 <code class="filename">[prefix]/share/contrib</code> 中的各种 sql 文件来完成的。 </p><p>核心 PostGIS 对象（几何和地理类型及其支持函数）位于 <code class="filename">postgis.sql</code> 脚本中。 栅格对象位于 <code class="filename">rtpostgis.sql</code> 脚本中。 拓扑对象位于 <code class="filename">topology.sql</code> 脚本中。 </p><p>对于完整的 EPSG 坐标系定义标识符集，您还可以加载 <code class="filename">spatial_ref_sys.sql</code> 定义文件并填充 <code class="varname">spatial_ref_sys</code> 表。 这将允许您对几何图形执行 ST_Transform() 操作。 </p><p>如果您希望向 PostGIS 函数添加注释，可以在 <code class="filename">postgis_comments.sql</code> 脚本中找到它们。 只需从 <span class="command"><strong>psql</strong></span> 终端窗口输入 <span class="command"><strong>\dd [function_name]</strong></span> 即可查看注释。 </p><p>在终端中运行以下 shell 命令： </p><pre class="programlisting">DB=[yourdatabase]
    SCRIPTSDIR=`pg_config --sharedir`/contrib/postgis-3.4/

    # Core objects
    psql -d ${DB} -f ${SCRIPTSDIR}/postgis.sql
    psql -d ${DB} -f ${SCRIPTSDIR}/spatial_ref_sys.sql
    psql -d ${DB} -f ${SCRIPTSDIR}/postgis_comments.sql # OPTIONAL

    # Raster support (OPTIONAL)
    psql -d ${DB} -f ${SCRIPTSDIR}/rtpostgis.sql
    psql -d ${DB} -f ${SCRIPTSDIR}/raster_comments.sql # OPTIONAL

    # Topology support (OPTIONAL)
    psql -d ${DB} -f ${SCRIPTSDIR}/topology.sql
    psql -d ${DB} -f ${SCRIPTSDIR}/topology_comments.sql # OPTIONAL
</pre><p>
  </p></section></section><section class="section" id="upgrading"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.4. 升级空间数据库</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#soft_upgrade">3.4.1. 软升级</a></span></li><li><span class="section"><a href="#hard_upgrade">3.4.2. 硬升级</a></span></li></ul></div><p>当您需要替换或部署新的 PostGIS 对象定义时，升级现有空间数据库可能会很棘手。 </p><p>遗憾的是，并非所有定义都可以在正在运行的数据库中轻松替换，因此转储/重装可能是最好的选择。 </p><p>PostGIS 为次要版本升级和错误修复提供软升级，为主要升级提供硬升级。 </p><p>在尝试升级PostGIS之前备份数据始终是值得的。 可以将 -fc 标志与 pg_dump 一起使用，以始终通过硬升级还原转储。 </p><section class="section" id="soft_upgrade"><div class="titlepage"><div><div><h3 class="title">3.4.1. 软升级</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#soft_upgrade_extensions">3.4.1.1. 使用 9.1 或更高版本的扩展进行软升级</a></span></li><li><span class="section"><a href="#soft_upgrade_sql_script">3.4.1.2. 9.1之前版本或者无扩展软升级</a></span></li></ul></div><p>如果使用扩展安装数据库，则必须使用扩展模型对其进行升级。 如果使用较旧的 SQL 脚本进行安装，则应切换到扩展，因为不再支持 SQL 脚本。 </p><section class="section" id="soft_upgrade_extensions"><div class="titlepage"><div><div><h4 class="title">3.4.1.1. 使用 9.1 或更高版本的扩展进行软升级</h4></div></div></div><p>如果使用扩展程序安装了PostGIS，则需要使用该扩展程序进行升级。使用扩展程序进行小升级非常轻松。</p><p>如果您运行的是 PostGIS 3 或更高版本，则应升级到已安装的具有<a class="xref" href="#PostGIS_Extensions_Upgrade" title="PostGIS_Extensions_Upgrade">PostGIS_Extensions_Upgrade</a>功能的最新版本。</p><pre class="programlisting">SELECT postgis_extensions_upgrade();</pre><p>如果您运行的是 PostGIS 2.5 或更早版本，执行以下操作：</p><pre class="programlisting">ALTER EXTENSION postgis UPDATE;
SELECT postgis_extensions_upgrade();
-- This second call is needed to rebundle postgis_raster extension
SELECT postgis_extensions_upgrade();
</pre><p>如果安装了多个版本的 PostGIS，并且不想升级到最新版本，则可以指定显式版本。 执行以下操作：</p><pre class="programlisting">ALTER EXTENSION postgis UPDATE TO "3.5.2";
ALTER EXTENSION postgis_topology UPDATE TO "3.5.2";</pre><p>您可能会看到类似于以下内容的错误通知：</p><pre class="programlisting">No migration path defined for … to 3.5.2</pre><p>在这种情况下，必须备份数据库，按照 <a class="xref" href="#create_new_db_extensions" title="3.3.1. 使用扩展（EXTENSION）启用空间数据库">Section 3.3.1, “使用扩展（EXTENSION）启用空间数据库”</a>中所述生成新数据库，然后将备份还原到新数据库。</p><p>您可能会收到类似于以下内容的消息：</p><pre class="programlisting">Version "3.5.2" of extension "postgis" is already installed</pre><p>那么一切都已经是最新的，您可以安全地忽略它。 <span class="bold"><strong>除非</strong></span>您正在尝试从开发版本升级到下一个版本（不会获得新的版本号）； 在这种情况下，您可以将“next”附加到版本字符串，下次您需要再次删除“next”后缀： </p><pre class="programlisting">ALTER EXTENSION postgis UPDATE TO "3.5.2next";
ALTER EXTENSION postgis_topology UPDATE TO "3.5.2next";</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您最初安装 PostGIS 时没有指定版本，则通常可以在恢复之前跳过 postgis 扩展的重新安装，因为备份只有 <code class="code">CREATE EXTENSION postgis</code> ，因此在恢复期间会选择最新版本。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您要从 3.0.0 之前的版本升级 PostGIS 扩展，您将拥有一个新的扩展 <span class="emphasis"><em>postgis_raster</em></span>，如果您不需要栅格支持，则可以安全地删除该扩展。 您可以按如下方式删除：</p><pre class="programlisting">DROP EXTENSION postgis_raster;</pre></td></tr></table></div></section><section class="section" id="soft_upgrade_sql_script"><div class="titlepage"><div><div><h4 class="title">3.4.1.2. 9.1之前版本或者无扩展软升级</h4></div></div></div><p>它适用于在不使用扩展名的情况下安装了PostGIS的人。如果您使用的是扩展并使用此方法，您将看到类似于以下内容的消息：</p><pre class="programlisting">can't drop … because postgis extension depends on it</pre><p>注： 如果要迁移到 r1 之前的 PostGIS 7429.* 或 PostGIS 2.*，则此过程不可用，但需要执行<a class="link" href="#hard_upgrade" title="3.4.2. 硬升级">硬升级</a>。 </p><p>编译并安装（make install）后，您应该在安装文件夹中找到一组 <code class="filename">*_upgrade.sql</code> 文件。 您可以通过以下方式列出它们： </p><pre class="programlisting">ls `pg_config --sharedir`/contrib/postgis-3.5.2/*_upgrade.sql</pre><p>从 <code class="filename">postgis_upgrade.sql</code> 开始依次加载它们。 </p><pre class="programlisting">psql -f postgis_upgrade.sql -d your_spatial_database</pre><p>相同的过程适用于栅格、拓扑和 sfcgal 扩展，升级文件分别名为 <code class="filename">rtpostgis_upgrade.sql</code>、<code class="filename">topology_upgrade.sql</code> 和 <code class="filename">sfcgal_upgrade.sql</code>。 如果您需要它们： </p><pre class="programlisting">psql -f rtpostgis_upgrade.sql -d your_spatial_database</pre><pre class="programlisting">psql -f topology_upgrade.sql -d your_spatial_database</pre><pre class="programlisting">psql -f sfcgal_upgrade.sql -d your_spatial_database</pre><p>建议您通过运行切换到基于扩展的安装</p><pre class="programlisting">psql -c "SELECT postgis_extensions_upgrade();"</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您找不到专门用于升级您的版本的 <code class="filename">postgis_upgrade.sql</code>，那么您使用的版本对于软升级来说还太早，需要执行<a class="link" href="#hard_upgrade" title="3.4.2. 硬升级">硬升级</a>。 </p></td></tr></table></div><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>函数的“进程需要升级”消息提供了有关需要执行此类升级的信息。 </p></section></section><section class="section" id="hard_upgrade"><div class="titlepage"><div><div><h3 class="title">3.4.2. 硬升级</h3></div></div></div><p>硬升级意味着完全转储/重新加载 PostGIS 中可用的数据。如果 PostGIS 对象的内部存储状态发生更改或无法进行软升级，则需要硬升级。 附录中的<a class="link" href="#release_notes" title="Appendix A. 附录">发行说明</a>指示每个版本是否需要转储/重新加载（硬升级）。 </p><p>转储/重新加载操作由脚本辅助postgis_restore。 此脚本跳过属于 PostGIS 的所有定义（包括旧定义）。 您还可以将方案和数据恢复到 PostGIS 安装的数据库，而不会传递重复的符号错误或已弃用的对象。 </p><p>有关 Windows 的其他信息，请参阅 <a class="link" href="http://trac.osgeo.org/postgis/wiki/UsersWikiWinUpgrade" target="_top">Windows 硬升级</a>。</p><p>程序如下： </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>创建要升级的数据库的“自定义格式”转储（我们称之为 <code class="varname">olddb</code>），包括二进制 blob (-b) 和详细 (-v) 输出。 用户可以是数据库的所有者，不必是postgres超级帐户。 </p><pre class="programlisting">pg_dump -h localhost -p 5432 -U postgres -Fc -b -v -f "/somepath/olddb.backup" olddb</pre></li><li class="listitem"><p>在新数据库中全新安装 PostGIS - 我们将此数据库称为 <code class="varname">newdb</code>。 请参阅 <a class="xref" href="#create_new_db" title="3.3.2. 不通过扩展（EXTENSION）的方式启用空间数据库（不建议）">Section 3.3.2, “不通过扩展（EXTENSION）的方式启用空间数据库（不建议）”</a> 和 <a class="xref" href="#create_new_db_extensions" title="3.3.1. 使用扩展（EXTENSION）启用空间数据库">Section 3.3.1, “使用扩展（EXTENSION）启用空间数据库”</a> 了解如何执行此操作的说明。 </p><p>转储中的spatial_ref_sys将还原，但不会覆盖现有spatial_ref_sys。 这是为了确保对正式数据集的更正被传送到要恢复的数据库。 如果要覆盖标准条目，只需在生成 newdb 时不要加载spaltial_ref_sys.sql文件。 </p><p>如果您的数据库确实很旧，或者您知道在视图和函数中使用了长期不推荐使用的函数，则可能需要为所有函数和视图等加载 <code class="filename">legacy.sql</code> 才能正确返回 。 仅在确实需要时才执行此操作。 如果可能的话，请考虑在转储之前升级您的视图和函数。 稍后可以通过加载 <code class="filename">uninstall_legacy.sql</code> 来删除已弃用的函数。 </p></li><li class="listitem"><p>使用 postgis_restore 将备份恢复到新的 <code class="varname">newdb</code> 数据库中。 意外错误（如果有）将由 psql 打印到标准错误流。 记录这些内容。 </p><pre class="programlisting">postgis_restore "/somepath/olddb.backup" | psql -h localhost -p 5432 -U postgres newdb 2&gt; errors.txt</pre></li></ol></div><p>在以下情况下可能会发生错误： </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>您的某些视图或函数使用已弃用的 PostGIS 对象。 为了解决这个问题，您可以尝试在恢复之前加载 <code class="filename">legacy.sql</code> 脚本，或者您必须恢复到仍包含这些对象的 PostGIS 版本，并在移植代码后再次尝试迁移。 如果 <code class="filename">legacy.sql</code> 方式适合您，请不要忘记修复您的代码以停止使用已弃用的函数并将其加载 <code class="filename">uninstall_legacy.sql</code>。 </p></li><li class="listitem"><p>一些在转储文件中的自定义空间参考系统记录具有无效的SRID值。有效的SRID值应大于0且小于999000。值在999000.999999范围内被保留供内部使用，而大于999999的值则根本不能使用。所有具有无效SRID的自定义记录将被保留，其中大于999999的值将被移动到保留范围内，但空间_ref_sys表将失去维护该不变条件的检查约束，可能还会失去其主键（当多个无效的SRID值转换为相同的保留SRID值时）。 </p><p>为了解决此问题，您应该将自定义SRS复制到 具有有效值的 SRID（可能在 910000..910999 范围），将所有表转换为新的 srid （请参阅<a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a>），删除无效的 从spatial_ref_sys输入并重建检查： </p><pre class="programlisting">
ALTER TABLE spatial_ref_sys ADD CONSTRAINT spatial_ref_sys_srid_check check (srid 
&gt; 0 AND srid &lt; 999000 );
</pre><pre class="programlisting">ALTER TABLE spatial_ref_sys ADD PRIMARY KEY(srid));
    </pre><p>如果要升级包含法国 <a class="link" href="https://en.wikipedia.org/wiki/Institut_g%C3%A9ographique_national" target="_top"> IGN </a> 映射的旧数据库，则可能会超出 SRID 的范围，并在导入数据库时遇到以下问题： </p><pre class="programlisting">WARNING: SRID 310642222 converted to 999175 (in reserved zone)</pre><p>在这种情况下，您可以尝试以下步骤： 完全丢弃最初从 SQL postgis_restore中产生的 IGN。 为此，请运行以下命令： </p><pre class="programlisting">postgis_restore "/somepath/olddb.backup" &gt; olddb.sql</pre><p>运行以下命令： </p><pre class="programlisting">grep -v IGNF olddb.sql &gt; olddb-without-IGN.sql</pre><p>之后，生成一个新数据库，启用必要的 PostGIS 扩展，并确保使用此 <a class="link" href="https://raw.githubusercontent.com/Remi-C/IGN_spatial_ref_for_PostGIS/master/Put_IGN_SRS_into_Postgis.sql" target="_top"> 脚本</a>插入法语 IGN 系统。 完成这些过程后，按如下方式导入数据： </p><pre class="programlisting">psql -h localhost -p 5432 -U postgres -d newdb -f olddb-without-IGN.sql  2&gt; errors.txt</pre></li></ol></div></section></section></section><section class="chapter" id="using_postgis_dbmanagement"><div class="titlepage"><div><div><h1 class="title">Chapter 4. 数据管理</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#RefObject">4.1. 空间数据模型</a></span></li><li><span class="section"><a href="#PostGIS_Geometry">4.2. 几何数据类型</a></span></li><li><span class="section"><a href="#PostGIS_Geography">4.3. 地理数据类型</a></span></li><li><span class="section"><a href="#OGC_Validity">4.4. 几何有效性验证</a></span></li><li><span class="section"><a href="#spatial_ref_sys">4.5. 空间参考系统</a></span></li><li><span class="section"><a href="#idm2036">4.6. 空间表</a></span></li><li><span class="section"><a href="#loading-data">4.7. 加载空间数据</a></span></li><li><span class="section"><a href="#extracting-data">4.8. 提取空间数据</a></span></li><li><span class="section"><a href="#build-indexes">4.9. 空间索引</a></span></li></ul></div><section class="section" id="RefObject"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.1. 空间数据模型</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#OGC_Geometry">4.1.1. OGC几何图形</a></span></li><li><span class="section"><a href="#SQL_MM_Part3">4.1.2. SQL/MM第3部分-曲线</a></span></li><li><span class="section"><a href="#OpenGISWKBWKT">4.1.3. WKT和WKB</a></span></li></ul></div><section class="section" id="OGC_Geometry"><div class="titlepage"><div><div><h3 class="title">4.1.1. OGC几何图形</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#Point">4.1.1.1. 点（Point）</a></span></li><li><span class="section"><a href="#LineString">4.1.1.2. 线串（LineString）</a></span></li><li><span class="section"><a href="#LinearRing">4.1.1.3. 线性环（LinearRing）</a></span></li><li><span class="section"><a href="#Polygon">4.1.1.4. 多边形（Polygon）</a></span></li><li><span class="section"><a href="#MultiPoint">4.1.1.5. 多点（MultiPoint）</a></span></li><li><span class="section"><a href="#MultiLineString">4.1.1.6. 多线（MultiLineString）</a></span></li><li><span class="section"><a href="#MultiPolygon">4.1.1.7. 多面（MultiPolygon）</a></span></li><li><span class="section"><a href="#GeometryCollection">4.1.1.8. 几何集合（GeometryCollection）</a></span></li><li><span class="section"><a href="#PolyhedralSurface">4.1.1.9. 多面体曲面（PolyhedralSurface）</a></span></li><li><span class="section"><a href="#Triangle">4.1.1.10. 三角形（Triangle）</a></span></li><li><span class="section"><a href="#TIN">4.1.1.11. TIN</a></span></li></ul></div><p>开放地理空间联盟 (OGC) 定义了<a class="link" href="https://www.ogc.org/standards/sfa" target="_top"><span class="emphasis"><em>简单功能访问</em></span></a>标准 (SFA)，以提供地理空间数据模型。 它定义了<span class="bold"><strong>几何</strong></span>的基本空间类型，以及操纵和转换几何值以执行空间分析任务的操作。 PostGIS 将 OGC 几何模型实现为 PostgreSQL 数据类型 <a class="link" href="#PostGIS_Geometry" title="4.2. 几何数据类型">geometry</a> 和 <a class="link" href="#PostGIS_Geography" title="4.3. 地理数据类型">geography</a>。 </p><p>几何是一种<span class="emphasis"><em>抽象</em></span>类型。几何值属于其<span class="emphasis"><em>具体</em></span>子类型之一。子类型表示各种类型和各种维度的几何形状。其中包括<span class="bold"><strong>基本</strong></span>类型<a class="link" href="#Point" title="4.1.1.1. 点（Point）">点</a>, <a class="link" href="#LineString" title="4.1.1.2. 线串（LineString）">线</a>, <a class="link" href="#LinearRing" title="4.1.1.3. 线性环（LinearRing）">线性环</a> 和 <a class="link" href="#Polygon" title="4.1.1.4. 多边形（Polygon）">面</a>, 以及<span class="bold"><strong>集合</strong></span>类型<a class="link" href="#MultiPoint" title="4.1.1.5. 多点（MultiPoint）">多点</a>, <a class="link" href="#MultiLineString" title="4.1.1.6. 多线（MultiLineString）">多线</a>, <a class="link" href="#MultiPolygon" title="4.1.1.7. 多面（MultiPolygon）">多面</a> 和 <a class="link" href="#GeometryCollection" title="4.1.1.8. 几何集合（GeometryCollection）">几何对象集合</a>。<a class="link" href="https://portal.ogc.org/files/?artifact_id=25355" target="_top"><span class="emphasis"><em>简单 功能访问 - 第一部分:通用体系结构v1.2.1</em></span></a> 为结构<a class="link" href="#PolyhedralSurface" title="4.1.1.9. 多面体曲面（PolyhedralSurface）">PolyhedralSurface</a>, <a class="link" href="#Triangle" title="4.1.1.10. 三角形（Triangle）">Triangle</a>和<a class="link" href="#TIN" title="4.1.1.11. TIN">TIN</a>添加了子类型。 </p><p>几何图形在二维笛卡尔平面上对形状进行建模。PolyhedralSurface, Triangle,和 TIN 也可以表示三维空间中的形状。形状的大小和位置由<span class="bold"><strong>坐标</strong></span>指定。每个坐标都有 X 和 Y <span class="bold"><strong>坐标轴</strong></span>值，用于确定其在平面上的位置。形状由点和线构造，点由单个坐标定义，线由两个坐标定义。 </p><p>坐标可能包含可选的Z和M纵坐标值。Z纵坐标通常用于表示高程。M纵坐标包含一个测量值，该值可能表示时间或距离。如果几何值中存在Z或M值，则必须为几何中的每个点定义这些值。如果几何具有 Z 或 M 纵坐标，则<span class="bold"><strong>坐标尺寸</strong></span>为 3D;如果它同时具有 Z 和 M，则坐标尺寸为 4D。 </p><p>几何值与 <span class="bold"><strong>空间参考系统</strong></span>指示它所嵌入的坐标系。空间参考系由几何SRID编号标识。X轴和Y轴的单位由空间参考系确定。<span class="bold"><strong>平面</strong></span>参考系统中，X 和 Y 坐标通常表示东向和北向，而在 <span class="bold"><strong>大地测量</strong></span>测量系统中，它们表示经度和纬度。SRID 0 表示一个具有无单位的无限笛卡尔平面。请参见<a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>。 </p><p>几何<span class="bold"><strong>维度</strong></span>是几何类型的属性。点类型的维度为 0，线性类型的维度为 1， 多边形类型的维度为 2。集合具有最大元素维度的维度。 </p><p>几何值可以为 <span class="bold"><strong>空</strong></span>。空值不包含顶点（对于原子几何类型）或不包含元素（对于集合）。 </p><p>几何值的一个重要属性是它们的空间<span class="bold"><strong>范围</strong></span>或<span class="bold"><strong>边界框</strong></span>，OGC模型将其称为<span class="bold"><strong>包络</strong></span>。这是包含几何坐标的2维或3维框。它是在坐标空间中表示几何图形范围并检查两个几何图形是否相互作用的有效方法。 </p><p>几何模型允许评估拓扑空间关系，如<a class="xref" href="#DE-9IM" title="5.1.1. 维度扩展九交模型（Dimensionally Extended 9-Intersection Model）">Section 5.1.1, “维度扩展九交模型（Dimensionally Extended 9-Intersection Model）”</a>中所述。为了支持这一点，为每种几何类型定义了<span class="bold"><strong>内部</strong></span>, <span class="bold"><strong>外部</strong></span>和<span class="bold"><strong>边界</strong></span>的概念。几何图形在拓扑上是封闭的，因此它们总是包含它们的边界。边界是比几何体本身小一维的几何体。 </p><p>OGC几何模型为每种几何类型定义了有效性规则。这些规则确保几何值表示现实情况（例如，可以指定一个具有孔的多边形位于外壳之外，但从几何角度来看这是没有意义的，因此是无效的）。PostGIS 也允许存储和操作无效的几何值。这允许在需要时检测和修复它们。请参阅<a class="xref" href="#OGC_Validity" title="4.4. 几何有效性验证">Section 4.4, “几何有效性验证”</a> </p><section class="section" id="Point"><div class="titlepage"><div><div><h4 class="title">4.1.1.1. 点（Point）</h4></div></div></div><p>点是表示坐标空间中单个位置的 0 维几何图形。</p><pre class="programlisting">POINT (1 2)
POINT Z (1 2 3)
POINT ZM (1 2 3 4)
</pre></section><section class="section" id="LineString"><div class="titlepage"><div><div><h4 class="title">4.1.1.2. 线串（LineString）</h4></div></div></div><p>线串是由连续的线段序列形成的一维线。每条线段由两个点定义，一条线段的终点形成下一条线段的起点。OGC 有效的 线串具有零个或两个或多个点，但 PostGIS 也允许单点线串。线串可以与自身交叉（自相交）。如果起点和终点相同，则线串是<span class="bold"><strong>闭合</strong></span>的。如果线串不自相交，则它是<span class="bold"><strong>简单</strong></span>的。 </p><pre class="programlisting">LINESTRING (1 2, 3 4, 5 6)</pre></section><section class="section" id="LinearRing"><div class="titlepage"><div><div><h4 class="title">4.1.1.3. 线性环（LinearRing）</h4></div></div></div><p>线性环是一个既封闭又简单的线串。第一个点和最后一个点必须相等，并且线不得自相交。</p><pre class="programlisting">LINEARRING (0 0 0, 4 0 0, 4 4 0, 0 4 0, 0 0 0)</pre></section><section class="section" id="Polygon"><div class="titlepage"><div><div><h4 class="title">4.1.1.4. 多边形（Polygon）</h4></div></div></div><p>多边形是由外部边界(壳)和零个或多个内部边界(洞)分隔的二维平面区域。每个边界都是 <a class="link" href="#LinearRing" title="4.1.1.3. 线性环（LinearRing）">线性环</a>。 </p><pre class="programlisting">POLYGON ((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2 0,1 1 0))</pre></section><section class="section" id="MultiPoint"><div class="titlepage"><div><div><h4 class="title">4.1.1.5. 多点（MultiPoint）</h4></div></div></div><p>多点是点的集合。</p><pre class="programlisting">MULTIPOINT ( (0 0), (1 2) )</pre></section><section class="section" id="MultiLineString"><div class="titlepage"><div><div><h4 class="title">4.1.1.6. 多线（MultiLineString）</h4></div></div></div><p>多线是线串的集合，如果多线的每个元素都已闭合，则该多线闭合。 </p><pre class="programlisting">MULTILINESTRING ( (0 0,1 1,1 2), (2 3,3 2,5 4) )</pre></section><section class="section" id="MultiPolygon"><div class="titlepage"><div><div><h4 class="title">4.1.1.7. 多面（MultiPolygon）</h4></div></div></div><p>多面是非重叠、不相邻多边形的集合。集合中的多边形只能在有限数量的点处接触。 </p><pre class="programlisting">MULTIPOLYGON (((1 5, 5 5, 5 1, 1 1, 1 5)), ((6 5, 9 1, 6 1, 6 5)))</pre></section><section class="section" id="GeometryCollection"><div class="titlepage"><div><div><h4 class="title">4.1.1.8. 几何集合（GeometryCollection）</h4></div></div></div><p>几何集合是几何的异构（混合）集合。</p><pre class="programlisting">GEOMETRYCOLLECTION ( POINT(2 3), LINESTRING(2 3, 3 4))</pre></section><section class="section" id="PolyhedralSurface"><div class="titlepage"><div><div><h4 class="title">4.1.1.9. 多面体曲面（PolyhedralSurface）</h4></div></div></div><p>多面体曲面是共享一些边的斑块或刻面的连续集合。每个面片都是一个平面多边形。如果多边形坐标具有 Z 纵坐标，则表面是三维的。</p><pre class="programlisting">POLYHEDRALSURFACE Z (
  ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
  ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
  ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
  ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
  ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
  ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )</pre></section><section class="section" id="Triangle"><div class="titlepage"><div><div><h4 class="title">4.1.1.10. 三角形（Triangle）</h4></div></div></div><p>三角形是由三个不同的非共线顶点定义的多边形。因为三角形是一个多边形，所以它由四个坐标指定，第一和第四个相等。 </p><pre class="programlisting">TRIANGLE ((0 0, 0 9, 9 0, 0 0))</pre></section><section class="section" id="TIN"><div class="titlepage"><div><div><h4 class="title">4.1.1.11. TIN</h4></div></div></div><p>TIN是一组不重叠的<a class="link" href="#Triangle" title="4.1.1.10. 三角形（Triangle）">三角形</a>，表示了一个<a class="link" href="https://en.wikipedia.org/wiki/Triangulated_irregular_network" target="_top">三角不规则网络（Triangulated Irregular Network）</a>的结构。 </p><pre class="programlisting">TIN Z ( ((0 0 0, 0 0 1, 0 1 0, 0 0 0)), ((0 0 0, 0 1 0, 1 1 0, 0 0 0)) )</pre></section></section><section class="section" id="SQL_MM_Part3"><div class="titlepage"><div><div><h3 class="title">4.1.2. SQL/MM第3部分-曲线</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#CircularString">4.1.2.1. 圆弧串（CircularString）</a></span></li><li><span class="section"><a href="#CompoundCurve">4.1.2.2. 复合曲线（CompoundCurve）</a></span></li><li><span class="section"><a href="#CurvePolygon">4.1.2.3. 曲线多边形（CurvePolygon）</a></span></li><li><span class="section"><a href="#MultiCurve">4.1.2.4. 多曲线（MultiCurve）</a></span></li><li><span class="section"><a href="#MultiSurface">4.1.2.5. 多曲面（MultiSurface）</a></span></li></ul></div><p><a class="link" href="https://www.iso.org/obp/ui/#iso:std:iso-iec:13249:-3:ed-5:v1:en" target="_top"><span class="emphasis"><em>ISO/IEC 13249-3 SQL多媒体-空间</em></span></a>标准 （SQL/MM）扩展了 OGC SFA 以定义包含弯曲几何图形的子类型。SQL/MM 类型支持 XYM、XYZ 和 XYZM。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>SQL-MM 实现中的所有浮点比较 按照指定的公差执行，目前为 1E-8。</p></td></tr></table></div><section class="section" id="CircularString"><div class="titlepage"><div><div><h4 class="title">4.1.2.1. 圆弧串（CircularString）</h4></div></div></div><p>圆弧串是基本曲线类型，类似于线性世界中的线串。单个圆弧段由三个点指定：起点和终点（第一个和第三个）以及圆弧上的其他点。 要指定闭合圆，起点和终点相同，中点是圆直径上的相对点（即圆弧的中心）。在弧序列中，前一个弧的终点是下一个弧的起点，就像线串的线段一样。 这意味着圆弧串必须具有大于 1 的奇数个点。</p><pre class="programlisting">CIRCULARSTRING(0 0, 1 1, 1 0)

CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0 0)</pre></section><section class="section" id="CompoundCurve"><div class="titlepage"><div><div><h4 class="title">4.1.2.2. 复合曲线（CompoundCurve）</h4></div></div></div><p>复合曲线是一条连续曲线，可以包含圆弧段和线性段。意味着除了具有格式良好的组件之外，每个组件（最后一个除外）的终点必须与后续组件的起点重合。</p><pre class="programlisting">COMPOUNDCURVE( CIRCULARSTRING(0 0, 1 1, 1 0),(1 0, 0 1))</pre></section><section class="section" id="CurvePolygon"><div class="titlepage"><div><div><h4 class="title">4.1.2.3. 曲线多边形（CurvePolygon）</h4></div></div></div><p>曲线多边形与多边形相似，因为它们有一个外环和零个或多个内环。区别在于多边形环是线串，而曲线多边形环是复合曲线或圆弧串。 </p><p>从PostGIS 1.4开始，PostGIS 现在支持曲线多边形上的复合曲线。</p><pre class="programlisting">CURVEPOLYGON(
  CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0 0),
  (1 1, 3 3, 3 1, 1 1) )</pre><p>示例：具有由圆弧串和线串组成的复合曲线定义的外壳的曲线多边形，以及由圆弧串定义的孔</p><pre class="programlisting">CURVEPOLYGON(
  COMPOUNDCURVE( CIRCULARSTRING(0 0,2 0, 2 1, 2 3, 4 3),
                 (4 3, 4 5, 1 4, 0 0)),
  CIRCULARSTRING(1.7 1, 1.4 0.4, 1.6 0.4, 1.6 0.5, 1.7 1) )</pre></section><section class="section" id="MultiCurve"><div class="titlepage"><div><div><h4 class="title">4.1.2.4. 多曲线（MultiCurve）</h4></div></div></div><p>多曲线是曲线的集合，可以包括线串、圆弧串或复合曲线。</p><pre class="programlisting">MULTICURVE( (0 0, 5 5), CIRCULARSTRING(4 0, 4 4, 8 4))</pre></section><section class="section" id="MultiSurface"><div class="titlepage"><div><div><h4 class="title">4.1.2.5. 多曲面（MultiSurface）</h4></div></div></div><p>多曲面是曲面的集合，可以是（线性的）多边形或曲线多边形。</p><pre class="programlisting">MULTISURFACE(
  CURVEPOLYGON(
    CIRCULARSTRING( 0 0, 4 0, 4 4, 0 4, 0 0),
    (1 1, 3 3, 3 1, 1 1)),
  ((10 10, 14 12, 11 10, 10 10), (11 11, 11.5 11, 11 11.5, 11 11)))</pre></section></section><section class="section" id="OpenGISWKBWKT"><div class="titlepage"><div><div><h3 class="title">4.1.3. WKT和WKB</h3></div></div></div><p>OGC SFA规范定义了两种标准格式，用于表示供外部使用的几何值。已知文本（WKT）和已知二进制文件（WKB）。WKT和WKB都包含有关定义对象的类型和坐标的信息。</p><p>已知文本（WKT）提供空间数据的标准字符表示形式。以下是空间对象的 WKT 表示形式示例：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>POINT(0 0)</p></li><li class="listitem"><p>POINT Z (0 0 0)</p></li><li class="listitem"><p>POINT ZM (0 0 0 0)</p></li><li class="listitem"><p>POINT EMPTY</p></li><li class="listitem"><p>LINESTRING(0 0,1 1,1 2)</p></li><li class="listitem"><p>LINESTRING EMPTY</p></li><li class="listitem"><p>POLYGON((0 0,4 0,4 4,0 4,0 0),(1 1, 2 1, 2 2, 1 2,1 1))</p></li><li class="listitem"><p>MULTIPOINT((0 0),(1 2))</p></li><li class="listitem"><p>MULTIPOINT Z ((0 0 0),(1 2 3))</p></li><li class="listitem"><p>MULTIPOINT EMPTY</p></li><li class="listitem"><p>MULTILINESTRING((0 0,1 1,1 2),(2 3,3 2,5 4))</p></li><li class="listitem"><p>MULTIPOLYGON(((0 0,4 0,4 4,0 4,0 0),(1 1,2 1,2 2,1 2,1 1)), ((-1 -1,-1 -2,-2 -2,-2 -1,-1 -1)))</p></li><li class="listitem"><p>GEOMETRYCOLLECTION(POINT(2 3),LINESTRING(2 3,3 4))</p></li><li class="listitem"><p>GEOMETRYCOLLECTION EMPTY</p></li></ul></div><p>WKT输入和输出由函数<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>和<a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>提供：</p><pre class="programlisting">text WKT = ST_AsText(geometry);
geometry = ST_GeomFromText(text WKT, SRID);</pre><p>例如，从WKT和SRID创建并插入空间对象的语句如下所示：</p><pre class="programlisting">INSERT INTO geotable ( geom, name )
  VALUES ( ST_GeomFromText('POINT(-126.4 45.32)', 312), 'A Place');</pre><p>已知二进制 （WKB） 是空间数据二进制数据（字节数组）的可移植且准确的表示形式。空间对象的 WKB 表示如下所示：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>WKT: POINT(1 1)</p><p>WKB: 0101000000000000000000F03F000000000000F03</p></li><li class="listitem"><p>WKT: LINESTRING (2 2, 9 9)</p><p>WKB: 0102000000020000000000000000000040000000000000004000000000000022400000000000002240</p></li></ul></div><p>WKB 的输入和输出由以下函数<a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>和 <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>提供：</p><pre class="programlisting">bytea WKB = ST_AsBinary(geometry);
geometry = ST_GeomFromWKB(bytea WKB, SRID);
</pre><p>例如，用于创建和插入WKB的空间对象如下所示：</p><pre class="programlisting">INSERT INTO geotable ( geom, name )
  VALUES ( ST_GeomFromWKB('\x0101000000000000000000f03f000000000000f03f', 312), 'A Place');</pre></section></section><section class="section" id="PostGIS_Geometry"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.2. 几何数据类型</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#EWKB_EWKT">4.2.1. PostGIS EWKB 和 EWKT</a></span></li></ul></div><p>PostGIS 通过定义称为<code class="varname">geometry</code>的 PostgreSQL 数据类型来实现 OGC 简单要素模型。它使用内部类型代码表示所有几何子类型（请参阅 <a class="xref" href="#GeometryType" title="GeometryType">GeometryType</a> 和 <a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>）。这允许将空间要素建模为用<code class="varname">geometry</code>类型的列定义的表行。 </p><p><code class="varname">geometry</code>数据类型是 <span class="emphasis"><em>不透明的</em></span>，这意味着所有访问都是通过调用几何值的函数来完成的。 函数允许创建几何对象、访问或更新所有内部字段以及计算新的几何值。PostGIS 支持 OGC <a class="link" href="https://portal.ogc.org/files/?artifact_id=25354" target="_top"><span class="emphasis"><em>简单功能访问 - 第二部分: SQL 选项</em></span></a>(SFS) 规范中指定的所有功能以及许多其他功能。 请参阅<a class="xref" href="#reference" title="Chapter 7. PostGIS 参考手册">Chapter 7, <em>PostGIS 参考手册</em></a>以获取完整的函数列表。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostGIS 遵循 SFA 标准，在空间函数前面加上前缀“ST_”。 这表示“空间和时间”，但标准时间部分尚未开发。 相反，它可以解释为“空间类型”。 </p></td></tr></table></div><p>SFA 标准指定空间对象包含空间参考系统标识符 (SRID)。创建插入数据库的空间对象时需要 SRID（可能默认为 0）。 请参阅 <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a> 和<a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a></p><p>为了使几何查询更加高效，PostGIS 定义了不同类型的空间索引。有关更多信息，请参见 <a class="xref" href="#build-indexes" title="4.9. 空间索引">Section 4.9, “空间索引”</a>和<a class="xref" href="#using-query-indexes" title="5.2. 使用空间索引">Section 5.2, “使用空间索引”</a>。 </p><section class="section" id="EWKB_EWKT"><div class="titlepage"><div><div><h3 class="title">4.2.1. PostGIS EWKB 和 EWKT</h3></div></div></div><p>OGC SFA 规范最初仅支持 2D 几何形状， 并且几何 SRID 不包含在输入/输出表示中。OGC SFA 规范 1.2.1（与 ISO 19125 标准一致） 增加了对 3D （ZYZ） 和测量（XYM 和 XYZM）坐标的支持， 但仍然不包括 SRID 值。</p><p>由于这些限制，PostGIS定义了扩展的EWKB和EWKT格式。它们提供 3D（XYZ 和 XYM）和 4D （XYZM） 坐标支持，并包括 SRID 信息。 包含所有几何信息允许 PostGIS 使用 EWKB 作为记录格式 （例如，在转储文件中）。 </p><p>EWKB 和 EWKT 用于 PostGIS 数据对象的“规范形式”。 对于输入，二进制数据的规范形式是 EWKB，对于文本数据，接受 EWKB 或 EWKT。 这允许通过使用 <code class="varname">::geometry</code>将 HEXEWKB 或 EWKT中的文本值转换为几何值来创建几何值。 对于输出，二进制的规范形式是 EWKB，对于文本，规范形式是 HEXEWKB（十六进制编码的 EWKB）。 </p><p>例如，此过程使用来自EWKT文本值的强制转换生成几何图形，并使用HEXWKB的规范格式输出它们：</p><pre class="programlisting">SELECT 'SRID=4;POINT(0 0)'::geometry;
  geometry
  ----------------------------------------------------
  01010000200400000000000000000000000000000000000000
</pre><p>PostGIS EWKT 输出与 OGC WKT 有一些不同之处：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>对于 3DZ 几何形状，省略了 Z 限定符：</p><p>OGC: POINT Z (1 2 3)</p><p>EWKT: POINT (1 2 3)</p></li><li class="listitem"><p>对于 3DM 几何形状，包括 M 限定符：</p><p>OGC: POINT M (1 2 3)</p><p>EWKT: POINTM (1 2 3)</p></li><li class="listitem"><p>对于 4D 几何形状，省略了 ZM 限定符：</p><p>OGC: POINT ZM (1 2 3 4)</p><p>EWKT: POINT (1 2 3 4)</p></li></ul></div><p>EWKT避免过度指定维度以及OGC/ISO格式可能发生的不一致，例如： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>POINT ZM (1 1)</p></li><li class="listitem"><p>POINT ZM (1 1 1)</p></li><li class="listitem"><p>POINT (1 1 1 1)</p></li></ul></div><div class="caution"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Caution]" src="images/caution.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostGIS扩展格式向上兼容OGC格式，因此，每个有效的 OGC WKB/WKT 也是有效的 EWKB/EWKT。但是，将来这可能会有所不同，如果 OGC 以与 PosGIS 定义冲突的方式扩展格式。因此，您不应该依赖这种兼容性！</p></td></tr></table></div><p>空间对象的 EWKT 文本表示的示例如下：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>POINT(0 0 0) -- XYZ</p></li><li class="listitem"><p>SRID=32632;POINT(0 0) -- XY 与 SRID</p></li><li class="listitem"><p>POINTM(0 0 0) -- XYM</p></li><li class="listitem"><p>POINT(0 0 0 0) -- XYZM</p></li><li class="listitem"><p>SRID=4326;MULTIPOINTM(0 0 0,1 2 1) -- XYM 与 SRID</p></li><li class="listitem"><p>MULTILINESTRING((0 0 0,1 1 0,1 2 1),(2 3 1,3 2 1,5 4 1))</p></li><li class="listitem"><p>POLYGON((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2 0,1 1 0))</p></li><li class="listitem"><p>MULTIPOLYGON(((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2 0,1 1 0)),((-1 -1 0,-1 -2 0,-2 -2 0,-2 -1 0,-1 -1 0)))</p></li><li class="listitem"><p>GEOMETRYCOLLECTIONM( POINTM(2 3 9), LINESTRINGM(2 3 4, 3 4 5) )</p></li><li class="listitem"><p>MULTICURVE( (0 0, 5 5), CIRCULARSTRING(4 0, 4 4, 8 4) )</p></li><li class="listitem"><p>POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)), ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)), ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)), ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )</p></li><li class="listitem"><p>TRIANGLE ((0 0, 0 10, 10 0, 0 0))</p></li><li class="listitem"><p>TIN( ((0 0 0, 0 0 1, 0 1 0, 0 0 0)), ((0 0 0, 0 1 0, 1 1 0, 0 0 0)) )</p></li></ul></div><p>可以使用以下函数使用这些格式的输入和输出：</p><pre class="programlisting">bytea EWKB = ST_AsEWKB(geometry);
text EWKT = ST_AsEWKT(geometry);
geometry = ST_GeomFromEWKB(bytea EWKB);
geometry = ST_GeomFromEWKT(text EWKT);</pre><p>例如，使用 EWKT 创建和插入 PostGIS 空间对象的语句为：</p><pre class="programlisting">INSERT INTO geotable ( geom, name )
  VALUES ( ST_GeomFromEWKT('SRID=312;POINTM(-126.4 45.32 15)'), 'A Place' )</pre></section></section><section class="section" id="PostGIS_Geography"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.3. 地理数据类型</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#Create_Geography_Tables">4.3.1. 创建地理表</a></span></li><li><span class="section"><a href="#Use_Geography_Tables">4.3.2. 使用地理表</a></span></li><li><span class="section"><a href="#PostGIS_GeographyVSGeometry">4.3.3. 何时使用地理数据类型</a></span></li><li><span class="section"><a href="#PostGIS_Geography_AdvancedFAQ">4.3.4. 地理高级常见问题解答</a></span></li></ul></div><p>PostGIS <code class="varname">geography</code>数据类型为“地理”坐标（有时称为“大地”坐标，或“lat/lon”或“lon/lat”）表示的空间要素提供本机支持。地理坐标是以角度单位（度）表示的球坐标。 </p><p>PostGIS几何类型的基础是平面。平面上两点之间的最短路径是直线。几何函数（面积、距离、长度、交点等）是使用线性向量和笛卡尔平面计算的。这简化了实施并运行得更快，但对于地球球面以上的数据是不准确的。 </p><p>PostGIS 地理数据类型基于球面模型。球体上两点之间的最短路径是一个大圆弧。地理上的函数（面积、距离、长度、交点等）是使用球体上的弧计算的。通过考虑世界的球体形状，函数可提供更准确的结果。</p><p>由于基础数学更复杂，因此为地理类型定义的函数少于为几何类型定义的函数。随着时间的推移，随着新算法的添加，地理类型的功能将扩展。作为一种解决方法，可以在几何和地理类型之间来回转换。</p><p>与几何数据类型类似，地理数据通过空间参考系统标识符 (SRID) 与空间参考系统相关联。可以使用在<code class="varname">spatial_ref_sys</code> 表中定义的任何大地测量（基于经/纬度）空间参考系统。（在 PostGIS 2.2 之前，地理类型仅支持 WGS 84 大地测量 (SRID:4326)）。您可以添加自己的自定义大地测量空间参考系统，如<a class="xref" href="#user-spatial-ref-sys" title="4.5.2. 用户自定义空间参考系统">Section 4.5.2, “用户自定义空间参考系统”</a>中所述。</p><p>测量函数返回的单位（例如，<a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>, <a class="xref" href="#ST_Area" title="ST_Area">ST_Area</a>）与<a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>参数中给出的距离之间的空间参考系统单位为米。</p><section class="section" id="Create_Geography_Tables"><div class="titlepage"><div><div><h3 class="title">4.3.1. 创建地理表</h3></div></div></div><p>您可以使用带有地理类型列的 <a class="link" href="https://www.postgresql.org/docs/current/sql-createtable.html" target="_top">CREATE TABLE</a> SQL 语句创建一个表来存储<code class="varname">地理</code>数据。 以下示例创建一个表，其中包含存储 WGS84 大地坐标系 (SRID 4326) 中的 2D LineString 的地理列：</p><pre class="programlisting">CREATE TABLE global_points (
    id SERIAL PRIMARY KEY,
    name VARCHAR(64),
    location geography(POINT,4326)
  );</pre><p>地理类型支持两个可选的类型修饰符:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>空间类型修饰符用于调节列中允许的形状的类型和维度。根据值，空间类型可以是点、线串、面、多点、多线、多面、几何集合。地理类型不支持曲线、三角形或多面体曲面。通过将后置 Z、M 和 ZM 附加到类型修饰符，可以解决坐标维度的约束问题。 例如，“LINESTRINGM”只允许三维线串，第三个轴是M。 同样，“POINTZM”需要四维（XYZM）数据。 </p></li><li class="listitem"><p>SRID 修饰符将空间参考系统 SRID 限制为特定数字。如果省略，SRID 默认为 4326（WGS84 大地测量），并且所有计算均使用 WGS84 执行。 </p></li></ul></div><p/><p>以下是生成包含地理列的表的示例：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>生成一个具有二维点地理的表，默认情况下SRID为4326（WGS84 经度/纬度）：</p><pre class="programlisting">CREATE TABLE ptgeogwgs(gid serial PRIMARY KEY, geog geography(POINT) );</pre></li><li class="listitem"><p>生成具有 NAD83 经纬度二维点地理的表：</p><pre class="programlisting">CREATE TABLE ptgeognad83(gid serial PRIMARY KEY, geog geography(POINT,4269) );</pre></li><li class="listitem"><p>创建一个包含 3D (XYZ) POINT 和默认 SRID 4326 的表：</p><pre class="programlisting">CREATE TABLE ptzgeogwgs84(gid serial PRIMARY KEY, geog geography(POINTZ,4326) );</pre></li><li class="listitem"><p>生成具有二维线串地理的表，SRID 默认值为 4326：</p><pre class="programlisting">CREATE TABLE lgeog(gid serial PRIMARY KEY, geog geography(LINESTRING) );</pre></li><li class="listitem"><p>使用 SRID 4267（NAD 1927 经纬度）创建包含二维多边形地理的表：</p><pre class="programlisting">CREATE TABLE lgeognad27(gid serial PRIMARY KEY, geog geography(POLYGON,4267) );</pre></li></ul></div><p>地理字段在<code class="varname">geography_columns</code>系统视图中注册。 您可以查询<code class="varname">geography_columns</code>视图并看到该表已列出：</p><pre class="programlisting">SELECT * FROM geography_columns;</pre><p>创建空间索引的工作方式与创建几何列相同。 PostGIS 将注意到列类型是 GEOGRAPHY，并创建适当的基于球体的索引，而不是用于 GEOMETRY 的常用平面索引。</p><pre class="programlisting">-- Index the test table with a spherical index
CREATE INDEX global_points_gix ON global_points USING GIST ( location );</pre></section><section class="section" id="Use_Geography_Tables"><div class="titlepage"><div><div><h3 class="title">4.3.2. 使用地理表</h3></div></div></div><p>您可以采用与几何相同的方式将数据插入地理表中。如果几何数据具有 SRID 4326，则几何数据将自动转换为地理类型。也可以使用 <a class="link" href="#EWKB_EWKT" title="4.2.1. PostGIS EWKB 和 EWKT">EWKT和EWKB</a> 格式 以指定地理值。</p><pre class="programlisting">-- Add some data into the test table
INSERT INTO global_points (name, location) VALUES ('Town', 'SRID=4326;POINT(-110 30)');
INSERT INTO global_points (name, location) VALUES ('Forest', 'SRID=4326;POINT(-109 29)');
INSERT INTO global_points (name, location) VALUES ('London', 'SRID=4326;POINT(0 49)');
</pre><p><code class="varname">spatial_ref_sys</code>表中列出的任何大地测量（经/纬度）空间参考系统都可以指定为地理 SRID。如果使用非大地坐标系，则会产生错误。 </p><pre class="programlisting">-- NAD 83 lon/lat
SELECT 'SRID=4269;POINT(-123 34)'::geography;
                    geography
----------------------------------------------------
 0101000020AD1000000000000000C05EC00000000000004140
</pre><pre class="programlisting">-- NAD27 lon/lat
SELECT 'SRID=4267;POINT(-123 34)'::geography;
                    geography
----------------------------------------------------
 0101000020AB1000000000000000C05EC00000000000004140
</pre><pre class="programlisting">-- NAD83 UTM zone meters - gives an error since it is a meter-based planar projection
SELECT 'SRID=26910;POINT(-123 34)'::geography;

ERROR:  Only lon/lat coordinate systems are supported in geography.
</pre><p>查询和测量功能以米为单位。因此，距离参数以米为单位（面积为平方米）。</p><pre class="programlisting">-- A distance query using a 1000km tolerance
SELECT name FROM global_points WHERE ST_DWithin(location, 'SRID=4326;POINT(-110 29)'::geography, 1000000);</pre><p>通过计算一架从西雅图飞往伦敦的飞机（LINESTRING(-122.33 47.606, 0.0 51.5) 表示的大圆航线）飞行过程中距离雷克雅未克（POINT(-21.96 64.15)）的距离，您可以看到地理学的作用（<a class="link" href="http://gc.kls2.com/cgi-bin/gc?PATH=SEA-LHR" target="_top">绘制路线</a>）。 </p><p>地理类型计算出雷克雅未克与西雅图和伦敦之间的大圆飞行路径之间的球体上的真实最短距离为 122.235 公里。</p><pre class="programlisting">-- Distance calculation using GEOGRAPHY
SELECT ST_Distance('LINESTRING(-122.33 47.606, 0.0 51.5)'::geography, 'POINT(-21.96 64.15)'::geography);
   st_distance
-----------------
 122235.23815667</pre><p>几何类型在平面世界地图上计算雷克雅未克之间的笛卡尔距离以及西雅图和伦敦之间的直线，这是没有意义的。计算结果的标称单位是“度”，但它与点之间的真实角度差并不对应，称其为“度”本身是不准确的。</p><pre class="programlisting">-- Distance calculation using GEOMETRY
SELECT ST_Distance('LINESTRING(-122.33 47.606, 0.0 51.5)'::geometry, 'POINT(-21.96 64.15)'::geometry);
      st_distance
--------------------
 13.342271221453624
</pre></section><section class="section" id="PostGIS_GeographyVSGeometry"><div class="titlepage"><div><div><h3 class="title">4.3.3. 何时使用地理数据类型</h3></div></div></div><p>地理数据类型允许您将数据存储在经度/纬度坐标中，但有代价：在地理上定义的函数比在几何上定义的函数少;定义的那些函数需要更多 CPU 时间来执行。</p><p>您选择的数据类型应由正在构建的应用程序的预期工作区域确定。您的数据是跨越全球还是大片大陆区域，还是州、县或直辖市的本地数据？ </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>如果数据包含在较小的区域中，您可能会发现，就可用的性能和功能而言，选择合适的投影并使用 GEOMETRY 是最佳解决方案。</p></li><li class="listitem"><p>如果您的数据是整个地球或大陆，您将能够构建一个系统，而无需担心地理投影的细节。保存经度/纬度数据并使用地理中定义的函数。</p></li><li class="listitem"><p>如果您不了解投影，并且不想了解它们，并且您准备接受地理中可用功能的限制，那么使用地理可能比使用几何更容易。只需将数据加载为经度/纬度，然后从那里开始。</p></li></ul></div><p>有关地理和几何之间的支持比较，请参见<a class="xref" href="#PostGIS_TypeFunctionMatrix" title="13.11. PostGIS函数支持矩阵">Section 13.11, “PostGIS函数支持矩阵”</a>。有关地理函数的简要列表和说明，请参见 <a class="xref" href="#PostGIS_GeographyFunctions" title="13.4. PostGIS 地理支持函数">Section 13.4, “PostGIS 地理支持函数”</a> </p></section><section class="section" id="PostGIS_Geography_AdvancedFAQ"><div class="titlepage"><div><div><h3 class="title">4.3.4. 地理高级常见问题解答</h3></div></div></div><div class="qandaset" id="idm1610"><ul><li><a href="#idm1611">4.3.4.1. 你是用球体还是椭球体计算?</a></li><li><a href="#idm1617">4.3.4.2. 日期变更线和极点呢？</a></li><li><a href="#idm1622">4.3.4.3. 您可以处理的最长圆弧是多少？</a></li><li><a href="#idm1627">4.3.4.4. 为什么计算欧洲/俄罗斯/大地理区域的面积这么慢？</a></li></ul><table style="border: 0; width: 100%;"><colgroup><col style="text-align: left; width: 1%; "/><col/></colgroup><tbody><tr class="question" id="idm1611"><td style="text-align: left; vertical-align: top; " id="idm1612"><p><strong>4.3.4.1.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>你是用球体还是椭球体计算?</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>默认情况下，所有距离和面积计算都在椭球体中执行。将局部区域的计算结果与投影良好的平面上的结果进行比较。对于大面积，椭球体计算比投影平面上的任何其他计算都更准确。 </p><p>所有地理函数都可以选择使用球体计算，方法是将最终布尔参数设置为“FALSE”。这将在一定程度上加快计算速度，特别是对于几何形状非常简单的情况。</p></td></tr><tr class="question" id="idm1617"><td style="text-align: left; vertical-align: top; " id="idm1618"><p><strong>4.3.4.2.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>日期变更线和极点呢？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>所有计算都没有日期变更线或极点的概念。 由于坐标是球体（经度/纬度），因此从计算的角度来看，穿过日期变更线的形状与其他任何形状没有什么不同。 </p></td></tr><tr class="question" id="idm1622"><td style="text-align: left; vertical-align: top; " id="idm1623"><p><strong>4.3.4.3.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>您可以处理的最长圆弧是多少？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>我们使用大圆弧作为两点之间的“插值线”。 这意味着任何两点实际上以两种方式连接起来，具体取决于您沿着大圆行进的方向。我们所有的代码都假设这些点是由沿着大圆的两条路径中“较短的”一条连接起来的。因此，弧度超过 180 度的形状将无法正确建模。</p></td></tr><tr class="question" id="idm1627"><td style="text-align: left; vertical-align: top; " id="idm1628"><p><strong>4.3.4.4.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>为什么计算欧洲/俄罗斯/大地理区域的面积这么慢？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>因为多边形大得离谱。大面积不好有两个原因 一个原因是边界框很大，因此无论您运行什么查询，索引都倾向于拉取特征。另一个原因是顶点计数很大，并且测试（距离、包含）函数必须至少遍历顶点一次，通常为 N（其中 N 是另一个要素的顶点计数）。 </p><p>与 GEOMETRY 一样，我们建议您在具有非常大的多边形，但在小区域中执行查询时，将几何数据“非规范化”为较小的块，以便索引可以有效地子查询对象的各个部分，这样查询就不必每次都提取整个对象。请参阅<a class="xref" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a> 函数文档。仅仅因为您*可以*将整个欧洲存储在一个多边形中并不意味着您*应该*。</p></td></tr></tbody></table></div></section></section><section class="section" id="OGC_Validity"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.4. 几何有效性验证</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#Simple_Geometry">4.4.1. 简单几何</a></span></li><li><span class="section"><a href="#Valid_Geometry">4.4.2. 有效的几何形状</a></span></li><li><span class="section"><a href="#Managing_Validity">4.4.3. 有效性管理</a></span></li></ul></div><p>PostGIS 符合开放地理空间联盟 (OGC) 的简单要素规范。 该标准定义了<span class="emphasis"><em>简单</em></span>和<span class="emphasis"><em>有效</em></span>几何概念。 这些定义允许简单要素几何模型以一致且明确的方式表示空间对象，从而支持高效计算。 （注：OGC SF 和 SQL/MM 对简单和有效的定义相同。） </p><section class="section" id="Simple_Geometry"><div class="titlepage"><div><div><h3 class="title">4.4.1. 简单几何</h3></div></div></div><p><span class="emphasis"><em>简单</em></span>几何是指没有异常几何点（例如自交或自相切）的几何。 </p><p>作为 0 维几何对象，<code class="varname">POINT</code> 本质上是<span class="emphasis"><em>简单</em></span>。</p><p><code class="varname">MULTIPOINT</code>是<span class="emphasis"><em>简单的</em></span>，如果没有两个坐标（<code class="varname">POINT</code>）的坐标值相同（具有相同的坐标值）。</p><p>如果<code class="varname">LINESTRING</code>不两次穿过同一点（端点除外），则该 LINESTRING 很<span class="emphasis"><em>简单</em></span>。如果简单线串的端点相同，则称为<span class="emphasis"><em>闭合线</em></span>并称为线性环。</p><div class="informaltable"><table style="border: none;"><colgroup><col/></colgroup><tbody><tr><td><p><span class="emphasis"><em><span class="bold"><strong>(a)</strong></span> 和<span class="bold"><strong>(c)</strong></span> 是简单的<code class="varname">LINESTRING</code>. <span class="bold"><strong>(b)</strong></span> 和 <span class="bold"><strong>(d)</strong></span> 不简单。 <span class="bold"><strong>(c)</strong></span> 是一个封闭的线性环。 </em></span></p></td></tr></tbody></table><table style="border: none;"><colgroup><col/><col/></colgroup><tbody><tr><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple01.png"/><div class="caption"><p><span class="bold"><strong>(a)</strong></span></p></div></div></div></td><td style="text-align: center; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple02.png"/><div class="caption"><p><span class="bold"><strong>(b)</strong></span></p></div></div></div></td></tr><tr><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple03.png"/><div class="caption"><p><span class="bold"><strong>(c)</strong></span></p></div></div></div></td><td style="text-align: center; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple04.png"/><div class="caption"><p><span class="bold"><strong>(d)</strong></span></p></div></div></div></td></tr></tbody></table></div><p>仅当<code class="varname">MULTILINESTRING</code> 的所有元素都很<span class="emphasis"><em>简单</em></span> 并且任意两个元素之间的唯一交集发生在两个元素边界上的点时，MULTILINESTRING 才是简单的。 </p><div class="informaltable"><table style="border: none;"><colgroup><col/></colgroup><tbody><tr><td><p><span class="emphasis"><em><span class="bold"><strong>(e)</strong></span> 和<span class="bold"><strong>(f)</strong></span> 是简单的 <code class="varname">MULTILINESTRING</code>。<span class="bold"><strong>(g)</strong></span>不简单。 </em></span></p></td></tr></tbody></table><table style="border: none;"><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple05.png"/><div class="caption"><p><span class="bold"><strong>(e)</strong></span></p></div></div></div></td><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple06.png"/><div class="caption"><p><span class="bold"><strong>(f)</strong></span></p></div></div></div></td><td style="text-align: center; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple07.png"/><div class="caption"><p><span class="bold"><strong>(g)</strong></span></p></div></div></div></td></tr></tbody></table></div><p><code class="varname">POLYGON</code>是由线性环形成的，所以常见的多边形几何总是<span class="emphasis"><em>简单</em></span>的。</p><p>测试几何图形是否简单，使用 <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>函数：</p><pre class="programlisting">SELECT
   ST_IsSimple('LINESTRING(0 0, 100 100)') AS straight,
   ST_IsSimple('LINESTRING(0 0, 100 100, 100 0, 0 100)') AS crossing;

 straight | crossing
----------+----------
 t        | f
</pre><p>一般来说，PostGIS 函数不要求几何参数很简单。简单性主要用作定义几何有效性的基础。这也是某些类型的空间数据模型的要求（例如，线性网络通常不允许线交叉）。使用 <a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> 可以使多点和线性几何变得简单。 </p></section><section class="section" id="Valid_Geometry"><div class="titlepage"><div><div><h3 class="title">4.4.2. 有效的几何形状</h3></div></div></div><p>几何有效性主要适用于二维几何形状（<code class="varname">POLYGON</code>和<code class="varname">MULTIPOLYGON</code>）。有效性是由允许多边形几何形状明确地模拟平面区域的规则定义的。 </p><p><code class="varname">POLYGON</code>以下条件是<span class="emphasis"><em>有效</em></span>的： </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>多边形边界环（外壳环和内孔环）很<span class="emphasis"><em>简单</em></span>（不交叉或自接触）。因此，多边形不能有切割线、尖峰或环。这意味着多边形孔必须表示为内环，而不是外环自接触（所谓的“倒孔”）。 </p></li><li class="listitem"><p>边界环不交叉 </p></li><li class="listitem"><p>边界环可以在点上接触，但只能作为切线（即不在一条线上） </p></li><li class="listitem"><p>内环包含在外环中 </p></li><li class="listitem"><p>多边形内部连接简单（即环不得以将多边形分成多个部分的方式接触） </p></li></ol></div><div class="informaltable"><table style="border: none;"><colgroup><col/></colgroup><tbody><tr><td><p><span class="emphasis"><em><span class="bold"><strong>(h)</strong></span>和<span class="bold"><strong>(i)</strong></span> 是有效的<code class="varname">POLYGON</code>。<span class="bold"><strong>(j-m)</strong></span> 是无效的。<span class="bold"><strong>(j)</strong></span>可以表示为有效的<code class="varname">MULTIPOLYGON</code>。 </em></span></p></td></tr></tbody></table><table style="border: none;"><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid01.png"/><div class="caption"><p><span class="bold"><strong>(h)</strong></span></p></div></div></div></td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid02.png"/><div class="caption"><p><span class="bold"><strong>(i)</strong></span></p></div></div></div></td><td style="text-align: center; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid03.png"/><div class="caption"><p><span class="bold"><strong>(j)</strong></span></p></div></div></div></td></tr><tr><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid04.png"/><div class="caption"><p><span class="bold"><strong>(k)</strong></span></p></div></div></div></td><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid05.png"/><div class="caption"><p><span class="bold"><strong>(l)</strong></span></p></div></div></div></td><td style="text-align: center; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid06.png"/><div class="caption"><p><span class="bold"><strong>(m)</strong></span></p></div></div></div></td></tr></tbody></table></div><p><code class="varname">MULTIPOLYGON</code>以下条件是<span class="emphasis"><em>有效</em></span>的： </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>其元素 <code class="varname">POLYGON</code>有效 </p></li><li class="listitem"><p>元素不重叠（即其内部不得相交） </p></li><li class="listitem"><p>元素仅在点处接触（即不沿线接触） </p></li></ol></div><div class="informaltable"><table style="border: none;"><colgroup><col/></colgroup><tbody><tr><td><p><span class="emphasis"><em><span class="bold"><strong>(n)</strong></span>是有效的<code class="varname">MULTIPOLYGON</code>。<span class="bold"><strong>(o)</strong></span>和<span class="bold"><strong>(p)</strong></span>无效。 </em></span></p></td></tr></tbody></table><table style="border: none;"><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid09.png"/><div class="caption"><p><span class="bold"><strong>(n)</strong></span></p></div></div></div></td><td style="text-align: center; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid07.png"/><div class="caption"><p><span class="bold"><strong>(o)</strong></span></p></div></div></div></td><td style="text-align: center; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid08.png"/><div class="caption"><p><span class="bold"><strong>(p)</strong></span></p></div></div></div></td></tr></tbody></table></div><p>这些规则意味着有效的多边形几何也很<span class="emphasis"><em>简单</em></span>。 </p><p>对于线性几何，唯一的有效性规则是<code class="varname">LINESTRING</code>必须至少有两个点并且具有非零长度（或等效地，至少有两个不同的点。请注意，非简单（自相交）线是有效的。 </p><pre class="programlisting">SELECT
   ST_IsValid('LINESTRING(0 0, 1 1)') AS len_nonzero,
   ST_IsValid('LINESTRING(0 0, 0 0, 0 0)') AS len_zero,
   ST_IsValid('LINESTRING(10 10, 150 150, 180 50, 20 130)') AS self_int;

 len_nonzero | len_zero | self_int
-------------+----------+----------
 t           | f        | t
</pre><p><code class="varname">POINT</code>和<code class="varname">MULTIPOINT</code> 几何形状没有有效性规则。 </p></section><section class="section" id="Managing_Validity"><div class="titlepage"><div><div><h3 class="title">4.4.3. 有效性管理</h3></div></div></div><p>PostGIS允许创建和存储有效和无效的几何图形。这允许检测并标记或修复无效的几何图形。在某些情况下，OGC有效性规则比预期更严格（例如零长度线串和带有倒孔的多边形。） </p><p>PostGIS提供的许多功能都依赖于几何参数有效的假设。例如，计算在多边形外部定义有孔的多边形的面积，或者从非简单边界线构造多边形是没有意义的。假设有效的几何输入允许函数更有效地运行，因为它们不需要检查拓扑正确性。（值得注意的例外是零长度线和具有反转的多边形通常可以正确处理。）此外，如果输入有效，大多数 PostGIS 函数都会生成有效的几何输出。 这使得 PostGIS 功能可以安全地链接在一起。 </p><p>如果在调用 PostGIS 函数时遇到意外错误消息 （例如“GEOS Intersection（） 抛出了一个错误！”),应首先确认函数参数是否有效。如果无效，请考虑使用以下技术之一来验证您正在处理的数据。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果函数报告有效输入错误，那么您可能在 PostGIS 或其使用的库之一中发现错误，您应该将此报告给 PostGIS 项目。如果 PostGIS 函数为有效输入返回无效几何图形，情况也是如此。</p></td></tr></table></div><p>要测试几何图形是否有效,请使用<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>函数。 执行以下操作： </p><pre class="programlisting">SELECT ST_IsValid('POLYGON ((20 180, 180 180, 180 20, 20 20, 20 180))');
-----------------
 t
</pre><p>有关几何无效的性质和位置的信息由<a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>函数确定： </p><pre class="programlisting">SELECT valid, reason, ST_AsText(location) AS location
    FROM ST_IsValidDetail('POLYGON ((20 20, 120 190, 50 190, 170 50, 20 20))') AS t;

 valid |      reason       |                  location
-------+-------------------+---------------------------------------------
 f     | Self-intersection | POINT(91.51162790697674 141.56976744186045)
</pre><p>在某些情况下，需要自动纠正无效的几何形状。 使用 <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> 函数来执行此操作。 （<code class="code">ST_MakeValid</code> 是空间函数的一种情况，<span class="emphasis"><em>确实</em></span>允许无效输入！） </p><p>测试复杂几何的刚度需要花费大量CPU时间，因此默认情况下，PostGIS 在加载几何时不会验证几何。如果不信任数据源，则可以使用检查约束对表进行强制验证。执行以下操作：</p><pre class="programlisting">ALTER TABLE mytable
  ADD CONSTRAINT geometry_valid_check
        CHECK (ST_IsValid(geom));</pre></section></section><section class="section" id="spatial_ref_sys"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.5. 空间参考系统</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#spatial_ref_sys_table">4.5.1. SPATIAL_REF_SYS表</a></span></li><li><span class="section"><a href="#user-spatial-ref-sys">4.5.2. 用户自定义空间参考系统</a></span></li></ul></div><p><a class="link" href="https://en.wikipedia.org/wiki/Spatial_reference_system" target="_top">空间参考系统</a> (SRS)（也称为坐标参考系统（CRS））定义了如何将几何图形引用到 地球表面。 SRS 分为三种类型： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>地理</strong></span>（geodetic）SRS，使用角坐标（经度和纬度），直接映射到地球表面。 </p></li><li class="listitem"><p><span class="bold"><strong>投影</strong></span>（projected）SRS使用数学投影变换将球形地球的表面“压平”到平面上。 它以允许直接测量距离、面积和角度等量的方式分配位置坐标。 坐标系是笛卡尔坐标系，这意味着它具有定义的原点和两个垂直轴（通常面向北和东）。 每个投影的 SRS 使用规定的长度单位（通常是米或英尺）。投影的 SRS 的适用范围可能会受到限制，以避免变形并适合定义的坐标范围。 </p></li><li class="listitem"><p><span class="bold"><strong>本地</strong></span>（local）SRS是不参考地球表面的笛卡尔坐标系。PostGIS 指定 SRID 值为 0。 </p></li></ul></div><p>所使用的空间参考系统存在许多差异。一般空间参考系统在欧洲石油调查组的<a class="link" href="http://www.epsg.org/" target="_top">EPSG database</a>中进行了标准化。为方便起见，PostGIS（和许多空间系统）使用称为SRID的整数来引用空间参考系统。 </p><p>几何通过其SRID值与空间参考系相关联，可由<a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>访问。可以使用<a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>指定几何图形的 SRID 值。某些几何构造函数允许提供 SRID （如<a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>和<a class="xref" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a>）。<a class="link" href="#EWKB_EWKT" title="4.2.1. PostGIS EWKB 和 EWKT">EWKT</a>格式支持带有前缀<code class="code">SRID=n;</code>的SRID。 </p><p>处理几何图形对（例如<a class="link" href="#Overlay_Functions" title="7.13. 叠加函数">叠加</a>和<a class="link" href="#Spatial_Relationships" title="7.11. 空间关系">关系</a>函数）的空间函数要求输入几何图形位于同一空间参考系统中（具有相同的 SRID）。可以使用<a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a> 和 <a class="xref" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a>将几何数据转换为不同的空间参考系统。从函数返回的几何图形具有与输入几何图形相同的SRS。 </p><section class="section" id="spatial_ref_sys_table"><div class="titlepage"><div><div><h3 class="title">4.5.1. SPATIAL_REF_SYS表</h3></div></div></div><p>PostGIS使用的<code class="varname">SPATIAL_REF_SYS</code>表是一个符合 OGC 标准的数据库表，用于定义可用的空间参考系统。它包含数字 SRID 和坐标系的文本描述。 </p><p><code class="varname">spatial_ref_sys</code>表定义为：</p><pre class="programlisting">CREATE TABLE spatial_ref_sys (
  srid       INTEGER NOT NULL PRIMARY KEY,
  auth_name  VARCHAR(256),
  auth_srid  INTEGER,
  srtext     VARCHAR(2048),
  proj4text  VARCHAR(2048)
)</pre><p>这些列是：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">srid</code></span></dt><dd><p>唯一标识数据库内<a class="link" href="http://en.wikipedia.org/wiki/SRID" target="_top">空间参考系统</a>(SRS)的整数代码。</p></dd><dt><span class="term"><code class="varname">auth_name</code></span></dt><dd><p>该参考系统引用的标准或标准机构的名称。例如，“EPSG”是有效的<code class="varname">auth_name</code>。</p></dd><dt><span class="term"><code class="varname">auth_srid</code></span></dt><dd><p>由<code class="varname">auth_name</code>中引用的权威机构定义的空间参考系统的ID。对于EPSG，这是EPSG代码。</p></dd><dt><span class="term"><code class="varname">srtext</code></span></dt><dd><p>已知空间参考系统的文本表示形式。WKT SRS表示的一个示例是：</p><pre class="programlisting">PROJCS["NAD83 / UTM Zone 10N",
  GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
          SPHEROID["GRS 1980",6378137,298.257222101]
        ],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]
  ],
  PROJECTION["Transverse_Mercator"],
  PARAMETER["latitude_of_origin",0],
  PARAMETER["central_meridian",-123],
  PARAMETER["scale_factor",0.9996],
  PARAMETER["false_easting",500000],
  PARAMETER["false_northing",0],
  UNIT["metre",1]
]</pre><p>有关SRS WKT的详细信息，请参阅 OGC 标准<a class="link" href="http://docs.opengeospatial.org/is/12-063r5/12-063r5.html" target="_top">参考系的已知文本表示</a>。 </p></dd><dt><span class="term"><code class="varname">proj4text</code></span></dt><dd><p>PostGIS使用PROJ库提供坐标转换功能。<code class="varname">proj4text</code>列包含特定SRID的PROJ坐标定义字符串。例如：</p><pre class="programlisting">+proj=utm +zone=10 +ellps=clrk66 +datum=NAD27 +units=m</pre><p>欲了解更多信息，请访问<a class="link" href="https://proj.org/" target="_top">PROJ 网站</a>。<code class="filename">spatial_ref_sys.sql</code>文件包含所有 EPSG 投影的<code class="varname">srtext</code> 和<code class="varname">proj4text</code>定义。</p></dd></dl></div><p>检索用于变换的空间参考系统定义时，PostGIS使用以下策略： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>如果 <code class="varname">auth_name</code>和<code class="varname">auth_srid</code>存在（非空）,使用基于这些条目（如果存在）的 PROJ SRS。 </p></li><li class="listitem"><p>如果<code class="varname">srtext</code>存在，请使用它创建SRS（如果可能）。 </p></li><li class="listitem"><p>如果<code class="varname">proj4text</code>存在，请使用它创建SRS（如果可能）。 </p></li></ul></div></section><section class="section" id="user-spatial-ref-sys"><div class="titlepage"><div><div><h3 class="title">4.5.2. 用户自定义空间参考系统</h3></div></div></div><p>PostGIS<code class="varname">spatial_ref_sys</code>表包含由<a class="link" href="https://proj.org" target="_top">PROJ</a>投影库处理的 3000 多个最常见的空间参考系统定义。但有很多坐标系它不包含。如果您具有有关空间参考系统的所需信息，则可以将 SRS 定义添加到表中。或者，如果您熟悉 PROJ 构造，则可以定义自己的自定义空间参考系统。请记住，大多数空间参考系统都是区域性的，在其预期范围之外使用时没有任何意义。</p><p><a class="link" href="http://spatialreference.org/" target="_top">http://spatialreference.org/</a>可用于查找不在 PostGIS 核心集中的空间参考系统</p><p>一些常用的空间参考系统包括：<a class="link" href="http://spatialreference.org/ref/epsg/4326/" target="_top">4326 - WGS 84 经纬度</a>, <a class="link" href="http://spatialreference.org/ref/epsg/4269/" target="_top">4269 - NAD 83 经纬度</a>, <a class="link" href="http://spatialreference.org/ref/epsg/3395/" target="_top">3395 - WGS 84 世界墨卡托投影</a>, <a class="link" href="http://spatialreference.org/ref/epsg/2163/" target="_top">2163 - 美国国家地图等面积投影</a>以及 60 个 WGS84 UTM 区域。UTM 区域是最理想的测量区域之一，但仅覆盖 6 度区域。（要确定您感兴趣的区域使用哪个UTM区域，请参阅 <a class="link" href="http://trac.osgeo.org/postgis/wiki/UsersWikiplpgsqlfunctionsDistance" target="_top">utmzone PostGIS plpgsql帮助程序函数</a>。） </p><p>美国各州使用国家平面空间参考系统（基于米或英尺）- 通常每个州有一个或两个。 大多数基于米的数据都在核心集中，但许多基于英尺的数据或 ESRI 创建的数据需要从<a class="link" href="http://spatialreference.org" target="_top">spatialreference.org</a>复制。 </p><p>您甚至可以定义非基于地球的坐标系，比如 <a class="link" href="http://spatialreference.org/ref/iau2000/mars-2000/" target="_top">火星2000</a>这个火星坐标系是非平面的（以球度为单位），但是您可以将其与 <code class="varname">geography</code>类型一起使用,以米而不是度为单位获得长度和邻近测量值。</p><p>以下是使用未分配的SRID和以美国为中心的兰伯特等角投影的PROJ定义加载自定义坐标系的示例：</p><pre class="programlisting">INSERT INTO spatial_ref_sys (srid, proj4text)
VALUES ( 990000,
  '+proj=lcc  +lon_0=-95 +lat_0=25 +lat_1=25 +lat_2=25 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs'
);
</pre></section></section><section class="section" id="idm2036"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.6. 空间表</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#Create_Spatial_Table">4.6.1. 创建空间表</a></span></li><li><span class="section"><a href="#geometry_columns">4.6.2. GEOMETRY_COLUMNS 视图</a></span></li><li><span class="section"><a href="#Manual_Register_Spatial_Column">4.6.3. 手动注册几何列</a></span></li></ul></div><section class="section" id="Create_Spatial_Table"><div class="titlepage"><div><div><h3 class="title">4.6.1. 创建空间表</h3></div></div></div><p>您可以使用SQL语句中的<a class="link" href="https://www.postgresql.org/docs/current/sql-createtable.html" target="_top">CREATE TABLE</a>语句创建一个用于存储几何数据的表，其中包括一个<code class="varname">geometry</code>类型的列。以下示例创建了一个带有几何列的表，该列存储BC-Albers坐标系统（SRID 3005）中的2D（XY）LineStrings：</p><pre class="programlisting">CREATE TABLE roads (
    id SERIAL PRIMARY KEY,
    name VARCHAR(64),
    geom geometry(LINESTRING,3005)
  );</pre><p><code class="varname">geometry</code>类型对应于两个可选的<span class="bold"><strong>类型修饰符</strong></span>：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>空间类型修饰符</strong></span> 限制列中允许的形状和维度类型。 该值可以是任何受支持的<a class="link" href="#RefObject" title="4.1. 空间数据模型">几何子类型</a>（例如 POINT、LINESTRING、POLYGON、MULTIPOINT、MULTILINESTRING、MULTIPOLYGON、GEOMETRYCOLLECTION 等）。 该修改器通过添加后缀支持坐标维数限制：Z、M 和 ZM。 例如，修饰符“LINESTRINGM”仅允许具有三个维度的线串，并将第三个维度视为度量。 同样，“POINTZM”需要四维 (XYZM) 数据。 </p></li><li class="listitem"><p><span class="bold"><strong>SRID 修饰符</strong></span>将<a class="link" href="#spatial_ref_sys" title="4.5. 空间参考系统">空间参考系统</a>的 SRID 限制为特定的数值。如果省略，则默认值为 0。 </p></li></ul></div><p/><p>创建具有几何列的表的示例：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>创建一个表，其中包含具有默认 SRID 的任何类型的几何图形：</p><pre class="programlisting">CREATE TABLE geoms(gid serial PRIMARY KEY, geom geometry );</pre></li><li class="listitem"><p>为 2D 点创建具有 SRID 默认值的表：</p><pre class="programlisting">CREATE TABLE pts(gid serial PRIMARY KEY, geom geometry(POINT) );</pre></li><li class="listitem"><p>创建一个包含 3D （XYZ） 点和显式 SRID 3005 的表：</p><pre class="programlisting">CREATE TABLE pts(gid serial PRIMARY KEY, geom geometry(POINTZ,3005) );</pre></li><li class="listitem"><p>使用默认 SRID 创建具有 4D （XYZM） LINESTRING 几何图形的表：</p><pre class="programlisting">CREATE TABLE lines(gid serial PRIMARY KEY, geom geometry(LINESTRINGZM) );</pre></li><li class="listitem"><p>使用 SRID 4267（NAD 1927 长纬度）创建包含 2D POLYGON 几何图形的表：</p><pre class="programlisting">CREATE TABLE polys(gid serial PRIMARY KEY, geom geometry(POLYGON,4267) );</pre></li></ul></div><p>一个表可以有多个几何列。这可以通过在创建表时指定它或使用<a class="link" href="https://www.postgresql.org/docs/current/sql-altertable.html" target="_top">ALTER TABLE</a>语句添加它来实现。下面的示例演示如何添加列以存储 3D LineStrings：</p><pre class="programlisting">ALTER TABLE roads ADD COLUMN geom2 geometry(LINESTRINGZ,4326);</pre></section><section class="section" id="geometry_columns"><div class="titlepage"><div><div><h3 class="title">4.6.2. GEOMETRY_COLUMNS 视图</h3></div></div></div><p><span class="emphasis"><em>适用于SQL的OGC简单要素规范</em></span>定义了用于描述<code class="varname">GEOMETRY_COLUMNS</code>结构的元数据表。在 PostGIS 中，<code class="varname">geometry_columns</code>是从数据库的系统目录表中读取的视图。这可确保空间元数据信息始终与当前定义的表或视图一致。视图结构为:</p><pre class="programlisting">\d geometry_columns</pre><pre class="screen">View "public.geometry_columns"
      Column       |          Type          | Modifiers
-------------------+------------------------+-----------
 f_table_catalog   | character varying(256) |
 f_table_schema    | character varying(256) |
 f_table_name      | character varying(256) |
 f_geometry_column | character varying(256) |
 coord_dimension   | integer                |
 srid              | integer                |
 type              | character varying(30)  |</pre><p>这些列是：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">f_table_catalog, f_table_schema, f_table_name</code></span></dt><dd><p>包含几何列的要素表的完全限定名称。PostgreSQL 中没有类似的“目录”，因此该列留空。对于“schema”，使用 PostgreSQL 模式名称（默认为<code class="varname">public</code>）。</p></dd><dt><span class="term"><code class="varname">f_geometry_column</code></span></dt><dd><p>要素表中几何列的名称。</p></dd><dt><span class="term"><code class="varname">coord_dimension</code></span></dt><dd><p>列的坐标维度（2、3 或 4）。</p></dd><dt><span class="term"><code class="varname">srid</code></span></dt><dd><p>用于此表中的坐标几何的空间参考系的 ID。它是对引用<code class="varname">spatial_ref_sys</code>表的外键引用（请参见<a class="xref" href="#spatial_ref_sys_table" title="4.5.1. SPATIAL_REF_SYS表">Section 4.5.1, “SPATIAL_REF_SYS表”</a>）。</p></dd><dt><span class="term"><code class="varname">type</code></span></dt><dd><p>空间对象的类型。 要将空间列限制为单一类型，请使用以下之一：POINT、LINESTRING、POLYGON、MULTIPOINT、MULTILINESTRING、MULTIPOLYGON、GEOMETRYCOLLECTION或相应的 XYM 版本 POINTM、LINESTRINGM、POLYGONM、MULTIPOINTM、MULTILINESTRINGM、MULTIPOLYGONM、GEOMETRYCOLLECTIONM。 对于异构（混合类型）集合，您可以使用“GEOMETRY”作为类型。</p></dd></dl></div></section><section class="section" id="Manual_Register_Spatial_Column"><div class="titlepage"><div><div><h3 class="title">4.6.3. 手动注册几何列</h3></div></div></div><p>您可能需要这样做的两种情况是 SQL 视图和批量插入。对于批量插入情况，您可以通过约束列或执行更改表来更正 Geometry_columns 表中的注册。对于视图，您可以使用 CAST 操作来公开。 请注意，如果您的列是基于typmod的，创建过程将正确注册它，因此无需执行任何操作。 此外，未对几何应用空间函数的视图将与基础表几何列注册相同。</p><pre class="programlisting">-- Lets say you have a view created like this
CREATE VIEW public.vwmytablemercator AS
        SELECT gid, ST_Transform(geom, 3395) As geom, f_name
        FROM public.mytable;

-- For it to register correctly
-- You need to cast the geometry
--
DROP VIEW public.vwmytablemercator;
CREATE VIEW  public.vwmytablemercator AS
        SELECT gid, ST_Transform(geom, 3395)::geometry(Geometry, 3395) As geom, f_name
        FROM public.mytable;

-- If you know the geometry type for sure is a 2D POLYGON then you could do
DROP VIEW public.vwmytablemercator;
CREATE VIEW  public.vwmytablemercator AS
        SELECT gid, ST_Transform(geom,3395)::geometry(Polygon, 3395) As geom, f_name
        FROM public.mytable;</pre><pre class="programlisting">--Lets say you created a derivative table by doing a bulk insert
SELECT poi.gid, poi.geom, citybounds.city_name
INTO myschema.my_special_pois
FROM poi INNER JOIN citybounds ON ST_Intersects(citybounds.geom, poi.geom);

-- Create 2D index on new table
CREATE INDEX idx_myschema_myspecialpois_geom_gist
  ON myschema.my_special_pois USING gist(geom);

-- If your points are 3D points or 3M points,
-- then you might want to create an nd index instead of a 2D index
CREATE INDEX my_special_pois_geom_gist_nd
        ON my_special_pois USING gist(geom gist_geometry_ops_nd);

-- To manually register this new table's geometry column in geometry_columns.
-- Note it will also change the underlying structure of the table to
-- to make the column typmod based.
SELECT populate_geometry_columns('myschema.my_special_pois'::regclass);

-- If you are using PostGIS 2.0 and for whatever reason, you
-- you need the constraint based definition behavior
-- (such as case of inherited tables where all children do not have the same type and srid)
-- set optional use_typmod argument to false
SELECT populate_geometry_columns('myschema.my_special_pois'::regclass, false); </pre><p>尽管仍然支持旧的基于约束的方法，但直接在视图中使用的基于约束的几何列将无法在 Geometry_columns 中正确注册，typmod 也是如此。在此示例中，我们使用typmod定义一个列，使用约束定义另一个列。</p><pre class="programlisting">CREATE TABLE pois_ny(gid SERIAL PRIMARY KEY, poi_name text, cat text, geom geometry(POINT,4326));
SELECT AddGeometryColumn('pois_ny', 'geom_2160', 2160, 'POINT', 2, false);</pre><p>在 psql 中运行</p><pre class="programlisting">\d pois_ny;</pre><p>我们观察到它们的定义不同——一个是类型，一个是约束</p><pre class="screen">Table "public.pois_ny"
  Column   |         Type          |                       Modifiers

-----------+-----------------------+------------------------------------------------------
 gid       | integer               | not null default nextval('pois_ny_gid_seq'::regclass)
 poi_name  | text                  |
 cat       | character varying(20) |
 geom      | geometry(Point,4326)  |
 geom_2160 | geometry              |
Indexes:
    "pois_ny_pkey" PRIMARY KEY, btree (gid)
Check constraints:
    "enforce_dims_geom_2160" CHECK (st_ndims(geom_2160) = 2)
    "enforce_geotype_geom_2160" CHECK (geometrytype(geom_2160) = 'POINT'::text
        OR geom_2160 IS NULL)
    "enforce_srid_geom_2160" CHECK (st_srid(geom_2160) = 2160)</pre><p>在geometry_columns中，两者都已正确注册</p><pre class="programlisting">SELECT f_table_name, f_geometry_column, srid, type
        FROM geometry_columns
        WHERE f_table_name = 'pois_ny';</pre><pre class="screen">f_table_name | f_geometry_column | srid | type
-------------+-------------------+------+-------
pois_ny      | geom              | 4326 | POINT
pois_ny      | geom_2160         | 2160 | POINT</pre><p>但是 - 如果我们要创建这样的视图</p><pre class="programlisting">CREATE VIEW vw_pois_ny_parks AS
SELECT *
  FROM pois_ny
  WHERE cat='park';

SELECT f_table_name, f_geometry_column, srid, type
        FROM geometry_columns
        WHERE f_table_name = 'vw_pois_ny_parks';</pre><p>基于typmod的几何视图列正确注册， 但基于约束的约束没有。</p><pre class="screen">f_table_name   | f_geometry_column | srid |   type
------------------+-------------------+------+----------
 vw_pois_ny_parks | geom              | 4326 | POINT
 vw_pois_ny_parks | geom_2160         |    0 | GEOMETRY</pre><p>这可能会在未来版本的PostGIS中发生变化，但目前 要强制基于约束的视图列正确注册，您需要执行以下操作：</p><pre class="programlisting">DROP VIEW vw_pois_ny_parks;
CREATE VIEW vw_pois_ny_parks AS
SELECT gid, poi_name, cat,
  geom,
  geom_2160::geometry(POINT,2160) As geom_2160
  FROM pois_ny
  WHERE cat = 'park';
SELECT f_table_name, f_geometry_column, srid, type
        FROM geometry_columns
        WHERE f_table_name = 'vw_pois_ny_parks';</pre><pre class="screen">f_table_name   | f_geometry_column | srid | type
------------------+-------------------+------+-------
 vw_pois_ny_parks | geom              | 4326 | POINT
 vw_pois_ny_parks | geom_2160         | 2160 | POINT</pre></section></section><section class="section" id="loading-data"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.7. 加载空间数据</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#load-data-sql">4.7.1. 使用SQL加载数据</a></span></li><li><span class="section"><a href="#shp2pgsql_usage">4.7.2. 使用Shapefile加载器</a></span></li></ul></div><p>创建空间表后，即可上传空间数据到数据库。有两种内置方法可以将空间数据放入PostGIS/PostgreSQL 数据库：使用格式化的 SQL 语句或使用 形状文件加载器。</p><section class="section" id="load-data-sql"><div class="titlepage"><div><div><h3 class="title">4.7.1. 使用SQL加载数据</h3></div></div></div><p>如果空间数据可以转换为文本表示（如 WKT 或 WKB），那么使用SQL可能是将数据导入 PostGIS 的最简单方法。通过使用<code class="code">psql</code> SQL 实用程序加载 SQL <code class="code">INSERT</code>语句的文本文件，可以将数据批量加载到 PostGIS/PostgreSQL 中。</p><p>SQL加载文件（例如<code class="filename">roads.sql</code> ）可能看起来像这样：</p><pre class="programlisting">BEGIN;
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (1,'LINESTRING(191232 243118,191108 243242)','Jeff Rd');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (2,'LINESTRING(189141 244158,189265 244817)','Geordie Rd');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (3,'LINESTRING(192783 228138,192612 229814)','Paul St');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (4,'LINESTRING(189412 252431,189631 259122)','Graeme Ave');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (5,'LINESTRING(190131 224148,190871 228134)','Phil Tce');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (6,'LINESTRING(198231 263418,198213 268322)','Dave Cres');
COMMIT;</pre><p>SQL文件可以使用<code class="code">psql</code>方法加载到PostgreSQL中:</p><pre class="programlisting">psql -d [database] -f roads.sql</pre></section><section class="section" id="shp2pgsql_usage"><div class="titlepage"><div><div><h3 class="title">4.7.2. 使用Shapefile加载器</h3></div></div></div><p><code class="filename">shp2pgsql</code>数据加载器将 Shapefile 转换为适合以几何或地理格式插入PostGIS/PostgreSQL 数据库的 SQL。加载程序有多种通过命令行标志选择的操作模式。 </p><p>还有一个<code class="filename">shp2pgsql-gui</code>图形界面，其中大多数选项作为命令行加载程序。对于一次性非脚本加载或者您是 PostGIS 新手，这可能更容易使用。它还可以配置为 PgAdminIII 的插件。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">（c|a|d|p）这些是相互排斥的选项：</span></dt><dd><p>
          </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>创建一个新表并从Shapefile文件填充它。<span class="emphasis"><em>这是默认模式</em></span> </p></dd><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>将数据从Shapefile文件添加到数据库表中。如果使用此选项加载多个文件，则这些文件必须具有相同的属性和相同的数据类型。 </p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>在创建包含 shapefile 中的数据的新表之前，请先删除数据库表。 </p></dd><dt><span class="term"><code class="option">-p</code></span></dt><dd><p>它只生成用于表创建的SQL代码，不添加任何实际数据。 如果要将表创建与数据加载完全分开，请使用此模式。 </p></dd></dl></div><p>
        </p></dd><dt><span class="term"><code class="option">-?</code></span></dt><dd><p>显示帮助屏幕。 </p></dd><dt><span class="term"><code class="option">-D</code></span></dt><dd><p>对输出数据使用 PostgreSQL 转储格式。此模式与 -a、-c 和 -d 结合使用。 它的加载速度比默认的“插入”SQL格式快得多。通常将其用于大型数据集。 </p></dd><dt><span class="term"><code class="option">-s [&lt;FROM_SRID&gt;:]&lt;SRID&gt;</code></span></dt><dd><p>使用指定的 SRID 创建并填充几何表。（可选）指定输入shapefile文件使用给定的 FROM_SRID，在这种情况下，几何图形将被重新投影到目标 SRID。 </p></dd><dt><span class="term"><code class="option">-k</code></span></dt><dd><p>保留标识符的大小写（列、架构和属性）。请注意，Shapefile文件中的属性都是大写的。 </p></dd><dt><span class="term"><code class="option">-i</code></span></dt><dd><p>将所有整数强制为标准 32 位整数，不要创建 64 位大整数，即使DBF标头签名似乎可以保证这一点。 </p></dd><dt><span class="term"><code class="option">-I</code></span></dt><dd><p>在几何列上生成 GiST 索引。 </p></dd><dt><span class="term"><code class="option">-m</code></span></dt><dd><p>-m <code class="filename">a_file_name</code>指定一个文件，其中包含一组（长）列名到 10 个字符的 DBF 列名的映射。文件的内容是由空格分隔的两个名称的一行或多行，并且没有尾随或前导空格。 例如： </p><pre class="programlisting">COLUMNNAME DBFFIELD1
AVERYLONGCOLUMNNAME DBFFIELD2</pre><p>
        </p></dd><dt><span class="term"><code class="option">-S</code></span></dt><dd><p>生成简单的几何图形而不是多个几何图形。仅当所有几何图形实际上都是单一的时才会成功（即具有单个壳的 MULTIPOLYGON，或具有单个顶点的 MULTIPOINT）。 </p></dd><dt><span class="term"><code class="option">-t &lt;dimensionality&gt;</code></span></dt><dd><p>强制输出几何具有指定的维度。使用以下方法表示维度的字符串：2D、3DZ、3DM、4D。 </p><p>如果输入的维度少于指定的维度，则输出将用零填充这些维度。 如果输入具有指定的更多维度，则不需要的维度将被删除。 </p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>使输出格式为 WKT 而不是 WKB。 重要的是要注意，精度可能会降低，并且可能会出现坐标波动。 </p></dd><dt><span class="term"><code class="option">-e</code></span></dt><dd><p>单独执行每个语句，而不使用事务。当存在一些产生错误的不良几何形状时，这允许加载大多数好的数据。请注意，这不能与 -D 标志一起使用，因为“转储”格式始终使用事务。 </p></dd><dt><span class="term"><code class="option">-W &lt;encoding&gt;</code></span></dt><dd><p>指定输入数据（dbf 文件）的编码。 使用时，dbf 的所有属性都会从指定的编码转换为 UTF8。生成的 SQL 输出将包含<code class="code">SET CLIENT_ENCODING to UTF8</code>命令，以便后端能够从 UTF8 重新转换为数据库配置为内部使用的任何编码。 </p></dd><dt><span class="term"><code class="option">-N &lt;policy&gt;</code></span></dt><dd><p>选择 NULL几何操作策略（插入*、跳过、中止） </p></dd><dt><span class="term"><code class="option">-n</code></span></dt><dd><p>-n 仅导入 DBF 文件。如果您的数据没有相应的shapefile文件，它将自动切换到此模式 并仅加载 DBF。因此，仅当您设置了完整的 shapefile 并且只需要属性数据而不需要几何图形时，才需要设置此标志。 </p></dd><dt><span class="term"><code class="option">-G</code></span></dt><dd><p>地理类型不使用几何类型，而是使用 WGS84 经度和纬度 （SRID=4326）（需要经度纬度数据） </p></dd><dt><span class="term"><code class="option">-T &lt;tablespace&gt;</code></span></dt><dd><p>指定新表的表空间。索引仍将使用 默认表空间，除非还使用 -X 参数。The PostgreSQL 文档对何时使用自定义表空间有很好的描述。 </p></dd><dt><span class="term"><code class="option">-X &lt;tablespace&gt;</code></span></dt><dd><p>指定新表上的索引要使用的表空间。 它适用于主键索引，如果 -I 一起使用，则也适用于 GiST 空间索引。 </p></dd><dt><span class="term"><code class="option">-Z</code></span></dt><dd><p>使用时，该标志将阻止生成<code class="code">ANALYZE</code>语句。 如果没有-Z标志（默认行为），将生成<code class="code">ANALYZE</code>语句。 </p></dd></dl></div><p>使用加载程序创建输入文件并加载它的示例会话可能如下所示： </p><pre class="programlisting">
# shp2pgsql -c -D -s 4269 -i -I shaperoads.shp myschema.roadstable 
&gt; roads.sql
# psql -d roadsdb -f roads.sql
</pre><p>转换和加载可以使用 UNIX 通道一步完成： </p><pre class="programlisting"># shp2pgsql shaperoads.shp myschema.roadstable | psql -d roadsdb</pre></section></section><section class="section" id="extracting-data"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.8. 提取空间数据</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#extract-data-sql">4.8.1. 使用SQL提取数据</a></span></li><li><span class="section"><a href="#pgsql2shp-usage">4.8.2. 使用Shapefile文件转储程序</a></span></li></ul></div><p>可以使用 SQL 或 Shapefile 转储程序从数据库中提取空间数据。有关 SQL 的部分介绍了一些可用于对空间表进行比较和查询的函数。 </p><section class="section" id="extract-data-sql"><div class="titlepage"><div><div><h3 class="title">4.8.1. 使用SQL提取数据</h3></div></div></div><p>从数据库中提取空间数据的最直接方法是使用 SQL <code class="code">SELECT</code> 查询来定义要提取的数据集并将结果列转储到可解析的文本文件中：</p><pre class="programlisting">db=# SELECT road_id, ST_AsText(road_geom) AS geom, road_name FROM roads;

road_id | geom                                    | road_name
--------+-----------------------------------------+-----------
          1 | LINESTRING(191232 243118,191108 243242) | Jeff Rd
          2 | LINESTRING(189141 244158,189265 244817) | Geordie Rd
          3 | LINESTRING(192783 228138,192612 229814) | Paul St
          4 | LINESTRING(189412 252431,189631 259122) | Graeme Ave
          5 | LINESTRING(190131 224148,190871 228134) | Phil Tce
          6 | LINESTRING(198231 263418,198213 268322) | Dave Cres
          7 | LINESTRING(218421 284121,224123 241231) | Chris Way
(6 rows)</pre><p>有时需要某种限制来减少返回的记录数量。对于基于属性的限制，请使用与非空间表相同的 SQL 语法。在空间限制的情况下，以下函数很有用：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="function">ST_Intersects</code></span></dt><dd><p>此函数指示两个几何图形是否共享任何空间。</p></dd><dt><span class="term"><code class="code">=</code></span></dt><dd><p>它测试两个几何形状在几何上是否相同。例如，如果“POLYGON((0 0,1 1,1 0,0 0))”与“POLYGON((0 0,1 1,1 0,0 0))”相同（确实如此）。 </p></dd></dl></div><p>接下来，您可以在查询中使用这些运算符。请注意，在 SQL 命令行上指定几何图形和框时，必须显式将字符串表示形式转换为几何函数。312是一个虚构的空间参考系统，与我们的数据相匹配。例如：</p><pre class="programlisting">SELECT road_id, road_name
  FROM roads
  WHERE roads_geom='SRID=312;LINESTRING(191232 243118,191108 243242)'::geometry;</pre><p>上面的查询从“ROADS_GEOM”表中返回与该值等效的单个记录。</p><p>要检查道路是否穿过由多边形定义的面，请执行以下操作：</p><pre class="programlisting">SELECT road_id, road_name
FROM roads
WHERE ST_Intersects(roads_geom, 'SRID=312;POLYGON((...))');</pre><p>最常见的空间查询可能是“基于框架”的查询，由数据浏览器和网络制图器等客户端软件使用，以获取“地图框架”的数据进行显示。 </p><p>使用“&amp;&amp;”运算符时，可以指定比较特征是 BOX3D 还是几何。 但是，如果指定几何图形，则其边界框用于比较。</p><p>使用框架的“BOX3D”对象，查询如下所示：</p><pre class="programlisting">
SELECT ST_AsText(roads_geom) AS geom
FROM roads
WHERE
  roads_geom &amp;&amp; ST_MakeEnvelope(191232, 243117,191232, 243119,312);
</pre><p>请注意使用 SRID 312 来指定包络的投影。</p></section><section class="section" id="pgsql2shp-usage"><div class="titlepage"><div><div><h3 class="title">4.8.2. 使用Shapefile文件转储程序</h3></div></div></div><p><code class="filename">pgsql2shp</code>表转储器连接到数据库并将表（可能由查询定义）转换为形状文件。 基本语法是：</p><pre class="programlisting">
pgsql2shp [&lt;options
&gt;] &lt;database
&gt; [&lt;schema
&gt;.]&lt;table&gt;
</pre><pre class="programlisting">
pgsql2shp [&lt;options
&gt;] &lt;database
&gt; &lt;query&gt;
</pre><p>命令行选项包括：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-f &lt;filename&gt;</code></span></dt><dd><p>将输出写入特定文件名。</p></dd><dt><span class="term"><code class="option">-h &lt;host&gt;</code></span></dt><dd><p>要连接到的数据库的主机名。</p></dd><dt><span class="term"><code class="option">-p &lt;port&gt;</code></span></dt><dd><p>要连接到的数据库的端口。</p></dd><dt><span class="term"><code class="option">-P &lt;password&gt;</code></span></dt><dd><p>用于连接到数据库的密码。</p></dd><dt><span class="term"><code class="option">-u &lt;user&gt;</code></span></dt><dd><p>要连接到数据库的用户名。</p></dd><dt><span class="term"><code class="option">-g &lt;geometry column&gt;</code></span></dt><dd><p>对于具有多个几何列的表，写入形状文件时要使用的几何列。</p></dd><dt><span class="term"><code class="option">-b</code></span></dt><dd><p>使用二进制游标。 这将使操作更快，但如果表中的任何非几何属性缺少文本转换，则该操作将不起作用。</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>原始模式。不要删除<code class="varname">gid</code>字段或转义列名称。</p></dd><dt><span class="term"><code class="option">-m filename</code></span></dt><dd><p>将标识符重新映射为十个字符名称。文件的内容是由单个空格分隔的两个符号行，并且没有尾随或前导空格：VERYLONGSYMBOL SHORTONE ANOTHERVERYLONGSYMBOL SHORTER 等。</p></dd></dl></div></section></section><section class="section" id="build-indexes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.9. 空间索引</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#gist_indexes">4.9.1. GiST 索引</a></span></li><li><span class="section"><a href="#brin_indexes">4.9.2. BRIN 索引</a></span></li><li><span class="section"><a href="#spgist_indexes">4.9.3. SP-GiST 索引</a></span></li><li><span class="section"><a href="#tuning-index-usage">4.9.4. 调优索引的使用</a></span></li></ul></div><p>空间索引使得使用空间数据库存储大型数据集成为可能。如果没有索引，搜索功能需要顺序扫描数据库中的每条记录。索引通过将数据组织成可快速遍历以查找匹配记录的结构来加快搜索速度。 </p><p>通常用于属性数据的B树索引方法对于空间数据来说不是很有用，因为它只支持单个维度的数据存储和查询。诸如几何形状（具有 2 个或更多维度）之类的数据需要支持跨所有数据维度的范围查询的索引方法。PostgreSQL 在空间数据处理方面的主要优势之一是它提供了多种适用于多维数据的索引方法：GiST、BRIN 和 SP-GiST 索引。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>GiST (广义搜索树)</strong></span> 索引将数据分解为“一侧的事物”、“重叠的事物”、“内部的事物”，并且可用于多种数据类型，包括 GIS 数据。PostGIS 使用在 GiST 之上实现的 R-Tree 索引来索引空间数据。 GiST是最常用、最通用的空间索引方法，提供非常好的查询性能。 </p></li><li class="listitem"><p><span class="bold"><strong>BRIN (块范围索引)</strong></span>索引通过汇总表记录范围的空间范围进行操作。搜索是通过扫描范围来完成的。BRIN仅适用于某些类型的数据（空间排序、更新不频繁或不更新）。但它提供了更快的索引创建时间和更小的索引大小。 </p></li><li class="listitem"><p><span class="bold"><strong>SP-GiST (空间分区广义搜索树)</strong></span>是一种通用索引方法，支持四叉树、k-d 树和基数树（tries）等分区搜索树。 </p></li></ul></div><p>空间索引仅存储几何图形的边界框。空间查询使用索引作为<span class="bold"><strong>主要过滤器</strong></span>来快速确定一组可能与查询条件匹配的几何图形。大多数空间查询需要使用空间谓词函数的<span class="bold"><strong>辅助过滤器</strong></span> 来测试更具体的空间条件。有关使用空间谓词进行查询的更多信息，请参阅<a class="xref" href="#using-query-indexes" title="5.2. 使用空间索引">Section 5.2, “使用空间索引”</a> 。 </p><p>另请参阅 <a class="link" href="https://postgis.net/workshops/postgis-intro/indexing.html" target="_top">PostGIS Workshop有关空间索引的部分</a>以及<a class="link" href="https://www.postgresql.org/docs/current/indexes.html" target="_top">PostgreSQL手册</a>。 </p><section class="section" id="gist_indexes"><div class="titlepage"><div><div><h3 class="title">4.9.1. GiST 索引</h3></div></div></div><p>GiST 代表“广义搜索树”，是多维数据索引的通用形式。PostGIS 使用在 GiST 之上实现的 R-Tree 索引来索引空间数据。GiST是最常用、最通用的空间索引方法，提供非常好的查询性能。GiST 的其他实现用于加速对不适合普通 B 树索引的各种不规则数据结构（整数数组、光谱数据等）的搜索。有关详细信息，请参阅<a class="link" href="https://www.postgresql.org/docs/current/gist.html" target="_top">PostgreSQL手册</a>。 </p><p>一旦空间数据表超过几千行，您将需要构建索引来加速数据的空间搜索（除非您的所有搜索都基于属性，在这种情况下，您将需要在空间数据表上构建普通索引） 属性字段）。</p><p>在“geometry”列上构建 GiST 索引的语法如下：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING GIST ( [geometryfield] ); </pre><p>上述语法将始终构建 2D 索引。若要获取几何类型的 n 维索引，可以使用以下语法创建一个索引：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING GIST ([geometryfield] gist_geometry_ops_nd);</pre><p>构建空间索引是一项计算密集型工作。它还会在创建表时阻止对表的写入访问，因此在生产系统上，您可能希望以较慢的并发感知方式执行：</p><pre class="programlisting">CREATE INDEX CONCURRENTLY [indexname] ON [tablename] USING GIST ( [geometryfield] ); </pre><p>建立索引后，让 PostgreSQL 不时收集表上的统计信息会很有帮助。它用于优化查询计划：</p><pre class="programlisting">VACUUM ANALYZE [table_name] [(column_name)];</pre></section><section class="section" id="brin_indexes"><div class="titlepage"><div><div><h3 class="title">4.9.2. BRIN 索引</h3></div></div></div><p>BRIN 代表“区块范围索引”。 它是 PostgreSQL 9.5 中引入的<span class="emphasis"><em>通用</em></span>索引方法。BRIN 是一种有损索引方法，这意味着需要进行二次检查来确认记录与给定的搜索条件匹配（所有提供的空间索引都是这种情况）。它提供更快的索引创建速度和更小的索引大小，以及合理的读取性能。 其主要目的是支持在与其在表中的物理位置相关的列上对非常大的表建立索引。 除了空间索引之外，BRIN 还可以加快各种属性数据结构（整数、数组等）的搜索速度。有关详细信息，请参阅<a class="link" href="https://www.postgresql.org/docs/current/brin.html" target="_top">PostgreSQL手册</a>。 </p><p>一旦空间表超过几千行，您将需要构建索引来加速数据的空间搜索。只要 GiST 索引的大小不超过数据库可用的 RAM 量，并且只要您能够承受索引存储大小以及写入时更新索引的成本，GiST 索引的性能就非常好。 否则，对于非常大的表，可以考虑将 BRIN 索引作为替代方案。</p><p>BRIN 索引存储包围一组连续的表块（称为<span class="emphasis"><em>块范围</em></span>）中的行中包含的所有几何图形的边界框。使用索引执行查询时，将扫描块范围以查找与查询范围相交的块范围。仅当数据经过物理排序以使块范围的边界框具有最小重叠（并且理想情况下是互斥的）时，这才是有效的。 生成的索引非常小，但读取相同数据时的性能通常低于 GiST 索引。</p><p>构建 BRIN 索引比构建 GiST 索引占用的 CPU 资源要少得多。我们经常发现，对于相同数据，BRIN 索引的构建速度比 GiST 索引快十倍。由于 BRIN 索引只为每个表块范围存储一个边界框，因此通常使用的磁盘空间比 GiST 索引少一千倍。</p><p>您可以选择要在某个范围内汇总的块数。 如果减少这个数字，索引会更大，但可能会提供更好的性能。</p><p>为了使 BRIN 有效，表数据应按物理顺序存储，从而最大限度地减少块范围重叠量。数据可能已经适当排序（例如，如果它是从已按空间顺序排序的另一个数据集加载的）。否则，这可以通过按一维空间键对数据进行排序来完成。 一种方法是创建一个按几何值排序的新表（在最近的 PostGIS 版本中使用有效的希尔伯特曲线排序）： </p><pre class="programlisting">CREATE TABLE table_sorted AS
   SELECT * FROM table  ORDER BY geom;
</pre><p>或者，可以通过使用 GeoHash 作为（临时）索引并对该索引进行聚类来对数据进行适当排序： </p><pre class="programlisting">CREATE INDEX idx_temp_geohash ON table
    USING btree (ST_GeoHash( ST_Transform( geom, 4326 ), 20));
CLUSTER table USING idx_temp_geohash;
</pre><p>在<code class="code">geometry</code> 列上构建 BRIN 索引的语法为：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING BRIN ( [geome_col] ); </pre><p>上述语法构建二维索引。若要生成三维索引，请使用以下语法：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename]
    USING BRIN ([geome_col] brin_geometry_inclusion_ops_3d);</pre><p>您还可以使用 4D 运算符类获取 4D 维度索引：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename]
    USING BRIN ([geome_col] brin_geometry_inclusion_ops_4d);</pre><p>在上面的命令中，范围内的块数使用默认值 128。 此语句用于指定聚合中某个区域中的块数</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename]
    USING BRIN ( [geome_col] ) WITH (pages_per_range = [number]); </pre><p>请记住，BRIN 索引仅存储大量行的一个索引条目。如果您的表存储具有混合维数的几何图形，则生成的索引的性能可能会很差。您可以通过选择存储几何图形维数最少的运算符类来避免这种性能损失 </p><p>BRIN 索引支持<code class="code">geography</code>数据类型。在geography列上构建 BRIN 索引的语法是：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING BRIN ( [geog_col] ); </pre><p>上述语法为椭球体上的地理空间对象构建 2D 索引。 </p><p>目前，仅提供“包容性支持”，这意味着只有<code class="varname">&amp;&amp;</code>、<code class="varname">~</code>和 <code class="varname">@</code>运算符可用于 2D 情况（对于<code class="code">几何</code>和<code class="code">地理</code> ），而运算符 <code class="varname">&amp;&amp;&amp;</code>只能用于 3D 几何图形。目前不支持 kNN 搜索。</p><p>BRIN 与其他索引类型的一个重要区别是数据库不会动态维护索引。对表中空间数据的更改只需附加到索引的末尾。这将导致索引搜索性能随着时间的推移而降低。 可以通过执行 <code class="code">VACUUM</code>或使用特殊函数<code class="code">brin_summarize_new_values(regclass)</code>来更新索引。 因此，BRIN 可能最适合用于只读或很少更改的数据。有关更多信息，请参阅<a class="link" href="https://www.postgresql.org/docs/current/brin-intro.html#BRIN-OPERATION" target="_top">手册</a>。 </p><p>总结一下对空间数据使用 BRIN 的情况： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>索引构建时间非常快，索引大小非常小。</p></li><li class="listitem"><p>索引查询时间比 GiST 慢，但完全可以接受。</p></li><li class="listitem"><p>要求按空间顺序对表数据进行排序。</p></li><li class="listitem"><p>需要手动维护索引。</p></li><li class="listitem"><p>它最适合重叠很少或没有重叠（例如，点）且静态或不经常更改的大型表。</p></li><li class="listitem"><p>对于返回相对大量数据记录的查询更有效。</p></li></ul></div></section><section class="section" id="spgist_indexes"><div class="titlepage"><div><div><h3 class="title">4.9.3. SP-GiST 索引</h3></div></div></div><p>SP-GiST代表“空间分区广义搜索树”，是多维数据类型索引的通用形式，支持分区搜索树，例如四叉树、k-d 树和基数树 (tries)。 这些数据结构的共同特征是它们将搜索空间重复划分为大小不必相等的分区。除了空间索引之外，SP-GiST 还用于加速多种数据的搜索，例如电话路由、ip 路由、子字符串搜索等。有关更多信息，请参阅<a class="link" href="https://www.postgresql.org/docs/current/spgist.html" target="_top">PostgreSQL手册</a>。 </p><p>与 GiST 索引的情况一样，SP-GiST索引是有损的，因为它们存储包围空间对象的边界框。SP-GiST 索引可以被视为 GiST 索引的替代方案。</p><p>一旦 GIS 数据表超过几千行，就可以使用 SP-GiST 索引来加速数据的空间搜索。 在“geometry”列上构建 SP-GiST 索引的语法如下：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING SPGIST ( [geometryfield] ); </pre><p>上面的语句构建了一个二维索引。 几何类型的三维索引是使用三维运算符类生成的，如下所示：</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING SPGIST ([geometryfield] spgist_geometry_ops_3d);</pre><p>构建空间索引是一项计算密集型操作。它还会在创建表时阻止对表的写入访问，因此在生产系统上，您可能希望以较慢的并发感知方式执行操作：</p><pre class="programlisting">CREATE INDEX CONCURRENTLY [indexname] ON [tablename] USING SPGIST ( [geometryfield] ); </pre><p>建立索引后，让 PostgreSQL 不时收集表上的统计信息会很有帮助。它用于优化查询计划：</p><pre class="programlisting">VACUUM ANALYZE [table_name] [(column_name)];</pre><p>SP-GiST 索引可以加速涉及以下运算符的查询：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>对于二维索引，&lt;&lt;, &amp;&lt;, &amp;&gt;, &gt;&gt;, &lt;&lt;|, &amp;&lt;|, |&amp;&gt;, |&gt;&gt;, &amp;&amp;, @&gt;, &lt;@, 和 ~=</p></li><li class="listitem"><p>对于三维索引，&amp;/&amp;, ~==, @&gt;&gt;,和&lt;&lt;@。</p></li></ul></div><p>目前不支持 kNN 搜索。</p></section><section class="section" id="tuning-index-usage"><div class="titlepage"><div><div><h3 class="title">4.9.4. 调优索引的使用</h3></div></div></div><p>通常，索引会无形中加速数据访问：一旦建立索引，PostgreSQL查询规划器就会自动决定何时使用它来提高查询性能。但在某些情况下，规划器不会选择使用现有索引，因此查询最终会使用缓慢的顺序扫描而不是空间索引。</p><p>如果发现空间索引未被使用， 您可以执行以下几项操作：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>可以通过测试查询计划和查看查询来计算所需的内容。不正确的连接、忘记的表和不正确的表可能会导致多次意外的表记录查找。若要获取查询计划，请在查询开始时执行<code class="code">EXPLAIN</code>。</p></li><li class="listitem"><p>确保收集有关表中值的数量和分布的统计信息，以便为查询规划者提供更好的信息来做出有关索引使用的决策。<span class="command"><strong>VACUUM ANALYZE</strong></span>将计算两者。</p><p>无论如何，您应该定期清理数据库。许多 PostgreSQL DBA 定期将 <span class="command"><strong>VACUUM</strong></span> 作为非高峰 cron 作业运行。</p></li><li class="listitem"><p>如果清理没有帮助，您可以使用命令<span class="command"><strong>SET ENABLE_SEQSCAN TO OFF;</strong></span>暂时强制规划器使用索引信息。 通过这种方式，您可以检查规划器是否能够为您的查询生成索引加速查询计划。您应该仅使用此命令进行调试；一般来说，规划者比你更了解何时使用索引。运行查询后，不要忘记运行<span class="command"><strong>SET ENABLE_SEQSCAN TO ON;</strong></span> 以便规划器能够正常运行其他查询。</p></li><li class="listitem"><p>如果 <span class="command"><strong>SET ENABLE_SEQSCAN TO OFF;</strong></span> 帮助您的查询运行得更快，则您的 Postgres 可能未针对您的硬件进行调整。 如果您发现规划器对顺序扫描与索引扫描的成本有误，请尝试减小 <code class="varname">RANDOM_PAGE_COST</code> 值（位于 <code class="code">postgresql.conf</code>中），或使用 <span class="command"><strong>SET RANDOM_PAGE_COST TO 1.1;</strong></span>。 <code class="varname">RANDOM_PAGE_COST</code> 的默认值为 4.0。 尝试将其设置为 1.1（对于 SSD）或 2.0（对于快速磁盘）。 减小该值使规划器更有可能使用索引扫描。</p></li><li class="listitem"><p>如果<span class="command"><strong>SET ENABLE_SEQSCAN TO OFF;</strong></span>对您的查询没有帮助，该查询可能使用 Postgres 规划器尚无法优化的 SQL 构造。 可以以规划器能够处理的方式重写查询。例如，具有内联 SELECT 的子查询可能不会产生有效的计划，但可能会使用 LATERAL JOIN 进行重写。</p></li></ul></div><p>有关更多信息，请参阅 PostgreSQL 手册的<a class="link" href="https://www.postgresql.org/docs/current/runtime-config-query.html" target="_top">查询规划</a>部分。 </p></section></section></section><section class="chapter" id="using_postgis_query"><div class="titlepage"><div><div><h1 class="title">Chapter 5. 空间查询</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#eval_spatial_rel">5.1. 空间关系的确定</a></span></li><li><span class="section"><a href="#using-query-indexes">5.2. 使用空间索引</a></span></li><li><span class="section"><a href="#examples_spatial_sql">5.3. 空间SQL示例</a></span></li></ul></div><p>空间数据库<span class="emphasis"><em>存在的理由</em></span>是在数据库内执行查询，这通常需要桌面 GIS 功能。有效使用 PostGIS 需要了解哪些空间函数可用、如何在查询中使用它们，并确保适当的索引以提供良好的性能。 </p><section class="section" id="eval_spatial_rel"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.1. 空间关系的确定</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#DE-9IM">5.1.1. 维度扩展九交模型（Dimensionally Extended 9-Intersection Model）</a></span></li><li><span class="section"><a href="#named-spatial-rel">5.1.2. 命名空间关系</a></span></li><li><span class="section"><a href="#general-spatial-rel">5.1.3. 一般空间关系</a></span></li></ul></div><p>空间关系显示两个几何图形如何相互关联。用于查询几何的基本功能。 </p><section class="section" id="DE-9IM"><div class="titlepage"><div><div><h3 class="title">5.1.1. 维度扩展九交模型（Dimensionally Extended 9-Intersection Model）</h3></div></div></div><p>根据<a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS SQL简单特征实现规范</a>，“比较两个几何图形的基本方法是对两个几何图形的内部、边界和外部之间的相交进行交集测试，并根据'交集矩阵'的元素对两个几何之间的关系进行分类。”</p><p>在点集拓扑理论中，嵌入二维空间的几何中的点被分为三个集合： </p><div class="glosslist"><dl><dt><span class="glossterm">边界</span></dt><dd class="glossdef"><p>几何的边界是下一个较低维度的几何的集合。 对于维数为 0 的 <code class="varname">POINT</code>，边界是空集。<code class="varname">LINESTRING</code>的边界是两个端点。 对于<code class="varname">POLYGON</code>，边界是外环和内环的线条。</p></dd><dt><span class="glossterm">内部</span></dt><dd class="glossdef"><p>几何图形的内部是几何图形中不在边界内的那些点。对于<code class="varname">POINT</code>来说，内部就是点本身。<code class="varname">LINESTRING</code>的内部是端点之间的点集。 对于<code class="varname">POLYGON</code>，内部是多边形内的面。</p></dd><dt><span class="glossterm">外部</span></dt><dd class="glossdef"><p>几何体的外部是几何体嵌入的空间的其余部分；换句话说，所有不在几何内部或边界上的点。 它是一个二维非封闭曲面。 </p></dd></dl></div><p><a class="link" href="http://en.wikipedia.org/wiki/DE-9IM" target="_top">九交模型</a> (DE-9IM)通过指定每个几何图形的上述集合之间的 9 个相交的维度来描述两个几何图形之间的空间关系。交集维度可以正式表示为 3x3 <span class="bold"><strong>交集矩阵</strong></span>。 </p><p>对于几何图形<span class="emphasis"><em>g</em></span>，<span class="emphasis"><em>内部</em></span>、<span class="emphasis"><em>边界</em></span>和<span class="emphasis"><em>外部</em></span>使用符号<span class="emphasis"><em>I(g)</em></span>、<span class="emphasis"><em>B(g)</em></span>和<span class="emphasis"><em>E(g)</em></span>表示。 此外，<span class="emphasis"><em>dim(s)</em></span> 表示集合<span class="emphasis"><em>s</em></span> （域为 <code class="literal">{0,1,2,F}</code>）： </p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">0</code> =&gt; 点集合</p></li><li class="listitem"><p><code class="literal">1</code> =&gt; 线集合</p></li><li class="listitem"><p><code class="literal">2</code> =&gt; 面集合</p></li><li class="listitem"><p><code class="literal">F</code> =&gt;空集合</p></li></ul></div><p>使用此表示法，两个几何<span class="emphasis"><em>a</em></span>和<span class="emphasis"><em>b</em></span>的交集矩阵为：</p><div class="styledtable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>内部（Interior）</strong></span></th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>边界（Boundary）</strong></span></th><th style="text-align: center; border-bottom: 1px solid ; "><span class="bold"><strong>外部（Exterior）</strong></span></th></tr></thead><tbody><tr><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>内部（Interior）</strong></span></td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="emphasis"><em>dim( I(a) ∩ I(b) )</em></span></td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="emphasis"><em>dim( I(a) ∩ B(b) )</em></span></td><td style="text-align: center; border-bottom: 1px solid ; "><span class="emphasis"><em>dim( I(a) ∩ E(b) )</em></span></td></tr><tr><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>边界（Boundary）</strong></span></td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="emphasis"><em>dim( B(a) ∩ I(b) )</em></span></td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="emphasis"><em>dim( B(a) ∩ B(b) )</em></span></td><td style="text-align: center; border-bottom: 1px solid ; "><span class="emphasis"><em>dim( B(a) ∩ E(b) )</em></span></td></tr><tr><td style="text-align: center; border-right: 1px solid ; "><span class="bold"><strong>外部（Exterior）</strong></span></td><td style="text-align: center; border-right: 1px solid ; "><span class="emphasis"><em>dim( E(a) ∩ I(b) )</em></span></td><td style="text-align: center; border-right: 1px solid ; "><span class="emphasis"><em>dim( E(a) ∩ B(b) )</em></span></td><td style="text-align: center; "><span class="emphasis"><em>dim( E(a) ∩ E(b) )</em></span></td></tr></tbody></table></div><p>从视觉上看，对于两个重叠的多边形几何图形，如下所示：</p><div class="informaltable"><table style="border: none;"><colgroup><col style="width: 80pt; "/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "><div class="informalfigure"><div style="text-align: center; " class="mediaobject"><table style="border: 0; cellpadding: 0; cellspacing: 0;"><tr><td style="text-align: center; vertical-align: middle; "><img style="text-align: middle; " src="images/de9im04.png"/></td></tr></table></div></div></td></tr><tr><td style="text-align: center; vertical-align: middle; border-right: 1px solid ; "><div class="informalfigure"><div style="text-align: center; " class="mediaobject"><table style="border: 0; cellpadding: 0; cellspacing: 0;"><tr><td style="text-align: center; vertical-align: middle; "><img style="text-align: middle; " src="images/de9im03.png"/></td></tr></table></div></div></td><td><table style="width: 100%; border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/><col/></colgroup><thead style="vertical-align: middle; "><tr><th style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "> </th><th style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>内部（Interior）</strong></span></th><th style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>边界（Boundary）</strong></span></th><th style="vertical-align: middle; border-bottom: 1px solid ; "><span class="bold"><strong>外部（Exterior）</strong></span></th></tr></thead><tbody style="vertical-align: middle; "><tr><td style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; ">
                                <span class="bold"><strong>内部（Interior）</strong></span>
                            </td><td style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im05.png"/></div></div><p><span class="emphasis"><em>dim( I(a) ∩ I(b) ) = </em></span><span class="bold"><strong>2</strong></span></p></td><td style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im06.png"/></div></div><p><span class="emphasis"><em>dim( I(a) ∩ B(b) = </em></span><span class="bold"><strong>1</strong></span></p></td><td style="vertical-align: middle; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im07.png"/></div></div><p><span class="emphasis"><em>dim( I(a) ∩ E(b) ) = </em></span><span class="bold"><strong>2</strong></span></p></td></tr><tr><td style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><span class="bold"><strong>边界（Boundary）</strong></span></td><td style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im08.png"/></div></div><p><span class="emphasis"><em>dim( B(a) ∩ I(b) ) = </em></span><span class="bold"><strong>1</strong></span></p></td><td style="vertical-align: middle; border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im09.png"/></div></div><p><span class="emphasis"><em>dim( B(a) ∩ B(b) ) = </em></span><span class="bold"><strong>0</strong></span></p></td><td style="vertical-align: middle; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im10.png"/></div></div><p><span class="emphasis"><em>dim( B(a) ∩ E(b) ) = </em></span><span class="bold"><strong>1</strong></span></p></td></tr><tr><td style="vertical-align: middle; border-right: 1px solid ; "><span class="bold"><strong>外部（Exterior）</strong></span></td><td style="vertical-align: middle; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im11.png"/></div></div><p><span class="emphasis"><em>dim( E(a) ∩ I(b) ) = </em></span><span class="bold"><strong>2</strong></span></p></td><td style="vertical-align: middle; border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im12.png"/></div></div><p><span class="emphasis"><em>dim( E(a) ∩ B(b) ) = </em></span><span class="bold"><strong>1</strong></span></p></td><td style="vertical-align: middle; "><div class="informalfigure"><div class="mediaobject"><img src="images/de9im13.png"/></div></div><p><span class="emphasis"><em>dim( E(a) ∩ E(b) = </em></span><span class="bold"><strong>2</strong></span></p></td></tr></tbody></table></td></tr></tbody></table></div><p>从左到右，从上到下阅读。交集矩阵的字符串表示形式为“<span class="bold"><strong>212101212</strong></span>”。</p><p>欲了解更多信息，请访问：</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">适用于 SQL 的 OpenGIS 简单功能实现规范</a> (1.1版本, 第 2.1.13.2 节)</p></li><li class="listitem"><p><a class="link" href="https://en.wikipedia.org/wiki/DE-9IM" target="_top">维基百科：维度扩展九交集模型 （DE-9IM）</a></p></li><li class="listitem"><p><a class="link" href="http://docs.geotools.org/latest/userguide/library/jts/dim9.html" target="_top">地理工具：点集理论和DE-9IM矩阵</a></p></li></ul></div></section><section class="section" id="named-spatial-rel"><div class="titlepage"><div><div><h3 class="title">5.1.2. 命名空间关系</h3></div></div></div><p>为了便于确定常见的空间关系，OGC SFS 定义了一组<span class="emphasis"><em>命名空间关系谓词</em></span>。PostGIS 将这些功能提供为函数 <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>, <a class="xref" href="#ST_Touches" title="ST_Touches">ST_Touches</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a>。 它还定义了非标准关系谓词 <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, 和<a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>。 </p><p>空间谓词通常用作 SQL <code class="code">WHERE</code>或<code class="code">JOIN</code>子句中的条件。如果空间索引可用，命名空间谓词会自动使用空间索引，因此无需使用边界框运算符<code class="code">&amp;&amp;</code>。例如： </p><pre class="programlisting">SELECT city.name, state.name, city.geom
FROM city JOIN state ON ST_Intersects(city.geom, state.geom);
</pre><p>有关更多详细信息和插图，请参阅<a class="link" href="https://postgis.net/workshops/postgis-intro/spatial_relationships.html" target="_top">PostGIS Workshop.</a></p></section><section class="section" id="general-spatial-rel"><div class="titlepage"><div><div><h3 class="title">5.1.3. 一般空间关系</h3></div></div></div><p>在某些情况下，指定的空间关系不足以提供所需的空间过滤条件。 </p><div class="informaltable"><table style="border: none;"><colgroup><col/></colgroup><tbody><tr><td><div style="float: right;" class="informalfigure-float"><div class="informalfigure"><div style="text-align: left; " class="mediaobject"><img style="text-align: left; " src="images/de9im01.png"/></div></div></div><p>例如，考虑表示道路网络的线性数据集。 可能需要识别所有相互交叉的路段，不是在一个点，而是在一条线上（也许是为了验证某些业务规则）。 在这种情况下，<a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>不提供必要的空间过滤器，因为对于线性要素，它仅在它们在某个点交叉的地方返回<code class="varname">true</code>。 </p>
                <p>两步解决方案是首先计算空间相交 (<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>)的道路线对的实际交叉点 (<a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>)，然后检查交叉点的 <a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> 是否为“<code class="varname">LINESTRING</code>”（正确处理返回 <code class="varname">GEOMETRYCOLLECTION</code>、<code class="varname">[MULTI]POINT</code>、<code class="varname">[MULTI]LINESTRING</code>等情况）。</p>
                <p>显然，更简单、更快捷的解决方案更可取。</p></td></tr></tbody></table></div><div class="informaltable"><table style="border: none;"><colgroup><col/></colgroup><tbody><tr><td><p> </p><div style="float: right;" class="informalfigure-float"><div class="informalfigure"><div style="text-align: right; " class="mediaobject"><img style="text-align: right; " src="images/de9im02.png"/></div></div></div> <p>第二个例子是定位与湖泊边界相交的码头，并且码头的一端位于岸上。换句话说，如果码头位于湖泊内但未完全被湖泊包围，则与湖泊边界相交于一条线，并且码头的端点之一恰好位于湖泊边界内或湖泊边界上。 可以使用空间谓词的组合来查找所需的特征：</p> <div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>(lake, wharf) = TRUE</p></li><li class="listitem"><p><a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>(lake, wharf) = FALSE</p></li><li class="listitem"><p><a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>(<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>(wharf, lake)) = 'LINESTRING'</p></li><li class="listitem"><p><a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a>(<a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>(<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>(<a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>(wharf), <a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>(lake)))) = 1</p><p>... 不用说，这非常复杂。</p></li></ul></div></td></tr></tbody></table></div><p>这些要求可以通过计算完整的 DE-9IM 交集矩阵来满足。PostGIS 提供了<a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a> 函数来执行此操作： </p><pre class="programlisting">SELECT ST_Relate( 'LINESTRING (1 1, 5 5)',
                  'POLYGON ((3 3, 3 7, 7 7, 7 3, 3 3))' );
st_relate
-----------
1010F0212
</pre><p>为了测试特定的空间关系，使用<span class="bold"><strong>相交矩阵模式</strong></span>。这是用附加符号<code class="literal">{T,*}</code>增强的矩阵表示： </p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">T</code> =&gt; 表示交集的维度不为空;即<code class="literal">{0,1,2}</code></p></li><li class="listitem"><p><code class="literal">*</code> =&gt; 任何东西</p></li></ul></div><p>使用交叉矩阵模式，可以以更简洁的方式评估特定的空间关系。<a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a>和<a class="xref" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a> 函数可用于测试相交矩阵模式。 对于上面的第一个示例，指定两条线相交的交集矩阵模式为<span class="bold"><strong>1*1***1**</strong></span>'：</p><pre class="programlisting">-- Find road segments that intersect in a line
SELECT a.id
FROM roads a, roads b
WHERE a.id != b.id
      AND a.geom &amp;&amp; b.geom
      AND ST_Relate(a.geom, b.geom, '1*1***1**');</pre><p>这是第二个示例。当线部分位于多边形内部和外部时，相交矩阵模式为‘<span class="bold"><strong>102101FF2</strong></span>’：</p><pre class="programlisting">
-- Find wharves partly on a lake's shoreline
SELECT a.lake_id, b.wharf_id
FROM lakes a, wharfs b
WHERE a.geom &amp;&amp; b.geom
      AND ST_Relate(a.geom, b.geom, '102101FF2');
</pre></section></section><section class="section" id="using-query-indexes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.2. 使用空间索引</h2></div></div></div><p>使用空间条件构建查询时，为了获得最佳性能，确保使用空间索引（如果存在）非常重要（请参阅<a class="xref" href="#build-indexes" title="4.9. 空间索引">Section 4.9, “空间索引”</a>）。为此，必须在查询的<code class="code">WHERE</code>或<code class="code">ON</code>子句中使用空间运算符或索引感知函数。 </p><p>空间运算符包括边界框运算符（其中最常用的是<a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>; 有关完整列表，请参见<a class="xref" href="#operators-bbox" title="7.10.1. 边界框运算符">Section 7.10.1, “边界框运算符”</a>）以及最近邻查询中使用的距离运算符（最常见的是<a class="xref" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a>; 有关完整列表，请参见 <a class="xref" href="#operators-distance" title="7.10.2. 距离运算符">Section 7.10.2, “距离运算符”</a>。) </p><p>索引感知函数会自动将边界框运算符添加到空间条件中。 索引感知函数包括命名空间关系谓词 <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>, <a class="xref" href="#ST_Touches" title="ST_Touches">ST_Touches</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a>, 和<a class="xref" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> 以及距离谓词<a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>, <a class="xref" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a>, 和 <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>。） </p><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a> 等函数<span class="emphasis"><em>不</em></span>使用索引来优化其操作。例如，以下查询在大型表上会非常慢：</p><pre class="programlisting">
SELECT geom
FROM geom_table
WHERE ST_Distance( geom, 'SRID=312;POINT(100000 200000)' ) &lt; 100
</pre><p>此查询选择 <code class="code">geom_table</code> 中距离该点 (100000, 200000) 100 个单位 以内的所有几何图形。 它会很慢，因为它正在计算表中每个点与指定点之间的距离，即为进行<code class="varname">ST_Distance()</code> 计算（对表中的<span class="bold"><strong>每一行</strong></span>）。 </p><p>通过使用索引感知函数<a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> 可以大大减少处理的行数：</p><pre class="programlisting">SELECT geom
FROM geom_table
WHERE ST_DWithin( geom, 'SRID=312;POINT(100000 200000)', 100 )
</pre><p>此查询选择相同的几何图形，但采用更有效的方法。 通过使用<code class="varname">ST_DWithin()</code>带有查询几何图形的放大边界框的<code class="varname">&amp;&amp;</code>运算符，可以在内部实现。 如果<code class="code">geom</code>存在空间索引，则查询规划器知道该索引可用于在计算距离之前减少感兴趣的行数。空间索引允许您仅搜索与边界框扩展范围重叠的几何，从而搜索 <span class="emphasis"><em>可能</em></span>位于所需距离内的几何。 然后执行实际距离计算以查看结果集中的记录是否包括在内。 </p><p>有关详细信息和示例，请参阅<a class="link" href="https://postgis.net/workshops/postgis-intro/indexing.html" target="_top">PostGIS Workshop</a>。 </p></section><section class="section" id="examples_spatial_sql"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.3. 空间SQL示例</h2></div></div></div><p>本节中的示例使用线性道路表和多边形城市边界表。<code class="varname">bc_roads</code> 表的定义是：</p><pre class="programlisting">Column    | Type              | Description
----------+-------------------+-------------------
gid       | integer           | Unique ID
name      | character varying | Road Name
geom      | geometry          | Location Geometry (Linestring)</pre><p><code class="varname">bc_municipality</code>表定义如下：</p><pre class="programlisting">Column   | Type              | Description
---------+-------------------+-------------------
gid      | integer           | Unique ID
code     | integer           | Unique ID
name     | character varying | City / Town Name
geom     | geometry          | Location Geometry (Polygon)</pre><div class="qandaset" id="idm2906"><ul><li><a href="#qa_total_length_roads">5.3.1. 道路的总长度是多少公里？</a></li><li><a href="#idm2913">5.3.2. 乔治王子城有多大（以公顷为单位）？</a></li><li><a href="#idm2919">5.3.3. 按面积计算，该省最大的直辖市是哪个？</a></li><li><a href="#idm2926">5.3.4. 每个城市包含的道路总长度是多少？</a></li><li><a href="#idm2933">5.3.5. 创建一个包含乔治王子市内所有道路的新表。</a></li><li><a href="#idm2939">5.3.6. 维多利亚州的“道格拉斯街”有多长（公里）？</a></li><li><a href="#idm2944">5.3.7. 哪个市政面的孔洞最大？</a></li></ul><table style="border: 0; width: 100%;"><colgroup><col style="text-align: left; width: 1%; "/><col/></colgroup><tbody><tr class="question" id="qa_total_length_roads"><td style="text-align: left; vertical-align: top; " id="idm2908"><p><strong>5.3.1.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>道路的总长度是多少公里？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>这个问题可以用非常简单的SQL来回答，例如：</p><pre class="programlisting">SELECT sum(ST_Length(geom))/1000 AS km_roads FROM bc_roads;

km_roads
------------------
70842.1243039643
</pre></td></tr><tr class="question" id="idm2913"><td style="text-align: left; vertical-align: top; " id="idm2914"><p><strong>5.3.2.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>乔治王子城有多大（以公顷为单位）？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>此查询将空间计算（面面积）与属性条件（自治市名称）结合使用：</p><pre class="programlisting">SELECT
  ST_Area(geom)/10000 AS hectares
FROM bc_municipality
WHERE name = 'PRINCE GEORGE';

hectares
------------------
32657.9103824927
</pre></td></tr><tr class="question" id="idm2919"><td style="text-align: left; vertical-align: top; " id="idm2920"><p><strong>5.3.3.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>按面积计算，该省最大的直辖市是哪个？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>此查询使用空间测量作为排序值。 有多种方法可以解决此问题，但最有效的方法如下：</p><pre class="programlisting">SELECT
  name,
  ST_Area(geom)/10000 AS hectares
FROM bc_municipality
ORDER BY hectares DESC
LIMIT 1;

name           | hectares
---------------+-----------------
TUMBLER RIDGE  | 155020.02556131
</pre><p>请注意，为了回答这个查询，我们必须计算每个多边形的面积。 如果我们经常这样做，那么向表中添加一个区域列是有意义的，可以为性能建立索引。 通过按降序对结果进行排序，并使用 PostgreSQL“LIMIT”命令，我们可以轻松地仅选择最大值，而无需使用 MAX() 等聚合函数。</p></td></tr><tr class="question" id="idm2926"><td style="text-align: left; vertical-align: top; " id="idm2927"><p><strong>5.3.4.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>每个城市包含的道路总长度是多少？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>这是“空间联接”的示例，它使用空间交互（“包含”）作为联接条件（而不是在公共键上联接的通常关系方法）将来自两个表（带有联接）的数据汇集在一起 :</p><pre class="programlisting">SELECT
  m.name,
  sum(ST_Length(r.geom))/1000 as roads_km
FROM bc_roads AS r
JOIN bc_municipality AS m
  ON ST_Contains(m.geom, r.geom)
GROUP BY m.name
ORDER BY roads_km;

name                        | roads_km
----------------------------+------------------
SURREY                      | 1539.47553551242
VANCOUVER                   | 1450.33093486576
LANGLEY DISTRICT            | 833.793392535662
BURNABY                     | 773.769091404338
PRINCE GEORGE               | 694.37554369147
...</pre><p>此查询需要一段时间，因为表中的每条道路都会汇总到最终结果中（示例表中大约有 250K 条道路）。 对于较小的数据集（数百条记录中的数千条），响应可能非常快。</p></td></tr><tr class="question" id="idm2933"><td style="text-align: left; vertical-align: top; " id="idm2934"><p><strong>5.3.5.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>创建一个包含乔治王子市内所有道路的新表。</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><p>这是“覆盖”的一个示例。 也就是说，我们取两个表并输出一个由空间切割结果组成的新表。 与上面显示的“空间连接”不同，此查询实际上会生成新的几何图形。 生成的叠加就像涡轮增压的空间耦合，对于更精确的分析工作非常有用：</p><pre class="programlisting">CREATE TABLE pg_roads as
SELECT
  ST_Intersection(r.geom, m.geom) AS intersection_geom,
  ST_Length(r.geom) AS rd_orig_length,
  r.*
FROM bc_roads AS r
JOIN bc_municipality AS m
  ON ST_Intersects(r.geom, m.geom)
WHERE
  m.name = 'PRINCE GEORGE';
</pre></td></tr><tr class="question" id="idm2939"><td style="text-align: left; vertical-align: top; " id="idm2940"><p><strong>5.3.6.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>维多利亚州的“道格拉斯街”有多长（公里）？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><pre class="programlisting">SELECT
  sum(ST_Length(r.geom))/1000 AS kilometers
FROM bc_roads r
JOIN bc_municipality m
  ON ST_Intersects(m.geom, r.geom
WHERE
  r.name = 'Douglas St'
  AND m.name = 'VICTORIA';

kilometers
------------------
4.89151904172838
</pre></td></tr><tr class="question" id="idm2944"><td style="text-align: left; vertical-align: top; " id="idm2945"><p><strong>5.3.7.</strong></p></td><td style="text-align: left; vertical-align: top; "><p>哪个市政面的孔洞最大？</p></td></tr><tr class="answer"><td style="text-align: left; vertical-align: top; "/><td style="text-align: left; vertical-align: top; "><pre class="programlisting">
SELECT gid, name, ST_Area(geom) AS area
FROM bc_municipality
WHERE ST_NRings(geom) 
&gt; 1
ORDER BY area DESC LIMIT 1;

gid  | name         | area
-----+--------------+------------------
12   | SPALLUMCHEEN | 257374619.430216

</pre></td></tr></tbody></table></div></section></section><section class="chapter" id="performance_tips"><div class="titlepage"><div><div><h1 class="title">Chapter 6. 性能优化技巧</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#small_tables_large_objects">6.1. 大几何形状的小表</a></span></li><li><span class="section"><a href="#database_clustering">6.2. 几何索引聚类</a></span></li><li><span class="section"><a href="#avoiding_dimension_conversion">6.3. 避免维度变换</a></span></li></ul></div><section class="section" id="small_tables_large_objects"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.1. 大几何形状的小表</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm2953">6.1.1. 问题描述</a></span></li><li><span class="section"><a href="#idm2963">6.1.2. 解决办法</a></span></li></ul></div><section class="section" id="idm2953"><div class="titlepage"><div><div><h3 class="title">6.1.1. 问题描述</h3></div></div></div><p>当前版本的PostgreSQL（包括9.6）在TOAST表后面的查询优化器中存在弱点。TOAST 表是一种“扩展室”，用于存储不适合普通数据页面（例如长文本、图像或具有许多顶点的复杂几何图形）的巨大值（就数据大小而言）。 有关更多信息，请参阅 <a class="link" href="http://www.postgresql.org/docs/current/static/storage-toast.html" target="_top">Toast的PostgreSQL文档</a>。</p><p>如果您碰巧有一个具有相当大的几何形状的表格，但它们的行数不是太多（例如包含所有欧洲国家的高分辨率边界的表格），则会出现问题。 那么表本身很小，但是它使用了大量的TOAST空间。 在我们的示例中，表本身约有 80 行，仅使用 3 个数据页，但 TOAST 表使用 8225 个页面。</p><p>现在，让我们使用几何运算符&amp;&amp;来查询很少匹配的边界框。对于查询优化器，该表似乎只有 3 页和 80 行。 优化程序估计按顺序遍历小表比使用索引更快。然后我们决定忽略 GiST 索引。 通常，这种做法是正确的。 但是，在这种情况下，&amp;&amp;运算符必须从磁盘调用所有几何图形并将其与边界框进行比较，因此还必须调用所有TOAST页面。</p><p>要查看您是否遇到此问题，请使用“EXPLAIN ANALYZE”postgresql 命令。 有关更多信息和技术细节，您可以阅读 PostgreSQL 性能邮件列表上的线程：<a class="link" href="http://archives.postgresql.org/pgsql-performance/2005-02/msg00030.php" target="_top">http://archives.postgresql.org/pgsql-performance/2005-02/msg00030.php</a></p><p>另请参阅 PostGIS 中的新线程 <a class="link" href="https://lists.osgeo.org/pipermail/postgis-devel/2017-June/026209.html" target="_top">https://lists.osgeo.org/pipermail/postgis-devel/2017-June/026209.html</a></p></section><section class="section" id="idm2963"><div class="titlepage"><div><div><h3 class="title">6.1.2. 解决办法</h3></div></div></div><p>PostgreSQL社区正试图通过制作 TOAST 感知查询引用来解决这个问题。目前，有两种解决办法：</p><p>第一个解决方法是强制查询规划器使用索引。发送“SET enable_seqscan TO off;” 在发出查询之前发送到服务器。这基本上迫使查询规划器尽可能避免顺序扫描。所以它像往常一样使用 GIST 索引。 但是必须在每个连接上设置此标志，并且它会导致查询规划器在其他情况下做出错误估计，因此您应该在查询后“SET enable_seqscan TO on;” 。</p><p>第二个解决方法是使顺序扫描与查询规划器认为的一样快。这可以通过创建一个“缓存”bbox的附加列并与之匹配来实现。在我们的示例中，命令如下：</p><pre class="programlisting">SELECT AddGeometryColumn('myschema','mytable','bbox','4326','GEOMETRY','2');
UPDATE mytable SET bbox = ST_Envelope(ST_Force2D(geom));</pre><p>现在更改查询以对bbox使用&amp;&amp;运算符 而不是geom_column，例如：</p><pre class="programlisting">
SELECT geom_column
FROM mytable
WHERE bbox &amp;&amp; ST_SetSRID('BOX3D(0 0,1 1)'::box3d,4326);
</pre><p>当然，如果您更改或添加行到mytable，则必须保持 bbox“同步”。最透明的方法是使用触发器，但您也可以修改应用程序以保持 bbox 列最新或在每次修改后运行上面的 UPDATE 查询。</p></section></section><section class="section" id="database_clustering"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.2. 几何索引聚类</h2></div></div></div><p>对于大多数只读的表，以及大多数查询使用单个索引的情况，PostgreSQL 提供了 CLUSTER 命令。该命令按照与索引标准相同的顺序对所有数据行进行物理重新排序，从而产生两个性能优势：首先，对于索引范围扫描，数据表上的查找次数大大减少。其次，如果您的工作集集中在索引上的一些小间隔，则您的缓存会更有效，因为数据行分布在更少的数据页上。（此时请阅读 PostgreSQL 手册中的 CLUSTER 命令文档。）</p><p>但是，由于 GiST 索引只是忽略 NULL 值，因此当前无法在 PostGIS 中对 GiST 索引进行聚类，并且您会收到以下错误消息：</p><pre class="programlisting">lwgeom=# CLUSTER my_geom_index ON my_table;
ERROR: cannot cluster when index access method does not handle null values
HINT: You may be able to work around this by marking column "geom" NOT NULL.</pre><p>正如提示消息所说，向表添加“非空”限制将暂时解决此缺陷。 例如：</p><pre class="programlisting">lwgeom=# ALTER TABLE my_table ALTER COLUMN geom SET not null;
ALTER TABLE</pre><p>当然，如果您实际上需要几何列中的 NULL 值，则这将不起作用。 此外，您必须使用上述方法添加约束，使用 CHECK 约束，例如“ALTER TABLE blubb ADD CHECK (geometry is not null);” 不管用。</p></section><section class="section" id="avoiding_dimension_conversion"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.3. 避免维度变换</h2></div></div></div><p>有时，您的表中碰巧有3D 或 4D 数据，但始终使用仅输出 2D 几何图形的符合OpenGIS 的 ST_AsText() 或 ST_AsBinary() 函数来访问它。他们通过内部调用 ST_Force2D() 函数来实现这一点，这会给大型几何图形带来巨大的开销。 为了避免这种开销，一次性预先删除这些额外的维度可能是可行的：</p><pre class="programlisting">UPDATE mytable SET geom = ST_Force2D(geom);
VACUUM FULL ANALYZE mytable;</pre><p>请注意，如果您使用 AddGeometryColumn() 添加几何列，则几何维度将会受到限制。要绕过它，您需要删除约束。请记住更新geometry_columns 表中的条目并随后重新创建约束。</p><p>对于大型表，明智的做法是通过 WHERE 子句和主键或其他可行标准将 UPDATE 限制为表的一部分，然后运行简单的“VACUUM;”，从而将此 UPDATE 划分为更小的部分。 在您的更新之间。 这大大减少了对临时磁盘空间的需求。此外，如果您有混合维度几何图形，则通过“WHEREdimension(geom)&gt;2”限制 UPDATE 会跳过对已经处于 2D 中的几何图形的重写。</p></section></section><section class="chapter" id="reference"><div class="titlepage"><div><div><h1 class="title">Chapter 7. PostGIS 参考手册</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#PostGIS_Types">7.1. PostGIS Geometry/Geography/Box 数据类型</a></span></li><li><span class="section"><a href="#Management_Functions">7.2. 表管理功能</a></span></li><li><span class="section"><a href="#Geometry_Constructors">7.3. 几何构造函数</a></span></li><li><span class="section"><a href="#Geometry_Accessors">7.4. 几何访问器</a></span></li><li><span class="section"><a href="#Geometry_Editors">7.5. 几何编辑器</a></span></li><li><span class="section"><a href="#Geometry_Validation">7.6. 几何有效性验证</a></span></li><li><span class="section"><a href="#SRS_Functions">7.7. 空间参考系统功能</a></span></li><li><span class="section"><a href="#Geometry_Inputs">7.8. 几何输入</a></span></li><li><span class="section"><a href="#Geometry_Outputs">7.9. 几何输出</a></span></li><li><span class="section"><a href="#Operators">7.10. 运算符</a></span></li><li><span class="section"><a href="#Spatial_Relationships">7.11. 空间关系</a></span></li><li><span class="section"><a href="#Measurement_Functions">7.12. 测量函数</a></span></li><li><span class="section"><a href="#Overlay_Functions">7.13. 叠加函数</a></span></li><li><span class="section"><a href="#Geometry_Processing">7.14. 几何处理</a></span></li><li><span class="section"><a href="#Coverage">7.15. 覆盖范围</a></span></li><li><span class="section"><a href="#Affine_Transformation">7.16. 仿射变换</a></span></li><li><span class="section"><a href="#Clustering_Functions">7.17. 聚类函数</a></span></li><li><span class="section"><a href="#BBox_Functions">7.18. 边界框函数</a></span></li><li><span class="section"><a href="#Linear_Referencing">7.19. 线性参考</a></span></li><li><span class="section"><a href="#Temporal">7.20. 轨迹函数</a></span></li><li><span class="section"><a href="#Version_Functions">7.21. 版本函数</a></span></li><li><span class="section"><a href="#PostGIS_GUC">7.22. 大一统自定义变量 (GUCs)</a></span></li><li><span class="section"><a href="#Troubleshooting_Functions">7.23. 故障排除函数</a></span></li></ul></div><p>下面给出的功能是 PostGIS 用户可能需要的功能。 还有一些其他功能是 PostGIS 对象所需的支持功能，但一般用户用不到。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostGIS 已经开始从现有的命名约定过渡到以 SQL-MM 为中心的约定。 因此，您所了解和喜爱的大多数函数都已使用标准空间类型 (ST) 前缀进行了重命名。 以前的功能仍然可用，但本文档中未列出更新后的功能等效的功能。 本文档中未列出的非 ST_ 函数已被弃用，并将在未来版本中删除，因此请停止使用它们。</p></td></tr></table></div><section class="section" id="PostGIS_Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.1. PostGIS Geometry/Geography/Box 数据类型</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了 PostGIS 安装的用于表示空间数据的自定义 PostgreSQL 数据类型。 </p><p>每种数据类型都描述其类型转换行为。<a class="link" href="https://www.postgresql.org/docs/current/sql-expressions.html#SQL-SYNTAX-TYPE-CASTS" target="_top">类型转换</a>将一种数据类型的值转换为另一种类型。 PostgreSQL 允许定义自定义类型的转换行为，以及用于转换类型值的函数。强制转换可以具有<span class="bold"><strong>自动</strong></span> 行为，允许将函数参数自动转换为函数支持的类型。</p><p>某些转换具有 <span class="bold"><strong>显式</strong></span>行为，这意味着必须使用语法<code class="varname">CAST(myval As sometype)</code> 或 <code class="varname">myval::sometype</code> 指定转换。 显式转换避免了不明确的转换问题，这种情况在使用不支持给定类型的重载函数时可能会发生。 例如，函数可以接受 box2d 或 box3d，但不能接受几何图形。由于几何体会自动转换为两种盒子类型，因此这会产生“模糊函数”错误。 为了防止错误，请使用显式转换为所需的框类型。</p><p>所有数据类型都可以转换为<code class="varname">text</code>，因此，无需显示指定它。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#box2d_type">box2d</a></span><span class="refpurpose"> — 表示二维边界框的类型。 </span></li><li><span class="refentrytitle"><a href="#box3d_type">box3d</a></span><span class="refpurpose"> — 表示三维边界框的类型。 </span></li><li><span class="refentrytitle"><a href="#geometry">geometry</a></span><span class="refpurpose"> — 表示具有平面坐标系的空间要素的类型。</span></li><li><span class="refentrytitle"><a href="#geometry_dump">geometry_dump</a></span><span class="refpurpose"> — 用于描述复杂几何形状部分的复合类型。</span></li><li><span class="refentrytitle"><a href="#geography">geography</a></span><span class="refpurpose"> — 使用大地（椭球）坐标系表示空间特征的类型。</span></li></ul></div><div class="refentry" id="box2d_type"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>box2d — 表示二维边界框的类型。 </p></div><div class="refsection" id="idm3009"><h2>描述</h2><p><code class="varname">box2d</code>是一种空间数据类型，用于表示包围几何图形或几何图形集合的二维边界框。例如， <a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a> 聚合函数返回一个<code class="varname">box2d</code>对象。</p><p>该表示包含值<code class="varname">xmin, ymin, xmax, ymax</code>。 这些是 X 和 Y 范围的最小值和最大值。 </p><p><code class="varname">box2d</code>对象具有类似于<code class="code">BOX(1 2,5 6)</code>的文本表示形式。 </p></div><div class="refsection" id="idm3020"><h2>类型强制转换</h2><p>下表列出了此数据类型允许的自动和显式强制转换：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">转换到</td><td style="border-bottom: 1px solid ; ">行为</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">box3d</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; ">geometry</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" id="idm3035"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_BoxFunctions" title="13.7. PostGIS 边界框函数">Section 13.7, “PostGIS 边界框函数”</a></p></div></div><div class="refentry" id="box3d_type"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>box3d — 表示三维边界框的类型。 </p></div><div class="refsection" id="idm3043"><h2>描述</h2><p><code class="varname">box3d</code>是一种 PostGIS 空间数据类型，用于表示包围几何图形或几何图形集合的三维边界框。例如，<a class="xref" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> 聚合函数返回一个<code class="varname">box3d</code>对象。 </p><p>该表示包含值<code class="varname">xmin, ymin, zmin, xmax, ymax, zmax</code>。 这些是 X、Y 和 Z 范围的最小值和最大值。 </p><p><code class="varname">box3d</code>的文本表示如<code class="code">BOX3D(1 2 3,5 6 5)</code>所示。 </p></div><div class="refsection" id="idm3054"><h2>类型强制转换</h2><p>下表列出了此数据类型允许的自动和显式强制转换：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">转换到</td><td style="border-bottom: 1px solid ; ">行为</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">box</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">box2d</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; ">geometry</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" id="idm3072"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_BoxFunctions" title="13.7. PostGIS 边界框函数">Section 13.7, “PostGIS 边界框函数”</a></p></div></div><div class="refentry" id="geometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>geometry — 表示具有平面坐标系的空间要素的类型。</p></div><div class="refsection" id="idm3080"><h2>描述</h2><p><code class="varname">geometry</code>是一种基本的 PostGIS 空间数据类型，用于表示平面（欧几里得）坐标系上的要素。</p><p>对几何体的所有空间操作都使用几何体所在的空间参考系的单位。</p></div><div class="refsection" id="idm3085"><h2>类型强制转换</h2><p>下表列出了此数据类型允许的自动和显式强制转换：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">转换到</td><td style="border-bottom: 1px solid ; ">行为</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">box</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">box2d</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">box3d</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">bytea</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">geography</td><td style="border-bottom: 1px solid ; ">automatic</td></tr><tr><td style="border-right: 1px solid ; ">text</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" id="idm3112"><h2>相关信息</h2><p><a class="xref" href="#RefObject" title="4.1. 空间数据模型">Section 4.1, “空间数据模型”</a>, <a class="xref" href="#PostGIS_SQLMM_Functions" title="13.3. PostGIS SQL-MM 兼容函数">Section 13.3, “PostGIS SQL-MM 兼容函数”</a></p></div></div><div class="refentry" id="geometry_dump"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>geometry_dump — 用于描述复杂几何形状部分的复合类型。</p></div><div class="refsection" id="idm3121"><h2>描述</h2><p><code class="varname">geometry_dump</code>是一种<a class="link" href="https://www.postgresql.org/docs/current/rowtypes.html" target="_top">复合数据类型</a>，包含以下字段：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">geom</code> - 表示转储几何图形组件的几何图形。 几何类型取决于原始函数。</p></li><li class="listitem"><p><code class="varname">path[]</code> - 一个整数数组，用于定义转储几何图形中到 <code class="varname">geom </code>组件的导航路径。路径数组从 1 开始（即<code class="varname">path[1]</code> 是第一个元素。）</p></li></ul></div><p><code class="varname">ST_Dump*</code>系列函数使用它作为输出类型，将复杂的几何图形分解为其组成部分。</p></div><div class="refsection" id="idm3137"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="13.6. PostGIS 几何/地理/栅格导出函数">Section 13.6, “PostGIS 几何/地理/栅格导出函数”</a> </p></div></div><div class="refentry" id="geography"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>geography — 使用大地（椭球）坐标系表示空间特征的类型。</p></div><div class="refsection" id="idm3145"><h2>描述</h2><p><code class="varname">geography</code>是一种空间数据类型，用于表示大地坐标系中的要素。 大地坐标系使用椭球体对地球进行建模。 </p><p>通过考虑椭球体模型，对地理类型的空间操作可提供更准确的结果。 </p></div><div class="refsection" id="idm3150"><h2>类型强制转换</h2><p>下表列出了此数据类型允许的自动和显式强制转换：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">转换到</td><td style="border-bottom: 1px solid ; ">行为</td></tr><tr><td style="border-right: 1px solid ; ">geometry</td><td>显式强制转换</td></tr></tbody></table></div></div><div class="refsection" id="idm3162"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Geography" title="4.3. 地理数据类型">Section 4.3, “地理数据类型”</a>, <a class="xref" href="#PostGIS_GeographyFunctions" title="13.4. PostGIS 地理支持函数">Section 13.4, “PostGIS 地理支持函数”</a></p></div></div></section><section class="section" id="Management_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.2. 表管理功能</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数有助于定义包含几何列的表。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#AddGeometryColumn">AddGeometryColumn</a></span><span class="refpurpose"> — 将geometry（几何）列添加到现有表。</span></li><li><span class="refentrytitle"><a href="#DropGeometryColumn">DropGeometryColumn</a></span><span class="refpurpose"> — 从空间表中移除geometry（几何）列。</span></li><li><span class="refentrytitle"><a href="#DropGeometryTable">DropGeometryTable</a></span><span class="refpurpose"> — 删除表及其在geometry_columns中的所有引用。</span></li><li><span class="refentrytitle"><a href="#Find_SRID">Find_SRID</a></span><span class="refpurpose"> — 返回geometry（几何）列中定义的 SRID。</span></li><li><span class="refentrytitle"><a href="#Populate_Geometry_Columns">Populate_Geometry_Columns</a></span><span class="refpurpose"> — 确保几何列由类型修饰符定义或具有适当的空间约束。</span></li><li><span class="refentrytitle"><a href="#UpdateGeometrySRID">UpdateGeometrySRID</a></span><span class="refpurpose"> — 更新几何列中所有要素的 SRID 以及表元数据。 </span></li></ul></div><div class="refentry" id="AddGeometryColumn"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddGeometryColumn — 将geometry（几何）列添加到现有表。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">AddGeometryColumn</strong>(</code>varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, integer  <var class="pdparam">srid</var>, varchar  <var class="pdparam">type</var>, integer  <var class="pdparam">dimension</var>, boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AddGeometryColumn</strong>(</code>varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, integer  <var class="pdparam">srid</var>, varchar  <var class="pdparam">type</var>, integer  <var class="pdparam">dimension</var>, boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AddGeometryColumn</strong>(</code>varchar  <var class="pdparam">catalog_name</var>, varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, integer  <var class="pdparam">srid</var>, varchar  <var class="pdparam">type</var>, integer  <var class="pdparam">dimension</var>, boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm3250"><h2>描述</h2><p>将几何列添加到现有属性表。<code class="varname">schema_name</code>是表模式的名称。<code class="varname">srid</code> 必须是对 SPATIAL_REF_SYS 表中条目的整数值引用。 <code class="varname">类型</code> 必须是与几何类型相对应的字符串，例如 'POLYGON' 或 'MULTILINESTRING' 。如果 schemaname 不存在（或在当前 search_path 中不可见）或指定的 SRID、几何类型或维度无效，则会引发错误。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 此函数不再更新geometry_columns，因为geometry_columns 是从系统目录读取的视图。默认情况下，它也不创建约束，而是使用 PostgreSQL 内置的类型修饰符行为。 因此，例如，使用此函数构建wgs84 POINT 列现在相当于： <code class="code">ALTER TABLE some_table ADD COLUMN geom geometry(Point,4326);</code> </p><p class="changed">更改：2.0.0 如果您需要约束的旧行为，请使用默认的<code class="varname">use_typmod</code>，但将其设置为 false。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 视图不能再在 Geometry_columns 中手动注册，但是根据几何 Typmod 表几何图形构建并在没有包装器函数的情况下使用的视图将正确注册自身，因为它们继承了父表列的 Typmod 行为。 使用输出其他几何图形的几何函数的视图需要转换为typmod 几何图形，以便这些视图几何列能够在geometry_columns 中正确注册。请参阅<a class="xref" href="#Manual_Register_Spatial_Column" title="4.6.3. 手动注册几何列">Section 4.6.3, “手动注册几何列”</a>。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p class="enhanced">增强：2.0.0 引入了 use_typmod 参数。 默认创建typmod几何列而不是基于约束。</p></div><div class="refsection" id="idm3278"><h2>示例</h2><pre class="programlisting">-- Create schema to hold data
CREATE SCHEMA my_schema;
-- Create a new simple PostgreSQL table
CREATE TABLE my_schema.my_spatial_table (id serial);

-- Describing the table shows a simple table with a single "id" column.
postgis=# \d my_schema.my_spatial_table
                                                         Table "my_schema.my_spatial_table"
 Column |  Type   |                                Modifiers
--------+---------+-------------------------------------------------------------------------
 id     | integer | not null default nextval('my_schema.my_spatial_table_id_seq'::regclass)

-- Add a spatial column to the table
SELECT AddGeometryColumn ('my_schema','my_spatial_table','geom',4326,'POINT',2);

-- Add a point using the old constraint based behavior
SELECT AddGeometryColumn ('my_schema','my_spatial_table','geom_c',4326,'POINT',2, false);

--Add a curvepolygon using old constraint behavior
SELECT AddGeometryColumn ('my_schema','my_spatial_table','geomcp_c',4326,'CURVEPOLYGON',2, false);

-- Describe the table again reveals the addition of a new geometry columns.
\d my_schema.my_spatial_table
                            addgeometrycolumn
-------------------------------------------------------------------------
 my_schema.my_spatial_table.geomcp_c SRID:4326 TYPE:CURVEPOLYGON DIMS:2
(1 row)

                                    Table "my_schema.my_spatial_table"
  Column  |         Type         |                                Modifiers
----------+----------------------+-------------------------------------------------------------------------
 id       | integer              | not null default nextval('my_schema.my_spatial_table_id_seq'::regclass)
 geom     | geometry(Point,4326) |
 geom_c   | geometry             |
 geomcp_c | geometry             |
Check constraints:
    "enforce_dims_geom_c" CHECK (st_ndims(geom_c) = 2)
    "enforce_dims_geomcp_c" CHECK (st_ndims(geomcp_c) = 2)
    "enforce_geotype_geom_c" CHECK (geometrytype(geom_c) = 'POINT'::text OR geom_c IS NULL)
    "enforce_geotype_geomcp_c" CHECK (geometrytype(geomcp_c) = 'CURVEPOLYGON'::text OR geomcp_c IS NULL)
    "enforce_srid_geom_c" CHECK (st_srid(geom_c) = 4326)
    "enforce_srid_geomcp_c" CHECK (st_srid(geomcp_c) = 4326)

-- geometry_columns view also registers the new columns --
SELECT f_geometry_column As col_name, type, srid, coord_dimension As ndims
    FROM geometry_columns
    WHERE f_table_name = 'my_spatial_table' AND f_table_schema = 'my_schema';

 col_name |     type     | srid | ndims
----------+--------------+------+-------
 geom     | Point        | 4326 |     2
 geom_c   | Point        | 4326 |     2
 geomcp_c | CurvePolygon | 4326 |     2
</pre></div><div class="refsection" id="idm3281"><h2>相关信息</h2><p><a class="xref" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a>, <a class="xref" href="#DropGeometryTable" title="DropGeometryTable">DropGeometryTable</a>, <a class="xref" href="#geometry_columns" title="4.6.2. GEOMETRY_COLUMNS 视图">Section 4.6.2, “GEOMETRY_COLUMNS 视图”</a>, <a class="xref" href="#Manual_Register_Spatial_Column" title="4.6.3. 手动注册几何列">Section 4.6.3, “手动注册几何列”</a></p></div></div><div class="refentry" id="DropGeometryColumn"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>DropGeometryColumn — 从空间表中移除geometry（几何）列。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">DropGeometryColumn</strong>(</code>varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">DropGeometryColumn</strong>(</code>varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">DropGeometryColumn</strong>(</code>varchar  <var class="pdparam">catalog_name</var>, varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm3330"><h2>描述</h2><p>从空间表中删除几何列。请注意，schema_name 需要与 Geometry_columns 表中的表行的 f_table_schema 字段相匹配。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 提供此函数是为了向后兼容。现在，由于 Geometry_columns 现在是针对系统目录的视图，因此您可以使用<code class="code">ALTER TABLE</code> 删除几何列，就像删除任何其他表列一样</p></td></tr></table></div></div><div class="refsection" id="idm3349"><h2>示例</h2><pre class="programlisting">SELECT DropGeometryColumn ('my_schema','my_spatial_table','geom');
                        ----RESULT output ---
                                          dropgeometrycolumn
------------------------------------------------------
 my_schema.my_spatial_table.geom effectively removed.

-- In PostGIS 2.0+ the above is also equivalent to the standard
-- the standard alter table.  Both will deregister from geometry_columns
ALTER TABLE my_schema.my_spatial_table DROP column geom;
                </pre></div><div class="refsection" id="idm3352"><h2>相关信息</h2><p><a class="xref" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a>, <a class="xref" href="#DropGeometryTable" title="DropGeometryTable">DropGeometryTable</a>, <a class="xref" href="#geometry_columns" title="4.6.2. GEOMETRY_COLUMNS 视图">Section 4.6.2, “GEOMETRY_COLUMNS 视图”</a></p></div></div><div class="refentry" id="DropGeometryTable"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>DropGeometryTable — 删除表及其在geometry_columns中的所有引用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">DropGeometryTable</strong>(</code>varchar  <var class="pdparam">table_name</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">DropGeometryTable</strong>(</code>varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">DropGeometryTable</strong>(</code>varchar  <var class="pdparam">catalog_name</var>, varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm3391"><h2>描述</h2><p>删除表及其在geometry_columns中的所有引用。 注意：如果未提供模式，则在模式感知的 pgsql 安装上使用 current_schema() 。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 提供此函数是为了向后兼容。现在，由于 Geometry_columns 现在是针对系统目录的视图，因此您可以使用<code class="code">DROP TABLE</code>删除具有几何列的表，就像任何其他表一样</p></td></tr></table></div></div><div class="refsection" id="idm3397"><h2>示例</h2><pre class="programlisting">SELECT DropGeometryTable ('my_schema','my_spatial_table');
----RESULT output ---
my_schema.my_spatial_table dropped.

-- The above is now equivalent to --
DROP TABLE my_schema.my_spatial_table;
                </pre></div><div class="refsection" id="idm3400"><h2>相关信息</h2><p><a class="xref" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a>, <a class="xref" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a>, <a class="xref" href="#geometry_columns" title="4.6.2. GEOMETRY_COLUMNS 视图">Section 4.6.2, “GEOMETRY_COLUMNS 视图”</a></p></div></div><div class="refentry" id="Find_SRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Find_SRID — 返回geometry（几何）列中定义的 SRID。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">Find_SRID</strong>(</code>varchar  <var class="pdparam">a_schema_name</var>, varchar  <var class="pdparam">a_table_name</var>, varchar  <var class="pdparam">a_geomfield_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm3424"><h2>描述</h2><p>通过搜索 GEOMETRY_COLUMNS 表返回指定几何列的整数 SRID。如果几何列尚未正确添加（例如使用<a class="xref" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> 函数），则此函数将不起作用。</p></div><div class="refsection" id="idm3428"><h2>示例</h2><pre class="programlisting">SELECT Find_SRID('public', 'tiger_us_state_2007', 'geom_4269');
find_srid
----------
4269
</pre></div><div class="refsection" id="idm3431"><h2>相关信息</h2><p><a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="Populate_Geometry_Columns"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Populate_Geometry_Columns — 确保几何列由类型修饰符定义或具有适当的空间约束。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Populate_Geometry_Columns</strong>(</code>boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p><p><code class="funcdef">int <strong class="fsfunc">Populate_Geometry_Columns</strong>(</code>oid <var class="pdparam">relation_oid</var>, boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm3456"><h2>描述</h2><p>确保几何列具有适当的类型修饰符或空间约束，以确保它们在<code class="varname">geometry_columns</code>视图中正确注册。默认情况下，会将所有没有类型修饰符的几何列转换为具有类型修饰符的几何列。 </p><p>为了向后兼容和空间需求（例如表继承，其中每个子表可能具有不同的几何类型），仍然支持旧的检查约束行为。如果您需要旧的行为，则需要将新的可选参数作为 false<code class="varname">use_typmod=false</code> 传递。完成此操作后，将创建不带类型修饰符的几何列，但将定义 3 个约束。 特别是，这意味着属于表的每个几何列至少具有三个约束：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">enforce_dims_geom</code> - 确保每个几何图形具有相同的维度（请参阅<a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a>）</p></li><li class="listitem"><p><code class="varname">enforce_geotype_geom</code> - 确保每个几何具有相同的类型（请参阅<a class="xref" href="#GeometryType" title="GeometryType">GeometryType</a>）</p></li><li class="listitem"><p><code class="varname">enforce_srid_geom</code>- 确保所有几何图形位于同一投影中（请参阅<a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>）</p></li></ul></div><p>如果提供了表 <code class="varname">oid</code>，则此函数会尝试确定表中所有几何列的 srid、维度和几何类型，并根据需要添加约束。 如果成功，则会将适当的行插入到 Geometry_columns 表中，否则，将捕获异常并引发错误通知来描述问题。</p><p>如果提供了视图的<code class="varname">oid</code>，与表 oid 一样，此函数会尝试确定视图中所有几何图形的 srid、维度和类型，将适当的条目插入到 <code class="varname">geometry_columns</code> 表中，但不会执行任何操作来强制执行约束 。</p><p>无参数格式是参数格式的简单包装器，它首先删除并重新填充数据库中每个空间表和视图的 Geometry_columns 表，并在适当的情况下向表中添加空间约束。 它返回在数据库中检测到的几何列数以及插入到 <code class="varname">geometry_columns</code> 表中的列数的摘要。 参数格式仅返回插入到<code class="varname">geometry_columns</code>表中的行数。</p><p class="availability">可用性：1.4.0</p><p class="changed">更改：2.0.0 默认情况下，现在使用类型修饰符而不是检查约束来约束几何类型。您仍然可以通过使用新的 <code class="varname">use_typmod</code>并将其设置为 false 来使用检查约束行为。</p><p class="enhanced">增强：2.0.0 引入了<code class="varname">use_typmod</code>可选参数，允许控制是否使用typmodifiers或检查约束创建列。</p></div><div class="refsection" id="idm3488"><h2>示例</h2><pre class="programlisting">CREATE TABLE public.myspatial_table(gid serial, geom geometry);
INSERT INTO myspatial_table(geom) VALUES(ST_GeomFromText('LINESTRING(1 2, 3 4)',4326) );
-- This will now use typ modifiers.  For this to work, there must exist data
SELECT Populate_Geometry_Columns('public.myspatial_table'::regclass);

populate_geometry_columns
--------------------------
                        1


\d myspatial_table

                                   Table "public.myspatial_table"
 Column |           Type            |                           Modifiers
--------+---------------------------+---------------------------------------------------------------
 gid    | integer                   | not null default nextval('myspatial_table_gid_seq'::regclass)
 geom   | geometry(LineString,4326) |
</pre><pre class="programlisting">-- This will change the geometry columns to use constraints if they are not typmod or have constraints already.
--For this to work, there must exist data
CREATE TABLE public.myspatial_table_cs(gid serial, geom geometry);
INSERT INTO myspatial_table_cs(geom) VALUES(ST_GeomFromText('LINESTRING(1 2, 3 4)',4326) );
SELECT Populate_Geometry_Columns('public.myspatial_table_cs'::regclass, false);
populate_geometry_columns
--------------------------
                        1
\d myspatial_table_cs

                          Table "public.myspatial_table_cs"
 Column |   Type   |                            Modifiers
--------+----------+------------------------------------------------------------------
 gid    | integer  | not null default nextval('myspatial_table_cs_gid_seq'::regclass)
 geom   | geometry |
Check constraints:
    "enforce_dims_geom" CHECK (st_ndims(geom) = 2)
    "enforce_geotype_geom" CHECK (geometrytype(geom) = 'LINESTRING'::text OR geom IS NULL)
    "enforce_srid_geom" CHECK (st_srid(geom) = 4326)</pre></div></div><div class="refentry" id="UpdateGeometrySRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>UpdateGeometrySRID — 更新几何列中所有要素的 SRID 以及表元数据。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">UpdateGeometrySRID</strong>(</code>varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">UpdateGeometrySRID</strong>(</code>varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">UpdateGeometrySRID</strong>(</code>varchar  <var class="pdparam">catalog_name</var>, varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm3543"><h2>描述</h2><p>更新几何列中所有要素的SRID，更新 Geometry_columns 中的约束和参考。 如果该列是由类型定义强制执行的，则类型定义将会更改。 注意：如果未提供模式，则在模式感知的 pgsql 安装上使用 current_schema() 。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm3554"><h2>示例</h2><p>将几何图形插入道路表，其中 SRID 集已使用 <a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">EWKT 格式</a> ：</p><pre class="programlisting">COPY roads (geom) FROM STDIN;
SRID=4326;LINESTRING(0 0, 10 10)
SRID=4326;LINESTRING(10 10, 15 0)
\.
                </pre><p>这会将路表更改为 4326，无论它以前是什么 SRID：</p><pre class="programlisting">SELECT UpdateGeometrySRID('roads','geom',4326);</pre><p>前面的示例相当于以下 DDL 语句：</p><pre class="programlisting">ALTER TABLE roads
  ALTER COLUMN geom TYPE geometry(MULTILINESTRING, 4326)
    USING ST_SetSRID(geom,4326);</pre><p>如果您在加载时投影错误（或将其引入为未知），并且您想一次性转换为 Web 墨卡托，您可以使用 DDL 来完成此操作，但没有等效的 PostGIS 管理功能可以一次性完成此操作。</p><pre class="programlisting">ALTER TABLE roads
 ALTER COLUMN geom TYPE geometry(MULTILINESTRING, 3857) USING ST_Transform(ST_SetSRID(geom,4326),3857) ;</pre></div><div class="refsection" id="idm3565"><h2>相关信息</h2><p><a class="xref" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> </p></div></div></section><section class="section" id="Geometry_Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.3. 几何构造函数</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_Collect">ST_Collect</a></span><span class="refpurpose"> — 从一组几何图形创建 GeometryCollection 或 Multi* 几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_LineFromMultiPoint">ST_LineFromMultiPoint</a></span><span class="refpurpose"> — 从多点几何创建线串。</span></li><li><span class="refentrytitle"><a href="#ST_MakeEnvelope">ST_MakeEnvelope</a></span><span class="refpurpose"> — 根据最小和最大坐标创建矩形多边形。</span></li><li><span class="refentrytitle"><a href="#ST_MakeLine">ST_MakeLine</a></span><span class="refpurpose"> — 从Point, MultiPoint,或LineString geometries创建LineString。</span></li><li><span class="refentrytitle"><a href="#ST_MakePoint">ST_MakePoint</a></span><span class="refpurpose"> — 创建 2D、3DZ 或 4D 点。</span></li><li><span class="refentrytitle"><a href="#ST_MakePointM">ST_MakePointM</a></span><span class="refpurpose"> — 根据 X、Y 和 M 值创建一个点。</span></li><li><span class="refentrytitle"><a href="#ST_MakePolygon">ST_MakePolygon</a></span><span class="refpurpose"> — 从壳和可选的孔列表创建多边形。</span></li><li><span class="refentrytitle"><a href="#ST_Point">ST_Point</a></span><span class="refpurpose"> — 创建具有 X、Y 和 SRID 值的点。</span></li><li><span class="refentrytitle"><a href="#ST_PointZ">ST_PointZ</a></span><span class="refpurpose"> — 创建具有 X、Y、Z 和 SRID 值的点。</span></li><li><span class="refentrytitle"><a href="#ST_PointM">ST_PointM</a></span><span class="refpurpose"> — 创建具有 X、Y、M 和 SRID 值的点。</span></li><li><span class="refentrytitle"><a href="#ST_PointZM">ST_PointZM</a></span><span class="refpurpose"> — 创建具有 X、Y、Z、M 和 SRID 值的点。</span></li><li><span class="refentrytitle"><a href="#ST_Polygon">ST_Polygon</a></span><span class="refpurpose"> — 从具有指定 SRID 的线串创建多边形。</span></li><li><span class="refentrytitle"><a href="#ST_TileEnvelope">ST_TileEnvelope</a></span><span class="refpurpose"> — 使用 XYZ 切片系统在 Web Mercator （SRID：3857） 中创建矩形多边形。</span></li><li><span class="refentrytitle"><a href="#ST_HexagonGrid">ST_HexagonGrid</a></span><span class="refpurpose"> — 返回一组完全覆盖几何参数边界的六边形和单元格索引。</span></li><li><span class="refentrytitle"><a href="#ST_Hexagon">ST_Hexagon</a></span><span class="refpurpose"> — 使用提供的边尺寸和六边形网格空间内的单元坐标返回单个六边形。</span></li><li><span class="refentrytitle"><a href="#ST_SquareGrid">ST_SquareGrid</a></span><span class="refpurpose"> — 返回一组完全覆盖几何参数边界的网格正方形和单元格索引。</span></li><li><span class="refentrytitle"><a href="#ST_Square">ST_Square</a></span><span class="refpurpose"> — 使用提供的边缘大小和正方形网格空间内的单元格坐标返回单个正方形。</span></li><li><span class="refentrytitle"><a href="#ST_Letters">ST_Letters</a></span><span class="refpurpose"> — 返回渲染为几何图形的输入字母，默认起始位置位于原点，默认文本高度为 100。</span></li></ul></div><div class="refentry" id="ST_Collect"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Collect — 从一组几何图形创建 GeometryCollection 或 Multi* 几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Collect</strong>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Collect</strong>(</code>geometry[] <var class="pdparam">g1_array</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Collect</strong>(</code>geometry set <var class="pdparam">g1field</var><code>)</code>;</p></div></div><div class="refsection" id="idm3601"><h2>描述</h2><p>将几何图形收集到几何图形集合中。 结果是 Multi* 或 GeometryCollection，具体取决于输入几何图形是否具有相同或不同类型（同质或异构）。输入几何图形在集合中保持不变。 </p><p><span class="bold"><strong>第一种形式:</strong></span>接受两个输入几何图形</p><p><span class="bold"><strong>第二种形式:</strong></span> 接受几何数组</p><p><span class="bold"><strong>第三种形式:</strong></span> 接受几何行集的聚合函数。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果任何输入几何图形是集合（Multi* 或 GeometryCollection），ST_Collect 返回 GeometryCollection（因为这是唯一可以包含嵌套集合的类型）。 为了防止这种情况，请在子查询中使用<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 将输入集合扩展到其原子元素（请参见下面的示例）。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Collect 和<a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> 看起来很相似，但实际上操作方式却截然不同。ST_Collect 将几何图形聚合到一个集合中，而不以任何方式更改它们。 ST_Union 在几何上合并重叠的几何图形，并在交叉点分割线串。当它合并边界时，它可能会返回单个几何图形。 </p></td></tr></table></div><p class="availability">可用性：引入了 1.4.0 - ST_Collect（几何）。 ST_Collect已得到增强，可以更快地处理更多几何图形。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm3625"><h2>示例-双输入格式</h2><p>合并2D点。</p><pre class="programlisting">SELECT ST_AsText( ST_Collect( ST_GeomFromText('POINT(1 2)'),
        ST_GeomFromText('POINT(-2 3)') ));

st_astext
----------
MULTIPOINT((1 2),(-2 3))
</pre><p>合并3D点。</p><pre class="programlisting">SELECT ST_AsEWKT( ST_Collect( ST_GeomFromEWKT('POINT(1 2 3)'),
                ST_GeomFromEWKT('POINT(1 2 4)') ) );

                st_asewkt
-------------------------
 MULTIPOINT(1 2 3,1 2 4)
 </pre><p>合并曲线。</p><pre class="programlisting">SELECT ST_AsText( ST_Collect( 'CIRCULARSTRING(220268 150415,220227 150505,220227 150406)',
                'CIRCULARSTRING(220227 150406,2220227 150407,220227 150406)'));

                st_astext
------------------------------------------------------------------------------------
MULTICURVE(CIRCULARSTRING(220268 150415,220227 150505,220227 150406),
 CIRCULARSTRING(220227 150406,2220227 150407,220227 150406))
</pre></div><div class="refsection" id="idm3633"><h2>示例-数组作为参数</h2><p>使用子查询的数组构造函数。</p><pre class="programlisting">SELECT ST_Collect( ARRAY( SELECT geom FROM sometable ) );
</pre><p>使用数组构造函数来获取值。</p><pre class="programlisting">SELECT ST_AsText(  ST_Collect(
                ARRAY[ ST_GeomFromText('LINESTRING(1 2, 3 4)'),
                        ST_GeomFromText('LINESTRING(3 4, 4 5)') ] )) As wktcollect;

--wkt collect --
MULTILINESTRING((1 2,3 4),(3 4,4 5))
</pre></div><div class="refsection" id="idm3639"><h2>示例-聚合函数格式</h2><p>通过在表中对几何进行分组来生成多个集合。</p><pre class="programlisting">SELECT stusps, ST_Collect(f.geom) as geom
         FROM (SELECT stusps, (ST_Dump(geom)).geom As geom
                                FROM
                                somestatetable ) As f
        GROUP BY stusps
</pre></div><div class="refsection" id="idm3643"><h2>相关信息</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" id="ST_LineFromMultiPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineFromMultiPoint — 从多点几何创建线串。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineFromMultiPoint</strong>(</code>geometry  <var class="pdparam">aMultiPoint</var><code>)</code>;</p></div></div><div class="refsection" id="idm3660"><h2>描述</h2><p>从多点几何图形生成线串。</p><p>使用<a class="xref" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> 从 Point 或 LineString 输入创建线。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm3669"><h2>示例</h2><p>从 3D 多点创建 3D 线串</p><pre class="programlisting">SELECT ST_AsEWKT(  ST_LineFromMultiPoint('MULTIPOINT(1 2 3, 4 5 6, 7 8 9)')  ));

--result--
LINESTRING(1 2 3,4 5 6,7 8 9)
</pre></div><div class="refsection" id="idm3673"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a></p></div></div><div class="refentry" id="ST_MakeEnvelope"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeEnvelope — 根据最小和最大坐标创建矩形多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeEnvelope</strong>(</code>float <var class="pdparam">xmin</var>, float <var class="pdparam">ymin</var>, float <var class="pdparam">xmax</var>, float <var class="pdparam">ymax</var>, integer <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" id="idm3702"><h2>描述</h2><p>根据最小值和最大值 X 和 Y 生成矩形多边形。 输入值必须与 SRID 指定的空间参考系统匹配。如果未指定 SRID，则使用未知空间参考系统 （SRID 0）。</p><p class="availability">可用性：1.5</p><p class="enhanced">增强：2.0：引入了在不指定 SRID 的情况下指定外包矩形的功能。</p></div><div class="refsection" id="idm3707"><h2>示例：生成边界框多边形</h2><pre class="programlisting">SELECT ST_AsText( ST_MakeEnvelope(10, 10, 11, 11, 4326) );

st_asewkt
-----------
POLYGON((10 10, 10 11, 11 11, 11 10, 10 10))
</pre></div><div class="refsection" id="idm3710"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a>, <a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a></p></div></div><div class="refentry" id="ST_MakeLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeLine — 从Point, MultiPoint,或LineString geometries创建LineString。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeLine</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeLine</strong>(</code>geometry[] <var class="pdparam">geoms_array</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeLine</strong>(</code>geometry set <var class="pdparam">geoms</var><code>)</code>;</p></div></div><div class="refsection" id="idm3744"><h2>描述</h2><p>创建包含 Point、MultiPoint 或 LineString 几何图形的点的 LineString。 其他几何类型会导致错误。 </p><p><span class="bold"><strong>第一种形式:</strong></span>接受两个输入几何图形</p><p><span class="bold"><strong>第二种形式:</strong></span> 接受几何数组</p><p><span class="bold"><strong>第三种形式：</strong></span>接受几何行集的聚合函数。为了确保输入几何的顺序，请在函数调用中使用<code class="varname">ORDER BY</code>，或使用带有<code class="varname">ORDER BY</code>子句的子查询。</p><p>输入 LineString 开头的重复节点将折叠为单个点。 Point 和 MultiPoint 输入中的重复点不会折叠。 <a class="xref" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>可用于折叠输出 LineString 中的重复点。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p class="availability">可用性：2.3.0 - 引入了对MultiPoint输入元素的支持</p><p class="availability">可用性：2.0.0 - 引入了对 LineString 输入元素的支持</p><p class="availability">可用性：1.4.0 - 引入了 ST_MakeLine(geomarray)。 ST_MakeLine 聚合函数得到增强，可以更快地处理更多点。</p></div><div class="refsection" id="idm3764"><h2>示例：双输入格式</h2><p>生成一条由两个点组成的线。</p><pre class="programlisting">SELECT ST_AsText( ST_MakeLine(ST_Point(1,2), ST_Point(3,4)) );

          st_astext
---------------------
 LINESTRING(1 2,3 4)
</pre><p>从两个三维点生成三维线。</p><pre class="programlisting">SELECT ST_AsEWKT( ST_MakeLine(ST_MakePoint(1,2,3), ST_MakePoint(3,4,5) ));

                st_asewkt
-------------------------
 LINESTRING(1 2 3,3 4 5)
</pre><p>从两个未连接的线串生成一条线。</p><pre class="programlisting">select ST_AsText( ST_MakeLine( 'LINESTRING(0 0, 1 1)', 'LINESTRING(2 2, 3 3)' ) );

          st_astext
-----------------------------
 LINESTRING(0 0,1 1,2 2,3 3)
</pre></div><div class="refsection" id="idm3772"><h2>示例：将数组作为参数格式</h2><p>从由带排序的子查询形成的数组创建一条线。</p><pre class="programlisting">SELECT ST_MakeLine( ARRAY( SELECT ST_Centroid(geom) FROM visit_locations ORDER BY visit_time) );
</pre><p>从三维点数组生成三维线</p><pre class="programlisting">SELECT ST_AsEWKT( ST_MakeLine(
          ARRAY[ ST_MakePoint(1,2,3), ST_MakePoint(3,4,5), ST_MakePoint(6,6,6) ]  ));

                st_asewkt
-------------------------
LINESTRING(1 2 3,3 4 5,6 6 6)
</pre></div><div class="refsection" id="idm3778"><h2>示例：聚合函数格式</h2><p>此示例从一组轨迹中查询基于时间的 GPS 点序列，并为每个轨迹创建一条记录。 结果几何图形是由按行进顺序的 GPS 轨迹点组成的 LineStrings。</p><p><code class="varname">ORDER BY</code>子句可用于以正确的顺序生成线串。</p><pre class="programlisting">SELECT gps.track_id, ST_MakeLine(gps.geom ORDER BY gps_time) As geom
        FROM gps_points As gps
        GROUP BY track_id;</pre><p>在PostgreSQL 9之前，可以使用子查询中的排序。但是，查询计划可能不遵循子查询的顺序。</p><pre class="programlisting">SELECT gps.track_id, ST_MakeLine(gps.geom) As geom
        FROM ( SELECT track_id, gps_time, geom
                        FROM gps_points ORDER BY track_id, gps_time ) As gps
        GROUP BY track_id;</pre></div><div class="refsection" id="idm3786"><h2>相关信息</h2><p><a class="xref" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a> </p></div></div><div class="refentry" id="ST_MakePoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakePoint — 创建 2D、3DZ 或 4D 点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakePoint</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakePoint</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakePoint</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var>, float <var class="pdparam">m</var><code>)</code>;</p></div></div><div class="refsection" id="idm3839"><h2>描述</h2><p>创建一个2D XY、3D XYZ 或 4D XYZM 的点几何对象。使用 <a class="xref" href="#ST_MakePointM" title="ST_MakePointM">ST_MakePointM</a> 来创建带有 XYM 坐标的点。</p><p>使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 来为创建的点指定一个空间参考标识码（SRID）。</p><p>虽然不符合 OGC 标准，但<code class="varname">ST_MakePoint</code> 比<a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> 和 <a class="xref" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a>更快、更精确。 它也更容易用于数字坐标值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于大地坐标，<code class="varname">X</code>是经度， <code class="varname">Y</code>是纬度</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>可以使用函数 <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>、<a class="xref" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a>、<a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a> 和 <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a> 来创建具有指定 SRID 的点。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm3863"><h2>示例</h2><pre class="programlisting">-- Create a point with unknown SRID
SELECT ST_MakePoint(-71.1043443253471, 42.3150676015829);

-- Create a point in the WGS 84 geodetic CRS
SELECT ST_SetSRID(ST_MakePoint(-71.1043443253471, 42.3150676015829),4326);

-- Create a 3D point (e.g. has altitude)
SELECT ST_MakePoint(1, 2,1.5);

-- Get z of point
SELECT ST_Z(ST_MakePoint(1, 2,1.5));
result
-------
1.5</pre></div><div class="refsection" id="idm3866"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_MakePointM" title="ST_MakePointM">ST_MakePointM</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a>, <a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a>, <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a> </p></div></div><div class="refentry" id="ST_MakePointM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakePointM — 根据 X、Y 和 M 值创建一个点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakePointM</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">m</var><code>)</code>;</p></div></div><div class="refsection" id="idm3895"><h2>描述</h2><p>创建一个具有X、Y和M（测量值）坐标的点。使用 <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a> 来创建具有XY、XYZ或XYZM坐标的点。</p><p>使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 来为创建的点指定一个空间参考标识码（SRID）。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于大地坐标，<code class="varname">X</code>是经度， <code class="varname">Y</code>是纬度</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>函数 <a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a> 和 <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a> 可用于创建具有 M 值和指定 SRID 的点。 </p></td></tr></table></div></div><div class="refsection" id="idm3909"><h2>示例</h2><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> ST_AsEWKT用于字符串输出。这是因为<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>与 M 值不对应。</p></td></tr></table></div><p>生成具有未知 SRID 的点。</p><pre class="programlisting">SELECT ST_AsEWKT(  ST_MakePointM(-71.1043443253471, 42.3150676015829, 10)  );

                                   st_asewkt
-----------------------------------------------
 POINTM(-71.1043443253471 42.3150676015829 10)
</pre><p>在 WGS 84 地理坐标系中生成具有 M 值的点。</p><pre class="programlisting">SELECT ST_AsEWKT( ST_SetSRID(  ST_MakePointM(-71.104, 42.315, 10),  4326));

                                                st_asewkt
---------------------------------------------------------
SRID=4326;POINTM(-71.104 42.315 10)
</pre><p>获取生成点的 M 值。</p><pre class="programlisting">SELECT ST_M(  ST_MakePointM(-71.104, 42.315, 10)  );

result
-------
10
</pre></div><div class="refsection" id="idm3921"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a>, <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a></p></div></div><div class="refentry" id="ST_MakePolygon"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakePolygon — 从壳和可选的孔列表创建多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakePolygon</strong>(</code>geometry <var class="pdparam">linestring</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakePolygon</strong>(</code>geometry <var class="pdparam">outerlinestring</var>, geometry[] <var class="pdparam">interiorlinestrings</var><code>)</code>;</p></div></div><div class="refsection" id="idm3950"><h2>描述</h2><p>创建由给定壳和可选孔阵列形成的多边形。 输入几何图形必须是闭合的线串（环）。</p><p><span class="bold"><strong>形式1:</strong></span>接受单个外壳线串。</p><p><span class="bold"><strong>形式2:</strong></span> 接受外壳 LineString 和内部（孔）LineString 数组。可以使用 PostgreSQL array_agg()、ARRAY[] 或 ARRAY() 结构来构造几何数组。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不接受多行字符串。 使用 <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>生成线串。它还使用<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 来提取线串。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm3965"><h2>示例：单一输入格式</h2><p>从 2D 线串生成多边形。</p><pre class="programlisting">SELECT ST_MakePolygon( ST_GeomFromText('LINESTRING(75 29,77 29,77 29, 75 29)'));
</pre><p>使用 <a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> 和 <a class="xref" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>闭合开放线串以生成面。</p><pre class="programlisting">SELECT ST_MakePolygon( ST_AddPoint(foo.open_line, ST_StartPoint(foo.open_line)) )
FROM (
  SELECT ST_GeomFromText('LINESTRING(75 29,77 29,77 29, 75 29)') As open_line) As foo;
</pre><p>从 3D 线串生成多边形</p><pre class="programlisting">SELECT ST_AsEWKT( ST_MakePolygon( 'LINESTRING(75.15 29.53 1,77 29 1,77.6 29.5 1, 75.15 29.53 1)'));

st_asewkt
-----------
POLYGON((75.15 29.53 1,77 29 1,77.6 29.5 1,75.15 29.53 1))
</pre><p>从具有 M 值的线串生成多边形</p><pre class="programlisting">SELECT ST_AsEWKT( ST_MakePolygon( 'LINESTRINGM(75.15 29.53 1,77 29 1,77.6 29.5 2, 75.15 29.53 2)' ));

st_asewkt
----------
POLYGONM((75.15 29.53 1,77 29 1,77.6 29.5 2,75.15 29.53 2))
</pre></div><div class="refsection" id="idm3977"><h2>示例：带内孔的外壳格式</h2><p>创建一个带有额外孔的环形多边形</p><pre class="programlisting">SELECT ST_MakePolygon( ST_ExteriorRing( ST_Buffer(ring.line,10)),
        ARRAY[  ST_Translate(ring.line, 1, 1),
                ST_ExteriorRing(ST_Buffer(ST_Point(20,20),1)) ]
        )
FROM (SELECT ST_ExteriorRing(
        ST_Buffer(ST_Point(10,10),10,10)) AS line ) AS ring;
</pre><p>创建一组省份边界，其中的孔代表湖泊。输入是省份多边形/多边形表和水域线串表。 形成湖泊的线是通过使用<a class="xref" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>确定的。 使用<a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> 提取省份线条。 根据<code class="code">ST_MakePolygon</code> 的要求，通过使用 <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>将边界强制为单个 LineString。 （但是，请注意，如果一个省份拥有多个区域或拥有岛屿，这将生成无效的多边形。）使用 LEFT JOIN 可确保包括所有省份，即使它们没有湖泊。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用 CASE 构造是因为将空数组传递到 ST_MakePolygon 会导致 NULL 返回值。</p></td></tr></table></div><pre class="programlisting">SELECT p.gid, p.province_name,
        CASE WHEN array_agg(w.geom) IS NULL
        THEN p.geom
        ELSE  ST_MakePolygon( ST_LineMerge(ST_Boundary(p.geom)),
                        array_agg(w.geom)) END
FROM
        provinces p LEFT JOIN waterlines w
                ON (ST_Within(w.geom, p.geom) AND ST_IsClosed(w.geom))
GROUP BY p.gid, p.province_name, p.geom;
</pre><p>另一种技术是利用相关子查询和 ARRAY() 构造函数将行集转换为数组。</p><pre class="programlisting">SELECT p.gid,  p.province_name,
    CASE WHEN EXISTS( SELECT w.geom
        FROM waterlines w
        WHERE ST_Within(w.geom, p.geom)
        AND ST_IsClosed(w.geom))
    THEN ST_MakePolygon(
        ST_LineMerge(ST_Boundary(p.geom)),
        ARRAY( SELECT w.geom
            FROM waterlines w
            WHERE ST_Within(w.geom, p.geom)
            AND ST_IsClosed(w.geom)))
    ELSE p.geom
    END AS geom
FROM provinces p;
</pre></div><div class="refsection" id="idm3991"><h2>相关信息</h2><p>
				<a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>
				<a class="xref" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a>
			</p></div></div><div class="refentry" id="ST_Point"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Point — 创建具有 X、Y 和 SRID 值的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Point</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Point</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, integer <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" id="idm4024"><h2>描述</h2><p>返回具有给定 X和Y 坐标值的 Point。 这是 <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a> 的 SQL-MM 等效项，仅采用 X 和 Y。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于大地坐标，<code class="varname">X</code>是经度， <code class="varname">Y</code>是纬度</p></td></tr></table></div><p class="enhanced">增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 6.1.2</p></div><div class="refsection" id="idm4037"><h2>示例：几何</h2><pre class="programlisting">SELECT ST_Point( -71.104, 42.315);</pre><p>创建一个指定了SRID的点：</p><pre class="programlisting">SELECT ST_Point( -71.104, 42.315, 4326);</pre><p>指定 SRID 的另一种方式：</p><pre class="programlisting">SELECT ST_SetSRID( ST_Point( -71.104, 42.315), 4326);</pre></div><div class="refsection" id="idm4044"><h2>示例：地理</h2><p>创建 <a class="link" href="#PostGIS_Geography" title="4.3. 地理数据类型">地理</a> 点（使用 <code class="varname">::</code> 转换语法）：</p><pre class="programlisting">SELECT ST_Point( -71.104, 42.315, 4326)::geography;</pre><p>在Pre-PostGIS 3.2版本的代码中，使用 <code class="varname">CAST</code>：</p><pre class="programlisting">SELECT CAST( ST_SetSRID(ST_Point( -71.104, 42.315), 4326) AS geography);</pre><p>如果点的坐标不在地理坐标系（如 WGS84）中，则必须先执行坐标变换，然后再将其投射到地理。在此示例中，宾夕法尼亚州平面英尺 （SRID 2273） 上的点将转换为 WGS84 （SRID 4326）。</p><pre class="programlisting">SELECT ST_Transform( ST_Point( 3637510, 3014852, 2273), 4326)::geography;</pre></div><div class="refsection" id="idm4055"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a>, <a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a>, <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_PointZ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointZ — 创建具有 X、Y、Z 和 SRID 值的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointZ</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var>, integer <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" id="idm4085"><h2>描述</h2><p>生成具有给定 X、Y 和 Z 坐标值的点，如果给定，则还具有 SRID 值。</p><p class="enhanced">增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。</p></div><div class="refsection" id="idm4089"><h2>示例</h2><pre class="programlisting">SELECT ST_PointZ(-71.104, 42.315, 3.4, 4326)</pre><pre class="programlisting">SELECT ST_PointZ(-71.104, 42.315, 3.4, srid =&gt; 4326)</pre><pre class="programlisting">SELECT ST_PointZ(-71.104, 42.315, 3.4)</pre></div><div class="refsection" id="idm4094"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a>, <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a></p></div></div><div class="refentry" id="ST_PointM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointM — 创建具有 X、Y、M 和 SRID 值的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointM</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">m</var>, integer <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" id="idm4122"><h2>描述</h2><p>生成一个点，该点给定了 X、Y 和 M 坐标值，如果给定，则还具有 SRID 值。</p><p class="enhanced">增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。</p></div><div class="refsection" id="idm4126"><h2>示例</h2><pre class="programlisting">SELECT ST_PointM(-71.104, 42.315, 3.4, 4326)</pre><pre class="programlisting">SELECT ST_PointM(-71.104, 42.315, 3.4, srid =&gt; 4326)</pre><pre class="programlisting">SELECT ST_PointM(-71.104, 42.315, 3.4)</pre></div><div class="refsection" id="idm4131"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a>, <a class="xref" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a></p></div></div><div class="refentry" id="ST_PointZM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointZM — 创建具有 X、Y、Z、M 和 SRID 值的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointZM</strong>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var>, float <var class="pdparam">m</var>, integer <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" id="idm4162"><h2>描述</h2><p>生成一个点，该点给定了 X，Y，Z，M 坐标值，如果给定，则还具有 SRID 值。</p><p class="enhanced">增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。</p></div><div class="refsection" id="idm4166"><h2>示例</h2><pre class="programlisting">SELECT ST_PointZM(-71.104, 42.315, 3.4, 4.5, 4326)</pre><pre class="programlisting">SELECT ST_PointZM(-71.104, 42.315, 3.4, 4.5, srid =&gt; 4326)</pre><pre class="programlisting">SELECT ST_PointZM(-71.104, 42.315, 3.4, 4.5)</pre></div><div class="refsection" id="idm4171"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_PointM" title="ST_PointM">ST_PointM</a>, <a class="xref" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a></p></div></div><div class="refentry" id="ST_Polygon"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Polygon — 从具有指定 SRID 的线串创建多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Polygon</strong>(</code>geometry  <var class="pdparam">lineString</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm4194"><h2>描述</h2><p>返回根据给定 LineString 构建的多边形，并根据<code class="varname">srid</code>设置空间参考系统。</p><p>ST_Polygon类似于<a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a> 格式 1，但添加了 SRID 设置。</p><p>要创建带孔的多边形，请使用 <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a> 格式 2，然后使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不接受多行字符串。 使用 <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>生成线串。它还使用<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 来提取线串。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.3.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm4220"><h2>示例</h2><p>生成二维多边形。</p><pre class="programlisting">SELECT ST_AsText( ST_Polygon('LINESTRING(75 29, 77 29, 77 29, 75 29)'::geometry, 4326) );

-- result --
POLYGON((75 29, 77 29, 77 29, 75 29))
</pre><p>生成三维多边形。</p><pre class="programlisting">SELECT ST_AsEWKT( ST_Polygon( ST_GeomFromEWKT('LINESTRING(75 29 1, 77 29 2, 77 29 3, 75 29 1)'), 4326) );

-- result --
SRID=4326;POLYGON((75 29 1, 77 29 2, 77 29 3, 75 29 1))
</pre></div><div class="refsection" id="idm4226"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a></p></div></div><div class="refentry" id="ST_TileEnvelope"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_TileEnvelope — 使用 <a class="link" href="https://en.wikipedia.org/wiki/Tiled_web_map" target="_top">XYZ 切片系统</a>在 <a class="link" href="https://en.wikipedia.org/wiki/Web_Mercator_projection" target="_top">Web Mercator</a> （SRID：3857） 中创建矩形多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_TileEnvelope</strong>(</code>integer <var class="pdparam">tileZoom</var>, integer <var class="pdparam">tileX</var>, integer <var class="pdparam">tileY</var>, geometry <var class="pdparam">bounds=SRID=3857;LINESTRING(-20037508.342789 -20037508.342789,20037508.342789 20037508.342789)</var>, float <var class="pdparam">margin=0.0</var><code>)</code>;</p></div></div><div class="refsection" id="idm4261"><h2>描述</h2><p>创建一个矩形多边形，给出 <a class="link" href="https://en.wikipedia.org/wiki/Tiled_web_map" target="_top">XYZ切片系统</a>中切片的范围。该图块由缩放级别 Z 和该级别的网格中图块的 XY 索引指定。 可用于定义 <a class="xref" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a>所需的图块边界，以将几何图形转换为 MVT 图块坐标空间。 </p><p>默认情况下，切片范围位于<a class="link" href="https://en.wikipedia.org/wiki/Web_Mercator_projection" target="_top">Web Mercator</a>坐标系 (SRID:3857) 中，使用 Web 墨卡托系统的标准范围（-20037508.342789、20037508.342789）。这是 MVT 图块最常用的坐标系。 可选的<code class="varname">bounds</code>参数可用于在任何坐标系中生成图块。 它是一个几何体，具有 SRID 和“缩放级别零”正方形的范围，XYZ 图块系统内切在该正方形内。</p><p>可选的<code class="varname">margin</code>参数可用于将图块扩展给定的百分比。 例如。<code class="varname">margin=0.125</code>将图块扩展 12.5%，相当于当图块范围大小为 4096 时 buffer=512（如 <a class="xref" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a>中使用的）。这对于创建图块缓冲区以包含位于图块可见区域之外的数据非常有用，但其存在会影响图块渲染。例如，城市名称（一个点）可能靠近图块的边缘，因此其标签应该呈现在两个图块上，即使该点仅位于一个图块的可见区域中。在查询中使用扩展图块将在两个图块中包含城市点。 使用负值来缩小图块。 禁止使用小于 -0.5 的值，因为这会完全消除图块。与<code class="varname">ST_AsMVTGeom</code> 一起使用时，请勿指定边距。 请参阅 <a class="xref" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a>。</p><p class="enhanced">增强：添加了3.1.0 margin 参数。</p><p class="availability">可用性：3.0.0</p></div><div class="refsection" id="idm4277"><h2>示例：构建格网外接矩形</h2><pre class="programlisting">SELECT ST_AsText( ST_TileEnvelope(2, 1, 1) );

 st_astext
------------------------------
 POLYGON((-10018754.1713945 0,-10018754.1713945 10018754.1713945,0 10018754.1713945,0 0,-10018754.1713945 0))

SELECT ST_AsText( ST_TileEnvelope(3, 1, 1, ST_MakeEnvelope(-180, -90, 180, 90, 4326) ) );

                      st_astext
------------------------------------------------------
 POLYGON((-135 45,-135 67.5,-90 67.5,-90 45,-135 45))
</pre></div><div class="refsection" id="idm4280"><h2>相关信息</h2><p><a class="xref" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a></p></div></div><div class="refentry" id="ST_HexagonGrid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HexagonGrid — 返回一组完全覆盖几何参数边界的六边形和单元格索引。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_HexagonGrid</strong>(</code>float8 <var class="pdparam">size</var>, geometry <var class="pdparam">bounds</var><code>)</code>;</p></div></div><div class="refsection" id="idm4299"><h2>描述</h2><p>从平面六边形格网的概念开始。（不是地球仪的六边形格网，这不是<a class="link" href="https://github.com/uber/h3" target="_top">H3</a>格网方案。）对于给定的平面 SRS 和给定的边缘大小，从 SRS 的原点开始，有一种独特的平面六边形格网，Tiling(SRS, Size)。此函数回答了以下问题：给定 Tiling(SRS, Size) 中的哪些六边形与给定边界重叠。</p><p><span class="inlinemediaobject"><img src="images/st_hexagongrid01.png"/></span></p><p>输出六边形的 SRS 是边界几何体提供的 SRS。</p><p>将六边形的边缘尺寸加倍或三倍会生成与原始格网相匹配的新父格网。不幸的是，不可能生成子格网完全适合内部的父六边形格网。</p><p><span class="inlinemediaobject"><img src="images/st_hexagongrid02.png"/></span></p><p class="availability">可用性：3.1.0</p></div><div class="refsection" id="idm4314"><h2>示例：计算六边形中的点</h2><p>要针对六边形格网进行点聚合，请使用点的范围作为边界生成六边形网格，然后在空间上连接到该网格。</p><pre class="programlisting">SELECT COUNT(*), hexes.geom
FROM
    ST_HexagonGrid(
        10000,
        ST_SetSRID(ST_EstimatedExtent('pointtable', 'geom'), 3857)
    ) AS hexes
    INNER JOIN
    pointtable AS pts
    ON ST_Intersects(pts.geom, hexes.geom)
GROUP BY hexes.geom;</pre></div><div class="refsection" id="idm4318"><h2>示例：为面生成六边形覆盖范围</h2><p>如果我们为每个多边形边界生成一组六边形并过滤掉那些不与其六边形相交的六边形，我们最终会得到每个多边形的格网。</p><p><span class="inlinemediaobject"><img src="images/st_hexagongrid03.png"/></span></p><p>州切片提供每个州的六边形的覆盖范围，多个六边形与州边界重叠。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>当引用 FROM 列表中的先前表时，LATERAL关键字隐含在返回集合的函数中。因此，CROSS JOIN LATERAL、CROSS JOIN 或简单的 CROSS JOIN LATERAL 是本示例的等效构造。</p></td></tr></table></div><pre class="programlisting">SELECT admin1.gid, hex.geom
FROM
    admin1
    CROSS JOIN
    ST_HexagonGrid(100000, admin1.geom) AS hex
WHERE
    adm0_a3 = 'USA'
    AND
    ST_Intersects(admin1.geom, hex.geom)</pre></div><div class="refsection" id="idm4329"><h2>相关信息</h2><p><a class="xref" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SquareGrid" title="ST_SquareGrid">ST_SquareGrid</a>, <a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a></p></div></div><div class="refentry" id="ST_Hexagon"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Hexagon — 使用提供的边尺寸和六边形网格空间内的单元坐标返回单个六边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Hexagon</strong>(</code>float8 <var class="pdparam">size</var>, integer <var class="pdparam">cell_i</var>, integer <var class="pdparam">cell_j</var>, geometry <var class="pdparam">origin</var><code>)</code>;</p></div></div><div class="refsection" id="idm4357"><h2>描述</h2><p>使用与 <a class="xref" href="#ST_HexagonGrid" title="ST_HexagonGrid">ST_HexagonGrid</a>相同的六边形格网概念，但在所需的单元格坐标处仅生成一个六边形。（可选）可以调整格网的原点坐标，默认原点为 0,0。 </p><p>生成的六边形没有设置 SRID，因此请使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 将 SRID 设置为您期望的值。</p><p class="availability">可用性：3.1.0</p></div><div class="refsection" id="idm4364"><h2>示例：在原点生成六边形</h2><pre class="programlisting">SELECT ST_AsText(ST_SetSRID(ST_Hexagon(1.0, 0, 0), 3857));

POLYGON((-1 0,-0.5
         -0.866025403784439,0.5
         -0.866025403784439,1
         0,0.5
         0.866025403784439,-0.5
         0.866025403784439,-1 0)) </pre></div><div class="refsection" id="idm4367"><h2>相关信息</h2><p><a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a>, <a class="xref" href="#ST_HexagonGrid" title="ST_HexagonGrid">ST_HexagonGrid</a>, <a class="xref" href="#ST_Square" title="ST_Square">ST_Square</a></p></div></div><div class="refentry" id="ST_SquareGrid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SquareGrid — 返回一组完全覆盖几何参数边界的网格正方形和单元格索引。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_SquareGrid</strong>(</code>float8 <var class="pdparam">size</var>, geometry <var class="pdparam">bounds</var><code>)</code>;</p></div></div><div class="refsection" id="idm4388"><h2>描述</h2><p>从平面正方形格网的概念开始。对于给定的平面 SRS 和给定的边缘尺寸，从 SRS 的原点开始，存在一个独特的平面方形格网，Tiling(SRS, Size)。此函数回答了以下问题：给定 Tiling(SRS, Size) 中的哪些网格与给定边界重叠。</p><p>输出正方形的 SRS 是边界几何的 SRS。</p><p>正方形的加倍或边缘大小会生成与原始格网完美契合的新父格网。墨卡托中的标准网络地图格网只是墨卡托平面中的两个平方网格的幂。</p><p class="availability">可用性：3.1.0</p></div><div class="refsection" id="idm4394"><h2>示例：为一个国家生成 1 度格网</h2><p>网格将填充国家/地区的整个边界，因此如果您只想接触国家/地区的方块，则必须随后使用 ST_Intersects 进行过滤。</p><pre class="programlisting">WITH grid AS (
SELECT (ST_SquareGrid(1, ST_Transform(geom,4326))).*
FROM admin0 WHERE name = 'Canada'
)
  SELEcT ST_AsText(geom)
  FROM grid</pre></div><div class="refsection" id="idm4398"><h2>示例：计算正方形中的点数（使用单个细粒度网格）</h2><p>要针对方形格网进行点聚合，请使用点的范围作为边界生成方形网格，然后在空间上连接到该网格。请注意，估计范围可能与实际范围有所不同，因此请务必谨慎，至少确保您已分析了表。</p><pre class="programlisting">SELECT COUNT(*), squares.geom
    FROM
    pointtable AS pts
    INNER JOIN
    ST_SquareGrid(
        1000,
        ST_SetSRID(ST_EstimatedExtent('pointtable', 'geom'), 3857)
    ) AS squares
    ON ST_Intersects(pts.geom, squares.geom)
    GROUP BY squares.geom</pre></div><div class="refsection" id="idm4402"><h2>示例：使用每个点的网格集对正方形中的点进行计数</h2><p>这会产生与第一个示例相同的结果，但对于大量点来说会变慢</p><pre class="programlisting">SELECT COUNT(*), squares.geom
    FROM
    pointtable AS pts
    INNER JOIN
    ST_SquareGrid(
        1000,
       pts.geom
    ) AS squares
    ON ST_Intersects(pts.geom, squares.geom)
    GROUP BY squares.geom</pre></div><div class="refsection" id="idm4406"><h2>相关信息</h2><p><a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a>, <a class="xref" href="#ST_HexagonGrid" title="ST_HexagonGrid">ST_HexagonGrid</a> , <a class="xref" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> , <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a></p></div></div><div class="refentry" id="ST_Square"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Square — 使用提供的边缘大小和正方形网格空间内的单元格坐标返回单个正方形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Square</strong>(</code>float8 <var class="pdparam">size</var>, integer <var class="pdparam">cell_i</var>, integer <var class="pdparam">cell_j</var>, geometry <var class="pdparam">origin</var><code>)</code>;</p></div></div><div class="refsection" id="idm4434"><h2>描述</h2><p>使用与<a class="xref" href="#ST_SquareGrid" title="ST_SquareGrid">ST_SquareGrid</a>相同的正方形格网概念，但仅在所需的单元格坐标处生成一个正方形。（可选）可以调整平铺的原点坐标，默认原点为 0,0。 </p><p>生成的方块没有设置 SRID，因此请使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 将 SRID 设置为您期望的值。</p><p class="availability">可用性：3.1.0</p></div><div class="refsection" id="idm4441"><h2>示例：在原点生成矩形</h2><pre class="programlisting">SELECT ST_AsText(ST_SetSRID(ST_Square(1.0, 0, 0), 3857));

 POLYGON((0 0,0 1,1 1,1 0,0 0))</pre></div><div class="refsection" id="idm4444"><h2>相关信息</h2><p><a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a>, <a class="xref" href="#ST_SquareGrid" title="ST_SquareGrid">ST_SquareGrid</a>, <a class="xref" href="#ST_Hexagon" title="ST_Hexagon">ST_Hexagon</a></p></div></div><div class="refentry" id="ST_Letters"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Letters — 返回渲染为几何图形的输入字母，默认起始位置位于原点，默认文本高度为 100。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Letters</strong>(</code>text <var class="pdparam"> letters</var>, json <var class="pdparam"> font</var><code>)</code>;</p></div></div><div class="refsection" id="idm4465"><h2>描述</h2><p>使用内置字体将字符串渲染为多边形几何体。默认文本高度为 100.0，即从下行字母底部到大写字母顶部的距离。默认起始位置将基线的起点置于原点。 覆盖字体涉及传入一个 json 映射，以字符为键，并以 base64 编码的 TWKB 作为字体形状，字体从下行底部到大写顶部的高度为 1000 个单位。 </p><p>默认情况下，文本是在原点生成的，因此要重新定位文本并调整文本大小，请首先应用 <code class="code">ST_Scale</code> 函数，然后应用<code class="code">ST_Translate</code>函数。</p><p class="availability">可用性： 3.3.0</p></div><div class="refsection" id="idm4472"><h2>示例：生成单词“Yo”</h2><pre class="programlisting">SELECT ST_AsText(ST_Letters('Yo'), 1);</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_letters01.png"/><div class="caption"><p>ST_Letter生成的字符</p></div></div></div></div><div class="refsection" id="idm4481"><h2>示例：放大和移动单词</h2><pre class="programlisting">SELECT ST_Translate(ST_Scale(ST_Letters('Yo'), 10, 10), 100,100);</pre></div><div class="refsection" id="idm4484"><h2>相关信息</h2><p><a class="xref" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a>, <a class="xref" href="#ST_Scale" title="ST_Scale">ST_Scale</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a></p></div></div></section><section class="section" id="Geometry_Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.4. 几何访问器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#GeometryType">GeometryType</a></span><span class="refpurpose"> — 以文本形式返回几何的类型。</span></li><li><span class="refentrytitle"><a href="#ST_Boundary">ST_Boundary</a></span><span class="refpurpose"> — 返回几何图形的边界。</span></li><li><span class="refentrytitle"><a href="#ST_BoundingDiagonal">ST_BoundingDiagonal</a></span><span class="refpurpose"> — 返回几何边界框的对角线。</span></li><li><span class="refentrytitle"><a href="#ST_CoordDim">ST_CoordDim</a></span><span class="refpurpose"> — 返回几何体的坐标维度。</span></li><li><span class="refentrytitle"><a href="#ST_Dimension">ST_Dimension</a></span><span class="refpurpose"> — 返回几何图形的拓扑维数。 </span></li><li><span class="refentrytitle"><a href="#ST_Dump">ST_Dump</a></span><span class="refpurpose"> — 返回几何组件的一组 <code class="varname">geometry_dump</code>行。</span></li><li><span class="refentrytitle"><a href="#ST_DumpPoints">ST_DumpPoints</a></span><span class="refpurpose"> — 返回几何图形中坐标的一组 <code class="varname">geometry_dump</code> 行。</span></li><li><span class="refentrytitle"><a href="#ST_DumpSegments">ST_DumpSegments</a></span><span class="refpurpose"> — 为几何图形中的各个线段返回一组<code class="varname">geometry_dump</code>行。</span></li><li><span class="refentrytitle"><a href="#ST_DumpRings">ST_DumpRings</a></span><span class="refpurpose"> — 返回多边形外环和内环的一组<code class="varname">geometry_dump</code>行。</span></li><li><span class="refentrytitle"><a href="#ST_EndPoint">ST_EndPoint</a></span><span class="refpurpose"> — 返回 LineString 或 CircularLineString 的最后一个点。</span></li><li><span class="refentrytitle"><a href="#ST_Envelope">ST_Envelope</a></span><span class="refpurpose"> — 返回表示几何图形边界框的几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_ExteriorRing">ST_ExteriorRing</a></span><span class="refpurpose"> — 返回表示多边形外环的LineString。 </span></li><li><span class="refentrytitle"><a href="#ST_GeometryN">ST_GeometryN</a></span><span class="refpurpose"> — 返回几何集合的一个元素。</span></li><li><span class="refentrytitle"><a href="#ST_GeometryType">ST_GeometryType</a></span><span class="refpurpose"> — 以文本形式返回几何图形的 SQL-MM 类型。</span></li><li><span class="refentrytitle"><a href="#ST_HasArc">ST_HasArc</a></span><span class="refpurpose"> — 测试几何图形是否包含圆弧</span></li><li><span class="refentrytitle"><a href="#ST_InteriorRingN">ST_InteriorRingN</a></span><span class="refpurpose"> — 返回多边形的第 N 个内环（孔）。</span></li><li><span class="refentrytitle"><a href="#ST_NumCurves">ST_NumCurves</a></span><span class="refpurpose"> — Return the number of component curves in a CompoundCurve.</span></li><li><span class="refentrytitle"><a href="#ST_CurveN">ST_CurveN</a></span><span class="refpurpose"> — Returns the Nth component curve geometry of a CompoundCurve.</span></li><li><span class="refentrytitle"><a href="#ST_IsClosed">ST_IsClosed</a></span><span class="refpurpose"> — 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。 </span></li><li><span class="refentrytitle"><a href="#ST_IsCollection">ST_IsCollection</a></span><span class="refpurpose"> — 测试几何类型是否为几何集合。</span></li><li><span class="refentrytitle"><a href="#ST_IsEmpty">ST_IsEmpty</a></span><span class="refpurpose"> — 检测几何图形是否为空。</span></li><li><span class="refentrytitle"><a href="#ST_IsPolygonCCW">ST_IsPolygonCCW </a></span><span class="refpurpose"> — 检测多边形是否具有逆时针方向的外环和顺时针方向的内环。 </span></li><li><span class="refentrytitle"><a href="#ST_IsPolygonCW">ST_IsPolygonCW </a></span><span class="refpurpose"> — 检测多边形是否具有顺时针外环和逆时针内环。 </span></li><li><span class="refentrytitle"><a href="#ST_IsRing">ST_IsRing</a></span><span class="refpurpose"> — 检测线串是闭合的还是简单的。</span></li><li><span class="refentrytitle"><a href="#ST_IsSimple">ST_IsSimple</a></span><span class="refpurpose"> — 检测几何体的自完整性或自接触点。</span></li><li><span class="refentrytitle"><a href="#ST_M">ST_M</a></span><span class="refpurpose"> — 返回点的 M 值。</span></li><li><span class="refentrytitle"><a href="#ST_MemSize">ST_MemSize</a></span><span class="refpurpose"> — 返回几何图形占用的内存空间总量。</span></li><li><span class="refentrytitle"><a href="#ST_NDims">ST_NDims</a></span><span class="refpurpose"> — 返回几何体的坐标维度。</span></li><li><span class="refentrytitle"><a href="#ST_NPoints">ST_NPoints</a></span><span class="refpurpose"> — 返回几何图形中的点数（顶点）。</span></li><li><span class="refentrytitle"><a href="#ST_NRings">ST_NRings</a></span><span class="refpurpose"> — 返回多边形几何中的环数。</span></li><li><span class="refentrytitle"><a href="#ST_NumGeometries">ST_NumGeometries</a></span><span class="refpurpose"> — 返回几何集合中的元素数量。</span></li><li><span class="refentrytitle"><a href="#ST_NumInteriorRings">ST_NumInteriorRings</a></span><span class="refpurpose"> — 返回多边形的内环（孔）数。</span></li><li><span class="refentrytitle"><a href="#ST_NumInteriorRing">ST_NumInteriorRing</a></span><span class="refpurpose"> — 返回多边形的内环（孔）数。ST_NumInteriorRings的别名</span></li><li><span class="refentrytitle"><a href="#ST_NumPatches">ST_NumPatches</a></span><span class="refpurpose"> — 返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。</span></li><li><span class="refentrytitle"><a href="#ST_NumPoints">ST_NumPoints</a></span><span class="refpurpose"> — 返回 LineString 或 CircularString 中的点数。</span></li><li><span class="refentrytitle"><a href="#ST_PatchN">ST_PatchN</a></span><span class="refpurpose"> — 返回多边形曲面（PolyhedralSurface）的第 N 个几何体（面）。</span></li><li><span class="refentrytitle"><a href="#ST_PointN">ST_PointN</a></span><span class="refpurpose"> — 返回几何图形中第一个线串或圆形线串中的第 N 个点。 </span></li><li><span class="refentrytitle"><a href="#ST_Points">ST_Points</a></span><span class="refpurpose"> — 返回包含几何坐标的 MultiPoint。 </span></li><li><span class="refentrytitle"><a href="#ST_StartPoint">ST_StartPoint</a></span><span class="refpurpose"> — 返回 LineString 的第一个点.</span></li><li><span class="refentrytitle"><a href="#ST_Summary">ST_Summary</a></span><span class="refpurpose"> — 返回几何内容的文本摘要。 </span></li><li><span class="refentrytitle"><a href="#ST_X">ST_X</a></span><span class="refpurpose"> — 返回点的 X 坐标。</span></li><li><span class="refentrytitle"><a href="#ST_Y">ST_Y</a></span><span class="refpurpose"> — 返回点的Y坐标。</span></li><li><span class="refentrytitle"><a href="#ST_Z">ST_Z</a></span><span class="refpurpose"> — 返回点的Z坐标。</span></li><li><span class="refentrytitle"><a href="#ST_Zmflag">ST_Zmflag</a></span><span class="refpurpose"> — 返回指示几何体的 ZM 坐标维度的代码。</span></li><li><span class="refentrytitle"><a href="#ST_HasZ">ST_HasZ</a></span><span class="refpurpose"> — 检查几何体是否具有 Z 维度。</span></li><li><span class="refentrytitle"><a href="#ST_HasM">ST_HasM</a></span><span class="refpurpose"> — 检查几何体是否具有 M（测量）维度。</span></li></ul></div><div class="refentry" id="GeometryType"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GeometryType — 以文本形式返回几何的类型。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">GeometryType</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm4504"><h2>描述</h2><p>以字符串形式返回几何类型，例如“LINESTRING”、“POLYGON”、“MULTIPOINT”等。</p><p>OGC SPEC s2.1.1.1 - 返回 Geometry 的可实例化子类型的名称，Geometry 的可实例化子类型的名称以字符串形式返回。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数还通过返回“POINTM”形式的字符串来指示是否具有M值。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm4532"><h2>示例</h2><pre class="programlisting">SELECT GeometryType(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
 geometrytype
--------------
 LINESTRING
</pre><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
                        --result
                        POLYHEDRALSURFACE
                        </pre><pre class="programlisting">SELECT GeometryType(geom) as result
  FROM
    (SELECT
       ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')  AS geom
    ) AS g;
 result
--------
 TIN    </pre></div><div class="refsection" id="idm4537"><h2>相关信息</h2><p><a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a></p></div></div><div class="refentry" id="ST_Boundary"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Boundary — 返回几何图形的边界。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Boundary</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm4553"><h2>描述</h2><p>返回此 Geometry 的组合边界的闭合。组合边界的定义如 OGC SPEC 第 3.12.3.2 节中所述。由于该函数的结果是一个闭包，因此是拓扑封闭的，因此可以使用 OGC SPEC 第 3.12.2 节中讨论的表征几何基元来表示生成的边界。</p><p>它是通过GEOS模块实现的</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 2.0.0 之前，如果与 <code class="varname">GEOMETRYCOLLECTION</code> 一起使用，此函数会引发异常。从 2.0.0 开始，它将返回 NULL（不支持的输入）。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  OGC SPEC s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1.17</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p class="enhanced">增强：引入了 2.1.0 三角函数支持</p><p class="changed">更改：3.2.0 支持 TIN，不使用地理，不线性化曲线</p></div><div class="refsection" id="idm4575"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_boundary01.png"/><div class="caption"><p>具有重叠边界点的线串</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_Boundary(geom)
FROM (SELECT 'LINESTRING(100 150,50 60, 70 80, 160 170)'::geometry As geom) As f;
                                </pre><p>
</p><pre class="screen"><em class="lineannotation"><span class="lineannotation">
ST_AsText output
</span></em>
MULTIPOINT((100 150),(160 170))
</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_boundary02.png"/><div class="caption"><p>具有边界多线串的多边形孔</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_Boundary(geom)
FROM (SELECT
'POLYGON (( 10 130, 50 190, 110 190, 140 150, 150 80, 100 10, 20 40, 10 130 ),
        ( 70 40, 100 50, 120 80, 80 110, 50 90, 70 40 ))'::geometry As geom) As f;
                                </pre><p>
</p><pre class="screen"><em class="lineannotation"><span class="lineannotation">
ST_AsText output
</span></em>
MULTILINESTRING((10 130,50 190,110 190,140 150,150 80,100 10,20 40,10 130),
        (70 40,100 50,120 80,80 110,50 90,70 40))
</pre><p>
						</p></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText(ST_Boundary(ST_GeomFromText('LINESTRING(1 1,0 0, -1 1)')));
st_astext
-----------
MULTIPOINT((1 1),(-1 1))

SELECT ST_AsText(ST_Boundary(ST_GeomFromText('POLYGON((1 1,0 0, -1 1, 1 1))')));
st_astext
----------
LINESTRING(1 1,0 0,-1 1,1 1)

--Using a 3d polygon
SELECT ST_AsEWKT(ST_Boundary(ST_GeomFromEWKT('POLYGON((1 1 1,0 0 1, -1 1 1, 1 1 1))')));

st_asewkt
-----------------------------------
LINESTRING(1 1 1,0 0 1,-1 1 1,1 1 1)

--Using a 3d multilinestring
SELECT ST_AsEWKT(ST_Boundary(ST_GeomFromEWKT('MULTILINESTRING((1 1 1,0 0 0.5, -1 1 1),(1 1 0.5,0 0 0.5, -1 1 0.5, 1 1 0.5) )')));

st_asewkt
----------
MULTIPOINT((-1 1 1),(1 1 0.75))
</pre></div><div class="refsection" id="idm4604"><h2>相关信息</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a></p></div></div><div class="refentry" id="ST_BoundingDiagonal"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BoundingDiagonal — 返回几何边界框的对角线。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_BoundingDiagonal</strong>(</code>geometry  <var class="pdparam">geom</var>, boolean  <var class="pdparam">fits=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm4625"><h2>描述</h2><p>以线串形式返回给定几何图形的边界框的对角线。它是一个由两点组成的线串，从最小点开始，到最大点结束。如果输入几何为空，则对角线为空。 </p><p>可选的<code class="varname">fits</code>参数指定是否需要最佳拟合。如果为 false，则可以接受稍大的边界框的对角线（对于具有许多顶点的几何图形，计算速度更快）。无论哪种情况，返回的对角线的边界框始终覆盖输入几何体。 </p><p>返回的几何体保留输入几何体的 SRID 和维度（Z 和 M 存在）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在退化情况下（即输入中的单个顶点），返回的线串将在形式上无效（无内部）。 结果在拓扑上仍然有效。 </p></td></tr></table></div><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm4642"><h2>示例</h2><pre class="programlisting">-- Get the minimum X in a buffer around a point
SELECT ST_X(ST_StartPoint(ST_BoundingDiagonal(
  ST_Buffer(ST_Point(0,0),10)
)));
 st_x
------
  -10
                </pre></div><div class="refsection" id="idm4645"><h2>相关信息</h2><p><a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>, <a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a> </p></div></div><div class="refentry" id="ST_CoordDim"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CoordDim — 返回几何体的坐标维度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_CoordDim</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm4667"><h2>描述</h2><p>返回ST_Geometry值的坐标维度。</p><p>这是 <a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a> 的 MM 兼容别名</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm4697"><h2>示例</h2><pre class="programlisting">SELECT ST_CoordDim('CIRCULARSTRING(1 2 3, 1 3 4, 5 6 7, 8 9 10, 11 12 13)');
                        ---result--
                                3

                                SELECT ST_CoordDim(ST_Point(1,2));
                        --result--
                                2

                </pre></div><div class="refsection" id="idm4700"><h2>相关信息</h2><p><a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a></p></div></div><div class="refentry" id="ST_Dimension"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Dimension — 返回几何图形的拓扑维数。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_Dimension</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm4716"><h2>描述</h2><p>返回此 Geometry 对象的拓扑维度，该维度必须小于或等于坐标维度。 OGC SPEC s2.1.1.1 - 对于 <code class="varname">POINT</code> 返回 0，对于<code class="varname">LINESTRING</code>返回 1，对于<code class="varname">POLYGON</code> 返回 2，以及<code class="varname">GEOMETRYCOLLECTION</code>组件的最大尺寸。如果尺寸未知（例如，对于空 <code class="varname">GEOMETRYCOLLECTION</code>），则返回 0。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.2</p><p class="enhanced">增强：2.0.0 引入了多面体曲面支持和 TIN 支持。当给定空几何时，它不再引发异常。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 2.0.0 之前，提供空几何图形会引发异常。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm4739"><h2>示例</h2><pre class="programlisting">SELECT ST_Dimension('GEOMETRYCOLLECTION(LINESTRING(1 1,0 0),POINT(0 0))');
ST_Dimension
-----------
1
</pre></div><div class="refsection" id="idm4742"><h2>相关信息</h2><p><a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a></p></div></div><div class="refentry" id="ST_Dump"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Dump — 返回几何组件的一组 <code class="varname">geometry_dump</code>行。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[] <strong class="fsfunc">ST_Dump</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm4759"><h2>描述</h2><p>提取几何组件的集合返回函数 (SRF)。 它返回一组 <a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a> 行，每行包含一个几何图形（<em class="parameter"><code>geom</code></em> 字段）和一个整数数组（<em class="parameter"><code>path</code></em>字段）。 </p><p>对于基本几何类型（POINT、LINESTRING、POLYGON），返回单个记录，其中包含空<em class="parameter"><code>path</code></em> 数组，输入几何图形为 <em class="parameter"><code>geom</code></em>。对于集合或多几何体，将为每个集合组件返回一条记录，并且<em class="parameter"><code>路径</code></em>表示组件在集合内的位置。</p><p>ST_Dump 对于扩展几何结构很有用。 它与<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a> / GROUP BY 相反，它创建新行。例如，它可用于将 MULTIPOLYGONS 扩展为 POLYGONS。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="availability">可用性：PostGIS 1.0.0RC1。需要 PostgreSQL 7.3 或更高版本。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm4791"><h2>标准示例</h2><pre class="programlisting">SELECT sometable.field1, sometable.field1,
      (ST_Dump(sometable.geom)).geom AS geom
FROM sometable;

-- Break a compound curve into its constituent linestrings and circularstrings
SELECT ST_AsEWKT(a.geom), ST_HasArc(a.geom)
  FROM ( SELECT (ST_Dump(p_geom)).geom AS geom
         FROM (SELECT ST_GeomFromEWKT('COMPOUNDCURVE(CIRCULARSTRING(0 0, 1 1, 1 0),(1 0, 0 1))') AS p_geom) AS b
        ) AS a;
          st_asewkt          | st_hasarc
-----------------------------+----------
 CIRCULARSTRING(0 0,1 1,1 0) | t
 LINESTRING(1 0,0 1)         | f
(2 rows)</pre></div><div class="refsection" id="idm4794"><h2>多面体曲面、TIN 和三角形的示例</h2><pre class="programlisting">-- Polyhedral surface example
-- Break a Polyhedral surface into its faces
SELECT (a.p_geom).path[1] As path, ST_AsEWKT((a.p_geom).geom) As geom_ewkt
  FROM (SELECT ST_Dump(ST_GeomFromEWKT('POLYHEDRALSURFACE(
((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),  ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),  ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1))
)') ) AS p_geom )  AS a;

 path |                geom_ewkt
------+------------------------------------------
    1 | POLYGON((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0))
    2 | POLYGON((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0))
    3 | POLYGON((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0))
    4 | POLYGON((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0))
    5 | POLYGON((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0))
    6 | POLYGON((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1))</pre><pre class="programlisting">-- TIN --
SELECT (g.gdump).path, ST_AsEWKT((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_Dump( ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )') ) AS gdump
    ) AS g;
-- result --
 path |                 wkt
------+-------------------------------------
 {1}  | TRIANGLE((0 0 0,0 0 1,0 1 0,0 0 0))
 {2}  | TRIANGLE((0 0 0,0 1 0,1 1 0,0 0 0))
</pre></div><div class="refsection" id="idm4798"><h2>相关信息</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="13.6. PostGIS 几何/地理/栅格导出函数">Section 13.6, “PostGIS 几何/地理/栅格导出函数”</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a></p></div></div><div class="refentry" id="ST_DumpPoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DumpPoints — 返回几何图形中坐标的一组 <code class="varname">geometry_dump</code> 行。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[] <strong class="fsfunc">ST_DumpPoints</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm4818"><h2>描述</h2><p>提取几何图形坐标（顶点）的集合返回函数 (SRF)。它返回一组<a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>行，每行包含一个几何图形（<em class="parameter"><code>geom</code></em>字段）和一个整数数组（<em class="parameter"><code>path</code></em>字段）。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><em class="parameter"><code>geom</code></em>字段<code class="varname">POINT</code>表示所提供几何图形的坐标。 </p></li><li class="listitem"><p><em class="parameter"><code>path</code></em>字段（<code class="varname">integer[]</code>）是枚举所提供几何图形元素中的坐标位置的索引。索引是从 1 开始的。例如，对于<code class="varname">LINESTRING</code>，路径为 <code class="varname">{i}</code>，其中<code class="varname">i</code>是<code class="varname">LINESTRING</code> 中的第<code class="varname">n</code>个坐标。 对于 <code class="varname">POLYGON</code>，路径为<code class="varname">{i,j}</code>，其中 <code class="varname">i</code>是环编号（1 是外环；后面是内环），<code class="varname">j</code>是环中的坐标位置。 </p></li></ul></div><p>要获取包含坐标的单个几何图形，请使用 <a class="xref" href="#ST_Points" title="ST_Points">ST_Points</a>。 </p><p class="enhanced">增强：2.1.0 速度更快。重新实现为原生C语言。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="availability">可用性：1.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm4863"><h2>传统将 LineStrings 表分解为节点</h2><pre class="programlisting">SELECT edge_id, (dp).path[1] As index, ST_AsText((dp).geom) As wktnode
FROM (SELECT 1 As edge_id
        , ST_DumpPoints(ST_GeomFromText('LINESTRING(1 2, 3 4, 10 10)')) AS dp
     UNION ALL
     SELECT 2 As edge_id
        , ST_DumpPoints(ST_GeomFromText('LINESTRING(3 5, 5 6, 9 10)')) AS dp
   ) As foo;
 edge_id | index |    wktnode
---------+-------+--------------
       1 |     1 | POINT(1 2)
       1 |     2 | POINT(3 4)
       1 |     3 | POINT(10 10)
       2 |     1 | POINT(3 5)
       2 |     2 | POINT(5 6)
       2 |     3 | POINT(9 10)</pre></div><div class="refsection" id="idm4866"><h2>标准几何示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_dumppoints01.png"/></div></div><pre class="programlisting">SELECT path, ST_AsText(geom)
FROM (
  SELECT (ST_DumpPoints(g.geom)).*
  FROM
    (SELECT
       'GEOMETRYCOLLECTION(
          POINT ( 0 1 ),
          LINESTRING ( 0 3, 3 4 ),
          POLYGON (( 2 0, 2 3, 0 2, 2 0 )),
          POLYGON (( 3 0, 3 3, 6 3, 6 0, 3 0 ),
                   ( 5 1, 4 2, 5 2, 5 1 )),
          MULTIPOLYGON (
                  (( 0 5, 0 8, 4 8, 4 5, 0 5 ),
                   ( 1 6, 3 6, 2 7, 1 6 )),
                  (( 5 4, 5 8, 6 7, 5 4 ))
          )
        )'::geometry AS geom
    ) AS g
  ) j;

   path    | st_astext
-----------+------------
 {1,1}     | POINT(0 1)
 {2,1}     | POINT(0 3)
 {2,2}     | POINT(3 4)
 {3,1,1}   | POINT(2 0)
 {3,1,2}   | POINT(2 3)
 {3,1,3}   | POINT(0 2)
 {3,1,4}   | POINT(2 0)
 {4,1,1}   | POINT(3 0)
 {4,1,2}   | POINT(3 3)
 {4,1,3}   | POINT(6 3)
 {4,1,4}   | POINT(6 0)
 {4,1,5}   | POINT(3 0)
 {4,2,1}   | POINT(5 1)
 {4,2,2}   | POINT(4 2)
 {4,2,3}   | POINT(5 2)
 {4,2,4}   | POINT(5 1)
 {5,1,1,1} | POINT(0 5)
 {5,1,1,2} | POINT(0 8)
 {5,1,1,3} | POINT(4 8)
 {5,1,1,4} | POINT(4 5)
 {5,1,1,5} | POINT(0 5)
 {5,1,2,1} | POINT(1 6)
 {5,1,2,2} | POINT(3 6)
 {5,1,2,3} | POINT(2 7)
 {5,1,2,4} | POINT(1 6)
 {5,2,1,1} | POINT(5 4)
 {5,2,1,2} | POINT(5 8)
 {5,2,1,3} | POINT(6 7)
 {5,2,1,4} | POINT(5 4)
(29 rows)</pre></div><div class="refsection" id="idm4873"><h2>多面体曲面、TIN 和三角形的示例</h2><pre class="programlisting">-- Polyhedral surface cube --
SELECT (g.gdump).path, ST_AsEWKT((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_DumpPoints(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )') ) AS gdump
    ) AS g;
-- result --
  path   |     wkt
---------+--------------
 {1,1,1} | POINT(0 0 0)
 {1,1,2} | POINT(0 0 1)
 {1,1,3} | POINT(0 1 1)
 {1,1,4} | POINT(0 1 0)
 {1,1,5} | POINT(0 0 0)
 {2,1,1} | POINT(0 0 0)
 {2,1,2} | POINT(0 1 0)
 {2,1,3} | POINT(1 1 0)
 {2,1,4} | POINT(1 0 0)
 {2,1,5} | POINT(0 0 0)
 {3,1,1} | POINT(0 0 0)
 {3,1,2} | POINT(1 0 0)
 {3,1,3} | POINT(1 0 1)
 {3,1,4} | POINT(0 0 1)
 {3,1,5} | POINT(0 0 0)
 {4,1,1} | POINT(1 1 0)
 {4,1,2} | POINT(1 1 1)
 {4,1,3} | POINT(1 0 1)
 {4,1,4} | POINT(1 0 0)
 {4,1,5} | POINT(1 1 0)
 {5,1,1} | POINT(0 1 0)
 {5,1,2} | POINT(0 1 1)
 {5,1,3} | POINT(1 1 1)
 {5,1,4} | POINT(1 1 0)
 {5,1,5} | POINT(0 1 0)
 {6,1,1} | POINT(0 0 1)
 {6,1,2} | POINT(1 0 1)
 {6,1,3} | POINT(1 1 1)
 {6,1,4} | POINT(0 1 1)
 {6,1,5} | POINT(0 0 1)
(30 rows)</pre><pre class="programlisting">-- Triangle --
SELECT (g.gdump).path, ST_AsText((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_DumpPoints( ST_GeomFromEWKT('TRIANGLE ((
                0 0,
                0 9,
                9 0,
                0 0
            ))') ) AS gdump
    ) AS g;
-- result --
 path |    wkt
------+------------
 {1}  | POINT(0 0)
 {2}  | POINT(0 9)
 {3}  | POINT(9 0)
 {4}  | POINT(0 0)
</pre><pre class="programlisting">-- TIN --
SELECT (g.gdump).path, ST_AsEWKT((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_DumpPoints( ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )') ) AS gdump
    ) AS g;
-- result --
  path   |     wkt
---------+--------------
 {1,1,1} | POINT(0 0 0)
 {1,1,2} | POINT(0 0 1)
 {1,1,3} | POINT(0 1 0)
 {1,1,4} | POINT(0 0 0)
 {2,1,1} | POINT(0 0 0)
 {2,1,2} | POINT(0 1 0)
 {2,1,3} | POINT(1 1 0)
 {2,1,4} | POINT(0 0 0)
(8 rows)
</pre></div><div class="refsection" id="idm4878"><h2>相关信息</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="13.6. PostGIS 几何/地理/栅格导出函数">Section 13.6, “PostGIS 几何/地理/栅格导出函数”</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a>, <a class="xref" href="#ST_Points" title="ST_Points">ST_Points</a></p></div></div><div class="refentry" id="ST_DumpSegments"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DumpSegments — 为几何图形中的各个线段返回一组<code class="varname">geometry_dump</code>行。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[] <strong class="fsfunc">ST_DumpSegments</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm4899"><h2>描述</h2><p>提取几何图形边的集合返回函数 (SRF)。它返回一组<a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>行，每行包含一个几何图形（<em class="parameter"><code>geom</code></em>字段）和一个整数数组（<em class="parameter"><code>path</code></em> 字段）。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the <em class="parameter"><code>geom</code></em> field <code class="varname">LINESTRING</code>s represent the linear segments of the supplied geometry, while the <code class="varname">CIRCULARSTRING</code>s represent the arc segments. </p></li><li class="listitem"><p><em class="parameter"><code>path</code></em>字段（<code class="varname">integer[]</code>）是枚举所提供几何元素中的段起点位置的索引。索引是从 1 开始的。 例如，对于<code class="varname">LINESTRING</code> ，路径为 <code class="varname">{i}</code>，其中<code class="varname">i</code>是<code class="varname">LINESTRING</code>中的第<code class="varname">n</code>个线段起点。 对于 <code class="varname">POLYGON</code> ，路径为 <code class="varname">{i,j}</code>，其中<code class="varname">i</code>是环编号（1 是外环；后面是内环），<code class="varname">j</code>是环中的线段起点位置。 </p></li></ul></div><p class="availability">可用性：3.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm4933"><h2>标准几何示例</h2><pre class="programlisting">SELECT path, ST_AsText(geom)
FROM (
    SELECT (ST_DumpSegments(g.geom)).*
    FROM (SELECT 'GEOMETRYCOLLECTION(
    LINESTRING(1 1, 3 3, 4 4),
    POLYGON((5 5, 6 6, 7 7, 5 5))
)'::geometry AS geom
        ) AS g
) j;

  path   │      st_astext
---------------------------------
 {1,1}   │ LINESTRING(1 1,3 3)
 {1,2}   │ LINESTRING(3 3,4 4)
 {2,1,1} │ LINESTRING(5 5,6 6)
 {2,1,2} │ LINESTRING(6 6,7 7)
 {2,1,3} │ LINESTRING(7 7,5 5)
(5 rows)</pre></div><div class="refsection" id="idm4936"><h2>TIN 和三角形示例</h2><pre class="programlisting">-- Triangle --
SELECT path, ST_AsText(geom)
FROM (
    SELECT (ST_DumpSegments(g.geom)).*
    FROM (SELECT 'TRIANGLE((
        0 0,
        0 9,
        9 0,
        0 0
    ))'::geometry AS geom
        ) AS g
) j;

 path  │      st_astext
 ---------------------------------
 {1,1} │ LINESTRING(0 0,0 9)
 {1,2} │ LINESTRING(0 9,9 0)
 {1,3} │ LINESTRING(9 0,0 0)
(3 rows)
</pre><pre class="programlisting">-- TIN --
SELECT path, ST_AsEWKT(geom)
FROM (
    SELECT (ST_DumpSegments(g.geom)).*
    FROM (SELECT 'TIN(((
        0 0 0,
        0 0 1,
        0 1 0,
        0 0 0
    )), ((
        0 0 0,
        0 1 0,
        1 1 0,
        0 0 0
    ))
    )'::geometry AS geom
        ) AS g
) j;

  path   │        st_asewkt
  ---------------------------------
 {1,1,1} │ LINESTRING(0 0 0,0 0 1)
 {1,1,2} │ LINESTRING(0 0 1,0 1 0)
 {1,1,3} │ LINESTRING(0 1 0,0 0 0)
 {2,1,1} │ LINESTRING(0 0 0,0 1 0)
 {2,1,2} │ LINESTRING(0 1 0,1 1 0)
 {2,1,3} │ LINESTRING(1 1 0,0 0 0)
(6 rows)
</pre></div><div class="refsection" id="idm4940"><h2>相关信息</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="13.6. PostGIS 几何/地理/栅格导出函数">Section 13.6, “PostGIS 几何/地理/栅格导出函数”</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a></p></div></div><div class="refentry" id="ST_DumpRings"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DumpRings — 返回多边形外环和内环的一组<code class="varname">geometry_dump</code>行。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[] <strong class="fsfunc">ST_DumpRings</strong>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" id="idm4960"><h2>描述</h2><p>提取多边形环的集合返回函数 (SRF)。它返回一组<a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a> 行，每行包含一个几何图形（<em class="parameter"><code>geom</code></em>字段）和一个整数数组（<em class="parameter"><code>path</code></em> 字段）。 </p><p><em class="parameter"><code>geom</code></em> 字段将每个环包含为 POLYGON。<em class="parameter"><code>path</code></em>字段是一个长度为 1 的整数数组，包含多边形环索引。外环（壳）的索引为 0。内环（孔）的索引为 1 及更高。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅适用于POLYGON,它不适用于MULTIPOLYGONS</p></td></tr></table></div><p class="availability">可用性：需要 PostGIS 1.1.3 PostgreSQL 7.3 或更高版本。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm4976"><h2>示例</h2><p>查询的常规格式。</p><pre class="programlisting">SELECT polyTable.field1, polyTable.field1,
          (ST_DumpRings(polyTable.geom)).geom As geom
FROM polyTable;
</pre><p>具有单孔的多边形。</p><pre class="programlisting">SELECT path, ST_AsEWKT(geom) As geom
        FROM ST_DumpRings(
                ST_GeomFromEWKT('POLYGON((-8149064 5133092 1,-8149064 5132986 1,-8148996 5132839 1,-8148972 5132767 1,-8148958 5132508 1,-8148941 5132466 1,-8148924 5132394 1,
                -8148903 5132210 1,-8148930 5131967 1,-8148992 5131978 1,-8149237 5132093 1,-8149404 5132211 1,-8149647 5132310 1,-8149757 5132394 1,
                -8150305 5132788 1,-8149064 5133092 1),
                (-8149362 5132394 1,-8149446 5132501 1,-8149548 5132597 1,-8149695 5132675 1,-8149362 5132394 1))')
                )  as foo;
 path |                                            geom
----------------------------------------------------------------------------------------------------------------
  {0} | POLYGON((-8149064 5133092 1,-8149064 5132986 1,-8148996 5132839 1,-8148972 5132767 1,-8148958 5132508 1,
          |          -8148941 5132466 1,-8148924 5132394 1,
          |          -8148903 5132210 1,-8148930 5131967 1,
          |          -8148992 5131978 1,-8149237 5132093 1,
          |          -8149404 5132211 1,-8149647 5132310 1,-8149757 5132394 1,-8150305 5132788 1,-8149064 5133092 1))
  {1} | POLYGON((-8149362 5132394 1,-8149446 5132501 1,
          |          -8149548 5132597 1,-8149695 5132675 1,-8149362 5132394 1))</pre></div><div class="refsection" id="idm4982"><h2>相关信息</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="13.6. PostGIS 几何/地理/栅格导出函数">Section 13.6, “PostGIS 几何/地理/栅格导出函数”</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a></p></div></div><div class="refentry" id="ST_EndPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_EndPoint — 返回 LineString 或 CircularLineString 的最后一个点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_EndPoint</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm5002"><h2>描述</h2><p>返回 <code class="varname">LINESTRING</code> 或<code class="varname">CIRCULARLINESTRING</code> 几何图形的最后一个点作为<code class="varname">POINT</code>。 如果输入不是<code class="varname">LINESTRING</code> 或<code class="varname">CIRCULARLINESTRING</code>，则返回 <code class="varname">NULL</code> 。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.1.4</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 不再适用于单个几何体 MultiLineStrings。 在旧版本的 PostGIS 中，单行 MultiLineString 可以使用此函数并返回终点。 在 2.0.0 中，它像任何其他 MultiLineString 一样返回 NULL。 旧的行为是一个未记录的功能，但是那些假设将数据存储为 LINESTRING 的人可能会在 2.0.0 中遇到这些返回 NULL 的情况。</p></td></tr></table></div></div><div class="refsection" id="idm5025"><h2>示例</h2><p>线串(LineString)端点</p><pre class="programlisting">postgis=# SELECT ST_AsText(ST_EndPoint('LINESTRING(1 1, 2 2, 3 3)'::geometry));
 st_astext
------------
 POINT(3 3)
</pre><p>非线串终止点为 NULL</p><pre class="programlisting">SELECT ST_EndPoint('POINT(1 1)'::geometry) IS NULL AS is_null;
  is_null
----------
 t
</pre><p>3D 线串(LineString)端点</p><pre class="programlisting">--3d endpoint
SELECT ST_AsEWKT(ST_EndPoint('LINESTRING(1 1 2, 1 2 3, 0 0 5)'));
  st_asewkt
--------------
 POINT(0 0 5)
</pre><p>圆弧 的端点</p><pre class="programlisting">SELECT ST_AsText(ST_EndPoint('CIRCULARSTRING(5 2,-3 1.999999, -2 1, -4 2, 6 3)'::geometry));
 st_astext
------------
 POINT(6 3)
</pre></div><div class="refsection" id="idm5035"><h2>相关信息</h2><p><a class="xref" href="#ST_PointN" title="ST_PointN">ST_PointN</a>, <a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a></p></div></div><div class="refentry" id="ST_Envelope"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Envelope — 返回表示几何图形边界框的几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Envelope</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm5052"><h2>描述</h2><p>以几何体的形式返回所提供几何体的双精度 (float8) 最小边界框。 多边形由边界框的角点定义（(<code class="varname">MINX</code>, <code class="varname">MINY</code>)、(<code class="varname">MINX</code>, <code class="varname">MAXY</code>)、(<code class="varname">MAXX</code>, <code class="varname">MAXY</code>)、(<code class="varname">MAXX</code>, <code class="varname">MINY</code>)、(<code class="varname">MINX</code>, <code class="varname">MINY</code>)）。（PostGIS 也会添加 <code class="varname">ZMIN</code>/<code class="varname">ZMAX</code> 坐标）。</p><p>退化情况（垂直线、点）将返回比 <code class="varname">POLYGON</code> 更低维度的几何图形，即<code class="varname">POINT</code> 或<code class="varname">LINESTRING</code>。</p><p class="availability">可用性：1.5.0 行为更改为输出双精度而不是 float4</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.19</p></div><div class="refsection" id="idm5081"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_Envelope('POINT(1 3)'::geometry));
 st_astext
------------
 POINT(1 3)
(1 row)


SELECT ST_AsText(ST_Envelope('LINESTRING(0 0, 1 3)'::geometry));
                   st_astext
--------------------------------
 POLYGON((0 0,0 3,1 3,1 0,0 0))
(1 row)


SELECT ST_AsText(ST_Envelope('POLYGON((0 0, 0 1, 1.0000001 1, 1.0000001 0, 0 0))'::geometry));
                                                  st_astext
--------------------------------------------------------------
 POLYGON((0 0,0 1,1.00000011920929 1,1.00000011920929 0,0 0))
(1 row)
SELECT ST_AsText(ST_Envelope('POLYGON((0 0, 0 1, 1.0000000001 1, 1.0000000001 0, 0 0))'::geometry));
                                                  st_astext
--------------------------------------------------------------
 POLYGON((0 0,0 1,1.00000011920929 1,1.00000011920929 0,0 0))
(1 row)

SELECT Box3D(geom), Box2D(geom), ST_AsText(ST_Envelope(geom)) As envelopewkt
        FROM (SELECT 'POLYGON((0 0, 0 1000012333334.34545678, 1.0000001 1, 1.0000001 0, 0 0))'::geometry As geom) As foo;


        </pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_envelope01.png"/><div class="caption"><p>点和线串的最小外接矩形。</p></div></div></div><pre class="programlisting">SELECT ST_AsText(ST_Envelope(
                ST_Collect(
                        ST_GeomFromText('LINESTRING(55 75,125 150)'),
                                ST_Point(20, 80))
                                )) As wktenv;
wktenv
-----------
POLYGON((20 75,20 150,125 150,125 75,20 75))</pre></div><div class="refsection" id="idm5091"><h2>相关信息</h2><p><a class="xref" href="#Box2D" title="Box2D">Box2D</a>, <a class="xref" href="#Box3D" title="Box3D">Box3D</a>, <a class="xref" href="#ST_OrientedEnvelope" title="ST_OrientedEnvelope">ST_OrientedEnvelope</a></p></div></div><div class="refentry" id="ST_ExteriorRing"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ExteriorRing — 返回表示多边形外环的LineString。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ExteriorRing</strong>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" id="idm5109"><h2>描述</h2><p>返回表示多边形外环的线串。 如果几何图形不是多边形，则返回 NULL。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不支持 MULTIPOLYGON。 对于 MULTIPOLYGON，与 <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> 或 <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 结合使用 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  2.1.5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.2.3, 8.3.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5129"><h2>示例</h2><pre class="programlisting">--If you have a table of polygons
SELECT gid, ST_ExteriorRing(geom) AS ering
FROM sometable;

--If you have a table of MULTIPOLYGONs
--and want to return a MULTILINESTRING composed of the exterior rings of each polygon
SELECT gid, ST_Collect(ST_ExteriorRing(geom)) AS erings
        FROM (SELECT gid, (ST_Dump(geom)).geom As geom
                        FROM sometable) As foo
GROUP BY gid;

--3d Example
SELECT ST_AsEWKT(
        ST_ExteriorRing(
        ST_GeomFromEWKT('POLYGON((0 0 1, 1 1 1, 1 2 1, 1 1 1, 0 0 1))')
        )
);

st_asewkt
---------
LINESTRING(0 0 1,1 1 1,1 2 1,1 1 1,0 0 1)
</pre></div><div class="refsection" id="idm5132"><h2>相关信息</h2><p><a class="xref" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a>, <a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>, <a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a> </p></div></div><div class="refentry" id="ST_GeometryN"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeometryN — 返回几何集合的一个元素。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeometryN</strong>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" id="idm5153"><h2>描述</h2><p>返回输入几何图形的从 1 开始的第 N 个元素几何图形，该几何图形是 GEOMETRYCOLLECTION、MULTIPOINT、MULTILINESTRING、MULTICURVE、MULTI)POLYGON 或POLYHEDRALSURFACE。 否则，返回 NULL。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>自版本 0.8.0 以来，OGC 规范的索引从 1 开始。 以前的版本将其实现为基于 0。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要提取几何图形的所有元素，<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 效率更高，并且适用于基本几何图形。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="changed">更改：2.0.0 版本。之前的版本对于奇异几何图形会返回 NULL。现在已更改为在 ST_GeometryN(..,1) 情况下返回几何图形。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 9.1.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm5188"><h2>标准示例</h2><pre class="programlisting">
--Extracting a subset of points from a 3d multipoint
SELECT n, ST_AsEWKT(ST_GeometryN(geom, n)) As geomewkt
FROM (
VALUES (ST_GeomFromEWKT('MULTIPOINT((1 2 7), (3 4 7), (5 6 7), (8 9 10))') ),
( ST_GeomFromEWKT('MULTICURVE(CIRCULARSTRING(2.5 2.5,4.5 2.5, 3.5 3.5), (10 11, 12 11))') )
        )As foo(geom)
        CROSS JOIN generate_series(1,100) n
WHERE n &lt;= ST_NumGeometries(geom);

 n |               geomewkt
---+-----------------------------------------
 1 | POINT(1 2 7)
 2 | POINT(3 4 7)
 3 | POINT(5 6 7)
 4 | POINT(8 9 10)
 1 | CIRCULARSTRING(2.5 2.5,4.5 2.5,3.5 3.5)
 2 | LINESTRING(10 11,12 11)


--Extracting all geometries (useful when you want to assign an id)
SELECT gid, n, ST_GeometryN(geom, n)
FROM sometable CROSS JOIN generate_series(1,100) n
WHERE n &lt;= ST_NumGeometries(geom);
</pre></div><div class="refsection" id="idm5191"><h2>多面体曲面、TIN 和三角形的示例</h2><pre class="programlisting">-- Polyhedral surface example
-- Break a Polyhedral surface into its faces
SELECT ST_AsEWKT(ST_GeometryN(p_geom,3)) As geom_ewkt
  FROM (SELECT ST_GeomFromEWKT('POLYHEDRALSURFACE(
((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1))
)')  AS p_geom )  AS a;

                geom_ewkt
------------------------------------------
 POLYGON((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0))</pre><pre class="programlisting">-- TIN --
SELECT ST_AsEWKT(ST_GeometryN(geom,2)) as wkt
  FROM
    (SELECT
       ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')  AS geom
    ) AS g;
-- result --
                 wkt
-------------------------------------
 TRIANGLE((0 0 0,0 1 0,1 1 0,0 0 0))</pre></div><div class="refsection" id="idm5195"><h2>相关信息</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" id="ST_GeometryType"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeometryType — 以文本形式返回几何图形的 SQL-MM 类型。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_GeometryType</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm5212"><h2>描述</h2><p>以字符串形式返回几何类型，例如“ST_LineString”、“ST_Polygon”、“ST_MultiPolygon”等。与 GeometryType 不同，此函数前面有“ST”，并不指示它是否具有 M 值。</p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.4</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm5228"><h2>示例</h2><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
                        --result
                        ST_LineString</pre><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
                        --result
                        ST_PolyhedralSurface</pre><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
                        --result
                        ST_PolyhedralSurface</pre><pre class="programlisting">SELECT ST_GeometryType(geom) as result
  FROM
    (SELECT
       ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')  AS geom
    ) AS g;
 result
--------
 ST_Tin    </pre></div><div class="refsection" id="idm5234"><h2>相关信息</h2><p><a class="xref" href="#GeometryType" title="GeometryType">GeometryType</a></p></div></div><div class="refentry" id="ST_HasArc"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HasArc — 测试几何图形是否包含圆弧</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_HasArc</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm5250"><h2>描述</h2><p>如果几何或几何集合包含圆形字符串，则返回 true</p><p class="availability">可用性：1.2.3？</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm5262"><h2>示例</h2><pre class="programlisting">SELECT ST_HasArc(ST_Collect('LINESTRING(1 2, 3 4, 5 6)', 'CIRCULARSTRING(1 1, 2 3, 4 5, 6 7, 5 6)'));
                st_hasarc
                --------
                t
                </pre></div><div class="refsection" id="idm5265"><h2>相关信息</h2><p><a class="xref" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a>, <a class="xref" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a></p></div></div><div class="refentry" id="ST_InteriorRingN"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_InteriorRingN — 返回多边形的第 N 个内环（孔）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_InteriorRingN</strong>(</code>geometry  <var class="pdparam">a_polygon</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" id="idm5285"><h2>描述</h2><p>以 LINESTRING 形式返回 POLYGON 几何体的第 N 个内环（孔）。 索引从 1 开始。如果几何图形不是多边形或索引超出范围，则返回 NULL。。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不支持 MULTIPOLYGON。 对于 MULTIPOLYGON，与 <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> 或 <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 结合使用 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.2.6, 8.3.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5305"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_InteriorRingN(geom, 1)) As geom
FROM (SELECT ST_BuildArea(
                ST_Collect(ST_Buffer(ST_Point(1,2), 20,3),
                        ST_Buffer(ST_Point(1, 2), 10,3))) As geom
                )  as foo;
                </pre></div><div class="refsection" id="idm5308"><h2>相关信息</h2><p><a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_NumInteriorRing" title="ST_NumInteriorRing">ST_NumInteriorRing</a>, <a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a> </p></div></div><div class="refentry" id="ST_NumCurves"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumCurves — Return the number of component curves in a CompoundCurve.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumCurves</strong>(</code>geometry  <var class="pdparam">a_compoundcurve</var><code>)</code>;</p></div></div><div class="refsection" id="idm5329"><h2>描述</h2><p>Return the number of component curves in a CompoundCurve, zero for an empty CompoundCurve, or NULL for a non-CompoundCurve input. </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.2.6, 8.3.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5340"><h2>示例</h2><pre class="programlisting">-- Returns 3
SELECT ST_NumCurves('COMPOUNDCURVE(
    (2 2, 2.5 2.5),
    CIRCULARSTRING(2.5 2.5, 4.5 2.5, 3.5 3.5),
    (3.5 3.5, 2.5 4.5, 3 5, 2 2)
  )');

-- Returns 0
SELECT ST_NumCurves('COMPOUNDCURVE EMPTY');
        </pre></div><div class="refsection" id="idm5343"><h2>相关信息</h2><p><a class="xref" href="#ST_CurveN" title="ST_CurveN">ST_CurveN</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> </p></div></div><div class="refentry" id="ST_CurveN"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CurveN — Returns the Nth component curve geometry of a CompoundCurve.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CurveN</strong>(</code>geometry  <var class="pdparam">a_compoundcurve</var>, integer  <var class="pdparam">index</var><code>)</code>;</p></div></div><div class="refsection" id="idm5366"><h2>描述</h2><p>Returns the Nth component curve geometry of a CompoundCurve. The index starts at 1. Returns NULL if the geometry is not a CompoundCurve or the index is out of range.</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.2.6, 8.3.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5377"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_CurveN('COMPOUNDCURVE(
    (2 2, 2.5 2.5),
    CIRCULARSTRING(2.5 2.5, 4.5 2.5, 3.5 3.5),
    (3.5 3.5, 2.5 4.5, 3 5, 2 2)
  )', 1));
        </pre></div><div class="refsection" id="idm5380"><h2>相关信息</h2><p><a class="xref" href="#ST_NumCurves" title="ST_NumCurves">ST_NumCurves</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> </p></div></div><div class="refentry" id="ST_IsClosed"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsClosed — 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsClosed</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm5400"><h2>描述</h2><p>如果 <code class="varname">LINESTRING</code> 的起点和终点重合，则返回<code class="varname">TRUE</code>。对于多面体曲面，测试曲面是面状的（开放的）还是体状的（闭合的）。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.1.5, 9.3.3</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>SQL-MM 定义了 <code class="code">ST_IsClosed(NULL)</code> 的结果为 0，而 PostGIS 返回 <code class="varname">NULL</code>。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm5431"><h2>线串和点的示例</h2><pre class="programlisting">postgis=# SELECT ST_IsClosed('LINESTRING(0 0, 1 1)'::geometry);
 st_isclosed
-------------
 f
(1 row)

postgis=# SELECT ST_IsClosed('LINESTRING(0 0, 0 1, 1 1, 0 0)'::geometry);
 st_isclosed
-------------
 t
(1 row)

postgis=# SELECT ST_IsClosed('MULTILINESTRING((0 0, 0 1, 1 1, 0 0),(0 0, 1 1))'::geometry);
 st_isclosed
-------------
 f
(1 row)

postgis=# SELECT ST_IsClosed('POINT(0 0)'::geometry);
 st_isclosed
-------------
 t
(1 row)

postgis=# SELECT ST_IsClosed('MULTIPOINT((0 0), (1 1))'::geometry);
 st_isclosed
-------------
 t
(1 row)</pre></div><div class="refsection" id="idm5434"><h2>多面体曲面示例</h2><pre class="programlisting">-- A cube --
                SELECT ST_IsClosed(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));

 st_isclosed
-------------
 t


 -- Same as cube but missing a side --
 SELECT ST_IsClosed(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)) )'));

 st_isclosed
-------------
 f

</pre></div><div class="refsection" id="idm5437"><h2>相关信息</h2><p><a class="xref" href="#ST_IsRing" title="ST_IsRing">ST_IsRing</a></p></div></div><div class="refentry" id="ST_IsCollection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsCollection — 测试几何类型是否为几何集合。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsCollection</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm5453"><h2>描述</h2><p>如果参数的几何类型是几何集合类型，则返回<code class="varname">TRUE</code>。集合类型有以下几种： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>几何集合</p></li><li class="listitem"><p>多点、多多边形、多线串、多曲线、多曲面</p></li><li class="listitem"><p>复合曲线</p></li></ul></div><p>
                </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数分析几何形状的类型。 这意味着它将在空集合或包含单个元素的集合上返回 <code class="varname">TRUE</code>。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm5475"><h2>示例</h2><pre class="programlisting">postgis=# SELECT ST_IsCollection('LINESTRING(0 0, 1 1)'::geometry);
 st_iscollection
-------------
 f
(1 row)

postgis=# SELECT ST_IsCollection('MULTIPOINT EMPTY'::geometry);
 st_iscollection
-------------
 t
(1 row)

postgis=# SELECT ST_IsCollection('MULTIPOINT((0 0))'::geometry);
 st_iscollection
-------------
 t
(1 row)

postgis=# SELECT ST_IsCollection('MULTIPOINT((0 0), (42 42))'::geometry);
 st_iscollection
-------------
 t
(1 row)

postgis=# SELECT ST_IsCollection('GEOMETRYCOLLECTION(POINT(0 0))'::geometry);
 st_iscollection
-------------
 t
(1 row)</pre></div><div class="refsection" id="idm5478"><h2>相关信息</h2><p><a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" id="ST_IsEmpty"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsEmpty — 检测几何图形是否为空。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsEmpty</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm5494"><h2>描述</h2><p>如果几何图形为空几何，则返回 true; 如果为 true，则此几何图形是空几何集合、多边形、点等。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在SQL-MM中，ST_IsEmpty（NULL）返回0，而在PostGIS中返回NULL。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.7</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">已更改：2.0.0 之前的 PostGIS 版本允许ST_GeomFromText（“GEOMETRYCOLLECTION(EMPTY)”）。在 PostGIS 2.0.0 中，这是不正确的，因为它更符合 SQL/MM 标准</p></td></tr></table></div></div><div class="refsection" id="idm5514"><h2>示例</h2><pre class="programlisting">SELECT ST_IsEmpty(ST_GeomFromText('GEOMETRYCOLLECTION EMPTY'));
 st_isempty
------------
 t
(1 row)

 SELECT ST_IsEmpty(ST_GeomFromText('POLYGON EMPTY'));
 st_isempty
------------
 t
(1 row)

SELECT ST_IsEmpty(ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))'));

 st_isempty
------------
 f
(1 row)

 SELECT ST_IsEmpty(ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))')) = false;
 ?column?
----------
 t
(1 row)

 SELECT ST_IsEmpty(ST_GeomFromText('CIRCULARSTRING EMPTY'));
  st_isempty
------------
 t
(1 row)


                </pre></div></div><div class="refentry" id="ST_IsPolygonCCW"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsPolygonCCW  — 检测多边形是否具有逆时针方向的外环和顺时针方向的内环。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> boolean <strong class="fsfunc">ST_IsPolygonCCW</strong> (</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm5529"><h2>描述</h2><p>如果输入几何体的所有多边形元素对其外环使用逆时针方向，对所有内环使用顺时针方向，则返回 true。 </p><p>如果几何体没有多边形元素，则返回 true。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>闭合线串不被视为多边形元素。 如果传递单个闭合线串，则无论它是顺时针还是逆时针，都会得到 TRUE。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果多边形元素的内环未反转（即，有一个或多个内环以与外环相同的方向旋转），则ST_IsPolygonCW和ST_IsPolygonCCW都返回 FALSE。 </p></td></tr></table></div><p class="availability">可用性：2.4.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm5546"><h2>相关信息</h2><p><a class="xref" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a>, <a class="xref" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a>, <a class="xref" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a> </p></div></div><div class="refentry" id="ST_IsPolygonCW"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsPolygonCW  — 检测多边形是否具有顺时针外环和逆时针内环。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> boolean <strong class="fsfunc">ST_IsPolygonCW</strong> (</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm5564"><h2>描述</h2><p>如果输入几何体的所有多边形元素对其外环使用顺时针方向，对所有内环使用逆时针方向，则返回 true。 </p><p>如果几何体没有多边形元素，则返回 true。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>闭合线串不被视为多边形元素。 如果传递单个闭合线串，则无论它是顺时针还是逆时针，都会得到 TRUE。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果多边形元素的内环未反转（即，有一个或多个内环以与外环相同的方向旋转），则ST_IsPolygonCW和ST_IsPolygonCCW都返回 FALSE。 </p></td></tr></table></div><p class="availability">可用性：2.4.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm5581"><h2>相关信息</h2><p><a class="xref" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a>, <a class="xref" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a>, <a class="xref" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a> </p></div></div><div class="refentry" id="ST_IsRing"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsRing — 检测线串是闭合的还是简单的。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsRing</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm5599"><h2>描述</h2><p>返回 <code class="varname">TRUE</code>，当<code class="varname">LINESTRING</code> 同时满足 <a class="xref" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>（即 <code class="code">ST_StartPoint(g) ~= ST_Endpoint(g)</code>）和 <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>（即不自交）时。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  2.1.5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.1.6</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>SQL-MM 定义了 <code class="code">ST_IsRing(NULL)</code> 的结果为 0，而 PostGIS 返回 <code class="varname">NULL</code>。</p></td></tr></table></div></div><div class="refsection" id="idm5620"><h2>示例</h2><pre class="programlisting">SELECT ST_IsRing(geom), ST_IsClosed(geom), ST_IsSimple(geom)
FROM (SELECT 'LINESTRING(0 0, 0 1, 1 1, 1 0, 0 0)'::geometry AS geom) AS foo;
 st_isring | st_isclosed | st_issimple
-----------+-------------+-------------
 t         | t           | t
(1 row)

SELECT ST_IsRing(geom), ST_IsClosed(geom), ST_IsSimple(geom)
FROM (SELECT 'LINESTRING(0 0, 0 1, 1 0, 1 1, 0 0)'::geometry AS geom) AS foo;
 st_isring | st_isclosed | st_issimple
-----------+-------------+-------------
 f         | t           | f
(1 row)</pre></div><div class="refsection" id="idm5623"><h2>相关信息</h2><p><a class="xref" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>, <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>, <a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a></p></div></div><div class="refentry" id="ST_IsSimple"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsSimple — 检测几何体的自完整性或自接触点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsSimple</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm5642"><h2>描述</h2><p>如果此 Geometry 没有异常几何点（例如自相交或自相切），则返回 true。有关 OGC 对几何简单性和有效性定义的更多信息，请参阅<a class="link" href="#OGC_Validity" title="4.4. 几何有效性验证">"确保几何图形的OpenGIS合规性"</a></p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>SQL-MM 定义 ST_IsSimple(NULL) 的结果为 0，而 PostGIS 返回 NULL。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.8</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5661"><h2>示例</h2><pre class="programlisting">SELECT ST_IsSimple(ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))'));
 st_issimple
-------------
 f
(1 row)

 SELECT ST_IsSimple(ST_GeomFromText('LINESTRING(1 1,2 2,2 3.5,1 3,1 2,2 1)'));
 st_issimple
-------------
 f
(1 row)</pre></div><div class="refsection" id="idm5664"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a></p></div></div><div class="refentry" id="ST_M"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_M — 返回点的 M 值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_M</strong>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" id="idm5680"><h2>描述</h2><p>返回点的 M 坐标值，如果无效，则返回 NULL。 输入必须为点。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这还不是 OGC 规范的一部分，但在此处列出以完成点坐标提取器功能列表。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5698"><h2>示例</h2><pre class="programlisting">SELECT ST_M(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_m
------
        4
(1 row)

                </pre></div><div class="refsection" id="idm5701"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a></p></div></div><div class="refentry" id="ST_MemSize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MemSize — 返回几何图形占用的内存空间总量。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_MemSize</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm5720"><h2>描述</h2><p>返回几何图形占用的内存空间量（以字节为单位）。 </p><p>这补充了 PostgreSQL 内置 <a class="link" href="https://www.postgresql.org/docs/current/functions-admin.html#FUNCTIONS-ADMIN-DBOBJECT" target="_top">数据库 对象函数</a> pg_column_size、pg_size_pretty、pg_relation_size、pg_total_relation_size。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>给出表的字节大小的 pg_relation_size 可能返回小于 ST_MemSize 的字节大小。 这是因为 pg_relation_size 不会添加 toasted 表贡献，并且大型几何图形存储在 TOAST 表中。</p><p>pg_total_relation_size - 包括表、压缩表和索引。</p><p>pg_column_size 返回考虑到压缩，几何图形在列中占用多少空间，因此可能低于 ST_MemSize</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p class="changed">更改：2.2.0 名称更改为 ST_MemSize 以遵循命名约定。</p></div><div class="refsection" id="idm5746"><h2>示例</h2><pre class="programlisting">--Return how much byte space Boston takes up  in our Mass data set
SELECT pg_size_pretty(SUM(ST_MemSize(geom))) as totgeomsum,
pg_size_pretty(SUM(CASE WHEN town = 'BOSTON' THEN ST_MemSize(geom) ELSE 0 END)) As bossum,
CAST(SUM(CASE WHEN town = 'BOSTON' THEN ST_MemSize(geom) ELSE 0 END)*1.00 /
                SUM(ST_MemSize(geom))*100 As numeric(10,2)) As perbos
FROM towns;

totgeomsum        bossum        perbos
----------        ------        ------
1522 kB                30 kB        1.99


SELECT ST_MemSize(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'));

---
73

--What percentage of our table is taken up by just the geometry
SELECT pg_total_relation_size('public.neighborhoods') As fulltable_size, sum(ST_MemSize(geom)) As geomsize,
sum(ST_MemSize(geom))*1.00/pg_total_relation_size('public.neighborhoods')*100 As pergeom
FROM neighborhoods;
fulltable_size geomsize  pergeom
------------------------------------------------
262144         96238         36.71188354492187500000
        </pre></div></div><div class="refentry" id="ST_NDims"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NDims — 返回几何体的坐标维度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NDims</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm5761"><h2>描述</h2><p>返回几何体的坐标维度。PostGIS 支持 2 - (x,y) 、3 - (x,y,z) 或 2D 测量 - x,y,m 和 4 - 3D 测量空间 x,y,z,m</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm5768"><h2>示例</h2><pre class="programlisting">SELECT ST_NDims(ST_GeomFromText('POINT(1 1)')) As d2point,
        ST_NDims(ST_GeomFromEWKT('POINT(1 1 2)')) As d3point,
        ST_NDims(ST_GeomFromEWKT('POINTM(1 1 0.5)')) As d2pointm;

         d2point | d3point | d2pointm
---------+---------+----------
           2 |       3 |        3
                        </pre></div><div class="refsection" id="idm5771"><h2>相关信息</h2><p><a class="xref" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" id="ST_NPoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NPoints — 返回几何图形中的点数（顶点）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NPoints</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm5789"><h2>描述</h2><p>返回几何图形中的点数。 适用于所有几何形状。</p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm5807"><h2>示例</h2><pre class="programlisting">SELECT ST_NPoints(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
--result
4

--Polygon in 3D space
SELECT ST_NPoints(ST_GeomFromEWKT('LINESTRING(77.29 29.07 1,77.42 29.26 0,77.27 29.31 -1,77.29 29.07 3)'))
--result
4</pre></div><div class="refsection" id="idm5810"><h2>相关信息</h2><p><a class="xref" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a></p></div></div><div class="refentry" id="ST_NRings"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NRings — 返回多边形几何中的环数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NRings</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm5826"><h2>描述</h2><p>如果几何图形是多边形或多多边形，则返回环数。 与NumInteriorRings不同，它还计算外环。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm5837"><h2>示例</h2><pre class="programlisting">SELECT ST_NRings(geom) As Nrings, ST_NumInteriorRings(geom) As ninterrings
                                        FROM (SELECT ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))') As geom) As foo;
         nrings | ninterrings
--------+-------------
          1 |           0
(1 row)
</pre></div><div class="refsection" id="idm5840"><h2>相关信息</h2><p><a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a></p></div></div><div class="refentry" id="ST_NumGeometries"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumGeometries — 返回几何集合中的元素数量。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumGeometries</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm5856"><h2>描述</h2><p>该函数返回几何集合（GEOMETRYCOLLECTION 或 MULTI*）中的元素数量。对于非空的原子几何体，它返回 1。对于空的几何体，它返回 0。 </p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="changed">更改：2.0.0 在之前的版本中，如果几何图形不是collection/MULTI 类型，则会返回 NULL。 2.0.0 现在对于单个几何图形返回 1，例如 POLYGON、LINESTRING、POINT。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 9.1.4</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm5877"><h2>示例</h2><pre class="programlisting">--Prior versions would have returned NULL for this -- in 2.0.0 this returns 1
SELECT ST_NumGeometries(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
--result
1

--Geometry Collection Example - multis count as one geom in a collection
SELECT ST_NumGeometries(ST_GeomFromEWKT('GEOMETRYCOLLECTION(MULTIPOINT((-2 3),(-2 2)),
LINESTRING(5 5 ,10 10),
POLYGON((-7 4.2,-7.1 5,-7.1 4.3,-7 4.2)))'));
--result
3
</pre></div><div class="refsection" id="idm5880"><h2>相关信息</h2><p><a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a></p></div></div><div class="refentry" id="ST_NumInteriorRings"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumInteriorRings — 返回多边形的内环（孔）数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumInteriorRings</strong>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" id="idm5897"><h2>描述</h2><p>返回多边形几何体的内环数。 如果几何图形不是多边形，则返回 NULL。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.2.5</p><p class="changed">更改：2.0.0 - 在之前的版本中，它允许传递 MULTIPOLYGON，返回第一个 POLYGON 的内环数量。</p></div><div class="refsection" id="idm5905"><h2>示例</h2><pre class="programlisting">--If you have a regular polygon
SELECT gid, field1, field2, ST_NumInteriorRings(geom) AS numholes
FROM sometable;

--If you have multipolygons
--And you want to know the total number of interior rings in the MULTIPOLYGON
SELECT gid, field1, field2, SUM(ST_NumInteriorRings(geom)) AS numholes
FROM (SELECT gid, field1, field2, (ST_Dump(geom)).geom As geom
        FROM sometable) As foo
GROUP BY gid, field1,field2;
                        </pre></div><div class="refsection" id="idm5908"><h2>相关信息</h2><p><a class="xref" href="#ST_NumInteriorRing" title="ST_NumInteriorRing">ST_NumInteriorRing</a>, <a class="xref" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a></p></div></div><div class="refentry" id="ST_NumInteriorRing"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumInteriorRing — 返回多边形的内环（孔）数。ST_NumInteriorRings的别名</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumInteriorRing</strong>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" id="idm5925"><h2>相关信息</h2><p><a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>, <a class="xref" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a></p></div></div><div class="refentry" id="ST_NumPatches"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumPatches — 返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumPatches</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm5942"><h2>描述</h2><p>返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。 这是 ST_NumGeometries 的别名，用于支持 MM 命名。 如果您不关心 MM 约定，则使用 ST_NumGeometries 会更快。</p><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM ISO/IEC 13249-3: 8.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm5963"><h2>示例</h2><pre class="programlisting">SELECT ST_NumPatches(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
                --result
                6
                </pre></div><div class="refsection" id="idm5966"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" id="ST_NumPoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumPoints — 返回 LineString 或 CircularString 中的点数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumPoints</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm5983"><h2>描述</h2><p>返回 ST_LineString 或 ST_CircularString 值中的点数。 1.4 之前的版本仅适用于规范规定的线串。从 1.4 开始，这是 ST_NPoints 的别名，它不仅返回线串的顶点数，考虑使用 ST_NPoints，它是多用途的并且适用于许多几何类型。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.2.4</p></div><div class="refsection" id="idm5995"><h2>示例</h2><pre class="programlisting">SELECT ST_NumPoints(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
                --result
                4
                </pre></div><div class="refsection" id="idm5998"><h2>相关信息</h2><p><a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a></p></div></div><div class="refentry" id="ST_PatchN"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PatchN — 返回多边形曲面（PolyhedralSurface）的第 N 个几何体（面）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PatchN</strong>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" id="idm6017"><h2>描述</h2><p>如果几何体是 POLYHEDRALSURFACE 或 POLYHEDRALSURFACEM，则返回从 1 开始的第 N 个几何体（面）。否则，返回 NULL。这将返回与多面体曲面的 ST_GeometryN 相同的答案。 使用 ST_GeometryN 速度更快。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>索引从1开始。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果要提取几何图形的所有元素，<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 效率更高。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM ISO/IEC 13249-3: 8.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm6038"><h2>示例</h2><pre class="programlisting">--Extract the 2nd face of the polyhedral surface
SELECT ST_AsEWKT(ST_PatchN(geom, 2)) As geomewkt
FROM (
VALUES (ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
        ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
        ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
        ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )')) ) As foo(geom);

              geomewkt
---+-----------------------------------------
 POLYGON((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0))
</pre></div><div class="refsection" id="idm6041"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" id="ST_PointN"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointN — 返回几何图形中第一个线串或圆形线串中的第 N 个点。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointN</strong>(</code>geometry  <var class="pdparam">a_linestring</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" id="idm6064"><h2>描述</h2><p>返回几何图形中单个线串或圆形线串中的第 N 个点。负值从 LineString 末尾开始向后计数，因此 -1 是最后一个点。如果几何图形中没有线串，则返回 NULL。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>自版本 0.8.0 以来，OGC 规范的索引从 1 开始。 OGC 中没有向后索引（负索引），以前的版本将其实现为基于 0。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果要获取 MultiLineString 中每个 LineString 的第 N 个点，请与 ST_Dump 结合使用</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.2.5, 7.3.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 不再适用于单个几何multilinestrings。 在旧版本的 PostGIS 中——单行 multilinestring可以与此函数很好地配合并返回起点。 在 2.0.0 中，它像任何其他 multilinestring一样只返回 NULL。</p><p class="changed">更改：2.3.0：负索引可用（-1 是最后一点） </p></td></tr></table></div></div><div class="refsection" id="idm6091"><h2>示例</h2><pre class="programlisting">-- Extract all POINTs from a LINESTRING
SELECT ST_AsText(
   ST_PointN(
          column1,
          generate_series(1, ST_NPoints(column1))
   ))
FROM ( VALUES ('LINESTRING(0 0, 1 1, 2 2)'::geometry) ) AS foo;

 st_astext
------------
 POINT(0 0)
 POINT(1 1)
 POINT(2 2)
(3 rows)

--Example circular string
SELECT ST_AsText(ST_PointN(ST_GeomFromText('CIRCULARSTRING(1 2, 3 2, 1 2)'), 2));

 st_astext
------------
 POINT(3 2)
(1 row)

SELECT ST_AsText(f)
FROM ST_GeomFromText('LINESTRING(0 0 0, 1 1 1, 2 2 2)') AS g
  ,ST_PointN(g, -2) AS f; -- 1 based index

    st_astext
-----------------
 POINT Z (1 1 1)
(1 row)

</pre></div><div class="refsection" id="idm6094"><h2>相关信息</h2><p><a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a></p></div></div><div class="refentry" id="ST_Points"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Points — 返回包含几何坐标的 MultiPoint。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Points</strong>(</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm6110"><h2>描述</h2><p>返回包含几何体所有坐标的 MultiPoint。 保留重复点，包括环几何形状的起点和终点。（如果需要，可以通过对结果调用<a class="xref" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>来删除重复点）。 </p><p>要获取有关父几何体中每个坐标的位置的信息，请使用 <a class="xref" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a>。 </p><p>如果存在，则保留 M 和 Z 值。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm6126"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_Points('POLYGON Z ((30 10 4,10 30 5,40 40 6, 30 10))'));

--result
MULTIPOINT Z ((30 10 4),(10 30 5),(40 40 6),(30 10 4))
                        </pre></div><div class="refsection" id="idm6129"><h2>相关信息</h2><p><a class="xref" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>, <a class="xref" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a></p></div></div><div class="refentry" id="ST_StartPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_StartPoint — 返回 LineString 的第一个点.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_StartPoint</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm6146"><h2>描述</h2><p>返回<code class="varname">LINESTRING</code> 或 <code class="varname">CIRCULARLINESTRING</code> 几何图形的第一个点作为<code class="varname">POINT</code>。 如果输入不是<code class="varname">LINESTRING</code> 或 <code class="varname">CIRCULARLINESTRING</code>，则返回 <code class="varname">NULL</code>。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.2.0 返回所有几何图形的点。 如果输入不是 LineString，则先前的行为将返回 NULL。</p><p class="changed">更改：2.0.0 不再适用于单个几何体 MultiLineStrings。 在旧版本的 PostGIS 中，单行 MultiLineString 可以与此函数很好地配合并返回起点。 在 2.0.0 中，它像任何其他 MultiLineString 一样只返回 NULL。 旧的行为是一个未记录的功能，但是那些假设将数据存储为 LINESTRING 的人可能会在 2.0.0 中遇到这些返回 NULL 的情况。</p></td></tr></table></div></div><div class="refsection" id="idm6170"><h2>示例</h2><p>LineString起点</p><pre class="programlisting">SELECT ST_AsText(ST_StartPoint('LINESTRING(0 1, 0 2)'::geometry));
 st_astext
------------
 POINT(0 1)
</pre><p>非LineString的起点为NULL</p><pre class="programlisting">SELECT ST_StartPoint('POINT(0 1)'::geometry) IS NULL AS is_null;
  is_null
----------
 t
</pre><p>3D LineString起点</p><pre class="programlisting">SELECT ST_AsEWKT(ST_StartPoint('LINESTRING(0 1 1, 0 2 2)'::geometry));
 st_asewkt
------------
 POINT(0 1 1)
</pre><p>CircularString起点</p><pre class="programlisting">SELECT ST_AsText(ST_StartPoint('CIRCULARSTRING(5 2,-3 1.999999, -2 1, -4 2, 6 3)'::geometry));
 st_astext
------------
 POINT(5 2)
</pre></div><div class="refsection" id="idm6180"><h2>相关信息</h2><p><a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>, <a class="xref" href="#ST_PointN" title="ST_PointN">ST_PointN</a></p></div></div><div class="refentry" id="ST_Summary"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Summary — 返回几何内容的文本摘要。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_Summary</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_Summary</strong>(</code>geography  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm6203"><h2>描述</h2><p>返回几何内容的文本摘要。</p><p>几何类型后方括号中显示的标志具有以下含义： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>M：具有M轴</p></li><li class="listitem"><p>Z：具有 Z 轴</p></li><li class="listitem"><p>B：有一个边界框</p></li><li class="listitem"><p>G：大地坐标系（地理）</p></li><li class="listitem"><p>S：具有空间参考系统</p></li></ul></div><p>
                </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p class="availability">可用性：1.2.2</p><p class="enhanced">增强：在 2.0.0 中添加了地理支持</p><p class="enhanced">增强：添加了 S 标志以指示其是否具有 2.1.0 空间参考系统</p><p class="enhanced">增强：添加了对 2.2.0 TIN 和曲线的支持</p></div><div class="refsection" id="idm6234"><h2>示例</h2><pre class="programlisting">=# SELECT ST_Summary(ST_GeomFromText('LINESTRING(0 0, 1 1)')) as geom,
        ST_Summary(ST_GeogFromText('POLYGON((0 0, 1 1, 1 2, 1 1, 0 0))')) geog;
            geom             |          geog
-----------------------------+--------------------------
 LineString[B] with 2 points | Polygon[BGS] with 1 rings
                             | ring 0 has 5 points
                             :
(1 row)


=# SELECT ST_Summary(ST_GeogFromText('LINESTRING(0 0 1, 1 1 1)')) As geog_line,
        ST_Summary(ST_GeomFromText('SRID=4326;POLYGON((0 0 1, 1 1 2, 1 2 3, 1 1 1, 0 0 1))')) As geom_poly;
;
           geog_line             |        geom_poly
-------------------------------- +--------------------------
 LineString[ZBGS] with 2 points | Polygon[ZBS] with 1 rings
                                :    ring 0 has 5 points
                                :
(1 row)

</pre></div><div class="refsection" id="idm6237"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a>, <a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#geography" title="geography">geography</a> </p><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>, <a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a> </p></div></div><div class="refentry" id="ST_X"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_X — 返回点的 X 坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_X</strong>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" id="idm6263"><h2>描述</h2><p>返回点的 X 坐标值，如果无效，则返回 NULL。 输入必须为点。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要获取几何图形的最小和最大 X 值，请使用<a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>和<a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>函数。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 6.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm6278"><h2>示例</h2><pre class="programlisting">SELECT ST_X(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_x
------
        1
(1 row)

SELECT ST_Y(ST_Centroid(ST_GeomFromEWKT('LINESTRING(1 2 3 4, 1 1 1 1)')));
 st_y
------
  1.5
(1 row)

                </pre></div><div class="refsection" id="idm6281"><h2>相关信息</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a></p></div></div><div class="refentry" id="ST_Y"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Y — 返回点的Y坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Y</strong>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" id="idm6303"><h2>描述</h2><p>返回点的 Y 坐标值，如果无效，则返回 NULL。 输入必须为点。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要获取几何图形的最小和最大 Y 值，请使用<a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>和<a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>函数。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 6.1.4</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm6323"><h2>示例</h2><pre class="programlisting">SELECT ST_Y(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_y
------
        2
(1 row)

SELECT ST_Y(ST_Centroid(ST_GeomFromEWKT('LINESTRING(1 2 3 4, 1 1 1 1)')));
 st_y
------
  1.5
(1 row)


                </pre></div><div class="refsection" id="idm6326"><h2>相关信息</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a></p></div></div><div class="refentry" id="ST_Z"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Z — 返回点的Z坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Z</strong>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" id="idm6348"><h2>描述</h2><p>返回点的 Z 坐标值，如果无效，则返回 NULL。 输入必须为点。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要获取几何图形的最小和最大 Z 值，请使用<a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a>和<a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>函数。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm6363"><h2>示例</h2><pre class="programlisting">SELECT ST_Z(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_z
------
        3
(1 row)

                </pre></div><div class="refsection" id="idm6366"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> </p></div></div><div class="refentry" id="ST_Zmflag"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Zmflag — 返回指示几何体的 ZM 坐标维度的代码。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">smallint <strong class="fsfunc">ST_Zmflag</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm6387"><h2>描述</h2><p>返回指示几何体的 ZM 坐标维度的代码。 </p><p>值为 0=XY、1=XYM、2=XYZ、3=XYZM。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm6399"><h2>示例</h2><pre class="programlisting">SELECT ST_Zmflag(ST_GeomFromEWKT('LINESTRING(1 2, 3 4)'));
 st_zmflag
-----------
                 0

SELECT ST_Zmflag(ST_GeomFromEWKT('LINESTRINGM(1 2 3, 3 4 3)'));
 st_zmflag
-----------
                 1

SELECT ST_Zmflag(ST_GeomFromEWKT('CIRCULARSTRING(1 2 3, 3 4 3, 5 6 3)'));
 st_zmflag
-----------
                 2
SELECT ST_Zmflag(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_zmflag
-----------
                 3
</pre></div><div class="refsection" id="idm6402"><h2>相关信息</h2><p><a class="xref" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a>, <a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a></p></div></div><div class="refentry" id="ST_HasZ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HasZ — 检查几何体是否具有 Z 维度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_HasZ</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm6420"><h2>描述</h2><p>检查输入几何体是否具有 Z维度并返回布尔值。 如果几何体有 Z 维度，则返回 true； 否则，返回 false。</p><p>具有 Z 维度的几何对象通常表示三维 (3D) 几何图形，而没有 Z 维度的几何对象则表示二维 (2D) 几何图形。</p><p>此函数对于确定几何图形是否具有高程或高度信息非常有用。</p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm6434"><h2>示例</h2><pre class="programlisting">SELECT ST_HasZ(ST_GeomFromText('POINT(1 2 3)'));
 --result
 true
</pre><pre class="programlisting">SELECT ST_HasZ(ST_GeomFromText('LINESTRING(0 0, 1 1)'));
 --result
 false
</pre></div><div class="refsection" id="idm6438"><h2>相关信息</h2><p><a class="xref" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a></p><p><a class="xref" href="#ST_HasM" title="ST_HasM">ST_HasM</a></p></div></div><div class="refentry" id="ST_HasM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HasM — 检查几何体是否具有 M（测量）维度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_HasM</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm6456"><h2>描述</h2><p>检查输入几何图形是否具有 M（度量）维度并返回布尔值。 如果几何体具有 M 维度，则返回 true； 否则，返回 false。</p><p>具有 M 维度的几何对象通常表示与空间特征相关的测量值或附加数据。</p><p>此函数对于确定几何图形是否包含测量信息非常有用。</p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm6470"><h2>示例</h2><pre class="programlisting">SELECT ST_HasM(ST_GeomFromText('POINTM(1 2 3)'));
 --result
 true
</pre><pre class="programlisting">SELECT ST_HasM(ST_GeomFromText('LINESTRING(0 0, 1 1)'));
 --result
 false
</pre></div><div class="refsection" id="idm6474"><h2>相关信息</h2><p><a class="xref" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a></p><p><a class="xref" href="#ST_HasZ" title="ST_HasZ">ST_HasZ</a></p></div></div></section><section class="section" id="Geometry_Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.5. 几何编辑器</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数通过更改类型、结构或顶点来创建修改后的几何图形。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_AddPoint">ST_AddPoint</a></span><span class="refpurpose"> — 将点添加到线串（LineString）。</span></li><li><span class="refentrytitle"><a href="#ST_CollectionExtract">ST_CollectionExtract</a></span><span class="refpurpose"> — 给定一个几何集合，返回仅包含指定类型元素的多几何图形。 </span></li><li><span class="refentrytitle"><a href="#ST_CollectionHomogenize">ST_CollectionHomogenize</a></span><span class="refpurpose"> — 返回几何集合的最简单表示。 </span></li><li><span class="refentrytitle"><a href="#ST_CurveToLine">ST_CurveToLine</a></span><span class="refpurpose"> — 将包含曲线的几何图形转换为线性几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_Scroll">ST_Scroll</a></span><span class="refpurpose"> — 更改闭合线串的起点。</span></li><li><span class="refentrytitle"><a href="#ST_FlipCoordinates">ST_FlipCoordinates</a></span><span class="refpurpose"> — 返回 X 轴和 Y 轴转换的几何图形版本。 </span></li><li><span class="refentrytitle"><a href="#ST_Force2D">ST_Force2D</a></span><span class="refpurpose"> — 强制几何图形进入“二维模式”。</span></li><li><span class="refentrytitle"><a href="#ST_Force_3D">ST_Force3D</a></span><span class="refpurpose"> — 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</span></li><li><span class="refentrytitle"><a href="#ST_Force_3DZ">ST_Force3DZ</a></span><span class="refpurpose"> — 强制几何图形进入 XYZ 模式。</span></li><li><span class="refentrytitle"><a href="#ST_Force_3DM">ST_Force3DM</a></span><span class="refpurpose"> — 强制几何图形进入 XYM 模式。</span></li><li><span class="refentrytitle"><a href="#ST_Force_4D">ST_Force4D</a></span><span class="refpurpose"> — 强制几何图形进入XYZM模式。 </span></li><li><span class="refentrytitle"><a href="#ST_Force_Collection">ST_ForceCollection</a></span><span class="refpurpose"> — 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</span></li><li><span class="refentrytitle"><a href="#ST_ForceCurve">ST_ForceCurve</a></span><span class="refpurpose"> — 如果适用，将一个几何图形上升到其曲线类型。</span></li><li><span class="refentrytitle"><a href="#ST_ForcePolygonCCW">ST_ForcePolygonCCW </a></span><span class="refpurpose"> — 将所有外环逆时针定向，将所有内环顺时针定向。 </span></li><li><span class="refentrytitle"><a href="#ST_ForcePolygonCW">ST_ForcePolygonCW </a></span><span class="refpurpose"> — 顺时针方向调整所有外环，逆时针方向调整所有内环。 </span></li><li><span class="refentrytitle"><a href="#ST_ForceSFS">ST_ForceSFS</a></span><span class="refpurpose"> — 强制几何图形仅使用 SFS 1.1 几何类型。</span></li><li><span class="refentrytitle"><a href="#ST_ForceRHR">ST_ForceRHR</a></span><span class="refpurpose"> — 强制多边形顶点的方向遵循右手定则。</span></li><li><span class="refentrytitle"><a href="#ST_LineExtend">ST_LineExtend</a></span><span class="refpurpose"> — 返回一条线，向前和向后延伸指定的距离。</span></li><li><span class="refentrytitle"><a href="#ST_LineToCurve">ST_LineToCurve</a></span><span class="refpurpose"> — 将线性几何图形转换为曲线几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_Multi">ST_Multi</a></span><span class="refpurpose"> — 将几何图形返回为 MULTI* 几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_Normalize">ST_Normalize</a></span><span class="refpurpose"> — 返回规范形式的几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_Project">ST_Project</a></span><span class="refpurpose"> — 返回从起点按距离和方位角（方位角）投影的点。</span></li><li><span class="refentrytitle"><a href="#ST_QuantizeCoordinates">ST_QuantizeCoordinates </a></span><span class="refpurpose"> — 将坐标的最低有效位设置为零 </span></li><li><span class="refentrytitle"><a href="#ST_RemovePoint">ST_RemovePoint</a></span><span class="refpurpose"> — 从线串中删除一个点。</span></li><li><span class="refentrytitle"><a href="#ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a></span><span class="refpurpose"> — 返回删除了重复点的几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_RemoveIrrelevantPointsForView">ST_RemoveIrrelevantPointsForView</a></span><span class="refpurpose"> — Removes points that are irrelevant for rendering a specific rectangluar view of a geometry.</span></li><li><span class="refentrytitle"><a href="#ST_RemoveSmallParts">ST_RemoveSmallParts</a></span><span class="refpurpose"> — Removes small parts (polygon rings or linestrings) of a geometry.</span></li><li><span class="refentrytitle"><a href="#ST_Reverse">ST_Reverse</a></span><span class="refpurpose"> — 返回顶点顺序相反的几何体。</span></li><li><span class="refentrytitle"><a href="#ST_Segmentize">ST_Segmentize</a></span><span class="refpurpose"> — 返回修改后的几何图形/地理，其线段不长于给定距离。</span></li><li><span class="refentrytitle"><a href="#ST_SetPoint">ST_SetPoint</a></span><span class="refpurpose"> — 用给定点替换线串的点。</span></li><li><span class="refentrytitle"><a href="#ST_ShiftLongitude">ST_ShiftLongitude</a></span><span class="refpurpose"> — 在 -180-180 和 0-360 之间移动几何图形的经度坐标。</span></li><li><span class="refentrytitle"><a href="#ST_WrapX">ST_WrapX</a></span><span class="refpurpose"> — 将几何体环绕在 X 值周围。</span></li><li><span class="refentrytitle"><a href="#ST_SnapToGrid">ST_SnapToGrid</a></span><span class="refpurpose"> — 将输入几何体的所有点捕捉到规则网格。 </span></li><li><span class="refentrytitle"><a href="#ST_Snap">ST_Snap</a></span><span class="refpurpose"> — 将输入几何体的线段和顶点捕捉到参考几何体的顶点。 </span></li><li><span class="refentrytitle"><a href="#ST_SwapOrdinates">ST_SwapOrdinates</a></span><span class="refpurpose"> — 返回更改后的几何图形，其中交换了给定的坐标值。 </span></li></ul></div><div class="refentry" id="ST_AddPoint"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddPoint — 将点添加到线串（LineString）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_AddPoint</strong>(</code>geometry <var class="pdparam">linestring</var>, geometry <var class="pdparam">point</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_AddPoint</strong>(</code>geometry <var class="pdparam">linestring</var>, geometry <var class="pdparam">point</var>, integer <var class="pdparam">position = -1</var><code>)</code>;</p></div></div><div class="refsection" id="idm6513"><h2>描述</h2><p>在索引<em class="parameter"><code>position</code></em>之前向LineString 添加一个点（使用从 0 开始的索引）。如果<em class="parameter"><code>position</code></em>参数被省略或为 -1，则该点将附加到 LineString 的末尾。</p><p class="availability">可用性：1.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm6523"><h2>示例</h2><p>在 3D 线的末尾添加一个点</p><pre class="programlisting">SELECT ST_AsEWKT(ST_AddPoint('LINESTRING(0 0 1, 1 1 1)', ST_MakePoint(1, 2, 3)));

    st_asewkt
    ----------
    LINESTRING(0 0 1,1 1 1,1 2 3)
</pre><p>仅对于表中那些未闭合的线，通过将每条线的起点添加到线的末尾来保证表中的所有线都是闭合的。 </p><pre class="programlisting">UPDATE sometable
SET geom = ST_AddPoint(geom, ST_StartPoint(geom))
FROM sometable
WHERE ST_IsClosed(geom) = false;
</pre></div><div class="refsection" id="idm6529"><h2>相关信息</h2><p><a class="xref" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a>, <a class="xref" href="#ST_SetPoint" title="ST_SetPoint">ST_SetPoint</a></p></div></div><div class="refentry" id="ST_CollectionExtract"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CollectionExtract — 给定一个几何集合，返回仅包含指定类型元素的多几何图形。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CollectionExtract</strong>(</code>geometry  <var class="pdparam">collection</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CollectionExtract</strong>(</code>geometry  <var class="pdparam">collection</var>, integer  <var class="pdparam">type</var><code>)</code>;</p></div></div><div class="refsection" id="idm6556"><h2>描述</h2><p>给定一个几何集合，返回同种类型多几何。</p><p>如果未指定<em class="parameter"><code>类型</code></em>，则返回仅包含最高维度几何的多几何。 因此，多边形优先于线，线优先于点。 </p><p>如果指定了<em class="parameter"><code>类型</code></em>，则返回仅包含指定类型的多几何。 如果没有指定类型的元素，则返回 EMPTY 几何图形。 仅支持点、线和面。 类型编号如下：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1 == POINT</p></li><li class="listitem"><p>2 == LINESTRING</p></li><li class="listitem"><p>3 == POLYGON</p></li></ul></div><p>对于基本几何输入，如果输入类型与请求的类型匹配，则几何图形将保持不变返回。 否则，结果是指定类型的空几何图形。 如果需要，可以使用 <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a> 将它们转换为多几何图形。 </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不检查 MultiPolygon 结果的有效性。 如果多边形组件相邻或重叠，则结果将无效。（例如，将此函数应用于 <a class="xref" href="#ST_Split" title="ST_Split">ST_Split</a>结果时可能会发生这种情况。）可以使用 <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a> 检查这种情况并使用<a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> 修复。 </p></td></tr></table></div><p class="availability">可用性：1.1.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.5.3 之前，无论类型如何，该函数都会返回同种类型的基本几何输入。在 1.5.3 中，不匹配的单个几何图形返回 NULL 结果。 在 2.0.0 中，不匹配的单个几何图形返回请求类型的 EMPTY 结果。 </p></td></tr></table></div></div><div class="refsection" id="idm6580"><h2>示例</h2><p>提取最大维度类型：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionExtract(
        'GEOMETRYCOLLECTION( POINT(0 0), LINESTRING(1 1, 2 2) )'));
    st_astext
    ---------------
    MULTILINESTRING((1 1, 2 2))
</pre><p>提取点（type 1 == POINT）：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionExtract(
        'GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(POINT(0 0)))',
        1 ));
    st_astext
    ---------------
    MULTIPOINT((0 0))
</pre><p>提取线（type 2 == LINESTRING）：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionExtract(
        'GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(LINESTRING(0 0, 1 1)),LINESTRING(2 2, 3 3))',
        2 ));
    st_astext
    ---------------
    MULTILINESTRING((0 0, 1 1), (2 2, 3 3))
</pre></div><div class="refsection" id="idm6588"><h2>相关信息</h2><p><a class="xref" href="#ST_CollectionHomogenize" title="ST_CollectionHomogenize">ST_CollectionHomogenize</a>, <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> </p></div></div><div class="refentry" id="ST_CollectionHomogenize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CollectionHomogenize — 返回几何集合的最简单表示。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CollectionHomogenize</strong>(</code>geometry  <var class="pdparam">collection</var><code>)</code>;</p></div></div><div class="refsection" id="idm6607"><h2>描述</h2><p>给定几何集合，它返回“最简单”的表示形式。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>同质集合将以适当的多几何体形式返回。</p></li><li class="listitem"><p>混合类型集合将转换为单个平面几何集合。</p></li><li class="listitem"><p>包含单个基本元素的集合将作为该元素返回。</p></li><li class="listitem"><p>基本几何形状返回不变。如果需要，可以使用<a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>将它们转换为多几何图形。</p></li></ul></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不保证结果有效。特别是，包含相邻或重叠多边形的集合将创建无效的多多边形。这种情况可以使用<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>检查并使用<a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>修复。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm6625"><h2>示例</h2><p>单个元素集合转为基本集合</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION(POINT(0 0))'));

        st_astext
        ------------
        POINT(0 0)
</pre><p>将嵌套的单元素集合转换为基本几何：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION(MULTIPOINT((0 0)))'));

        st_astext
        ------------
        POINT(0 0)
</pre><p>集合转换为多几何图形：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION(POINT(0 0),POINT(1 1))'));

        st_astext
        ---------------------
        MULTIPOINT((0 0),(1 1))
</pre><p>将嵌套混合类型集合转换为平面几何集合：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION(POINT(0 0), GEOMETRYCOLLECTION( LINESTRING(1 1, 2 2)))'));

        st_astext
        ---------------------
        GEOMETRYCOLLECTION(POINT(0 0),LINESTRING(1 1,2 2))
</pre><p>将多边形集合转换为（无效的）多多边形：</p><pre class="programlisting">SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION (POLYGON ((10 50, 50 50, 50 10, 10 10, 10 50)), POLYGON ((90 50, 90 10, 50 10, 50 50, 90 50)))'));

        st_astext
        ---------------------
        MULTIPOLYGON(((10 50,50 50,50 10,10 10,10 50)),((90 50,90 10,50 10,50 50,90 50)))
</pre></div><div class="refsection" id="idm6637"><h2>相关信息</h2><p><a class="xref" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a>, <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a></p></div></div><div class="refentry" id="ST_CurveToLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CurveToLine — 将包含曲线的几何图形转换为线性几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CurveToLine</strong>(</code>geometry <var class="pdparam">curveGeom</var>, float <var class="pdparam">tolerance</var>, integer <var class="pdparam">tolerance_type</var>, integer <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" id="idm6665"><h2>描述</h2><p>将 CIRCULAR STRING 转换为常规 LINESTRING，或将 CURVEPOLYGON 转换为 POLYGON，或将 MULTISURFACE 转换为 MULTIPOLYGON。 对于输出到不支持 CIRCULARSTRING 几何类型的设备很有用</p><p>将给定几何图形转换为线性几何图形。 使用给定的“公差”和选项（每个象限（一个圆的四个部分）32 个线段，默认情况下没有选项）将每个弯曲几何图形或线段转换为线性近似值。</p><p>“tolerance_type”参数决定“tolerance”参数的解释。它可以采用以下值： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0（默认）：公差是四分之一圆的最大边数。</p></li><li class="listitem"><p>1：公差是从曲线到直线的最大差值。 单位是输入几何的单位。</p></li><li class="listitem"><p>2：公差是由半径形成的角度的最大值（以弧度为单位）。</p></li></ul></div><p>
    </p><p>'flags' 参数是一个位字段。 默认为 0。 支持的位有： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1：对称（与方向无关）输出。</p></li><li class="listitem"><p>2：保留角度，避免在产生对称输出时减少角度（线段长度）， 对称标志关闭时无效。</p></li></ul></div><p>
    </p><p class="availability">可用性：1.3.0</p><p class="enhanced">增强：2.4.0 支持最大距离差公差和最大角度公差，支持对称输出。</p><p class="enhanced">增强：3.0.0 实现了每弧的最小线性分数。 防止拓扑崩溃。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.1.7</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm6703"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_CurveToLine(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)')));

--Result --
 LINESTRING(220268 150415,220269.95064912 150416.539364228,220271.823415575 150418.17258804,220273.613787707 150419.895736857,
 220275.317452352 150421.704659462,220276.930305234 150423.594998003,220278.448460847 150425.562198489,
 220279.868261823 150427.60152176,220281.186287736 150429.708054909,220282.399363347 150431.876723113,
 220283.50456625 150434.10230186,220284.499233914 150436.379429536,220285.380970099 150438.702620341,220286.147650624 150441.066277505,
 220286.797428488 150443.464706771,220287.328738321 150445.892130112,220287.740300149 150448.342699654,
 220288.031122486 150450.810511759,220288.200504713 150453.289621251,220288.248038775 150455.77405574,
 220288.173610157 150458.257830005,220287.977398166 150460.734960415,220287.659875492 150463.199479347,
 220287.221807076 150465.64544956,220286.664248262 150468.066978495,220285.988542259 150470.458232479,220285.196316903 150472.81345077,
 220284.289480732 150475.126959442,220283.270218395 150477.39318505,220282.140985384 150479.606668057,
 220280.90450212 150481.762075989,220279.5637474 150483.85421628,220278.12195122 150485.87804878,
 220276.582586992 150487.828697901,220274.949363179 150489.701464356,220273.226214362 150491.491836488,
 220271.417291757 150493.195501133,220269.526953216 150494.808354014,220267.559752731 150496.326509628,
 220265.520429459 150497.746310603,220263.41389631 150499.064336517,220261.245228106 150500.277412127,
 220259.019649359 150501.38261503,220256.742521683 150502.377282695,220254.419330878 150503.259018879,
 220252.055673714 150504.025699404,220249.657244448 150504.675477269,220247.229821107 150505.206787101,
 220244.779251566 150505.61834893,220242.311439461 150505.909171266,220239.832329968 150506.078553494,
 220237.347895479 150506.126087555,220234.864121215 150506.051658938,220232.386990804 150505.855446946,
 220229.922471872 150505.537924272,220227.47650166 150505.099855856,220225.054972724 150504.542297043,
 220222.663718741 150503.86659104,220220.308500449 150503.074365683,
 220217.994991777 150502.167529512,220215.72876617 150501.148267175,
 220213.515283163 150500.019034164,220211.35987523 150498.7825509,
 220209.267734939 150497.441796181,220207.243902439 150496,
 220205.293253319 150494.460635772,220203.420486864 150492.82741196,220201.630114732 150491.104263143,
 220199.926450087 150489.295340538,220198.313597205 150487.405001997,220196.795441592 150485.437801511,
 220195.375640616 150483.39847824,220194.057614703 150481.291945091,220192.844539092 150479.123276887,220191.739336189 150476.89769814,
 220190.744668525 150474.620570464,220189.86293234 150472.297379659,220189.096251815 150469.933722495,
 220188.446473951 150467.535293229,220187.915164118 150465.107869888,220187.50360229 150462.657300346,
 220187.212779953 150460.189488241,220187.043397726 150457.710378749,220186.995863664 150455.22594426,
 220187.070292282 150452.742169995,220187.266504273 150450.265039585,220187.584026947 150447.800520653,
 220188.022095363 150445.35455044,220188.579654177 150442.933021505,220189.25536018 150440.541767521,
 220190.047585536 150438.18654923,220190.954421707 150435.873040558,220191.973684044 150433.60681495,
 220193.102917055 150431.393331943,220194.339400319 150429.237924011,220195.680155039 150427.14578372,220197.12195122 150425.12195122,
 220198.661315447 150423.171302099,220200.29453926 150421.298535644,220202.017688077 150419.508163512,220203.826610682 150417.804498867,
 220205.716949223 150416.191645986,220207.684149708 150414.673490372,220209.72347298 150413.253689397,220211.830006129 150411.935663483,
 220213.998674333 150410.722587873,220216.22425308 150409.61738497,220218.501380756 150408.622717305,220220.824571561 150407.740981121,
 220223.188228725 150406.974300596,220225.586657991 150406.324522731,220227 150406)

--3d example
SELECT ST_AsEWKT(ST_CurveToLine(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)')));
Output
------
 LINESTRING(220268 150415 1,220269.95064912 150416.539364228 1.0181172856673,
 220271.823415575 150418.17258804 1.03623457133459,220273.613787707 150419.895736857 1.05435185700189,....AD INFINITUM ....
    220225.586657991 150406.324522731 1.32611114201132,220227 150406 3)

--use only 2 segments to approximate quarter circle
SELECT ST_AsText(ST_CurveToLine(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'),2));
st_astext
------------------------------
 LINESTRING(220268 150415,220287.740300149 150448.342699654,220278.12195122 150485.87804878,
 220244.779251566 150505.61834893,220207.243902439 150496,220187.50360229 150462.657300346,
 220197.12195122 150425.12195122,220227 150406)

-- Ensure approximated line is no further than 20 units away from
-- original curve, and make the result direction-neutral
SELECT ST_AsText(ST_CurveToLine(
 'CIRCULARSTRING(0 0,100 -100,200 0)'::geometry,
    20, -- Tolerance
    1, -- Above is max distance between curve and line
    1  -- Symmetric flag
));
st_astext
-------------------------------------------------------------------------------------------
 LINESTRING(0 0,50 -86.6025403784438,150 -86.6025403784439,200 -1.1331077795296e-13,200 0)


        </pre></div><div class="refsection" id="idm6706"><h2>相关信息</h2><p><a class="xref" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a></p></div></div><div class="refentry" id="ST_Scroll"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Scroll — 更改闭合线串的起点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Scroll</strong>(</code>geometry <var class="pdparam">linestring</var>, geometry <var class="pdparam">point</var><code>)</code>;</p></div></div><div class="refsection" id="idm6725"><h2>描述</h2><p>将闭合线串的起点/终点更改为给定的<em class="parameter"><code>point</code></em>。 </p><p class="availability">可用性：3.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm6738"><h2>示例</h2><p>使 e 闭合线从其第三个顶点开始</p><pre class="programlisting">SELECT ST_AsEWKT(ST_Scroll('SRID=4326;LINESTRING(0 0 0 1, 10 0 2 0, 5 5 4 2,0 0 0 1)', 'POINT(5 5 4 2)'));

st_asewkt
----------
SRID=4326;LINESTRING(5 5 4 2,0 0 0 1,10 0 2 0,5 5 4 2)
</pre></div><div class="refsection" id="idm6742"><h2>相关信息</h2><p><a class="xref" href="#ST_Normalize" title="ST_Normalize">ST_Normalize</a></p></div></div><div class="refentry" id="ST_FlipCoordinates"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_FlipCoordinates — 返回 X 轴和 Y 轴转换的几何图形版本。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_FlipCoordinates</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm6758"><h2>描述</h2><p>返回给定几何图形的 X 轴和 Y 轴转换的版本。对于修改包含以纬度/经度 (Y,X) 表示的坐标的几何图形很有用。</p><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm6782"><h2>示例</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_FlipCoordinates(GeomFromEWKT('POINT(1 2)')));
 st_asewkt
------------
POINT(2 1)
         </pre></div><div class="refsection" id="idm6785"><h2>相关信息</h2><p> <a class="xref" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> </p></div></div><div class="refentry" id="ST_Force2D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Force2D — 强制几何图形进入“二维模式”。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Force2D</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm6801"><h2>描述</h2><p>强制几何图形进入“二维模式”，以便所有输出表示仅具有 X 和 Y 坐标。 这对于强制 OGC 兼容输出非常有用（因为 OGC 仅指定二维几何形状）。</p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p class="changed">更改： 2.1.0 在 2.0.x 期间，它被称为ST_Force_2D。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm6818"><h2>示例</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_Force2D(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
                st_asewkt
-------------------------------------
CIRCULARSTRING(1 1,2 3,4 5,6 7,5 6)

SELECT  ST_AsEWKT(ST_Force2D('POLYGON((0 0 2,0 5 2,5 0 2,0 0 2),(1 1 2,3 1 2,1 3 2,1 1 2))'));

                                  st_asewkt
----------------------------------------------
 POLYGON((0 0,0 5,5 0,0 0),(1 1,3 1,1 3,1 1))

                </pre></div><div class="refsection" id="idm6821"><h2>相关信息</h2><p><a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a></p></div></div><div class="refentry" id="ST_Force_3D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Force3D — 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Force3D</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">Zvalue = 0.0</var><code>)</code>;</p></div></div><div class="refsection" id="idm6840"><h2>描述</h2><p>强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。 如果几何体没有 Z 分量，则会附加<em class="parameter"><code>Z值</code></em> Z 坐标。</p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p class="changed">更改： 2.1.0 在 2.0.x 期间，它被称为 ST_Force_3D。</p><p class="changed">更改： 3.1.0. 您现在可以指定一个非零 Z 值。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm6859"><h2>示例</h2><pre class="programlisting">--Nothing happens to an already 3D geometry
                SELECT ST_AsEWKT(ST_Force3D(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
                                   st_asewkt
-----------------------------------------------
 CIRCULARSTRING(1 1 2,2 3 2,4 5 2,6 7 2,5 6 2)


SELECT  ST_AsEWKT(ST_Force3D('POLYGON((0 0,0 5,5 0,0 0),(1 1,3 1,1 3,1 1))'));

                                                 st_asewkt
--------------------------------------------------------------
 POLYGON((0 0 0,0 5 0,5 0 0,0 0 0),(1 1 0,3 1 0,1 3 0,1 1 0))
                </pre></div><div class="refsection" id="idm6862"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a></p></div></div><div class="refentry" id="ST_Force_3DZ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Force3DZ — 强制几何图形进入 XYZ 模式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Force3DZ</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">Zvalue = 0.0</var><code>)</code>;</p></div></div><div class="refsection" id="idm6884"><h2>描述</h2><p>强制几何图形进入 XYZ 模式。如果几何体没有 Z 分量，则会附加 <em class="parameter"><code>Z值</code></em> Z 坐标。</p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p class="changed">更改： 2.1.0。在 2.0.x 期间，它被称为 ST_Force_3DZ。</p><p class="changed">更改： 3.1.0. 您现在可以指定一个非零 Z 值。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm6903"><h2>示例</h2><pre class="programlisting">--Nothing happens to an already 3D geometry
SELECT ST_AsEWKT(ST_Force3DZ(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
                                   st_asewkt
-----------------------------------------------
 CIRCULARSTRING(1 1 2,2 3 2,4 5 2,6 7 2,5 6 2)


SELECT  ST_AsEWKT(ST_Force3DZ('POLYGON((0 0,0 5,5 0,0 0),(1 1,3 1,1 3,1 1))'));

                                                 st_asewkt
--------------------------------------------------------------
 POLYGON((0 0 0,0 5 0,5 0 0,0 0 0),(1 1 0,3 1 0,1 3 0,1 1 0))
                </pre></div><div class="refsection" id="idm6906"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a></p></div></div><div class="refentry" id="ST_Force_3DM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Force3DM — 强制几何图形进入 XYM 模式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Force3DM</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">Mvalue = 0.0</var><code>)</code>;</p></div></div><div class="refsection" id="idm6928"><h2>描述</h2><p>强制几何图形进入XYM模式。 如果几何体没有 M 分量，则附加<em class="parameter"><code>M值</code></em>M 坐标。如果它有 Z 分量，则 Z 被移除</p><p class="changed">更改： 2.1.0 。在 2.0.x 期间，它被称为ST_Force_3DM。</p><p class="changed">更改： 3.1.0. 现在可以指定一个非零 M 值。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm6938"><h2>示例</h2><pre class="programlisting">--Nothing happens to an already 3D geometry
SELECT ST_AsEWKT(ST_Force3DM(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
                                   st_asewkt
------------------------------------------------
 CIRCULARSTRINGM(1 1 0,2 3 0,4 5 0,6 7 0,5 6 0)


SELECT  ST_AsEWKT(ST_Force3DM('POLYGON((0 0 1,0 5 1,5 0 1,0 0 1),(1 1 1,3 1 1,1 3 1,1 1 1))'));

                                                  st_asewkt
---------------------------------------------------------------
 POLYGONM((0 0 0,0 5 0,5 0 0,0 0 0),(1 1 0,3 1 0,1 3 0,1 1 0))

                </pre></div><div class="refsection" id="idm6941"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" id="ST_Force_4D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Force4D — 强制几何图形进入XYZM模式。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Force4D</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">Zvalue = 0.0</var>, float  <var class="pdparam">Mvalue = 0.0</var><code>)</code>;</p></div></div><div class="refsection" id="idm6967"><h2>描述</h2><p>强制几何体进入 XYZM 模式。 如果没有 Z 值或 M 值，则添加 <em class="parameter"><code>Z值</code></em> 和<em class="parameter"><code>M值</code></em> 。 </p><p class="changed">更改： 2.1.0。在 2.0.x 期间，它被称为ST_Force_4D。</p><p class="changed">更改： 3.1.0. 现在可以指定非零 Z 和 M 值。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm6982"><h2>示例</h2><pre class="programlisting">--Nothing happens to an already 3D geometry
SELECT ST_AsEWKT(ST_Force4D(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
                                                st_asewkt
---------------------------------------------------------
 CIRCULARSTRING(1 1 2 0,2 3 2 0,4 5 2 0,6 7 2 0,5 6 2 0)



SELECT  ST_AsEWKT(ST_Force4D('MULTILINESTRINGM((0 0 1,0 5 2,5 0 3,0 0 4),(1 1 1,3 1 1,1 3 1,1 1 1))'));

                                                                          st_asewkt
--------------------------------------------------------------------------------------
 MULTILINESTRING((0 0 0 1,0 5 0 2,5 0 0 3,0 0 0 4),(1 1 0 1,3 1 0 1,1 3 0 1,1 1 0 1))

                </pre></div><div class="refsection" id="idm6985"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a></p></div></div><div class="refentry" id="ST_Force_Collection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForceCollection — 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ForceCollection</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm7004"><h2>描述</h2><p>将几何图形转换为几何图形集合。 这对于简化 WKB 表示很有用。</p><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p class="availability">可用性：1.2.2 ，在 1.3.4 之前，当与包含曲线的几何一起使用时，它会崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p><p class="changed">更改： 2.1.0 。在 2.0.x 期间，它被称为ST_Force_Collection。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm7022"><h2>示例</h2><pre class="programlisting">SELECT  ST_AsEWKT(ST_ForceCollection('POLYGON((0 0 1,0 5 1,5 0 1,0 0 1),(1 1 1,3 1 1,1 3 1,1 1 1))'));

                                                                   st_asewkt
----------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(POLYGON((0 0 1,0 5 1,5 0 1,0 0 1),(1 1 1,3 1 1,1 3 1,1 1 1)))


  SELECT ST_AsText(ST_ForceCollection('CIRCULARSTRING(220227 150406,2220227 150407,220227 150406)'));
                                                                   st_astext
--------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(CIRCULARSTRING(220227 150406,2220227 150407,220227 150406))
(1 row)

                </pre><pre class="programlisting">-- POLYHEDRAL example --
SELECT ST_AsEWKT(ST_ForceCollection('POLYHEDRALSURFACE(((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),
 ((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),
 ((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),
 ((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),
 ((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),
 ((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1)))'))

                                                                   st_asewkt
----------------------------------------------------------------------------------
GEOMETRYCOLLECTION(
  POLYGON((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),
  POLYGON((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),
  POLYGON((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),
  POLYGON((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),
  POLYGON((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),
  POLYGON((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1))
)
                </pre></div><div class="refsection" id="idm7026"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" id="ST_ForceCurve"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForceCurve — 如果适用，将一个几何图形上升到其曲线类型。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ForceCurve</strong>(</code>geometry <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm7046"><h2>描述</h2><p>将几何图形转换为其曲线表示形式（如果适用）：直线变为复合曲线，多线变为多曲线，多边形变为曲线多边形，多重多边形变为多重曲面。 如果几何输入已经是曲线表示，则返回与输入相同的值。 </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm7058"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(
  ST_ForceCurve(
        'POLYGON((0 0 2, 5 0 2, 0 5 2, 0 0 2),(1 1 2, 1 3 2, 3 1 2, 1 1 2))'::geometry
  )
);
                              st_astext
----------------------------------------------------------------------
 CURVEPOLYGON Z ((0 0 2,5 0 2,0 5 2,0 0 2),(1 1 2,1 3 2,3 1 2,1 1 2))
(1 row)</pre></div><div class="refsection" id="idm7061"><h2>相关信息</h2><p><a class="xref" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a></p></div></div><div class="refentry" id="ST_ForcePolygonCCW"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForcePolygonCCW  — 将所有外环逆时针定向，将所有内环顺时针定向。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> geometry <strong class="fsfunc">ST_ForcePolygonCCW</strong> (</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm7077"><h2>描述</h2><p>强制（多）多边形对其外环使用逆时针方向，对其内环使用顺时针方向。 非多边形几何保持不变。 </p><p class="availability">可用性：2.4.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm7089"><h2>相关信息</h2><p><a class="xref" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a>, <a class="xref" href="#ST_IsPolygonCCW" title="ST_IsPolygonCCW">ST_IsPolygonCCW </a>, <a class="xref" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a> </p></div></div><div class="refentry" id="ST_ForcePolygonCW"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForcePolygonCW  — 顺时针方向调整所有外环，逆时针方向调整所有内环。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> geometry <strong class="fsfunc">ST_ForcePolygonCW</strong> (</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm7107"><h2>描述</h2><p>强制（多）多边形对其外环使用顺时针方向，对其内环使用逆时针方向。 非多边形几何体原封不动地返回。 </p><p class="availability">可用性：2.4.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm7119"><h2>相关信息</h2><p><a class="xref" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a>, <a class="xref" href="#ST_IsPolygonCCW" title="ST_IsPolygonCCW">ST_IsPolygonCCW </a>, <a class="xref" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a> </p></div></div><div class="refentry" id="ST_ForceSFS"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForceSFS — 强制几何图形仅使用 SFS 1.1 几何类型。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ForceSFS</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_ForceSFS</strong>(</code>geometry  <var class="pdparam">geomA</var>, text  <var class="pdparam">version</var><code>)</code>;</p></div></div><div class="refsection" id="idm7146"><h2>描述</h2><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div></div><div class="refentry" id="ST_ForceRHR"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForceRHR — 强制多边形顶点的方向遵循右手定则。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ForceRHR</strong>(</code>geometry <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm7176"><h2>描述</h2><p>强制多边形中顶点的方向遵循右手定则，其中多边形所包围的区域位于边界的右侧。特别地，外环沿顺时针方向定向，而内环沿逆时针方向定向。 该函数是 <a class="xref" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a>的同义词</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>右手定则的上述定义与其他上下文中使用的定义相冲突。 为避免混淆，建议使用 ST_ForcePolygonCW。 </p></td></tr></table></div><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm7191"><h2>示例</h2><pre class="programlisting">SELECT ST_AsEWKT(
  ST_ForceRHR(
        'POLYGON((0 0 2, 5 0 2, 0 5 2, 0 0 2),(1 1 2, 1 3 2, 3 1 2, 1 1 2))'
  )
);
                                                  st_asewkt
--------------------------------------------------------------
 POLYGON((0 0 2,0 5 2,5 0 2,0 0 2),(1 1 2,3 1 2,1 3 2,1 1 2))
(1 row)</pre></div><div class="refsection" id="idm7194"><h2>相关信息</h2><p><a class="xref" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a>, <a class="xref" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a>, <a class="xref" href="#ST_IsPolygonCCW" title="ST_IsPolygonCCW">ST_IsPolygonCCW </a>, <a class="xref" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a>, <a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a>, <a class="xref" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a></p></div></div><div class="refentry" id="ST_LineExtend"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineExtend — 返回一条线，向前和向后延伸指定的距离。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineExtend</strong>(</code>geometry  <var class="pdparam">line</var>, float  <var class="pdparam">distance_forward</var>, float <var class="pdparam">distance_backward=0.0</var><code>)</code>;</p></div></div><div class="refsection" id="idm7222"><h2>描述</h2><p>返回一条线，通过在给定的距离处添加新的起始点（和结束点），向前和向后延伸。距离为零不会添加点。只允许非负距离。所添加点的方向由线的第一个（和最后一个）不同的两个点确定。重复的点将被忽略。 </p><p class="availability">可用性：3.4.0</p></div><div class="refsection" id="idm7226"><h2>例如：将一条线向前延伸5个单位，向后延伸6个单位</h2><pre class="programlisting">SELECT ST_AsText(ST_LineExtend('LINESTRING(0 0, 0 10)'::geometry, 5, 6));
--------------------------------------------
LINESTRING(0 -6,0 0,0 10,0 15)
</pre></div><div class="refsection" id="idm7229"><h2>相关信息</h2><p><a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a>, <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>, <a class="xref" href="#ST_Project" title="ST_Project">ST_Project</a></p></div></div><div class="refentry" id="ST_LineToCurve"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineToCurve — 将线性几何图形转换为曲线几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineToCurve</strong>(</code>geometry  <var class="pdparam">geomANoncircular</var><code>)</code>;</p></div></div><div class="refsection" id="idm7247"><h2>描述</h2><p>将普通线/多边形转换为圆形线和曲线多边形。 请注意，描述等效曲线所需的点要少得多。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果输入线串/多边形不足以清楚地表示曲线，则该函数返回与输入几何图形相同的值。</p></td></tr></table></div><p class="availability">可用性：1.3.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm7261"><h2>示例</h2><pre class="programlisting">-- 2D Example
SELECT ST_AsText(ST_LineToCurve(foo.geom)) As curvedastext,ST_AsText(foo.geom) As non_curvedastext
    FROM (SELECT ST_Buffer('POINT(1 3)'::geometry, 3) As geom) As foo;

curvedatext                                                            non_curvedastext
--------------------------------------------------------------------|-----------------------------------------------------------------
CURVEPOLYGON(CIRCULARSTRING(4 3,3.12132034355964 0.878679656440359, | POLYGON((4 3,3.94235584120969 2.41472903395162,3.77163859753386 1.85194970290473,
1 0,-1.12132034355965 5.12132034355963,4 3))                        |  3.49440883690764 1.33328930094119,3.12132034355964 0.878679656440359,
                                                                    |  2.66671069905881 0.505591163092366,2.14805029709527 0.228361402466141,
                                                                    |  1.58527096604839 0.0576441587903094,1 0,
                                                                    |  0.414729033951621 0.0576441587903077,-0.148050297095264 0.228361402466137,
                                                                    |  -0.666710699058802 0.505591163092361,-1.12132034355964 0.878679656440353,
                                                                    |  -1.49440883690763 1.33328930094119,-1.77163859753386 1.85194970290472
                                                                    |  --ETC-- ,3.94235584120969 3.58527096604839,4 3))

--3D example
SELECT ST_AsText(ST_LineToCurve(geom)) As curved, ST_AsText(geom) AS not_curved
FROM (SELECT ST_Translate(ST_Force3D(ST_Boundary(ST_Buffer(ST_Point(1,3), 2,2))),0,0,3) AS geom) AS foo;

                        curved                        |               not_curved
------------------------------------------------------+---------------------------------------------------------------------
 CIRCULARSTRING Z (3 3 3,-1 2.99999999999999 3,3 3 3) | LINESTRING Z (3 3 3,2.4142135623731 1.58578643762691 3,1 1 3,
                                                      | -0.414213562373092 1.5857864376269 3,-1 2.99999999999999 3,
                                                      | -0.414213562373101 4.41421356237309 3,
                                                      | 0.999999999999991 5 3,2.41421356237309 4.4142135623731 3,3 3 3)
(1 row)
</pre></div><div class="refsection" id="idm7264"><h2>相关信息</h2><p><a class="xref" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a></p></div></div><div class="refentry" id="ST_Multi"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Multi — 将几何图形返回为 MULTI* 几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Multi</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm7280"><h2>描述</h2><p>以 MULTI* 几何集合的形式返回几何图形。 如果几何图形已经是集合，则原样返回。</p></div><div class="refsection" id="idm7283"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_Multi('POLYGON ((10 30, 30 30, 30 10, 10 10, 10 30))'));
                    st_astext
    -------------------------------------------------
    MULTIPOLYGON(((10 30,30 30,30 10,10 10,10 30)))
</pre></div><div class="refsection" id="idm7286"><h2>相关信息</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a></p></div></div><div class="refentry" id="ST_Normalize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Normalize — 返回规范形式的几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Normalize</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm7302"><h2>描述</h2><p>以规范化/标准化格式返回几何图形。 多边形环中的顶点顺序、多边形中环的顺序或复合几何中元素的顺序可能会更改。 </p><p>在大多数情况下，它仅用于测试目的（将预期结果与实际结果进行比较）。 </p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm7307"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_Normalize(ST_GeomFromText(
  'GEOMETRYCOLLECTION(
    POINT(2 3),
    MULTILINESTRING((0 0, 1 1),(2 2, 3 3)),
    POLYGON(
      (0 10,0 0,10 0,10 10,0 10),
      (4 2,2 2,2 4,4 4,4 2),
      (6 8,8 8,8 6,6 6,6 8)
    )
  )'
)));
                                                                     st_astext
----------------------------------------------------------------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0),(6 6,8 6,8 8,6 8,6 6),(2 2,4 2,4 4,2 4,2 2)),MULTILINESTRING((2 2,3 3),(0 0,1 1)),POINT(2 3))
(1 row)
                        </pre></div><div class="refsection" id="idm7310"><h2>相关信息</h2><p><a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, </p></div></div><div class="refentry" id="ST_Project"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Project — 返回从起点按距离和方位角（方位角）投影的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Project</strong>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">distance</var>, float  <var class="pdparam">azimuth</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Project</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, float  <var class="pdparam">distance</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Project</strong>(</code>geography  <var class="pdparam">g1</var>, float  <var class="pdparam">distance</var>, float  <var class="pdparam">azimuth</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Project</strong>(</code>geography  <var class="pdparam">g1</var>, geography  <var class="pdparam">g2</var>, float  <var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" id="idm7368"><h2>描述</h2><p>返回从具有给定距离的起点计算并沿测地线方位角计算的点。这称为直接测地线问题。</p><p>两点使用从第一个点到第二个点的路径来隐式定义方位角，并像先前一样使用距离。</p><p>距离以米为单位。 支持负值。</p><p>方向角（也称为航向或方位角）以弧度给出。 它是从正北方向顺时针测量的。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>正北是零度方位角（0度）</p></li><li class="listitem"><p>正东的方位角是π/2（90度）</p></li><li class="listitem"><p>正南方位角是π （180度）</p></li><li class="listitem"><p>正西方位角是3π/2（270度）</p></li></ul></div><p>支持负方位角值和大于2π（360 度）的值。</p><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.4.0 允许负距离和非标准化方位角。</p><p class="enhanced">增强：3.4.0允许几何参数和无方位角的两点格式。</p></div><div class="refsection" id="idm7387"><h2>示例：延伸点位于 100,000 米、方位角 45 度 </h2><pre class="programlisting">SELECT ST_AsText(ST_Project('POINT(0 0)'::geography, 100000, radians(45.0)));
--------------------------------------------
 POINT(0.635231029125537 0.639472334729198)
</pre></div><div class="refsection" id="idm7390"><h2>相关信息</h2><p><a class="xref" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="link" href="http://www.postgresql.org/docs/current/interactive/functions-math.html" target="_top">PostgreSQL function radians()</a></p></div></div><div class="refentry" id="ST_QuantizeCoordinates"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_QuantizeCoordinates  — 将坐标的最低有效位设置为零 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> geometry <strong class="fsfunc">ST_QuantizeCoordinates</strong> (</code> geometry <var class="pdparam">g</var> ,  int <var class="pdparam">prec_x</var> ,  int <var class="pdparam">prec_y</var> ,  int <var class="pdparam">prec_z</var> ,  int <var class="pdparam">prec_m</var> <code>)</code>;</p></div></div><div class="refsection" id="idm7420"><h2>描述</h2><p><code class="code">ST_QuantizeCoordinates</code>确定表示小数点后具有指定位数的坐标值所需的位数 (<code class="code">N</code>)，然后将除 <code class="code">N</code> 个最高有效位之外的所有位设置为零。 生成的坐标值仍将舍入为原始值，但会提高可压缩性。 如果几何列使用<a class="link" href="https://www.postgresql.org/docs/current/static/storage-toast.html#STORAGE-TOAST-ONDISK" target="_top"> 可压缩存储类型</a>，这可能会导致磁盘使用量显著减少。该功能允许在每个维度中指定不同的小数点后位数；未指定的尺寸假定具有 <code class="code">x</code> 维度的精度。 负数被解释为指小数点左边的数字（即 <code class="code">prec_x=-2</code> 将保留最接近 100 的坐标值）。 </p><p><code class="code">ST_QuantizeCoordinates</code>生成的坐标独立于包含这些坐标的几何图形以及这些坐标在几何图形中的相对位置。因此，几何图形之间现有的拓扑关系不会受到使用此函数的影响。 当使用低于几何的固有精度的位数调用该函数时，该函数可能会产生无效的几何。 </p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm7432"><h2>技术背景</h2><p>PostGIS将所有坐标值存储为双精度浮点整数，可以可靠地表示15位有效数字。然而，PostGIS 可用于管理本质上有效数字少于 15 位的数据。 一个例子是 TIGER 数据，它以地理坐标的形式提供，小数点后精度为 6 位（因此仅需要 9 位有效的经度数字和 8 位有效的纬度数字。） </p><p>当有 15 位有效数字可用时，具有 9 位有效数字的数字有多种可能的表示形式。 双精度浮点数使用 52 个显式位来表示坐标的有效数（尾数）。 只需要30位即可表示9位有效数字的尾数，剩下22位无效位； 我们可以将它们的值设置为我们喜欢的任何值，并且最终仍然得到一个四舍五入到我们的输入值的数字。 例如，值 100.123456 可以由最接近 100.123456000000、100.123456000001 和 100.123456432199 的浮点数表示。所有这些都同样有效，因为<code class="code">ST_AsText(geom, 6)</code> 将对任何这些输入返回相同的结果。 由于我们可以将这些位设置为任何值，因此 <code class="code">ST_QuantizeCoordinates</code> 将 22 个无意义位设置为零。对于长坐标序列，这会创建连续零块的模式，PostgreSQL 可以更有效地压缩该模式。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>只有几何图形的磁盘大小可能会受到<code class="code">ST_QuantizeCoordinates</code> 的影响。<a class="xref" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> 用于报告几何图形的内存使用情况，无论几何图形使用的磁盘空间如何，都将返回相同的值。 </p></td></tr></table></div></div><div class="refsection" id="idm7442"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_QuantizeCoordinates('POINT (100.123456 0)'::geometry, 4));
st_astext
-------------------------
POINT(100.123455047607 0)
                        </pre><pre class="programlisting">WITH test AS (SELECT 'POINT (123.456789123456 123.456789123456)'::geometry AS geom)
SELECT
  digits,
  encode(ST_QuantizeCoordinates(geom, digits), 'hex'),
  ST_AsText(ST_QuantizeCoordinates(geom, digits))
FROM test, generate_series(15, -15, -1) AS digits;

digits  |                   encode                   |                st_astext
--------+--------------------------------------------+------------------------------------------
15      | 01010000005f9a72083cdd5e405f9a72083cdd5e40 | POINT(123.456789123456 123.456789123456)
14      | 01010000005f9a72083cdd5e405f9a72083cdd5e40 | POINT(123.456789123456 123.456789123456)
13      | 01010000005f9a72083cdd5e405f9a72083cdd5e40 | POINT(123.456789123456 123.456789123456)
12      | 01010000005c9a72083cdd5e405c9a72083cdd5e40 | POINT(123.456789123456 123.456789123456)
11      | 0101000000409a72083cdd5e40409a72083cdd5e40 | POINT(123.456789123456 123.456789123456)
10      | 0101000000009a72083cdd5e40009a72083cdd5e40 | POINT(123.456789123455 123.456789123455)
9       | 0101000000009072083cdd5e40009072083cdd5e40 | POINT(123.456789123418 123.456789123418)
8       | 0101000000008072083cdd5e40008072083cdd5e40 | POINT(123.45678912336 123.45678912336)
7       | 0101000000000070083cdd5e40000070083cdd5e40 | POINT(123.456789121032 123.456789121032)
6       | 0101000000000040083cdd5e40000040083cdd5e40 | POINT(123.456789076328 123.456789076328)
5       | 0101000000000000083cdd5e40000000083cdd5e40 | POINT(123.456789016724 123.456789016724)
4       | 0101000000000000003cdd5e40000000003cdd5e40 | POINT(123.456787109375 123.456787109375)
3       | 0101000000000000003cdd5e40000000003cdd5e40 | POINT(123.456787109375 123.456787109375)
2       | 01010000000000000038dd5e400000000038dd5e40 | POINT(123.45654296875 123.45654296875)
1       | 01010000000000000000dd5e400000000000dd5e40 | POINT(123.453125 123.453125)
0       | 01010000000000000000dc5e400000000000dc5e40 | POINT(123.4375 123.4375)
-1      | 01010000000000000000c05e400000000000c05e40 | POINT(123 123)
-2      | 01010000000000000000005e400000000000005e40 | POINT(120 120)
-3      | 010100000000000000000058400000000000005840 | POINT(96 96)
-4      | 010100000000000000000058400000000000005840 | POINT(96 96)
-5      | 010100000000000000000058400000000000005840 | POINT(96 96)
-6      | 010100000000000000000058400000000000005840 | POINT(96 96)
-7      | 010100000000000000000058400000000000005840 | POINT(96 96)
-8      | 010100000000000000000058400000000000005840 | POINT(96 96)
-9      | 010100000000000000000058400000000000005840 | POINT(96 96)
-10     | 010100000000000000000058400000000000005840 | POINT(96 96)
-11     | 010100000000000000000058400000000000005840 | POINT(96 96)
-12     | 010100000000000000000058400000000000005840 | POINT(96 96)
-13     | 010100000000000000000058400000000000005840 | POINT(96 96)
-14     | 010100000000000000000058400000000000005840 | POINT(96 96)
-15     | 010100000000000000000058400000000000005840 | POINT(96 96)
</pre></div><div class="refsection" id="idm7446"><h2>相关信息</h2><p><a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a></p></div></div><div class="refentry" id="ST_RemovePoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemovePoint — 从线串中删除一个点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RemovePoint</strong>(</code>geometry <var class="pdparam">linestring</var>, integer <var class="pdparam">offset</var><code>)</code>;</p></div></div><div class="refsection" id="idm7465"><h2>描述</h2><p>从线串中删除点。 索引从零开始。 用于将闭合环转换为开放线串。 </p><p class="enhanced">增强：3.2.0</p><p class="availability">可用性：1.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm7474"><h2>示例</h2><p>通过删除闭合线（环）的端点来保证没有闭合线。 假设 geom 的类型为 LINESTRING</p><pre class="programlisting">UPDATE sometable
        SET geom = ST_RemovePoint(geom, ST_NPoints(geom) - 1)
        FROM sometable
        WHERE ST_IsClosed(geom);
</pre></div><div class="refsection" id="idm7478"><h2>相关信息</h2><p><a class="xref" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>, <a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a>, <a class="xref" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a></p></div></div><div class="refentry" id="ST_RemoveRepeatedPoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemoveRepeatedPoints — 返回删除了重复点的几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RemoveRepeatedPoints</strong>(</code>geometry <var class="pdparam">geom</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm7499"><h2>描述</h2><p>返回给定几何图形的版本，其中删除了重复的连续点。该函数仅处理（多）线串、（多）多边形和多点，但可以使用任何类型的几何图形进行调用。 GeometryCollections 的元素是单独处理的。 LineStrings 的端点被保留。 </p><p>如果提供了<em class="parameter"><code>容差</code></em>参数，则彼此容差距离内的顶点将被视为重复。</p><p class="enhanced">增强：3.2.0</p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm7514"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText( ST_RemoveRepeatedPoints( 'MULTIPOINT ((1 1), (2 2), (3 3), (2 2))'));
-------------------------
 MULTIPOINT(1 1,2 2,3 3)
</pre><pre class="programlisting">SELECT ST_AsText( ST_RemoveRepeatedPoints( 'LINESTRING (0 0, 0 0, 1 1, 0 0, 1 1, 2 2)'));
---------------------------------
 LINESTRING(0 0,1 1,0 0,1 1,2 2)
</pre><p><span class="bold"><strong>示例:</strong></span> 集合元素是单独处理的。 </p><pre class="programlisting">SELECT ST_AsText( ST_RemoveRepeatedPoints( 'GEOMETRYCOLLECTION (LINESTRING (1 1, 2 2, 2 2, 3 3), POINT (4 4), POINT (4 4), POINT (5 5))'));
------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(LINESTRING(1 1,2 2,3 3),POINT(4 4),POINT(4 4),POINT(5 5))
</pre><p><span class="bold"><strong>示例:</strong></span> 删除在容差距离内的重复点。 </p><pre class="programlisting">SELECT ST_AsText( ST_RemoveRepeatedPoints( 'LINESTRING (0 0, 0 0, 1 1, 5 5, 1 1, 2 2)', 2));
-------------------------
 LINESTRING(0 0,5 5,2 2)
</pre></div><div class="refsection" id="idm7524"><h2>相关信息</h2><p><a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" id="ST_RemoveIrrelevantPointsForView"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemoveIrrelevantPointsForView — Removes points that are irrelevant for rendering a specific rectangluar view of a geometry.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RemoveIrrelevantPointsForView</strong>(</code>geometry  <var class="pdparam">geom</var>, box2d  <var class="pdparam">bounds</var>, boolean <var class="pdparam">cartesian_hint = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm7546"><h2>描述</h2><p>Returns a <a class="xref" href="#geometry" title="geometry">geometry</a> without points being irrelevant for rendering the geometry within a given rectangluar view.</p><p>This function can be used to quickly preprocess geometries that should be rendered only within certain bounds.</p><p>Only geometries of type (MULTI)POLYGON and (MULTI)LINESTRING are evaluated. Other geometries keep unchanged.</p><p>In contrast to <code class="code">ST_ClipByBox2D()</code> this function </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>sorts out points without computing new intersection points which avoids rounding errors and usually increases performance,</p></li><li class="listitem"><p>returns a geometry with equal or similar point number,</p></li><li class="listitem"><p>leads to the same rendering result within the specified view, and</p></li><li class="listitem"><p>may introduce self-intersections which would make the resulting geometry invalid (see example below).</p></li></ul></div><p>
		</p><p>If <code class="code">cartesian_hint</code> is set to <code class="code">true</code>, the algorithm applies additional optimizations involving cartesian math to further reduce the resulting point number. Please note that using this option might introduce rendering artifacts if the resulting coordinates are projected into another (non-cartesian) coordinate system before rendering. </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>For polygons, this function does currently not ensure that the result is valid. This situation can be checked with <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a> and repaired with <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>. </p></td></tr></table></div><p>
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_removeirrelevantpointsforview.png"/><div class="caption"><p>Example: ST_RemoveIrrelevantPointsForView() applied to a polygon. Blue points remain, the rendering result (light-blue area) within the grey view box remains as well.</p></div></div></div><p>
		</p><p>
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_removeirrelevantpointsforview_crossing.png"/><div class="caption"><p>Example: Due to the fact that points are just sorted out and no new points are computed, the result of ST_RemoveIrrelevantPointsForView() may contain self-intersections.</p></div></div></div><p>
		</p><p class="availability">可用性：3.5.0</p></div><div class="refsection" id="idm7585"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveIrrelevantPointsForView(
                        ST_GeomFromText('MULTIPOLYGON(((10 10, 20 10, 30 10, 40 10, 20 20, 10 20, 10 10)),((10 10, 20 10, 20 20, 10 20, 10 10)))'),
                        ST_MakeEnvelope(12,12,18,18), true));
                
                st_astext
                ---------
                    MULTIPOLYGON(((10 10,40 10,20 20,10 20,10 10)),((10 10,20 10,20 20,10 20,10 10)))
                </pre><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveIrrelevantPointsForView(
                        ST_GeomFromText('MULTILINESTRING((0 0, 10 0,20 0,30 0), (0 15, 5 15, 10 15, 15 15, 20 15, 25 15, 30 15, 40 15), (13 13,15 15,17 17))'),
                        ST_MakeEnvelope(12,12,18,18), true));
                
                st_astext
                ---------
                        MULTILINESTRING((10 15,15 15,20 15),(13 13,15 15,17 17))
                </pre><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveIrrelevantPointsForView(
                        ST_GeomFromText('LINESTRING(0 0, 10 0,20 0,30 0)'),
                        ST_MakeEnvelope(12,12,18,18), true));
                
                st_astext
                ---------
                    LINESTRING EMPTY
                </pre><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveIrrelevantPointsForView(
                        ST_GeomFromText('POLYGON((0 30, 15 30, 30 30, 30 0, 0 0, 0 30))'),
                        ST_MakeEnvelope(12,12,18,18), true));
                
                st_astext
                ---------
                    POLYGON((15 30,30 0,0 0,15 30))
                </pre><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveIrrelevantPointsForView(
                        ST_GeomFromText('POLYGON((0 30, 15 30, 30 30, 30 0, 0 0, 0 30))'),
                        ST_MakeEnvelope(12,12,18,18)));
                
                st_astext
                ---------
                    POLYGON((0 30,30 30,30 0,0 0,0 30))
                </pre></div><div class="refsection" id="idm7592"><h2>相关信息</h2><p><a class="xref" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a></p></div></div><div class="refentry" id="ST_RemoveSmallParts"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemoveSmallParts — Removes small parts (polygon rings or linestrings) of a geometry.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RemoveSmallParts</strong>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">minSizeX</var>, double precision  <var class="pdparam">minSizeY</var><code>)</code>;</p></div></div><div class="refsection" id="idm7615"><h2>描述</h2><p>Returns a <a class="xref" href="#geometry" title="geometry">geometry</a> without small parts (exterior or interior polygon rings, or linestrings).</p><p>This function can be used as preprocessing step for creating simplified maps, e. g. to remove small islands or holes.</p><p>It evaluates only geometries of type (MULTI)POLYGON and (MULTI)LINESTRING. Other geometries remain unchanged.</p><p>If <em class="parameter"><code>minSizeX</code></em> is greater than 0, parts are sorted out if their width is smaller than <em class="parameter"><code>minSizeX</code></em>.</p><p>If <em class="parameter"><code>minSizeY</code></em> is greater than 0, parts are sorted out if their height is smaller than <em class="parameter"><code>minSizeY</code></em>.</p><p>Both <em class="parameter"><code>minSizeX</code></em> and <em class="parameter"><code>minSizeY</code></em> are measured in coordinate system units of the geometry.</p><p>For polygon types, evaluation is done separately for each ring which can lead to one of the following results: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the original geometry,</p></li><li class="listitem"><p>a POLYGON with all rings with less vertices,</p></li><li class="listitem"><p>a POLYGON with a reduced number of interior rings (having possibly less vertices),</p></li><li class="listitem"><p>a POLYGON EMPTY, or</p></li><li class="listitem"><p>a MULTIPOLYGON with a reduced number of polygons (having possibly less interior rings or vertices), or</p></li><li class="listitem"><p>a MULTIPOLYGON EMPTY.</p></li></ul></div><p>
		</p><p>For linestring types, evaluation is done for each linestring which can lead to one of the following results: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the original geometry,</p></li><li class="listitem"><p>a LINESTRING with a reduced number of vertices,</p></li><li class="listitem"><p>a LINESTRING EMPTY,</p></li><li class="listitem"><p>a MULTILINESTRING with a reduced number of linestrings (having possibly less vertices), or</p></li><li class="listitem"><p>a MULTILINESTRING EMPTY.</p></li></ul></div><p>
		</p><p>
            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_removesmallparts.png"/><div class="caption"><p>Example: ST_RemoveSmallParts() applied to a multi-polygon. Blue parts remain.</p></div></div></div><p>
        </p><p class="availability">可用性：3.5.0</p></div><div class="refsection" id="idm7664"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveSmallParts(
                        ST_GeomFromText('MULTIPOLYGON(
                                ((60 160, 120 160, 120 220, 60 220, 60 160), (70 170, 70 210, 110 210, 110 170, 70 170)),
                                ((85 75, 155 75, 155 145, 85 145, 85 75)),
                                ((50 110, 70 110, 70 130, 50 130, 50 110)))'),
                                50, 50));
                
                st_astext
                ---------
                        MULTIPOLYGON(((60 160,120 160,120 220,60 220,60 160)),((85 75,155 75,155 145,85 145,85 75)))
                </pre><pre class="programlisting">SELECT ST_AsText(
                        ST_RemoveSmallParts(
                        ST_GeomFromText('LINESTRING(10 10, 20 20)'),
                                50, 50));
                
                st_astext
                ---------
                        LINESTRING EMPTY
                </pre></div></div><div class="refentry" id="ST_Reverse"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Reverse — 返回顶点顺序相反的几何体。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Reverse</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm7680"><h2>描述</h2><p>可用于任何几何体并反转顶点的顺序。</p><p class="enhanced">增强：2.4.0引入了曲线支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm7692"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(geom) as line, ST_AsText(ST_Reverse(geom)) As reverseline
FROM
(SELECT ST_MakeLine(ST_Point(1,2),
                ST_Point(1,10)) As geom) as foo;
--result
                line         |     reverseline
---------------------+----------------------
LINESTRING(1 2,1 10) | LINESTRING(1 10,1 2)
</pre></div></div><div class="refentry" id="ST_Segmentize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Segmentize — 返回修改后的几何图形/地理，其线段不长于给定距离。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Segmentize</strong>(</code>geometry  <var class="pdparam">geom</var>, float  <var class="pdparam">max_segment_length</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Segmentize</strong>(</code>geography  <var class="pdparam">geog</var>, float  <var class="pdparam">max_segment_length</var><code>)</code>;</p></div></div><div class="refsection" id="idm7719"><h2>描述</h2><p>返回修改后的几何图形/地理，其线段长度不超过 <code class="varname">max_segment_length</code>。 线段长度以二维计算。 线段段总是被分成等长的子段。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>对于几何形状，最大长度以空间参考系的单位表示。 </p></li><li class="listitem"><p>对于地理来说，最大长度以米为单位。 距离是在球体上计算的。 添加的顶点是沿着线段端点定义的球面大圆弧创建的。 </p></li></ul></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这只会缩短长线段。 它不会延长比最大长度短的线段。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于包含长线段的输入，指定相对较短的<code class="varname">max_segment_length</code> 可能会导致添加大量顶点。如果意外地将参数指定为多个线段而不是最大长度，则可能会无意中发生这种情况。 </p></td></tr></table></div><p class="availability">可用性：1.2.2</p><p class="enhanced">增强：3.0.0 分段几何现在可生成等长的子分段</p><p class="enhanced">增强：2.3.0 地理分段现在可生成等长的子分段</p><p class="enhanced">增强：2.1.0 引入了对地理的支持。</p><p class="changed">更改：2.1.0 由于引入了地理支持，使用 <code class="code">ST_Segmentize('LINESTRING(1 2, 3 4)', 0.5)</code> 会导致不明确的函数错误。 输入需要正确键入为几何或地理。 使用 ST_GeomFromText、ST_GeogFromText 或转换为所需类型（例如 <code class="code">ST_Segmentize('LINESTRING(1 2, 3 4)'::geometry, 0.5) )</code> ）</p></div><div class="refsection" id="idm7740"><h2>示例</h2><p>分割一条线。 长段均分，短段不平均。</p><pre class="programlisting">SELECT ST_AsText(ST_Segmentize(
    'MULTILINESTRING((0 0, 0 1, 0 9),(1 10, 1 18))'::geometry,
        5 ) );
---------------------------------------------------
MULTILINESTRING((0 0,0 1,0 5,0 9),(1 10,1 14,1 18))
</pre><p>多边形分割：</p><pre class="programlisting">SELECT ST_AsText(
        ST_Segmentize(('POLYGON((0 0, 0 8, 30 0, 0 0))'::geometry), 10));
-------------------------------------------------------
POLYGON((0 0,0 8,7.5 6,15 4,22.5 2,30 0,20 0,10 0,0 0))
</pre><p>对地理线进行分段，最大分段长度为 2000 公里。 沿着连接端点的大圆弧添加顶点。 </p><pre class="programlisting">SELECT ST_AsText(
        ST_Segmentize(('LINESTRING (0 0, 60 60)'::geography), 2000000));
-------------------------------------------------------------
LINESTRING(0 0,4.252632294621186 8.43596525986862,8.69579947419404 16.824093489701564,13.550465473227048 25.107950473646188,19.1066053508691 33.21091076089908,25.779290201459894 41.01711439406505,34.188839517966954 48.337222885886,45.238153936612264 54.84733442373889,60 60)
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_segmentize01.png"/><div class="caption"><p>沿着大圆弧分段的地理线</p></div></div></div></div><div class="refsection" id="idm7754"><h2>相关信息</h2><p><a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a></p></div></div><div class="refentry" id="ST_SetPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetPoint — 用给定点替换线串的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SetPoint</strong>(</code>geometry <var class="pdparam">linestring</var>, integer <var class="pdparam">zerobasedposition</var>, geometry <var class="pdparam">point</var><code>)</code>;</p></div></div><div class="refsection" id="idm7776"><h2>描述</h2><p>将线串的 N 点替换为给定点。 索引从 0 开始。负索引向后计数，因此 -1 是最后一个点。当一个顶点移动时试图维持关节关系时，这在触发器中特别有用。</p><p class="availability">可用性：1.1.0</p><p>更新 2.3.0：负索引</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm7785"><h2>示例</h2><pre class="programlisting">--Change first point in line string from -1 3 to -1 1
SELECT ST_AsText(ST_SetPoint('LINESTRING(-1 2,-1 3)', 0, 'POINT(-1 1)'));
           st_astext
-----------------------
 LINESTRING(-1 1,-1 3)

---Change last point in a line string (lets play with 3d linestring this time)
SELECT ST_AsEWKT(ST_SetPoint(foo.geom, ST_NumPoints(foo.geom) - 1, ST_GeomFromEWKT('POINT(-1 1 3)')))
FROM (SELECT ST_GeomFromEWKT('LINESTRING(-1 2 3,-1 3 4, 5 6 7)') As geom) As foo;
           st_asewkt
-----------------------
LINESTRING(-1 2 3,-1 3 4,-1 1 3)

SELECT ST_AsText(ST_SetPoint(g, -3, p))
FROM ST_GEomFromText('LINESTRING(0 0, 1 1, 2 2, 3 3, 4 4)') AS g
        , ST_PointN(g,1) as p;
           st_astext
-----------------------
LINESTRING(0 0,1 1,0 0,3 3,4 4)

                        </pre></div><div class="refsection" id="idm7788"><h2>相关信息</h2><p><a class="xref" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>, <a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a>, <a class="xref" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a>, <a class="xref" href="#ST_PointN" title="ST_PointN">ST_PointN</a>, <a class="xref" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a></p></div></div><div class="refentry" id="ST_ShiftLongitude"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ShiftLongitude — 在 -180-180 和 0-360 之间移动几何图形的经度坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ShiftLongitude</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm7808"><h2>描述</h2><p>读取几何图形的所有点/顶点，并将 -180 到 0 度范围内的经度值移动到 180 到 360 度，并将 180 到 360 度范围内的经度值从 -180 度移动到 0 度。 该函数是对称的，因此-180到180度范围内的数据用0到360度范围来表示，0到360度范围内的数据用-180到180度范围来表示。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这仅对具有经度/纬度坐标的数据有用； 例如 SRID 4326（WGS 84 地理坐标系）</p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>1.3.4 之前的错误导致该功能无法用于 MULTIPOINT。 1.3.4 也可与 MULTIPOINT 配合使用。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p class="enhanced">增强功能：2.0.0支持多面体曲面和 TIN 。</p><p>注意：该函数在 2.2.0 中由"ST_Shift_Longitude"重命名</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm7829"><h2>示例</h2><pre class="programlisting">--single point forward transformation
SELECT ST_AsText(ST_ShiftLongitude('SRID=4326;POINT(270 0)'::geometry))

st_astext
----------
POINT(-90 0)


--single point reverse transformation
SELECT ST_AsText(ST_ShiftLongitude('SRID=4326;POINT(-90 0)'::geometry))

st_astext
----------
POINT(270 0)


--for linestrings the functions affects only to the sufficient coordinates
SELECT ST_AsText(ST_ShiftLongitude('SRID=4326;LINESTRING(174 12, 182 13)'::geometry))

st_astext
----------
LINESTRING(174 12,-178 13)
        </pre></div><div class="refsection" id="idm7832"><h2>相关信息</h2><p>
      <a class="xref" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a>
    </p></div></div><div class="refentry" id="ST_WrapX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_WrapX — 将几何体环绕在 X 值周围。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_WrapX</strong>(</code>geometry  <var class="pdparam">geom</var>, float8  <var class="pdparam">wrap</var>, float8  <var class="pdparam">move</var><code>)</code>;</p></div></div><div class="refsection" id="idm7854"><h2>描述</h2><p>此函数分割输入的几何图形，然后按照“move”参数指定的方向移动落在给定“wrap”线右侧（对于负“移动”）或左侧（对于正“移动”）的每个结果组件 ，最终将碎片重新组合在一起。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这对于"重新居中"经纬度输入以使感兴趣的特征不会从一侧生成到另一侧非常有用。 </p></td></tr></table></div><p class="availability">可用性：2.3.0 需要 GEOS</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm7864"><h2>示例</h2><pre class="programlisting">-- Move all components of the given geometries whose bounding box
-- falls completely on the left of x=0 to +360
select ST_WrapX(geom, 0, 360);

-- Move all components of the given geometries whose bounding box
-- falls completely on the left of x=-30 to +360
select ST_WrapX(geom, -30, 360);
        </pre></div><div class="refsection" id="idm7867"><h2>相关信息</h2><p><a class="xref" href="#ST_ShiftLongitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a></p></div></div><div class="refentry" id="ST_SnapToGrid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SnapToGrid — 将输入几何体的所有点捕捉到规则网格。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SnapToGrid</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">originX</var>, float  <var class="pdparam">originY</var>, float  <var class="pdparam">sizeX</var>, float  <var class="pdparam">sizeY</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_SnapToGrid</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">sizeX</var>, float  <var class="pdparam">sizeY</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_SnapToGrid</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">size</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_SnapToGrid</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">pointOrigin</var>, float  <var class="pdparam">sizeX</var>, float  <var class="pdparam">sizeY</var>, float  <var class="pdparam">sizeZ</var>, float  <var class="pdparam">sizeM</var><code>)</code>;</p></div></div><div class="refsection" id="idm7937"><h2>描述</h2><p>概要 1,2,3：将输入几何体的所有点捕捉到由其原点和像元大小定义的网格。 删除落在同一单元上的连续点，如果输出点不足以定义给定类型的几何图形，则最终返回 NULL。 集合中折叠的几何图形将从其中剥离。 对于降低精度很有用。 </p><p>概要4：引入 1.1.0 - 将输入几何体的所有点捕捉到由其原点（第二个参数必须是点）和像元大小定义的网格。将 0 指定为您不想捕捉到网格的任何尺寸的大小。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的几何图形可能会失去其简单性（请参阅<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>）。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在版本 1.1.0 之前，此函数始终返回 2d 几何图形。从 1.1.0 开始，返回的几何图形将具有与输入几何图形相同的维度，但更高的维度值保持不变。使用带有第二个几何参数的版本来定义所有网格尺寸。</p></td></tr></table></div><p class="availability">可用性： 1.0.0RC1</p><p class="availability">可用性：1.1.0 - 添加了对 Z 和 M 值的支持</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm7952"><h2>示例</h2><pre class="programlisting">--Snap your geometries to a precision grid of 10^-3
UPDATE mytable
   SET geom = ST_SnapToGrid(geom, 0.001);

SELECT ST_AsText(ST_SnapToGrid(
                        ST_GeomFromText('LINESTRING(1.1115678 2.123, 4.111111 3.2374897, 4.11112 3.23748667)'),
                        0.001)
                );
                          st_astext
-------------------------------------
 LINESTRING(1.112 2.123,4.111 3.237)
 --Snap a 4d geometry
SELECT ST_AsEWKT(ST_SnapToGrid(
        ST_GeomFromEWKT('LINESTRING(-1.1115678 2.123 2.3456 1.11111,
                4.111111 3.2374897 3.1234 1.1111, -1.11111112 2.123 2.3456 1.1111112)'),
 ST_GeomFromEWKT('POINT(1.12 2.22 3.2 4.4444)'),
 0.1, 0.1, 0.1, 0.01) );
                                                                  st_asewkt
------------------------------------------------------------------------------
 LINESTRING(-1.08 2.12 2.3 1.1144,4.12 3.22 3.1 1.1144,-1.08 2.12 2.3 1.1144)


--With a 4d geometry - the ST_SnapToGrid(geom,size) only touches x and y coords but keeps m and z the same
SELECT ST_AsEWKT(ST_SnapToGrid(ST_GeomFromEWKT('LINESTRING(-1.1115678 2.123 3 2.3456,
                4.111111 3.2374897 3.1234 1.1111)'),
           0.01)      );
                                                st_asewkt
---------------------------------------------------------
 LINESTRING(-1.11 2.12 3 2.3456,4.11 3.24 3.1234 1.1111)

                </pre></div><div class="refsection" id="idm7955"><h2>相关信息</h2><p><a class="xref" href="#ST_Snap" title="ST_Snap">ST_Snap</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a> </p></div></div><div class="refentry" id="ST_Snap"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Snap — 将输入几何体的线段和顶点捕捉到参考几何体的顶点。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Snap</strong>(</code>geometry  <var class="pdparam">input</var>, geometry  <var class="pdparam">reference</var>, float  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm7982"><h2>描述</h2><p>将一个几何体的顶点和边捕捉到另一个几何体的顶点。捕捉距离公差用于控制执行捕捉的位置。 结果几何体是顶点被捕捉的输入几何体。 如果没有发生捕捉，则输入几何体将原样返回。 </p><p>将一个几何体捕捉到另一个几何体可以通过消除几何重合的边（这会在节点和相交计算期间引起问题）来提高叠加操作的可靠性。 </p><p>过多的捕捉可能会导致创建无效的拓扑，因此使用启发式方法确定捕捉顶点的数量和位置，以确定何时可以安全捕捉。 然而，这可能会导致一些潜在的捕捉被忽略。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的几何图形可能已失去其简单性（请参阅<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>）或可能无效（请参阅<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>）。 </p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm7993"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="column1"/><col class="column2"/></colgroup><tbody><tr><td style="text-align: center; border-bottom: 1px solid ; " colspan="2"><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap01.png"/><div class="caption"><p>带有线串的多边形（在任何捕捉之前）</p></div></div></div>
					   </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap02.png"/><div class="caption"><p>将多边形捕捉到线串，公差距离为 1.01。 新的多边形连接到线串</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_AsText(ST_Snap(poly,line, ST_Distance(poly,line)*1.01)) AS polysnapped
FROM (SELECT
   ST_GeomFromText('MULTIPOLYGON(
     ((26 125, 26 200, 126 200, 126 125, 26 125 ),
      ( 51 150, 101 150, 76 175, 51 150 )),
      (( 151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
        ) As foo;

                             polysnapped
---------------------------------------------------------------------
 MULTIPOLYGON(((26 125,26 200,126 200,126 125,101 100,26 125),
 (51 150,101 150,76 175,51 150)),((151 100,151 200,176 175,151 100)))
                                </pre>
					</td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap04.png"/><div class="caption"><p>将多重多边形捕捉到公差为 1.25 的多线串。 新的多边形连接到线串</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_AsText(
    ST_Snap(poly,line, ST_Distance(poly,line)*1.25)
  ) AS polysnapped
FROM (SELECT
  ST_GeomFromText('MULTIPOLYGON(
    (( 26 125, 26 200, 126 200, 126 125, 26 125 ),
      ( 51 150, 101 150, 76 175, 51 150 )),
      (( 151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
        ) As foo;

                             polysnapped
---------------------------------------------------------------------
MULTIPOLYGON(((5 107,26 200,126 200,126 125,101 100,54 84,5 107),
(51 150,101 150,76 175,51 150)),((151 100,151 200,176 175,151 100)))
                                </pre>
						</td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap03.png"/><div class="caption"><p>将线串捕捉到原始多边形，公差距离为 1.01。 新线串将连接到多边形</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_AsText(
   ST_Snap(line, poly, ST_Distance(poly,line)*1.01)
  ) AS linesnapped
FROM (SELECT
  ST_GeomFromText('MULTIPOLYGON(
     ((26 125, 26 200, 126 200, 126 125, 26 125),
      (51 150, 101 150, 76 175, 51 150 )),
      ((151 100, 151 200, 176 175, 151 100)))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
        ) As foo;

              linesnapped
----------------------------------------
 LINESTRING(5 107,26 125,54 84,101 100)
                                </pre><p>
						  </p>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap05.png"/><div class="caption"><p>将线串捕捉到原始多边形，公差距离为 1.25。 新线串将连接到多边形</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_AsText(
 ST_Snap(line, poly, ST_Distance(poly,line)*1.25)
  ) AS linesnapped
FROM (SELECT
  ST_GeomFromText('MULTIPOLYGON(
     (( 26 125, 26 200, 126 200, 126 125, 26 125 ),
      (51 150, 101 150, 76 175, 51 150 )),
      ((151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
        ) As foo;
              linesnapped
---------------------------------------
LINESTRING(26 125,54 84,101 100)
                                </pre>
					</td></tr></tbody></table></div></div><div class="refsection" id="idm8048"><h2>相关信息</h2><p>
		<a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>
		</p></div></div><div class="refentry" id="ST_SwapOrdinates"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SwapOrdinates — 返回更改后的几何图形，其中交换了给定的坐标值。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SwapOrdinates</strong>(</code>geometry <var class="pdparam">geom</var>, cstring <var class="pdparam">ords</var><code>)</code>;</p></div></div><div class="refsection" id="idm8067"><h2>描述</h2><p>返回一个几何图形，其中给定坐标的值在给定几何图形中交换。 </p><p><code class="varname">ords</code> 参数是一个两个字符的字符串，指定要交换的坐标。有效名称为：x、y、z 和 m。 </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm8093"><h2>示例</h2><pre class="programlisting">-- Scale M value by 2
SELECT ST_AsText(
  ST_SwapOrdinates(
    ST_Scale(
      ST_SwapOrdinates(g,'xm'),
      2, 1
    ),
  'xm')
) FROM ( SELECT 'POINT ZM (0 0 0 2)'::geometry g ) foo;
     st_astext
--------------------
 POINT ZM (0 0 0 4)
                 </pre></div><div class="refsection" id="idm8096"><h2>相关信息</h2><p> <a class="xref" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> </p></div></div></section><section class="section" id="Geometry_Validation"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.6. 几何有效性验证</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数用于根据OGC SFS（Open Geospatial Consortium Simple Feature Specification，开放地理空间联盟简单要素规范）标准验证几何数据是否有效。它们还提供有关无效性质和位置的信息。此外，还有一个函数可用于从无效的几何数据中创建有效的几何数据。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_IsValid">ST_IsValid</a></span><span class="refpurpose"> — 测试几何图形在 2D 中是否有效。 </span></li><li><span class="refentrytitle"><a href="#ST_IsValidDetail">ST_IsValidDetail</a></span><span class="refpurpose"> — 返回 <code class="varname">valid_detail</code> 行，说明几何图形是否有效或无效，说明原因和位置。</span></li><li><span class="refentrytitle"><a href="#ST_IsValidReason">ST_IsValidReason</a></span><span class="refpurpose"> — 返回说明几何图形是否有效或无效原因的文本。</span></li><li><span class="refentrytitle"><a href="#ST_MakeValid">ST_MakeValid</a></span><span class="refpurpose"> — 尝试在不丢失顶点的情况下使无效几何体有效。</span></li></ul></div><div class="refentry" id="ST_IsValid"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsValid — 测试几何图形在 2D 中是否有效。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsValid</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsValid</strong>(</code>geometry  <var class="pdparam">g</var>, integer  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" id="idm8126"><h2>描述</h2><p>根据 OGC 规则测试 ST_Geometry 值在 2D 中是否格式良好且有效。 对于 3 维和 4 维几何形状，有效性仍然仅在 2 维中进行测试。 对于无效的几何图形，会发出 PostgreSQL NOTICE，提供其无效原因的详细信息。 </p><p>对于带有 <code class="varname">flags</code> 参数的版本，支持的值记录在 <a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a> 中。此版本不会打印解释无效性的通知。 </p><p>有关几何有效性定义的更多信息，请参阅第 <a class="xref" href="#OGC_Validity" title="4.4. 几何有效性验证">Section 4.4, “几何有效性验证”</a> </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>SQL-MM 将 ST_IsValid(NULL) 的结果定义为 0，而 PostGIS 返回 NULL。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p>接受标志的版本从 2.0.0 开始可用。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.9</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OGC-SFS 和 SQL-MM 规范均不包含 ST_IsValid 的标志参数。 该标志是 PostGIS 扩展。 </p></td></tr></table></div></div><div class="refsection" id="idm8149"><h2>示例</h2><pre class="programlisting">SELECT ST_IsValid(ST_GeomFromText('LINESTRING(0 0, 1 1)')) As good_line,
        ST_IsValid(ST_GeomFromText('POLYGON((0 0, 1 1, 1 2, 1 1, 0 0))')) As bad_poly
--results
NOTICE:  Self-intersection at or near point 0 0
 good_line | bad_poly
-----------+----------
 t         | f
</pre></div><div class="refsection" id="idm8152"><h2>相关信息</h2><p><a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>, <a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>, </p></div></div><div class="refentry" id="ST_IsValidDetail"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsValidDetail — 返回 <code class="varname">valid_detail</code> 行，说明几何图形是否有效或无效，说明原因和位置。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">valid_detail <strong class="fsfunc">ST_IsValidDetail</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" id="idm8174"><h2>描述</h2><p>返回一个 <code class="varname">valid_detail</code> 行，其中包含一个boolean（<code class="varname">有效</code>），说明几何图形是否有效；一个 varchar（<code class="varname">原因</code>），说明其无效原因；以及一个 geometry（<code class="varname">位置</code>），指出其无效位置。</p><p>有助于改进 <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>和<a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>的组合，以生成无效几何的详细报告。</p><p>可选的 <code class="varname">flags</code> 参数是一个位字段。 它可以具有以下值： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0：使用常用的 OGC SFS 有效性语义。 </p></li><li class="listitem"><p>1：考虑某些类型的自接触环（倒壳和倒孔）是有效的。 这也称为“ESRI 标志”，因为这是这些工具使用的有效性模型。 注意，这在 OGC 模型下是无效的。 </p></li></ul></div><p>
		</p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm8193"><h2>示例</h2><pre class="programlisting">

--First 3 Rejects from a successful quintuplet experiment
SELECT gid, reason(ST_IsValidDetail(geom)), ST_AsText(location(ST_IsValidDetail(geom))) as location
FROM
(SELECT ST_MakePolygon(ST_ExteriorRing(e.buff), array_agg(f.line)) As geom, gid
FROM (SELECT ST_Buffer(ST_Point(x1*10,y1), z1) As buff, x1*10 + y1*100 + z1*1000 As gid
        FROM generate_series(-4,6) x1
        CROSS JOIN generate_series(2,5) y1
        CROSS JOIN generate_series(1,8) z1
        WHERE x1 
&gt; y1*0.5 AND z1 &lt; x1*y1) As e
        INNER JOIN (SELECT ST_Translate(ST_ExteriorRing(ST_Buffer(ST_Point(x1*10,y1), z1)),y1*1, z1*2) As line
        FROM generate_series(-3,6) x1
        CROSS JOIN generate_series(2,5) y1
        CROSS JOIN generate_series(1,10) z1
        WHERE x1 
&gt; y1*0.75 AND z1 &lt; x1*y1) As f
ON (ST_Area(e.buff) 
&gt; 78 AND ST_Contains(e.buff, f.line))
GROUP BY gid, e.buff) As quintuplet_experiment
WHERE ST_IsValid(geom) = false
ORDER BY gid
LIMIT 3;

 gid  |      reason       |  location
------+-------------------+-------------
 5330 | Self-intersection | POINT(32 5)
 5340 | Self-intersection | POINT(42 5)
 5350 | Self-intersection | POINT(52 5)

 --simple example
SELECT * FROM ST_IsValidDetail('LINESTRING(220227 150406,2220227 150407,222020 150410)');

 valid | reason | location
-------+--------+----------
 t     |        |


</pre></div><div class="refsection" id="idm8196"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a> </p></div></div><div class="refentry" id="ST_IsValidReason"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsValidReason — 返回说明几何图形是否有效或无效原因的文本。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_IsValidReason</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_IsValidReason</strong>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" id="idm8222"><h2>描述</h2><p>返回文本，说明几何图形是否有效，如果无效，则说明原因。</p><p>与 <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a> 结合使用可生成无效几何形状和原因的详细报告。</p><p>允许的<code class="varname">flags</code>记录在<a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a> 中。 </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">有效性：1.4</p><p class="availability">有效性：2.0 版本正在接受标记。</p></div><div class="refsection" id="idm8233"><h2>示例</h2><pre class="programlisting">-- invalid bow-tie polygon
SELECT ST_IsValidReason(
    'POLYGON ((100 200, 100 100, 200 200,
     200 100, 100 200))'::geometry) as validity_info;
validity_info
--------------------------
Self-intersection[150 150]
        </pre><pre class="programlisting">

--First 3 Rejects from a successful quintuplet experiment
SELECT gid, ST_IsValidReason(geom) as validity_info
FROM
(SELECT ST_MakePolygon(ST_ExteriorRing(e.buff), array_agg(f.line)) As geom, gid
FROM (SELECT ST_Buffer(ST_Point(x1*10,y1), z1) As buff, x1*10 + y1*100 + z1*1000 As gid
        FROM generate_series(-4,6) x1
        CROSS JOIN generate_series(2,5) y1
        CROSS JOIN generate_series(1,8) z1
        WHERE x1 
&gt; y1*0.5 AND z1 &lt; x1*y1) As e
        INNER JOIN (SELECT ST_Translate(ST_ExteriorRing(ST_Buffer(ST_Point(x1*10,y1), z1)),y1*1, z1*2) As line
        FROM generate_series(-3,6) x1
        CROSS JOIN generate_series(2,5) y1
        CROSS JOIN generate_series(1,10) z1
        WHERE x1 
&gt; y1*0.75 AND z1 &lt; x1*y1) As f
ON (ST_Area(e.buff) 
&gt; 78 AND ST_Contains(e.buff, f.line))
GROUP BY gid, e.buff) As quintuplet_experiment
WHERE ST_IsValid(geom) = false
ORDER BY gid
LIMIT 3;

 gid  |      validity_info
------+--------------------------
 5330 | Self-intersection [32 5]
 5340 | Self-intersection [42 5]
 5350 | Self-intersection [52 5]

 --simple example
SELECT ST_IsValidReason('LINESTRING(220227 150406,2220227 150407,222020 150410)');

 st_isvalidreason
------------------
 Valid Geometry


</pre></div><div class="refsection" id="idm8237"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_Summary" title="ST_Summary">ST_Summary</a></p></div></div><div class="refentry" id="ST_MakeValid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeValid — 尝试在不丢失顶点的情况下使无效几何体有效。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeValid</strong>(</code>geometry <var class="pdparam">input</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeValid</strong>(</code>geometry <var class="pdparam">input</var>, text <var class="pdparam">params</var><code>)</code>;</p></div></div><div class="refsection" id="idm8263"><h2>描述</h2><p>该函数尝试创建给定无效几何体的有效表示，而不丢失任何输入顶点。 有效几何图形原封不动地返回。 </p><p>相应的输入是点、多点、线串、多线串、多边形、多多边形、几何集合及其混合。 </p><p>在完全或部分尺寸折叠的情况下，输出几何是相同或较低维度的几何集合，或者是较低维度几何的集合。 </p><p>在自相交的情况下，单个多边形可能会变成多重几何图形。 </p><p><code class="varname">params</code>参数可用于提供选项字符串来选择用于构建有效几何图形的方法。 选项字符串的格式为“method=linework|struct keepcollapsed=true|false”。 如果未提供“params”参数，则将使用“linework”算法作为默认值。 </p><p>“method”键有两个值。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>“linework”是原始算法，它通过首先提取所有线条、将线条节点在一起、然后从线条构建值输出来构建有效的几何图形。</p></li><li class="listitem"><p>“structure”是一种区分内环和外环的算法，通过合并外环来构建新的几何形状，然后区分所有内环。</p></li></ul></div><p>"keepcollapsed" 键仅对 "structure" 算法有效，其取值为 "true" 或 "false"。当设置为 "false" 时，会删除折叠到更低维度的几何组件，例如一维线串（linestring）会被丢弃。 </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.0.1 速度提升</p><p class="enhanced">增强：2.1.0添加了对几何集合和多点的支持。</p><p class="enhanced">增强：3.1.0删除了具有NaN值的坐标。</p><p class="enhanced">增强：在 3.2.0 中，添加了可选的算法参数“linework”和“structure”。 需要 GEOS&gt;= 3.10.0 或更高版本。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm8288"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_makevalid01.png"/><div class="caption"><p>before_geom：由两个重叠多边形组成的多多边形</p></div></div></div><p>
                          </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_makevalid02.png"/><div class="caption"><p>after_geom：具有四个非重叠多边形的多多边形</p></div></div></div><p>
                          </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_makevalid05.png"/><div class="caption"><p>after_geom_structure：由单个非重叠多边形组成的多多边形</p></div></div></div><p>
                </p><pre class="programlisting">SELECT f.geom AS before_geom, ST_MakeValid(f.geom) AS after_geom, ST_MakeValid(f.geom, 'method=structure') AS after_geom_structure
FROM (SELECT 'MULTIPOLYGON(((186 194,187 194,188 195,189 195,190 195,
191 195,192 195,193 194,194 194,194 193,195 192,195 191,
195 190,195 189,195 188,194 187,194 186,14 6,13 6,12 5,11 5,
10 5,9 5,8 5,7 6,6 6,6 7,5 8,5 9,5 10,5 11,5 12,6 13,6 14,186 194)),
((150 90,149 80,146 71,142 62,135 55,128 48,119 44,110 41,100 40,
90 41,81 44,72 48,65 55,58 62,54 71,51 80,50 90,51 100,
54 109,58 118,65 125,72 132,81 136,90 139,100 140,110 139,
119 136,128 132,135 125,142 118,146 109,149 100,150 90)))'::geometry AS geom) AS f;</pre><p>
            </p>
            </td></tr><tr><td><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_makevalid03.png"/><div class="caption"><p>before_geom：由六个重叠多边形组成的多多边形</p></div></div></div><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_makevalid04.png"/><div class="caption"><p>after_geom：由 14 个不重叠多边形组成的多多边形</p></div></div></div><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_makevalid06.png"/><div class="caption"><p>after_geom_structure：由单个非重叠多边形组成的多多边形</p></div></div></div><p>
                </p><pre class="programlisting">SELECT c.geom AS before_geom,
                    ST_MakeValid(c.geom) AS after_geom,
                    ST_MakeValid(c.geom, 'method=structure') AS after_geom_structure
        FROM (SELECT 'MULTIPOLYGON(((91 50,79 22,51 10,23 22,11 50,23 78,51 90,79 78,91 50)),
                  ((91 100,79 72,51 60,23 72,11 100,23 128,51 140,79 128,91 100)),
                  ((91 150,79 122,51 110,23 122,11 150,23 178,51 190,79 178,91 150)),
                  ((141 50,129 22,101 10,73 22,61 50,73 78,101 90,129 78,141 50)),
                  ((141 100,129 72,101 60,73 72,61 100,73 128,101 140,129 128,141 100)),
                  ((141 150,129 122,101 110,73 122,61 150,73 178,101 190,129 178,141 150)))'::geometry AS geom) AS c;</pre><p>
            </p></td></tr></tbody></table></div></div><div class="refsection" id="idm8337"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_MakeValid(
    'LINESTRING(0 0, 0 0)',
    'method=structure keepcollapsed=true'
    ));

 st_astext
------------
 POINT(0 0)


SELECT ST_AsText(ST_MakeValid(
    'LINESTRING(0 0, 0 0)',
    'method=structure keepcollapsed=false'
    ));

    st_astext
------------------
 LINESTRING EMPTY</pre></div><div class="refsection" id="idm8340"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a> </p></div></div></section><section class="section" id="SRS_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.7. 空间参考系统功能</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数与在 <code class="varname">spatial_ref_sys</code> 表中定义的几何空间参考系统一起使用。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_InverseTransformPipeline">ST_InverseTransformPipeline</a></span><span class="refpurpose"> — 返回一个新的几何体，其坐标值使用定义的坐标变换管道的逆变换变换到不同的空间参考系。</span></li><li><span class="refentrytitle"><a href="#ST_SetSRID">ST_SetSRID</a></span><span class="refpurpose"> — 在几何体上设置 SRID。</span></li><li><span class="refentrytitle"><a href="#ST_SRID">ST_SRID</a></span><span class="refpurpose"> — 返回几何图形的空间参考标识符。</span></li><li><span class="refentrytitle"><a href="#ST_Transform">ST_Transform</a></span><span class="refpurpose"> — 返回坐标转换为不同空间参考系的新几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_TransformPipeline">ST_TransformPipeline</a></span><span class="refpurpose"> — 返回一个新的几何图形，其坐标使用定义的坐标转换管道转换为不同的空间参考系统。</span></li><li><span class="refentrytitle"><a href="#postgis_srs_codes">postgis_srs_codes</a></span><span class="refpurpose"> — 返回与给定权限关联的 SRS 代码列表。</span></li><li><span class="refentrytitle"><a href="#postgis_srs">postgis_srs</a></span><span class="refpurpose"> — 返回所请求的权限和 srid 的元数据记录。</span></li><li><span class="refentrytitle"><a href="#postgis_srs_all">postgis_srs_all</a></span><span class="refpurpose"> — 返回底层 Proj 数据库中每个空间参考系统的元数据记录。</span></li><li><span class="refentrytitle"><a href="#postgis_srs_search">postgis_srs_search</a></span><span class="refpurpose"> — 返回具有完全包含边界参数的使用区域的投影坐标系的元数据记录。</span></li></ul></div><div class="refentry" id="ST_InverseTransformPipeline"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_InverseTransformPipeline — 返回一个新的几何体，其坐标值使用定义的坐标变换管道的逆变换变换到不同的空间参考系。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_InverseTransformPipeline</strong>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">pipeline</var>, integer  <var class="pdparam">to_srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8370"><h2>描述</h2><p>返回一个新的几何体，其坐标值使用定义的坐标变换管道的逆变换变换到不同的空间参考系。 </p><p>有关编写转换管道的详细信息，请参阅 <a class="xref" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a>。</p><p class="availability">可用性：3.4.0</p><p>输入几何体的 SRID 将被忽略，输出几何体的 SRID 将设置为零，除非通过可选的 <code class="varname">to_srid</code>参数提供值。 使用 <a class="xref" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a> 时，管道将向前执行。 使用“ST_InverseTransformPipeline()”，管道以相反方向执行。</p><p>使用管道的转换是<a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a> 的专门版本。 在大多数情况下，“ST_Transform”将选择正确的操作在坐标系之间进行转换，并且应该是首选。</p></div><div class="refsection" id="idm8381"><h2>示例</h2><p>使用 EPSG:16031 转换将 WGS 84 经纬度更改为 UTM 31N</p><pre class="programlisting">-- Inverse direction
SELECT ST_AsText(ST_InverseTransformPipeline('POINT(426857.9877165967 5427937.523342293)'::geometry,
  'urn:ogc:def:coordinateOperation:EPSG::16031')) AS wgs_geom;

          wgs_geom
----------------------------
 POINT(2 48.99999999999999)
(1 row)
    </pre><p>GDA2020示例。</p><pre class="programlisting">-- using ST_Transform with automatic selection of a conversion pipeline.
SELECT ST_AsText(ST_Transform('SRID=4939;POINT(143.0 -37.0)'::geometry, 7844)) AS gda2020_auto;

                 gda2020_auto
-----------------------------------------------
 POINT(143.00000635638918 -36.999986706128176)
(1 row)
    </pre></div><div class="refsection" id="idm8387"><h2>相关信息</h2><p><a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a></p></div></div><div class="refentry" id="ST_SetSRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetSRID — 在几何体上设置 SRID。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SetSRID</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8407"><h2>描述</h2><p>将几何图形的 SRID 设置为特定的整数值。 用于为查询生成边界框。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不会变换几何，它仅设置定义几何所需的空间参考系统的元数据。 如果要将几何图形转换为新投影，请使用<a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a> 。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm8422"><h2>示例</h2><p>-- 将点设置为 WGS84 经纬度 --</p><pre class="programlisting">SELECT ST_SetSRID(ST_Point(-123.365556, 48.428611),4326) As wgs84long_lat;
-- the ewkt representation (wrap with ST_AsEWKT) -
SRID=4326;POINT(-123.365556 48.428611)
      </pre><p>-- 将点设置为 WGS84 经纬度，并将其转换为web mercator（球面墨卡托） --</p><pre class="programlisting">SELECT ST_Transform(ST_SetSRID(ST_Point(-123.365556, 48.428611),4326),3785) As spere_merc;
-- the ewkt representation (wrap with ST_AsEWKT) -
SRID=3785;POINT(-13732990.8753491 6178458.96425423)
      </pre></div><div class="refsection" id="idm8428"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a></p></div></div><div class="refentry" id="ST_SRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SRID — 返回几何图形的空间参考标识符。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_SRID</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm8447"><h2>描述</h2><p>返回ST_Geometry spatial_ref_sys表中定义的空间参考系统标识号。 请参见 <a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a></p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>spatial_ref_sys表对 PostGIS 已知的所有参考系进行编目，并用于从一个空间参考系转换为另一个空间参考系。 如果计划转换几何，请务必确保具有正确的空间参考系统标识号。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm8467"><h2>示例</h2><pre class="programlisting">SELECT ST_SRID(ST_GeomFromText('POINT(-71.1043 42.315)',4326));
    --result
    4326
    </pre></div><div class="refsection" id="idm8470"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#TG_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_Transform"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Transform — 返回坐标转换为不同空间参考系的新几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Transform</strong>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Transform</strong>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">to_proj</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Transform</strong>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">from_proj</var>, text  <var class="pdparam">to_proj</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Transform</strong>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">from_proj</var>, integer  <var class="pdparam">to_srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8526"><h2>描述</h2><p>返回一个新的几何图形，其坐标转换为不同的空间参考系统。 目标空间参考<code class="varname">to_srid</code>可以通过有效的 SRID 整数参数来标识（即，它必须存在于<code class="varname">spatial_ref_sys</code>表中）。 或者，定义为 PROJ.4 字符串的空间参考可用于 <code class="varname">to_proj</code> 和/或 <code class="varname">from_proj</code>，但这些方法并未经过优化。 如果目标空间参考系使用 PROJ.4 字符串而不是 SRID 表示，则输出几何的 SRID 将设置为零。 除了 <code class="varname">from_proj</code>的函数之外，输入几何图形必须具有已定义的 SRID。 </p><p>ST_Transform 经常与<a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 混淆。 ST_Transform 实际上将几何图形的坐标从一个空间参考系统更改为另一个空间参考系统，而 ST_SetSRID() 只是更改几何图形的 SRID 标识符。</p><p>ST_Transform 会在给定源和目标空间参考系统的情况下自动选择合适的转换管道。 要使用特定的转换方法，请使用<a class="xref" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostGIS 必须在 PROJ 支持下进行编译。 使用该 <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>检查它是否在 PROJ 支持下编译。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果使用多个转换，则在常用转换上拥有一个功能索引以充分利用索引的使用是很有用的。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p class="enhanced">增强：2.3.0 引入了对直接 PROJ.4 字符串的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.6</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm8559"><h2>示例</h2><p>将马萨诸塞州平面美国英尺几何形状更改为 WGS 84 经纬度</p><pre class="programlisting">SELECT ST_AsText(ST_Transform(ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,
  743265 2967450,743265.625 2967416,743238 2967416))',2249),4326)) As wgs_geom;

 wgs_geom
---------------------------
 POLYGON((-71.1776848522251 42.3902896512902,-71.1776843766326 42.3903829478009,
-71.1775844305465 42.3903826677917,-71.1775825927231 42.3902893647987,-71.177684
8522251 42.3902896512902));
(1 row)

--3D Circular String example
SELECT ST_AsEWKT(ST_Transform(ST_GeomFromEWKT('SRID=2249;CIRCULARSTRING(743238 2967416 1,743238 2967450 2,743265 2967450 3,743265.625 2967416 3,743238 2967416 4)'),4326));

         st_asewkt
--------------------------------------------------------------------------------------
 SRID=4326;CIRCULARSTRING(-71.1776848522251 42.3902896512902 1,-71.1776843766326 42.3903829478009 2,
 -71.1775844305465 42.3903826677917 3,
 -71.1775825927231 42.3902893647987 3,-71.1776848522251 42.3902896512902 4)

    </pre><p>创建部分功能索引的示例。 对于不确定所有几何图形都将被填充的表，最好使用部分索引来省略空几何图形，这既可以节省空间，又可以使索引更小、更高效。</p><pre class="programlisting">CREATE INDEX idx_geom_26986_parcels
  ON parcels
  USING gist
  (ST_Transform(geom, 26986))
  WHERE geom IS NOT NULL;
    </pre><p>使用 PROJ.4 文本通过自定义空间参考进行转换的示例。</p><pre class="programlisting">-- Find intersection of two polygons near the North pole, using a custom Gnomic projection
-- See http://boundlessgeo.com/2012/02/flattening-the-peel/
 WITH data AS (
   SELECT
     ST_GeomFromText('POLYGON((170 50,170 72,-130 72,-130 50,170 50))', 4326) AS p1,
     ST_GeomFromText('POLYGON((-170 68,-170 90,-141 90,-141 68,-170 68))', 4326) AS p2,
     '+proj=gnom +ellps=WGS84 +lat_0=70 +lon_0=-160 +no_defs'::text AS gnom
 )
 SELECT ST_AsText(
   ST_Transform(
     ST_Intersection(ST_Transform(p1, gnom), ST_Transform(p2, gnom)),
   gnom, 4326))
 FROM data;
                                          st_astext
 --------------------------------------------------------------------------------
  POLYGON((-170 74.053793645338,-141 73.4268621378904,-141 68,-170 68,-170 74.053793645338))
    </pre></div><div class="refsection" id="idm8567"><h2>配置转换行为</h2><p>有时，涉及网格移位的坐标转换可能会失败，例如，如果 PROJ.4 尚未使用网格移位文件构建，或者坐标不在定义网格移位的范围内。 默认情况下，如果网格偏移文件不存在，PostGIS 将抛出错误，但可以通过测试 PROJ.4 文本的不同 <code class="varname">to_proj</code> 值或更改 <code class="varname">Spatial_ref_sys </code>表中的 <code class="varname">proj4text </code>值，在每个 SRID 的基础上配置此行为 。 </p><p>例如，proj4text 参数 datum=NAD87 是以下 nadgrids 参数的简写形式：</p><pre class="programlisting">+nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat</pre><p>@ 前缀意味着如果文件不存在，则不会报告错误，但如果到达列表末尾而没有合适的文件（即找到并重叠），则会发出错误。</p><p>相反，如果您想确保至少存在标准文件，但如果扫描所有文件而没有命中，则应用空转换，您可以使用：</p><pre class="programlisting">+nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat,null</pre><p>空网格平移文件是覆盖整个世界并且不应用平移的有效网格平移文件。 因此，对于一个完整的示例，如果您想更改 PostGIS，以便转换到不在正确范围内的 SRID 4267 时不会引发错误，您可以使用以下命令：</p><pre class="programlisting">UPDATE spatial_ref_sys SET proj4text = '+proj=longlat +ellps=clrk66 +nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat,null +no_defs' WHERE srid = 4267;</pre></div><div class="refsection" id="idm8580"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a>, <a class="xref" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a></p></div></div><div class="refentry" id="ST_TransformPipeline"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_TransformPipeline — 返回一个新的几何图形，其坐标使用定义的坐标转换管道转换为不同的空间参考系统。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_TransformPipeline</strong>(</code>geometry  <var class="pdparam">g1</var>, text  <var class="pdparam">pipeline</var>, integer  <var class="pdparam">to_srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8606"><h2>描述</h2><p>返回一个新的几何图形，其坐标使用定义的坐标转换管道转换为不同的空间参考系统。 </p><p>转换管道使用以下任意字符串格式定义： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">urn:ogc:def:coordinateOperation:AUTHORITY::CODE</code>。 请注意，简单的 <code class="varname">EPSG:CODE</code> 字符串不能唯一标识坐标操作：相同的 EPSG 代码可用于 CRS 定义。 </p></li><li class="listitem"><p>PROJ 管道字符串的形式为： <code class="varname">proj=pipeline .... </code>将不会应用自动轴规范化，并且如有必要，调用者将需要添加额外的管道步骤，或删除 <code class="varname">axisswap </code>步骤。 </p></li><li class="listitem"><p>形式的串联操作：<code class="varname">urn:ogc:def:coordinateOperation,coordinateOperation:EPSG::3895,coordinateOperation:EPSG::1618</code>。 </p></li></ul></div><p>
    </p><p class="availability">可用性：3.4.0</p><p>输入几何体的 SRID 将被忽略，输出几何体的 SRID 将设置为零，除非通过可选的 <code class="varname">to_srid</code> 参数提供值。 当使用“ST_TransformPipeline()”时，管道将向前执行。 使用 <a class="xref" href="#ST_InverseTransformPipeline" title="ST_InverseTransformPipeline">ST_InverseTransformPipeline</a>管道以相反方向执行。</p><p>使用管道的转换是<a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a> 的专门版本。 在大多数情况下，“ST_Transform”将选择正确的操作在坐标系之间进行转换，并且应该是首选。</p></div><div class="refsection" id="idm8628"><h2>示例</h2><p>使用 EPSG:16031 转换将 WGS 84 经纬度更改为 UTM 31N</p><pre class="programlisting">-- Forward direction
SELECT ST_AsText(ST_TransformPipeline('SRID=4326;POINT(2 49)'::geometry,
  'urn:ogc:def:coordinateOperation:EPSG::16031')) AS utm_geom;

                  utm_geom
--------------------------------------------
 POINT(426857.9877165967 5427937.523342293)
(1 row)

-- Inverse direction
SELECT ST_AsText(ST_InverseTransformPipeline('POINT(426857.9877165967 5427937.523342293)'::geometry,
  'urn:ogc:def:coordinateOperation:EPSG::16031')) AS wgs_geom;

          wgs_geom
----------------------------
 POINT(2 48.99999999999999)
(1 row)
    </pre><p>GDA2020示例。</p><pre class="programlisting">-- using ST_Transform with automatic selection of a conversion pipeline.
SELECT ST_AsText(ST_Transform('SRID=4939;POINT(143.0 -37.0)'::geometry, 7844)) AS gda2020_auto;

                 gda2020_auto
-----------------------------------------------
 POINT(143.00000635638918 -36.999986706128176)
(1 row)

-- using a defined conversion (EPSG:8447)
SELECT ST_AsText(ST_TransformPipeline('SRID=4939;POINT(143.0 -37.0)'::geometry,
  'urn:ogc:def:coordinateOperation:EPSG::8447')) AS gda2020_code;

                   gda2020_code
----------------------------------------------
 POINT(143.0000063280214 -36.999986718287545)
(1 row)

-- using a PROJ pipeline definition matching EPSG:8447, as returned from
-- 'projinfo -s EPSG:4939 -t EPSG:7844'.
-- NOTE: any 'axisswap' steps must be removed.
SELECT ST_AsText(ST_TransformPipeline('SRID=4939;POINT(143.0 -37.0)'::geometry,
  '+proj=pipeline
   +step +proj=unitconvert +xy_in=deg +xy_out=rad
   +step +proj=hgridshift +grids=au_icsm_GDA94_GDA2020_conformal_and_distortion.tif
   +step +proj=unitconvert +xy_in=rad +xy_out=deg')) AS gda2020_pipeline;

                   gda2020_pipeline
----------------------------------------------
 POINT(143.0000063280214 -36.999986718287545)
(1 row)
    </pre></div><div class="refsection" id="idm8634"><h2>相关信息</h2><p><a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#ST_InverseTransformPipeline" title="ST_InverseTransformPipeline">ST_InverseTransformPipeline</a></p></div></div><div class="refentry" id="postgis_srs_codes"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis_srs_codes — 返回与给定权限关联的 SRS 代码列表。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof text <strong class="fsfunc">postgis_srs_codes</strong>(</code>text  <var class="pdparam">auth_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm8651"><h2>描述</h2><p>返回给定 <code class="varname">auth_name </code>的所有<code class="varname"> auth_srid</code> 的集合。</p><p class="availability">可用性：3.4.0</p><p>Proj version 6+</p></div><div class="refsection" id="idm8658"><h2>示例</h2><p>获取与 EPSG 权威机构关联的前 10 个代码的列表。</p><pre class="programlisting">SELECT * FROM postgis_srs_codes('EPSG') LIMIT 10;

 postgis_srs_codes
-------------------
 2000
 20004
 20005
 20006
 20007
 20008
 20009
 2001
 20010
 20011
    </pre></div><div class="refsection" id="idm8662"><h2>相关信息</h2><p><a class="xref" href="#postgis_srs" title="postgis_srs">postgis_srs</a>, <a class="xref" href="#postgis_srs_all" title="postgis_srs_all">postgis_srs_all</a>, <a class="xref" href="#postgis_srs_search" title="postgis_srs_search">postgis_srs_search</a></p></div></div><div class="refentry" id="postgis_srs"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis_srs — 返回所请求的权限和 srid 的元数据记录。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">postgis_srs</strong>(</code>text  <var class="pdparam">auth_name</var>, text  <var class="pdparam">auth_srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8683"><h2>描述</h2><p>返回给定<code class="varname"> auth_name </code>所请求的 <code class="varname">auth_srid</code> 的元数据记录。 该记录将包含 <code class="varname">auth_name</code>、<code class="varname">auth_srid</code>、<code class="varname">srname</code>、<code class="varname">srtext</code>、<code class="varname">proj4text</code> 以及使用区域的角点 <code class="varname">point_sw </code>和<code class="varname"> point_ne</code>。</p><p class="availability">可用性：3.4.0</p><p>Proj version 6+</p></div><div class="refsection" id="idm8697"><h2>示例</h2><p>获取 EPSG 的元数据：3005。</p><pre class="programlisting">SELECT * FROM postgis_srs('EPSG', '3005');

auth_name | EPSG
auth_srid | 3005
srname    | NAD83 / BC Albers
srtext    | PROJCS["NAD83 / BC Albers", ... ]]
proj4text | +proj=aea +lat_0=45 +lon_0=-126 +lat_1=50 +lat_2=58.5 +x_0=1000000 +y_0=0 +datum=NAD83 +units=m +no_defs +type=crs
point_sw  | 0101000020E6100000E17A14AE476161C00000000000204840
point_ne  | 0101000020E610000085EB51B81E855CC0E17A14AE47014E40
    </pre></div><div class="refsection" id="idm8701"><h2>相关信息</h2><p><a class="xref" href="#postgis_srs_codes" title="postgis_srs_codes">postgis_srs_codes</a>, <a class="xref" href="#postgis_srs_all" title="postgis_srs_all">postgis_srs_all</a>, <a class="xref" href="#postgis_srs_search" title="postgis_srs_search">postgis_srs_search</a></p></div></div><div class="refentry" id="postgis_srs_all"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis_srs_all — 返回底层 Proj 数据库中每个空间参考系统的元数据记录。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">postgis_srs_all</strong>(</code><code>void)</code>;</p></div></div><div class="refsection" id="idm8717"><h2>描述</h2><p>返回底层 Proj 数据库中所有元数据记录的集合。 这些记录将包含<code class="varname"> auth_name</code>、<code class="varname">auth_srid</code>、<code class="varname">srname</code>、<code class="varname">srtext</code>、<code class="varname">proj4text </code>以及使用区域的角点 <code class="varname">point_sw</code> 和 <code class="varname">point_ne</code>。</p><p class="availability">可用性：3.4.0</p><p>Proj version 6+</p></div><div class="refsection" id="idm8729"><h2>示例</h2><p>从 Proj 数据库中获取前 10 条元数据记录。</p><pre class="programlisting">SELECT auth_name, auth_srid, srname FROM postgis_srs_all() LIMIT 10;

 auth_name | auth_srid |                  srname
-----------+-----------+------------------------------------------
 EPSG      | 2000      | Anguilla 1957 / British West Indies Grid
 EPSG      | 20004     | Pulkovo 1995 / Gauss-Kruger zone 4
 EPSG      | 20005     | Pulkovo 1995 / Gauss-Kruger zone 5
 EPSG      | 20006     | Pulkovo 1995 / Gauss-Kruger zone 6
 EPSG      | 20007     | Pulkovo 1995 / Gauss-Kruger zone 7
 EPSG      | 20008     | Pulkovo 1995 / Gauss-Kruger zone 8
 EPSG      | 20009     | Pulkovo 1995 / Gauss-Kruger zone 9
 EPSG      | 2001      | Antigua 1943 / British West Indies Grid
 EPSG      | 20010     | Pulkovo 1995 / Gauss-Kruger zone 10
 EPSG      | 20011     | Pulkovo 1995 / Gauss-Kruger zone 11    </pre></div><div class="refsection" id="idm8733"><h2>相关信息</h2><p><a class="xref" href="#postgis_srs_codes" title="postgis_srs_codes">postgis_srs_codes</a>, <a class="xref" href="#postgis_srs" title="postgis_srs">postgis_srs</a>, <a class="xref" href="#postgis_srs_search" title="postgis_srs_search">postgis_srs_search</a></p></div></div><div class="refentry" id="postgis_srs_search"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis_srs_search — 返回具有完全包含边界参数的使用区域的投影坐标系的元数据记录。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">postgis_srs_search</strong>(</code>geometry  <var class="pdparam">bounds</var>, text  <var class="pdparam">auth_name=EPSG</var><code>)</code>;</p></div></div><div class="refsection" id="idm8754"><h2>描述</h2><p>返回投影坐标系的一组元数据记录，这些坐标系的使用区域完全包含边界参数。 每条记录将包含 <code class="varname">auth_name</code>、<code class="varname">auth_srid</code>、<code class="varname">srname</code>、<code class="varname">srtext</code>、<code class="varname">proj4text </code>以及使用区域的角点 <code class="varname">point_sw</code> 和<code class="varname"> point_ne</code>。 </p><p>该搜索仅查找投影坐标系，旨在让用户探索适用于其数据范围的可能坐标系统。</p><p class="availability">可用性：3.4.0</p><p>Proj version 6+</p></div><div class="refsection" id="idm8767"><h2>示例</h2><p>搜索路易斯安那州的投影坐标系。</p><pre class="programlisting">SELECT auth_name, auth_srid, srname,
  ST_AsText(point_sw) AS point_sw,
  ST_AsText(point_ne) AS point_ne
FROM postgis_srs_search('SRID=4326;LINESTRING(-90 30, -91 31)')
LIMIT 3;

 auth_name | auth_srid |                srname                |      point_sw       |      point_ne
-----------+-----------+--------------------------------------+---------------------+---------------------
 EPSG      | 2801      | NAD83(HARN) / Louisiana South        | POINT(-93.94 28.85) | POINT(-88.75 31.07)
 EPSG      | 3452      | NAD83 / Louisiana South (ftUS)       | POINT(-93.94 28.85) | POINT(-88.75 31.07)
 EPSG      | 3457      | NAD83(HARN) / Louisiana South (ftUS) | POINT(-93.94 28.85) | POINT(-88.75 31.07)
</pre><p>扫描表格以获得最大范围并找到可能适合的投影坐标系。</p><pre class="programlisting">WITH ext AS (
  SELECT ST_Extent(geom) AS geom, Max(ST_SRID(geom)) AS srid
  FROM foo
)
SELECT auth_name, auth_srid, srname,
  ST_AsText(point_sw) AS point_sw,
  ST_AsText(point_ne) AS point_ne
FROM ext
CROSS JOIN postgis_srs_search(ST_SetSRID(ext.geom, ext.srid))
LIMIT 3;</pre></div><div class="refsection" id="idm8773"><h2>相关信息</h2><p><a class="xref" href="#postgis_srs_codes" title="postgis_srs_codes">postgis_srs_codes</a>, <a class="xref" href="#postgis_srs_all" title="postgis_srs_all">postgis_srs_all</a>, <a class="xref" href="#postgis_srs" title="postgis_srs">postgis_srs</a></p></div></div></section><section class="section" id="Geometry_Inputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.8. 几何输入</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数从各种文本或二进制格式创建几何对象。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm8784">7.8.1. 已知文本 (WKT)</a></span></li><li><span class="section"><a href="#idm9416">7.8.2. 已知的二进制文件 (WKB)</a></span></li><li><span class="section"><a href="#idm9736">7.8.3. 其它格式</a></span></li></ul></div><section class="section" id="idm8784"><div class="titlepage"><div><div><h3 class="title">7.8.1. 已知文本 (WKT)</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_BdPolyFromText">ST_BdPolyFromText</a></span><span class="refpurpose"> — 给定任意闭合线串集合作为 MultiLineString 熟知的文本表示形式（WKT），构造一个多边形。</span></li><li><span class="refentrytitle"><a href="#ST_BdMPolyFromText">ST_BdMPolyFromText</a></span><span class="refpurpose"> — 从任何封闭线串集合构造多面，并具有多线串的已知文本表示形式。</span></li><li><span class="refentrytitle"><a href="#ST_GeogFromText">ST_GeogFromText</a></span><span class="refpurpose"> — 从已知的文本表示或扩展 (WKT) 返回指定的地理值。 </span></li><li><span class="refentrytitle"><a href="#ST_GeographyFromText">ST_GeographyFromText</a></span><span class="refpurpose"> — 从已知的文本表示或扩展 (WKT) 返回指定的地理值。 </span></li><li><span class="refentrytitle"><a href="#ST_GeomCollFromText">ST_GeomCollFromText</a></span><span class="refpurpose"> — 使用给定的 SRID 从集合 WKT 中创建集合几何体。 如果未给出 SRID，则默认为 0。</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromEWKT">ST_GeomFromEWKT</a></span><span class="refpurpose"> — 从扩展已知的文本表示 (EWKT) 返回指定的 ST_Geometry 值。</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromMARC21">ST_GeomFromMARC21</a></span><span class="refpurpose"> — 输入 MARC21/XML 地理数据并返回 PostGIS 几何对象。 </span></li><li><span class="refentrytitle"><a href="#ST_GeometryFromText">ST_GeometryFromText</a></span><span class="refpurpose"> — 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromText 的别名</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromText">ST_GeomFromText</a></span><span class="refpurpose"> — 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。</span></li><li><span class="refentrytitle"><a href="#ST_LineFromText">ST_LineFromText</a></span><span class="refpurpose"> — 使用给定的 SRID 根据 WKT 表示创建几何图形。 如果未给出 SRID，则默认为 0。</span></li><li><span class="refentrytitle"><a href="#ST_MLineFromText">ST_MLineFromText</a></span><span class="refpurpose"> — 从 WKT 表示形式返回指定的 ST_MultiLineString 值。</span></li><li><span class="refentrytitle"><a href="#ST_MPointFromText">ST_MPointFromText</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。</span></li><li><span class="refentrytitle"><a href="#ST_MPolyFromText">ST_MPolyFromText</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKT 制作多多边形几何体。 如果未给出 SRID，则默认为 0。</span></li><li><span class="refentrytitle"><a href="#ST_PointFromText">ST_PointFromText</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKT 创建点几何图形。 如果未给出 SRID，则默认为未知。</span></li><li><span class="refentrytitle"><a href="#ST_PolygonFromText">ST_PolygonFromText</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。</span></li><li><span class="refentrytitle"><a href="#ST_WKTToSQL">ST_WKTToSQL</a></span><span class="refpurpose"> — 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromText 的别名</span></li></ul></div><div class="refentry" id="ST_BdPolyFromText"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BdPolyFromText — 给定任意闭合线串集合作为 MultiLineString 熟知的文本表示形式（WKT），构造一个多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_BdPolyFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8801"><h2>描述</h2><p>从闭合线串的任意集合构造多边形，这些线串具有多线串的已知文本表示形式。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果 WKT 不是 MULTILINESTRING，则会引发错误。 如果输出是 MULTIPOLYGON，则抛出错误； 在这种情况下使用 ST_BdMPolyFromText，或者参见 ST_BuildArea() 了解 postgis 特定的方法。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm8813"><h2>相关信息</h2><p><a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_BdMPolyFromText" title="ST_BdMPolyFromText">ST_BdMPolyFromText</a></p></div></div><div class="refentry" id="ST_BdMPolyFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BdMPolyFromText — 从任何封闭线串集合构造多面，并具有多线串的已知文本表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_BdMPolyFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm8833"><h2>描述</h2><p>给定闭合线串、多边形、多线字符串的任意集合作为已知的文本表示，构造一个多边形。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果 WKT 不是 MULTILINESTRING，则会引发错误。 即使结果实际上仅由单个 POLYGON 组成，也强制输出 MULTIPOLYGON； 如果您确定操作将产生单个 POLYGON，请使用<a class="link" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a>，或者请参阅 <a class="link" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea()</a> 了解 postgis 特定的方法。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm8847"><h2>相关信息</h2><p><a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a></p></div></div><div class="refentry" id="ST_GeogFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeogFromText — 从已知的文本表示或扩展 (WKT) 返回指定的地理值。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <strong class="fsfunc">ST_GeogFromText</strong>(</code>text  <var class="pdparam">EWKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm8864"><h2>描述</h2><p>从已知的文本或扩展的已知的表示中返回地理对象。 如果未指定，则假定为 SRID 4326。 这是 ST_GeographyFromText 的别名。 点始终以经纬度形式表示。</p></div><div class="refsection" id="idm8867"><h2>示例</h2><pre class="programlisting">--- converting lon lat coords to geography
ALTER TABLE sometable ADD COLUMN geog geography(POINT,4326);
UPDATE sometable SET geog = ST_GeogFromText('SRID=4326;POINT(' || lon || ' ' || lat || ')');

--- specify a geography point using EPSG:4267, NAD27
SELECT ST_AsEWKT(ST_GeogFromText('SRID=4267;POINT(-77.0092 38.889588)'));
                        </pre></div><div class="refsection" id="idm8870"><h2>相关信息</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a></p></div></div><div class="refentry" id="ST_GeographyFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeographyFromText — 从已知的文本表示或扩展 (WKT) 返回指定的地理值。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <strong class="fsfunc">ST_GeographyFromText</strong>(</code>text  <var class="pdparam">EWKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm8887"><h2>描述</h2><p>从已知的文本表示形式返回地理对象。 如果未指定，则假定为 SRID 4326。</p></div><div class="refsection" id="idm8890"><h2>相关信息</h2><p><a class="xref" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a></p></div></div><div class="refentry" id="ST_GeomCollFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomCollFromText — 使用给定的 SRID 从集合 WKT 中创建集合几何体。 如果未给出 SRID，则默认为 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomCollFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomCollFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm8916"><h2>描述</h2><p>使用给定的 SRID 从已知的文本 (WKT) 表示形式创建几何集合。 如果未给出 SRID，则默认为 0。</p><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范</p><p>如果 WKT 不是几何集合，则返回 NULL</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您绝对确定所有 WKT 几何图形都是集合，请不要使用此函数。 它比 ST_GeomFromText 慢，因为它添加了额外的验证步骤。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。 </p></div><div class="refsection" id="idm8932"><h2>示例</h2><pre class="programlisting">SELECT ST_GeomCollFromText('GEOMETRYCOLLECTION(POINT(1 2),LINESTRING(1 2, 3 4))');
</pre></div><div class="refsection" id="idm8935"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_GeomFromEWKT"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromEWKT — 从扩展已知的文本表示 (EWKT) 返回指定的 ST_Geometry 值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromEWKT</strong>(</code>text  <var class="pdparam">EWKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm8952"><h2>描述</h2><p>根据 OGC 扩展已知的文本 (EWKT) 表示构造 PostGIS ST_Geometry 对象。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>EWKT 格式不是 OGC 标准，而是包含空间参考系统 (SRID) 标识符的 PostGIS 特定格式</p></td></tr></table></div><p class="enhanced">增强功能：2.0.0支持多面体曲面和 TIN 。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm8974"><h2>示例</h2><pre class="programlisting">SELECT ST_GeomFromEWKT('SRID=4269;LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932)');
SELECT ST_GeomFromEWKT('SRID=4269;MULTILINESTRING((-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932))');

SELECT ST_GeomFromEWKT('SRID=4269;POINT(-71.064544 42.28787)');

SELECT ST_GeomFromEWKT('SRID=4269;POLYGON((-71.1776585052917 42.3902909739571,-71.1776820268866 42.3903701743239,
-71.1776063012595 42.3903825660754,-71.1775826583081 42.3903033653531,-71.1776585052917 42.3902909739571))');

SELECT ST_GeomFromEWKT('SRID=4269;MULTIPOLYGON(((-71.1031880899493 42.3152774590236,
-71.1031627617667 42.3152960829043,-71.102923838298 42.3149156848307,
-71.1023097974109 42.3151969047397,-71.1019285062273 42.3147384934248,
-71.102505233663 42.3144722937587,-71.10277487471 42.3141658254797,
-71.103113945163 42.3142739188902,-71.10324876416 42.31402489987,
-71.1033002961013 42.3140393340215,-71.1033488797549 42.3139495090772,
-71.103396240451 42.3138632439557,-71.1041521907712 42.3141153348029,
-71.1041411411543 42.3141545014533,-71.1041287795912 42.3142114839058,
-71.1041188134329 42.3142693656241,-71.1041112482575 42.3143272556118,
-71.1041072845732 42.3143851580048,-71.1041057218871 42.3144430686681,
-71.1041065602059 42.3145009876017,-71.1041097995362 42.3145589148055,
-71.1041166403905 42.3146168544148,-71.1041258822717 42.3146748022936,
-71.1041375307579 42.3147318674446,-71.1041492906949 42.3147711126569,
-71.1041598612795 42.314808571739,-71.1042515013869 42.3151287620809,
-71.1041173835118 42.3150739481917,-71.1040809891419 42.3151344119048,
-71.1040438678912 42.3151191367447,-71.1040194562988 42.3151832057859,
-71.1038734225584 42.3151140942995,-71.1038446938243 42.3151006300338,
-71.1038315271889 42.315094347535,-71.1037393329282 42.315054824985,
-71.1035447555574 42.3152608696313,-71.1033436658644 42.3151648370544,
-71.1032580383161 42.3152269126061,-71.103223066939 42.3152517403219,
-71.1031880899493 42.3152774590236)),
((-71.1043632495873 42.315113108546,-71.1043583974082 42.3151211109857,
-71.1043443253471 42.3150676015829,-71.1043850704575 42.3150793250568,-71.1043632495873 42.315113108546)))');
</pre><pre class="programlisting">--3d circular string
SELECT ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)');
</pre><pre class="programlisting">--Polyhedral Surface example
SELECT ST_GeomFromEWKT('POLYHEDRALSURFACE(
        ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
        ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
        ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
        ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
        ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
        ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1))
)');
</pre></div><div class="refsection" id="idm8979"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_GeomFromMARC21"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromMARC21 — 输入 MARC21/XML 地理数据并返回 PostGIS 几何对象。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> geometry <strong class="fsfunc">ST_GeomFromMARC21</strong> (</code> text  <var class="pdparam">marcxml</var> <code>)</code>;</p></div></div><div class="refsection" id="idm8996"><h2>描述</h2><p>此函数从 MARC21/XML 记录创建 PostGIS 几何图形，其中可以包含<code class="varname"> POINT</code> 或<code class="varname"> POLYGON</code>。 如果同一 MARC21/XML 记录中有多个地理数据条目，将返回 <code class="varname">MULTIPOINT </code>或 <code class="varname">MULTIPOLYGON</code>。 如果记录包含混合几何类型，则将返回 <code class="varname">GEOMETRYCOLLECTION</code>。 如果 MARC21/XML 记录不包含任何地理数据（数据字段：034），则返回 NULL。 </p><p>支持的 LOC MARC21/XML 版本： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="https://www.loc.gov/standards/marcxml/" target="_top">MARC21/XML 1.1</a></p></li></ul></div><p>
            </p><p class="availability">可用性：3.3.0，需要 libxml2 2.6+</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 MARC21/XML 编码的地理数据中，目前无法描述编码坐标的空间参考系，因此该函数将始终返回 <code class="varname">SRID 0 </code>的几何图形。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的<code class="varname"> POLYGON </code>几何图形将始终是顺时针方向。 </p></td></tr></table></div></div><div class="refsection" id="idm9016"><h2>示例</h2><p>转换包含编码为<code class="varname"> hddd.dddddd </code>的单个<code class="varname"> POINT</code> 的 MARC21/XML 地理数据 </p><pre class="programlisting">

                SELECT
                ST_AsText(
                    ST_GeomFromMARC21('
                        &lt;record xmlns="http://www.loc.gov/MARC21/slim"&gt;
                            &lt;leader
&gt;00000nz a2200000nc 4500&lt;/leader&gt;
                            &lt;controlfield tag="001"
&gt;040277569&lt;/controlfield&gt;
                            &lt;datafield tag="034" ind1=" " ind2=" "&gt;
                                &lt;subfield code="d"
&gt;W004.500000&lt;/subfield&gt;
                                &lt;subfield code="e"
&gt;W004.500000&lt;/subfield&gt;
                                &lt;subfield code="f"
&gt;N054.250000&lt;/subfield&gt;
                                &lt;subfield code="g"
&gt;N054.250000&lt;/subfield&gt;
                            &lt;/datafield&gt;
                        &lt;/record
&gt;'));

                st_astext
                -------------------
                POINT(-4.5 54.25)
                (1 row)

            </pre><p>转换包含编码为 <code class="varname">hdddmmss</code> 的单个<code class="varname"> POLYGON</code> 的 MARC21/XML 地理数据</p><pre class="programlisting">


                SELECT
                ST_AsText(
                    ST_GeomFromMARC21('
                        &lt;record xmlns="http://www.loc.gov/MARC21/slim"&gt;
                            &lt;leader
&gt;01062cem a2200241 a 4500&lt;/leader&gt;
                            &lt;controlfield tag="001"
&gt;   84696781 &lt;/controlfield&gt;
                            &lt;datafield tag="034" ind1="1" ind2=" "&gt;
                                &lt;subfield code="a"
&gt;a&lt;/subfield&gt;
                                &lt;subfield code="b"
&gt;50000&lt;/subfield&gt;
                                &lt;subfield code="d"
&gt;E0130600&lt;/subfield&gt;
                                &lt;subfield code="e"
&gt;E0133100&lt;/subfield&gt;
                                &lt;subfield code="f"
&gt;N0523900&lt;/subfield&gt;
                                &lt;subfield code="g"
&gt;N0522300&lt;/subfield&gt;
                            &lt;/datafield&gt;
                        &lt;/record
&gt;'));

                st_astext
                -----------------------------------------------------------------------------------------------------------------------
                POLYGON((13.1 52.65,13.516666666666667 52.65,13.516666666666667 52.38333333333333,13.1 52.38333333333333,13.1 52.65))
                (1 row)

            </pre><p>转换包含<code class="varname"> POLYGON </code>和<code class="varname"> POINT</code> 的 MARC21/XML 地理数据：</p><pre class="programlisting">


                SELECT
                ST_AsText(
                    ST_GeomFromMARC21('
                &lt;record xmlns="http://www.loc.gov/MARC21/slim"&gt;
                    &lt;datafield tag="034" ind1="1" ind2=" "&gt;
                        &lt;subfield code="a"
&gt;a&lt;/subfield&gt;
                        &lt;subfield code="b"
&gt;50000&lt;/subfield&gt;
                        &lt;subfield code="d"
&gt;E0130600&lt;/subfield&gt;
                        &lt;subfield code="e"
&gt;E0133100&lt;/subfield&gt;
                        &lt;subfield code="f"
&gt;N0523900&lt;/subfield&gt;
                        &lt;subfield code="g"
&gt;N0522300&lt;/subfield&gt;
                    &lt;/datafield&gt;
                    &lt;datafield tag="034" ind1=" " ind2=" "&gt;
                        &lt;subfield code="d"
&gt;W004.500000&lt;/subfield&gt;
                        &lt;subfield code="e"
&gt;W004.500000&lt;/subfield&gt;
                        &lt;subfield code="f"
&gt;N054.250000&lt;/subfield&gt;
                        &lt;subfield code="g"
&gt;N054.250000&lt;/subfield&gt;
                    &lt;/datafield&gt;
                &lt;/record
&gt;'));
                                                                                        st_astext
                -------------------------------------------------------------------------------------------------------------------------------------------------------------
                GEOMETRYCOLLECTION(POLYGON((13.1 52.65,13.516666666666667 52.65,13.516666666666667 52.38333333333333,13.1 52.38333333333333,13.1 52.65)),POINT(-4.5 54.25))
                (1 row)
            </pre></div><div class="refsection" id="idm9030"><h2>相关信息</h2><p>
                <a class="xref" href="#ST_AsMARC21" title="ST_AsMARC21">ST_AsMARC21</a>
            </p></div></div><div class="refentry" id="ST_GeometryFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeometryFromText — 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromText 的别名</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeometryFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeometryFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9055"><h2>描述</h2><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.40</p></div><div class="refsection" id="idm9066"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_GeomFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromText — 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9091"><h2>描述</h2><p>从 OGC 已知的文本表示（WKT）构造 PostGIS ST_Geometry 对象。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_GeomFromText 函数有两种变体。 第一个不采用 SRID，并返回没有定义空间参考系统 (SRID=0) 的几何图形。 第二个将 SRID 作为第二个参数，并返回一个几何图形，该几何图形包含此 SRID 作为其元数据的一部分。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> s3.2.6.2 - 可选参数 SRID 用于规范一致性。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.40</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>它不符合 OGC，但<a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>比 ST_GeomFromText 和 ST_PointFromText 更快。 另一个优点是，如果使用数字作为坐标值，则更容易。 另一种选择是<a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>，它在速度方面与<a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>相似，并且符合 OGC 标准，但仅支持 2D 点。</p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 在 PostGIS 的早期版本中，允许 ST_GeomFromText('GEOMETRYCOLLECTION(EMPTY)') 。 为了更好地符合 SQL/MM 标准，这在 PostGIS 2.0.0 中现在是非法的。 现在应该写成 ST_GeomFromText('GEOMETRYCOLLECTION EMPTY')</p></td></tr></table></div></div><div class="refsection" id="idm9116"><h2>示例</h2><pre class="programlisting">SELECT ST_GeomFromText('LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932)');
SELECT ST_GeomFromText('LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932)',4269);

SELECT ST_GeomFromText('MULTILINESTRING((-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932))');

SELECT ST_GeomFromText('POINT(-71.064544 42.28787)');

SELECT ST_GeomFromText('POLYGON((-71.1776585052917 42.3902909739571,-71.1776820268866 42.3903701743239,
-71.1776063012595 42.3903825660754,-71.1775826583081 42.3903033653531,-71.1776585052917 42.3902909739571))');

SELECT ST_GeomFromText('MULTIPOLYGON(((-71.1031880899493 42.3152774590236,
-71.1031627617667 42.3152960829043,-71.102923838298 42.3149156848307,
-71.1023097974109 42.3151969047397,-71.1019285062273 42.3147384934248,
-71.102505233663 42.3144722937587,-71.10277487471 42.3141658254797,
-71.103113945163 42.3142739188902,-71.10324876416 42.31402489987,
-71.1033002961013 42.3140393340215,-71.1033488797549 42.3139495090772,
-71.103396240451 42.3138632439557,-71.1041521907712 42.3141153348029,
-71.1041411411543 42.3141545014533,-71.1041287795912 42.3142114839058,
-71.1041188134329 42.3142693656241,-71.1041112482575 42.3143272556118,
-71.1041072845732 42.3143851580048,-71.1041057218871 42.3144430686681,
-71.1041065602059 42.3145009876017,-71.1041097995362 42.3145589148055,
-71.1041166403905 42.3146168544148,-71.1041258822717 42.3146748022936,
-71.1041375307579 42.3147318674446,-71.1041492906949 42.3147711126569,
-71.1041598612795 42.314808571739,-71.1042515013869 42.3151287620809,
-71.1041173835118 42.3150739481917,-71.1040809891419 42.3151344119048,
-71.1040438678912 42.3151191367447,-71.1040194562988 42.3151832057859,
-71.1038734225584 42.3151140942995,-71.1038446938243 42.3151006300338,
-71.1038315271889 42.315094347535,-71.1037393329282 42.315054824985,
-71.1035447555574 42.3152608696313,-71.1033436658644 42.3151648370544,
-71.1032580383161 42.3152269126061,-71.103223066939 42.3152517403219,
-71.1031880899493 42.3152774590236)),
((-71.1043632495873 42.315113108546,-71.1043583974082 42.3151211109857,
-71.1043443253471 42.3150676015829,-71.1043850704575 42.3150793250568,-71.1043632495873 42.315113108546)))',4326);

SELECT ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)');
        </pre></div><div class="refsection" id="idm9119"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_LineFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineFromText — 使用给定的 SRID 根据 WKT 表示创建几何图形。 如果未给出 SRID，则默认为 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9146"><h2>描述</h2><p>使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。如果传入的 WKT 不是 LINESTRING，则返回 null。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您知道所有几何图形都是线串，则使用ST_GeomFromText会更有效。 此函数调用ST_GeomFromText并评估是否返回线串。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.2.8</p></div><div class="refsection" id="idm9162"><h2>示例</h2><pre class="programlisting">SELECT ST_LineFromText('LINESTRING(1 2, 3 4)') AS aline, ST_LineFromText('POINT(1 2)') AS null_return;
aline                            | null_return
------------------------------------------------
010200000002000000000000000000F ... | t
                </pre></div><div class="refsection" id="idm9165"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_MLineFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MLineFromText — 从 WKT 表示形式返回指定的 ST_MultiLineString 值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MLineFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_MLineFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm9190"><h2>描述</h2><p>使用给定的 SRID 从已知的文本 (WKT) 创建几何图形。 如果未给出 SRID，则默认为 0。</p><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范</p><p>如果 WKT 不是多行字符串，则返回 NULL</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您绝对确定所有 WKT 几何图形都是点，请不要使用此函数。 它比 ST_GeomFromText 慢，因为它添加了额外的验证步骤。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。 SQL-MM 3: 9.4.4</p></div><div class="refsection" id="idm9206"><h2>示例</h2><pre class="programlisting">SELECT ST_MLineFromText('MULTILINESTRING((1 2, 3 4), (4 5, 6 7))');</pre></div><div class="refsection" id="idm9209"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_MPointFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MPointFromText — 使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MPointFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_MPointFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm9234"><h2>描述</h2><p>从已知文本 （WKT） 表示和给定 SRID 生成几何图形。 如果未给出 SRID，则为 0（未知）。</p><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范</p><p>如果 WKT 不是多点，则返回 NULL</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您绝对确定所有 WKT 几何图形都是点，请不要使用此函数。 它比 ST_GeomFromText 慢，因为它添加了额外的验证步骤。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 9.2.4</p></div><div class="refsection" id="idm9250"><h2>示例</h2><pre class="programlisting">SELECT ST_MPointFromText('MULTIPOINT((1 2),(3 4))');
SELECT ST_MPointFromText('MULTIPOINT((-70.9590 42.1180),(-70.9611 42.1223))', 4326);</pre></div><div class="refsection" id="idm9253"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_MPolyFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MPolyFromText — 使用给定的 SRID 从 WKT 制作多多边形几何体。 如果未给出 SRID，则默认为 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MPolyFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_MPolyFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm9278"><h2>描述</h2><p>从已知文本 （WKT） 表示形式和给定 SRID 生成多面。 如果未给出 SRID，则为 0（未知）。</p><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范</p><p>如果 WKT 不是多多边形，则引发错误</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您绝对确定所有 WKT 几何图形都是多边形，请不要使用此函数。 它比 ST_GeomFromText 慢，因为它添加了额外的验证步骤。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 9.6.4</p></div><div class="refsection" id="idm9294"><h2>示例</h2><pre class="programlisting">SELECT ST_MPolyFromText('MULTIPOLYGON(((0 0 1,20 0 1,20 20 1,0 20 1,0 0 1),(5 5 3,5 7 3,7 7 3,7 5 3,5 5 3)))');
SELECt ST_MPolyFromText('MULTIPOLYGON(((-70.916 42.1002,-70.9468 42.0946,-70.9765 42.0872,-70.9754 42.0875,-70.9749 42.0879,-70.9752 42.0881,-70.9754 42.0891,-70.9758 42.0894,-70.9759 42.0897,-70.9759 42.0899,-70.9754 42.0902,-70.9756 42.0906,-70.9753 42.0907,-70.9753 42.0917,-70.9757 42.0924,-70.9755 42.0928,-70.9755 42.0942,-70.9751 42.0948,-70.9755 42.0953,-70.9751 42.0958,-70.9751 42.0962,-70.9759 42.0983,-70.9767 42.0987,-70.9768 42.0991,-70.9771 42.0997,-70.9771 42.1003,-70.9768 42.1005,-70.977 42.1011,-70.9766 42.1019,-70.9768 42.1026,-70.9769 42.1033,-70.9775 42.1042,-70.9773 42.1043,-70.9776 42.1043,-70.9778 42.1048,-70.9773 42.1058,-70.9774 42.1061,-70.9779 42.1065,-70.9782 42.1078,-70.9788 42.1085,-70.9798 42.1087,-70.9806 42.109,-70.9807 42.1093,-70.9806 42.1099,-70.9809 42.1109,-70.9808 42.1112,-70.9798 42.1116,-70.9792 42.1127,-70.979 42.1129,-70.9787 42.1134,-70.979 42.1139,-70.9791 42.1141,-70.9987 42.1116,-71.0022 42.1273,
        -70.9408 42.1513,-70.9315 42.1165,-70.916 42.1002)))',4326);
</pre></div><div class="refsection" id="idm9297"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_PointFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointFromText — 使用给定的 SRID 从 WKT 创建点几何图形。 如果未给出 SRID，则默认为未知。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9323"><h2>描述</h2><p>从 OGC 已知的文本表示构造 PostGIS ST_Geometry 点对象。 如果未给出 SRID，则默认为未知（当前为 0）。 如果几何图形不是 WKT 点表示，则返回 null。 如果 WKT 完全无效，则抛出错误。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_PointFromText 函数有 2 个形式，第一个不采用 SRID，并返回没有定义空间参考系统的几何图形。 第二个将空间参考 id 作为第二个参数，并返回一个 ST_Geometry，其中包含此 srid 作为其元数据的一部分。 srid 必须在spatial_ref_sys 表中定义。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您绝对确定所有 WKT 几何图形都是点，请不要使用此函数。 它比 ST_GeomFromText 慢，因为它添加了额外的验证步骤。 如果您从经纬度坐标构建点并且更关心性能和准确性而不是 OGC 合规性，请使用 <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>或 OGC 合规别名<a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> s3.2.6.2 - 可选参数 SRID 用于规范一致性。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 6.1.8</p></div><div class="refsection" id="idm9341"><h2>示例</h2><pre class="programlisting">SELECT ST_PointFromText('POINT(-71.064544 42.28787)');
SELECT ST_PointFromText('POINT(-71.064544 42.28787)', 4326);
        </pre></div><div class="refsection" id="idm9344"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_PolygonFromText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PolygonFromText — 使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PolygonFromText</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_PolygonFromText</strong>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9372"><h2>描述</h2><p>使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。如果 WKT 不是多边形，则返回 null。</p><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您绝对确定所有 WKT 几何图形都是多边形，请不要使用此函数。 它比 ST_GeomFromText 慢，因为它添加了额外的验证步骤。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.3.6</p></div><div class="refsection" id="idm9387"><h2>示例</h2><pre class="programlisting">SELECT ST_PolygonFromText('POLYGON((-71.1776585052917 42.3902909739571,-71.1776820268866 42.3903701743239,
-71.1776063012595 42.3903825660754,-71.1775826583081 42.3903033653531,-71.1776585052917 42.3902909739571))');
st_polygonfromtext
------------------
010300000001000000050000006...


SELECT ST_PolygonFromText('POINT(1 2)') IS NULL as point_is_notpoly;

point_is_not_poly
----------
t
</pre></div><div class="refsection" id="idm9390"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_WKTToSQL"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_WKTToSQL — 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromText 的别名</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_WKTToSQL</strong>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" id="idm9406"><h2>描述</h2><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.34</p></div><div class="refsection" id="idm9412"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div></section><section class="section" id="idm9416"><div class="titlepage"><div><div><h3 class="title">7.8.2. 已知的二进制文件 (WKB)</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_GeogFromWKB">ST_GeogFromWKB</a></span><span class="refpurpose"> — 从已知的二进制几何表示 (WKB) 或扩展的已知的二进制 (EWKB) 创建地理实例。</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromEWKB">ST_GeomFromEWKB</a></span><span class="refpurpose"> — 从扩展已知的二进制表示 (EWKB) 返回指定的 ST_Geometry 值。</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromWKB">ST_GeomFromWKB</a></span><span class="refpurpose"> — 从已知的二进制几何表示 (WKB) 和可选的 SRID 创建几何实例。</span></li><li><span class="refentrytitle"><a href="#ST_LineFromWKB">ST_LineFromWKB</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKB 制作<code class="varname"> LINESTRING</code></span></li><li><span class="refentrytitle"><a href="#ST_LinestringFromWKB">ST_LinestringFromWKB</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKB 创建几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_PointFromWKB">ST_PointFromWKB</a></span><span class="refpurpose"> — 使用给定的 SRID 从 WKB 创建几何图形</span></li><li><span class="refentrytitle"><a href="#ST_WKBToSQL">ST_WKBToSQL</a></span><span class="refpurpose"> — 从已知的二进制表示 (WKB) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromWKB 的别名，不带 srid</span></li></ul></div><div class="refentry" id="ST_GeogFromWKB"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeogFromWKB — 从已知的二进制几何表示 (WKB) 或扩展的已知的二进制 (EWKB) 创建地理实例。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <strong class="fsfunc">ST_GeogFromWKB</strong>(</code>bytea  <var class="pdparam">wkb</var><code>)</code>;</p></div></div><div class="refsection" id="idm9430"><h2>描述</h2><p><code class="varname">ST_GeogFromWKB</code> 函数采用已知的几何二进制表示 (WKB) 或 PostGIS 扩展 WKB，并创建适当地理类型的实例。 该函数起到了SQL中几何工厂的作用。 </p><p>如果未指定 SRID，则默认为 4326（WGS 84 经纬度）。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm9439"><h2>示例</h2><pre class="programlisting">--Although bytea rep contains single \, these need to be escaped when inserting into a table
SELECT ST_AsText(
ST_GeogFromWKB(E'\\001\\002\\000\\000\\000\\002\\000\\000\\000\\037\\205\\353Q\\270~\\\\\\300\\323Mb\\020X\\231C@\\020X9\\264\\310~\\\\\\300)\\\\\\217\\302\\365\\230C@')
);
                                          st_astext
------------------------------------------------------
 LINESTRING(-113.98 39.198,-113.981 39.195)
(1 row)

</pre></div><div class="refsection" id="idm9442"><h2>相关信息</h2><p><a class="xref" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>, <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a></p></div></div><div class="refentry" id="ST_GeomFromEWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromEWKB — 从扩展已知的二进制表示 (EWKB) 返回指定的 ST_Geometry 值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromEWKB</strong>(</code>bytea  <var class="pdparam">EWKB</var><code>)</code>;</p></div></div><div class="refsection" id="idm9459"><h2>描述</h2><p>从 OGC 扩展已知的二进制 (EWKT) 表示构造 PostGIS ST_Geometry 对象。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>EWKB 格式不是 OGC 标准，而是包含空间参考系统 (SRID) 标识符的 PostGIS 特定格式</p></td></tr></table></div><p class="enhanced">增强功能：2.0.0支持多面体曲面和 TIN 。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm9481"><h2>示例</h2><p>NAD83 经度纬度 (4269) 中 LINESTRING (-71.160281 42.258729、-71.160837 42.259113、-71.161144 42.25932) 的二进制表示形式。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>注意：字节数组由 \ 分隔并具有 '，但如果standard_conforming_strings被截断，则它们使用 \ 和 '' 进行转义。 它不完全对应于 AsEWKB 表达式。</p></td></tr></table></div><pre class="programlisting">SELECT ST_GeomFromEWKB(E'\\001\\002\\000\\000 \\255\\020\\000\\000\\003\\000\\000\\000\\344J=
\\013B\\312Q\\300n\\303(\\010\\036!E@''\\277E''K
\\312Q\\300\\366{b\\235*!E@\\225|\\354.P\\312Q
\\300p\\231\\323e1!E@');</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 PostgreSQL 9.1 中，standard_conforming_strings 默认设置为 on，而在过去的版本中它被设置为 off。 您可以根据单个查询的需要或在数据库或服务器级别更改默认值。 以下是使用 standard_conforming_strings = on 时的操作方法。 在这种情况下，我们使用标准 ansi 转义 '，但斜杠不会转义</p></td></tr></table></div><pre class="programlisting">set standard_conforming_strings = on;
SELECT ST_GeomFromEWKB('\001\002\000\000 \255\020\000\000\003\000\000\000\344J=\012\013B
    \312Q\300n\303(\010\036!E@''\277E''K\012\312Q\300\366{b\235*!E@\225|\354.P\312Q\012\300p\231\323e1')</pre></div><div class="refsection" id="idm9490"><h2>相关信息</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a></p></div></div><div class="refentry" id="ST_GeomFromWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromWKB — 从已知的二进制几何表示 (WKB) 和可选的 SRID 创建几何实例。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromWKB</strong>(</code>bytea  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromWKB</strong>(</code>bytea  <var class="pdparam">geom</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9517"><h2>描述</h2><p><code class="varname">ST_GeomFromWKB</code> 函数采用已知的几何图形二进制表示形式和空间参考系统 ID (<code class="varname">SRID</code>)，并创建相应几何图形类型的实例。 该函数起到了SQL中几何工厂的作用。 这是 ST_WKBToSQL 的替代名称。</p><p>如果未指定 SRID，则默认为 0（未知）。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.7.2 - 可选参数 SRID 用于符合规范</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.41</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm9536"><h2>示例</h2><pre class="programlisting">--Although bytea rep contains single \, these need to be escaped when inserting into a table
                -- unless standard_conforming_strings is set to on.
SELECT ST_AsEWKT(
ST_GeomFromWKB(E'\\001\\002\\000\\000\\000\\002\\000\\000\\000\\037\\205\\353Q\\270~\\\\\\300\\323Mb\\020X\\231C@\\020X9\\264\\310~\\\\\\300)\\\\\\217\\302\\365\\230C@',4326)
);
                                          st_asewkt
------------------------------------------------------
 SRID=4326;LINESTRING(-113.98 39.198,-113.981 39.195)
(1 row)

SELECT
  ST_AsText(
        ST_GeomFromWKB(
          ST_AsEWKB('POINT(2 5)'::geometry)
        )
  );
 st_astext
------------
 POINT(2 5)
(1 row)</pre></div><div class="refsection" id="idm9539"><h2>相关信息</h2><p><a class="xref" href="#ST_WKBToSQL" title="ST_WKBToSQL">ST_WKBToSQL</a>, <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a></p></div></div><div class="refentry" id="ST_LineFromWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineFromWKB — 使用给定的 SRID 从 WKB 制作<code class="varname"> LINESTRING</code></p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineFromWKB</strong>(</code>bytea  <var class="pdparam">WKB</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineFromWKB</strong>(</code>bytea  <var class="pdparam">WKB</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9567"><h2>描述</h2><p><code class="varname">ST_LineFromWKB</code> 函数采用已知的几何二进制表示形式和空间参考系统 ID (<code class="varname">SRID</code>)，并创建适当几何类型的实例 - 在本例中为 <code class="varname">LINESTRING</code> 几何。 该函数起到了SQL中几何工厂的作用。</p><p>如果未指定 SRID，则默认为 0。如果输入<code class="varname">字节</code>不表示 <code class="varname">LINESTRING</code>，则返回 <code class="varname">NULL</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您知道所有几何图形都是<code class="varname"> LINESTRING</code>，则仅使用 <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> 会更有效。 该函数仅调用 <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>并添加额外的验证以确保它返回线串。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.2.9</p></div><div class="refsection" id="idm9593"><h2>示例</h2><pre class="programlisting">SELECT ST_LineFromWKB(ST_AsBinary(ST_GeomFromText('LINESTRING(1 2, 3 4)'))) AS aline,
                ST_LineFromWKB(ST_AsBinary(ST_GeomFromText('POINT(1 2)'))) IS NULL AS null_return;
aline                            | null_return
------------------------------------------------
010200000002000000000000000000F ... | t
                </pre></div><div class="refsection" id="idm9596"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_LinestringFromWKB" title="ST_LinestringFromWKB">ST_LinestringFromWKB</a></p></div></div><div class="refentry" id="ST_LinestringFromWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LinestringFromWKB — 使用给定的 SRID 从 WKB 创建几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LinestringFromWKB</strong>(</code>bytea  <var class="pdparam">WKB</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_LinestringFromWKB</strong>(</code>bytea  <var class="pdparam">WKB</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9622"><h2>描述</h2><p><code class="varname">ST_LineFromWKB </code>函数采用已知的几何二进制表示形式和空间参考系统 ID (<code class="varname">SRID</code>)，并创建适当几何类型的实例 - 在本例中为<code class="varname"> LINESTRING</code> 几何。 该函数起到了SQL中几何工厂的作用。</p><p>如果未指定 SRID，则默认为 0。如果输入<code class="varname">字节</code>不表示<code class="varname"> LINESTRING</code>，则返回<code class="varname"> NULL</code>。这是 <a class="xref" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a> 的别名。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OGC 规范 3.2.6.2 - 可选 SRID 用于规范。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您知道所有几何图形都是 <code class="varname">LINESTRING</code>，则仅使用 <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>会更有效。 该函数仅调用 <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> 并添加额外的验证以确保它返回<code class="varname">LINESTRING</code>。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.6.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.2.9</p></div><div class="refsection" id="idm9650"><h2>示例</h2><pre class="programlisting">SELECT
  ST_LineStringFromWKB(
        ST_AsBinary(ST_GeomFromText('LINESTRING(1 2, 3 4)'))
  ) AS aline,
  ST_LinestringFromWKB(
        ST_AsBinary(ST_GeomFromText('POINT(1 2)'))
  ) IS NULL AS null_return;
   aline                            | null_return
------------------------------------------------
010200000002000000000000000000F ... | t</pre></div><div class="refsection" id="idm9653"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a></p></div></div><div class="refentry" id="ST_PointFromWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointFromWKB — 使用给定的 SRID 从 WKB 创建几何图形</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromWKB</strong>(</code>bytea  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromWKB</strong>(</code>bytea  <var class="pdparam">geom</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9679"><h2>描述</h2><p><code class="varname">ST_PointFromWKB</code>函数采用已知的几何二进制表示形式和空间参考系统ID（<code class="varname">SRID</code>），并创建适当几何类型的实例-在本例中为<code class="varname">POINT</code>几何。该函数起到了SQL中几何工厂的作用。</p><p>如果未指定 SRID，则默认为 0。如果输入<code class="varname">字节</code>不表示 <code class="varname">POINT</code> 几何图形，则返回 <code class="varname">NULL</code>。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.7.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 6.1.9</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm9706"><h2>示例</h2><pre class="programlisting">SELECT
  ST_AsText(
        ST_PointFromWKB(
          ST_AsEWKB('POINT(2 5)'::geometry)
        )
  );
 st_astext
------------
 POINT(2 5)
(1 row)

SELECT
  ST_AsText(
        ST_PointFromWKB(
          ST_AsEWKB('LINESTRING(2 5, 2 6)'::geometry)
        )
  );
 st_astext
-----------

(1 row)</pre></div><div class="refsection" id="idm9709"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a></p></div></div><div class="refentry" id="ST_WKBToSQL"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_WKBToSQL — 从已知的二进制表示 (WKB) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromWKB 的别名，不带 srid</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_WKBToSQL</strong>(</code>bytea  <var class="pdparam">WKB</var><code>)</code>;</p></div></div><div class="refsection" id="idm9726"><h2>描述</h2><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.36</p></div><div class="refsection" id="idm9732"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a></p></div></div></section><section class="section" id="idm9736"><div class="titlepage"><div><div><h3 class="title">7.8.3. 其它格式</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a></span><span class="refpurpose"> — 从 GeoHash 字符串返回 BOX2D。</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromGeoHash">ST_GeomFromGeoHash</a></span><span class="refpurpose"> — 从 GeoHash 字符串返回几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromGML">ST_GeomFromGML</a></span><span class="refpurpose"> — 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a></span><span class="refpurpose"> — 将几何图形的 geojson 表示形式作为输入并输出 PostGIS 几何对象</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromKML">ST_GeomFromKML</a></span><span class="refpurpose"> — 将几何图形的 KML 表示形式作为输入并输出 PostGIS 几何对象</span></li><li><span class="refentrytitle"><a href="#ST_GeomFromTWKB">ST_GeomFromTWKB</a></span><span class="refpurpose"> — 从 TWKB（“微小的已知的二进制”）几何表示创建几何实例。</span></li><li><span class="refentrytitle"><a href="#ST_GMLToSQL">ST_GMLToSQL</a></span><span class="refpurpose"> — 从 GML 表示返回指定的 ST_Geometry 值。 这是 ST_GeomFromGML 的别名</span></li><li><span class="refentrytitle"><a href="#ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a></span><span class="refpurpose"> — 从编码折线创建 LineString。</span></li><li><span class="refentrytitle"><a href="#ST_PointFromGeoHash">ST_PointFromGeoHash</a></span><span class="refpurpose"> — 从 GeoHash 字符串返回一个点。</span></li><li><span class="refentrytitle"><a href="#ST_FromFlatGeobufToTable">ST_FromFlatGeobufToTable</a></span><span class="refpurpose"> — 根据 FlatGeobuf 数据的结构创建一个表。</span></li><li><span class="refentrytitle"><a href="#ST_FromFlatGeobuf">ST_FromFlatGeobuf</a></span><span class="refpurpose"> — 读取FlatGeobuf数据。</span></li></ul></div><div class="refentry" id="ST_Box2dFromGeoHash"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Box2dFromGeoHash — 从 GeoHash 字符串返回 BOX2D。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <strong class="fsfunc">ST_Box2dFromGeoHash</strong>(</code>text  <var class="pdparam">geohash</var>, integer  <var class="pdparam">precision=full_precision_of_geohash</var><code>)</code>;</p></div></div><div class="refsection" id="idm9753"><h2>描述</h2><p>从 GeoHash 字符串返回 BOX2D。</p><p>如果未指定<code class="varname">precision</code>，ST_Box2dFromGeoHash 将返回基于输入 GeoHash 字符串的完整精度的 BOX2D。</p><p>如果指定<code class="varname">precision</code>，ST_Box2dFromGeoHash 将使用 GeoHash 中的许多字符来创建 BOX2D。 较低的精度值会导致较大的 BOX2D，较大的值会提高精度。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm9761"><h2>示例</h2><pre class="programlisting">SELECT ST_Box2dFromGeoHash('9qqj7nmxncgyy4d0dbxqz0');

                st_geomfromgeohash
--------------------------------------------------
 BOX(-115.172816 36.114646,-115.172816 36.114646)

SELECT ST_Box2dFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 0);

 st_box2dfromgeohash
----------------------
 BOX(-180 -90,180 90)

 SELECT ST_Box2dFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 10);
                            st_box2dfromgeohash
---------------------------------------------------------------------------
 BOX(-115.17282128334 36.1146408319473,-115.172810554504 36.1146461963654)

                </pre></div><div class="refsection" id="idm9764"><h2>相关信息</h2><p><a class="xref" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>, <a class="xref" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a>, <a class="xref" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a></p></div></div><div class="refentry" id="ST_GeomFromGeoHash"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromGeoHash — 从 GeoHash 字符串返回几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromGeoHash</strong>(</code>text  <var class="pdparam">geohash</var>, integer  <var class="pdparam">precision=full_precision_of_geohash</var><code>)</code>;</p></div></div><div class="refsection" id="idm9785"><h2>描述</h2><p>从 GeoHash 字符串返回几何图形。 几何图形将是表示 GeoHash 边界的多边形。</p><p>如果未指定<code class="varname">precision</code>，ST_GeomFromGeoHash 返回基于输入 GeoHash 字符串的完整精度的多边形。</p><p>如果指定<code class="varname">precision</code>，ST_GeomFromGeoHash 将使用 GeoHash 中的那么多字符来创建多边形。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm9793"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_GeomFromGeoHash('9qqj7nmxncgyy4d0dbxqz0'));
                                                        st_astext
--------------------------------------------------------------------------------------------------------------------------
 POLYGON((-115.172816 36.114646,-115.172816 36.114646,-115.172816 36.114646,-115.172816 36.114646,-115.172816 36.114646))

SELECT ST_AsText(ST_GeomFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 4));
                                                          st_astext
------------------------------------------------------------------------------------------------------------------------------
 POLYGON((-115.3125 36.03515625,-115.3125 36.2109375,-114.9609375 36.2109375,-114.9609375 36.03515625,-115.3125 36.03515625))

SELECT ST_AsText(ST_GeomFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 10));
                                                                                       st_astext
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 POLYGON((-115.17282128334 36.1146408319473,-115.17282128334 36.1146461963654,-115.172810554504 36.1146461963654,-115.172810554504 36.1146408319473,-115.17282128334 36.1146408319473))

                </pre></div><div class="refsection" id="idm9796"><h2>相关信息</h2><p><a class="xref" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>,<a class="xref" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a>, <a class="xref" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a></p></div></div><div class="refentry" id="ST_GeomFromGML"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromGML — 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromGML</strong>(</code>text  <var class="pdparam">geomgml</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromGML</strong>(</code>text  <var class="pdparam">geomgml</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm9823"><h2>描述</h2><p>根据 OGC GML 制图表达生成 PostGIS ST_Geometry对象。</p><p>ST_GeomFromGML仅适用于 GML 的几何部分。 尝试将其用于整个 GML 文档时会引发错误。</p><p>支持的 OGC GML 版本包括：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>GML 3.2.1 命名空间</p></li><li class="listitem"><p>GML 3.1.1 简单功能配置文件 SF-2（向后兼容 GML 3.1.0 和 3.0.0）</p></li><li class="listitem"><p>GML 2.1.2</p></li></ul></div><p>有关 OGC GML 标准，请参阅<a class="link" href="http://www.opengeospatial.org/standards/gml" target="_top">http://www.opengeospatial.org/standards/gml</a>： </p><p class="availability">可用性：需要 1.5 libxml2 1.6+</p><p class="enhanced">增强功能：2.0.0支持多面体曲面和 TIN 。</p><p class="enhanced">增强：2.0.0 引入了多面体曲面支持和 TIN 支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>GML 允许混合维度（例如，同一 MultiGeometry 内的 2D 和 3D）。 由于 PostGIS 几何图形不这样做，如果一旦发现缺失的 Z 维度，ST_GeomFromGML 会将整个几何图形转换为 2D。</p><p>GML 支持同一 MultiGeometry 内的混合 SRS。 由于 PostGIS 几何图形不这样做，因此在本例中 ST_GeomFromGML 会将所有子几何图形重新投影到 SRS 根节点。 如果 GML 根节点没有可用的 srsName 属性，则该函数会抛出错误。</p><p>ST_GeomFromGML 函数对于显式 GML 命名空间并不迂腐。 您可以避免在常见用法中明确提及它。 但如果您想在 GML 中使用 XLink 功能，则需要它。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_GeomFromGML 函数不支持 SQL/MM 曲线几何形状。</p></td></tr></table></div></div><div class="refsection" id="idm9856"><h2>示例 - 具有 srsName 属性的单个几何图形</h2><pre class="programlisting">
SELECT ST_GeomFromGML($$
    &lt;gml:LineString xmlns:gml="http://www.opengis.net/gml"
                        srsName="EPSG:4269"&gt;
        &lt;gml:coordinates&gt;
            -71.16028,42.258729 -71.160837,42.259112 -71.161143,42.25932
        &lt;/gml:coordinates&gt;
    &lt;/gml:LineString&gt;
$$);

                </pre></div><div class="refsection" id="idm9859"><h2>示例-XLink使用法</h2><pre class="programlisting">
SELECT ST_GeomFromGML($$
    &lt;gml:LineString xmlns:gml="http://www.opengis.net/gml"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            srsName="urn:ogc:def:crs:EPSG::4269"&gt;
        &lt;gml:pointProperty&gt;
            &lt;gml:Point gml:id="p1"
&gt;&lt;gml:pos
&gt;42.258729 -71.16028&lt;/gml:pos
&gt;&lt;/gml:Point&gt;
        &lt;/gml:pointProperty&gt;
        &lt;gml:pos
&gt;42.259112 -71.160837&lt;/gml:pos&gt;
        &lt;gml:pointProperty&gt;
            &lt;gml:Point xlink:type="simple" xlink:href="#p1"/&gt;
        &lt;/gml:pointProperty&gt;
    &lt;/gml:LineString&gt;
$$);

                </pre></div><div class="refsection" id="idm9862"><h2>示例-多面体曲面</h2><pre class="programlisting">
SELECT ST_AsEWKT(ST_GeomFromGML('
&lt;gml:PolyhedralSurface xmlns:gml="http://www.opengis.net/gml"&gt;
&lt;gml:polygonPatches&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
      &lt;gml:LinearRing
&gt;&lt;gml:posList srsDimension="3"
&gt;0 0 0 0 0 1 0 1 1 0 1 0 0 0 0&lt;/gml:posList
&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
        &lt;gml:LinearRing
&gt;&lt;gml:posList srsDimension="3"
&gt;0 0 0 0 1 0 1 1 0 1 0 0 0 0 0&lt;/gml:posList
&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
        &lt;gml:LinearRing
&gt;&lt;gml:posList srsDimension="3"
&gt;0 0 0 1 0 0 1 0 1 0 0 1 0 0 0&lt;/gml:posList
&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
        &lt;gml:LinearRing
&gt;&lt;gml:posList srsDimension="3"
&gt;1 1 0 1 1 1 1 0 1 1 0 0 1 1 0&lt;/gml:posList
&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
        &lt;gml:LinearRing
&gt;&lt;gml:posList srsDimension="3"
&gt;0 1 0 0 1 1 1 1 1 1 1 0 0 1 0&lt;/gml:posList
&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
        &lt;gml:LinearRing
&gt;&lt;gml:posList srsDimension="3"
&gt;0 0 1 1 0 1 1 1 1 0 1 1 0 0 1&lt;/gml:posList
&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
&lt;/gml:polygonPatches&gt;
&lt;/gml:PolyhedralSurface
&gt;'));

-- result --
 POLYHEDRALSURFACE(((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),
 ((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),
 ((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),
 ((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),
 ((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),
 ((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1)))
                </pre></div><div class="refsection" id="idm9865"><h2>相关信息</h2><p><a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a>, <a class="xref" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a>, <a class="xref" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a></p></div></div><div class="refentry" id="ST_GeomFromGeoJSON"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromGeoJSON — 将几何图形的 geojson 表示形式作为输入并输出 PostGIS 几何对象</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromGeoJSON</strong>(</code>text  <var class="pdparam">geomjson</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromGeoJSON</strong>(</code>json  <var class="pdparam">geomjson</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromGeoJSON</strong>(</code>jsonb  <var class="pdparam">geomjson</var><code>)</code>;</p></div></div><div class="refsection" id="idm9895"><h2>描述</h2><p>从 GeoJSON 制图表达生成 PostGIS 几何对象。</p><p>ST_GeomFromGeoJSON仅适用于 JSON 的几何部分。 如果尝试使用整个 JSON 文档，则会抛出错误。</p><p class="enhanced">增强：3.0.0如果未指定其他 SRID解析几何，则默认 SRID 为 4326。</p><p class="enhanced">增强：2.5.0 现在可以接受 json 和 jsonb 作为输入。</p><p class="availability">可用性：2.0.0需要 JSON-C 0.9 或更高版本</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您没有启用 JSON-C，支持您将收到错误通知而不是看到输出。 要启用 JSON-C，请运行 configure --with-jsondir=/path/to/json-c。 有关详细信息，请参阅<a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a>。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm9909"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_GeomFromGeoJSON('{"type":"Point","coordinates":[-48.23456,20.12345]}')) As wkt;
wkt
------
POINT(-48.23456 20.12345)
</pre><pre class="programlisting">-- a 3D linestring
SELECT ST_AsText(ST_GeomFromGeoJSON('{"type":"LineString","coordinates":[[1,2,3],[4,5,6],[7,8,9]]}')) As wkt;

wkt
-------------------
LINESTRING(1 2,4 5,7 8)
</pre></div><div class="refsection" id="idm9913"><h2>相关信息</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a>, <a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a></p></div></div><div class="refentry" id="ST_GeomFromKML"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromKML — 将几何图形的 KML 表示形式作为输入并输出 PostGIS 几何对象</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromKML</strong>(</code>text  <var class="pdparam">geomkml</var><code>)</code>;</p></div></div><div class="refsection" id="idm9931"><h2>描述</h2><p>从 OGC KML 表示构造 PostGIS ST_Geometry 对象。</p><p>ST_GeomFromKML 仅适用于 KML 几何片段。 如果您尝试在整个 KML 文档上使用它，它会引发错误。</p><p>OGC KML 的相应版本包括：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>KML 2.2.0 命名空间</p></li></ul></div><p>有关 OGC KML 标准，请参见<a class="link" href="http://www.opengeospatial.org/standards/kml" target="_top">http://www.opengeospatial.org/standards/kml</a>： </p><p class="availability">可用性：1.5，需要 libxml2 2.6+</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_GeomFromKML函数不支持 SQL/MM 曲线几何图形。</p></td></tr></table></div></div><div class="refsection" id="idm9947"><h2>示例 - 具有 srsName 属性的单个几何图形</h2><pre class="programlisting">
SELECT ST_GeomFromKML($$
    &lt;LineString&gt;
        &lt;coordinates
&gt;-71.1663,42.2614
            -71.1667,42.2616&lt;/coordinates&gt;
    &lt;/LineString&gt;
$$);

        </pre></div><div class="refsection" id="idm9950"><h2>相关信息</h2><p><a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a>, <a class="xref" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a></p></div></div><div class="refentry" id="ST_GeomFromTWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromTWKB — 从 TWKB（“<a class="link" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">微小的已知的二进制</a>”）几何表示创建几何实例。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeomFromTWKB</strong>(</code>bytea  <var class="pdparam">twkb</var><code>)</code>;</p></div></div><div class="refsection" id="idm9968"><h2>描述</h2><p><code class="varname">ST_GeomFromTWKB</code>采用 TWKB（“<a class="link" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">微小的已知二进制</a>”）几何表示形式，并创建相应几何类型的实例。</p></div><div class="refsection" id="idm9973"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_GeomFromTWKB(ST_AsTWKB('LINESTRING(126 34, 127 35)'::geometry)));

         st_astext
-----------------------------
 LINESTRING(126 34, 127 35)
(1 row)


SELECT ST_AsEWKT(
  ST_GeomFromTWKB(E'\\x620002f7f40dbce4040105')
);
                                          st_asewkt
------------------------------------------------------
LINESTRING(-113.98 39.198,-113.981 39.195)
(1 row)
</pre></div><div class="refsection" id="idm9976"><h2>相关信息</h2><p><a class="xref" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a></p></div></div><div class="refentry" id="ST_GMLToSQL"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GMLToSQL — 从 GML 表示返回指定的 ST_Geometry 值。 这是 ST_GeomFromGML 的别名</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GMLToSQL</strong>(</code>text  <var class="pdparam">geomgml</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_GMLToSQL</strong>(</code>text  <var class="pdparam">geomgml</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm10001"><h2>描述</h2><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.50 (曲线支持除外).</p><p class="availability">可用性：需要 1.5 libxml2 1.6+</p><p class="enhanced">增强功能：2.0.0支持多面体曲面和 TIN 。</p><p class="enhanced">增强：2.0.0 引入了多面体曲面支持和 TIN 支持。</p></div><div class="refsection" id="idm10010"><h2>相关信息</h2><p><a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a>, <a class="xref" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a>, <a class="xref" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a></p></div></div><div class="refentry" id="ST_LineFromEncodedPolyline"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineFromEncodedPolyline — 从编码折线创建 LineString。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineFromEncodedPolyline</strong>(</code>text  <var class="pdparam">polyline</var>, integer  <var class="pdparam">precision=5</var><code>)</code>;</p></div></div><div class="refsection" id="idm10031"><h2>描述</h2><p>从编码多段线字符串创建 LineString。</p><p>可选<code class="varname">precision</code>指定编码折线中将保留多少个小数位。 编码和解码时的值应该相同，否则坐标将不正确。</p><p>参照 http://developers.google.com/maps/documentation/utilities/polylinealgorithm</p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm10038"><h2>示例</h2><pre class="programlisting">-- Create a line string from a polyline
SELECT ST_AsEWKT(ST_LineFromEncodedPolyline('_p~iF~ps|U_ulLnnqC_mqNvxq`@'));
-- result --
SRID=4326;LINESTRING(-120.2 38.5,-120.95 40.7,-126.453 43.252)

-- Select different precision that was used for polyline encoding
SELECT ST_AsEWKT(ST_LineFromEncodedPolyline('_p~iF~ps|U_ulLnnqC_mqNvxq`@',6));
-- result --
SRID=4326;LINESTRING(-12.02 3.85,-12.095 4.07,-12.6453 4.3252)

    </pre></div><div class="refsection" id="idm10041"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEncodedPolyline" title="ST_AsEncodedPolyline">ST_AsEncodedPolyline</a></p></div></div><div class="refentry" id="ST_PointFromGeoHash"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointFromGeoHash — 从 GeoHash 字符串返回一个点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">point <strong class="fsfunc">ST_PointFromGeoHash</strong>(</code>text  <var class="pdparam">geohash</var>, integer  <var class="pdparam">precision=full_precision_of_geohash</var><code>)</code>;</p></div></div><div class="refsection" id="idm10060"><h2>描述</h2><p>从 GeoHash 字符串返回一个点。 该点代表 GeoHash 的中心点。</p><p>如果未指定<code class="varname">precision</code>，ST_PointFromGeoHash 返回基于输入 GeoHash 字符串的完整精度的点。</p><p>如果指定<code class="varname">precision</code>，ST_PointFromGeoHash 将使用 GeoHash 中的多个字符来创建点。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm10068"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_PointFromGeoHash('9qqj7nmxncgyy4d0dbxqz0'));
          st_astext
------------------------------
 POINT(-115.172816 36.114646)

SELECT ST_AsText(ST_PointFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 4));
             st_astext
-----------------------------------
 POINT(-115.13671875 36.123046875)

SELECT ST_AsText(ST_PointFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 10));
                 st_astext
-------------------------------------------
 POINT(-115.172815918922 36.1146435141563)

                </pre></div><div class="refsection" id="idm10071"><h2>相关信息</h2><p><a class="xref" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>, <a class="xref" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a>, <a class="xref" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a></p></div></div><div class="refentry" id="ST_FromFlatGeobufToTable"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_FromFlatGeobufToTable — 根据 FlatGeobuf 数据的结构创建一个表。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">void <strong class="fsfunc">ST_FromFlatGeobufToTable</strong>(</code>text  <var class="pdparam">schemaname</var>, text  <var class="pdparam">tablename</var>, bytea  <var class="pdparam">FlatGeobuf input data</var><code>)</code>;</p></div></div><div class="refsection" id="idm10095"><h2>描述</h2><p>根据 FlatGeobuf 数据的结构创建一个表。（<a class="link" href="http://flatgeobuf.org" target="_top">http://flatgeobuf.org</a>）。 </p><p><code class="varname">schema</code>架构名称。</p><p><code class="varname">table</code>表名。</p><p><code class="varname">data</code>输入FlatGeobuf数据。</p><p class="availability">可用性：3.2.0</p></div></div><div class="refentry" id="ST_FromFlatGeobuf"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_FromFlatGeobuf — 读取FlatGeobuf数据。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof anyelement <strong class="fsfunc">ST_FromFlatGeobuf</strong>(</code>anyelement  <var class="pdparam">Table reference</var>, bytea  <var class="pdparam">FlatGeobuf input data</var><code>)</code>;</p></div></div><div class="refsection" id="idm10121"><h2>描述</h2><p>读取 FlatGeobuf 数据 （<a class="link" href="http://flatgeobuf.org" target="_top">http://flatgeobuf.org</a>）。 注意：PostgreSQL bytea 类型不能超过 1GB。 </p><p><code class="varname">tabletype</code>对表类型的引用。</p><p><code class="varname">data</code>输入 FlatGeobuf数据。</p><p class="availability">可用性：3.2.0</p></div></div></section></section><section class="section" id="Geometry_Outputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.9. 几何输出</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数将几何对象转换为各种文本或二进制格式。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm10135">7.9.1. 已知文本 (WKT)</a></span></li><li><span class="section"><a href="#idm10303">7.9.2. 已知的二进制文件 (WKB)</a></span></li><li><span class="section"><a href="#idm10493">7.9.3. 其它格式</a></span></li></ul></div><section class="section" id="idm10135"><div class="titlepage"><div><div><h3 class="title">7.9.1. 已知文本 (WKT)</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_AsEWKT">ST_AsEWKT</a></span><span class="refpurpose"> — 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</span></li><li><span class="refentrytitle"><a href="#ST_AsText">ST_AsText</a></span><span class="refpurpose"> — 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</span></li></ul></div><div class="refentry" id="ST_AsEWKT"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsEWKT — 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsEWKT</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsEWKT</strong>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsEWKT</strong>(</code>geography  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsEWKT</strong>(</code>geography  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p></div></div><div class="refsection" id="idm10173"><h2>描述</h2><p>返回以 SRID 为前缀的几何图形的已知的文本表示形式（WKT)。 可选的<em class="parameter"><code> maxdecimaldigits</code></em> 参数可用于减少输出中使用的浮点后的最大十进制位数（默认为 15）。</p><p>要执行 EWKT 表示形式到 PostGIS 几何图形的逆转换，请使用<a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用 <em class="parameter"><code>maxdecimaldigits</code></em> 参数可能会导致输出几何图形无效。 为了避免这种情况，首先使用 <a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> 和合适的网格大小。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>WKT 规范不包括 SRID。 要获取 OGC WKT 格式，请使用 <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>。</p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>WKT 格式不保持精度，因此为了防止浮动截断，请使用<a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> 或 <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> 格式进行传输。</p></td></tr></table></div><p class="enhanced">增强：3.1.0 支持可选精度参数。</p><p class="enhanced">增强：2.0.0 引入了对地理、多面体曲面、三角形和 TIN 的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm10208"><h2>示例</h2><pre class="programlisting">SELECT ST_AsEWKT('0103000020E61000000100000005000000000000
                        000000000000000000000000000000000000000000000000000000
                        F03F000000000000F03F000000000000F03F000000000000F03
                        F000000000000000000000000000000000000000000000000'::geometry);

                   st_asewkt
--------------------------------
SRID=4326;POLYGON((0 0,0 1,1 1,1 0,0 0))
(1 row)

SELECT ST_AsEWKT('0108000080030000000000000060E30A4100000000785C0241000000000000F03F0000000018
E20A4100000000485F024100000000000000400000000018
E20A4100000000305C02410000000000000840')

--st_asewkt---
CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)
</pre></div><div class="refsection" id="idm10211"><h2>相关信息</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" id="ST_AsText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsText — 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsText</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsText</strong>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits = 15</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsText</strong>(</code>geography  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsText</strong>(</code>geography  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits = 15</var><code>)</code>;</p></div></div><div class="refsection" id="idm10254"><h2>描述</h2><p>返回几何/地理的 OGC <a class="link" href="#OpenGISWKBWKT" title="4.1.3. WKT和WKB">已知文本</a> (WKT) 表示形式。 可选的 <em class="parameter"><code>maxdecimaldigits </code></em>参数可用于限制输出坐标中小数点后的位数（默认为 15）。</p><p>要执行 WKT 表示形式到 PostGIS 几何图形的逆转换，请使用<a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>标准 OGC WKT 表示不包括 SRID。 要将 SRID 作为输出表示的一部分，请使用非标准 PostGIS 函数<a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a></p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>WKT 中数字的文本表示可能无法保持完整的浮点精度。 为了确保数据存储或传输的完全准确性，最好使用<a class="link" href="#OpenGISWKBWKT" title="4.1.3. WKT和WKB">已知的二进制</a> (WKB) 格式（请参阅 <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> 和 <em class="parameter"><code>maxdecimaldigits</code></em>）。</p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用 <em class="parameter"><code>maxdecimaldigits</code></em> 参数可能会导致输出几何图形无效。 为了避免这种情况，首先使用 <a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> 和合适的网格大小。 </p></td></tr></table></div><p class="availability">可用性：1.5 - 引入了地理支持。</p><p class="enhanced">增强：2.5 - 引入了可选的精度参数。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.25</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm10288"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText('01030000000100000005000000000000000000
000000000000000000000000000000000000000000000000
F03F000000000000F03F000000000000F03F000000000000F03
F000000000000000000000000000000000000000000000000');

    st_astext
--------------------------------
 POLYGON((0 0,0 1,1 1,1 0,0 0))
</pre><p>默认情况下为全精度输出。</p><pre class="programlisting">SELECT ST_AsText('POINT(111.1111111 1.1111111)'));
    st_astext
------------------------------
 POINT(111.1111111 1.1111111)
</pre><p><em class="parameter"><code>maxdecimaldigits </code></em>参数用于限制输出精度。</p><pre class="programlisting">SELECT ST_AsText('POINT(111.1111111 1.1111111)'), 2);
    st_astext
--------------------
 POINT(111.11 1.11)
</pre></div><div class="refsection" id="idm10296"><h2>相关信息</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div></section><section class="section" id="idm10303"><div class="titlepage"><div><div><h3 class="title">7.9.2. 已知的二进制文件 (WKB)</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_AsBinary">ST_AsBinary</a></span><span class="refpurpose"> — 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</span></li><li><span class="refentrytitle"><a href="#ST_AsEWKB">ST_AsEWKB</a></span><span class="refpurpose"> — 返回带有 SRID 元数据的几何图形的扩展已知的二进制 (EWKB) 表示形式。</span></li><li><span class="refentrytitle"><a href="#ST_AsHEXEWKB">ST_AsHEXEWKB</a></span><span class="refpurpose"> — 使用小端 (NDR) 或大端 (XDR) 编码返回 HEXEWKB 格式（作为文本）的几何图形。</span></li></ul></div><div class="refentry" id="ST_AsBinary"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsBinary — 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsBinary</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsBinary</strong>(</code>geometry  <var class="pdparam">g1</var>, text <var class="pdparam">NDR_or_XDR</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsBinary</strong>(</code>geography  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsBinary</strong>(</code>geography  <var class="pdparam">g1</var>, text <var class="pdparam">NDR_or_XDR</var><code>)</code>;</p></div></div><div class="refsection" id="idm10341"><h2>描述</h2><p>返回几何图形的 OGC/ISO<a class="link" href="#OpenGISWKBWKT" title="4.1.3. WKT和WKB">已知二进制 </a>（WKB） 表示形式。 第一种形式默认为服务器计算机的字节序。 第二种形式采用指定小端序 （“NDR”） 或大端序 （“XDR”） 的字符串。</p><p>WKB 格式对于从数据库读取几何数据并保持完整的数值精度非常有用。 这避免了 WKT 等文本格式可能发生的精确舍入。</p><p>要执行 WKB 到 PostGIS 几何图形的逆转换，请使用<a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OGC/ISO WKB 格式不包括 SRID。 要获取包含 SRID 的 EWKB 格式，请使用<a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a></p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostgreSQL 9.0 中的默认行为已更改为以十六进制编码输出 bytea。 如果您的 GUI 工具需要旧行为，请在数据库中设置 SET bytea_output='escape'。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="enhanced">增强：2.0.0支持更高坐标维度。</p><p class="enhanced">增强：2.0.0支持地理中的字节序。</p><p class="availability">可用性：1.5.0支持地理位置。</p><p class="changed">更改：2.0.0 此函数的输入不能是未知的——必须是几何图形。 <code class="code">ST_AsBinary('POINT(1 2)') </code>等结构不再有效，您将收到<code class="code"> n st_asbinary(unknown) is not unique error</code>。 类似的代码需要更改为 <code class="code">ST_AsBinary('POINT(1 2)'::geometry);</code>。 如果不可能，请安装<code class="filename">legacy.sql</code>。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.37</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm10387"><h2>示例</h2><pre class="programlisting">SELECT ST_AsBinary(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

                   st_asbinary
--------------------------------
\x01030000000100000005000000000000000000000000000000000000000000000000000000000000
000000f03f000000000000f03f000000000000f03f000000000000f03f0000000000000000000000
00000000000000000000000000
</pre><pre class="programlisting">SELECT ST_AsBinary(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326), 'XDR');
                   st_asbinary
--------------------------------
\x000000000300000001000000050000000000000000000000000000000000000000000000003ff000
00000000003ff00000000000003ff00000000000003ff00000000000000000000000000000000000
00000000000000000000000000
</pre></div><div class="refsection" id="idm10391"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, </p></div></div><div class="refentry" id="ST_AsEWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsEWKB — 返回带有 SRID 元数据的几何图形的扩展已知的二进制 (EWKB) 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsEWKB</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsEWKB</strong>(</code>geometry  <var class="pdparam">g1</var>, text <var class="pdparam">NDR_or_XDR</var><code>)</code>;</p></div></div><div class="refsection" id="idm10419"><h2>描述</h2><p>返回具有 SRID 元数据的几何图形的<a class="link" href="#EWKB_EWKT" title="4.2.1. PostGIS EWKB 和 EWKT">扩展已知二进制 </a>（EWKB） 表示形式。 第一种形式默认为服务器计算机的字节序。 第二种形式采用指定小端序 （“NDR”） 或大端序 （“XDR”） 的字符串。</p><p>WKB 格式对于从数据库读取几何数据并保持完整的数值精度非常有用。 这避免了 WKT 等文本格式可能发生的精确舍入。</p><p>要执行 EWKB 到 PostGIS 几何图形的逆转换，请使用 <a class="xref" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要获取 OGC/ISO WKB 格式，请使用 <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>。 请注意，OGC/ISO WKB 格式不包括 SRID。 </p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm10446"><h2>示例</h2><pre class="programlisting">SELECT ST_AsEWKB(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

                   st_asewkb
--------------------------------
\x0103000020e610000001000000050000000000000000000000000000000000000000000000000000
00000000000000f03f000000000000f03f000000000000f03f000000000000f03f00000000000000
0000000000000000000000000000000000
</pre><pre class="programlisting">SELECT ST_AsEWKB(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326), 'XDR');
                   st_asewkb
--------------------------------
\x0020000003000010e600000001000000050000000000000000000000000000000000000000000000
003ff00000000000003ff00000000000003ff00000000000003ff000000000000000000000000000
0000000000000000000000000000000000
                </pre></div><div class="refsection" id="idm10450"><h2>相关信息</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_AsHEXEWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsHEXEWKB — 使用小端 (NDR) 或大端 (XDR) 编码返回 HEXEWKB 格式（作为文本）的几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsHEXEWKB</strong>(</code>geometry  <var class="pdparam">g1</var>, text  <var class="pdparam">NDRorXDR</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsHEXEWKB</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm10477"><h2>描述</h2><p>使用小端 (NDR) 或大端 (XDR) 编码返回 HEXEWKB 格式（作为文本）的几何图形。 如果未指定编码，则使用 NDR。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="availability">可用性：1.2.2</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm10490"><h2>示例</h2><pre class="programlisting">SELECT ST_AsHEXEWKB(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));
                which gives same answer as

                SELECT ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326)::text;

                st_ashexewkb
                --------
                0103000020E6100000010000000500
                00000000000000000000000000000000
                00000000000000000000000000000000F03F
                000000000000F03F000000000000F03F000000000000F03
                F000000000000000000000000000000000000000000000000</pre></div></div></section><section class="section" id="idm10493"><div class="titlepage"><div><div><h3 class="title">7.9.3. 其它格式</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_AsEncodedPolyline">ST_AsEncodedPolyline</a></span><span class="refpurpose"> — 从 LineString 几何体返回编码折线。</span></li><li><span class="refentrytitle"><a href="#ST_AsFlatGeobuf">ST_AsFlatGeobuf</a></span><span class="refpurpose"> — 返回一组行的 FlatGeobuf 表示形式。</span></li><li><span class="refentrytitle"><a href="#ST_AsGeobuf">ST_AsGeobuf</a></span><span class="refpurpose"> — 返回一组行的 Geobuf 表示。</span></li><li><span class="refentrytitle"><a href="#ST_AsGeoJSON">ST_AsGeoJSON</a></span><span class="refpurpose"> — 以GeoJSON格式返回一个几何体或要素。</span></li><li><span class="refentrytitle"><a href="#ST_AsGML">ST_AsGML</a></span><span class="refpurpose"> — 将几何图形作为 GML 版本 2 或 3 元素返回。</span></li><li><span class="refentrytitle"><a href="#ST_AsKML">ST_AsKML</a></span><span class="refpurpose"> — 将几何图形作为 KML 元素返回。</span></li><li><span class="refentrytitle"><a href="#ST_AsLatLonText">ST_AsLatLonText</a></span><span class="refpurpose"> — 返回给定点的度、分、秒表示形式。</span></li><li><span class="refentrytitle"><a href="#ST_AsMARC21">ST_AsMARC21</a></span><span class="refpurpose"> — 将几何图形返回为带有地理数据字段 (034) 的 MARC21/XML 记录。</span></li><li><span class="refentrytitle"><a href="#ST_AsMVTGeom">ST_AsMVTGeom</a></span><span class="refpurpose"> — 将几何图形转换为 MVT 瓦片的坐标空间。</span></li><li><span class="refentrytitle"><a href="#ST_AsMVT">ST_AsMVT</a></span><span class="refpurpose"> — 返回一组行的 MVT 表示形式的聚合函数。</span></li><li><span class="refentrytitle"><a href="#ST_AsSVG">ST_AsSVG</a></span><span class="refpurpose"> — 返回几何体的 SVG 路径数据。</span></li><li><span class="refentrytitle"><a href="#ST_AsTWKB">ST_AsTWKB</a></span><span class="refpurpose"> — 返回几何形式为 TWKB，又名“微小的已知的二进制”</span></li><li><span class="refentrytitle"><a href="#ST_AsX3D">ST_AsX3D</a></span><span class="refpurpose"> — 返回 X3D xml 节点元素格式的几何图形：ISO-IEC-19776-1.2-X3DEncodings-XML</span></li><li><span class="refentrytitle"><a href="#ST_GeoHash">ST_GeoHash</a></span><span class="refpurpose"> — 返回几何图形的 GeoHash 表示形式。</span></li></ul></div><div class="refentry" id="ST_AsEncodedPolyline"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsEncodedPolyline — 从 LineString 几何体返回编码折线。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsEncodedPolyline</strong>(</code>geometry <var class="pdparam">geom</var>, integer  <var class="pdparam">precision=5</var><code>)</code>;</p></div></div><div class="refsection" id="idm10510"><h2>描述</h2><p>以编码折线形式返回几何图形。 此格式由精度为 5 的 Google 地图和精度为 5 和 6 的开源路由机使用。</p><p>可选<code class="varname">precision</code>指定编码折线中将保留多少个小数位。 编码和解码时的值应该相同，否则坐标将不正确。</p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm10516"><h2>示例</h2><p>基本 </p><pre class="programlisting">SELECT ST_AsEncodedPolyline(GeomFromEWKT('SRID=4326;LINESTRING(-120.2 38.5,-120.95 40.7,-126.453 43.252)'));
        --result--
        |_p~iF~ps|U_ulLnnqC_mqNvxq`@
        </pre><p>与地理线串和地理分段结合使用，并放在谷歌地图上</p><pre class="programlisting">-- the SQL for Boston to San Francisco, segments every 100 KM
        SELECT ST_AsEncodedPolyline(
                ST_Segmentize(
                        ST_GeogFromText('LINESTRING(-71.0519 42.4935,-122.4483 37.64)'),
                                100000)::geometry) As encodedFlightPath;</pre><p>javascript 看起来像这样，其中 $ 变量替换为查询结果</p><pre class="programlisting">
&lt;script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry"
&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
         flightPath = new google.maps.Polyline({
                        path:  google.maps.geometry.encoding.decodePath("$encodedFlightPath"),
                        map: map,
                        strokeColor: '#0000CC',
                        strokeOpacity: 1.0,
                        strokeWeight: 4
                });
&lt;/script&gt;

</pre></div><div class="refsection" id="idm10524"><h2>相关信息</h2><p><a class="xref" href="#ST_LineFromEncodedPolyline" title="ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a>, <a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a></p></div></div><div class="refentry" id="ST_AsFlatGeobuf"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsFlatGeobuf — 返回一组行的 FlatGeobuf 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsFlatGeobuf</strong>(</code>anyelement set  <var class="pdparam">row</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsFlatGeobuf</strong>(</code>anyelement  <var class="pdparam">row</var>, bool  <var class="pdparam">index</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsFlatGeobuf</strong>(</code>anyelement  <var class="pdparam">row</var>, bool  <var class="pdparam">index</var>, text  <var class="pdparam">geom_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm10562"><h2>描述</h2><p>返回与 FeatureCollection 对应的一组行的 FlatGeobuf 表示形式 (<a class="link" href="http://flatgeobuf.org" target="_top">http://flatgeobuf.org</a>)。 注意：PostgreSQL bytea 不能超过 1GB。 </p><p><code class="varname">row </code>至少包含一个几何列的行数据。</p><p><code class="varname">index </code>切换空间索引生成。 默认值为 FALSE。</p><p><code class="varname">geom_name </code>行数据中几何列的列名。 如果为 NULL，则它是找到的第一个几何列。</p><p class="availability">可用性：3.2.0</p></div></div><div class="refentry" id="ST_AsGeobuf"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsGeobuf — 返回一组行的 Geobuf 表示。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsGeobuf</strong>(</code>anyelement set  <var class="pdparam">row</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsGeobuf</strong>(</code>anyelement  <var class="pdparam">row</var>, text  <var class="pdparam">geom_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm10594"><h2>描述</h2><p>返回与FeatureCollection对应的一组行的Geobuf表示（<a class="link" href="https://github.com/mapbox/geobuf" target="_top">https://github.com/mapbox/geobuf</a>）。 分析每个输入几何形状以确定最佳存储的最大精度。 请注意，当前形式的 Geobuf 无法进行流式传输，因此完整的输出将在内存中组装。 </p><p><code class="varname">row </code>至少包含一个几何列的行数据。</p><p><code class="varname">geom_name </code>行数据中几何列的列名。 如果为 NULL，则它是找到的第一个几何列。</p><p class="availability">可用性：2.4.0</p></div><div class="refsection" id="idm10603"><h2>示例</h2><pre class="programlisting">SELECT encode(ST_AsGeobuf(q, 'geom'), 'base64')
    FROM (SELECT ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))') AS geom) AS q;
 st_asgeobuf
----------------------------------
 GAAiEAoOCgwIBBoIAAAAAgIAAAE=


                </pre></div></div><div class="refentry" id="ST_AsGeoJSON"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsGeoJSON — 以GeoJSON格式返回一个几何体或要素。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsGeoJSON</strong>(</code>record  <var class="pdparam">feature</var>, text  <var class="pdparam">geom_column=""</var>, integer  <var class="pdparam">maxdecimaldigits=9</var>, boolean  <var class="pdparam">pretty_bool=false</var>, text  <var class="pdparam">id_column=''</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsGeoJSON</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=9</var>, integer  <var class="pdparam">options=8</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsGeoJSON</strong>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=9</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p></div></div><div class="refsection" id="idm10654"><h2>描述</h2><p>返回一个几何体作为GeoJSON中的 “geometry” 对象，或者返回一行作为GeoJSON中的 “feature”对象。 </p><p>生成的GeoJSON几何体和要素遵循 <a class="link" href="https://tools.ietf.org/html/rfc7946" target="_top">GeoJSON规范RFC 7946</a>，但当解析的几何体使用WGS84经度和纬度之外的CRS（如 <a class="link" href="https://epsg.io/4326" target="_top">EPSG:4326</a>，<a class="link" href="http://epsg.io/4326.gml" target="_top">urn:ogc:def:crs:OGC::CRS84</a>）进行引用时，GeoJSON几何对象将默认附加一个短的CRS SRID标识符。支持2D和3D几何。GeoJSON仅支持SFS 1.1几何类型（例如，不支持曲线）。 </p><p><code class="varname">geom_column</code> 参数用于区分多个几何列。如果省略该参数，将确定记录中的第一个几何列。相反，传递该参数将节省列类型查找。 </p><p><code class="varname">maxdecimaldigits </code>参数可用于减少输出中使用的最大小数位数（默认为 9）。 如果您使用 EPSG:4326 并且输出几何图形仅用于显示，则<code class="varname"> maxdecimaldigits</code>=6 对于许多地图来说可能是一个不错的选择。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用 <em class="parameter"><code>maxdecimaldigits</code></em> 参数可能会导致输出几何图形无效。 为了避免这种情况，首先使用 <a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> 和合适的网格大小。 </p></td></tr></table></div><p><code class="varname">options </code>参数可用于在 GeoJSON 输出中添加 BBOX 或 CRS： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0：表示没有选项</p></li><li class="listitem"><p>1：GeoJSON BBOX</p></li><li class="listitem"><p>2：GeoJSON 短 CRS（例如 EPSG：4326）</p></li><li class="listitem"><p>4：GeoJSON 长 CRS（例如 urn:ogc:def:crs:EPSG::4326）</p></li><li class="listitem"><p>8：GeoJSON 短 CRS，如果不是 EPSG：4326（默认）</p></li></ul></div><p>
			</p><p><code class="varname">id_column</code> 参数用于设置返回的 GeoJSON 要素的 "id" 成员。根据 GeoJSON RFC，应该在要素具有常用标识符（例如主键）时使用此参数。当未指定时，生成的要素将不会有 "id" 成员，除了几何信息之外的任何列，包括任何可能的键，都将最终位于要素的 "properties" 成员内。</p><p>GeoJSON 规范规定多边形使用右手定则定向，并且某些客户端需要此方向。 这可以通过使用<a class="xref" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a> 来确保。 该规范还要求几何图形位于 WGS84 坐标系 (SRID = 4326) 中。 如果需要，可以使用 <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>将几何图形投影到 WGS84 中：<code class="code">ST_Transform( geom, 4326 )</code>。 </p><p>GeoJSON 可以在<a class="link" href="http://geojson.io/" target="_top"> geojson.io </a>和 <a class="link" href="http://geojson.io/" target="_top">geojsonlint.com </a>上在线测试和查看。 它受到网络地图框架的广泛支持： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="https://openlayers.org/en/latest/examples/geojson.html" target="_top">OpenLayers GeoJSON Example</a></p></li><li class="listitem"><p><a class="link" href="https://leafletjs.com/examples/geojson/" target="_top">Leaflet GeoJSON Example</a></p></li><li class="listitem"><p><a class="link" href="https://www.mapbox.com/mapbox-gl-js/example/multiple-geometries/" target="_top">Mapbox GL GeoJSON Example</a></p></li></ul></div><p>
            </p><p class="availability">可用性：1.3.4</p><p class="availability">可用性：1.5.0支持地理位置。</p><p class="changed">更改：2.0.0 支持默认参数和命名参数。</p><p class="changed">更改：3.0.0 支持记录作为输入</p><p class="changed">更改：3.0.0 输出 SRID（如果不是 EPSG：4326）。</p><p class="changed">更改：3.5.0 允许指定包含要素 ID 的列</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm10712"><h2>示例</h2><p>生成特征集合：</p><pre class="programlisting">SELECT json_build_object(
    'type', 'FeatureCollection',
    'features', json_agg(ST_AsGeoJSON(t.*, id_column =
&gt; 'id')::json)
    )
FROM ( VALUES (1, 'one', 'POINT(1 1)'::geometry),
              (2, 'two', 'POINT(2 2)'),
              (3, 'three', 'POINT(3 3)')
     ) as t(id, name, geom);</pre><pre class="screen">{"type" : "FeatureCollection", "features" : [{"type": "Feature", "geometry": {"type":"Point","coordinates":[1,1]}, "id": 1, "properties": {"name": "one"}}, {"type": "Feature", "geometry": {"type":"Point","coordinates":[2,2]}, "id": 2, "properties": {"name": "two"}}, {"type": "Feature", "geometry": {"type":"Point","coordinates":[3,3]}, "id": 3, "properties": {"name": "three"}}]}</pre><p>生成一个特征：</p><pre class="programlisting">SELECT ST_AsGeoJSON(t.*, id_column =
&gt; 'id')
FROM (VALUES (1, 'one', 'POINT(1 1)'::geometry)) AS t(id, name, geom);</pre><pre class="screen">st_asgeojson
-----------------------------------------------------------------------------------------------------------------
 {"type": "Feature", "geometry": {"type":"Point","coordinates":[1,1]}, "id": 1, "properties": {"name": "one"}}
</pre><p>不要忘记将数据转换为 WGS84 经度、纬度以符合 GeoJSON 规范：</p><pre class="programlisting">SELECT ST_AsGeoJSON(ST_Transform(geom,4326)) from fe_edges limit 1;</pre><pre class="screen">st_asgeojson
-----------------------------------------------------------------------------------------------------------

{"type":"MultiLineString","coordinates":[[[-89.734634999999997,31.492072000000000],
[-89.734955999999997,31.492237999999997]]]}
</pre><p>支持 3D 几何形状：</p><pre class="programlisting">SELECT ST_AsGeoJSON('LINESTRING(1 2 3, 4 5 6)');</pre><pre class="screen">{"type":"LineString","coordinates":[[1,2,3],[4,5,6]]}</pre><p>Options argument can be used to add BBOX and CRS in GeoJSON output:</p><pre class="programlisting">SELECT ST_AsGeoJSON(ST_SetSRID('POINT(1 1)'::geometry, 4326), 9, 4|1);</pre><pre class="screen">{"type":"Point","crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:EPSG::4326"}},"bbox":[1.000000000,1.000000000,1.000000000,1.000000000],"coordinates":[1,1]}
</pre></div><div class="refsection" id="idm10729"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a>, <a class="xref" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a> </p></div></div><div class="refentry" id="ST_AsGML"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsGML — 将几何图形作为 GML 版本 2 或 3 元素返回。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsGML</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsGML</strong>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var>, text  <var class="pdparam">nprefix=null</var>, text  <var class="pdparam">id=null</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsGML</strong>(</code>integer  <var class="pdparam">version</var>, geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var>, text  <var class="pdparam">nprefix=null</var>, text  <var class="pdparam">id=null</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsGML</strong>(</code>integer  <var class="pdparam">version</var>, geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var>, text  <var class="pdparam">nprefix=null</var>, text  <var class="pdparam">id=null</var><code>)</code>;</p></div></div><div class="refsection" id="idm10813"><h2>描述</h2><p>将几何图形作为地理标记语言 (GML) 元素返回。 版本参数（如果指定）可以是 2 或 3。如果未指定版本参数，则默认值为 2。 <code class="varname">maxdecimaldigits </code>参数可用于减少输出中使用的最大小数位数（默认为 15） ）。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用 <em class="parameter"><code>maxdecimaldigits</code></em> 参数可能会导致输出几何图形无效。 为了避免这种情况，首先使用 <a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> 和合适的网格大小。 </p></td></tr></table></div><p>GML 2指2.1.2版本，GML 3指3.1.1版本</p><p>“选项”参数是一个位字段。 它可用于在 GML 输出中定义 CRS 输出类型，并将数据声明为纬度/经度： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0：GML 短 CRS（例如 EPSG:4326），默认值</p></li><li class="listitem"><p>1：GML 长 CRS（例如 urn:ogc:def:crs:EPSG::4326）</p></li><li class="listitem"><p>2：仅对于 GML 3，从输出中删除 srsDimension 属性。</p></li><li class="listitem"><p>4：仅对于 GML 3，对线使用 &lt;LineString&gt; 而不是 &lt;Curve&gt; 标记。</p></li><li class="listitem"><p>16：声明数据为纬度/经度（例如 srid=4326）。 默认情况下假设数据是平面的。 此选项仅适用于与轴顺序相关的 GML 3.1.1 输出。 因此，如果您设置它，它将交换坐标，因此顺序是 lat lon 而不是数据库 lon lat。</p></li><li class="listitem"><p>32：输出几何体的边框（最小外接矩形）。</p></li></ul></div><p>
						</p><p>“命名空间前缀”参数可用于指定自定义命名空间前缀或无前缀（如果为空）。 如果使用 null 或省略 'gml' 前缀</p><p class="availability">可用性：1.3.2</p><p class="availability">可用性：1.5.0支持地理位置。</p><p class="enhanced">增强： 2.0.0 引入了前缀支持。 引入了 GML3 的选项 4，以允许使用 LineString 而不是线条的 Curve 标记。 引入了对多面体曲面和 TINS 的 GML3 支持。 引入选项 32 来输出该框。</p><p class="changed">更改：2.0.0 使用默认命名参数</p><p class="enhanced">增强：针对 GML 3 引入了 2.1.0 id 支持。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅 ST_AsGML 版本 3 +支持多面体曲面和 TINS。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 17.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm10860"><h2>示例：版本2</h2><pre class="programlisting">
SELECT ST_AsGML(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));
                st_asgml
                --------
                &lt;gml:Polygon srsName="EPSG:4326"
&gt;&lt;gml:outerBoundaryIs
&gt;&lt;gml:LinearRing
&gt;&lt;gml:coordinates
&gt;0,0 0,1 1,1 1,0 0,0&lt;/gml:coordinates
&gt;&lt;/gml:LinearRing
&gt;&lt;/gml:outerBoundaryIs
&gt;&lt;/gml:Polygon&gt;

</pre></div><div class="refsection" id="idm10863"><h2>示例：版本3</h2><pre class="programlisting">
-- Flip coordinates and output extended EPSG (16 | 1)--
SELECT ST_AsGML(3, ST_GeomFromText('POINT(5.234234233242 6.34534534534)',4326), 5, 17);
                        st_asgml
                        --------
                &lt;gml:Point srsName="urn:ogc:def:crs:EPSG::4326"
&gt;&lt;gml:pos
&gt;6.34535 5.23423&lt;/gml:pos
&gt;&lt;/gml:Point&gt;

</pre><pre class="programlisting">
-- Output the envelope (32) --
SELECT ST_AsGML(3, ST_GeomFromText('LINESTRING(1 2, 3 4, 10 20)',4326), 5, 32);
                st_asgml
                --------
        &lt;gml:Envelope srsName="EPSG:4326"&gt;
                &lt;gml:lowerCorner
&gt;1 2&lt;/gml:lowerCorner&gt;
                &lt;gml:upperCorner
&gt;10 20&lt;/gml:upperCorner&gt;
        &lt;/gml:Envelope&gt;

</pre><pre class="programlisting">
-- Output the envelope (32) , reverse (lat lon instead of lon lat) (16), long srs (1)= 32 | 16 | 1 = 49 --
SELECT ST_AsGML(3, ST_GeomFromText('LINESTRING(1 2, 3 4, 10 20)',4326), 5, 49);
        st_asgml
        --------
&lt;gml:Envelope srsName="urn:ogc:def:crs:EPSG::4326"&gt;
        &lt;gml:lowerCorner
&gt;2 1&lt;/gml:lowerCorner&gt;
        &lt;gml:upperCorner
&gt;20 10&lt;/gml:upperCorner&gt;
&lt;/gml:Envelope&gt;

</pre><pre class="programlisting">
-- Polyhedral Example --
SELECT ST_AsGML(3, ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
        st_asgml
        --------
 &lt;gml:PolyhedralSurface&gt;
&lt;gml:polygonPatches&gt;
   &lt;gml:PolygonPatch&gt;
                &lt;gml:exterior&gt;
                          &lt;gml:LinearRing&gt;
                                   &lt;gml:posList srsDimension="3"
&gt;0 0 0 0 0 1 0 1 1 0 1 0 0 0 0&lt;/gml:posList&gt;
                          &lt;/gml:LinearRing&gt;
                &lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
                &lt;gml:exterior&gt;
                          &lt;gml:LinearRing&gt;
                                   &lt;gml:posList srsDimension="3"
&gt;0 0 0 0 1 0 1 1 0 1 0 0 0 0 0&lt;/gml:posList&gt;
                          &lt;/gml:LinearRing&gt;
                &lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
                &lt;gml:exterior&gt;
                          &lt;gml:LinearRing&gt;
                                   &lt;gml:posList srsDimension="3"
&gt;0 0 0 1 0 0 1 0 1 0 0 1 0 0 0&lt;/gml:posList&gt;
                          &lt;/gml:LinearRing&gt;
                &lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
                &lt;gml:exterior&gt;
                          &lt;gml:LinearRing&gt;
                                   &lt;gml:posList srsDimension="3"
&gt;1 1 0 1 1 1 1 0 1 1 0 0 1 1 0&lt;/gml:posList&gt;
                          &lt;/gml:LinearRing&gt;
                &lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
                &lt;gml:exterior&gt;
                          &lt;gml:LinearRing&gt;
                                   &lt;gml:posList srsDimension="3"
&gt;0 1 0 0 1 1 1 1 1 1 1 0 0 1 0&lt;/gml:posList&gt;
                          &lt;/gml:LinearRing&gt;
                &lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
                &lt;gml:exterior&gt;
                          &lt;gml:LinearRing&gt;
                                   &lt;gml:posList srsDimension="3"
&gt;0 0 1 1 0 1 1 1 1 0 1 1 0 0 1&lt;/gml:posList&gt;
                          &lt;/gml:LinearRing&gt;
                &lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
&lt;/gml:polygonPatches&gt;
&lt;/gml:PolyhedralSurface&gt;

</pre></div><div class="refsection" id="idm10869"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a></p></div></div><div class="refentry" id="ST_AsKML"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsKML — 将几何图形作为 KML 元素返回。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsKML</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, text  <var class="pdparam">nprefix=NULL</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsKML</strong>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, text  <var class="pdparam">nprefix=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm10903"><h2>描述</h2><p>将几何图形作为 Keyhole 标记语言 (KML) 元素返回。 默认最大小数位数为 15，默认命名空间无前缀。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用 <em class="parameter"><code>maxdecimaldigits</code></em> 参数可能会导致输出几何图形无效。 为了避免这种情况，首先使用 <a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> 和合适的网格大小。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>需要在 Proj 支持下编译 PostGIS。 使用 <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>确认您已编译项目支持。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="availability">可用性：1.2.2 - 包含版本参数的更高版本出现在 1.3.2 中</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：2.0.0 - 添加前缀命名空间，使用默认和命名参数</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：3.0.0 - 删除了“版本化”变体签名</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>AsKML 输出不适用于没有 SRID 的几何图形</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm10925"><h2>示例</h2><pre class="programlisting">
SELECT ST_AsKML(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

                st_askml
                --------
                &lt;Polygon
&gt;&lt;outerBoundaryIs
&gt;&lt;LinearRing
&gt;&lt;coordinates
&gt;0,0 0,1 1,1 1,0 0,0&lt;/coordinates
&gt;&lt;/LinearRing
&gt;&lt;/outerBoundaryIs
&gt;&lt;/Polygon&gt;

                --3d linestring
                SELECT ST_AsKML('SRID=4326;LINESTRING(1 2 3, 4 5 6)');
                &lt;LineString
&gt;&lt;coordinates
&gt;1,2,3 4,5,6&lt;/coordinates
&gt;&lt;/LineString&gt;


</pre></div><div class="refsection" id="idm10928"><h2>相关信息</h2><p><a class="xref" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a>, <a class="xref" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a></p></div></div><div class="refentry" id="ST_AsLatLonText"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsLatLonText — 返回给定点的度、分、秒表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsLatLonText</strong>(</code>geometry  <var class="pdparam">pt</var>, text  <var class="pdparam">format=''</var><code>)</code>;</p></div></div><div class="refsection" id="idm10948"><h2>描述</h2><p>返回点的度、分和秒表示形式。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>假设该点位于纬度/经度投影中。 X（经度）和 Y（纬度）坐标在输出中标准化为“正常”范围（经度为 -180 到 180，纬度为 -90 到 90）。</p></td></tr></table></div><p>text 参数是一个格式字符串，包含结果文本的格式，类似于日期格式字符串。 有效标记为“D”表示度、“M”表示分钟、“S”表示秒、“C”表示基本方向 (NSEW)。 DMS 令牌可以重复以指示所需的宽度和精度（“SSS.SSSS”表示“1.0023”）。 </p><p>“M”、“S”和“C”是可选的。 如果省略“C”，则南或西的度数将显示为“-”符号。 如果省略“S”，分钟将显示为十进制，其精度位数与您指定的位数相同。 如果还省略“M”，则度数将显示为十进制，其精度与您指定的位数相同。 </p><p>如果格式字符串被省略（或零长度），则将使用默认格式。 </p><p class="availability">可用性：2.0</p></div><div class="refsection" id="idm10957"><h2>示例</h2><p>默认格式。</p><pre class="programlisting">SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)'));
      st_aslatlontext
----------------------------
 2°19'29.928"S 3°14'3.243"W
</pre><p>指定格式（与默认值相同）。</p><pre class="programlisting">SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D°M''S.SSS"C'));
      st_aslatlontext
----------------------------
 2°19'29.928"S 3°14'3.243"W
</pre><p>除 D、M、S 和 C 以外的字符仅通过。</p><pre class="programlisting">SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D degrees, M minutes, S seconds to the C'));
                                   st_aslatlontext
--------------------------------------------------------------------------------------
 2 degrees, 19 minutes, 30 seconds to the S 3 degrees, 14 minutes, 3 seconds to the W
</pre><p>有符号的度数而不是基本方向。</p><pre class="programlisting">SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D°M''S.SSS"'));
      st_aslatlontext
----------------------------
 -2°19'29.928" -3°14'3.243"
</pre><p>十进制度数。</p><pre class="programlisting">SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D.DDDD degrees C'));
          st_aslatlontext
-----------------------------------
 2.3250 degrees S 3.2342 degrees W
</pre><p>过大的值被归一化。</p><pre class="programlisting">SELECT (ST_AsLatLonText('POINT (-302.2342342 -792.32498)'));
        st_aslatlontext
-------------------------------
 72°19'29.928"S 57°45'56.757"E
</pre></div></div><div class="refentry" id="ST_AsMARC21"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsMARC21 — 将几何图形返回为带有地理数据字段 (034) 的 MARC21/XML 记录。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef"> text <strong class="fsfunc">ST_AsMARC21</strong> (</code> geometry  <var class="pdparam">geom</var> ,  text  <var class="pdparam">format='hdddmmss'</var> <code>)</code>;</p></div></div><div class="refsection" id="idm10986"><h2>描述</h2><p>此函数返回一个 MARC21/XML 记录，其中包含表示给定几何图形的边界框的<a class="link" href="https://www.loc.gov/marc/bibliographic/bd034.html" target="_top">编码制图数学数据</a>。 <code class="varname">格式</code>参数允许以 MARC21/XML 标准支持的所有格式对子字段<code class="varname"> $d</code>、<code class="varname">$e</code>、<code class="varname">$f </code>和 <code class="varname">$g</code> 中的坐标进行编码。 有效格式为：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>纬度和经度标识，度、分、秒（默认）： <code class="varname">hdddmmss</code></p></li><li class="listitem"><p>带经度和纬度标识的十进制度： <code class="varname">hddd.dddddd</code></p></li><li class="listitem"><p>没有经度和纬度标识的十进制度： <code class="varname">ddd.dddddd</code></p></li><li class="listitem"><p>带有经度和纬度标识的小数分钟： <code class="varname">hdddmm.mmmm</code></p></li><li class="listitem"><p>不带纬度和经度标识的小数分钟： <code class="varname">dddmm.mmmm</code></p></li><li class="listitem"><p>带有经度和纬度标识的小数秒： <code class="varname">hdddmmss.sss</code></p></li></ul></div><p>小数点符号也可以是逗号，例如 <code class="varname">hddddmm，mmmm</code>。</p><p>小数格式的精度可能受到小数点后字符数的限制，例如 <code class="varname">hdddmm.mm</code> 表示小数分钟，精度为两位小数。</p><p>此函数忽略 Z 和 M维度。</p><p>支持的 LOC MARC21/XML 版本： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="https://www.loc.gov/standards/marcxml/" target="_top">MARC21/XML 1.1</a></p></li></ul></div><p>
            </p><p class="availability">可用性： 3.3.0 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不支持非经度/纬度几何形状，因为它们不受 MARC21/XML 标准（编码制图数学数据）支持。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>MARC21/XML 标准没有提供任何方法来注释编码制图数学数据的空间参考系统，这意味着这些信息在转换为 MARC21/XML 后将会丢失。 </p></td></tr></table></div></div><div class="refsection" id="idm11029"><h2>示例</h2><p>将<code class="varname"> POINT </code>转换为 MARC21/XML，格式为 dd mm ss（默认）</p><pre class="programlisting">


                SELECT ST_AsMARC21('SRID=4326;POINT(-4.504289 54.253312)'::geometry);

                                st_asmarc21
                -------------------------------------------------
                &lt;record xmlns="http://www.loc.gov/MARC21/slim"&gt;
                    &lt;datafield tag="034" ind1="1" ind2=" "&gt;
                        &lt;subfield code="a"
&gt;a&lt;/subfield&gt;
                        &lt;subfield code="d"
&gt;W0043015&lt;/subfield&gt;
                        &lt;subfield code="e"
&gt;W0043015&lt;/subfield&gt;
                        &lt;subfield code="f"
&gt;N0541512&lt;/subfield&gt;
                        &lt;subfield code="g"
&gt;N0541512&lt;/subfield&gt;
                    &lt;/datafield&gt;
                &lt;/record&gt;



</pre><p>将 <code class="varname">POLYGON</code>转换为十进制度格式的 MARC21/XML</p><pre class="programlisting">


                SELECT ST_AsMARC21('SRID=4326;POLYGON((-4.5792388916015625 54.18172660239091,-4.56756591796875 54.196993557130355,-4.546623229980469 54.18313300502024,-4.5792388916015625 54.18172660239091))'::geometry,'hddd.dddd');

                &lt;record xmlns="http://www.loc.gov/MARC21/slim"&gt;
                    &lt;datafield tag="034" ind1="1" ind2=" "&gt;
                        &lt;subfield code="a"
&gt;a&lt;/subfield&gt;
                        &lt;subfield code="d"
&gt;W004.5792&lt;/subfield&gt;
                        &lt;subfield code="e"
&gt;W004.5466&lt;/subfield&gt;
                        &lt;subfield code="f"
&gt;N054.1970&lt;/subfield&gt;
                        &lt;subfield code="g"
&gt;N054.1817&lt;/subfield&gt;
                    &lt;/datafield&gt;
                &lt;/record&gt;



</pre><p>将 <code class="varname">GEOMETRYCOLLECTION</code> 转换为以十进制分钟格式表示的 MARC21/XML。 MARC21/XML 输出中的几何顺序与其在集合中的顺序相对应。</p><pre class="programlisting">


                SELECT ST_AsMARC21('SRID=4326;GEOMETRYCOLLECTION(POLYGON((13.1 52.65,13.516666666666667 52.65,13.516666666666667 52.38333333333333,13.1 52.38333333333333,13.1 52.65)),POINT(-4.5 54.25))'::geometry,'hdddmm.mmmm');

                                st_asmarc21
                -------------------------------------------------
                &lt;record xmlns="http://www.loc.gov/MARC21/slim"&gt;
                    &lt;datafield tag="034" ind1="1" ind2=" "&gt;
                        &lt;subfield code="a"
&gt;a&lt;/subfield&gt;
                        &lt;subfield code="d"
&gt;E01307.0000&lt;/subfield&gt;
                        &lt;subfield code="e"
&gt;E01331.0000&lt;/subfield&gt;
                        &lt;subfield code="f"
&gt;N05240.0000&lt;/subfield&gt;
                        &lt;subfield code="g"
&gt;N05224.0000&lt;/subfield&gt;
                    &lt;/datafield&gt;
                    &lt;datafield tag="034" ind1="1" ind2=" "&gt;
                        &lt;subfield code="a"
&gt;a&lt;/subfield&gt;
                        &lt;subfield code="d"
&gt;W00430.0000&lt;/subfield&gt;
                        &lt;subfield code="e"
&gt;W00430.0000&lt;/subfield&gt;
                        &lt;subfield code="f"
&gt;N05415.0000&lt;/subfield&gt;
                        &lt;subfield code="g"
&gt;N05415.0000&lt;/subfield&gt;
                    &lt;/datafield&gt;
                &lt;/record&gt;



</pre></div><div class="refsection" id="idm11040"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromMARC21" title="ST_GeomFromMARC21">ST_GeomFromMARC21</a></p></div></div><div class="refentry" id="ST_AsMVTGeom"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsMVTGeom — 将几何图形转换为 MVT 瓦片的坐标空间。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_AsMVTGeom</strong>(</code>geometry  <var class="pdparam">geom</var>, box2d  <var class="pdparam">bounds</var>, integer  <var class="pdparam">extent=4096</var>, integer  <var class="pdparam">buffer=256</var>, boolean  <var class="pdparam">clip_geom=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm11068"><h2>描述</h2><p>将几何图形转换为 MVT（<a class="link" href="https://www.mapbox.com/vector-tiles/" target="_top">Mapbox 矢量切片</a>）瓦片的坐标空间，如果需要，将其剪切到图块边界。 几何图形必须位于目标地图的坐标系中（如果需要，请使用 <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>）。 通常这是 <a class="link" href="https://en.wikipedia.org/wiki/Web_Mercator_projection" target="_top">Web 墨卡托</a> (SRID:3857)。 </p><p>该函数尝试保持几何有效性，并在需要时进行纠正。 这可能会导致结果几何体塌陷到较低的维度。 </p><p>必须提供目标地图坐标空间中瓦片的矩形边界，以便可以变换几何图形，并在需要时进行裁剪。 可以使用<a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a>生成边界。 </p><p><a class="xref" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a>函数用于将几何图形转换为 ST_AsMVT 所需的瓦片坐标空间。 </p><p><code class="varname">geom</code> 是目标地图坐标系中要变换的几何图形。</p><p><code class="varname">bounds</code> 是瓦片在地图坐标空间中的矩形边界，没有缓冲区。</p><p><code class="varname">extent</code>是由 <a class="link" href="https://www.mapbox.com/vector-tiles/specification/" target="_top">MVT 规范</a>定义的切片坐标空间中切片的大小。 默认值为 4096。</p><p><code class="varname">buffer</code>是切片坐标空间中用于裁剪几何图形的缓冲区大小。 默认值为 256。</p><p><code class="varname">Clip_geom </code>是一个布尔值，用于控制几何图形是否按原样剪切或编码。 默认为 true。</p><p class="availability">可用性：2.4.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>从 3.0 开始，可以在配置时选择 Wagyu 来剪辑和验证 MVT 多边形。 该库比 GEOS 默认库速度更快，产生的结果更正确，但它可能会丢失小多边形。</p></td></tr></table></div></div><div class="refsection" id="idm11093"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_AsMVTGeom(
        ST_GeomFromText('POLYGON ((0 0, 10 0, 10 5, 0 -5, 0 0))'),
        ST_MakeBox2D(ST_Point(0, 0), ST_Point(4096, 4096)),
        4096, 0, false));
                              st_astext
--------------------------------------------------------------------
 MULTIPOLYGON(((5 4096,10 4091,10 4096,5 4096)),((5 4096,0 4101,0 4096,5 4096)))
                </pre><p>Canonical example for a Web Mercator tile using a computed tile bounds to query and clip geometry. This assumes the data.geom column has srid of 4326. </p><pre class="programlisting">

SELECT ST_AsMVTGeom(
            ST_Transform( geom, 3857 ),
            ST_TileEnvelope(12, 513, 412), extent =
&gt; 4096, buffer =
&gt; 64) AS geom
  FROM data
  WHERE geom &amp;&amp; ST_Transform(ST_TileEnvelope(12, 513, 412, margin =
&gt; (64.0 / 4096)),4326)


</pre></div><div class="refsection" id="idm11098"><h2>相关信息</h2><p><a class="xref" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a>, <a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a>, <a class="xref" href="#PostGIS_Wagyu_Version" title="PostGIS_Wagyu_Version">PostGIS_Wagyu_Version</a> </p></div></div><div class="refentry" id="ST_AsMVT"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsMVT — 返回一组行的 MVT 表示形式的聚合函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsMVT</strong>(</code>anyelement set  <var class="pdparam">row</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsMVT</strong>(</code>anyelement  <var class="pdparam">row</var>, text  <var class="pdparam">name</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsMVT</strong>(</code>anyelement  <var class="pdparam">row</var>, text  <var class="pdparam">name</var>, integer  <var class="pdparam">extent</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsMVT</strong>(</code>anyelement  <var class="pdparam">row</var>, text  <var class="pdparam">name</var>, integer  <var class="pdparam">extent</var>, text  <var class="pdparam">geom_name</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsMVT</strong>(</code>anyelement  <var class="pdparam">row</var>, text  <var class="pdparam">name</var>, integer  <var class="pdparam">extent</var>, text  <var class="pdparam">geom_name</var>, text  <var class="pdparam">feature_id_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm11170"><h2>描述</h2><p>一个聚合函数，返回与图块图层对应的一组行的二进制<a class="link" href="https://www.mapbox.com/vector-tiles/" target="_top"> Mapbox 矢量瓦片</a>表示。 这些行必须包含一个几何列，该几何列将被编码为要素几何。 几何图形必须位于图块坐标空间中，并且根据<a class="link" href="https://www.mapbox.com/vector-tiles/specification/" target="_top"> MVT 规范</a>有效。 <a class="xref" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a> 可用于将几何图形转换为图块坐标空间。 其他行列被编码为特征属性。 </p><p><a class="link" href="https://www.mapbox.com/vector-tiles/" target="_top">Mapbox 矢量切片</a>格式可以存储具有不同属性集的要素。 要使用此功能，请在包含一层深度的 Json 对象的行数据中提供一个 JSONB 列。 JSONB 值中的键和值将被编码为功能属性。 </p><p>可以通过使用<code class="varname"> ||</code> 连接对此函数的多个调用来创建具有多层的切片。 或 使用<code class="varname">STRING_AGG</code>。 </p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不要将 <code class="varname">GEOMETRYCOLLECTION</code> 作为行中的元素进行调用。 但是，您可以使用 <a class="xref" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a> 准备要包含的几何集合。</p></td></tr></table></div><p><code class="varname">row </code>至少包含一个几何列的行数据。</p><p><code class="varname">name</code>是图层名称。 默认值为字符串“default”。</p><p><code class="varname">extent</code>是规范定义的屏幕空间中的切片范围。 如果为 NULL，则默认值为 4096。</p><p><code class="varname">geom_name </code>是行数据中几何列的名称。 默认为第一个几何列。 请注意，PostgreSQL 默认情况下会自动<a class="link" href="https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS" target="_top">将未加引号的标识符折叠为小写</a>，这意味着除非几何列被加引号，例如<code class="varname"> “MyMVTGeom”</code>，此参数必须以小写形式提供。</p><p><code class="varname">feature_id_name</code> 是行数据中功能 ID 列的名称。 如果为 NULL 或负数，则不设置功能 ID。 匹配名称和有效类型（smallint、integer、bigint）的第一列将用作功能 ID，任何后续列将添加为属性。 不支持 JSON 属性。</p><p class="enhanced">增强：3.0 - 添加了对要素 ID 的支持。</p><p class="enhanced">增强：2.5.0 - 添加了对并行查询的支持。</p><p class="availability">可用性：2.4.0</p></div><div class="refsection" id="idm11200"><h2>示例</h2><pre class="programlisting">
WITH mvtgeom AS
(
  SELECT ST_AsMVTGeom(geom, ST_TileEnvelope(12, 513, 412), extent =
&gt; 4096, buffer =
&gt; 64) AS geom, name, description
  FROM points_of_interest
  WHERE geom &amp;&amp; ST_TileEnvelope(12, 513, 412, margin =
&gt; (64.0 / 4096))
)
SELECT ST_AsMVT(mvtgeom.*)
FROM mvtgeom;


        </pre></div><div class="refsection" id="idm11203"><h2>相关信息</h2><p><a class="xref" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a>, <a class="xref" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a> </p></div></div><div class="refentry" id="ST_AsSVG"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsSVG — 返回几何体的 SVG 路径数据。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsSVG</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">rel=0</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_AsSVG</strong>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">rel=0</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p></div></div><div class="refsection" id="idm11238"><h2>描述</h2><p>将几何图形作为标量矢量图形 (SVG) 路径数据返回。 使用 1 作为第二个参数可以根据相对移动实现路径数据，默认值（或 0）使用绝对移动。 第三个参数可用于减少输出中使用的最大十进制位数（默认为 15）。 当 'rel' arg 为 0 时，点几何图形将渲染为 cx/cy，当 'rel' arg 为 1 时，将渲染为 x/y。多点几何图形由逗号 (",") 分隔，GeometryCollection 几何图形由分号 (";") 分隔 。</p><p>要使用 PostGIS SVG 图形，请查看<a class="link" href="https://github.com/dr-jts/pg_svg" target="_top"> pg_svg </a>库，它提供了用于处理 ST_AsSVG 输出的 plpgsql 函数。</p><p class="enhanced">增强：3.4.0 支持所有曲线类型</p><p class="changed">更改： 2.0.0 - 添加了对默认参数和命名参数的支持</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="availability">可用性：1.2.2。 可用性：1.4.0 PostGIS 1.4.0 中更改为在绝对路径中包含 L 命令以符合<a class="link" href="http://www.w3.org/TR/SVG/paths.html#PathDataBNF" target="_top"> http://www.w3.org/TR/SVG/paths.html#PathDataBNF</a></p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm11252"><h2>示例</h2><pre class="programlisting">SELECT ST_AsSVG('POLYGON((0 0,0 1,1 1,1 0,0 0))'::geometry);

st_assvg
--------
M 0 0 L 0 -1 1 -1 1 0 Z</pre><p>圆弧</p><pre class="programlisting">SELECT ST_AsSVG( ST_GeomFromText('CIRCULARSTRING(-2 0,0 2,2 0,0 2,2 4)') );

st_assvg
--------
M -2 0 A 2 2 0 0 1 2 0 A 2 2 0 0 1 2 -4</pre><p>多曲线</p><pre class="programlisting">SELECT ST_AsSVG('MULTICURVE((5 5,3 5,3 3,0 3),
 CIRCULARSTRING(0 0,2 1,2 2))'::geometry, 0, 0);
 st_assvg
------------------------------------------------
 M 5 -5 L 3 -5 3 -3 0 -3 M 0 0 A 2 2 0 0 0 2 -2
 </pre><p>多曲面</p><pre class="programlisting">SELECT ST_AsSVG('MULTISURFACE(
CURVEPOLYGON(CIRCULARSTRING(-2 0,-1 -1,0 0,1 -1,2 0,0 2,-2 0),
    (-1 0,0 0.5,1 0,0 1,-1 0)),
((7 8,10 10,6 14,4 11,7 8)))'::geometry, 0, 2);

st_assvg
---------------------------------------------------------
M -2 0 A 1 1 0 0 0 0 0 A 1 1 0 0 0 2 0 A 2 2 0 0 0 -2 0 Z
M -1 0 L 0 -0.5 1 0 0 -1 -1 0 Z
M 7 -8 L 10 -10 6 -14 4 -11 Z
 </pre></div></div><div class="refentry" id="ST_AsTWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsTWKB — 返回几何形式为 TWKB，又名“微小的已知的二进制”</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsTWKB</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">prec=0</var>, integer  <var class="pdparam">prec_z=0</var>, integer  <var class="pdparam">prec_m=0</var>, boolean  <var class="pdparam">with_sizes=false</var>, boolean  <var class="pdparam">with_boxes=false</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsTWKB</strong>(</code>geometry[]  <var class="pdparam">geom</var>, bigint[]  <var class="pdparam">ids</var>, integer  <var class="pdparam">prec=0</var>, integer  <var class="pdparam">prec_z=0</var>, integer  <var class="pdparam">prec_m=0</var>, boolean  <var class="pdparam">with_sizes=false</var>, boolean  <var class="pdparam">with_boxes=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm11312"><h2>描述</h2><p>返回 TWKB（微小已知的二进制）格式的几何图形。 TWKB 是一种<a class="link" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">压缩的二进制格式</a>，注重最小化输出的大小。 </p><p>小数位参数控制输出中存储的精度。 默认情况下，值在编码前四舍五入到最接近的单位。 如果要传输更高的精度，请增加数字。 例如，值 1 表示将保留小数点右侧的第一位数字。</p><p>大小和边界框参数控制输出中是否包含有关对象的编码长度和对象边界的可选信息。 默认情况下，它们不是。 除非您的客户端软件需要使用它们，否则不要打开它们，因为它们只会占用空间（节省空间是 TWKB 的目的）。</p><p>该函数的数组输入形式用于将几何图形和唯一标识符的集合转换为保留标识符的 TWKB 集合。 这对于希望解压集合然后访问有关内部对象的更多信息的客户端非常有用。 您可以使用 <a class="link" href="https://www.postgresql.org/docs/current/functions-aggregate.html" target="_top">array_agg </a>函数创建数组。 其他参数的操作与函数的简单形式相同。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式规范可在 <a class="link" href="https://github.com/TWKB/Specification" target="_top">https://github.com/TWKB/Specification </a>在线获取，构建 JavaScript 客户端的代码可在<a class="link" href="https://github.com/TWKB/twkb.js" target="_top"> https://github.com/TWKB/twkb.js</a> 找到。</p></td></tr></table></div><p class="enhanced">增强：2.4.0 内存和速度改进。</p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm11326"><h2>示例</h2><pre class="programlisting">SELECT ST_AsTWKB('LINESTRING(1 1,5 5)'::geometry);
                 st_astwkb
--------------------------------------------
\x02000202020808

</pre><p>要创建包含标识符的聚合 TWKB 对象，请首先使用“array_agg()”聚合所需的几何图形和对象，然后调用适当的 TWKB 函数。 </p><pre class="programlisting">SELECT ST_AsTWKB(array_agg(geom), array_agg(gid)) FROM mytable;
                 st_astwkb
--------------------------------------------
\x040402020400000202
</pre></div><div class="refsection" id="idm11331"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromTWKB" title="ST_GeomFromTWKB">ST_GeomFromTWKB</a>, <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_AsX3D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsX3D — 返回 X3D xml 节点元素格式的几何图形：ISO-IEC-19776-1.2-X3DEncodings-XML</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_AsX3D</strong>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p></div></div><div class="refsection" id="idm11357"><h2>描述</h2><p>以 X3D xml 格式的节点元素形式返回几何图形 <a class="link" href="http://www.web3d.org/standards/number/19776-1" target="_top">http://www.web3d.org/standards/number/19776-1</a>。 如果未指定 <code class="varname">maxdecimaldigits</code>（精度），则默认为 15。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有多种选项可用于将 PostGIS 几何图形转换为 X3D，因为 X3D 几何类型不会直接映射到 PostGIS 几何类型，而一些较新的 X3D 类型可能是我们避免的更好的映射，因为大多数渲染工具当前不支持它们。 这些是我们已经确定的映射。 如果您对我们允许人们表示他们首选映射的想法或方式有任何想法，请随时发布错误通知单。</p><p>以下是我们目前如何将 PostGIS 2D/3D 类型映射到 X3D 类型</p></td></tr></table></div><p>“选项”参数是一个位字段。 对于 PostGIS 2.2 ，这用于表示是否用 X3D GeoCooperatives 地理空间节点表示坐标以及是否翻转 x/y 轴。 默认情况下，<code class="code">ST_AsX3D</code> 以数据库形式输出（long、lat 或 X、Y），但 X3D 默认为 lat/lon、y/x 可能是首选。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0：数据库顺序中的 X/Y（例如，经/纬度 = X,Y 是标准数据库顺序）、默认值和非空间坐标（只是常规的旧坐标标签）。</p></li><li class="listitem"><p>1：翻转X和Y。如果与地理坐标选项开关结合使用，则输出将默认为“latitude_first”，并且坐标也会翻转。</p></li><li class="listitem"><p>2：GeoSpatial GeoCoordinates 中的输出坐标。 如果几何图形不在 WGS 84 长纬度 (srid: 4326) 中，此选项将引发错误。 这是目前唯一支持的地理坐标类型。 <a class="link" href="http://www.web3d.org/documents/specifications/19775-1/V3.2/Part01/components/geodata.html#Specifyingaspatialreference" target="_top">请参阅指定空间参考系统的 X3D 规范</a>。默认输出将为<code class="code"> GeoCoordinate geoSystem='"GD" "WE" "longitude_first"'</code>。 如果您更喜欢 <code class="code">GeoCoordinate geoSystem='"GD" "WE" "latitude_first"'</code> 的 X3D 默认值，请使用<code class="code"> (2+1)</code> = <code class="code">3</code> </p></li></ul></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">PostGIS类型</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">2D X3D类型</th><th style="border-bottom: 1px solid ; ">3D X3D类型</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">LINESTRING</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">尚未实现 - 将是 PolyLine2D</td><td style="border-bottom: 1px solid ; ">LineSet</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">MULTILINESTRING</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">尚未实现 - 将是 PolyLine2D</td><td style="border-bottom: 1px solid ; ">IndexedLineSet</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">MULTIPOINT</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Polypoint2D</td><td style="border-bottom: 1px solid ; ">PointSet</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">POINT</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">输出以空格分隔的坐标</td><td style="border-bottom: 1px solid ; ">输出以空格分隔的坐标</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">(MULTI) POLYGON, POLYHEDRALSURFACE</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">X3D 标记无效</td><td style="border-bottom: 1px solid ; ">IndexedFaceSet（内环当前输出为另一个面集）</td></tr><tr><td style="border-right: 1px solid ; ">TIN</td><td style="border-right: 1px solid ; ">TriangleSet2D（尚未实现）</td><td>IndexedTriangleSet（索引三角形集）</td></tr></tbody></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>2D 几何支持尚未完成。 内环当前仅绘制为单独的多边形。 我们正在研究这些。</p></td></tr></table></div><p>3D 空间中发生了许多进步，特别是<a class="link" href="https://www.web3d.org/wiki/index.php/X3D_and_HTML5" target="_top"> X3D 与 HTML5 的集成</a></p><p>还有一个很好的开源 X3D 查看器，您可以使用它来查看渲染的几何图形。 Free Wrl<a class="link" href="http://freewrl.sourceforge.net/" target="_top"> http://freewrl.sourceforge.net/ </a>二进制文件适用于 Mac、Linux 和 Windows。 使用打包的 FreeWRL_Launcher 来查看几何图形。</p><p>另请查看利用此功能的<a class="link" href="https://git.osgeo.org/gitea/robe/postgis_x3d_viewer" target="_top"> PostGIS 简约 X3D 查看器</a>和<a class="link" href="http://www.x3dom.org/" target="_top"> x3dDom html/js 开源工具包</a>。</p><p class="availability">可用性： 2.0.0： ISO-IEC-19776-1.2-X3DEncodings-XML</p><p class="enhanced">增强：2.2.0：添加了对反转地理坐标和轴（x/y、经度/纬度）的支持。 有关详细信息，请参阅选项。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm11434"><h2>示例：创建一个功能齐全的 X3D 文档 - 您正在生成一个可以在 FreeWrl 或其他 X3D 查看器中查看的多维数据集。</h2><pre class="programlisting">
SELECT '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd"&gt;
&lt;X3D&gt;
  &lt;Scene&gt;
    &lt;Transform&gt;
      &lt;Shape&gt;
       &lt;Appearance&gt;
            &lt;Material emissiveColor=''0 0 1''/&gt;
       &lt;/Appearance
&gt; ' ||
       ST_AsX3D( ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )')) ||
      '&lt;/Shape&gt;
    &lt;/Transform&gt;
  &lt;/Scene&gt;
&lt;/X3D
&gt;' As x3ddoc;

                x3ddoc
                --------
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd"&gt;
&lt;X3D&gt;
  &lt;Scene&gt;
    &lt;Transform&gt;
      &lt;Shape&gt;
       &lt;Appearance&gt;
            &lt;Material emissiveColor='0 0 1'/&gt;
       &lt;/Appearance&gt;
       &lt;IndexedFaceSet  coordIndex='0 1 2 3 -1 4 5 6 7 -1 8 9 10 11 -1 12 13 14 15 -1 16 17 18 19 -1 20 21 22 23'&gt;
            &lt;Coordinate point='0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 0 1 0 1 0 0 1 1 1 0 1 1 1 1 0 1 1 0 0 0 1 0 0 1 1 1 1 1 1 1 0 0 0 1 1 0 1 1 1 1 0 1 1' /&gt;
      &lt;/IndexedFaceSet&gt;
      &lt;/Shape&gt;
    &lt;/Transform&gt;
  &lt;/Scene&gt;
&lt;/X3D&gt;
</pre></div><div class="refsection" id="idm11437"><h2>PostGIS 建筑</h2><p>将此查询的输出复制并粘贴到<a class="link" href="http://postgis.net/docs/support/viewers/x3d_viewer.htm" target="_top"> x3d 场景查看器</a>，然后单击“显示” </p><pre class="programlisting">
SELECT string_agg('&lt;Shape
&gt;' || ST_AsX3D(ST_Extrude(geom, 0,0, i*0.5)) ||
    '&lt;Appearance&gt;
          &lt;Material diffuseColor="' || (0.01*i)::text || ' 0.8 0.2" specularColor="' || (0.05*i)::text || ' 0 0.5"/&gt;
        &lt;/Appearance&gt;
    &lt;/Shape
&gt;', '')
FROM ST_Subdivide(ST_Letters('PostGIS'),20) WITH ORDINALITY AS f(geom,i);
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_asx3d01.png"/><div class="caption"><p>PostGIS细分、挤压形成的建筑物</p></div></div></div></div><div class="refsection" id="idm11448"><h2>示例：高度为 3 个单位、精度为 6 位的八角棱镜</h2><pre class="programlisting">
SELECT ST_AsX3D(
ST_Translate(
    ST_Force_3d(
        ST_Buffer(ST_Point(10,10),5, 'quad_segs=2')), 0,0,
    3)
  ,6) As x3dfrag;

x3dfrag
--------
&lt;IndexedFaceSet coordIndex="0 1 2 3 4 5 6 7"&gt;
    &lt;Coordinate point="15 10 3 13.535534 6.464466 3 10 5 3 6.464466 6.464466 3 5 10 3 6.464466 13.535534 3 10 15 3 13.535534 13.535534 3 " /&gt;
&lt;/IndexedFaceSet&gt;
</pre></div><div class="refsection" id="idm11451"><h2>示例：TIN</h2><pre class="programlisting">
SELECT ST_AsX3D(ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')) As x3dfrag;

                x3dfrag
                --------
&lt;IndexedTriangleSet  index='0 1 2 3 4 5'
&gt;&lt;Coordinate point='0 0 0 0 0 1 0 1 0 0 0 0 0 1 0 1 1 0'/&gt;&lt;/IndexedTriangleSet&gt;
</pre></div><div class="refsection" id="idm11454"><h2>示例：闭合多线串（带孔的多边形的边界）</h2><pre class="programlisting">
SELECT ST_AsX3D(
                    ST_GeomFromEWKT('MULTILINESTRING((20 0 10,16 -12 10,0 -16 10,-12 -12 10,-20 0 10,-12 16 10,0 24 10,16 16 10,20 0 10),
  (12 0 10,8 8 10,0 12 10,-8 8 10,-8 0 10,-8 -4 10,0 -8 10,8 -4 10,12 0 10))')
) As x3dfrag;

                x3dfrag
                --------
&lt;IndexedLineSet  coordIndex='0 1 2 3 4 5 6 7 0 -1 8 9 10 11 12 13 14 15 8'&gt;
    &lt;Coordinate point='20 0 10 16 -12 10 0 -16 10 -12 -12 10 -20 0 10 -12 16 10 0 24 10 16 16 10 12 0 10 8 8 10 0 12 10 -8 8 10 -8 0 10 -8 -4 10 0 -8 10 8 -4 10 ' /&gt;
 &lt;/IndexedLineSet&gt;
</pre></div></div><div class="refentry" id="ST_GeoHash"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeoHash — 返回几何图形的 GeoHash 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_GeoHash</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxchars=full_precision_of_point</var><code>)</code>;</p></div></div><div class="refsection" id="idm11472"><h2>描述</h2><p>计算几何图形的 <a class="link" href="http://en.wikipedia.org/wiki/Geohash" target="_top">GeoHash</a> 表示。 GeoHash 将地理点编码为可基于前缀排序和搜索的文本形式。 较短的 GeoHash 是点的不太精确的表示。 它可以被认为是一个包含点的盒子。 </p><p>具有非零范围的非点几何值也可以映射到 GeoHash 代码。 代码的精度取决于几何的地理范围。 </p><p>如果未指定 <code class="varname">maxchars</code>，则返回的 GeoHash 代码适用于包含输入几何图形的最小单元格。 Points 返回精度为 20 个字符的 GeoHash（大约足以容纳输入的完整双精度）。 其他几何类型可能会返回精度较低的 GeoHash，具体取决于几何形状的范围。 较大的几何图形的精度较低，较小的几何图形的精度较高。 由 GeoHash 代码确定的框始终包含输入特征。</p><p>如果指定了<code class="varname">maxchars</code>参数，则返回的GeoHash代码最多包含指定数量的字符。它映射到输入几何体的（可能）较低精度表示。对于非点几何体，计算的起始点是几何体边界框的中心点。</p><p class="availability">可用性：1.4.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_GeoHash 要求输入几何图形采用地理（经度/纬度）坐标。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm11488"><h2>示例</h2><pre class="programlisting">SELECT ST_GeoHash( ST_Point(-126,48) );

         st_geohash
----------------------
 c0w3hf1s70w3hf1s70w3

SELECT ST_GeoHash( ST_Point(-126,48), 5);

 st_geohash
------------
 c0w3h

-- This line contains the point, so the GeoHash is a prefix of the point code
SELECT ST_GeoHash('LINESTRING(-126 48, -126.1 48.1)'::geometry);

 st_geohash
------------
 c0w3

                </pre></div><div class="refsection" id="idm11491"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a>, <a class="xref" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a>, <a class="xref" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a></p></div></div></section></section><section class="section" id="Operators"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.10. 运算符</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#operators-bbox">7.10.1. 边界框运算符</a></span></li><li><span class="section"><a href="#operators-distance">7.10.2. 距离运算符</a></span></li></ul></div><section class="section" id="operators-bbox"><div class="titlepage"><div><div><h3 class="title">7.10.1. 边界框运算符</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#geometry_overlaps">&amp;&amp;</a></span><span class="refpurpose"> — 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#overlaps_geometry_box2df">&amp;&amp;(geometry,box2df)</a></span><span class="refpurpose"> — 如果几何体的（缓存的）2D 边界框与 2D 浮点精度边界框 (BOX2DF) 相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#overlaps_box2df_geometry">&amp;&amp;(box2df,geometry)</a></span><span class="refpurpose"> — 如果 2D 浮点精度边界框 (BOX2DF) 与几何体的（缓存的）2D 边界框相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#overlaps_box2df_box2df">&amp;&amp;(box2df,box2df)</a></span><span class="refpurpose"> — 如果两个 2D 浮点精度边界框 (BOX2DF) 彼此相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#geometry_overlaps_nd">&amp;&amp;&amp;</a></span><span class="refpurpose"> — 如果 A 的 n 维边界框与 B 的 n 维边界框相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#overlaps_nd_geometry_gidx">&amp;&amp;&amp;(geometry,gidx)</a></span><span class="refpurpose"> — 如果几何体的（缓存的）n 维边界框与 n 维浮点精度边界框 (GIDX) 相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#overlaps_nd_gidx_geometry">&amp;&amp;&amp;(gidx,geometry)</a></span><span class="refpurpose"> — 如果 n 维浮点精度边界框 (GIDX) 与几何体的（缓存的）n 维边界框相交，则返回<code class="varname"> TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#overlaps_nd_gidx_gidx">&amp;&amp;&amp;(gidx,gidx)</a></span><span class="refpurpose"> — 如果两个 n 维浮点精度边界框 (GIDX) 彼此相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Overleft">&amp;&lt;</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框重叠或位于其左侧，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Overbelow">&amp;&lt;|</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框重叠或低于 B 的边界框，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Overright">&amp;&gt;</a></span><span class="refpurpose"> — 如果 A的边界框与 B 的边界框重叠或位于 B 右侧，则返回<code class="varname"> TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Left">&lt;&lt;</a></span><span class="refpurpose"> — 如果 A 的边界框严格位于 B 的左侧，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Below">&lt;&lt;|</a></span><span class="refpurpose"> — 如果 A 的边界框严格低于 B 的边界框，则返回<code class="varname"> TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_EQ">=</a></span><span class="refpurpose"> — 如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，则返回<code class="varname"> TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Right">&gt;&gt;</a></span><span class="refpurpose"> — 如果 A 的边界框严格位于 B 的右侧，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Contained">@</a></span><span class="refpurpose"> — 如果 A 的边界框包含在 B 的边界框中，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#is_contained_geometry_box2df">@(geometry,box2df)</a></span><span class="refpurpose"> — 如果几何体的 2D 边界框包含在 2D 浮点精度边界框 (BOX2DF) 中，则返回<code class="varname"> TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#is_contained_box2df_geometry">@(box2df,geometry)</a></span><span class="refpurpose"> — 如果 2D 浮点精度边界框 (BOX2DF) 包含在几何体的 2D 边界框中，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#is_contained_box2df_box2df">@(box2df,box2df)</a></span><span class="refpurpose"> — 如果 2D 浮点精度边界框 (BOX2DF) 包含在另一个 2D 浮点精度边界框内，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Overabove">|&amp;&gt;</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框重叠或位于其上方，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Above">|&gt;&gt;</a></span><span class="refpurpose"> — 如果 A 的边界框严格位于 B 的边界框上方，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Contain">~</a></span><span class="refpurpose"> — 如果 A 的边界框包含 B 的边界框，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#contains_geometry_box2df">~(geometry,box2df)</a></span><span class="refpurpose"> — 如果几何体的 2D 粘合框包含 2D 浮点精度边界框 (GIDX)，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#contains_box2df_geometry">~(box2df,geometry)</a></span><span class="refpurpose"> — 如果 2D 浮点精度边界框 (BOX2DF) 包含几何体的 2D 边界框，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#contains_box2df_box2df">~(box2df,box2df)</a></span><span class="refpurpose"> — 如果 2D 浮点精度边界框 (BOX2DF) 包含另一个 2D 浮点精度边界框 (BOX2DF)，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#ST_Geometry_Same">~=</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框相同，则返回 <code class="varname">TRUE</code>。</span></li></ul></div><div class="refentry" id="geometry_overlaps"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp; — 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> geography  <var class="pdparam">A</var> ,  geography  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11526"><h2>描述</h2><p>如果 A 的二维边界框与 B 的二维边界框交互，<code class="varname">&amp;&amp;</code>返回<code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div><p class="enhanced">增强： 2.0.0 引入了对多面体曲面的支持。</p><p class="availability">可用性： 1.5.0 引入了对地理的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm11543"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&amp; tbl2.column2 AS overlaps
FROM ( VALUES
        (1, 'LINESTRING(0 0, 3 3)'::geometry),
        (2, 'LINESTRING(0 1, 0 5)'::geometry)) AS tbl1,
( VALUES
        (3, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl2;

 column1 | column1 | overlaps
---------+---------+----------
           1 |       3 | t
           2 |       3 | f
(2 rows)
</pre></div><div class="refsection" id="idm11546"><h2>相关信息</h2><p><a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a>, <a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>, <a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a>, <a class="xref" href="#ST_Geometry_Contain" title="~">~</a>, <a class="xref" href="#ST_Geometry_Contained" title="@">@</a> </p></div></div><div class="refentry" id="overlaps_geometry_box2df"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;(geometry,box2df) — 如果几何体的（缓存的）2D 边界框与 2D 浮点精度边界框 (BOX2DF) 相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> geometry  <var class="pdparam">A</var> ,  box2df <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11573"><h2>描述</h2><p>如果几何体 A 的缓存 2D 边界框与 2D 边界框 B 相交（使用浮点精度），则<code class="varname">&amp;&amp;</code>运算符返回<code class="varname"> TRUE</code>。 这意味着如果 B 是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm11589"><h2>示例</h2><pre class="programlisting">
SELECT ST_Point(1,1) &amp;&amp; ST_MakeBox2D(ST_Point(0,0), ST_Point(2,2)) AS overlaps;

 overlaps
----------
 t
(1 row)
</pre></div><div class="refsection" id="idm11592"><h2>相关信息</h2><p><a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="overlaps_box2df_geometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;(box2df,geometry) — 如果 2D 浮点精度边界框 (BOX2DF) 与几何体的（缓存的）2D 边界框相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> box2df  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11619"><h2>描述</h2><p>该<code class="varname">&amp;&amp;</code>运算符在使用浮点精度时，如果2D边界框A与几何体B的缓存2D边界框相交，则返回<code class="varname">TRUE</code>。这意味着如果A是一个（双精度）box2d，它将在内部被转换为一个浮点精度的2D边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm11635"><h2>示例</h2><pre class="programlisting">
SELECT ST_MakeBox2D(ST_Point(0,0), ST_Point(2,2)) &amp;&amp; ST_Point(1,1) AS overlaps;

 overlaps
----------
 t
(1 row)
</pre></div><div class="refsection" id="idm11638"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="overlaps_box2df_box2df"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;(box2df,box2df) — 如果两个 2D 浮点精度边界框 (BOX2DF) 彼此相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> box2df  <var class="pdparam">A</var> ,  box2df  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11665"><h2>描述</h2><p><code class="varname">&amp;&amp;</code>运算符在使用浮点精度时，如果两个 2D 边界框 A 和 B 相交，则返回<code class="varname"> TRUE</code>。这意味着如果 A（或 B）是一个（双精度）box2d，它将在内部被转换为一个浮点精度的 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该运算符旨在供 BRIN 索引内部使用，而不是供用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm11681"><h2>示例</h2><pre class="programlisting">
SELECT ST_MakeBox2D(ST_Point(0,0), ST_Point(2,2)) &amp;&amp; ST_MakeBox2D(ST_Point(1,1), ST_Point(3,3)) AS overlaps;

 overlaps
----------
 t
(1 row)
</pre></div><div class="refsection" id="idm11684"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="geometry_overlaps_nd"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp; — 如果 A 的 n 维边界框与 B 的 n 维边界框相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;&amp;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11711"><h2>描述</h2><p><code class="varname">&amp;&amp;&amp;</code>运算符返回<code class="varname">TRUE</code>，如果 A 的 n 维边界框与 B 的 n 维边界框相交。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm11735"><h2>示例：3D线串</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&amp;&amp; tbl2.column2 AS overlaps_3d,
                                    tbl1.column2 &amp;&amp; tbl2.column2 AS overlaps_2d
FROM ( VALUES
        (1, 'LINESTRING Z(0 0 1, 3 3 2)'::geometry),
        (2, 'LINESTRING Z(1 2 0, 0 5 -1)'::geometry)) AS tbl1,
( VALUES
        (3, 'LINESTRING Z(1 2 1, 4 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overlaps_3d | overlaps_2d
---------+---------+-------------+-------------
       1 |       3 | t           | t
       2 |       3 | f           | t

</pre></div><div class="refsection" id="idm11738"><h2>示例：XYM线串</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&amp;&amp; tbl2.column2 AS overlaps_3zm,
                                    tbl1.column2 &amp;&amp; tbl2.column2 AS overlaps_2d
FROM ( VALUES
        (1, 'LINESTRING M(0 0 1, 3 3 2)'::geometry),
        (2, 'LINESTRING M(1 2 0, 0 5 -1)'::geometry)) AS tbl1,
( VALUES
        (3, 'LINESTRING M(1 2 1, 4 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overlaps_3zm | overlaps_2d
---------+---------+-------------+-------------
       1 |       3 | t           | t
       2 |       3 | f           | t

</pre></div><div class="refsection" id="idm11741"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a></p></div></div><div class="refentry" id="overlaps_nd_geometry_gidx"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp;(geometry,gidx) — 如果几何体的（缓存的）n 维边界框与 n 维浮点精度边界框 (GIDX) 相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;&amp;</strong>(</code> geometry  <var class="pdparam">A</var> ,  gidx  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11761"><h2>描述</h2><p><code class="varname">&amp;&amp;&amp;</code>运算符在使用浮点精度时，如果几何体 A 的缓存 n-D 边界框与 n-D 边界框 B 相交，则返回 <code class="varname">TRUE</code>。这意味着如果 B 是一个（双精度）box3d，它将在内部被转换为一个浮点精度的 3D 边界框（GIDX）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该运算符旨在供 BRIN 索引内部使用，而不是供用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm11785"><h2>示例</h2><pre class="programlisting">
SELECT ST_MakePoint(1,1,1) &amp;&amp;&amp; ST_3DMakeBox(ST_MakePoint(0,0,0), ST_MakePoint(2,2,2)) AS overlaps;

 overlaps
----------
 t
(1 row)
</pre></div><div class="refsection" id="idm11788"><h2>相关信息</h2><p><a class="xref" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a>, <a class="xref" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a></p></div></div><div class="refentry" id="overlaps_nd_gidx_geometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp;(gidx,geometry) — 如果 n 维浮点精度边界框 (GIDX) 与几何体的（缓存的）n 维边界框相交，则返回<code class="varname"> TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;&amp;</strong>(</code> gidx  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11809"><h2>描述</h2><p><code class="varname">&amp;&amp;&amp;</code> 运算符在使用浮点精度时，如果 n-D 边界框 A 与几何体 B 的缓存 n-D 边界框相交，则返回<code class="varname"> TRUE</code>。这意味着如果 A 是一个（双精度）box3d，它将在内部被转换为一个浮点精度的 3D 边界框（GIDX）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该运算符旨在供 BRIN 索引内部使用，而不是供用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm11833"><h2>示例</h2><pre class="programlisting">
SELECT ST_3DMakeBox(ST_MakePoint(0,0,0), ST_MakePoint(2,2,2)) &amp;&amp;&amp; ST_MakePoint(1,1,1) AS overlaps;

 overlaps
----------
 t
(1 row)
</pre></div><div class="refsection" id="idm11836"><h2>相关信息</h2><p><a class="xref" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a>, <a class="xref" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a></p></div></div><div class="refentry" id="overlaps_nd_gidx_gidx"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp;(gidx,gidx) — 如果两个 n 维浮点精度边界框 (GIDX) 彼此相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;&amp;</strong>(</code> gidx  <var class="pdparam">A</var> ,  gidx  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11857"><h2>描述</h2><p><code class="varname">&amp;&amp;&amp;</code>运算符在使用浮点精度时，如果两个 n-D 边界框 A 和 B 相交，则返回<code class="varname"> TRUE</code>。这意味着如果 A（或 B）是一个（双精度）box3d，它将在内部被转换为一个浮点精度的 3D 边界框（GIDX）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该运算符旨在供 BRIN 索引内部使用，而不是供用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm11881"><h2>示例</h2><pre class="programlisting">
SELECT ST_3DMakeBox(ST_MakePoint(0,0,0), ST_MakePoint(2,2,2)) &amp;&amp;&amp; ST_3DMakeBox(ST_MakePoint(1,1,1), ST_MakePoint(3,3,3)) AS overlaps;

 overlaps
----------
 t
(1 row)
</pre></div><div class="refsection" id="idm11884"><h2>相关信息</h2><p><a class="xref" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a>, <a class="xref" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a></p></div></div><div class="refentry" id="ST_Geometry_Overleft"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&lt; — 如果 A 的边界框与 B 的边界框重叠或位于其左侧，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&lt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11905"><h2>描述</h2><p><code class="varname">&amp;&lt;</code>运算符返回 <code class="varname">TRUE</code>如果几何体 A 的边界框与几何体 B 的边界框重叠或在几何体B的边界框的左侧，或者更准确地说，不位于几何体 B 的边界框的右侧。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm11912"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&lt; tbl2.column2 AS overleft
FROM
  ( VALUES
        (1, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING(0 0, 3 3)'::geometry),
        (3, 'LINESTRING(0 1, 0 5)'::geometry),
        (4, 'LINESTRING(6 0, 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overleft
---------+---------+----------
           1 |       2 | f
           1 |       3 | f
           1 |       4 | t
(3 rows)
</pre></div><div class="refsection" id="idm11915"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>, <a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a></p></div></div><div class="refentry" id="ST_Geometry_Overbelow"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&lt;| — 如果 A 的边界框与 B 的边界框重叠或低于 B 的边界框，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&lt;|</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11938"><h2>描述</h2><p><code class="varname">&amp;&lt;|</code>运算符返回<code class="varname">TRUE</code>，如果几何体 A 的边界框与几何体 B 的边界框重叠或低于几何体B的边界框，或者更准确地说，不位于几何体 B 的边界框的上方。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm11953"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&lt;| tbl2.column2 AS overbelow
FROM
  ( VALUES
        (1, 'LINESTRING(6 0, 6 4)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING(0 0, 3 3)'::geometry),
        (3, 'LINESTRING(0 1, 0 5)'::geometry),
        (4, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl2;

 column1 | column1 | overbelow
---------+---------+-----------
           1 |       2 | f
           1 |       3 | t
           1 |       4 | t
(3 rows)
</pre></div><div class="refsection" id="idm11956"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>, <a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a></p></div></div><div class="refentry" id="ST_Geometry_Overright"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&gt; — 如果 A的边界框与 B 的边界框重叠或位于 B 右侧，则返回<code class="varname"> TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm11979"><h2>描述</h2><p>运算符<code class="varname">&amp;&gt;</code>返回<code class="varname">TRUE</code>，如果几何体A的边界框与几何体B的边界框重叠或位于其右侧，更准确地说，它与几何体B的边界框不重叠于其左侧。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm11986"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;
&gt; tbl2.column2 AS overright
FROM
  ( VALUES
        (1, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING(0 0, 3 3)'::geometry),
        (3, 'LINESTRING(0 1, 0 5)'::geometry),
        (4, 'LINESTRING(6 0, 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overright
---------+---------+-----------
           1 |       2 | t
           1 |       3 | t
           1 |       4 | f
(3 rows)
</pre></div><div class="refsection" id="idm11989"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>, <a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>, <a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a></p></div></div><div class="refentry" id="ST_Geometry_Left"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&lt;&lt; — 如果 A 的边界框严格位于 B 的左侧，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&lt;&lt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12012"><h2>描述</h2><p>如果 A 的边界框严格位于 B 的边界框的左侧，则<code class="varname">&lt;&lt;</code>运算符返回<code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12019"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &lt;&lt; tbl2.column2 AS left
FROM
  ( VALUES
        (1, 'LINESTRING (1 2, 1 5)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING (0 0, 4 3)'::geometry),
        (3, 'LINESTRING (6 0, 6 5)'::geometry),
        (4, 'LINESTRING (2 2, 5 6)'::geometry)) AS tbl2;

 column1 | column1 | left
---------+---------+------
           1 |       2 | f
           1 |       3 | t
           1 |       4 | t
(3 rows)
</pre></div><div class="refsection" id="idm12022"><h2>相关信息</h2><p><a class="xref" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a></p></div></div><div class="refentry" id="ST_Geometry_Below"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&lt;&lt;| — 如果 A 的边界框严格低于 B 的边界框，则返回<code class="varname"> TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&lt;&lt;|</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12044"><h2>描述</h2><p>如果 A 的边界框严格低于 B 的边界框，则运算符<code class="varname">&lt;&lt;|</code>返回<code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12051"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 &lt;&lt;| tbl2.column2 AS below
FROM
  ( VALUES
        (1, 'LINESTRING (0 0, 4 3)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING (1 4, 1 7)'::geometry),
        (3, 'LINESTRING (6 1, 6 5)'::geometry),
        (4, 'LINESTRING (2 3, 5 6)'::geometry)) AS tbl2;

 column1 | column1 | below
---------+---------+-------
           1 |       2 | t
           1 |       3 | f
           1 |       4 | f
(3 rows)
</pre></div><div class="refsection" id="idm12054"><h2>相关信息</h2><p><a class="xref" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>, <a class="xref" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a></p></div></div><div class="refentry" id="ST_Geometry_EQ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>= — 如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，则返回<code class="varname"> TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">=</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">=</strong>(</code> geography  <var class="pdparam">A</var> ,  geography  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12085"><h2>描述</h2><p>如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，<code class="varname">=</code>运算符返回 <code class="varname">TRUE</code>。 PostgreSQL 使用为几何定义的 =、&lt; 和 &gt; 运算符来执行内部排序和比较 几何图形（即在 GROUP BY 或 ORDER BY 子句中）。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>只有在所有方面都完全相同、具有相同坐标、相同顺序的几何/地理才被该运算符视为相等。 对于“空间平等”，它忽略坐标顺序等内容，并且可以检测以不同表示覆盖相同空间区域的要素，请使用<a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a> 或 <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a></p></td></tr></table></div><div class="caution"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Caution]" src="images/caution.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此运算符不对几何图形使用任何有效索引。 要使用索引执行稳健的相等性测试，请使用= —和 &amp;&amp;。</p></td></tr></table></div><p class="changed">更改：2.4.0，在之前的版本中，这是边界框相等而不是几何相等。 如果需要边界框相等，请使用<a class="xref" href="#ST_Geometry_Same" title="~=">~=</a>代替。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12106"><h2>示例</h2><pre class="programlisting">
SELECT 'LINESTRING(0 0, 0 1, 1 0)'::geometry = 'LINESTRING(1 1, 0 0)'::geometry;
 ?column?
----------
 f
(1 row)

SELECT ST_AsText(column1)
FROM ( VALUES
        ('LINESTRING(0 0, 1 1)'::geometry),
        ('LINESTRING(1 1, 0 0)'::geometry)) AS foo;
          st_astext
---------------------
 LINESTRING(0 0,1 1)
 LINESTRING(1 1,0 0)
(2 rows)

-- Note: the GROUP BY uses the "=" to compare for geometry equivalency.
SELECT ST_AsText(column1)
FROM ( VALUES
        ('LINESTRING(0 0, 1 1)'::geometry),
        ('LINESTRING(1 1, 0 0)'::geometry)) AS foo
GROUP BY column1;
      st_astext
---------------------
 LINESTRING(0 0,1 1)
 LINESTRING(1 1,0 0)
(2 rows)

-- In versions prior to 2.0, this used to return true --
 SELECT ST_GeomFromText('POINT(1707296.37 4820536.77)') =
        ST_GeomFromText('POINT(1707296.27 4820536.87)') As pt_intersect;

--pt_intersect --
f

</pre></div><div class="refsection" id="idm12109"><h2>相关信息</h2><p><a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>, <a class="xref" href="#ST_Geometry_Same" title="~=">~=</a> </p></div></div><div class="refentry" id="ST_Geometry_Right"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&gt;&gt; — 如果 A 的边界框严格位于 B 的右侧，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&gt;&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12131"><h2>描述</h2><p>如果几何体 A 的边界框严格位于几何体 B 的边界框右侧，则 <code class="varname">&gt;&gt;</code> 运算符返回 <code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12138"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 
&gt;
&gt; tbl2.column2 AS right
FROM
  ( VALUES
        (1, 'LINESTRING (2 3, 5 6)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING (1 4, 1 7)'::geometry),
        (3, 'LINESTRING (6 1, 6 5)'::geometry),
        (4, 'LINESTRING (0 0, 4 3)'::geometry)) AS tbl2;

 column1 | column1 | right
---------+---------+-------
           1 |       2 | t
           1 |       3 | f
           1 |       4 | f
(3 rows)
</pre></div><div class="refsection" id="idm12141"><h2>相关信息</h2><p><a class="xref" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>, <a class="xref" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a></p></div></div><div class="refentry" id="ST_Geometry_Contained"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>@ — 如果 A 的边界框包含在 B 的边界框中，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12163"><h2>描述</h2><p>如果几何体 A 的边界框完全包含在几何体 B 的边界框内，则 <code class="varname">@ </code>运算符返回<code class="varname"> TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12170"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 @ tbl2.column2 AS contained
FROM
  ( VALUES
        (1, 'LINESTRING (1 1, 3 3)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING (0 0, 4 4)'::geometry),
        (3, 'LINESTRING (2 2, 4 4)'::geometry),
        (4, 'LINESTRING (1 1, 3 3)'::geometry)) AS tbl2;

 column1 | column1 | contained
---------+---------+-----------
           1 |       2 | t
           1 |       3 | f
           1 |       4 | t
(3 rows)
</pre></div><div class="refsection" id="idm12173"><h2>相关信息</h2><p><a class="xref" href="#ST_Geometry_Contain" title="~">~</a>, <a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a></p></div></div><div class="refentry" id="is_contained_geometry_box2df"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>@(geometry,box2df) — 如果几何体的 2D 边界框包含在 2D 浮点精度边界框 (BOX2DF) 中，则返回<code class="varname"> TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> geometry  <var class="pdparam">A</var> ,  box2df  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12194"><h2>描述</h2><p>如果 A 几何图形的 2D 边界框包含 2D 边界框 B（使用浮点精度），则 <code class="varname">@ </code>运算符返回<code class="varname"> TRUE</code>。 这意味着如果 B 是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12210"><h2>示例</h2><pre class="programlisting">SELECT ST_Buffer(ST_GeomFromText('POINT(2 2)'), 1) @ ST_MakeBox2D(ST_Point(0,0), ST_Point(5,5)) AS is_contained;

 is_contained
--------------
 t
(1 row)</pre></div><div class="refsection" id="idm12213"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="is_contained_box2df_geometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>@(box2df,geometry) — 如果 2D 浮点精度边界框 (BOX2DF) 包含在几何体的 2D 边界框中，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> box2df  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12240"><h2>描述</h2><p>如果 2D 边界框 A 使用浮点精度包含在 B 几何体的 2D 边界框中，则<code class="varname"> @ </code>运算符返回<code class="varname"> TRUE</code>。 这意味着如果 B 是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12256"><h2>示例</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_Point(2,2), ST_Point(3,3)) @ ST_Buffer(ST_GeomFromText('POINT(1 1)'), 10) AS is_contained;

 is_contained
--------------
 t
(1 row)</pre></div><div class="refsection" id="idm12259"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="is_contained_box2df_box2df"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>@(box2df,box2df) — 如果 2D 浮点精度边界框 (BOX2DF) 包含在另一个 2D 浮点精度边界框内，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> box2df  <var class="pdparam">A</var> ,  box2df  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12286"><h2>描述</h2><p>如果 2D 边界框 A 包含在 2D 边界框 B 中，则<code class="varname"> @ </code>运算符使用浮点精度返回<code class="varname">TRUE</code>。 这意味着如果 A（或 B）是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12302"><h2>示例</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_Point(2,2), ST_Point(3,3)) @ ST_MakeBox2D(ST_Point(0,0), ST_Point(5,5)) AS is_contained;

 is_contained
--------------
 t
(1 row)</pre></div><div class="refsection" id="idm12305"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a></p></div></div><div class="refentry" id="ST_Geometry_Overabove"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>|&amp;&gt; — 如果 A 的边界框与 B 的边界框重叠或位于其上方，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">|&amp;&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12332"><h2>描述</h2><p>运算符<code class="varname">|&amp;&gt;</code>返回<code class="varname">TRUE</code>，如果几何体A的边界框与几何体B的边界框重叠或位于其上方，更准确地说，它与几何体B的边界框不重叠于其下方。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12339"><h2>示例</h2><pre class="programlisting">
SELECT tbl1.column1, tbl2.column1, tbl1.column2 |&amp;
&gt; tbl2.column2 AS overabove
FROM
  ( VALUES
        (1, 'LINESTRING(6 0, 6 4)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING(0 0, 3 3)'::geometry),
        (3, 'LINESTRING(0 1, 0 5)'::geometry),
        (4, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl2;

 column1 | column1 | overabove
---------+---------+-----------
           1 |       2 | t
           1 |       3 | f
           1 |       4 | f
(3 rows)
</pre></div><div class="refsection" id="idm12342"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>, <a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>, <a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>, <a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a></p></div></div><div class="refentry" id="ST_Geometry_Above"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>|&gt;&gt; — 如果 A 的边界框严格位于 B 的边界框上方，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">|&gt;&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12365"><h2>描述</h2><p>如果几何体 A 的边界框严格位于几何体 B 的边界框上方，则 <code class="varname">|&gt;&gt;</code> 运算符返回 <code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12372"><h2>示例</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 |&gt;&gt; tbl2.column2 AS above
FROM
  ( VALUES
        (1, 'LINESTRING (1 4, 1 7)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING (0 0, 4 2)'::geometry),
        (3, 'LINESTRING (6 1, 6 5)'::geometry),
        (4, 'LINESTRING (2 3, 5 6)'::geometry)) AS tbl2;

 column1 | column1 | above
---------+---------+-------
           1 |       2 | t
           1 |       3 | f
           1 |       4 | f
(3 rows)</pre></div><div class="refsection" id="idm12375"><h2>相关信息</h2><p><a class="xref" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>, <a class="xref" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a></p></div></div><div class="refentry" id="ST_Geometry_Contain"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~ — 如果 A 的边界框包含 B 的边界框，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12397"><h2>描述</h2><p>如果几何体 A 的边界框完全包含几何体 B 的边界框，则 <code class="varname">~ </code>运算符返回 <code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm12404"><h2>示例</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 ~ tbl2.column2 AS contains
FROM
  ( VALUES
        (1, 'LINESTRING (0 0, 3 3)'::geometry)) AS tbl1,
  ( VALUES
        (2, 'LINESTRING (0 0, 4 4)'::geometry),
        (3, 'LINESTRING (1 1, 2 2)'::geometry),
        (4, 'LINESTRING (0 0, 3 3)'::geometry)) AS tbl2;

 column1 | column1 | contains
---------+---------+----------
           1 |       2 | f
           1 |       3 | t
           1 |       4 | t
(3 rows)</pre></div><div class="refsection" id="idm12407"><h2>相关信息</h2><p><a class="xref" href="#ST_Geometry_Contained" title="@">@</a>, <a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a></p></div></div><div class="refentry" id="contains_geometry_box2df"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~(geometry,box2df) — 如果几何体的 2D 粘合框包含 2D 浮点精度边界框 (GIDX)，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> geometry  <var class="pdparam">A</var> ,  box2df  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12428"><h2>描述</h2><p>如果几何图形 A 的 2D 边界框包含 2D 边界框 B（使用浮点精度），则 <code class="varname">~ </code>运算符返回 <code class="varname">TRUE</code>。 这意味着如果 B 是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12444"><h2>示例</h2><pre class="programlisting">SELECT ST_Buffer(ST_GeomFromText('POINT(1 1)'), 10) ~ ST_MakeBox2D(ST_Point(0,0), ST_Point(2,2)) AS contains;

 contains
----------
 t
(1 row)</pre></div><div class="refsection" id="idm12447"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="contains_box2df_geometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~(box2df,geometry) — 如果 2D 浮点精度边界框 (BOX2DF) 包含几何体的 2D 边界框，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> box2df  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12474"><h2>描述</h2><p>如果 2D 边界框 A 包含 B 几何体的边界框，则 <code class="varname">~ </code>运算符使用浮点精度返回 <code class="varname">TRUE</code>。 这意味着如果 A 是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12490"><h2>示例</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_Point(0,0), ST_Point(5,5)) ~ ST_Buffer(ST_GeomFromText('POINT(2 2)'), 1) AS contains;

 contains
----------
 t
(1 row)</pre></div><div class="refsection" id="idm12493"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="contains_box2df_box2df"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~(box2df,box2df) — 如果 2D 浮点精度边界框 (BOX2DF) 包含另一个 2D 浮点精度边界框 (BOX2DF)，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> box2df  <var class="pdparam">A</var> ,  box2df  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12520"><h2>描述</h2><p>如果 2D 浮点精度边界框 A 包含 2D 浮点精度边界框 B，则 <code class="varname">~ </code>运算符返回<code class="varname"> TRUE</code>。 这意味着如果 A 是（双精度）box2d，它将在内部转换为浮点精度 2D 边界框（BOX2DF）</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数旨在由 BRIN 索引内部使用，而不是由用户使用。</p></td></tr></table></div><p class="availability">可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm12536"><h2>示例</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_Point(0,0), ST_Point(5,5)) ~ ST_MakeBox2D(ST_Point(2,2), ST_Point(3,3)) AS contains;

 contains
----------
 t
(1 row)</pre></div><div class="refsection" id="idm12539"><h2>相关信息</h2><p><a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>, <a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>, <a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>, <a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>, <a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>, <a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>, <a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>, <a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" id="ST_Geometry_Same"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~= — 如果 A 的边界框与 B 的边界框相同，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~=</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12566"><h2>描述</h2><p>如果几何/地理 A 的边界框与几何/地理 B 的边界框相同，则 <code class="varname">~= </code>运算符返回<code class="varname"> TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div><p class="availability">可用性：1.5.0 改变了行为</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该运算符已将 PostGIS 1.5 中的行为从测试实际几何相等性更改为仅检查边界框相等性。 让事情变得复杂的是，它还取决于您是否进行了硬升级或软升级，数据库的行为是什么。 要了解您的数据库有哪些行为，您可以运行下面的查询。 要检查是否真正相等，请使用 <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>或 <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>。</p></td></tr></table></div></div><div class="refsection" id="idm12582"><h2>示例</h2><pre class="programlisting">select 'LINESTRING(0 0, 1 1)'::geometry ~= 'LINESTRING(0 1, 1 0)'::geometry as equality;
 equality   |
-----------------+
          t    |
                        </pre></div><div class="refsection" id="idm12585"><h2>相关信息</h2><p><a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>, <a class="xref" href="#ST_Geometry_EQ" title="=">=</a></p></div></div></section><section class="section" id="operators-distance"><div class="titlepage"><div><div><h3 class="title">7.10.2. 距离运算符</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#geometry_distance_knn">&lt;-&gt;</a></span><span class="refpurpose"> — 返回 A 和 B 之间的 2D 距离。 </span></li><li><span class="refentrytitle"><a href="#geometry_distance_cpa">|=|</a></span><span class="refpurpose"> — 返回 A 和 B 轨迹在最接近点处的距离。 </span></li><li><span class="refentrytitle"><a href="#geometry_distance_box">&lt;#&gt;</a></span><span class="refpurpose"> — 返回 A 和 B 边界框之间的 2D 距离。 </span></li><li><span class="refentrytitle"><a href="#geometry_distance_centroid_nd">&lt;&lt;-&gt;&gt;</a></span><span class="refpurpose"> — 返回 A 和 B 几何图形或边界框之间的 n 维距离 </span></li></ul></div><div class="refentry" id="geometry_distance_knn"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&lt;-&gt; — 返回 A 和 B 之间的 2D 距离。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">&lt;-&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">&lt;-&gt;</strong>(</code> geography  <var class="pdparam">A</var> ,  geography  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12617"><h2>描述</h2><p><code class="varname">&lt;-&gt;</code> 运算符返回两个几何图形之间的二维距离。 用于“ORDER BY”子句提供索引辅助的最近邻结果集。 对于 9.5 以下的 PostgreSQL 仅给出边界框的质心距离，而对于 PostgreSQL 9.5，真正的 KNN 距离搜索给出几何图形之间的真实距离以及地理的球体距离。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的 2D GiST 索引。 它与其他使用空间索引的运算符不同，只有当该运算符位于 ORDER BY 子句中时才会使用空间索引。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅当其中一个几何图形是常量（不在子查询/cte 中）时，索引才会启动。 例如 'SRID=3005;POINT(1011102 450541)'::geometry 而不是 a.geom</p></td></tr></table></div><p>有关详细示例，请参阅<a class="link" href="https://postgis.net/workshops/postgis-intro/knn.html" target="_top"> PostGIS 研讨会：最近邻搜索</a>。</p><p class="enhanced">增强：2.2.0 -几何和地理之间的 KNN（k 最近邻）行为现在是真实的。 请注意，地理的 KNN 是在球面上计算的，而不是在椭球体平面上计算的。 PostgreSQL 9.4 及更低版本支持地理，但仅支持边界框的重心。</p><p class="changed">更改： 2.2.0 -在PostgreSQL 9.5中，旧的混合格式可能很慢。 因此，如果您只想在 PostGIS 2.2 或更高版本和 PostgreSQL 9.5 或更高版本上运行，则可能需要消除该方法。</p><p class="availability">可用性：2.0.0——弱 KNN 根据几何质心距离而不是真实距离提供最近邻。 点的结果精确，所有其他类型的结果不精确。 适用于 PostgreSQL 9.1+</p></div><div class="refsection" id="idm12630"><h2>示例</h2><pre class="programlisting">SELECT ST_Distance(geom, 'SRID=3005;POINT(1011102 450541)'::geometry) as d,edabbr, vaabbr
FROM va2005
ORDER BY d limit 10;

        d         | edabbr | vaabbr
------------------+--------+--------
                0 | ALQ    | 128
 5541.57712511724 | ALQ    | 129A
 5579.67450712005 | ALQ    | 001
  6083.4207708641 | ALQ    | 131
  7691.2205404848 | ALQ    | 003
 7900.75451037313 | ALQ    | 122
 8694.20710669982 | ALQ    | 129B
 9564.24289057111 | ALQ    | 130
  12089.665931705 | ALQ    | 127
 18472.5531479404 | ALQ    | 002
(10 rows)
</pre><p>KNN的原始答案是： </p><pre class="programlisting">
SELECT st_distance(geom, 'SRID=3005;POINT(1011102 450541)'::geometry) as d,edabbr, vaabbr
FROM va2005
ORDER BY geom &lt;-&gt; 'SRID=3005;POINT(1011102 450541)'::geometry limit 10;

        d         | edabbr | vaabbr
------------------+--------+--------
                0 | ALQ    | 128
 5541.57712511724 | ALQ    | 129A
 5579.67450712005 | ALQ    | 001
  6083.4207708641 | ALQ    | 131
  7691.2205404848 | ALQ    | 003
 7900.75451037313 | ALQ    | 122
 8694.20710669982 | ALQ    | 129B
 9564.24289057111 | ALQ    | 130
  12089.665931705 | ALQ    | 127
 18472.5531479404 | ALQ    | 002
(10 rows)

</pre><p>如果您对这两个查询运行“EXPLAIN ANALYZE”，您将看到第二个查询的性能有所提高。 </p><p>对于运行 PostgreSQL &lt; 9.5 的用户，请使用混合查询来查找真正的最临近点。 首先使用索引辅助 KNN 进行 CTE 查询，然后进行精确查询以获得正确的排序： </p><pre class="programlisting">
WITH index_query AS (
  SELECT ST_Distance(geom, 'SRID=3005;POINT(1011102 450541)'::geometry) as d,edabbr, vaabbr
        FROM va2005
  ORDER BY geom &lt;-&gt; 'SRID=3005;POINT(1011102 450541)'::geometry LIMIT 100)
  SELECT *
        FROM index_query
  ORDER BY d limit 10;

        d         | edabbr | vaabbr
------------------+--------+--------
                0 | ALQ    | 128
 5541.57712511724 | ALQ    | 129A
 5579.67450712005 | ALQ    | 001
  6083.4207708641 | ALQ    | 131
  7691.2205404848 | ALQ    | 003
 7900.75451037313 | ALQ    | 122
 8694.20710669982 | ALQ    | 129B
 9564.24289057111 | ALQ    | 130
  12089.665931705 | ALQ    | 127
 18472.5531479404 | ALQ    | 002
(10 rows)


</pre></div><div class="refsection" id="idm12638"><h2>相关信息</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a></p></div></div><div class="refentry" id="geometry_distance_cpa"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>|=| — 返回 A 和 B 轨迹在最接近点处的距离。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">|=|</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12659"><h2>描述</h2><p><code class="varname">|=|</code>运算符返回两个轨迹之间的 3D 距离（请参阅 <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>）。 这与 <a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a> 相同，但作为运算符，它可用于使用 N 维索引进行最近邻搜索（需要 PostgreSQL 9.5.0 或更高版本）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用几何上可能可用的 ND GiST 索引。 它与其他使用空间索引的运算符不同，只有当该运算符位于 ORDER BY 子句中时才会使用空间索引。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅当其中一个几何图形是常量（不在子查询/cte 中）时，索引才会启动。 例如 'SRID=3005;LINESTRINGM(0 0 0,0 0 1)'::geometry 而不是 a.geom</p></td></tr></table></div><p class="availability">可用性：2.2.0。 索引支持仅适用于 PostgreSQL 9.5+</p></div><div class="refsection" id="idm12670"><h2>示例</h2><pre class="programlisting">-- Save a literal query trajectory in a psql variable...
\set qt 'ST_AddMeasure(ST_MakeLine(ST_MakePointM(-350,300,0),ST_MakePointM(-410,490,0)),10,20)'
-- Run the query !
SELECT track_id, dist FROM (
  SELECT track_id, ST_DistanceCPA(tr,:qt) dist
  FROM trajectories
  ORDER BY tr |=| :qt
  LIMIT 5
) foo;
 track_id        dist
----------+-------------------
      395 | 0.576496831518066
      380 |  5.06797130410151
      390 |  7.72262293958322
      385 |   9.8004461358071
      405 |  10.9534397988433
(5 rows)
</pre></div><div class="refsection" id="idm12673"><h2>相关信息</h2><p><a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>, <a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>, <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> </p></div></div><div class="refentry" id="geometry_distance_box"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&lt;#&gt; — 返回 A 和 B 边界框之间的 2D 距离。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">&lt;#&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12694"><h2>描述</h2><p><code class="varname">&lt;#&gt;</code>运算符返回两个浮点边界框之间的距离，可能从空间索引中读取它们（需要 PostgreSQL 9.1）。 对于进行最近邻<span class="strong"><strong>近似</strong></span>距离排序很有用。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。 它与其他使用空间索引的运算符不同，只有当该运算符位于 ORDER BY 子句中时才会使用空间索引。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅当其中一个几何图形是常量时，索引才会生效，例如 ORDER BY (ST_GeomFromText('POINT(1 2)') &lt;#&gt; geom) 而不是 g1.geom &lt;#&gt; 。</p></td></tr></table></div><p class="availability">可用性：2.0.0——KNN 仅适用于 PostgreSQL 9.1+</p></div><div class="refsection" id="idm12704"><h2>示例</h2><pre class="programlisting">
SELECT *
FROM (
SELECT b.tlid, b.mtfcc,
        b.geom &lt;#
&gt; ST_GeomFromText('LINESTRING(746149 2948672,745954 2948576,
                745787 2948499,745740 2948468,745712 2948438,
                745690 2948384,745677 2948319)',2249) As b_dist,
                ST_Distance(b.geom, ST_GeomFromText('LINESTRING(746149 2948672,745954 2948576,
                745787 2948499,745740 2948468,745712 2948438,
                745690 2948384,745677 2948319)',2249)) As act_dist
    FROM bos_roads As b
    ORDER BY b_dist, b.tlid
    LIMIT 100) As foo
    ORDER BY act_dist, tlid LIMIT 10;

   tlid    | mtfcc |      b_dist      |     act_dist
-----------+-------+------------------+------------------
  85732027 | S1400 |                0 |                0
  85732029 | S1400 |                0 |                0
  85732031 | S1400 |                0 |                0
  85734335 | S1400 |                0 |                0
  85736037 | S1400 |                0 |                0
 624683742 | S1400 |                0 | 128.528874268666
  85719343 | S1400 | 260.839270432962 | 260.839270432962
  85741826 | S1400 | 164.759294123275 | 260.839270432962
  85732032 | S1400 |           277.75 | 311.830282365264
  85735592 | S1400 |           222.25 | 311.830282365264
(10 rows)

</pre></div><div class="refsection" id="idm12707"><h2>相关信息</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a></p></div></div><div class="refentry" id="geometry_distance_centroid_nd"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&lt;&lt;-&gt;&gt; — 返回 A 和 B 几何图形或边界框之间的 n 维距离 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">&lt;&lt;-&gt;&gt;</strong>(</code> geometry  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12728"><h2>描述</h2><p><code class="varname">&lt;&lt;-&gt;&gt;</code>运算符返回两个几何图之间的 n 维（欧几里德）距离。 对于进行最 近邻<span class="strong"><strong>近似</strong></span>距离排序很有用。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用几何上可能可用的 n-D GiST 索引。 它与其他使用空间索引的运算符不同，只有当该运算符位于 ORDER BY 子句中时才会使用空间索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅当其中一个几何图形是常量（不在子查询/cte 中）时，索引才会启动。 例如 'SRID=3005;POINT(1011102 450541)'::geometry 而不是 a.geom </p></td></tr></table></div><p class="availability">可用性：2.2.0——KNN 仅适用于 PostgreSQL 9.1+</p></div><div class="refsection" id="idm12738"><h2>相关信息</h2><p>
<a class="xref" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a>
      </p></div></div></section></section><section class="section" id="Spatial_Relationships"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.11. 空间关系</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数决定了几何图形之间的空间关系。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm12747">7.11.1. 拓扑关系</a></span></li><li><span class="section"><a href="#idm14025">7.11.2. 距离关系</a></span></li></ul></div><section class="section" id="idm12747"><div class="titlepage"><div><div><h3 class="title">7.11.1. 拓扑关系</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_3DIntersects">ST_3DIntersects</a></span><span class="refpurpose"> — 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域） </span></li><li><span class="refentrytitle"><a href="#ST_Contains">ST_Contains</a></span><span class="refpurpose"> — 测试 B 的每个点是否都位于 A 中，并且它们的内部是否有一个共同点</span></li><li><span class="refentrytitle"><a href="#ST_ContainsProperly">ST_ContainsProperly</a></span><span class="refpurpose"> — 测试 B 的每个点是否都位于 A 的内部</span></li><li><span class="refentrytitle"><a href="#ST_CoveredBy">ST_CoveredBy</a></span><span class="refpurpose"> — 测试 A 的每个点是否都位于 B 中</span></li><li><span class="refentrytitle"><a href="#ST_Covers">ST_Covers</a></span><span class="refpurpose"> — 测试 B 的每个点是否都位于 A 中</span></li><li><span class="refentrytitle"><a href="#ST_Crosses">ST_Crosses</a></span><span class="refpurpose"> — 测试两个几何图形是否有一些（但不是全部）共同的内点</span></li><li><span class="refentrytitle"><a href="#ST_Disjoint">ST_Disjoint</a></span><span class="refpurpose"> — 测试两个几何图形是否没有共同点 </span></li><li><span class="refentrytitle"><a href="#ST_Equals">ST_Equals</a></span><span class="refpurpose"> — 测试两个几何图形是否包含同一组点</span></li><li><span class="refentrytitle"><a href="#ST_Intersects">ST_Intersects</a></span><span class="refpurpose"> — 测试两个几何图形是否相交（它们至少有一个共同点）</span></li><li><span class="refentrytitle"><a href="#ST_LineCrossingDirection">ST_LineCrossingDirection</a></span><span class="refpurpose"> — 返回一个数字，指示两个 LineString 的交叉行为</span></li><li><span class="refentrytitle"><a href="#ST_OrderingEquals">ST_OrderingEquals</a></span><span class="refpurpose"> — 测试两个几何图形是否表示相同的几何图形并且具有相同方向顺序的点</span></li><li><span class="refentrytitle"><a href="#ST_Overlaps">ST_Overlaps</a></span><span class="refpurpose"> — 测试两个几何图形是否具有相同的维度和相交，但每个几何图形至少有一个点不在另一个几何图形中</span></li><li><span class="refentrytitle"><a href="#ST_Relate">ST_Relate</a></span><span class="refpurpose"> — 测试两个几何图形是否具有与交集矩阵模式匹配的拓扑关系，或计算它们的交集矩阵 </span></li><li><span class="refentrytitle"><a href="#ST_RelateMatch">ST_RelateMatch</a></span><span class="refpurpose"> — 测试 DE-9IM 交集矩阵是否与交集矩阵模式匹配 </span></li><li><span class="refentrytitle"><a href="#ST_Touches">ST_Touches</a></span><span class="refpurpose"> — 测试两个几何图形是否至少有一个共同点，但它们的内部不相交</span></li><li><span class="refentrytitle"><a href="#ST_Within">ST_Within</a></span><span class="refpurpose"> — 测试 A 的每个点是否都位于 B 中，并且它们的内部是否有一个共同点</span></li></ul></div><div class="refentry" id="ST_3DIntersects"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DIntersects — 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域） </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_3DIntersects</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm12764"><h2>描述</h2><p>重叠、接触、内在都意味着空间交叉。 如果上述任何一个返回 true，则几何图形也在空间上相交。 不相交意味着空间相交为假。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>由于浮点数精度问题，几何处理后，几何体不会总是像您期望的那样相交。例如，到几何体上的线串的最近点可能不位于线串上。对于这种情况，如果您希望将一厘米的距离视为相交，可以使用<a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> 函数。</p></td></tr></table></div><p class="changed">更改：3.0.0 删除了 SFCGAL 后端，GEOS 后端支持 TIN。</p><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p></div><div class="refsection" id="idm12790"><h2>几何示例</h2><pre class="programlisting">SELECT ST_3DIntersects(pt, line), ST_Intersects(pt, line)
  FROM (SELECT 'POINT(0 0 2)'::geometry As pt, 'LINESTRING (0 0 1, 0 2 3)'::geometry As line) As foo;
 st_3dintersects | st_intersects
-----------------+---------------
 f               | t
(1 row)
    </pre></div><div class="refsection" id="idm12793"><h2>TIN示例</h2><pre class="programlisting">SELECT ST_3DIntersects('TIN(((0 0 0,1 0 0,0 1 0,0 0 0)))'::geometry, 'POINT(.1 .1 0)'::geometry);
 st_3dintersects
-----------------
 t</pre></div><div class="refsection" id="idm12796"><h2>相关信息</h2><p><a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" id="ST_Contains"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Contains — 测试 B 的每个点是否都位于 A 中，并且它们的内部是否有一个共同点</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Contains</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p></div></div><div class="refsection" id="idm12816"><h2>描述</h2><p>如果几何图形 A 包含几何图形 B，则返回 TRUE。当且仅当 B 的所有点都位于 A 内部（即在 A 的内部或边界中）时，A 包含 B（或者等效地，B 中没有点位于 A 的外部），并且 A 和 B 的内部至少有一个共同点。 </p><p>用数学术语来说： <span class="emphasis"><em>ST_Contains(A, B) ⇔ (A ⋂ B = B) ∧ (Int(A) ⋂ Int(B) ≠ ∅)</em></span></p><p>包含关系是自反的：每个几何图形都包含其自身。 （相反，在<a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>谓词中，几何图形<span class="emphasis"><em>未</em></span>正确包含自身。）该关系是反对称的：如果 <code class="code">ST_Contains(A,B) = true</code> 且 <code class="code">ST_Contains(B,A) = true</code>，则两个几何图形必须在拓扑上相等 ( <code class="code">ST_Equals(A,B) = true</code>)。 </p><p>ST_Contains 与 <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a>相反。 因此，<code class="code">ST_Contains(A,B) = ST_Within(B,A)</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>因为内部必须有一个公共点，所以定义的一个微妙之处是多边形和线<span class="emphasis"><em>不</em></span>包含完全位于其边界内的线和点。 有关更多详细信息，请参阅 <a class="link" href="http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html" target="_top">OGC涵盖、包含、内部的微妙之处</a>。 <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a> 谓词提供了更具包容性的关系。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  要避免使用索引，请使用函数 <code class="function">_ST_Contains</code>。</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：2.3.0 PIP 短路（快速判断仅限于多边形和点）已得到增强，以支持具有更少点的多点。 以前的版本仅支持面和点组合。</p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请勿将此函数用于无效的几何图形。 你会得到意想不到的结果。</p></td></tr></table></div><p>注意：这是返回布尔值而不是整数的“允许”版本。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 // s2.1.13.3 - 与内部相同（几何 B、几何 A）</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.31</p></div><div class="refsection" id="idm12855"><h2>示例</h2><p><code class="function">ST_Contains </code>在以下情况下返回 <code class="varname">TRUE</code>：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains01.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">MULTIPOINT</code></p></div></div></div></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains02.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POINT</code></p></div></div></div></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains03.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains04.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td></tr></tbody></table></div><p><code class="function">ST_Contains</code> 在以下情况下返回 <code class="varname">FALSE</code>：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains05.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">MULTIPOINT</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains06.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr></tbody></table></div><p>由于内部相交条件，<code class="function">ST_Contains</code> 在以下情况下返回 <code class="varname">FALSE</code>（而 <code class="function">ST_Covers</code> 返回 <code class="varname">TRUE</code>）：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains07.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">POINT</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains08.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">-- A circle within a circle
SELECT ST_Contains(smallc, bigc) As smallcontainsbig,
     ST_Contains(bigc,smallc) As bigcontainssmall,
     ST_Contains(bigc, ST_Union(smallc, bigc)) as bigcontainsunion,
     ST_Equals(bigc, ST_Union(smallc, bigc)) as bigisunion,
     ST_Covers(bigc, ST_ExteriorRing(bigc)) As bigcoversexterior,
     ST_Contains(bigc, ST_ExteriorRing(bigc)) As bigcontainsexterior
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
       ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;

-- Result
  smallcontainsbig | bigcontainssmall | bigcontainsunion | bigisunion | bigcoversexterior | bigcontainsexterior
------------------+------------------+------------------+------------+-------------------+---------------------
 f                | t                | t                | t          | t        | f

-- Example demonstrating difference between contains and contains properly
SELECT ST_GeometryType(geomA) As geomtype, ST_Contains(geomA,geomA) AS acontainsa, ST_ContainsProperly(geomA, geomA) AS acontainspropa,
   ST_Contains(geomA, ST_Boundary(geomA)) As acontainsba, ST_ContainsProperly(geomA, ST_Boundary(geomA)) As acontainspropba
FROM (VALUES ( ST_Buffer(ST_Point(1,1), 5,1) ),
       ( ST_MakeLine(ST_Point(1,1), ST_Point(-1,-1) ) ),
       ( ST_Point(1,1) )
    ) As foo(geomA);

  geomtype    | acontainsa | acontainspropa | acontainsba | acontainspropba
--------------+------------+----------------+-------------+-----------------
ST_Polygon    | t          | f              | f           | f
ST_LineString | t          | f              | f           | f
ST_Point      | t          | t              | f           | f

 </pre></div><div class="refsection" id="idm12962"><h2>相关信息</h2><p><a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>, <a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" id="ST_ContainsProperly"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ContainsProperly — 测试 B 的每个点是否都位于 A 的内部</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_ContainsProperly</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p></div></div><div class="refsection" id="idm12986"><h2>描述</h2><p>如果 B 的每个点都位于 A 的内部（或者等效地，B 的任何点都不位于 A 的边界或外部），则返回<code class="varname"> true</code>。</p><p>用数学术语来说： <span class="emphasis"><em>ST_ContainsProperly(A, B) ⇔ Int(A) ⋂ B = B</em></span></p><p>如果两个几何图形的 DE-9IM 交集矩阵匹配 [T**FF*FF*]，则 A 正确包含 B</p><p>A 没有正确地包含自身，但确实包含自身。</p><p>计算一组几何图形与大型多边形几何图形的交集时，请使用此谓词。 交叉点相当慢，因此您可以使用 ContainsProperly 提取完全位于该区域内的感兴趣的几何图形，这非常高效。 在这些场景中，直观地看出交集确实是原始目标几何体。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  要避免使用索引，请使用函数<code class="function"> _ST_ContainsProperly</code>。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该谓词相对于 <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a> 和 <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> 的优点是可以更有效地计算，无需计算各个点的拓扑。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：1.4.0</p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请勿将此函数用于无效的几何图形。 你会得到意想不到的结果。</p></td></tr></table></div></div><div class="refsection" id="idm13009"><h2>示例</h2><pre class="programlisting">--a circle within a circle
  SELECT ST_ContainsProperly(smallc, bigc) As smallcontainspropbig,
  ST_ContainsProperly(bigc,smallc) As bigcontainspropsmall,
  ST_ContainsProperly(bigc, ST_Union(smallc, bigc)) as bigcontainspropunion,
  ST_Equals(bigc, ST_Union(smallc, bigc)) as bigisunion,
  ST_Covers(bigc, ST_ExteriorRing(bigc)) As bigcoversexterior,
  ST_ContainsProperly(bigc, ST_ExteriorRing(bigc)) As bigcontainsexterior
  FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
  ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;
  --Result
  smallcontainspropbig | bigcontainspropsmall | bigcontainspropunion | bigisunion | bigcoversexterior | bigcontainsexterior
------------------+------------------+------------------+------------+-------------------+---------------------
 f                     | t                    | f                    | t          | t                 | f

 --example demonstrating difference between contains and contains properly
 SELECT ST_GeometryType(geomA) As geomtype, ST_Contains(geomA,geomA) AS acontainsa, ST_ContainsProperly(geomA, geomA) AS acontainspropa,
 ST_Contains(geomA, ST_Boundary(geomA)) As acontainsba, ST_ContainsProperly(geomA, ST_Boundary(geomA)) As acontainspropba
 FROM (VALUES ( ST_Buffer(ST_Point(1,1), 5,1) ),
      ( ST_MakeLine(ST_Point(1,1), ST_Point(-1,-1) ) ),
      ( ST_Point(1,1) )
  ) As foo(geomA);

  geomtype    | acontainsa | acontainspropa | acontainsba | acontainspropba
--------------+------------+----------------+-------------+-----------------
ST_Polygon    | t          | f              | f           | f
ST_LineString | t          | f              | f           | f
ST_Point      | t          | t              | f           | f
 </pre></div><div class="refsection" id="idm13012"><h2>相关信息</h2><p><a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>, <a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>, <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" id="ST_CoveredBy"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CoveredBy — 测试 A 的每个点是否都位于 B 中</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_CoveredBy</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_CoveredBy</strong>(</code>geography  <var class="pdparam">geogA</var>, geography  <var class="pdparam">geogB</var><code>)</code>;</p></div></div><div class="refsection" id="idm13047"><h2>描述</h2><p>如果几何/地理 A 中的每个点都位于几何/地理 B 的内部（即与其内部或边界相交），则返回<code class="varname"> true</code>。换句话说，测试 A 是否没有位于 B 之外的点。 </p><p>用数学术语来说：<span class="emphasis"><em> ST_CoveredBy(A, B) ⇔ A ⋂ B = A</em></span></p><p>ST_CoveredBy 与 <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>相反。 因此，<code class="code">ST_CoveredBy(A,B) = ST_Covers(B,A)</code>。</p><p>一般来说，应该使用此函数而不是<a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a>，因为它具有更简单的定义，不存在“边界不在其几何形状内”的奇怪情况。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  要避免使用索引，请使用函数<code class="function">_ST_CoveredBy</code>。</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请勿将此函数用于无效的几何图形。 你会得到意想不到的结果。</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><p class="availability">可用性：1.2.2</p><p>注意：这是返回布尔值而不是整数的“允许”版本。</p><p>不是 OGC 标准，但 Oracle 也有。</p></div><div class="refsection" id="idm13070"><h2>示例</h2><pre class="programlisting">--a circle coveredby a circle
SELECT ST_CoveredBy(smallc,smallc) As smallinsmall,
  ST_CoveredBy(smallc, bigc) As smallcoveredbybig,
  ST_CoveredBy(ST_ExteriorRing(bigc), bigc) As exteriorcoveredbybig,
  ST_Within(ST_ExteriorRing(bigc),bigc) As exeriorwithinbig
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
  ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;
  --Result
 smallinsmall | smallcoveredbybig | exteriorcoveredbybig | exeriorwithinbig
--------------+-------------------+----------------------+------------------
 t            | t                 | t                    | f
(1 row) </pre></div><div class="refsection" id="idm13073"><h2>相关信息</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" id="ST_Covers"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Covers — 测试 B 的每个点是否都位于 A 中</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Covers</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Covers</strong>(</code>geography  <var class="pdparam">geogpolyA</var>, geography  <var class="pdparam">geogpointB</var><code>)</code>;</p></div></div><div class="refsection" id="idm13104"><h2>描述</h2><p>如果几何/地理 B 中的每个点都位于几何/地理 A 内部（即与其内部或边界相交），则返回<code class="varname"> true</code>。同样，测试 B 中没有点位于 A 外部（外部）。 </p><p>用数学术语来说：<span class="emphasis"><em>ST_Covers(A, B) ⇔ A ⋂ B = B</em></span></p><p>ST_Covers 与 <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>相反。 因此，<code class="code">ST_Covers(A,B) = ST_CoveredBy(B,A)</code>。</p><p>一般来说，应该使用这个函数而不是<a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>，因为它有一个更简单的定义，不存在“几何图形不包含其边界”的奇怪情况。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  为了避免使用索引，请使用函数 <code class="function">_ST_Covers</code>。</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请勿将此函数用于无效的几何图形。 你会得到意想不到的结果。</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：2.4.0 为地理类型添加了对多边形中的多边形和多边形中的线的支持</p><p class="enhanced">增强：对于 2.3.0 几何图形，PIP 短路（仅限于多边形和点的快速判断）已得到增强，以支持由更少点组成的多点。 以前的版本仅支持面和点组合。</p><p class="availability">可用性：1.5 - 引入了地理支持。 </p><p class="availability">可用性：1.2.2</p><p>注意：这是返回布尔值而不是整数的“允许”版本。</p><p>不是 OGC 标准，但 Oracle 也有。</p></div><div class="refsection" id="idm13130"><h2>示例</h2><p>几何示例 </p><pre class="programlisting">--a circle covering a circle
SELECT ST_Covers(smallc,smallc) As smallinsmall,
  ST_Covers(smallc, bigc) As smallcoversbig,
  ST_Covers(bigc, ST_ExteriorRing(bigc)) As bigcoversexterior,
  ST_Contains(bigc, ST_ExteriorRing(bigc)) As bigcontainsexterior
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
  ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;
  --Result
 smallinsmall | smallcoversbig | bigcoversexterior | bigcontainsexterior
--------------+----------------+-------------------+---------------------
 t            | f              | t                 | f
(1 row) </pre><p>地理示例</p><pre class="programlisting">-- a point with a 300 meter buffer compared to a point, a point and its 10 meter buffer
SELECT ST_Covers(geog_poly, geog_pt) As poly_covers_pt,
  ST_Covers(ST_Buffer(geog_pt,10), geog_pt) As buff_10m_covers_cent
  FROM (SELECT ST_Buffer(ST_GeogFromText('SRID=4326;POINT(-99.327 31.4821)'), 300) As geog_poly,
        ST_GeogFromText('SRID=4326;POINT(-99.33 31.483)') As geog_pt ) As foo;

 poly_covers_pt | buff_10m_covers_cent
----------------+------------------
 f              | t
    </pre></div><div class="refsection" id="idm13136"><h2>相关信息</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" id="ST_Crosses"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Crosses — 测试两个几何图形是否有一些（但不是全部）共同的内点</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Crosses</strong>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm13157"><h2>描述</h2><p>比较两个几何对象，如果它们的交集“空间交叉”，则返回<code class="varname"> true</code>； 也就是说，几何图形有一些但不是所有的内部点是共同的。 几何图形内部的交集必须非空，并且维度必须小于两个输入几何图形的最大维度，并且两个几何图形的交集不得等于任一几何图形。 否则，返回 <code class="varname">false</code>。 交叉关系是对称且非自反的。</p><p>用数学术语来说： <span class="emphasis"><em>ST_Crosses(A, B) ⇔ (dim( Int(A) ⋂ Int(B) ) &lt; max( dim( Int(A) ), dim( Int(B) ) )) ∧ (A ⋂ B ≠ A) ∧ (A ⋂ B ≠ B)</em></span></p><p>如果 DE-9IM 交集矩阵匹配，则几何图形交叉：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">T*T*****</code> 适用于点/线、点/面和线/面情况</p></li><li class="listitem"><p><code class="code">T***T**</code> 用于线/点、区域/点和区域/线情况</p></li><li class="listitem"><p><code class="code">0******** </code>用于线/线情况</p></li><li class="listitem"><p>对于点/点和区域/区域情况，结果是<code class="varname">false</code> </p></li></ul></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OpenGIS 简单要素规范仅针对点/线、点/面、线/线和线/面情况定义此谓词。 JTS / GEOS 扩展了定义，也适用于线/点、区域/点和区域/线情况。 这使得关系对称。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。 </p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.13.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.29</p></div><div class="refsection" id="idm13194"><h2>示例</h2><p>以下情况均返回<code class="varname">true</code>。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses01.png"/><div class="caption"><p><code class="varname">MULTIPOINT</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses02.png"/><div class="caption"><p><code class="varname">MULTIPOINT</code> / <code class="varname">POLYGON</code></p></div></div></div></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses03.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">POLYGON</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses04.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr></tbody></table></div><p>考虑用户有两个表的情况：道路表和高速公路表。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p> </p><div class="informalexample"><pre class="programlisting">CREATE TABLE roads (
  id serial NOT NULL,
  geom geometry,
  CONSTRAINT roads_pkey PRIMARY KEY (road_id)
);</pre></div><p> </p></td><td><p> </p><div class="informalexample"><pre class="programlisting">CREATE TABLE highways (
  id serial NOT NULL,
  the_gem geometry,
  CONSTRAINT roads_pkey PRIMARY KEY (road_id)
);</pre></div><p> </p></td></tr></tbody></table></div><p>要确定穿过高速公路的道路列表，请使用类似于以下内容的查询：</p><div class="informalexample"><pre class="programlisting">SELECT roads.id
FROM roads, highways
WHERE ST_Crosses(roads.geom, highways.geom);</pre></div></div><div class="refsection" id="idm13260"><h2>相关信息</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a></p></div></div><div class="refentry" id="ST_Disjoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Disjoint — 测试两个几何图形是否没有共同点 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Disjoint</strong>(</code> geometry <var class="pdparam">A</var> ,  geometry <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm13280"><h2>描述</h2><p>如果两个几何图形不相交，则返回<code class="varname"> true</code>。 如果几何图形没有共同点，那么它们就是不相交的。 </p><p>如果另一个空间关系为 TRUE，则两个几何不连接。 如果未连接，则<a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>返回 FALSE。 </p><p>用数学术语来说：<span class="emphasis"><em>ST_Disjoint(A, B) ⇔ A ⋂ B = ∅ </em></span></p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数调用不使用索引。 否定的<a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> 谓词可用作使用索引的更高效的替代方案： <code class="code">ST_Disjoint(A,B) = NOT ST_Intersects(A,B)</code></p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>注意：这是返回布尔值而不是整数的“允许”版本。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 //s2.1.13.3 - a.Relate(b, 'FF*FF****')</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.26</p></div><div class="refsection" id="idm13307"><h2>示例</h2><pre class="programlisting">SELECT ST_Disjoint('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
 st_disjoint
---------------
 t
(1 row)
SELECT ST_Disjoint('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry);
 st_disjoint
---------------
 f
(1 row)
    </pre></div><div class="refsection" id="idm13310"><h2>相关信息</h2><p><a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" id="ST_Equals"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Equals — 测试两个几何图形是否包含同一组点</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Equals</strong>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" id="idm13329"><h2>描述</h2><p>如果给定的几何图形“拓扑相等”，则返回<code class="varname"> true</code>。 使用它可以获得比“=”更好的答案。 拓扑相等意味着几何具有相同的维度，并且它们的点集占据相同的空间。 这意味着在拓扑相等的几何中，顶点的顺序可能不同。 要验证点的顺序是否一致，请使用<a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>（必须注意 ST_OrderingEquals 比简单地验证点的顺序是否相同更严格）。</p><p>用数学术语来说：<span class="emphasis"><em>ST_Equals(A, B) ⇔ A = B </em></span></p><p>以下关系成立： <span class="emphasis"><em>ST_Equals(A, B) ⇔ ST_Within(A,B) ∧ ST_Within(B,A)</em></span></p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.24</p><p class="changed">更改：2.2.0 即使对于无效几何图形，如果它们二进制相等，也会返回 true</p></div><div class="refsection" id="idm13351"><h2>示例</h2><pre class="programlisting">SELECT ST_Equals(ST_GeomFromText('LINESTRING(0 0, 10 10)'),
    ST_GeomFromText('LINESTRING(0 0, 5 5, 10 10)'));
 st_equals
-----------
 t
(1 row)

SELECT ST_Equals(ST_Reverse(ST_GeomFromText('LINESTRING(0 0, 10 10)')),
    ST_GeomFromText('LINESTRING(0 0, 5 5, 10 10)'));
 st_equals
-----------
 t
(1 row)
</pre></div><div class="refsection" id="idm13354"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>, <a class="xref" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" id="ST_Intersects"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Intersects — 测试两个几何图形是否相交（它们至少有一个共同点）</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> geography <var class="pdparam">geogA</var> ,  geography <var class="pdparam">geogB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm13385"><h2>描述</h2><p>如果两个几何图形相交，则返回 <code class="varname">true</code>。 如果几何图形有任何共同点，则它们相交。 </p><p>对于地理，使用 0.00001 米的距离容差（因此非常接近的点被视为相交）。</p><p>用数学术语来说：<span class="emphasis"><em>ST_Intersects(A, B) ⇔ A ⋂ B ≠ ∅ </em></span></p><p>如果几何图形的 DE-9IM 交集矩阵与以下之一匹配，则几何图形相交： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">T********</code></p></li><li class="listitem"><p><code class="code">*T*******</code></p></li><li class="listitem"><p><code class="code">***T*****</code></p></li><li class="listitem"><p><code class="code">****T****</code></p></li></ul></div><p>所有其他空间关系测试都隐含空间相交，但 <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> 除外，它测试几何形状不相交。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。 </p></td></tr></table></div><p class="changed">更改：3.0.0删除了 SFCGAL 版本并添加了对 2D TINS 的本机支持。</p><p class="enhanced">增强：2.5.0 支持 GEOMETRYCOLLECTION。</p><p class="enhanced">增强：2.3.0 PIP 短路（快速判断仅限于多边形和点）已得到增强，以支持具有更少点的多点。 以前的版本仅支持面和点组合。</p><p>由 GEOS 模块（用于几何）执行，地理是原生的</p><p class="availability">可用性：1.5 引入了对地理的支持。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于地理来说，该函数的距离容差约为 0.00001 米，并且使用球体而不是椭球体计算。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>注意：这是返回布尔值而不是整数的“允许”版本。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 //s2.1.13.3 - ST_Intersects(g1, g2 ) --&gt; Not (ST_Disjoint(g1, g2 )) </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.27</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm13436"><h2>几何示例</h2><pre class="programlisting">SELECT ST_Intersects('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
 st_intersects
---------------
 f
(1 row)
SELECT ST_Intersects('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry);
 st_intersects
---------------
 t
(1 row)

-- Look up in table. Make sure table has a GiST index on geometry column for faster lookup.
SELECT id, name FROM cities WHERE ST_Intersects(geom, 'SRID=4326;POLYGON((28 53,27.707 52.293,27 52,26.293 52.293,26 53,26.293 53.707,27 54,27.707 53.707,28 53))');
 id | name
----+-------
  2 | Minsk
(1 row)
</pre></div><div class="refsection" id="idm13439"><h2>几何示例</h2><pre class="programlisting">SELECT ST_Intersects(
    'SRID=4326;LINESTRING(-43.23456 72.4567,-43.23456 72.4568)'::geography,
    'SRID=4326;POINT(-43.23456 72.4567772)'::geography
    );

 st_intersects
---------------
t
</pre></div><div class="refsection" id="idm13442"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>, <a class="xref" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a></p></div></div><div class="refentry" id="ST_LineCrossingDirection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineCrossingDirection — 返回一个数字，指示两个 LineString 的交叉行为</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_LineCrossingDirection</strong>(</code>geometry  <var class="pdparam">linestringA</var>, geometry  <var class="pdparam">linestringB</var><code>)</code>;</p></div></div><div class="refsection" id="idm13463"><h2>描述</h2><p>给定两个线串返回一个介于 -3 和 3 之间的整数，指示它们之间存在哪种交叉行为。 0表示没有交叉。 仅 <code class="varname">LINESTRING </code>支持此功能。 </p><p>交叉编号的含义如下： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0：线无交叉</p></li><li class="listitem"><p>-1：向左交叉线</p></li><li class="listitem"><p>1：向右交叉线</p></li><li class="listitem"><p>-2：表示一条线段多次交叉，并且最后一次交叉是从左侧</p></li><li class="listitem"><p>2：表示一条线段多次交叉，并且最后一次交叉是从右侧</p></li><li class="listitem"><p>-3：表示一条线段多次交叉，但最后一次交叉是从同一侧（首次）的左侧</p></li><li class="listitem"><p>3：表示一条线段多次交叉，但最后一次交叉是从同一侧（首次）的右侧</p></li></ul></div><p>
    </p><p class="availability">有效性：1.4</p></div><div class="refsection" id="idm13484"><h2>示例</h2><p><span class="bold"><strong>示例：</strong></span> 向左交叉线和向右交叉线 </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection03.png"/><div class="caption"><p>蓝色：线A;绿色：线B</p></div></div></div><pre class="programlisting">SELECT ST_LineCrossingDirection(lineA, lineB) As A_cross_B,
       ST_LineCrossingDirection(lineB, lineA) As B_cross_A
FROM (SELECT
  ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As lineA,
  ST_GeomFromText('LINESTRING (20 140, 71 74, 161 53)') As lineB
  ) As foo;

 A_cross_B | B_cross_A
-----------+-----------
        -1 |         1
</pre><p><span class="bold"><strong>示例:</strong></span> 一条线段多次交叉并且最后一次交叉从同一侧（首次）左侧和一条线段多次交叉并且最后一次交叉从同一侧（首次）右侧 </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection01.png"/><div class="caption"><p>蓝色：线A;绿色：线B</p></div></div></div><pre class="programlisting">SELECT ST_LineCrossingDirection(lineA, lineB) As A_cross_B,
       ST_LineCrossingDirection(lineB, lineA) As B_cross_A
FROM (SELECT
 ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As lineA,
 ST_GeomFromText('LINESTRING(171 154,20 140,71 74,161 53)') As lineB
  ) As foo;

 A_cross_B | B_cross_A
-----------+-----------
         3 |        -3
</pre><p><span class="bold"><strong>示例:</strong></span> 一条线段多次交叉并且最后一次交叉从左侧和一条线段多次交叉并且最后一次交叉从右侧 </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection04.png"/><div class="caption"><p>蓝色：线A;绿色：线B</p></div></div></div><pre class="programlisting">SELECT ST_LineCrossingDirection(lineA, lineB) As A_cross_B,
       ST_LineCrossingDirection(lineB, lineA) As B_cross_A
FROM (SELECT
  ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As lineA,
  ST_GeomFromText('LINESTRING(5 90, 71 74, 20 140, 171 154)') As lineB
  ) As foo;

 A_cross_B | B_cross_A
-----------+-----------
        -2 |         2
</pre><p><span class="bold"><strong>示例:</strong></span> 查找所有交叉的街道 </p><pre class="programlisting">

SELECT s1.gid, s2.gid, ST_LineCrossingDirection(s1.geom, s2.geom)
  FROM streets s1 CROSS JOIN streets s2
         ON (s1.gid != s2.gid AND s1.geom &amp;&amp; s2.geom )
WHERE ST_LineCrossingDirection(s1.geom, s2.geom) 
&gt; 0;

</pre></div><div class="refsection" id="idm13516"><h2>相关信息</h2><p><a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a></p></div></div><div class="refentry" id="ST_OrderingEquals"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_OrderingEquals — 测试两个几何图形是否表示相同的几何图形并且具有相同方向顺序的点</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_OrderingEquals</strong>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" id="idm13535"><h2>描述</h2><p>ST_OrderingEquals 比较两个几何图形，如果几何图形相等且坐标顺序相同，则返回 t (TRUE)； 否则返回 f (FALSE)。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数是根据 ArcSDE SQL 规范而不是 SQL-MM 实现的。 http://edndoc.esri.com/arcsde/9.1/sql_api/sqlapi3.htm#ST_OrderingEquals</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.43</p></div><div class="refsection" id="idm13544"><h2>示例</h2><pre class="programlisting">SELECT ST_OrderingEquals(ST_GeomFromText('LINESTRING(0 0, 10 10)'),
    ST_GeomFromText('LINESTRING(0 0, 5 5, 10 10)'));
 st_orderingequals
-----------
 f
(1 row)

SELECT ST_OrderingEquals(ST_GeomFromText('LINESTRING(0 0, 10 10)'),
    ST_GeomFromText('LINESTRING(0 0, 0 0, 10 10)'));
 st_orderingequals
-----------
 t
(1 row)

SELECT ST_OrderingEquals(ST_Reverse(ST_GeomFromText('LINESTRING(0 0, 10 10)')),
    ST_GeomFromText('LINESTRING(0 0, 0 0, 10 10)'));
 st_orderingequals
-----------
 f
(1 row)
</pre></div><div class="refsection" id="idm13547"><h2>相关信息</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a></p></div></div><div class="refentry" id="ST_Overlaps"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Overlaps — 测试两个几何图形是否具有相同的维度和相交，但每个几何图形至少有一个点不在另一个几何图形中</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Overlaps</strong>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" id="idm13568"><h2>描述</h2><p>如果几何图形 A 和 B “空间重叠”，则返回 TRUE。 如果两个几何图形具有相同的维度，并且内部界面在同一维度中相交，并且至少有一个点在另一个点之外（相当于一个点没有覆盖另一个点），则称两个几何重叠。 重叠关系是对称且不自反的。 </p><p>用数学术语来说： <span class="emphasis"><em>ST_Overlaps(A, B) ⇔ ( dim(A) = dim(B) = dim( Int(A) ⋂ Int(B) )) ∧ (A ⋂ B ≠ A) ∧ (A ⋂ B ≠ B ）</em></span></p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  要避免使用索引，请使用函数 <code class="function">_ST_Overlaps</code>。</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><p>注意：这是返回布尔值而不是整数的“允许”版本。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 // s2.1.13.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.32</p></div><div class="refsection" id="idm13590"><h2>示例</h2><p><code class="function">ST_Overlaps</code>在以下情况返回<code class="varname">TRUE</code>：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps01.png"/><div class="caption"><p><code class="varname">MULTIPOINT</code> / <code class="varname">MULTIPOINT</code></p></div></div></div></td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps02.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps03.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td></tr></tbody></table></div><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps04.png"/></div></div><p>包含 LineString 上的点，但由于它的维度较低，因此不会重叠或交叉。</p><pre class="programlisting">SELECT ST_Overlaps(a,b) AS overlaps,       ST_Crosses(a,b) AS crosses,
       ST_Intersects(a, b) AS intersects,  ST_Contains(b,a) AS b_contains_a
FROM (SELECT ST_GeomFromText('POINT (100 100)') As a,
             ST_GeomFromText('LINESTRING (30 50, 40 160, 160 40, 180 160)')  AS b) AS t

overlaps | crosses | intersects | b_contains_a
---------+----------------------+--------------
f        | f       | t          | t
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps05.png"/></div></div><p>部分覆盖多边形的线串相交和交叉，但不重叠，因为它具有不同的维度。</p><pre class="programlisting">SELECT ST_Overlaps(a,b) AS overlaps,        ST_Crosses(a,b) AS crosses,
       ST_Intersects(a, b) AS intersects,   ST_Contains(a,b) AS contains
FROM (SELECT ST_GeomFromText('POLYGON ((40 170, 90 30, 180 100, 40 170))') AS a,
             ST_GeomFromText('LINESTRING(10 10, 190 190)') AS b) AS t;

 overlap | crosses | intersects | contains
---------+---------+------------+--------------
 f       | t       | t          | f
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps06.png"/></div></div><p>两个多边形相交，但彼此都不包含对方，它们重叠，但不交叉，因为它们的交集具有相同的维度。</p><pre class="programlisting">SELECT ST_Overlaps(a,b) AS overlaps,       ST_Crosses(a,b) AS crosses,
       ST_Intersects(a, b) AS intersects,  ST_Contains(b, a) AS b_contains_a,
       ST_Dimension(a) AS dim_a, ST_Dimension(b) AS dim_b,
       ST_Dimension(ST_Intersection(a,b)) AS dim_int
FROM (SELECT ST_GeomFromText('POLYGON ((40 170, 90 30, 180 100, 40 170))') AS a,
             ST_GeomFromText('POLYGON ((110 180, 20 60, 130 90, 110 180))') AS b) As t;

 overlaps | crosses | intersects | b_contains_a | dim_a | dim_b | dim_int
----------+---------+------------+--------------+-------+-------+-----------
 t        | f       | t          | f            |     2 |     2 |       2
</pre></div><div class="refsection" id="idm13647"><h2>相关信息</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" id="ST_Relate"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Relate — 测试两个几何图形是否具有与交集矩阵模式匹配的拓扑关系，或计算它们的交集矩阵 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Relate</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var>, text  <var class="pdparam">intersectionMatrixPattern</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_Relate</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">ST_Relate</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var>, integer  <var class="pdparam">boundaryNodeRule</var><code>)</code>;</p></div></div><div class="refsection" id="idm13693"><h2>描述</h2><p>这些函数允许测试和评估两个几何图形之间的空间（拓扑）关系，如<a class="link" href="http://en.wikipedia.org/wiki/DE-9IM" target="_top">维度扩展 九交模型</a> (DE-9IM) 所定义。 </p><p>DE-9IM 被指定为 9 元素矩阵，指示两个几何图形的内部、边界和外部之间相交的维度。 它由使用符号“F”、“0”、“1”、“2”的 9 个字符文本字符串表示（例如<code class="code">“FF1FF0102”</code>）。 </p><p>可以通过将相交矩阵与<span class="emphasis"><em>相交矩阵模式</em></span>进行匹配来测试特定类型的空间关系。 模式可以包含附加符号“T”（表示“交集非空”）和“*”（表示“任何值”）。 常见空间关系由命名函数 <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>、<a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>、<a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>、<a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>、<a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>、<a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>、<a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>、<a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>、<a class="xref" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>、<a class="xref" href="#ST_Touches" title="ST_Touches">ST_Touches</a>和 <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a> 提供。 使用显式模式可以一步测试相交、交叉等多种条件。 它还允许测试没有命名空间关系函数的空间关系。 例如，关系“Interior-Intersects”具有 DE-9IM 模式<code class="code"> T********</code>，该模式不由任何命名谓词求值。 </p><p>有关更多信息，请参见<a class="xref" href="#eval_spatial_rel" title="5.1. 空间关系的确定">Section 5.1, “空间关系的确定”</a>。 </p><p><span class="bold"><strong>形式 1</strong></span>：根据给定的<code class="varname"> junctionMatrixPattern</code> 测试两个几何图形是否在空间上相关。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>与大多数命名空间关系谓词不同，这不会自动包含索引调用。 原因是某些关系对于不相交的几何图形是正确的（例如不相交）。 如果您使用需要交集的关系模式，请在函数调用中包含 &amp;&amp;。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果可用，最好使用命名关系函数，因为它们会自动使用存在的空间索引。 此外，他们还可以实现完全相关评估所无法实现的性能优化。 </p></td></tr></table></div><p><span class="bold"><strong>形式 2：</strong></span>返回两个输入几何之间的空间关系的 DE-9IM 矩阵字符串。 可以使用 <a class="xref" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a> 测试矩阵字符串与 DE-9IM 模式匹配。 </p><p><span class="bold"><strong>形式 3：</strong></span>与形式 2 类似，但允许指定<span class="bold"><strong>边界节点规则</strong></span>。 边界节点规则允许更好地控制 MultiLineString 的端点是否被视为位于 DE-9IM 内部或边界内。 <code class="varname">boundaryNodeRule</code> 值为： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">1</code>：<span class="bold"><strong>OGC-Mod2</strong></span> - 如果线条端点出现奇数次，则它们位于边界内。 这是 OGC SFS 标准定义的规则，也是 <code class="function">ST_Relate </code>的默认规则。 </p></li><li class="listitem"><p><code class="code">2</code>：<span class="bold"><strong>Endpoint</strong></span> - 所有端点都在边界内。 </p></li><li class="listitem"><p><code class="code">3</code>：<span class="bold"><strong>MultivalentEndpoint</strong></span> - 如果端点出现多次，则它们位于边界内。 换句话说，边界是所有“附加”或“内部”端点（但不是“未附加/外部”端点）。 </p></li><li class="listitem"><p><code class="code">4</code>：<span class="bold"><strong>MonovalentEndpoint</strong></span> - 如果端点仅出现一次，则端点位于边界内。 换句话说，边界是所有“未连接”或“外部”端点。 </p></li></ul></div><p>OGC 规范中没有此函数，但它是隐含的。 见s2.1.13.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 // s2.1.13.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.25</p><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：2.0.0 - 添加了对指定边界节点规则的支持。</p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div></div><div class="refsection" id="idm13762"><h2>示例</h2><p>使用布尔值函数测试空间关系。</p><pre class="programlisting">SELECT ST_Relate('POINT(1 2)', ST_Buffer( 'POINT(1 2)', 2), '0FFFFF212');
st_relate
-----------
t

SELECT ST_Relate(POINT(1 2)', ST_Buffer( 'POINT(1 2)', 2), '*FF*FF212');
st_relate
-----------
t
</pre><p>测试一个自定义的空间关系模式作为查询条件，使用<code class="code">&amp;&amp;</code> 来启用空间索引。</p><pre class="programlisting">-- Find compounds that properly intersect (not just touch) a poly (Interior Intersects)

SELECT c.* , p.name As poly_name
    FROM polys AS p
    INNER JOIN compounds As c
          ON c.geom &amp;&amp; p.geom
             AND ST_Relate(p.geom, c.geom,'T********');
</pre><p>计算空间关系的交集矩阵。</p><pre class="programlisting">SELECT ST_Relate( 'POINT(1 2)',
                  ST_Buffer( 'POINT(1 2)', 2));
-----------
0FFFFF212

SELECT ST_Relate( 'LINESTRING(1 2, 3 4)',
                  'LINESTRING(5 6, 7 8)' );
-----------
FF1FF0102
</pre><p>使用不同的边界节点规则来计算具有重复端点的 LineString 和 MultiLineString 之间的空间关系 <code class="code">(3 3)</code>： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>使用<span class="bold"><strong> OGC-Mod2</strong></span> 规则 (1)，重复端点位于 MultiLineString 的<span class="bold"><strong>内部</strong></span>，因此 DE-9IM 矩阵条目 [aB:bI] 为<code class="code"> 0</code>，[aB:bB] 为 <code class="code">F</code>。 </p></li><li class="listitem"><p>使用<span class="bold"><strong>Endpoint</strong></span>规则 (2)，重复端点位于 MultiLineString 的<span class="bold"><strong>边界</strong></span>中，因此 DE-9IM 矩阵条目 [aB:bI] 为<code class="code"> F</code>，[aB:bB] 为<code class="code"> 0</code>。 </p></li></ul></div><pre class="programlisting">WITH data AS (SELECT
  'LINESTRING(1 1, 3 3)'::geometry AS a_line,
  'MULTILINESTRING((3 3, 3 5), (3 3, 5 3))':: geometry AS b_multiline
)
SELECT ST_Relate( a_line, b_multiline, 1) AS bnr_mod2,
       ST_Relate( a_line, b_multiline, 2) AS bnr_endpoint
    FROM data;

 bnr_mod2  | bnr_endpoint
-----------+--------------
 FF10F0102 | FF1F00102
</pre></div><div class="refsection" id="idm13787"><h2>相关信息</h2><p><a class="xref" href="#eval_spatial_rel" title="5.1. 空间关系的确定">Section 5.1, “空间关系的确定”</a>, <a class="xref" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a>, <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>, <a class="xref" href="#ST_Touches" title="ST_Touches">ST_Touches</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a> </p></div></div><div class="refentry" id="ST_RelateMatch"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RelateMatch — 测试 DE-9IM 交集矩阵是否与交集矩阵模式匹配 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_RelateMatch</strong>(</code>text  <var class="pdparam">intersectionMatrix</var>, text  <var class="pdparam">intersectionMatrixPattern</var><code>)</code>;</p></div></div><div class="refsection" id="idm13818"><h2>描述</h2><p>测试<a class="link" href="http://en.wikipedia.org/wiki/DE-9IM" target="_top">维度扩展 九 交模型</a> (DE-9IM) <code class="varname">交集矩阵</code>值是否满足<code class="varname">交集矩阵模式</code>。 交集矩阵值可以通过<a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a> 计算。 </p><p>有关更多信息，请参见<a class="xref" href="#eval_spatial_rel" title="5.1. 空间关系的确定">Section 5.1, “空间关系的确定”</a>。 </p><p>它是通过GEOS模块实现的</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm13829"><h2>示例</h2><pre class="programlisting">SELECT ST_RelateMatch('101202FFF', 'TTTTTTFFF') ;
-- result --
t
</pre><p>对于相对于多边形处于不同位置的线，常见空间关系的模式与相交矩阵值相匹配</p><pre class="programlisting">SELECT pat.name AS relationship, pat.val AS pattern,
       mat.name AS position, mat.val AS matrix,
       ST_RelateMatch(mat.val, pat.val) AS match
    FROM (VALUES ( 'Equality', 'T1FF1FFF1' ),
                 ( 'Overlaps', 'T*T***T**' ),
                 ( 'Within',   'T*F**F***' ),
                 ( 'Disjoint', 'FF*FF****' )) AS pat(name,val)
    CROSS JOIN
        (VALUES  ('non-intersecting', 'FF1FF0212'),
                 ('overlapping',      '1010F0212'),
                 ('inside',           '1FF0FF212')) AS mat(name,val);

 relationship |  pattern  |     position     |  matrix   | match
--------------+-----------+------------------+-----------+-------
 Equality     | T1FF1FFF1 | non-intersecting | FF1FF0212 | f
 Equality     | T1FF1FFF1 | overlapping      | 1010F0212 | f
 Equality     | T1FF1FFF1 | inside           | 1FF0FF212 | f
 Overlaps     | T*T***T** | non-intersecting | FF1FF0212 | f
 Overlaps     | T*T***T** | overlapping      | 1010F0212 | t
 Overlaps     | T*T***T** | inside           | 1FF0FF212 | f
 Within       | T*F**F*** | non-intersecting | FF1FF0212 | f
 Within       | T*F**F*** | overlapping      | 1010F0212 | f
 Within       | T*F**F*** | inside           | 1FF0FF212 | t
 Disjoint     | FF*FF**** | non-intersecting | FF1FF0212 | t
 Disjoint     | FF*FF**** | overlapping      | 1010F0212 | f
 Disjoint     | FF*FF**** | inside           | 1FF0FF212 | f
</pre></div><div class="refsection" id="idm13834"><h2>相关信息</h2><p><a class="xref" href="#eval_spatial_rel" title="5.1. 空间关系的确定">Section 5.1, “空间关系的确定”</a>, <a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a></p></div></div><div class="refentry" id="ST_Touches"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Touches — 测试两个几何图形是否至少有一个共同点，但它们的内部不相交</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Touches</strong>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" id="idm13854"><h2>描述</h2><p>如果 A 和 B 相交，但它们的内部不相交，则返回 <code class="varname">TRUE</code>。 等价地，A和B至少有一个公共点，并且公共点至少位于一个边界内。 对于点/点输入，关系始终为 <code class="varname">FALSE</code>，因为点没有边界。</p><p>In mathematical terms: <span class="emphasis"><em>ST_Touches(A, B) ⇔ (Int(A) ⋂ Int(B) = ∅) ∧ (A ⋂ B ≠ ∅) </em></span></p><p>如果两个几何图形的 DE-9IM 交集矩阵匹配以下之一，则此关系成立：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="markup">FT*******</span></p></li><li class="listitem"><p><span class="markup">F**T*****</span></p></li><li class="listitem"><p><span class="markup">F***T****</span></p></li></ul></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  要避免使用索引，请改用<code class="function"> _ST_Touches</code>。</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 // s2.1.13.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.28</p></div><div class="refsection" id="idm13887"><h2>示例</h2><p><code class="function">ST_Touches </code>谓词在以下示例中返回 <code class="varname">TRUE</code>。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches01.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches02.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches03.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches04.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches05.png"/><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches06.png"/><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POINT</code></p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_Touches('LINESTRING(0 0, 1 1, 0 2)'::geometry, 'POINT(1 1)'::geometry);
 st_touches
------------
 f
(1 row)

SELECT ST_Touches('LINESTRING(0 0, 1 1, 0 2)'::geometry, 'POINT(0 2)'::geometry);
 st_touches
------------
 t
(1 row)</pre></div></div><div class="refentry" id="ST_Within"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Within — 测试 A 的每个点是否都位于 B 中，并且它们的内部是否有一个共同点</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Within</strong>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" id="idm13973"><h2>描述</h2><p>如果几何对象 A 完全包含在几何对象 B 内部（即 A 的所有点都在 B 的内部或边界上），并且 A 和 B 的内部至少有一个公共点，则返回 TRUE。等价地，A 在 B 中，当且仅当 A 的所有点都位于 B 的内部（包括边界），且 A 和 B 的内部至少有一个点重叠。 </p><p>为了使此函数有意义，源几何图形必须具有相同的坐标投影，并具有相同的 SRID。 </p><p>用数学术语来说： <span class="emphasis"><em>ST_Within(A, B) ⇔ (A ⋂ B = A) ∧ (Int(A) ⋂ Int(B) ≠ ∅)</em></span></p><p>内部关系是自反的：每个几何体都在其自身之内。 该关系是反对称的：如果 <code class="code">ST_Within(A,B) = true</code> 且<code class="code"> ST_Within(B,A) = true</code>，则两个几何图形在拓扑上必须相等 (<code class="code">ST_Equals(A,B) = true</code>)。</p><p>ST_Within 与 <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a> 相反。 因此，<code class="code">ST_Within(A,B) = ST_Contains(B,A)</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>因为内部必须有一个公共点，所以定义的一个微妙之处在于，完全位于多边形或线的边界内的线和点<span class="emphasis"><em>不</em></span>在几何内部。 有关更多详细信息，请参阅 <a class="link" href="http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html" target="_top">OGC覆盖、包含、内部的微妙之处</a>。 <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> 谓词提供了更具包容性的关系。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。  要避免使用索引，请使用函数 <code class="function">_ST_Within</code>。</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：对于 2.3.0 几何图形，PIP 短路（仅限于多边形和点的快速判断）已得到增强，以支持由更少点组成的多点。 以前的版本仅支持面和点组合。</p><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="enhanced">增强：3.0.0 启用了对<code class="varname"> GEOMETRYCOLLECTION</code> 的支持</p></td></tr></table></div><div class="important"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Important]" src="images/important.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请勿将此函数用于无效的几何图形。 你会得到意想不到的结果。</p></td></tr></table></div><p>注意：这是返回布尔值而不是整数的“允许”版本。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.2 // s2.1.13.3 - a.Relate(b, 'T*F**F***') </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.30</p></div><div class="refsection" id="idm14011"><h2>示例</h2><pre class="programlisting">--a circle within a circle
SELECT ST_Within(smallc,smallc) As smallinsmall,
  ST_Within(smallc, bigc) As smallinbig,
  ST_Within(bigc,smallc) As biginsmall,
  ST_Within(ST_Union(smallc, bigc), bigc) as unioninbig,
  ST_Within(bigc, ST_Union(smallc, bigc)) as biginunion,
  ST_Equals(bigc, ST_Union(smallc, bigc)) as bigisunion
FROM
(
SELECT ST_Buffer(ST_GeomFromText('POINT(50 50)'), 20) As smallc,
  ST_Buffer(ST_GeomFromText('POINT(50 50)'), 40) As bigc) As foo;
--Result
 smallinsmall | smallinbig | biginsmall | unioninbig | biginunion | bigisunion
--------------+------------+------------+------------+------------+------------
 t            | t          | f          | t          | t          | t
(1 row)
    </pre><p><span class="inlinemediaobject"><img src="images/st_within01.png"/></span> </p></div><div class="refsection" id="idm14018"><h2>相关信息</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a></p></div></div></section><section class="section" id="idm14025"><div class="titlepage"><div><div><h3 class="title">7.11.2. 距离关系</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_3DDWithin">ST_3DDWithin</a></span><span class="refpurpose"> — 测试两个 3D 几何图形是否在给定的 3D 距离内</span></li><li><span class="refentrytitle"><a href="#ST_3DDFullyWithin">ST_3DDFullyWithin</a></span><span class="refpurpose"> — 测试两个 3D 几何图形是否完全在给定的 3D 距离内</span></li><li><span class="refentrytitle"><a href="#ST_DFullyWithin">ST_DFullyWithin</a></span><span class="refpurpose"> — Tests if a geometry is entirely inside a distance of another</span></li><li><span class="refentrytitle"><a href="#ST_DWithin">ST_DWithin</a></span><span class="refpurpose"> — 测试两个几何图形是否在给定距离内</span></li><li><span class="refentrytitle"><a href="#ST_PointInsideCircle">ST_PointInsideCircle</a></span><span class="refpurpose"> — 测试点几何图形是否位于由圆心和半径定义的圆内</span></li></ul></div><div class="refentry" id="ST_3DDWithin"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DDWithin — 测试两个 3D 几何图形是否在给定的 3D 距离内</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_3DDWithin</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, double precision  <var class="pdparam">distance_of_srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm14045"><h2>描述</h2><p>如果两个几何值之间的 3D 距离不大于距离 <code class="varname">distance_of_srid</code>，则返回 true。 距离以几何空间参考系统定义的单位指定。 为了使此函数有意义，源几何图形必须位于同一坐标系中（具有相同的 SRID）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。 </p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM ?</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm14064"><h2>示例</h2><pre class="programlisting">-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (3D point and line compared 2D point and line)
-- Note: currently no vertical datum support so Z is not transformed and assumed to be same units as final.
SELECT ST_3DDWithin(
      ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 4)'),2163),
      ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163),
      126.8
    ) As within_dist_3d,
ST_DWithin(
      ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 4)'),2163),
      ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163),
      126.8
    ) As within_dist_2d;

 within_dist_3d | within_dist_2d
----------------+----------------
 f              | t
</pre></div><div class="refsection" id="idm14067"><h2>相关信息</h2><p><a class="xref" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_3DDFullyWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DDFullyWithin — 测试两个 3D 几何图形是否完全在给定的 3D 距离内</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_3DDFullyWithin</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, double precision  <var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" id="idm14095"><h2>描述</h2><p>如果 3D 几何图形彼此完全在指定距离内，则返回 true。 距离以几何空间参考系统定义的单位指定。 为了使此函数有意义，源几何图形必须具有相同的坐标投影，并具有相同的 SRID。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm14109"><h2>示例</h2><pre class="programlisting">-- This compares the difference between fully within and distance within as well
    -- as the distance fully within for the 2D footprint of the line/point vs. the 3d fully within
    SELECT ST_3DDFullyWithin(geom_a, geom_b, 10) as D3DFullyWithin10, ST_3DDWithin(geom_a, geom_b, 10) as D3DWithin10,
  ST_DFullyWithin(geom_a, geom_b, 20) as D2DFullyWithin20,
  ST_3DDFullyWithin(geom_a, geom_b, 20) as D3DFullyWithin20 from
    (select ST_GeomFromEWKT('POINT(1 1 2)') as geom_a,
    ST_GeomFromEWKT('LINESTRING(1 5 2, 2 7 20, 1 9 100, 14 12 3)') as geom_b) t1;
 d3dfullywithin10 | d3dwithin10 | d2dfullywithin20 | d3dfullywithin20
------------------+-------------+------------------+------------------
 f                | t           | t                | f </pre></div><div class="refsection" id="idm14112"><h2>相关信息</h2><p><a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a></p></div></div><div class="refentry" id="ST_DFullyWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DFullyWithin — Tests if a geometry is entirely inside a distance of another</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_DFullyWithin</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, double precision  <var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" id="idm14137"><h2>描述</h2><p>Returns true if <code class="code">g2</code> is entirely within <code class="code">distance</code> of <code class="code">g1</code>. Visually, the condition is true if <code class="code">g2</code> is contained within a <code class="code">distance</code> buffer of <code class="code">g1</code>. The distance is specified in units defined by the spatial reference system of the geometries.</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能自动包括利用几何上可用的任何空间索引的边界框比较。 </p></td></tr></table></div><p class="availability">可用性：1.1.0</p><p class="changed">Changed: 3.5.0 : the logic behind the function now uses a test of containment within a buffer, rather than the ST_MaxDistance algorithm. Results will differ from prior versions, but should be closer to user expectations.</p></div><div class="refsection" id="idm14150"><h2>示例</h2><pre class="programlisting">SELECT
    ST_DFullyWithin(geom_a, geom_b, 10) AS DFullyWithin10,
    ST_DWithin(geom_a, geom_b, 10) AS DWithin10,
    ST_DFullyWithin(geom_a, geom_b, 20) AS DFullyWithin20
FROM (VALUES
    ('POINT(1 1)', 'LINESTRING(1 5, 2 7, 1 9, 14 12)')
    ) AS v(geom_a, geom_b)

 dfullywithin10 | dwithin10 | dfullywithin20
----------------+-----------+----------------
 f              | t         | t
</pre></div><div class="refsection" id="idm14153"><h2>相关信息</h2><p><a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a></p></div></div><div class="refentry" id="ST_DWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DWithin — 测试两个几何图形是否在给定距离内</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_DWithin</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, double precision  <var class="pdparam">distance_of_srid</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_DWithin</strong>(</code>geography  <var class="pdparam">gg1</var>, geography  <var class="pdparam">gg2</var>, double precision  <var class="pdparam">distance_meters</var>, boolean  <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm14193"><h2>描述</h2><p>如果几何图形在给定距离内，则返回 true</p><p>对于<span class="type">几何图形</span>：距离以几何图形的空间参考系统定义的单位指定。 为了使此函数有意义，源几何图形必须位于同一坐标系中（具有相同的 SRID）。</p><p>对于 <span class="type">地理</span>：单位为米，距离测量默认使用 <code class="varname">use_spheroid = true</code>（使用椭球体）。为了更快的计算，可以使用 <code class="varname">use_spheroid = false</code>，在球面上进行测量。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>将 <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>用于 3D 几何图形。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数调用包括利用几何上可用的任何索引的边界框比较。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p class="availability">可用性：1.5.0 引入了对地理的支持</p><p class="enhanced">增强：2.1.0 提高了地理速度。 有关详细信息，请参阅<a class="link" href="http://blog.opengeo.org/2012/07/12/making-geography-faster/" target="_top">使地理更快</a>。</p><p class="enhanced">增强：2.1.0 引入了对弯曲几何形状的支持。</p><p>在版本1.3之前，通常会将<a class="xref" href="#ST_Expand" title="ST_Expand">ST_Expand</a>与 &amp;&amp; 和ST_Distance一起使用来测试距离，而在1.3.4之前的版本中，该函数使用了这种逻辑。从1.3.4版本开始，ST_DWithin使用更快速的短路距离函数。</p></div><div class="refsection" id="idm14218"><h2>示例</h2><pre class="programlisting">-- Find the nearest hospital to each school
-- that is within 3000 units of the school.
--  We do an ST_DWithin search to utilize indexes to limit our search list
--  that the non-indexable ST_Distance needs to process
-- If the units of the spatial reference is meters then units would be meters
SELECT DISTINCT ON (s.gid) s.gid, s.school_name, s.geom, h.hospital_name
  FROM schools s
    LEFT JOIN hospitals h ON ST_DWithin(s.geom, h.geom, 3000)
  ORDER BY s.gid, ST_Distance(s.geom, h.geom);

-- The schools with no close hospitals
-- Find all schools with no hospital within 3000 units
-- away from the school.  Units is in units of spatial ref (e.g. meters, feet, degrees)
SELECT s.gid, s.school_name
  FROM schools s
    LEFT JOIN hospitals h ON ST_DWithin(s.geom, h.geom, 3000)
  WHERE h.gid IS NULL;

-- Find broadcasting towers that receiver with limited range can receive.
-- Data is geometry in Spherical Mercator (SRID=3857), ranges are approximate.

-- Create geometry index that will check proximity limit of user to tower
CREATE INDEX ON broadcasting_towers using gist (geom);

-- Create geometry index that will check proximity limit of tower to user
CREATE INDEX ON broadcasting_towers using gist (ST_Expand(geom, sending_range));

-- Query towers that 4-kilometer receiver in Minsk Hackerspace can get
-- Note: two conditions, because shorter LEAST(b.sending_range, 4000) will not use index.
SELECT b.tower_id, b.geom
  FROM broadcasting_towers b
  WHERE ST_DWithin(b.geom, 'SRID=3857;POINT(3072163.4 7159374.1)', 4000)
    AND ST_DWithin(b.geom, 'SRID=3857;POINT(3072163.4 7159374.1)', b.sending_range);

        </pre></div><div class="refsection" id="idm14221"><h2>相关信息</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a></p></div></div><div class="refentry" id="ST_PointInsideCircle"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointInsideCircle — 测试点几何图形是否位于由圆心和半径定义的圆内</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_PointInsideCircle</strong>(</code>geometry  <var class="pdparam">a_point</var>, float  <var class="pdparam">center_x</var>, float  <var class="pdparam">center_y</var>, float  <var class="pdparam">radius</var><code>)</code>;</p></div></div><div class="refsection" id="idm14247"><h2>描述</h2><p>如果几何图形是一个点并且位于以 <code class="varname">center_x</code>、<code class="varname">center_y </code>和半径<code class="varname"> radius </code>为圆心的圆内，则返回 true。 </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不使用空间索引。 请改用 <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>。</p></td></tr></table></div><p class="availability">可用性：1.2</p><p class="changed">更改：2.2.0 在之前的版本中，这称为 ST_Point_Inside_Circle</p></div><div class="refsection" id="idm14258"><h2>示例</h2><pre class="programlisting">SELECT ST_PointInsideCircle(ST_Point(1,2), 0.5, 2, 3);
 st_pointinsidecircle
------------------------
 t
</pre></div><div class="refsection" id="idm14261"><h2>相关信息</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a></p></div></div></section></section><section class="section" id="Measurement_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.12. 测量函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数计算距离、面积和角度的测量值。 还有一些函数可以计算由测量确定的几何值。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_Area">ST_Area</a></span><span class="refpurpose"> — 返回多边形几何体的面积。 </span></li><li><span class="refentrytitle"><a href="#ST_Azimuth">ST_Azimuth</a></span><span class="refpurpose"> — 返回两点之间直线的基于北方的方位角。</span></li><li><span class="refentrytitle"><a href="#ST_Angle">ST_Angle</a></span><span class="refpurpose"> — 返回由 3 或 4 个点或 2 条线定义的两个向量之间的角度。</span></li><li><span class="refentrytitle"><a href="#ST_ClosestPoint">ST_ClosestPoint</a></span><span class="refpurpose"> — 返回 g1 上最接近 g2 的 2D 点。 这是从一个几何体到另一个几何体的最短直线的第一个点。</span></li><li><span class="refentrytitle"><a href="#ST_3DClosestPoint">ST_3DClosestPoint</a></span><span class="refpurpose"> — 返回 g1 上最接近 g2 的 3D 点。 这是 3D 最短线的第一个点。 </span></li><li><span class="refentrytitle"><a href="#ST_Distance">ST_Distance</a></span><span class="refpurpose"> — 返回两个几何或地理值之间的距离。</span></li><li><span class="refentrytitle"><a href="#ST_3DDistance">ST_3DDistance</a></span><span class="refpurpose"> — 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。 </span></li><li><span class="refentrytitle"><a href="#ST_DistanceSphere">ST_DistanceSphere</a></span><span class="refpurpose"> — 使用球形地球模型返回两个经度/纬度几何形状之间的最小距离（以米为单位）。 </span></li><li><span class="refentrytitle"><a href="#ST_Distance_Spheroid">ST_DistanceSpheroid</a></span><span class="refpurpose"> — 使用球体模型返回两个经度/纬度几何形状之间的最小距离。</span></li><li><span class="refentrytitle"><a href="#ST_FrechetDistance">ST_FrechetDistance</a></span><span class="refpurpose"> — 返回两个几何图形之间的 Fréchet 距离。</span></li><li><span class="refentrytitle"><a href="#ST_HausdorffDistance">ST_HausdorffDistance</a></span><span class="refpurpose"> — 返回两个几何图形之间的Hausdorff 距离。 </span></li><li><span class="refentrytitle"><a href="#ST_Length">ST_Length</a></span><span class="refpurpose"> — 返回线性几何体的二维长度。</span></li><li><span class="refentrytitle"><a href="#ST_Length2D">ST_Length2D</a></span><span class="refpurpose"> — 返回线性几何体的二维长度。 <code class="varname">ST_Length </code>的别名</span></li><li><span class="refentrytitle"><a href="#ST_3DLength">ST_3DLength</a></span><span class="refpurpose"> — 返回线性几何体的 3D 长度。</span></li><li><span class="refentrytitle"><a href="#ST_Length_Spheroid">ST_LengthSpheroid</a></span><span class="refpurpose"> — 返回椭球体上经度/纬度几何体的 2D 或 3D 长度/周长。</span></li><li><span class="refentrytitle"><a href="#ST_LongestLine">ST_LongestLine</a></span><span class="refpurpose"> — 返回两个几何图形之间的二维最长线。 </span></li><li><span class="refentrytitle"><a href="#ST_3DLongestLine">ST_3DLongestLine</a></span><span class="refpurpose"> — 返回两个几何体之间的 3D 最长直线</span></li><li><span class="refentrytitle"><a href="#ST_MaxDistance">ST_MaxDistance</a></span><span class="refpurpose"> — 返回两个几何图形之间的二维最大距离（以投影单位表示）。</span></li><li><span class="refentrytitle"><a href="#ST_3DMaxDistance">ST_3DMaxDistance</a></span><span class="refpurpose"> — 返回两个几何图形之间的 3D 笛卡尔最大距离（基于空间参考）（以投影单位表示）。 </span></li><li><span class="refentrytitle"><a href="#ST_MinimumClearance">ST_MinimumClearance</a></span><span class="refpurpose"> — 返回几何体的最小间隙，这是几何体稳健性的度量。</span></li><li><span class="refentrytitle"><a href="#ST_MinimumClearanceLine">ST_MinimumClearanceLine</a></span><span class="refpurpose"> — 返回跨越几何体最小间隙的两点线串。</span></li><li><span class="refentrytitle"><a href="#ST_Perimeter">ST_Perimeter</a></span><span class="refpurpose"> — 返回多边形几何或地理的边界长度。</span></li><li><span class="refentrytitle"><a href="#ST_Perimeter2D">ST_Perimeter2D</a></span><span class="refpurpose"> — 返回多边形几何体的 2D 周长。 <code class="varname">ST_Perimeter</code> 的别名。</span></li><li><span class="refentrytitle"><a href="#ST_3DPerimeter">ST_3DPerimeter</a></span><span class="refpurpose"> — 返回多边形几何体的 3D 周长。</span></li><li><span class="refentrytitle"><a href="#ST_ShortestLine">ST_ShortestLine</a></span><span class="refpurpose"> — 返回两个几何图形之间的 2D 最短线</span></li><li><span class="refentrytitle"><a href="#ST_3DShortestLine">ST_3DShortestLine</a></span><span class="refpurpose"> — 返回两个几何图形之间的 3D 最短线</span></li></ul></div><div class="refentry" id="ST_Area"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Area — 返回多边形几何体的面积。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Area</strong>(</code>geometry <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_Area</strong>(</code>geography <var class="pdparam">geog</var>, boolean <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm14291"><h2>描述</h2><p>返回多边形几何体的面积。 对于几何类型，计算 2D 笛卡尔（平面）面积，单位由 SRID 指定。 对于地理类型，默认面积是在球体上确定的，单位为平方米。 要使用更快但精度较低的球形模型计算面积，请使用<code class="varname"> ST_Area(geog,false)</code>。 </p><p class="enhanced">增强：2.0.0 - 引入了对 2D 多面体曲面的支持。</p><p class="enhanced">增强：2.2.0 - 使用 GeographicLib 对球体进行测量，以提高准确性和稳健性。 需要 PROJ 
&gt;= 4.9.0 才能利用新功能。</p><p class="changed">更改：3.0.0 - 不再依赖 SFCGAL。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.1.2, 9.5.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于多面体曲面，仅支持 2D 多面体曲面（不支持 2.5D）。 对于 2.5D，可能会给出非零答案，但仅限于完全位于 XY 平面中的面。</p></td></tr></table></div></div><div class="refsection" id="idm14313"><h2>示例</h2><p>返回马萨诸塞州一块土地的面积（以平方英尺为单位），然后乘以换算得到平方米。 请注意，这是以平方英尺为单位，因为 EPSG:2249 是马萨诸塞州平面英尺 </p><pre class="programlisting">select ST_Area(geom) sqft,
    ST_Area(geom) * 0.3048 ^ 2 sqm
from (
         select 'SRID=2249;POLYGON((743238 2967416,743238 2967450,
                                 743265 2967450,743265.625 2967416,743238 2967416))' :: geometry geom
     ) subquery;
┌─────────┬─────────────┐
│  sqft   │     sqm     │
├─────────┼─────────────┤
│ 928.625 │ 86.27208552 │
└─────────┴─────────────┘
</pre><p>返回面积平方英尺并转换为马萨诸塞州平面米 (EPSG:26986) 以获得平方米。 请注意，单位为平方英尺，因为 2249 是马萨诸塞州平面英尺，变换面积的单位是平方米，因为 EPSG:26986 是马萨诸塞州平面米 </p><pre class="programlisting">select ST_Area(geom) sqft,
    ST_Area(ST_Transform(geom, 26986)) As sqm
from (
         select
             'SRID=2249;POLYGON((743238 2967416,743238 2967450,
             743265 2967450,743265.625 2967416,743238 2967416))' :: geometry geom
     ) subquery;
┌─────────┬─────────────────┐
│  sqft   │       sqm       │
├─────────┼─────────────────┤
│ 928.625 │ 86.272430607008 │
└─────────┴─────────────────┘
</pre><p>使用地理数据类型返回面积平方英尺和平方米。 请注意，我们将几何图形转换为地理图形（在执行此操作之前，请确保您的几何图形位于 WGS 84 长纬度 4326 中）。 地理总是以米为单位。 这只是为了演示比较。 通常您的表将已经存储在地理数据类型中。</p><pre class="programlisting">select ST_Area(geog) / 0.3048 ^ 2 sqft_spheroid,
    ST_Area(geog, false) / 0.3048 ^ 2 sqft_sphere,
    ST_Area(geog) sqm_spheroid
from (
         select ST_Transform(
                    'SRID=2249;POLYGON((743238 2967416,743238 2967450,743265 2967450,743265.625 2967416,743238 2967416))'::geometry,
                    4326
             ) :: geography geog
     ) as subquery;
┌──────────────────┬──────────────────┬──────────────────┐
│  sqft_spheroid   │   sqft_sphere    │   sqm_spheroid   │
├──────────────────┼──────────────────┼──────────────────┤
│ 928.684405784452 │ 927.049336105925 │ 86.2776044979692 │
└──────────────────┴──────────────────┴──────────────────┘
</pre><p>如果您的数据已经是地理数据：</p><pre class="programlisting">select ST_Area(geog) / 0.3048 ^ 2 sqft,
    ST_Area(the_geog) sqm
from somegeogtable;</pre></div><div class="refsection" id="idm14323"><h2>相关信息</h2><p><a class="xref" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_Azimuth"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Azimuth — 返回两点之间直线的基于北方的方位角。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Azimuth</strong>(</code>geometry <var class="pdparam">origin</var>, geometry <var class="pdparam">target</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_Azimuth</strong>(</code>geography <var class="pdparam">origin</var>, geography <var class="pdparam">target</var><code>)</code>;</p></div></div><div class="refsection" id="idm14355"><h2>描述</h2><p>返回目标点距原点的方位角（以弧度为单位）；如果两点重合，则返回 NULL。 方位角是从正 Y 轴（几何）或北子午线（地理）参考的正顺时针角度：北 = 0； 东北=π/4； 东=π/2； 东南=3π/4； 南= π； 西南5π/4； 西=3π/2； 西北 = 7π/4。</p><p>对于地理类型，方位角解决方案被称为<a class="link" href="https://en.wikipedia.org/wiki/Geodesics_on_an_ellipsoid" target="_top">反解大地测量问题</a>。</p><p>方位角是一个数学概念，定义为参考矢量与点之间的角度，角度单位为弧度。 可以使用 PostgreSQL 函数 <code class="varname">Degrees()</code> 将结果值（以弧度表示）转换为度数。</p><p>方位角可与 <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a>结合使用，以沿其垂直轴移动对象。 有关此功能的实现，请参阅 <a class="link" href="http://trac.osgeo.org/postgis/wiki/UsersWikiplpgsqlfunctions" target="_top">PostGIS wiki</a> 中的 <code class="varname">upgis_lineshift()</code> 函数。</p><p class="availability">可用性：1.1.0</p><p class="enhanced">增强：2.0.0 引入了对地理的支持。</p><p class="enhanced">增强：2.2.0使用 GeographicLib 对球体进行测量，以提高准确性和稳健性。 需要 PROJ &gt;= 4.9.0 才能利用新功能。</p></div><div class="refsection" id="idm14369"><h2>示例</h2><p>几何方位角（以度为单位） </p><pre class="programlisting">SELECT degrees(ST_Azimuth( ST_Point(25, 45),  ST_Point(75, 100))) AS degA_B,
       degrees(ST_Azimuth( ST_Point(75, 100), ST_Point(25, 45) )) AS degB_A;

      dega_b       |     degb_a
------------------+------------------
 42.2736890060937 | 222.273689006094
</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_azimuth01.png"/><div class="caption"><p>蓝色：原点(25,45)； 绿色：目标点(75, 100)； 黄色：Y轴或北； 红色：方位角。</p></div></div></div><p>
				</p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_azimuth02.png"/><div class="caption"><p>蓝色：原点(75, 100)； 绿色：目标点(25, 45)； 黄色：Y轴或北； 红色：方位角。</p></div></div></div><p>
				</p></td></tr></tbody></table></div></div><div class="refsection" id="idm14393"><h2>相关信息</h2><p><a class="xref" href="#ST_Angle" title="ST_Angle">ST_Angle</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a>, <a class="xref" href="#ST_Project" title="ST_Project">ST_Project</a>, <a class="link" href="http://www.postgresql.org/docs/current/interactive/functions-math.html" target="_top">PostgreSQL Math Functions</a></p></div></div><div class="refentry" id="ST_Angle"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Angle — 返回由 3 或 4 个点或 2 条线定义的两个向量之间的角度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Angle</strong>(</code>geometry <var class="pdparam">point1</var>, geometry <var class="pdparam">point2</var>, geometry <var class="pdparam">point3</var>, geometry <var class="pdparam">point4</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_Angle</strong>(</code>geometry <var class="pdparam">line1</var>, geometry <var class="pdparam">line2</var><code>)</code>;</p></div></div><div class="refsection" id="idm14431"><h2>描述</h2><p>计算两个向量之间的顺时针角度。 </p><p><span class="bold"><strong>形式 1</strong></span>：计算点 P1-P2-P3 所围成的角度。 如果提供了第四个点则计算角度点 P1-P2 和 P3-P4</p><p><span class="bold"><strong>形式 2</strong></span>：计算两个向量 S1-E1 和 S2-E2 之间的角度，由输入线的起点和终点定义 </p><p>结果是 0 到 2π 弧度之间的正角。 可以使用 PostgreSQL 函数 <code class="varname">Degrees() </code>将弧度结果转换为度数。 </p><p>请注意，<code class="varname">ST_Angle(P1,P2,P3) = ST_Angle(P2,P1,P2,P3)</code>。</p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm14443"><h2>示例</h2><p>三点之间的角度</p><pre class="programlisting">SELECT degrees( ST_Angle('POINT(0 0)', 'POINT(10 10)', 'POINT(20 0)') );

 degrees
---------
     270
</pre><p>由四个点定义的向量之间的角度</p><pre class="programlisting">SELECT degrees( ST_Angle('POINT (10 10)', 'POINT (0 0)', 'POINT(90 90)', 'POINT (100 80)') );

      degrees
-------------------
 269.9999999999999
</pre><p>由线的起点和终点定义的向量之间的角度</p><pre class="programlisting">SELECT degrees( ST_Angle('LINESTRING(0 0, 0.3 0.7, 1 1)', 'LINESTRING(0 0, 0.2 0.5, 1 0)') );

      degrees
--------------
           45
</pre></div><div class="refsection" id="idm14451"><h2>相关信息</h2><p><a class="xref" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a></p></div></div><div class="refentry" id="ST_ClosestPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClosestPoint — 返回 g1 上最接近 g2 的 2D 点。 这是从一个几何体到另一个几何体的最短直线的第一个点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ClosestPoint</strong>(</code>geometry  <var class="pdparam">geom1</var>, geometry  <var class="pdparam">geom2</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_ClosestPoint</strong>(</code>geography  <var class="pdparam">geom1</var>, geography  <var class="pdparam">geom2</var>, boolean  <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm14482"><h2>描述</h2><p>返回 <code class="varname">geom1</code> 上最接近 <code class="varname">geom2 </code>的二维点。 这是几何图形之间最短线的第一个点（由 <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>计算）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您有 3D 几何图形，您可能更喜欢使用 <a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>。</p></td></tr></table></div><p class="enhanced">增强：3.4.0 - 支持地理。</p><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm14493"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_closestpoint01.png"/><div class="caption"><p>Point 和 LineString 的最近点是点本身。 LineString 和 Point 的最近点是线上的点。</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText( ST_ClosestPoint(pt,line)) AS cp_pt_line,
       ST_AsText( ST_ClosestPoint(line,pt)) AS cp_line_pt
    FROM (SELECT 'POINT (160 40)'::geometry AS pt,
                 'LINESTRING (10 30, 50 50, 30 110, 70 90, 180 140, 130 190)'::geometry AS line ) AS t;

   cp_pt_line   |                cp_line_pt
----------------+------------------------------------------
 POINT(160 40)  | POINT(125.75342465753425 115.34246575342466)
</pre><p>
	</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_closestpoint02.png"/><div class="caption"><p>多边形 A 上距离多边形 B 最近的点</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText( ST_ClosestPoint(
                'POLYGON ((190 150, 20 10, 160 70, 190 150))',
                ST_Buffer('POINT(80 160)', 30)        )) As ptwkt;
------------------------------------------
 POINT(131.59149149528952 101.89887534906197)
</pre><p>
	</p></div><div class="refsection" id="idm14511"><h2>相关信息</h2><p><a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>, <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a></p></div></div><div class="refentry" id="ST_3DClosestPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DClosestPoint — 返回 g1 上最接近 g2 的 3D 点。 这是 3D 最短线的第一个点。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DClosestPoint</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm14534"><h2>描述</h2><p>返回 g1 上最接近 g2 的 3 维点。 这是 3D 最短线的第一个点。 3D最短线的3D长度是3D距离。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p class="availability">可用性: 2.0.0</p><p class="changed">更改：2.2.0 - 如果输入 2 个 2D 几何图形，则返回 2D 点（而不是假设缺失 Z 为 0 的旧行为）。 在 2D 和 3D 情况下，对于缺失的 Z，Z 不再被假定为 0。</p></div><div class="refsection" id="idm14547"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td style="border-bottom: 1px solid ; "><p>线串和点——3d 和 2d 最近点 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DClosestPoint(line,pt)) AS cp3d_line_pt,
                ST_AsEWKT(ST_ClosestPoint(line,pt)) As cp2d_line_pt
        FROM (SELECT 'POINT(100 100 30)'::geometry As pt,
                        'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 1000)'::geometry As line
                ) As foo;


 cp3d_line_pt                                                |               cp2d_line_pt
-----------------------------------------------------------+------------------------------------------
 POINT(54.6993798867619 128.935022917228 11.5475869506606) | POINT(73.0769230769231 115.384615384615)
                                        </pre><p>
							  </p></td></tr><tr><td style="border-bottom: 1px solid ; "><p>线串和多点——3d 和 2d 最近点 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DClosestPoint(line,pt)) AS cp3d_line_pt,
                ST_AsEWKT(ST_ClosestPoint(line,pt)) As cp2d_line_pt
        FROM (SELECT 'MULTIPOINT(100 100 30, 50 74 1000)'::geometry As pt,
                        'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 900)'::geometry As line
                ) As foo;


                       cp3d_line_pt                        | cp2d_line_pt
-----------------------------------------------------------+--------------
 POINT(54.6993798867619 128.935022917228 11.5475869506606) | POINT(50 75)
                                        </pre><p>
							  </p></td></tr><tr><td><p>多线串和多边形 3d 和 2d 最近点 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DClosestPoint(poly, mline)) As cp3d,
    ST_AsEWKT(ST_ClosestPoint(poly, mline)) As cp2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
                   cp3d                    |     cp2d
-------------------------------------------+--------------
 POINT(39.993580415989 54.1889925532825 5) | POINT(20 40)
             </pre><p>
							  </p></td></tr></tbody></table></div></div><div class="refsection" id="idm14564"><h2>相关信息</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a></p></div></div><div class="refentry" id="ST_Distance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Distance — 返回两个几何或地理值之间的距离。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Distance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_Distance</strong>(</code>geography  <var class="pdparam">geog1</var>, geography  <var class="pdparam">geog2</var>, boolean  <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm14598"><h2>描述</h2><p>对于<a class="xref" href="#geometry" title="geometry">geometry</a>，返回两个几何之间的最小 2D 笛卡尔（平面）距离，以投影单位（空间参考单位）表示。 </p><p>对于<a class="xref" href="#geography" title="geography">geography</a>，默认返回两个地理位置之间的最小测地距离（以米为单位），在由 SRID 确定的椭球体上进行计算。 如果 <code class="varname">use_spheroid </code>为 false，则使用更快的球面计算。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.23</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p class="availability">可用性：1.5.0 地理支持在 1.5 中引入。 提高了平面的速度，以更好地处理大型或多个顶点几何图形</p><p class="enhanced">增强：2.1.0 提高了地理速度。 有关详细信息，请参阅<a class="link" href="http://boundlessgeo.com/2012/07/making-geography-faster/" target="_top">使地理更快</a>。</p><p class="enhanced">增强：2.1.0 - 引入了对弯曲几何形状的支持。</p><p class="enhanced">增强：2.2.0 - 使用 GeographicLib 对球体进行测量，以提高准确性和稳健性。 需要 PROJ 
&gt;= 4.9.0 才能利用新功能。</p><p class="changed">更改：3.0.0 - 不再依赖 SFCGAL。</p></div><div class="refsection" id="idm14624"><h2>几何示例</h2><p>几何示例 - 平面度数 4326 是 WGS 84 经纬度，单位是度。</p><pre class="programlisting">SELECT ST_Distance(
    'SRID=4326;POINT(-72.1235 42.3521)'::geometry,
    'SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geometry );
-----------------
0.00150567726382282</pre><p>几何示例 - 以米为单位（SRID：3857，与流行网络地图上的像素成比例）。 尽管该值关闭，但可以正确比较附近的值，这使其成为 KNN 或 KMeans 等算法的不错选择。</p><pre class="programlisting">SELECT ST_Distance(
    ST_Transform('SRID=4326;POINT(-72.1235 42.3521)'::geometry, 3857),
    ST_Transform('SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geometry, 3857) );
-----------------
167.441410065196</pre><p>几何示例 - 单位为米（SRID：3857，如上所述，但通过 cos(lat) 进行校正以考虑失真）</p><pre class="programlisting">SELECT ST_Distance(
    ST_Transform('SRID=4326;POINT(-72.1235 42.3521)'::geometry, 3857),
    ST_Transform('SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geometry, 3857)
                ) * cosd(42.3521);
-----------------
123.742351254151</pre><p>几何示例 - 单位为米（SRID：26986 马萨诸塞州平面米）（马萨诸塞州最准确）</p><pre class="programlisting">SELECT ST_Distance(
    ST_Transform('SRID=4326;POINT(-72.1235 42.3521)'::geometry, 26986),
    ST_Transform('SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geometry, 26986) );
-----------------
123.797937878454</pre><p>几何示例 - 单位为米（SRID：2163 美国国家地图集等面积）（最不准确） </p><pre class="programlisting">SELECT ST_Distance(
    ST_Transform('SRID=4326;POINT(-72.1235 42.3521)'::geometry, 2163),
    ST_Transform('SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geometry, 2163) );
------------------
126.664256056812</pre></div><div class="refsection" id="idm14636"><h2>几何示例</h2><p>与几何示例相同，但注意单位为米 - 使用球体进行稍快但不太准确的计算。</p><pre class="programlisting">SELECT ST_Distance(gg1, gg2) As spheroid_dist, ST_Distance(gg1, gg2, false) As sphere_dist
FROM (SELECT
    'SRID=4326;POINT(-72.1235 42.3521)'::geography as gg1,
    'SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geography as gg2
        ) As foo  ;

  spheroid_dist   |   sphere_dist
------------------+------------------
 123.802076746848 | 123.475736916397</pre></div><div class="refsection" id="idm14640"><h2>相关信息</h2><p><a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a>, <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>, <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>, <a class="xref" href="#ST_HausdorffDistance" title="ST_HausdorffDistance">ST_HausdorffDistance</a>, <a class="xref" href="#ST_FrechetDistance" title="ST_FrechetDistance">ST_FrechetDistance</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_3DDistance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DDistance — 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_3DDistance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm14666"><h2>描述</h2><p>返回两个几何图形之间的 3 维最小笛卡尔距离（以投影单位（空间参考单位）表示）。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM ISO/IEC 13249-3</p><p class="availability">可用性: 2.0.0</p><p class="changed">更改：2.2.0 - 在 2D 和 3D 的情况下，对于缺失的 Z，Z 不再被假定为 0。</p><p class="changed">更改：3.0.0 - SFCGAL 版本已删除</p></div><div class="refsection" id="idm14684"><h2>示例</h2><pre class="programlisting">-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (3D point and line compared 2D point and line)
-- Note: currently no vertical datum support so Z is not transformed and assumed to be same units as final.
SELECT ST_3DDistance(
                        ST_Transform('SRID=4326;POINT(-72.1235 42.3521 4)'::geometry,2163),
                        ST_Transform('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'::geometry,2163)
                ) As dist_3d,
                ST_Distance(
                        ST_Transform('SRID=4326;POINT(-72.1235 42.3521)'::geometry,2163),
                        ST_Transform('SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)'::geometry,2163)
                ) As dist_2d;

     dist_3d      |     dist_2d
------------------+-----------------
 127.295059324629 | 126.66425605671
</pre><pre class="programlisting">-- Multilinestring and polygon both 3d and 2d distance
-- Same example as 3D closest point example
SELECT ST_3DDistance(poly, mline) As dist3d,
    ST_Distance(poly, mline) As dist2d
        FROM (SELECT  'POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))'::geometry as poly,
               'MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1), (1 10 2, 5 20 1))'::geometry as mline) as foo;
      dist3d       | dist2d
-------------------+--------
 0.716635696066337 |      0
</pre></div><div class="refsection" id="idm14688"><h2>相关信息</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_DistanceSphere"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DistanceSphere — 使用球形地球模型返回两个经度/纬度几何形状之间的最小距离（以米为单位）。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_DistanceSphere</strong>(</code>geometry  <var class="pdparam">geomlonlatA</var>, geometry  <var class="pdparam">geomlonlatB</var>, float8  <var class="pdparam">radius=6371008</var><code>)</code>;</p></div></div><div class="refsection" id="idm14715"><h2>描述</h2><p>返回两个经度/纬度点之间的最小距离（以米为单位）。 使用球形地球和从 SRID 定义的椭球体导出的半径。 比 <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>更快，但精度较差。 PostGIS 1.5 之前的版本仅针对点实现。</p><p class="availability">可用性：1.5 - 引入了对除点之外的其他几何类型的支持。 之前的版本仅适用于点。</p><p class="changed">更改：2.2.0 在之前的版本中，这曾经被称为 ST_Distance_Sphere</p></div><div class="refsection" id="idm14721"><h2>示例</h2><pre class="programlisting">SELECT round(CAST(ST_DistanceSphere(ST_Centroid(geom), ST_GeomFromText('POINT(-118 38)',4326)) As numeric),2) As dist_meters,
round(CAST(ST_Distance(ST_Transform(ST_Centroid(geom),32611),
                ST_Transform(ST_GeomFromText('POINT(-118 38)', 4326),32611)) As numeric),2) As dist_utm11_meters,
round(CAST(ST_Distance(ST_Centroid(geom), ST_GeomFromText('POINT(-118 38)', 4326)) As numeric),5) As dist_degrees,
round(CAST(ST_Distance(ST_Transform(geom,32611),
                ST_Transform(ST_GeomFromText('POINT(-118 38)', 4326),32611)) As numeric),2) As min_dist_line_point_meters
FROM
        (SELECT ST_GeomFromText('LINESTRING(-118.584 38.374,-118.583 38.5)', 4326) As geom) as foo;
         dist_meters | dist_utm11_meters | dist_degrees | min_dist_line_point_meters
        -------------+-------------------+--------------+----------------------------
                70424.47 |          70438.00 |      0.72900 |                   65871.18

        </pre></div><div class="refsection" id="idm14724"><h2>相关信息</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a></p></div></div><div class="refentry" id="ST_Distance_Spheroid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DistanceSpheroid — 使用球体模型返回两个经度/纬度几何形状之间的最小距离。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_DistanceSpheroid</strong>(</code>geometry  <var class="pdparam">geomlonlatA</var>, geometry  <var class="pdparam">geomlonlatB</var>, spheroid <var class="pdparam">measurement_spheroid=WGS84</var><code>)</code>;</p></div></div><div class="refsection" id="idm14747"><h2>描述</h2><p>返回给定特定球体的两个经度/纬度几何形状之间的最小距离（以米为单位）。 请参阅 <a class="xref" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a>给出的椭球体的解释。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不查看几何体的 SRID。 它假设几何坐标基于提供的球体。 </p></td></tr></table></div><p class="availability">可用性：1.5 - 引入了对除点之外的其他几何类型的支持。 之前的版本仅适用于点。</p><p class="changed">更改：2.2.0 在之前的版本中，这称为 ST_Distance_Spheroid</p></div><div class="refsection" id="idm14755"><h2>示例</h2><pre class="programlisting">SELECT round(CAST(
                ST_DistanceSpheroid(ST_Centroid(geom), ST_GeomFromText('POINT(-118 38)',4326), 'SPHEROID["WGS 84",6378137,298.257223563]')
                        As numeric),2) As dist_meters_spheroid,
                round(CAST(ST_DistanceSphere(ST_Centroid(geom), ST_GeomFromText('POINT(-118 38)',4326)) As numeric),2) As dist_meters_sphere,
round(CAST(ST_Distance(ST_Transform(ST_Centroid(geom),32611),
                ST_Transform(ST_GeomFromText('POINT(-118 38)', 4326),32611)) As numeric),2) As dist_utm11_meters
FROM
        (SELECT ST_GeomFromText('LINESTRING(-118.584 38.374,-118.583 38.5)', 4326) As geom) as foo;
 dist_meters_spheroid | dist_meters_sphere | dist_utm11_meters
----------------------+--------------------+-------------------
                         70454.92 |           70424.47 |          70438.00

        </pre></div><div class="refsection" id="idm14758"><h2>相关信息</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a></p></div></div><div class="refentry" id="ST_FrechetDistance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_FrechetDistance — 返回两个几何图形之间的 Fréchet 距离。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_FrechetDistance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, float <var class="pdparam">densifyFrac = -1</var><code>)</code>;</p></div></div><div class="refsection" id="idm14781"><h2>描述</h2><p>基于<a class="link" href="http://www.kr.tuwien.ac.at/staff/eiter/et-archive/cdtr9464.pdf" target="_top">计算离散 Fréchet 距离</a>，实现计算仅限于两个几何图形的离散点的 Fréchet 距离的算法。 Fréchet 距离是曲线之间相似性的度量，考虑了曲线上点的位置和顺序。 因此它通常比 Hausdorff 距离更好。 </p><p>当指定可选的 densifyFrac 时，该函数在计算离散 Fréchet 距离之前执行分段致密化。 densifyFrac 参数设置用于致密每个段的分数。 每个段将被分成多个等长的子段，其总长度的分数最接近给定的分数。 </p><p>单位采用几何空间参考系的单位。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>当前的实现仅支持顶点作为离散位置。 这可以扩展到允许使用任意密度的点。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>我们指定的 densifyFrac 越小，我们获得的 Fréchet 距离就越准确。 但是，计算时间和内存使用量随着子段数量的平方而增加。 </p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.4.0 - 需要 GEOS &gt;= 3.7.0</p></div><div class="refsection" id="idm14793"><h2>示例</h2><pre class="programlisting">postgres=# SELECT st_frechetdistance('LINESTRING (0 0, 100 0)'::geometry, 'LINESTRING (0 0, 50 50, 100 0)'::geometry);
 st_frechetdistance
--------------------
   70.7106781186548
(1 row)
                        </pre><pre class="programlisting">SELECT st_frechetdistance('LINESTRING (0 0, 100 0)'::geometry, 'LINESTRING (0 0, 50 50, 100 0)'::geometry, 0.5);
 st_frechetdistance
--------------------
                 50
(1 row)
                        </pre></div><div class="refsection" id="idm14797"><h2>相关信息</h2><p><a class="xref" href="#ST_HausdorffDistance" title="ST_HausdorffDistance">ST_HausdorffDistance</a></p></div></div><div class="refentry" id="ST_HausdorffDistance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HausdorffDistance — 返回两个几何图形之间的Hausdorff 距离。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_HausdorffDistance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_HausdorffDistance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var>, float <var class="pdparam">densifyFrac</var><code>)</code>;</p></div></div><div class="refsection" id="idm14828"><h2>描述</h2><p>返回两个几何图形之间的<a class="link" href="http://en.wikipedia.org/wiki/Hausdorff_distance" target="_top">Hausdorff距离</a>。 Hausdorff距离是对 2 个几何形状相似或不相似程度的度量。 </p><p>该函数实际上计算“离散Hausdorff距离”。 这是在几何上的离散点计算的Hausdorff距离。 可以指定<em class="parameter"><code> densifyFrac </code></em>参数，以便在计算离散 Hausdorff 距离之前通过致密分段来提供更准确的答案。 每个段被分成多个等长的子段，其段长度的分数最接近给定的分数。 </p><p>单位采用几何空间参考系的单位。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该算法不等同于标准 Hausdorff距离。 然而，它计算出的近似值对于大部分有用案例都是正确的。 一种重要的情况是线串彼此大致平行且长度大致相等。 这是线路匹配的有用指标。 </p></td></tr></table></div><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm14838"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_hausdorffdistance01.png"/><div class="caption"><p>两条线之间的Hausdorff距离（红色）和距离（黄色） </p></div></div></div><pre class="programlisting">SELECT ST_HausdorffDistance(geomA, geomB),
       ST_Distance(geomA, geomB)
    FROM (SELECT 'LINESTRING (20 70, 70 60, 110 70, 170 70)'::geometry AS geomA,
                 'LINESTRING (20 90, 130 90, 60 100, 190 100)'::geometry AS geomB) AS t;
 st_hausdorffdistance | st_distance
----------------------+-------------
    37.26206567625497 |          20
</pre><p><span class="bold"><strong>示例：</strong></span>致密化的Hausdorff 距离。</p><pre class="programlisting">SELECT ST_HausdorffDistance(
            'LINESTRING (130 0, 0 0, 0 150)'::geometry,
            'LINESTRING (10 10, 10 150, 130 10)'::geometry,
            0.5);
 ----------------------
          70
</pre><p><span class="bold"><strong>示例：</strong></span>对于每个建筑物，找到最能代表它的地块。 首先，我们要求地块与建筑物几何图形相交。 <code class="code">DISTINCT ON</code> 保证我们每栋建筑仅列出一次。 <code class="code">ORDER BY .. ST_HausdorffDistance</code> 选择与建筑物最相似的地块。</p><pre class="programlisting">SELECT DISTINCT ON (buildings.gid) buildings.gid, parcels.parcel_id
   FROM buildings
       INNER JOIN parcels
       ON ST_Intersects(buildings.geom, parcels.geom)
   ORDER BY buildings.gid, ST_HausdorffDistance(buildings.geom, parcels.geom);
</pre></div><div class="refsection" id="idm14855"><h2>相关信息</h2><p><a class="xref" href="#ST_FrechetDistance" title="ST_FrechetDistance">ST_FrechetDistance</a></p></div></div><div class="refentry" id="ST_Length"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Length — 返回线性几何体的二维长度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Length</strong>(</code>geometry <var class="pdparam">a_2dlinestring</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_Length</strong>(</code>geography <var class="pdparam">geog</var>, boolean <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm14880"><h2>描述</h2><p>对于几何类型：如果几何是 LineString、MultiLineString、ST_Curve、ST_MultiCurve，则返回几何的 2D 笛卡尔长度。 对于面积几何形状，返回 0； 请改用 <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>。 长度单位由几何的空间参考系确定。</p><p>对于地理类型：使用逆测地线计算来执行计算。 长度单位为米。 如果PostGIS是使用PROJ版本4.8.0或更高版本编译的，则椭球体由SRID指定，否则它是WGS84独有的。 如果<code class="varname"> use_spheroid = false</code>，则计算基于球体而不是椭球体。 </p><p>目前对于几何体，这是 ST_Length2D 的别名，但这可能会更改以支持更高的维度。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：2.0.0 重大更改 - 在之前的版本中，将此应用于地理类型的多/多边形将为您提供多边形/多多边形的周长。 在 2.0.0 中，这已更改为返回 0 以符合几何行为。 如果您想要多边形的周长，请使用 ST_Perimeter</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于地理，计算默认使用球体模型。 要使用更快但不太准确的球面计算，请使用 ST_Length(gg,false);</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 7.1.2, 9.3.4</p><p class="availability">可用性：1.5.0 地理支持在 1.5 中引入。</p></div><div class="refsection" id="idm14901"><h2>几何示例</h2><p>返回线串的长度（以英尺为单位）。 请注意，单位为英尺，因为 EPSG:2249 是马萨诸塞州平面英尺</p><pre class="programlisting">SELECT ST_Length(ST_GeomFromText('LINESTRING(743238 2967416,743238 2967450,743265 2967450,
743265.625 2967416,743238 2967416)',2249));

st_length
---------
 122.630744000095


--Transforming WGS 84 LineString to Massachusetts state plane meters
SELECT ST_Length(
        ST_Transform(
                ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45, -72.1240 42.45666, -72.123 42.1546)'),
                26986
        )
);

st_length
---------
34309.4563576191
                        </pre></div><div class="refsection" id="idm14905"><h2>几何示例</h2><p>WGS 84 地理线返回长度</p><pre class="programlisting">-- the default calculation uses a spheroid
SELECT ST_Length(the_geog) As length_spheroid,  ST_Length(the_geog,false) As length_sphere
FROM (SELECT ST_GeographyFromText(
'SRID=4326;LINESTRING(-72.1260 42.45, -72.1240 42.45666, -72.123 42.1546)') As the_geog)
 As foo;

 length_spheroid  |  length_sphere
------------------+------------------
 34310.5703627288 | 34346.2060960742
                        </pre></div><div class="refsection" id="idm14909"><h2>相关信息</h2><p><a class="xref" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a>, <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_Length2D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Length2D — 返回线性几何体的二维长度。 <code class="varname">ST_Length </code>的别名</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Length2D</strong>(</code>geometry  <var class="pdparam">a_2dlinestring</var><code>)</code>;</p></div></div><div class="refsection" id="idm14930"><h2>描述</h2><p>如果几何图形是线串或多线串，则返回几何图形的 2D 长度。 这是<code class="varname"> ST_Length </code>的别名</p></div><div class="refsection" id="idm14934"><h2>相关信息</h2><p><a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a></p></div></div><div class="refentry" id="ST_3DLength"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DLength — 返回线性几何体的 3D 长度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_3DLength</strong>(</code>geometry  <var class="pdparam">a_3dlinestring</var><code>)</code>;</p></div></div><div class="refsection" id="idm14951"><h2>描述</h2><p>如果几何体是 LineString 或 MultiLineString，则返回几何体的 3 维或 2 维长度。 对于二维线，它将仅返回二维长度（与 ST_Length 和 ST_Length2D 相同）</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 7.1, 10.3</p><p class="changed">更改：2.0.0 在之前的版本中，这曾经被称为 ST_Length3D</p></div><div class="refsection" id="idm14963"><h2>示例</h2><p>返回 3D 电缆的长度（以英尺为单位）。 请注意，单位为英尺，因为 EPSG:2249 是马萨诸塞州平面英尺</p><pre class="programlisting">SELECT ST_3DLength(ST_GeomFromText('LINESTRING(743238 2967416 1,743238 2967450 1,743265 2967450 3,
743265.625 2967416 3,743238 2967416 3)',2249));
ST_3DLength
-----------
122.704716741457
                </pre></div><div class="refsection" id="idm14967"><h2>相关信息</h2><p><a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_Length2D" title="ST_Length2D">ST_Length2D</a></p></div></div><div class="refentry" id="ST_Length_Spheroid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LengthSpheroid — 返回椭球体上经度/纬度几何体的 2D 或 3D 长度/周长。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_LengthSpheroid</strong>(</code>geometry  <var class="pdparam">a_geometry</var>, spheroid  <var class="pdparam">a_spheroid</var><code>)</code>;</p></div></div><div class="refsection" id="idm14987"><h2>描述</h2><p>返回椭球体面上几何图形的周长。 当几何图形的坐标为经度/纬度并且您希望查找没有投影的长度时，请使用此函数。椭球体由文本值指定，如下所示：</p><div class="literallayout"><p><br/>
SPHEROID[&lt;NAME<br/>
&gt;,&lt;SEMI-MAJOR AXIS<br/>
&gt;,&lt;INVERSE FLATTENING<br/>
&gt;]<br/>
 </p></div><p>例如：</p><div class="literallayout"><p>SPHEROID["GRS_1980",6378137,298.257222101]</p></div><p class="availability">可用性：1.2.2</p><p class="changed">更改：2.2.0 在之前的版本中，这称为 ST_Length_Spheroid 并具有别名 ST_3DLength_Spheroid</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm14999"><h2>示例</h2><pre class="programlisting">SELECT ST_LengthSpheroid( geometry_column,
                          'SPHEROID["GRS_1980",6378137,298.257222101]' )
                          FROM geometry_table;

SELECT ST_LengthSpheroid( geom, sph_m ) As tot_len,
ST_LengthSpheroid(ST_GeometryN(geom,1), sph_m) As len_line1,
ST_LengthSpheroid(ST_GeometryN(geom,2), sph_m) As len_line2
                          FROM (SELECT ST_GeomFromText('MULTILINESTRING((-118.584 38.374,-118.583 38.5),
        (-71.05957 42.3589 , -71.061 43))') As geom,
CAST('SPHEROID["GRS_1980",6378137,298.257222101]' As spheroid) As sph_m)  as foo;
        tot_len      |    len_line1     |    len_line2
------------------+------------------+------------------
 85204.5207562955 | 13986.8725229309 | 71217.6482333646

 --3D
SELECT ST_LengthSpheroid( geom, sph_m ) As tot_len,
ST_LengthSpheroid(ST_GeometryN(geom,1), sph_m) As len_line1,
ST_LengthSpheroid(ST_GeometryN(geom,2), sph_m) As len_line2
                          FROM (SELECT ST_GeomFromEWKT('MULTILINESTRING((-118.584 38.374 20,-118.583 38.5 30),
        (-71.05957 42.3589 75, -71.061 43 90))') As geom,
CAST('SPHEROID["GRS_1980",6378137,298.257222101]' As spheroid) As sph_m)  as foo;

         tot_len      |    len_line1    |    len_line2
------------------+-----------------+------------------
 85204.5259107402 | 13986.876097711 | 71217.6498130292

</pre></div><div class="refsection" id="idm15002"><h2>相关信息</h2><p><a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a></p></div></div><div class="refentry" id="ST_LongestLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LongestLine — 返回两个几何图形之间的二维最长线。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LongestLine</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm15022"><h2>描述</h2><p>返回两个几何点之间的二维最长线。 返回的行从<code class="varname"> g1 </code>开始，到<code class="varname"> g2 </code>结束。 </p><p>最长的线总是出现在两个顶点之间。 如果找到多个线，该函数将返回第一个最长的线。 直线的长度等于 <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a> 返回的距离。 </p><p>如果 g1 和 g2 是相同的几何体，则返回几何体中相距最远的两个顶点之间的线。 直线的端点位于<a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a> 计算的圆上。 </p><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm15032"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_longestline01.png"/><div class="caption"><p>点和线之间最长的线</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText( ST_LongestLine(
        'POINT (160 40)',
        'LINESTRING (10 30, 50 50, 30 110, 70 90, 180 140, 130 190)' )
        ) AS lline;
-----------------
LINESTRING(160 40,130 190)
</pre><p>
	</p><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_longestline02.png"/><div class="caption"><p>两个多边形之间最长的线</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText( ST_LongestLine(
        'POLYGON ((190 150, 20 10, 160 70, 190 150))',
        ST_Buffer('POINT(80 160)', 30)
            ) ) AS llinewkt;
-----------------
LINESTRING(20 10,105.3073372946034 186.95518130045156)
</pre><p>
	</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_longestline03.png"/><div class="caption"><p>跨单个几何体的最长线。 线的长度等于最大距离。 线的端点位于最小边界圆上。</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText( ST_LongestLine( geom, geom)) AS llinewkt,
                  ST_MaxDistance( geom, geom) AS max_dist,
                  ST_Length( ST_LongestLine(geom, geom)) AS lenll
FROM (SELECT 'POLYGON ((40 180, 110 160, 180 180, 180 120, 140 90, 160 40, 80 10, 70 40, 20 50, 40 180),
              (60 140, 99 77.5, 90 140, 60 140))'::geometry AS geom) AS t;

         llinewkt          |      max_dist      |       lenll
---------------------------+--------------------+--------------------
 LINESTRING(20 50,180 180) | 206.15528128088303 | 206.15528128088303
</pre><p>
	</p></div><div class="refsection" id="idm15058"><h2>相关信息</h2><p><a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>, <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>, <a class="xref" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a>, <a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a></p></div></div><div class="refentry" id="ST_3DLongestLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DLongestLine — 返回两个几何体之间的 3D 最长直线</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DLongestLine</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm15080"><h2>描述</h2><p>返回两个几何图形之间的 3 维最长直线。 如果有多个线，该函数将返回第一个最长的线。 返回的行以 g1 开始，以 g2 结束。 线的 3D 长度等于 <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> 返回的距离。 </p><p class="availability">可用性: 2.0.0</p><p class="changed">更改：2.2.0 - 如果输入 2 个 2D 几何图形，则返回 2D 点（而不是假设缺失 Z 为 0 的旧行为）。 在 2D 和 3D 情况下，对于缺失的 Z，Z 不再被假定为 0。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm15094"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td style="border-bottom: 1px solid ; "><p>linestring和point——3d 和 2d 最长的线 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DLongestLine(line,pt)) AS lol3d_line_pt,
                ST_AsEWKT(ST_LongestLine(line,pt)) As lol2d_line_pt
        FROM (SELECT 'POINT(100 100 30)'::geometry As pt,
                        'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 1000)'::geometry As line
                ) As foo;


           lol3d_line_pt           |       lol2d_line_pt
-----------------------------------+----------------------------
 LINESTRING(50 75 1000,100 100 30) | LINESTRING(98 190,100 100)
                                        </pre><p>
							  </p></td></tr><tr><td style="border-bottom: 1px solid ; "><p>linestring和multipoint——3d 和 2d 最长线 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DLongestLine(line,pt)) AS lol3d_line_pt,
                ST_AsEWKT(ST_LongestLine(line,pt)) As lol2d_line_pt
        FROM (SELECT 'MULTIPOINT(100 100 30, 50 74 1000)'::geometry As pt,
                        'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 900)'::geometry As line
                ) As foo;


          lol3d_line_pt          |      lol2d_line_pt
---------------------------------+--------------------------
 LINESTRING(98 190 1,50 74 1000) | LINESTRING(98 190,50 74)
                                        </pre><p>
							  </p></td></tr><tr><td><p>MultiLineString 和 Polygon - 3d 和 2d 最长的线 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DLongestLine(poly, mline)) As lol3d,
    ST_AsEWKT(ST_LongestLine(poly, mline)) As lol2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
            lol3d             |          lol2d
------------------------------+--------------------------
 LINESTRING(175 150 5,1 10 2) | LINESTRING(175 150,1 10)
             </pre><p>
							  </p></td></tr></tbody></table></div></div><div class="refsection" id="idm15111"><h2>相关信息</h2><p><a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a></p></div></div><div class="refentry" id="ST_MaxDistance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MaxDistance — 返回两个几何图形之间的二维最大距离（以投影单位表示）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_MaxDistance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm15134"><h2>描述</h2><p>返回两个几何图形之间的二维最大距离（以投影单位表示）。 最大距离总是出现在两个顶点之间。 这是 <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a> 返回的线的长度。 </p><p>如果 g1 和 g2 是相同的几何体，则返回该几何体中相距最远的两个顶点之间的距离。 </p><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm15140"><h2>示例</h2><p>点与线之间的最大距离。</p><pre class="programlisting">SELECT ST_MaxDistance('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
-----------------
 2

SELECT ST_MaxDistance('POINT(0 0)'::geometry, 'LINESTRING ( 2 2, 2 2 )'::geometry);
------------------
 2.82842712474619
</pre><p>单个几何体顶点之间的最大距离。</p><pre class="programlisting">SELECT ST_MaxDistance('POLYGON ((10 10, 10 0, 0 0, 10 10))'::geometry,
                      'POLYGON ((10 10, 10 0, 0 0, 10 10))'::geometry);
------------------
 14.142135623730951
</pre></div><div class="refsection" id="idm15146"><h2>相关信息</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a></p></div></div><div class="refentry" id="ST_3DMaxDistance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DMaxDistance — 返回两个几何图形之间的 3D 笛卡尔最大距离（基于空间参考）（以投影单位表示）。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_3DMaxDistance</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm15167"><h2>描述</h2><p>返回两个几何图形之间的 3 维最大笛卡尔距离（以投影单位（空间参考单位）表示）。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p class="availability">可用性: 2.0.0</p><p class="changed">更改：2.2.0 - 在 2D 和 3D 的情况下，对于缺失的 Z，Z 不再被假定为 0。</p></div><div class="refsection" id="idm15180"><h2>示例</h2><pre class="programlisting">-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (3D point and line compared 2D point and line)
-- Note: currently no vertical datum support so Z is not transformed and assumed to be same units as final.
SELECT ST_3DMaxDistance(
                        ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 10000)'),2163),
                        ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163)
                ) As dist_3d,
                ST_MaxDistance(
                        ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 10000)'),2163),
                        ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163)
                ) As dist_2d;

     dist_3d      |     dist_2d
------------------+------------------
 24383.7467488441 | 22247.8472107251
</pre></div><div class="refsection" id="idm15183"><h2>相关信息</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="ST_MinimumClearance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinimumClearance — 返回几何体的最小间隙，这是几何体稳健性的度量。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_MinimumClearance</strong>(</code>geometry <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm15202"><h2>描述</h2><p>几何图形有可能满足 <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>（多边形）或 <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>（线）的有效性标准，但如果其顶点之一是无效的，则该几何图形将变得无效。 移动了一小段距离。 发生这种情况的原因可能是转换为文本格式（例如 WKT、KML、GML、GeoJSON）或不使用双精度浮点坐标的二进制格式（例如 MapInfo TAB）期间的精度损失。 </p><p>最小间隙是几何形状对坐标精度变化的稳健性的定量测量。 它是在不创建无效几何体的情况下可以移动几何体顶点的最大距离。 最小间隙值越大，表明稳健性越好。 </p><p>如果几何形状的最小间隙为 <code class="varname">e</code>，则： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>几何中没有两个不同的顶点比距离<code class="varname">e</code>更近。 </p></li><li class="listitem"><p>没有顶点比 <code class="varname">e</code> 更接近它不是端点的线段。 </p></li></ul></div><p>
		</p><p>如果几何体不存在最小间隙（例如，单个点或点相同的多点），则返回值为<code class="varname">Infinity</code>。 </p><p>为了避免精度损失导致的有效性问题，<a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> 可以降低坐标精度，同时确保多边形几何保持有效。 </p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm15222"><h2>示例</h2><pre class="programlisting">SELECT ST_MinimumClearance('POLYGON ((0 0, 1 0, 1 1, 0.5 3.2e-4, 0 0))');
 st_minimumclearance
---------------------
             0.00032
     </pre></div><div class="refsection" id="idm15225"><h2>相关信息</h2><p><a class="xref" href="#ST_MinimumClearanceLine" title="ST_MinimumClearanceLine">ST_MinimumClearanceLine</a>, <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> </p></div></div><div class="refentry" id="ST_MinimumClearanceLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinimumClearanceLine — 返回跨越几何体最小间隙的两点线串。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">Geometry <strong class="fsfunc">ST_MinimumClearanceLine</strong>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm15244"><h2>描述</h2><p>返回跨越几何体最小间隙的两点线串。 如果几何图形没有最小间隙，则返回<code class="varname"> LINESTRING EMPTY</code>。 </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.3.0-需要GEOS &gt;= 3.6.0</p></div><div class="refsection" id="idm15250"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_MinimumClearanceLine('POLYGON ((0 0, 1 0, 1 1, 0.5 3.2e-4, 0 0))'));
-------------------------------
LINESTRING(0.5 0.00032,0.5 0)
                  </pre></div><div class="refsection" id="idm15253"><h2>相关信息</h2><p><a class="xref" href="#ST_MinimumClearance" title="ST_MinimumClearance">ST_MinimumClearance</a></p></div></div><div class="refentry" id="ST_Perimeter"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Perimeter — 返回多边形几何或地理的边界长度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Perimeter</strong>(</code>geometry <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">float <strong class="fsfunc">ST_Perimeter</strong>(</code>geography <var class="pdparam">geog</var>, boolean <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm15278"><h2>描述</h2><p>如果几何/地理是 ST_Surface、ST_MultiSurface（Polygon、MultiPolygon），则返回其 2D 周长。 对于非区域几何形状返回 0。 对于线性几何形状，请使用<a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>。 对于几何类型，周长测量的单位由几何的空间参考系统指定。</p><p>对于地理类型，使用逆测地线问题执行计算，其中周长单位为米。 如果PostGIS是使用PROJ版本4.8.0或更高版本编译的，则椭球体由SRID指定，否则它是WGS84独有的。 如果<code class="varname">use_spheroid = false</code>，则计算将近似为球体而不是椭球体。</p><p>目前，这是 ST_Perimeter2D 的别名，但可能会更改以支持更高的维度。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.1.3, 9.5.4</p><p class="availability">可用性 2.0.0：引入了对地理的支持</p></div><div class="refsection" id="idm15295"><h2>示例：几何</h2><p>返回多边形和多重多边形的周长（以英尺为单位）。 请注意，单位为英尺，因为 EPSG:2249 是马萨诸塞州平面英尺</p><pre class="programlisting">SELECT ST_Perimeter(ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,743265 2967450,
743265.625 2967416,743238 2967416))', 2249));
st_perimeter
---------
 122.630744000095
(1 row)

SELECT ST_Perimeter(ST_GeomFromText('MULTIPOLYGON(((763104.471273676 2949418.44119003,
763104.477769673 2949418.42538203,
763104.189609677 2949418.22343004,763104.471273676 2949418.44119003)),
((763104.471273676 2949418.44119003,763095.804579742 2949436.33850239,
763086.132105649 2949451.46730207,763078.452329651 2949462.11549407,
763075.354136904 2949466.17407812,763064.362142565 2949477.64291974,
763059.953961626 2949481.28983009,762994.637609571 2949532.04103014,
762990.568508415 2949535.06640477,762986.710889563 2949539.61421415,
763117.237897679 2949709.50493431,763235.236617789 2949617.95619822,
763287.718121842 2949562.20592617,763111.553321674 2949423.91664605,
763104.471273676 2949418.44119003)))', 2249));
st_perimeter
---------
 845.227713366825
(1 row)
                        </pre></div><div class="refsection" id="idm15299"><h2>示例：地理</h2><p>返回多边形和多重多边形的周长（以米和英尺为单位）。 请注意，这是地理（WGS 84 经纬度）</p><pre class="programlisting">SELECT  ST_Perimeter(geog) As per_meters, ST_Perimeter(geog)/0.3048 As per_ft
FROM ST_GeogFromText('POLYGON((-71.1776848522251 42.3902896512902,-71.1776843766326 42.3903829478009,
-71.1775844305465 42.3903826677917,-71.1775825927231 42.3902893647987,-71.1776848522251 42.3902896512902))') As geog;

   per_meters    |      per_ft
-----------------+------------------
37.3790462565251 | 122.634666195949


-- MultiPolygon example --
SELECT  ST_Perimeter(geog) As per_meters, ST_Perimeter(geog,false) As per_sphere_meters,  ST_Perimeter(geog)/0.3048 As per_ft
FROM ST_GeogFromText('MULTIPOLYGON(((-71.1044543107478 42.340674480411,-71.1044542869917 42.3406744369506,
-71.1044553562977 42.340673886454,-71.1044543107478 42.340674480411)),
((-71.1044543107478 42.340674480411,-71.1044860600303 42.3407237015564,-71.1045215770124 42.3407653385914,
-71.1045498002983 42.3407946553165,-71.1045611902745 42.3408058316308,-71.1046016507427 42.340837442371,
-71.104617893173 42.3408475056957,-71.1048586153981 42.3409875993595,-71.1048736143677 42.3409959528211,
-71.1048878050242 42.3410084812078,-71.1044020965803 42.3414730072048,
-71.1039672113619 42.3412202916693,-71.1037740497748 42.3410666421308,
-71.1044280218456 42.3406894151355,-71.1044543107478 42.340674480411)))') As geog;

    per_meters    | per_sphere_meters |      per_ft
------------------+-------------------+------------------
 257.634283683311 |  257.412311446337 | 845.256836231335
                        </pre></div><div class="refsection" id="idm15303"><h2>相关信息</h2><p><a class="xref" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a></p></div></div><div class="refentry" id="ST_Perimeter2D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Perimeter2D — 返回多边形几何体的 2D 周长。 <code class="varname">ST_Perimeter</code> 的别名。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Perimeter2D</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm15322"><h2>描述</h2><p>返回多边形几何体的二维周长。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>目前这是 ST_Perimeter 的别名。 在未来版本中，ST_Perimeter 可能会返回几何图形的最高维度周长。 这个还在考虑中</p></td></tr></table></div></div><div class="refsection" id="idm15327"><h2>相关信息</h2><p><a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a></p></div></div><div class="refentry" id="ST_3DPerimeter"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DPerimeter — 返回多边形几何体的 3D 周长。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_3DPerimeter</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm15343"><h2>描述</h2><p>如果几何体是多边形或多多边形，则返回几何体的 3三维周长。 如果几何图形是二维的，则返回二维周长。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM ISO/IEC 13249-3: 8.1, 10.5</p><p class="changed">更改：2.0.0 在之前的版本中，这曾经被称为 ST_Perimeter3D</p></div><div class="refsection" id="idm15355"><h2>示例</h2><p>马萨诸塞州飞机英尺空中稍高的多边形的周长</p><pre class="programlisting">SELECT ST_3DPerimeter(geom), ST_Perimeter2d(geom), ST_Perimeter(geom) FROM
                        (SELECT ST_GeomFromEWKT('SRID=2249;POLYGON((743238 2967416 2,743238 2967450 1,
743265.625 2967416 1,743238 2967416 2))') As geom) As foo;

  ST_3DPerimeter  |  st_perimeter2d  |   st_perimeter
------------------+------------------+------------------
 105.465793597674 | 105.432997272188 | 105.432997272188

</pre></div><div class="refsection" id="idm15359"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>, <a class="xref" href="#ST_Perimeter2D" title="ST_Perimeter2D">ST_Perimeter2D</a></p></div></div><div class="refentry" id="ST_ShortestLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ShortestLine — 返回两个几何图形之间的 2D 最短线</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ShortestLine</strong>(</code>geometry  <var class="pdparam">geom1</var>, geometry  <var class="pdparam">geom2</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_ShortestLine</strong>(</code>geography  <var class="pdparam">geom1</var>, geography  <var class="pdparam">geom2</var>, boolean <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm15392"><h2>描述</h2><p>返回两个几何图形之间的二维最短线。 返回的线从 <code class="varname">geom1</code> 开始，到 <code class="varname">geom2</code> 结束。 如果<code class="varname">geom1</code>和<code class="varname">geom2</code>相交，结果是一条起点和终点位于交点的线。 线的长度与 g1 和 g2 的 <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a> 返回的长度相同。 </p><p class="enhanced">增强：3.4.0 - 支持地理。</p><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm15402"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_shortestline01.png"/><div class="caption"><p>Point 和 LineString 之间的最短线</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText(  ST_ShortestLine(
        'POINT (160 40)',
        'LINESTRING (10 30, 50 50, 30 110, 70 90, 180 140, 130 190)')
        ) As sline;
---------------------------------------------------------
 LINESTRING(160 40,125.75342465753425 115.34246575342466)
</pre><p>
		</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_shortestline02.png"/><div class="caption"><p>Polygons之间的最短线</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText( ST_ShortestLine(
         'POLYGON ((190 150, 20 10, 160 70, 190 150))',
         ST_Buffer('POINT(80 160)', 30)
              ) ) AS llinewkt;
-----------------
LINESTRING(131.59149149528952 101.89887534906197,101.21320343559644 138.78679656440357)
</pre><p>
		</p></div><div class="refsection" id="idm15420"><h2>相关信息</h2><p><a class="xref" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a></p></div></div><div class="refentry" id="ST_3DShortestLine"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DShortestLine — 返回两个几何图形之间的 3D 最短线</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DShortestLine</strong>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" id="idm15442"><h2>描述</h2><p>返回两个几何图形之间的 3 维最短线。 如果函数找到多个最短线，则该函数将仅返回第一个最短线。 如果 g1 和 g2 仅相交于一个点，则该函数将返回一条起点和终点均位于该交点的线。 如果 g1 和 g2 与多个点相交，该函数将返回一条起点和终点位于同一点的线，但它可以是任何相交点。 返回的线始终以 g1 开始并以 g2 结束。 此函数返回的线的 3D 长度始终与 <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> 返回的 g1 和 g2 相同。 </p><p class="availability">可用性: 2.0.0</p><p class="changed">更改：2.2.0 - 如果输入 2 个 2D 几何图形，则返回 2D 点（而不是假设缺失 Z 为 0 的旧行为）。 在 2D 和 3D 情况下，对于缺失的 Z，Z 不再被假定为 0。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p></div><div class="refsection" id="idm15456"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td style="border-bottom: 1px solid ; "><p>线串和点——3d 和 2d 最短线 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DShortestLine(line,pt)) AS shl3d_line_pt,
                ST_AsEWKT(ST_ShortestLine(line,pt)) As shl2d_line_pt
        FROM (SELECT 'POINT(100 100 30)'::geometry As pt,
                        'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 1000)'::geometry As line
                ) As foo;


 shl3d_line_pt                                                                 |               shl2d_line_pt
----------------------------------------------------------------------------+------------------------------------------------------
 LINESTRING(54.6993798867619 128.935022917228 11.5475869506606,100 100 30)  | LINESTRING(73.0769230769231 115.384615384615,100 100)
                                        </pre><p>
							  </p></td></tr><tr><td style="border-bottom: 1px solid ; "><p>线串和多点——3d 和 2d 最短线 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DShortestLine(line,pt)) AS shl3d_line_pt,
                ST_AsEWKT(ST_ShortestLine(line,pt)) As shl2d_line_pt
        FROM (SELECT 'MULTIPOINT(100 100 30, 50 74 1000)'::geometry As pt,
                        'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 900)'::geometry As line
                ) As foo;


                       shl3d_line_pt                                       | shl2d_line_pt
---------------------------------------------------------------------------+------------------------
 LINESTRING(54.6993798867619 128.935022917228 11.5475869506606,100 100 30) | LINESTRING(50 75,50 74)
                                        </pre><p>
							  </p></td></tr><tr><td><p>多线串 和多边形 -3d 和 2d 最短线 </p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DShortestLine(poly, mline)) As shl3d,
    ST_AsEWKT(ST_ShortestLine(poly, mline)) As shl2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
                   shl3d                                                                           |     shl2d
---------------------------------------------------------------------------------------------------+------------------------
 LINESTRING(39.993580415989 54.1889925532825 5,40.4078575708294 53.6052383805529 5.03423778139177) | LINESTRING(20 40,20 40)
             </pre><p>
							  </p></td></tr></tbody></table></div></div><div class="refsection" id="idm15473"><h2>相关信息</h2><p><a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a></p></div></div></section><section class="section" id="Overlay_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.13. 叠加函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数计算两个几何图形叠加所产生的结果。 这些也称为点集理论布尔运算。 还提供了一些相关的函数。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_ClipByBox2D">ST_ClipByBox2D</a></span><span class="refpurpose"> — 计算几何图形落在矩形内的部分。</span></li><li><span class="refentrytitle"><a href="#ST_Difference">ST_Difference</a></span><span class="refpurpose"> — 计算表示几何 A 中不与几何 B 相交的部分的几何。</span></li><li><span class="refentrytitle"><a href="#ST_Intersection">ST_Intersection</a></span><span class="refpurpose"> — 计算表示几何 A 和 B 的共享部分的几何。 </span></li><li><span class="refentrytitle"><a href="#ST_MemUnion">ST_MemUnion</a></span><span class="refpurpose"> — 聚合函数，以内存高效但速度较慢的方式联合几何图形</span></li><li><span class="refentrytitle"><a href="#ST_Node">ST_Node</a></span><span class="refpurpose"> — 节点是线的集合。 </span></li><li><span class="refentrytitle"><a href="#ST_Split">ST_Split</a></span><span class="refpurpose"> — 返回通过将一个几何体分割为另一个几何体而创建的几何体集合。</span></li><li><span class="refentrytitle"><a href="#ST_Subdivide">ST_Subdivide</a></span><span class="refpurpose"> — 计算几何体的直线细分。</span></li><li><span class="refentrytitle"><a href="#ST_SymDifference">ST_SymDifference</a></span><span class="refpurpose"> — 计算表示几何图形 A 和 B 不相交部分的几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_UnaryUnion">ST_UnaryUnion</a></span><span class="refpurpose"> — 计算单个几何体的组件的并集。</span></li><li><span class="refentrytitle"><a href="#ST_Union">ST_Union</a></span><span class="refpurpose"> — 计算表示输入几何图形的点集并集的几何图形。</span></li></ul></div><div class="refentry" id="ST_ClipByBox2D"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClipByBox2D — 计算几何图形落在矩形内的部分。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ClipByBox2D</strong>(</code>geometry <var class="pdparam">geom</var>, box2d <var class="pdparam">box</var><code>)</code>;</p></div></div><div class="refsection" id="idm15501"><h2>描述</h2><p>以快速且宽松但可能无效的方式通过 2D 框剪切几何体。 拓扑上无效的输入几何图形不会导致抛出异常。 不保证输出几何图形有效（特别是，可能会引入多边形的自相交）。 </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm15506"><h2>示例</h2><pre class="programlisting">-- Rely on implicit cast from geometry to box2d for the second parameter
SELECT ST_ClipByBox2D(geom, ST_MakeEnvelope(0,0,10,10)) FROM mytab;
      </pre></div><div class="refsection" id="idm15509"><h2>相关信息</h2><p><a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#ST_MakeBox2D" title="ST_MakeBox2D">ST_MakeBox2D</a>, <a class="xref" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a> </p></div></div><div class="refentry" id="ST_Difference"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Difference — 计算表示几何 A 中不与几何 B 相交的部分的几何。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Difference</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var>, float8  <var class="pdparam">gridSize = -1</var><code>)</code>;</p></div></div><div class="refsection" id="idm15533"><h2>描述</h2><p>返回一个几何图形，表示几何图形 A 中不与几何图形 B 相交的部分。这相当于 <code class="code">A - ST_Intersection(A,B)</code>。 如果 A 完全包含在 B 中，则返回适当类型的空原子几何结构。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这是唯一一个与输入顺序有关的叠加函数。 ST_Difference(A, B) 始终返回 A 的一部分。</p></td></tr></table></div><p>如果提供了可选的<code class="code"> gridSize </code>参数，则输入将捕捉到给定大小的网格，并在同一网格上计算结果顶点。 （需要 GEOS-3.9.0 或更高版本） </p><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：3.1.0 接受 gridSize 参数。</p><p class="geos_requirement">需要 GEOS &gt;= 3.9.0 才能使用 gridSize 参数。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.20</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。  但是，结果仅使用 XY 计算。 结果 Z 值被复制、平均或插值。</p></div><div class="refsection" id="idm15557"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                        <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_symdifference01.png"/><div class="caption"><p>输入线串 </p></div></div></div><p>
                        </p>
                    </td><td>
                        <div class="informalfigure"><div class="mediaobject"><img src="images/st_difference01.png"/><div class="caption"><p>两个线串之间的差异</p></div></div></div><p>
                    </p>
                </td></tr></tbody></table></div><p>2D线串的差异。</p><pre class="programlisting">SELECT ST_AsText(
    ST_Difference(
            'LINESTRING(50 100, 50 200)'::geometry,
            'LINESTRING(50 50, 50 150)'::geometry
        )
    );

st_astext
---------
LINESTRING(50 150,50 200)
</pre><p>3D点的差异。</p><pre class="programlisting">SELECT ST_AsEWKT( ST_Difference(
                   'MULTIPOINT(-118.58 38.38 5,-118.60 38.329 6,-118.614 38.281 7)' :: geometry,
                   'POINT(-118.614 38.281 5)' :: geometry
                  ) );

st_asewkt
---------
MULTIPOINT(-118.6 38.329 6,-118.58 38.38 5)
</pre></div><div class="refsection" id="idm15583"><h2>相关信息</h2><p><a class="xref" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" id="ST_Intersection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Intersection — 计算表示几何 A 和 B 的共享部分的几何。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Intersection</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> ,  float8 <var class="pdparam">gridSize = -1</var> <code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Intersection</strong>(</code> geography <var class="pdparam">geogA</var> ,  geography <var class="pdparam">geogB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm15616"><h2>描述</h2><p>返回表示两个几何图形的点集交集的几何图形。 换句话说，几何图形 A 和几何图形 B 在两个几何图形之间共享的部分。</p><p>如果几何图形没有共同点（即不相交），则返回适当类型的空原子几何图形。</p><p>如果提供了可选的<code class="code"> gridSize </code>参数，则输入将捕捉到给定大小的网格，并在同一网格上计算结果顶点。 （需要 GEOS-3.9.0 或更高版本） </p><p>ST_Intersection 与 <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> 结合使用对于剪切几何图形非常有用，例如在边界框、缓冲区或区域查询中，您只需要感兴趣的国家或地区内的几何图形部分。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>
            <span class="inlinemediaobject"><img src="images/matrix_transform.png"/></span> 对于地理数据，这是对几何数据实现的一个轻量级封装。  它首先确定适合 2 个地理对象边界框的最佳 SRID（如果地理对象位于 UTM 的半个区域内，但不同的 UTM 将选择其中之一）（倾向于 UTM 或兰伯特方位角等积 (LAEA) 北/南 极点，并在最坏的情况下回到墨卡托），然后在最适合的平面空间参考中相交并重新转换回 WGS84 地理。</p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数将删除 M 坐标值（如果存在）。</p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果使用 3D 几何图形，您可能需要使用基于 SFGCAL 的 <a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> ，它可以为 3D 几何图形执行正确的 3D 交集。 尽管此函数适用于 Z 坐标，但它对 Z 坐标进行平均。</p></td></tr></table></div><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：3.1.0 接受 gridSize 参数</p><p class="geos_requirement">需要 GEOS &gt;= 3.9.0 才能使用 gridSize 参数</p><p class="changed">更改：3.0.0 不依赖于 SFCGAL。</p><p class="availability">可用性：1.5 引入了对地理数据类型的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.18</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。  但是，结果仅使用 XY 计算。 结果 Z 值被复制、平均或插值。</p></div><div class="refsection" id="idm15652"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_Intersection('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry));
 st_astext
---------------
GEOMETRYCOLLECTION EMPTY

SELECT ST_AsText(ST_Intersection('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry));
 st_astext
---------------
POINT(0 0)</pre><p>按国家/地区剪辑所有线路（路径）。 这里我们假设国家几何是多边形或多多边形。 注意：我们只保留导致线串或多线串的交叉点部分，因为我们不关心仅共享一个点的路径。 需要转储来将几何集合扩展为单独的 MULT* 部分。 下面的内容相当通用，只需更改 where 子句即可适用于多边形等。</p><pre class="programlisting">select clipped.gid, clipped.f_name, clipped_geom
from (
         select trails.gid, trails.f_name,
             (ST_Dump(ST_Intersection(country.geom, trails.geom))).geom clipped_geom
         from country
              inner join trails on ST_Intersects(country.geom, trails.geom)
     ) as clipped
where ST_Dimension(clipped.clipped_geom) = 1;</pre><p>对于聚合物，例如 多边形地标，您可以使用加速技巧，在 0.0 处缓冲不包括多边形的几何，以获得空的几何集合（因此，如果缓冲包含多边形、线串和点的几何集合为 0.0，则仅保留多边形， 它将不再是几何集合。）</p><pre class="programlisting">select poly.gid,
    ST_Multi(
        ST_Buffer(
            ST_Intersection(country.geom, poly.geom),
            0.0
        )
    ) clipped_geom
from country
     inner join poly on ST_Intersects(country.geom, poly.geom)
where not ST_IsEmpty(ST_Buffer(ST_Intersection(country.geom, poly.geom), 0.0));</pre></div><div class="refsection" id="idm15659"><h2>示例：2.5D</h2><p>请注意，这不是真正的交集，与使用 <a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> 的同一示例进行比较。</p><pre class="programlisting">select ST_AsText(ST_Intersection(linestring, polygon)) As wkt
from  ST_GeomFromText('LINESTRING Z (2 2 6,1.5 1.5 7,1 1 8,0.5 0.5 8,0 0 10)') AS linestring
 CROSS JOIN ST_GeomFromText('POLYGON((0 0 8, 0 1 8, 1 1 8, 1 0 8, 0 0 8))') AS polygon;

               st_astext
---------------------------------------
 LINESTRING Z (1 1 8,0.5 0.5 8,0 0 10)
        </pre></div><div class="refsection" id="idm15664"><h2>相关信息</h2><p><a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>, <a class="xref" href="#ST_Difference" title="ST_Difference">ST_Difference</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a></p></div></div><div class="refentry" id="ST_MemUnion"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MemUnion — 聚合函数，以内存高效但速度较慢的方式联合几何图形</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MemUnion</strong>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" id="idm15688"><h2>描述</h2><p>聚合函数，用于联合输入几何图形，将它们合并以生成没有重叠的结果几何图形。 输出可以是单个几何体、多几何体或几何体集合。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>产生与 <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> 相同的结果，但使用更少的内存和更多的处理时间。 此聚合函数对几何图形的顺序加法连接进行操作，这与 ST_Union 聚合不同，ST_Union 聚合首先累积一个数组，然后使用快速算法联合内容。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。  但是，结果仅使用 XY 计算。 结果 Z 值被复制、平均或插值。</p></div><div class="refsection" id="idm15698"><h2>示例</h2><pre class="programlisting">SELECT id,
       ST_MemUnion(geom) as singlegeom
FROM sometable f
GROUP BY id;
</pre></div><div class="refsection" id="idm15701"><h2>相关信息</h2><p><a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" id="ST_Node"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Node — 节点是线的集合。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Node</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm15717"><h2>描述</h2><p>返回一个 (Multi)LineString ，表示线串集合的完全节点版本。 节点保留所有输入节点，并引入尽可能少的新节点。 生成的线条被溶解（重复的线条被删除）。 </p><p>这是创建适合用作 <a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a> 输入的全节点线条的好方法。</p><p><a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> 也可用于节点和溶解线条。 它提供了一个指定 gridSize 的选项，这可以提供更简单、更稳健的输出。 另请参阅 <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> 了解聚合版本。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p><p class="changed">更改：2.4.0 该函数在内部使用 GEOSNode 而不是 GEOSUnaryUnion。 与 PostGIS &lt; 2.4 相比，这可能会导致生成的线串具有不同的顺序和方向。 </p></div><div class="refsection" id="idm15732"><h2>示例</h2><p>节点自相交的 3D LineString</p><pre class="programlisting">SELECT ST_AsText(
        ST_Node('LINESTRINGZ(0 0 0, 10 10 10, 0 10 5, 10 0 3)'::geometry)
    ) As  output;
output
-----------
MULTILINESTRING Z ((0 0 0,5 5 4.5),(5 5 4.5,10 10 10,0 10 5,5 5 4.5),(5 5 4.5,10 0 3))
        </pre><p>将节点添加到共享一条线的两个线串。 生成的线被溶解。</p><pre class="programlisting">SELECT ST_AsText(
        ST_Node('MULTILINESTRING ((2 5, 2 1, 7 1), (6 1, 4 1, 2 3, 2 5))'::geometry)
    ) As  output;
output
-----------
MULTILINESTRING((2 5,2 3),(2 3,2 1,4 1),(4 1,2 3),(4 1,6 1),(6 1,7 1))
        </pre></div><div class="refsection" id="idm15738"><h2>相关信息</h2><p><a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> </p></div></div><div class="refentry" id="ST_Split"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Split — 返回通过将一个几何体分割为另一个几何体而创建的几何体集合。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Split</strong>(</code>geometry <var class="pdparam">input</var>, geometry <var class="pdparam">blade</var><code>)</code>;</p></div></div><div class="refsection" id="idm15758"><h2>描述</h2><p>该函数支持按（多）点、（多）线串或（多）多边形边界分割线串，或按线串分割（多）多边形。 当（多）多边形用作边栏选项卡时，其线性分量（边界）用于分割输入。 结果几何图形始终是一个集合。 </p><p>该函数在某种意义上与 <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> 相反。 将 ST_Union 应用于返回的集合理论上应该会产生原始几何图形（尽管由于数字舍入，情况可能并非完全如此）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果由于数值精度问题输入和刀片不相交，则输入可能不会按预期分割。 为了避免这种情况，可能需要首先使用具有较小公差的 <a class="xref" href="#ST_Snap" title="ST_Snap">ST_Snap</a> 将输入捕捉到刀片。 </p></td></tr></table></div><p class="availability">可用性：2.0.0需要GEOS</p><p class="enhanced">增强：2.2.0 引入了对通过多线、多点或（多）多边形边界分割线的支持。</p><p class="enhanced">增强：2.5.0 引入了通过多线分割多边形的支持。</p></div><div class="refsection" id="idm15769"><h2>示例</h2><p>用一条线分割多边形。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split01.png"/><div class="caption"><p>分割前</p></div></div></div><p>
                                               </p>
                        </td><td>
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split02.png"/><div class="caption"><p>分割后</p></div></div></div><p>
                                              </p>
                        </td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText( ST_Split(
                ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50), -- circle
                ST_MakeLine(ST_Point(10, 10),ST_Point(190, 190)) -- line
    ));

-- result --
 GEOMETRYCOLLECTION(
            POLYGON((150 90,149.039264020162 80.2454838991936,146.193976625564 70.8658283817455,..),
            POLYGON(..))
)
            </pre><p>将一个多线串（MultiLineString）通过一个点分割，其中这个点正好位于两个线串元素上。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split03.png"/><div class="caption"><p>分割前</p></div></div></div><p>
                                               </p>
                        </td><td>
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split04.png"/><div class="caption"><p>分割后</p></div></div></div><p>
                                               </p>
                        </td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText(ST_Split(
    'MULTILINESTRING((10 10, 190 190), (15 15, 30 30, 100 90))',
    ST_Point(30,30))) As split;

split
------
GEOMETRYCOLLECTION(
    LINESTRING(10 10,30 30),
    LINESTRING(30 30,190 190),
    LINESTRING(15 15,30 30),
    LINESTRING(30 30,100 90)
)
            </pre><p>将 LineString 用点分割，其中该点并不正好位于线上。 显示使用 <a class="xref" href="#ST_Snap" title="ST_Snap">ST_Snap</a> 将线捕捉到点以允许将其分割。 </p><pre class="programlisting">WITH data AS (SELECT
  'LINESTRING(0 0, 100 100)'::geometry AS line,
  'POINT(51 50)':: geometry AS point
)
SELECT ST_AsText( ST_Split( ST_Snap(line, point, 1), point)) AS snapped_split,
       ST_AsText( ST_Split(line, point)) AS not_snapped_not_split
       FROM data;

                            snapped_split                            |            not_snapped_not_split
---------------------------------------------------------------------+---------------------------------------------
 GEOMETRYCOLLECTION(LINESTRING(0 0,51 50),LINESTRING(51 50,100 100)) | GEOMETRYCOLLECTION(LINESTRING(0 0,100 100))
</pre></div><div class="refsection" id="idm15818"><h2>相关信息</h2><p><a class="xref" href="#ST_Snap" title="ST_Snap">ST_Snap</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> </p></div></div><div class="refentry" id="ST_Subdivide"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Subdivide — 计算几何体的直线细分。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof geometry <strong class="fsfunc">ST_Subdivide</strong>(</code>geometry <var class="pdparam">geom</var>, integer <var class="pdparam">max_vertices=256</var>, float8 <var class="pdparam">gridSize = -1</var><code>)</code>;</p></div></div><div class="refsection" id="idm15841"><h2>描述</h2><p>返回一组几何图形，这些几何图形是使用直线将 <code class="varname">geom</code> 分成多个部分的结果，每个部分包含不超过 <code class="code">max_vertices</code>。 </p><p><code class="code">max_vertices</code> 必须为 5 或更多，因为需要 5 个点来表示一个封闭的盒子。 可以指定<code class="code">gridSize</code>以在固定精度空间中进行裁剪工作（需要GEOS-3.9.0+）。 </p><p>对于索引细分数据集，多边形内的点和其他空间操作通常更快。 由于零件的边界框通常覆盖比原始几何图形边界框更小的区域，因此索引查询产生的“命中”情况较少。 “命中”情况更快，因为索引重新检查执行的空间操作处理的点更少。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这是一个返回集合的 <a class="link" href="https://www.postgresql.org/docs/current/queries-table-expressions.html#QUERIES-TABLEFUNCTIONS" target="_top">集合返回函数</a> (SRF) 包含单个几何值的线。 它可以在 SELECT 列表或 FROM 子句中使用，以生成一个结果集，其中每个结果几何图形都有一个记录。 </p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.2.0</p><p class="enhanced">增强：2.5.0 重用多边形分割上的现有点，顶点数从 8 减少到 5。</p><p class="enhanced">增强：3.1.0 接受 gridSize 参数。</p><p class="geos_requirement">需要 GEOS &gt;= 3.9.0 才能使用 gridSize 参数</p></div><div class="refsection" id="idm15858"><h2>示例</h2><p><span class="bold"><strong>示例：</strong></span> 将多边形细分为不超过 10 个顶点的部分，并为每个部分分配一个唯一的 id。 </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_subdivide01.png"/><div class="caption"><p>细分至最多 10 个顶点</p></div></div></div><pre class="programlisting">SELECT row_number() OVER() As rn, ST_AsText(geom) As wkt
    FROM (SELECT ST_SubDivide(
        'POLYGON((132 10,119 23,85 35,68 29,66 28,49 42,32 56,22 64,32 110,40 119,36 150,
        57 158,75 171,92 182,114 184,132 186,146 178,176 184,179 162,184 141,190 122,
        190 100,185 79,186 56,186 52,178 34,168 18,147 13,132 10))'::geometry,10))  AS f(geom);
</pre><pre class="screen">rn │                                                      wkt
────┼────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  1 │ POLYGON((119 23,85 35,68 29,66 28,32 56,22 64,29.8260869565217 100,119 100,119 23))
  2 │ POLYGON((132 10,119 23,119 56,186 56,186 52,178 34,168 18,147 13,132 10))
  3 │ POLYGON((119 56,119 100,190 100,185 79,186 56,119 56))
  4 │ POLYGON((29.8260869565217 100,32 110,40 119,36 150,57 158,75 171,92 182,114 184,114 100,29.8260869565217 100))
  5 │ POLYGON((114 184,132 186,146 178,176 184,179 162,184 141,190 122,190 100,114 100,114 184))
  </pre><p><span class="bold"><strong>示例：</strong></span> 使用 ST_Segmentize(geography, distance) 密集化一条长地理线，并使用 ST_Subdivide 将生成的线分割为 8 个顶点的子线。 </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_subdivide02.png"/><div class="caption"><p>致密线和分割线。</p></div></div></div><pre class="programlisting">SELECT ST_AsText( ST_Subdivide(
            ST_Segmentize('LINESTRING(0 0, 85 85)'::geography,
                          1200000)::geometry,    8));
</pre><pre class="screen">LINESTRING(0 0,0.487578359029357 5.57659056746196,0.984542144675897 11.1527721155093,1.50101059639722 16.7281035483571,1.94532113630331 21.25)
LINESTRING(1.94532113630331 21.25,2.04869538062779 22.3020741387339,2.64204641967673 27.8740533545155,3.29994062412787 33.443216802941,4.04836719489742 39.0084282520239,4.59890468420694 42.5)
LINESTRING(4.59890468420694 42.5,4.92498503922732 44.5680389206321,5.98737409390639 50.1195229244701,7.3290919767674 55.6587646879025,8.79638749938413 60.1969505994924)
LINESTRING(8.79638749938413 60.1969505994924,9.11375579533779 61.1785363177625,11.6558166691368 66.6648504160202,15.642041247655 72.0867690601745,22.8716627200212 77.3609628116894,24.6991785131552 77.8939011989848)
LINESTRING(24.6991785131552 77.8939011989848,39.4046096622744 82.1822848017636,44.7994523421035 82.5156766227011)
LINESTRING(44.7994523421035 82.5156766227011,85 85)
</pre><p><span class="bold"><strong>示例：</strong></span> 在表中的适当位置分割复杂几何图形。 具有原始几何的记录将从源表中删除，拆分后生成的几何将成为其位置的新记录。 </p><pre class="programlisting">

WITH complex_areas_to_subdivide AS (
    DELETE from polygons_table
    WHERE ST_NPoints(geom) 
&gt; 255
    RETURNING id, column1, column2, column3, geom
)
INSERT INTO polygons_table (fid, column1, column2, column3, geom)
    SELECT fid, column1, column2, column3,
           ST_Subdivide(geom, 255) as geom
    FROM complex_areas_to_subdivide;

</pre><p><span class="bold"><strong>示例：</strong></span>创建具有分区几何图形的新表。 保留原始几何图形的键，新表可以与原始表连接。 由于 ST_Subdivide 是一个返回集合的函数，并且行具有单个值，因此此语法会自动生成一个表，其中每个部分的结果都有一行。 </p><pre class="programlisting">CREATE TABLE subdivided_geoms AS
    SELECT pkey, ST_Subdivide(geom) AS geom
    FROM original_geoms;
</pre></div><div class="refsection" id="idm15886"><h2>相关信息</h2><p><a class="xref" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a>, <a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a>, <a class="xref" href="#ST_Split" title="ST_Split">ST_Split</a>, <a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> </p></div></div><div class="refentry" id="ST_SymDifference"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SymDifference — 计算表示几何图形 A 和 B 不相交部分的几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SymDifference</strong>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var>, float8  <var class="pdparam">gridSize = -1</var><code>)</code>;</p></div></div><div class="refsection" id="idm15911"><h2>描述</h2><p>返回表示几何图形 A 和 B 不相交部分的几何图形。 这相当于<code class="code">ST_Union(A,B) - ST_Intersection(A,B)</code>。 之所以称为对称差，是因为 <code class="code">ST_SymDifference(A,B) = ST_SymDifference(B,A)</code>。 </p><p>如果提供了可选的<code class="code"> gridSize </code>参数，则输入将捕捉到给定大小的网格，并在同一网格上计算结果顶点。 （需要 GEOS-3.9.0 或更高版本） </p><p>它是通过GEOS模块实现的</p><p class="enhanced">增强：3.1.0 接受 gridSize 参数。</p><p class="geos_requirement">需要 GEOS &gt;= 3.9.0 才能使用 gridSize 参数</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 5.1.21</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。  但是，结果仅使用 XY 计算。 结果 Z 值被复制、平均或插值。</p></div><div class="refsection" id="idm15934"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                        <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_symdifference01.png"/><div class="caption"><p>原始线串一起显示</p></div></div></div><p>
                        </p>
                    </td><td>
                        <div class="informalfigure"><div class="mediaobject"><img src="images/st_symdifference02.png"/><div class="caption"><p>两条线串的对称差</p></div></div></div><p>
                    </p>
                </td></tr></tbody></table></div><pre class="programlisting">--Safe for 2d - symmetric difference of 2 linestrings
SELECT ST_AsText(
    ST_SymDifference(
        ST_GeomFromText('LINESTRING(50 100, 50 200)'),
        ST_GeomFromText('LINESTRING(50 50, 50 150)')
    )
);

st_astext
---------
MULTILINESTRING((50 150,50 200),(50 50,50 100))
</pre><pre class="programlisting">--When used in 3d doesn't quite do the right thing
SELECT ST_AsEWKT(ST_SymDifference(ST_GeomFromEWKT('LINESTRING(1 2 1, 1 4 2)'),
    ST_GeomFromEWKT('LINESTRING(1 1 3, 1 3 4)')))

st_astext
------------
MULTILINESTRING((1 3 2.75,1 4 2),(1 1 3,1 2 2.25))
        </pre></div><div class="refsection" id="idm15958"><h2>相关信息</h2><p><a class="xref" href="#ST_Difference" title="ST_Difference">ST_Difference</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" id="ST_UnaryUnion"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_UnaryUnion — 计算单个几何体的组件的并集。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_UnaryUnion</strong>(</code>geometry  <var class="pdparam">geom</var>, float8  <var class="pdparam">gridSize = -1</var><code>)</code>;</p></div></div><div class="refsection" id="idm15979"><h2>描述</h2><p><a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> 的单输入形式。 输入可以是单个几何图形、MultiGeometry 或 GeometryCollection。 并集应用于输入的各个元素。 </p><p>此函数可用于修复由于重叠组件而无效的多重多边形。 但是，每个输入组件都必须有效。 无效的输入组件（例如领结多边形）可能会导致错误。 因此，最好使用 <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>。 </p><p>此函数的另一个用途是对交叉或重叠的线串集合进行节点化和分解，以使它们<a class="link" href="#Simple_Geometry" title="4.4.1. 简单几何">简单</a>。 （<a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a> 也执行此操作，但它不提供 <code class="code">gridSize</code> 选项。） </p><p>可以将 ST_UnaryUnion 与 <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a> 结合起来，以微调一次组合的几何图形数量。 这允许在内存使用和计算时间之间进行权衡，从而在 ST_Union 和 <a class="xref" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a> 之间取得平衡。 </p><p>如果提供了可选的<code class="code"> gridSize </code>参数，则输入将捕捉到给定大小的网格，并在同一网格上计算结果顶点。 （需要 GEOS-3.9.0 或更高版本） </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。  但是，结果仅使用 XY 计算。 结果 Z 值被复制、平均或插值。</p><p class="enhanced">增强：3.1.0 接受 gridSize 参数。</p><p class="geos_requirement">需要 GEOS &gt;= 3.9.0 才能使用 gridSize 参数</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm16001"><h2>相关信息</h2><p><a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a>, <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a> </p></div></div><div class="refentry" id="ST_Union"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Union — 计算表示输入几何图形的点集并集的几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Union</strong>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Union</strong>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var>, float8 <var class="pdparam">gridSize</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Union</strong>(</code>geometry[] <var class="pdparam">g1_array</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Union</strong>(</code>geometry set <var class="pdparam">g1field</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Union</strong>(</code>geometry set <var class="pdparam">g1field</var>, float8 <var class="pdparam">gridSize</var><code>)</code>;</p></div></div><div class="refsection" id="idm16057"><h2>描述</h2><p>联合输入几何图形，合并几何图形以生成没有重叠的结果几何图形。 输出可以是原子几何、多几何或几何集合。 有多种格式：</p><p><span class="bold"><strong>双输入格式：</strong></span> 返回一个几何图形，该几何图形是两个输入几何图形的并集。 如果任一输入为 NULL，则返回 NULL。 </p><p><span class="bold"><strong>数组格式：</strong></span> 返回一个几何图形，该几何图形是几何图形数组的并集。 </p><p><span class="bold"><strong>聚合函数格式：</strong></span> 返回一个几何图形，该几何图形是几何图形集合的并集。 ST_Union() 函数是 PostgreSQL 术语中的“聚合”函数。 这意味着它对数据行进行操作，与 SUM() 和 AVG() 函数的操作方式相同，并且与大多数聚合一样，它也会忽略 NULL 几何图形。</p><p>请参阅 <a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> 了解非聚合、单输入格式。</p><p>ST_Union的数组和聚合形式使用<a class="link" href="http://blog.cleverelephant.ca/2009/01/must-faster-unions-in-postgis-14.html" target="_top"> http://blog.cleverelephant.ca/2009/01/must-faster-unions-in-postgis-14.html </a>中引入的快速级联连接算法 </p><p>可以指定 <code class="code">gridSize </code>来在固定精度空间中工作。 输入将捕捉到给定大小的网格，并在同一网格上计算结果顶点。 （需要 GEOS-3.9.0 或更高版本） </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a> 如果不要求结果不重叠，有时可以使用 ST_Collect 代替 ST_Union。 ST_Collect 通常比 ST_Union 更快，因为它不对收集的几何图形执行任何处理。 </p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p>ST_Union 创建 MultiLineString 并且不会将 LineString 缝合成单个 LineString。 使用<a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>缝合线串。</p><p>注意：此函数以前称为 GeomUnion()，它是从“Union”重命名的，因为 UNION 是 SQL 保留字。</p><p class="enhanced">增强：3.1.0 接受 gridSize 参数。</p><p class="geos_requirement">需要 GEOS &gt;= 3.9.0 才能使用 gridSize 参数</p><p class="changed">更改：3.0.0 不依赖于 SFCGAL。</p><p class="availability">可用性：1.4.0 - ST_Union 得到增强。 PostgreSQL 中引入了 ST_Union(geomarray) 以及更快的集合聚合。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.3</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>OGC SPEC 中未明确定义聚合版本。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3：5.1.19 涉及多边形时的 z 索引（高程）。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。  但是，结果仅使用 XY 计算。 结果 Z 值被复制、平均或插值。</p></div><div class="refsection" id="idm16098"><h2>示例</h2><p>聚合示例</p><pre class="programlisting">SELECT id,
       ST_Union(geom) as singlegeom
FROM sometable f
GROUP BY id;
              </pre><p>非聚合示例</p><pre class="programlisting">select ST_AsText(ST_Union('POINT(1 2)' :: geometry, 'POINT(-2 3)' :: geometry))

st_astext
----------
MULTIPOINT(-2 3,1 2)

select ST_AsText(ST_Union('POINT(1 2)' :: geometry, 'POINT(1 2)' :: geometry))

st_astext
----------
POINT(1 2)</pre><p>3D 示例 - 3D 的类型（和混合维度！）</p><pre class="programlisting">select ST_AsEWKT(ST_Union(geom))
from (
         select 'POLYGON((-7 4.2,-7.1 4.2,-7.1 4.3, -7 4.2))'::geometry geom
         union all
         select 'POINT(5 5 5)'::geometry geom
         union all
         select 'POINT(-2 3 1)'::geometry geom
         union all
         select 'LINESTRING(5 5 5, 10 10 10)'::geometry geom
     ) as foo;

st_asewkt
---------
GEOMETRYCOLLECTION(POINT(-2 3 1),LINESTRING(5 5 5,10 10 10),POLYGON((-7 4.2 5,-7.1 4.2 5,-7.1 4.3 5,-7 4.2 5)));
</pre><p>不混合维度的 3D 示例</p><pre class="programlisting">select ST_AsEWKT(ST_Union(geom))
from (
         select 'POLYGON((-7 4.2 2,-7.1 4.2 3,-7.1 4.3 2, -7 4.2 2))'::geometry geom
         union all
         select 'POINT(5 5 5)'::geometry geom
         union all
         select 'POINT(-2 3 1)'::geometry geom
         union all
         select 'LINESTRING(5 5 5, 10 10 10)'::geometry geom
     ) as foo;

st_asewkt
---------
GEOMETRYCOLLECTION(POINT(-2 3 1),LINESTRING(5 5 5,10 10 10),POLYGON((-7 4.2 2,-7.1 4.2 3,-7.1 4.3 2,-7 4.2 2)))

--Examples using new Array construct
SELECT ST_Union(ARRAY(SELECT geom FROM sometable));

SELECT ST_AsText(ST_Union(ARRAY[ST_GeomFromText('LINESTRING(1 2, 3 4)'),
            ST_GeomFromText('LINESTRING(3 4, 4 5)')])) As wktunion;

--wktunion---
MULTILINESTRING((3 4,4 5),(1 2,3 4))

              </pre></div><div class="refsection" id="idm16108"><h2>相关信息</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a>, <a class="xref" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#ST_Difference" title="ST_Difference">ST_Difference</a>, <a class="xref" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a> </p></div></div></section><section class="section" id="Geometry_Processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.14. 几何处理</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数计算几何构造，或改变几何尺寸或形状。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_Buffer">ST_Buffer</a></span><span class="refpurpose"> — 计算覆盖距几何体给定距离内所有点的几何体。 </span></li><li><span class="refentrytitle"><a href="#ST_BuildArea">ST_BuildArea</a></span><span class="refpurpose"> — 创建由几何体的线条形成的多边形几何体。</span></li><li><span class="refentrytitle"><a href="#ST_Centroid">ST_Centroid</a></span><span class="refpurpose"> — 返回几何体的几何中心。</span></li><li><span class="refentrytitle"><a href="#ST_ChaikinSmoothing">ST_ChaikinSmoothing</a></span><span class="refpurpose"> — 使用 Chaikin 算法返回几何图形的平滑版本</span></li><li><span class="refentrytitle"><a href="#ST_ConcaveHull">ST_ConcaveHull</a></span><span class="refpurpose"> — 计算包含所有输入几何顶点的可能凹几何</span></li><li><span class="refentrytitle"><a href="#ST_ConvexHull">ST_ConvexHull</a></span><span class="refpurpose"> — 计算几何体的凸包。</span></li><li><span class="refentrytitle"><a href="#ST_DelaunayTriangles">ST_DelaunayTriangles</a></span><span class="refpurpose"> — 返回几何体顶点的 Delaunay 三角剖分。 </span></li><li><span class="refentrytitle"><a href="#ST_FilterByM">ST_FilterByM</a></span><span class="refpurpose"> — 根据 M 值删除顶点</span></li><li><span class="refentrytitle"><a href="#ST_GeneratePoints">ST_GeneratePoints</a></span><span class="refpurpose"> — 生成一个包含在多边形（Polygon）或多重多边形（MultiPolygon）内的随机点的多点对象。</span></li><li><span class="refentrytitle"><a href="#ST_GeometricMedian">ST_GeometricMedian </a></span><span class="refpurpose"> — 返回多点的几何中位数。 </span></li><li><span class="refentrytitle"><a href="#ST_LineMerge">ST_LineMerge</a></span><span class="refpurpose"> — 返回通过将 MultiLineString 缝合在一起形成的线。</span></li><li><span class="refentrytitle"><a href="#ST_MaximumInscribedCircle">ST_MaximumInscribedCircle</a></span><span class="refpurpose"> — 计算几何体中包含的最大圆。</span></li><li><span class="refentrytitle"><a href="#ST_LargestEmptyCircle">ST_LargestEmptyCircle</a></span><span class="refpurpose"> — 计算不与几何图形重叠的最大圆。</span></li><li><span class="refentrytitle"><a href="#ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a></span><span class="refpurpose"> — 返回包含几何图形的最小圆形多边形。</span></li><li><span class="refentrytitle"><a href="#ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a></span><span class="refpurpose"> — 返回包含几何图形的最小圆的中心点和半径。</span></li><li><span class="refentrytitle"><a href="#ST_OrientedEnvelope">ST_OrientedEnvelope</a></span><span class="refpurpose"> — 返回包含几何图形的最小面积矩形。</span></li><li><span class="refentrytitle"><a href="#ST_OffsetCurve">ST_OffsetCurve</a></span><span class="refpurpose"> — 返回距输入线给定距离和方向的偏移线。 </span></li><li><span class="refentrytitle"><a href="#ST_PointOnSurface">ST_PointOnSurface</a></span><span class="refpurpose"> — 计算保证位于多边形或几何体上的点。</span></li><li><span class="refentrytitle"><a href="#ST_Polygonize">ST_Polygonize</a></span><span class="refpurpose"> — 计算由一组几何图形的线条形成的多边形集合。 </span></li><li><span class="refentrytitle"><a href="#ST_ReducePrecision">ST_ReducePrecision</a></span><span class="refpurpose"> — 返回有效的几何图形，其点舍入到网格公差。</span></li><li><span class="refentrytitle"><a href="#ST_SharedPaths">ST_SharedPaths</a></span><span class="refpurpose"> — 返回一个集合，其中包含两个输入线串/多线串共享的路径。</span></li><li><span class="refentrytitle"><a href="#ST_Simplify">ST_Simplify</a></span><span class="refpurpose"> — 返回几何图形的简化表示，使用 Douglas-Peucker算法。</span></li><li><span class="refentrytitle"><a href="#ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a></span><span class="refpurpose"> — 使用Douglas-Peucker算法返回几何图形的简化且有效表示。</span></li><li><span class="refentrytitle"><a href="#ST_SimplifyPolygonHull">ST_SimplifyPolygonHull</a></span><span class="refpurpose"> — 计算多边形几何的简化的保留拓扑的外部或内部外壳。</span></li><li><span class="refentrytitle"><a href="#ST_SimplifyVW">ST_SimplifyVW</a></span><span class="refpurpose"> — 使用Visvalingam-Whyatt算法返回几何图形的简化表示</span></li><li><span class="refentrytitle"><a href="#ST_SetEffectiveArea">ST_SetEffectiveArea</a></span><span class="refpurpose"> — 使用 Visvalingam-Whyatt 算法设置每个顶点的有效区域。 </span></li><li><span class="refentrytitle"><a href="#ST_TriangulatePolygon">ST_TriangulatePolygon</a></span><span class="refpurpose"> — 计算多边形的约束 Delaunay 三角剖分</span></li><li><span class="refentrytitle"><a href="#ST_VoronoiLines">ST_VoronoiLines</a></span><span class="refpurpose"> — 返回几何体顶点的 Voronoi 图的边界。</span></li><li><span class="refentrytitle"><a href="#ST_VoronoiPolygons">ST_VoronoiPolygons</a></span><span class="refpurpose"> — 返回几何体顶点的 Voronoi 图的单元格。</span></li></ul></div><div class="refentry" id="ST_Buffer"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Buffer — 计算覆盖距几何体给定距离内所有点的几何体。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Buffer</strong>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, text  <var class="pdparam">buffer_style_parameters = ''</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Buffer</strong>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, integer  <var class="pdparam">num_seg_quarter_circle</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Buffer</strong>(</code>geography  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, text  <var class="pdparam">buffer_style_parameters</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Buffer</strong>(</code>geography  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, integer  <var class="pdparam">num_seg_quarter_circle</var><code>)</code>;</p></div></div><div class="refsection" id="idm16176"><h2>描述</h2><p>计算表示与几何/地理距离小于或等于给定距离的所有点的 POLYGON 或 MULTIPOLYGON。 负距离会缩小几何图形而不是扩展它。 负距离可能会完全缩小多边形，在这种情况下返回 POLYGON EMPTY。 对于点和线，负距离始终返回空结果。 </p><p>对于几何体，距离以几何体的空间参考系的单位指定。 对于地理，距离以米为单位指定。</p><p>可选的第三个参数控制缓冲区的精度和样式。 缓冲区中圆弧的精度指定为用于近似四分之一圆的线段数（默认值为 8）。 可以通过提供空白分隔的键=值对列表来指定缓冲区样式，如下所示： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>'quad_segs=#' ：用于近似四分之一圆的线段数（默认为 8）。</p></li><li class="listitem"><p>'endcap=round|flat|square' ：endcap 样式（默认为“round”）。 “butt”被认为是“flat”的同义词。</p></li><li class="listitem"><p>'join=round|mitre|bevel' ：连接样式（默认为“round”）。 “mitre”被认为是“mitre”的同义词。</p></li><li class="listitem"><p>'mitre_limit=#.#' ：斜接比率限制（仅影响斜接连接样式）。 “miter_limit”被接受为“mitre_limit”的同义词。</p></li><li class="listitem"><p>'side=both|left|right' ：'left' 或 'right' 在几何体上执行单边缓冲，缓冲边相对于线的方向。 这仅适用于 LINESTRING 几何图形，不影响 POINT 或 POLYGON 几何图形。 默认情况下，终止样式是方形的。</p></li></ul></div><p>
                </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>
            <span class="inlinemediaobject"><img src="images/matrix_transform.png"/></span> 对于地理数据，这是对几何数据实现的一个轻量级封装。  它确定最适合地理对象边界框的平面空间参考系统（尝试 UTM、兰伯特方位角等积 (LAEA) 北/南极，最后是墨卡托）。 缓冲区在平面空间中计算，然后转换回 WGS84。 如果输入对象远大于 UTM 区域或跨越日期变更线，这可能不会产生所需的行为 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>缓冲区输出始终是有效的多边形几何体。 缓冲区可以处理无效输入，因此距离 0 的缓冲有时被用作修复无效多边形的一种方法。 <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>也可用于此目的。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>缓冲有时用于执行近距离搜索。 对于此用例，使用<a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>效率更高。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数忽略 Z 维度。 即使在 3D 几何体上使用时，它也始终给出 2D 结果。</p></td></tr></table></div><p class="enhanced">增强：2.5.0 - ST_Buffer的几何感知版本已得到增强，允许您指定要缓冲的一侧。<code class="code">side=both|left|right</code>。</p><p class="availability">可用性：1.5 - ST_Buffer 已得到增强，以适应各种端接和接缝。 例如，您可能希望将道路线串转换为街道面，并希望将端点视为平面或正方形而不是圆。 添加了地理的薄包装器。 </p><p>这个函数是由 GEOS 模块执行的。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1.30</p></div><div class="refsection" id="idm16218"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer01.png"/><div class="caption"><p>quad_segs=8 (默认)</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=8');
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer02.png"/><div class="caption"><p>quad_secs=2（不足）</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2');
                </pre><p>
                        </p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer03.png"/><div class="caption"><p>endcap=round join=round (默认)</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'endcap=round join=round');
                </pre><p>
                         </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer04.png"/><div class="caption"><p>endcap=square</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'endcap=square join=round');
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer05.png"/><div class="caption"><p>endcap=flat</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'endcap=flat join=round');
                </pre><p>
                          </p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer07.png"/><div class="caption"><p>join=bevel</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'join=bevel');
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer06.png"/><div class="caption"><p>join=mitre mitre_limit=5.0 (默认最大斜接比率)</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'join=mitre mitre_limit=5.0');
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer08.png"/><div class="caption"><p>join=mitre mitre_limit=1</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'join=mitre mitre_limit=1.0');
                </pre><p>
                          </p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer09.png"/><div class="caption"><p>side=left</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'side=left');
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer10.png"/><div class="caption"><p>side=right</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'side=right');
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer11.png"/><div class="caption"><p>side=left join=mitre</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'side=left join=mitre');
                </pre><p>
                          </p></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer12.png"/><div class="caption"><p>顺时针方向，多边形边界向左</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
ST_ForceRHR(
ST_Boundary(
 ST_GeomFromText(
'POLYGON ((50 50, 50 150, 150 150, 150 50, 50 50))'))),
 ), 20, 'side=left');
                </pre><p>
                          </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer13.png"/><div class="caption"><p>顺时针方向，多边形边界向右</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_Buffer(
ST_ForceRHR(
ST_Boundary(
 ST_GeomFromText(
'POLYGON ((50 50, 50 150, 150 150, 150 50, 50 50))'))
), 20,'side=right')
                </pre><p>
                </p></td></tr></tbody></table></div><pre class="programlisting">--A buffered point approximates a circle
-- A buffered point forcing approximation of (see diagram)
-- 2 points per quarter circle is poly with 8 sides (see diagram)
SELECT ST_NPoints(ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50)) As promisingcircle_pcount,
ST_NPoints(ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50, 2)) As lamecircle_pcount;

promisingcircle_pcount | lamecircle_pcount
------------------------+-------------------
             33 |                9

--A lighter but lamer circle
-- only 2 points per quarter circle is an octagon
--Below is a 100 meter octagon
-- Note coordinates are in NAD 83 long lat which we transform
to Mass state plane meter and then buffer to get measurements in meters;
SELECT ST_AsText(ST_Buffer(
ST_Transform(
ST_SetSRID(ST_Point(-71.063526, 42.35785),4269), 26986)
,100,2)) As octagon;
----------------------
POLYGON((236057.59057465 900908.759918696,236028.301252769 900838.049240578,235
957.59057465 900808.759918696,235886.879896532 900838.049240578,235857.59057465
900908.759918696,235886.879896532 900979.470596815,235957.59057465 901008.759918
696,236028.301252769 900979.470596815,236057.59057465 900908.759918696))
        </pre></div><div class="refsection" id="idm16346"><h2>相关信息</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a></p></div></div><div class="refentry" id="ST_BuildArea"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BuildArea — 创建由几何体的线条形成的多边形几何体。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_BuildArea</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm16367"><h2>描述</h2><p>创建由输入几何体的组成线条形成的面几何体。 输入可以是 LineString、MultiLineString、Polygon、MultiPolygon 或 GeometryCollection。 结果是多边形或多多边形，具体取决于输入。 如果输入线条未形成多边形，则返回 NULL。 </p><p>与 <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a> 不同，此函数接受由多条线形成的环，并且可以形成任意数量的多边形。 </p><p>此功能将内环转换为孔。 要将内环也转换为多边形，请使用 <a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a>。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>输入线条必须正确，节点才能使此功能正常工作。<a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a>可用于节点线。 </p><p>如果输入线条交叉，此函数将生成无效的多边形。<a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>可用于确保输出有效。 </p></td></tr></table></div><p class="availability">可用性：1.1.0</p></div><div class="refsection" id="idm16380"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_buildarea02.png"/><div class="caption"><p>输入线</p></div></div></div><p>
        </p></td><td><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_buildarea03.png"/><div class="caption"><p>生成的多边形</p></div></div></div><p>
        </p></td></tr></tbody></table></div><pre class="programlisting">WITH data(geom) AS (VALUES
   ('LINESTRING (180 40, 30 20, 20 90)'::geometry)
  ,('LINESTRING (180 40, 160 160)'::geometry)
  ,('LINESTRING (160 160, 80 190, 80 120, 20 90)'::geometry)
  ,('LINESTRING (80 60, 120 130, 150 80)'::geometry)
  ,('LINESTRING (80 60, 150 80)'::geometry)
)
SELECT ST_AsText( ST_BuildArea( ST_Collect( geom )))
    FROM data;

------------------------------------------------------------------------------------------
POLYGON((180 40,30 20,20 90,80 120,80 190,160 160,180 40),(150 80,120 130,80 60,150 80))
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_buildarea01.png"/><div class="caption"><p>用两个圆形多边形创建一个环形</p></div></div></div><pre class="programlisting">SELECT ST_BuildArea(ST_Collect(inring,outring))
FROM (SELECT
    ST_Buffer('POINT(100 90)', 25) As inring,
    ST_Buffer('POINT(100 90)', 50) As outring) As t;
</pre></div><div class="refsection" id="idm16410"><h2>相关信息</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a>, <a class="xref" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>, <a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a>, <a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a>, <a class="xref" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a>, <a class="xref" href="#ST_BdMPolyFromText" title="ST_BdMPolyFromText">ST_BdMPolyFromText</a> (使用标准 OGC 接口对该函数进行包装)</p></div></div><div class="refentry" id="ST_Centroid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Centroid — 返回几何体的几何中心。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Centroid</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_Centroid</strong>(</code>geography  <var class="pdparam">g1</var>, boolean  <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm16441"><h2>描述</h2><p>计算作为几何体的几何质心的点。 对于 [<code class="varname">MULTI</code>]<code class="varname">POINT</code>，质心是输入坐标的算术平均值。 对于 [<code class="varname">MULTI</code>]<code class="varname">LINESTRING</code>，质心是使用每条线段的加权长度计算的。 对于 [<code class="varname">MULTI</code>]<code class="varname">POLYGON</code>，质心是根据面积计算的。 如果提供了空几何图形，则返回空的<code class="varname">GEOMETRYCOLLECTION</code>。 如果提供 <code class="varname">NULL</code>，则返回 <code class="varname">NULL</code>。 如果提供了<code class="varname">CIRCULARSTRING</code>或<code class="varname">COMPOUNDCURVE</code>，它们首先使用CurveToLine转换为线串，然后与<code class="varname">LINESTRING</code>相同 </p><p>对于混合维度输入，结果等于最高维度的组件几何图形的质心（因为较低维度的几何图形对质心的“权重”贡献为零）。</p><p>请注意，对于多边形几何形状，质心不一定位于多边形的内部。 例如，请参见下图 C 形多边形的质心。 要构造保证位于多边形内部的点，请使用 <a class="xref" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a>。 </p><p>2.3.0 中的新增功能：支持 <code class="varname">CIRCULARSTRING</code> 和 <code class="varname">COMPOUNDCURVE</code>（使用 CurveToLine）</p><p class="availability">可用性：2.4.0 引入了对地理的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a> </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 8.1.4, 9.5.5</p></div><div class="refsection" id="idm16472"><h2>示例</h2><p>在下图中，红点是源几何体的质心。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid01.png"/><div class="caption"><p><code class="varname">MULTIPOINT</code>的质心</p></div></div></div></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid02.png"/><div class="caption"><p><code class="varname">LINESTRING</code>的质心</p></div></div></div></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid03.png"/><div class="caption"><p><code class="varname">POLYGON</code>的质心</p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid04.png"/><div class="caption"><p><code class="varname">GEOMETRYCOLLECTION</code>的质心</p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText(ST_Centroid('MULTIPOINT ( -1 0, -1 2, -1 3, -1 4, -1 7, 0 1, 0 3, 1 1, 2 0, 6 0, 7 8, 9 8, 10 6 )'));
                st_astext
------------------------------------------
 POINT(2.30769230769231 3.30769230769231)
(1 row)

SELECT ST_AsText(ST_centroid(g))
FROM  ST_GeomFromText('CIRCULARSTRING(0 2, -1 1,0 0, 0.5 0, 1 0, 2 1, 1 2, 0.5 2, 0 2)')  AS g ;
------------------------------------------
POINT(0.5 1)


SELECT ST_AsText(ST_centroid(g))
FROM  ST_GeomFromText('COMPOUNDCURVE(CIRCULARSTRING(0 2, -1 1,0 0),(0 0, 0.5 0, 1 0),CIRCULARSTRING( 1 0, 2 1, 1 2),(1 2, 0.5 2, 0 2))' ) AS g;
------------------------------------------
POINT(0.5 1)

</pre></div><div class="refsection" id="idm16517"><h2>相关信息</h2><p><a class="xref" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a>, <a class="xref" href="#ST_GeometricMedian" title="ST_GeometricMedian">ST_GeometricMedian </a></p></div></div><div class="refentry" id="ST_ChaikinSmoothing"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ChaikinSmoothing — 使用 Chaikin 算法返回几何图形的平滑版本</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ChaikinSmoothing</strong>(</code>geometry <var class="pdparam">geom</var>, integer <var class="pdparam">nIterations = 1</var>, boolean <var class="pdparam">preserveEndPoints = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm16540"><h2>描述</h2><p>使用 <a class="link" href="http://www.idav.ucdavis.edu/education/CAGDNotes/Chaikins-Algorithm/Chaikins-Algorithm.html" target="_top">Chaikin 算法</a>平滑线性或多边形几何体。 平滑程度由<code class="varname"> nIterations </code>参数控制。 在每次迭代中，每个内部顶点都被位于顶点前后线段长度 1/4 处的两个顶点替换。 3次迭代提供了合理的平滑度； 最大限制为 5。 </p><p>如果<code class="varname">preserveEndPoints</code>为true，则多边形环的端点不会被平滑。 LineStrings 的端点始终被保留。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>每次迭代顶点数量都会加倍，因此结果几何图形的点可能比输入多得多。 要减少点数，请对结果使用简化函数（请参阅 <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>、<a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a> 和 <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a>）。 </p></td></tr></table></div><p>结果具有 Z 和 M 维度（如果存在）的插值。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm16558"><h2>示例</h2><p>平滑triangle（三角形）：</p><pre class="programlisting">SELECT ST_AsText(ST_ChaikinSmoothing(geom)) smoothed
FROM (SELECT  'POLYGON((0 0, 8 8, 0 16, 0 0))'::geometry geom) AS foo;

                 smoothed
───────────────────────────────────────────
 POLYGON((2 2,6 6,6 10,2 14,0 12,0 4,2 2))
</pre><p>使用 1、2 和 3 次迭代平滑Polygon：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_chaikinsmoothing01.png"/><div class="caption"><p>nIterations = 1</p></div></div></div></td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_chaikinsmoothing02.png"/><div class="caption"><p>nIterations = 2</p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_chaikinsmoothing03.png"/><div class="caption"><p>nIterations = 3</p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_ChaikinSmoothing(
            'POLYGON ((20 20, 60 90, 10 150, 100 190, 190 160, 130 120, 190 50, 140 70, 120 10, 90 60, 20 20))',
            generate_series(1, 3) );
</pre><p>使用 1、2 和 3 次迭代平滑 LineString：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_chaikinsmoothing04.png"/><div class="caption"><p>nIterations = 1</p></div></div></div></td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_chaikinsmoothing05.png"/><div class="caption"><p>nIterations = 2</p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_chaikinsmoothing06.png"/><div class="caption"><p>nIterations = 3</p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_ChaikinSmoothing(
            'LINESTRING (10 140, 80 130, 100 190, 190 150, 140 20, 120 120, 50 30, 30 100)',
            generate_series(1, 3) );
</pre></div><div class="refsection" id="idm16622"><h2>相关信息</h2><p><a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>, <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a></p></div></div><div class="refentry" id="ST_ConcaveHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ConcaveHull — 计算包含所有输入几何顶点的可能凹几何</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ConcaveHull</strong>(</code>geometry  <var class="pdparam">param_geom</var>, float  <var class="pdparam">param_pctconvex</var>, boolean  <var class="pdparam">param_allow_holes = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm16646"><h2>描述</h2><p>凹壳是（通常）凹几何体，包含输入，其顶点是输入顶点的子集。 一般情况下，凹壳是多边形。 两个或多个共线点的凹包是两点线串。 一个或多个相同点的凹壳是一个点。 除非可选的<code class="varname"> param_allow_holes</code> 参数指定为 true，否则多边形将不包含孔。 </p><p>凹壳可以被认为是“真空包装”的几何形状的集合。 它与<a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">凸壳</a>不同，凸壳类似于用橡皮筋将其封闭。 凹形的圆角通常面积较小，并且具有由输入点组成的自然边界。 </p><p><code class="varname">param_pctconvex </code>控制计算的外壳的凹度。 值为 1 会生成凸包。 1 到 0 之间的值会产生凹度逐渐增加的外壳。 值为 0 会产生具有最大凹度的外壳（但仍然是单个多边形）。 选择合适的值取决于输入数据的性质，但通常 0.3 到 0.1 之间的值会产生合理的结果。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>从技术上讲，<code class="varname">param_pctconvex </code>将长度确定为输入点的 Delaunay 三角剖分中最长边和最短边之间的差值的一部分。 长于该长度的边会被三角测量“侵蚀”。 剩下的三角形形成凹形外壳。 </p></td></tr></table></div><p>对于点和线性输入，外壳将包含输入的所有点。 对于多边形输入，外壳将包围输入的所有点<span class="emphasis"><em>以及</em></span>输入覆盖的所有区域。 如果您想要多边形输入的逐点外壳，请首先使用<a class="xref" href="#ST_Points" title="ST_Points">ST_Points</a>将其转换为点。</p><p>这不是聚合函数。 要计算一组几何图形的凹壳，请使用 <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>（例如 <code class="code">ST_ConcaveHull( ST_Collect( geom ), 0.80）</code>。</p><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：3.3.0，为 GEOS 3.11+ 启用 GEOS 本机实现</p></div><div class="refsection" id="idm16665"><h2>示例</h2><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull01.png"/><div class="caption"><p>多点的凹壳</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_AsText( ST_ConcaveHull(
        'MULTIPOINT ((10 72), (53 76), (56 66), (63 58), (71 51), (81 48), (91 46), (101 45), (111 46), (121 47), (131 50), (140 55), (145 64), (144 74), (135 80), (125 83), (115 85), (105 87), (95 89), (85 91), (75 93), (65 95), (55 98), (45 102), (37 107), (29 114), (22 122), (19 132), (18 142), (21 151), (27 160), (35 167), (44 172), (54 175), (64 178), (74 180), (84 181), (94 181), (104 181), (114 181), (124 181), (134 179), (144 177), (153 173), (162 168), (171 162), (177 154), (182 145), (184 135), (139 132), (136 142), (128 149), (119 153), (109 155), (99 155), (89 155), (79 153), (69 150), (61 144), (63 134), (72 128), (82 125), (92 123), (102 121), (112 119), (122 118), (132 116), (142 113), (151 110), (161 106), (170 102), (178 96), (185 88), (189 78), (190 68), (189 58), (185 49), (179 41), (171 34), (162 29), (153 25), (143 23), (133 21), (123 19), (113 19), (102 19), (92 19), (82 19), (72 21), (62 22), (52 25), (43 29), (33 34), (25 41), (19 49), (14 58), (21 73), (31 74), (42 74), (173 134), (161 134), (150 133), (97 104), (52 117), (157 156), (94 171), (112 106), (169 73), (58 165), (149 40), (70 33), (147 157), (48 153), (140 96), (47 129), (173 55), (144 86), (159 67), (150 146), (38 136), (111 170), (124 94), (26 59), (60 41), (71 162), (41 64), (88 110), (122 34), (151 97), (157 56), (39 146), (88 33), (159 45), (47 56), (138 40), (129 165), (33 48), (106 31), (169 147), (37 122), (71 109), (163 89), (37 156), (82 170), (180 72), (29 142), (46 41), (59 155), (124 106), (157 80), (175 82), (56 50), (62 116), (113 95), (144 167))',
         0.1 ) );
---st_astext--
POLYGON ((18 142, 21 151, 27 160, 35 167, 44 172, 54 175, 64 178, 74 180, 84 181, 94 181, 104 181, 114 181, 124 181, 134 179, 144 177, 153 173, 162 168, 171 162, 177 154, 182 145, 184 135, 173 134, 161 134, 150 133, 139 132, 136 142, 128 149, 119 153, 109 155, 99 155, 89 155, 79 153, 69 150, 61 144, 63 134, 72 128, 82 125, 92 123, 102 121, 112 119, 122 118, 132 116, 142 113, 151 110, 161 106, 170 102, 178 96, 185 88, 189 78, 190 68, 189 58, 185 49, 179 41, 171 34, 162 29, 153 25, 143 23, 133 21, 123 19, 113 19, 102 19, 92 19, 82 19, 72 21, 62 22, 52 25, 43 29, 33 34, 25 41, 19 49, 14 58, 10 72, 21 73, 31 74, 42 74, 53 76, 56 66, 63 58, 71 51, 81 48, 91 46, 101 45, 111 46, 121 47, 131 50, 140 55, 145 64, 144 74, 135 80, 125 83, 115 85, 105 87, 95 89, 85 91, 75 93, 65 95, 55 98, 45 102, 37 107, 29 114, 22 122, 19 132, 18 142))
    </pre><p>
</p><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull02.png"/><div class="caption"><p>多点的凹面外壳，允许有孔</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_AsText( ST_ConcaveHull(
        'MULTIPOINT ((132 64), (114 64), (99 64), (81 64), (63 64), (57 49), (52 36), (46 20), (37 20), (26 20), (32 36), (39 55), (43 69), (50 84), (57 100), (63 118), (68 133), (74 149), (81 164), (88 180), (101 180), (112 180), (119 164), (126 149), (132 131), (139 113), (143 100), (150 84), (157 69), (163 51), (168 36), (174 20), (163 20), (150 20), (143 36), (139 49), (132 64), (99 151), (92 138), (88 124), (81 109), (74 93), (70 82), (83 82), (99 82), (112 82), (126 82), (121 96), (114 109), (110 122), (103 138), (99 151), (34 27), (43 31), (48 44), (46 58), (52 73), (63 73), (61 84), (72 71), (90 69), (101 76), (123 71), (141 62), (166 27), (150 33), (159 36), (146 44), (154 53), (152 62), (146 73), (134 76), (143 82), (141 91), (130 98), (126 104), (132 113), (128 127), (117 122), (112 133), (119 144), (108 147), (119 153), (110 171), (103 164), (92 171), (86 160), (88 142), (79 140), (72 124), (83 131), (79 118), (68 113), (63 102), (68 93), (35 45))',
         0.15, true ) );
---st_astext--
POLYGON ((43 69, 50 84, 57 100, 63 118, 68 133, 74 149, 81 164, 88 180, 101 180, 112 180, 119 164, 126 149, 132 131, 139 113, 143 100, 150 84, 157 69, 163 51, 168 36, 174 20, 163 20, 150 20, 143 36, 139 49, 132 64, 114 64, 99 64, 81 64, 63 64, 57 49, 52 36, 46 20, 37 20, 26 20, 32 36, 35 45, 39 55, 43 69), (88 124, 81 109, 74 93, 83 82, 99 82, 112 82, 121 96, 114 109, 110 122, 103 138, 92 138, 88 124))
    </pre><p>
</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull03.png"/><div class="caption"><p><code class="varname">polygon_hull</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull04.png"/><div class="caption"><p><code class="varname">points_hull</code></p></div></div></div></td></tr></tbody></table></div><p>将多边形的凹壳与组成点的凹壳进行比较。 外壳遵循多边形的边界，而基于点的外壳则不然。 </p><pre class="programlisting">WITH data(geom) AS (VALUES
   ('POLYGON ((10 90, 39 85, 61 79, 50 90, 80 80, 95 55, 25 60, 90 45, 70 16, 63 38, 60 10, 50 30, 43 27, 30 10, 20 20, 10 90))'::geometry)
)
SELECT  ST_ConcaveHull( geom,            0.1) AS polygon_hull,
        ST_ConcaveHull( ST_Points(geom), 0.1) AS points_hull
    FROM data;
</pre><p>与 ST_Collect 一起使用来计算几何图形集的凹壳。</p><pre class="programlisting">-- Compute estimate of infected area based on point observations
SELECT disease_type,
    ST_ConcaveHull( ST_Collect(obs_pnt), 0.3 ) AS geom
  FROM disease_obs
  GROUP BY disease_type;
</pre></div><div class="refsection" id="idm16709"><h2>相关信息</h2><p><a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_AlphaShape" title="ST_AlphaShape">ST_AlphaShape</a>, <a class="xref" href="#ST_OptimalAlphaShape" title="ST_OptimalAlphaShape">ST_OptimalAlphaShape</a></p></div></div><div class="refentry" id="ST_ConvexHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ConvexHull — 计算几何体的凸包。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ConvexHull</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm16728"><h2>描述</h2><p>计算几何图形的凸包。 凸包是包含所有输入几何的最小凸几何体。</p><p>人们可以将凸包视为通过将橡皮筋缠绕在一组几何图形上而获得的几何图形。 这与<a class="link" href="#ST_ConcaveHull" title="ST_ConcaveHull">凹形外壳</a>不同，凹形外壳类似于“收缩包装”几何形状。 凸包通常用于根据一组点观测来确定受影响的区域。</p><p>一般情况下，凸包是多边形。 两个或多个共线点的凸包是两点线串。 一个或多个相同点的凸包是一个点。</p><p>这不是聚合函数。 要计算一组几何图形的凸包，请使用<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>将它们聚合到几何集合中（例如 <code class="code">ST_ConvexHull(ST_Collect(geom))</code>。</p><p>它是通过GEOS模块实现的</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s2.1.1.3</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1.16</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm16751"><h2>示例</h2><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_convexhull01.png"/><div class="caption"><p>多线串和多点的凸包</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_AsText(ST_ConvexHull(
    ST_Collect(
        ST_GeomFromText('MULTILINESTRING((100 190,10 8),(150 10, 20 30))'),
            ST_GeomFromText('MULTIPOINT(50 5, 150 30, 50 10, 10 10)')
            )) );
---st_astext--
POLYGON((50 5,10 8,10 10,100 190,150 30,150 10,50 5))
    </pre><p>
</p><p>与 ST_Collect 一起使用来计算几何图形集的凸包。</p><pre class="programlisting">--Get estimate of infected area based on point observations
SELECT d.disease_type,
    ST_ConvexHull(ST_Collect(d.geom)) As geom
    FROM disease_obs As d
    GROUP BY d.disease_type;
</pre></div><div class="refsection" id="idm16763"><h2>相关信息</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a></p></div></div><div class="refentry" id="ST_DelaunayTriangles"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DelaunayTriangles — 返回几何体顶点的 Delaunay 三角剖分。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_DelaunayTriangles</strong>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">tolerance = 0.0</var>, int4  <var class="pdparam">flags = 0</var><code>)</code>;</p></div></div><div class="refsection" id="idm16787"><h2>描述</h2><p>计算输入几何体顶点的 <a class="link" href="http://en.wikipedia.org/wiki/Delaunay_triangulation" target="_top">Delaunay 三角剖分</a>。 可选的<code class="varname">容差</code>可用于将附近的输入顶点捕捉在一起，这在某些情况下提高了稳健性。 结果几何图形以输入顶点的凸包为边界。 结果几何表示由<code class="varname">标志</code>代码确定： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">0</code> - 三角形 POLYGON 的 GEOMETRYCOLLECTION（默认） </p></li><li class="listitem"><p><code class="code">1</code> - 三角测量边缘的多线 </p></li><li class="listitem"><p><code class="code">2</code> - 三角测量的 TIN </p></li></ul></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm16813"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles01.png"/><div class="caption"><p>原始多边形</p></div></div></div>
<pre class="programlisting"><em class="lineannotation"><span class="lineannotation">our original geometry</span></em>
    ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
            50 60, 125 100, 175 150))'),
        ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
        )</pre></td></tr><tr><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles03.png"/><div class="caption"><p>2 个多边形的 ST_DelaunayTriangles：delaunay 三角形多边形，每个三角形以不同颜色为主题</p></div></div></div><p>
                </p><pre class="programlisting"><em class="lineannotation"><span class="lineannotation">
geometries overlaid multilinestring triangles
</span></em>
SELECT
    ST_DelaunayTriangles(
        ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
            50 60, 125 100, 175 150))'),
        ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
        ))
     As  dtriag;
                </pre><p>
                          </p></td></tr><tr><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles02.png"/><div class="caption"><p>-- delaunay 三角形作为多线串</p></div></div></div><p>
                </p><pre class="programlisting">SELECT
    ST_DelaunayTriangles(
        ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
            50 60, 125 100, 175 150))'),
        ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
        ),0.001,1)
     As  dtriag;</pre><p>
                        </p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles04.png"/><div class="caption"><p>-- 45 个点的 delaunay 三角形作为 55 个三角形多边形</p></div></div></div><p>
                </p><pre class="programlisting"><em class="lineannotation"><span class="lineannotation">
this produces a table of 42 points that form an L shape
</span></em>
SELECT (ST_DumpPoints(ST_GeomFromText(
'MULTIPOINT(14 14,34 14,54 14,74 14,94 14,114 14,134 14,
150 14,154 14,154 6,134 6,114 6,94 6,74 6,54 6,34 6,
14 6,10 6,8 6,7 7,6 8,6 10,6 30,6 50,6 70,6 90,6 110,6 130,
6 150,6 170,6 190,6 194,14 194,14 174,14 154,14 134,14 114,
14 94,14 74,14 54,14 34,14 14)'))).geom
    INTO TABLE l_shape;
<em class="lineannotation"><span class="lineannotation">
output as individual polygon triangles
</span></em>
SELECT ST_AsText((ST_Dump(geom)).geom) As wkt
FROM ( SELECT ST_DelaunayTriangles(ST_Collect(geom)) As geom
FROM l_shape) As foo;

<em class="lineannotation"><span class="lineannotation">
wkt
</span></em>
POLYGON((6 194,6 190,14 194,6 194))
POLYGON((14 194,6 190,14 174,14 194))
POLYGON((14 194,14 174,154 14,14 194))
POLYGON((154 14,14 174,14 154,154 14))
POLYGON((154 14,14 154,150 14,154 14))
POLYGON((154 14,150 14,154 6,154 14))
</pre><p>
                        </p></td></tr></tbody></table></div><p>使用具有 Z 值的顶点的示例。</p><pre class="programlisting"><em class="lineannotation"><span class="lineannotation">
3D multipoint
</span></em>
SELECT ST_AsText(ST_DelaunayTriangles(ST_GeomFromText(
         'MULTIPOINT Z(14 14 10, 150 14 100,34 6 25, 20 10 150)'))) As wkt;

<em class="lineannotation"><span class="lineannotation">
wkt
</span></em>
GEOMETRYCOLLECTION Z (POLYGON Z ((14 14 10,20 10 150,34 6 25,14 14 10))
 ,POLYGON Z ((14 14 10,34 6 25,150 14 100,14 14 10)))</pre></div><div class="refsection" id="idm16867"><h2>相关信息</h2><p><a class="xref" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a>, <a class="xref" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a>, <a class="xref" href="#ST_ConstrainedDelaunayTriangles" title="ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a>, <a class="xref" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a>, <a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> </p></div></div><div class="refentry" id="ST_FilterByM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_FilterByM — 根据 M 值删除顶点</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_FilterByM</strong>(</code>geometry <var class="pdparam">geom</var>, double precision <var class="pdparam">min</var>, double precision <var class="pdparam">max = null</var>, boolean <var class="pdparam">returnM = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm16896"><h2>描述</h2><p>根据 M 值过滤掉顶点。 返回仅包含 M 值大于或等于最小值且小于或等于最大值的顶点的几何图形。 如果省略最大值参数，则仅考虑最小值。 如果省略第四个参数，则 m 值将不会出现在生成的几何图形中。 如果生成的几何图形为其几何类型留下的顶点太少，则将返回空几何图形。 在几何集合中，没有足够点的几何图形将被默默地排除。</p><p>该函数主要与 ST_SetEffectiveArea 结合使用。 ST_EffectiveArea 用其 m 值设置顶点的有效区域。 使用 ST_FilterByM，无需任何计算，只需过滤即可获得几何的简化版本</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>与 ST_FilterByM 相比，当没有足够的点满足条件时，ST_SimplifyVW 返回的结果有所不同。 ST_SimplifyVW 返回具有足够点的几何图形，而 ST_FilterByM 返回空几何图形</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请注意，返回的几何图形可能无效</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数返回所有维度，包括 Z 和 M 值</p></td></tr></table></div><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm16907"><h2>示例</h2><p>线串被过滤</p><pre class="programlisting">SELECT ST_AsText(ST_FilterByM(geom,30)) simplified
FROM (SELECT  ST_SetEffectiveArea('LINESTRING(5 2, 3 8, 6 20, 7 25, 10 10)'::geometry) geom) As foo;
<em class="lineannotation"><span class="lineannotation">
result
</span></em>
         simplified
----------------------------
 LINESTRING(5 2,7 25,10 10)
                </pre></div><div class="refsection" id="idm16912"><h2>相关信息</h2><p><a class="xref" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a>, <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a></p></div></div><div class="refentry" id="ST_GeneratePoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeneratePoints — 生成一个包含在多边形（Polygon）或多重多边形（MultiPolygon）内的随机点的多点对象。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeneratePoints</strong>(</code>geometry <var class="pdparam">g</var>, integer <var class="pdparam">npoints</var>, integer <var class="pdparam">seed = 0</var><code>)</code>;</p></div></div><div class="refsection" id="idm16935"><h2>描述</h2><p>ST_GeneratePoints 生成一个包含指定数量伪随机点的多点对象，这些点位于输入区域内。可选的 <code class="varname">seed</code> 用于重新生成一个确定性的点序列，必须大于零。 </p><p class="availability">可用性：2.3.0</p><p class="enhanced">增强：3.0.0，添加种子参数</p></div><div class="refsection" id="idm16941"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_generatepoints01.png"/><div class="caption"><p>使用随机种子值 1996，在原始多边形上生成了一个包含 12 个点的多点对象</p></div></div></div><p>
                        </p><pre class="programlisting">SELECT ST_GeneratePoints(geom, 12, 1996)
FROM (
    SELECT ST_Buffer(
        ST_GeomFromText(
        'LINESTRING(50 50,150 150,150 50)'),
        10, 'endcap=round join=round') AS geom
) AS s;</pre><p>
            </p><p>给定一个多边形表 s，返回每个多边形 12 个单独的点。每次运行结果都会不同。</p><pre class="programlisting">SELECT s.id, dp.path[1] AS pt_id, dp.geom
FROM s, ST_DumpPoints(ST_GeneratePoints(s.geom,12)) AS dp;</pre></div><div class="refsection" id="idm16953"><h2>相关信息</h2><p><a class="xref" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a></p></div></div><div class="refentry" id="ST_GeometricMedian"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeometricMedian  — 返回多点的几何中位数。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GeometricMedian</strong> (</code> geometry <var class="pdparam">geom</var>, float8 <var class="pdparam">tolerance = NULL</var>, int <var class="pdparam">max_iter = 10000</var>, boolean <var class="pdparam">fail_if_not_converged = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm16978"><h2>描述</h2><p>使用 Weiszfeld 算法计算多点几何的近似几何中值。 几何中位数是最小化到输入点的距离总和的点。 它提供了一种中心性度量，与质心（质心）相比，它对异常点不太敏感。 </p><p>该算法进行迭代，直到连续迭代之间的距离变化小于提供的<code class="varname">容差</code>参数。 如果在<code class="varname"> max_iterations</code> 次迭代后仍未满足此条件，则函数会产生错误并退出，除非<code class="varname">fail_if_not_converged </code>设置为<code class="code"> false</code>（默认值）。 </p><p>如果未提供<code class="varname">容差</code>参数，则根据输入几何图形的范围计算公差值。 </p><p>如果存在，输入点 M 值将被解释为它们的相对权重。 </p><p class="availability">可用性：2.3.0</p><p class="enhanced">增强：2.5.0 添加了对 M 作为点权重的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm16999"><h2>示例</h2><p>
          </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_geometricmedian01.png"/><div class="caption"><p>多点的几何中值（红色）和质心（绿松石色）的比较。 </p></div></div></div><p>
      </p><pre class="programlisting">WITH test AS (
SELECT 'MULTIPOINT((10 10), (10 40), (40 10), (190 190))'::geometry geom)
SELECT
  ST_AsText(ST_Centroid(geom)) centroid,
  ST_AsText(ST_GeometricMedian(geom)) median
FROM test;

      centroid      |                 median
--------------------+----------------------------------------
   POINT(62.5 62.5) | POINT(25.01778421249728 25.01778421249728)
(1 row)
      </pre></div><div class="refsection" id="idm17009"><h2>相关信息</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a></p></div></div><div class="refentry" id="ST_LineMerge"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineMerge — 返回通过将 MultiLineString 缝合在一起形成的线。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineMerge</strong>(</code>geometry  <var class="pdparam">amultilinestring</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineMerge</strong>(</code>geometry  <var class="pdparam">amultilinestring</var>, boolean  <var class="pdparam">directed</var><code>)</code>;</p></div></div><div class="refsection" id="idm17034"><h2>描述</h2><p>返回通过将 MultiLineString 的线元素连接在一起而形成的 LineString 或 MultiLineString。 线在 2 线交叉点处的端点处连接。 线不会在三向或更高阶次的交叉点上连接。 </p><p>如果<span class="bold"><strong>定向</strong></span>为 TRUE，则 ST_LineMerge 将不会更改 LineStrings 内的点顺序，因此方向相反的线不会被合并</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅与 MultiLineString/LineString 一起使用。 其他几何类型返回空的 GeometryCollection</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="enhanced">增强：3.3.0 接受定向参数。</p><p class="geos_requirement">需要 GEOS &gt;= 3.11.0 才能使用定向参数。</p><p class="availability">可用性：1.1.0</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数剥离 M 维度。</p></td></tr></table></div></div><div class="refsection" id="idm17047"><h2>示例</h2><p>
          </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_linemerge01.png"/><div class="caption"><p>合并不同方向的线。 </p></div></div></div><p>
      </p><pre class="programlisting">SELECT ST_AsText(ST_LineMerge(
'MULTILINESTRING((10 160, 60 120), (120 140, 60 120), (120 140, 180 120))'
                ));
--------------------------------------------
 LINESTRING(10 160,60 120,120 140,180 120)
</pre><p>
          </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_linemerge02.png"/><div class="caption"><p>在交点的度数大于2时，线段不会合并。 </p></div></div></div><p>
      </p><pre class="programlisting">SELECT ST_AsText(ST_LineMerge(
'MULTILINESTRING((10 160, 60 120), (120 140, 60 120), (120 140, 180 120), (100 180, 120 140))'
                ));
--------------------------------------------
 MULTILINESTRING((10 160,60 120,120 140),(100 180,120 140),(120 140,180 120))
</pre><p>如果由于不接触线而无法合并，则返回原始 MultiLineString。</p><pre class="programlisting">SELECT ST_AsText(ST_LineMerge(
'MULTILINESTRING((-29 -27,-30 -29.7,-36 -31,-45 -33),(-45.2 -33.2,-46 -32))'
));
----------------
MULTILINESTRING((-45.2 -33.2,-46 -32),(-29 -27,-30 -29.7,-36 -31,-45 -33))
</pre><p>
	</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_linemerge03.png"/><div class="caption"><p>如果directed = TRUE，则不合并具有相反方向的线。</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_AsText(ST_LineMerge(
'MULTILINESTRING((60 30, 10 70), (120 50, 60 30), (120 50, 180 30))',
TRUE));
-------------------------------------------------------
 MULTILINESTRING((120 50,60 30,10 70),(120 50,180 30))
</pre><p>显示 处理Z 维度的示例。</p><pre class="programlisting">SELECT ST_AsText(ST_LineMerge(
      'MULTILINESTRING((-29 -27 11,-30 -29.7 10,-36 -31 5,-45 -33 6), (-29 -27 12,-30 -29.7 5), (-45 -33 1,-46 -32 11))'
        ));
--------------------------------------------------------------------------------------------------
LINESTRING Z (-30 -29.7 5,-29 -27 11,-30 -29.7 10,-36 -31 5,-45 -33 1,-46 -32 11)
</pre></div><div class="refsection" id="idm17077"><h2>相关信息</h2><p><a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a>, <a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a></p></div></div><div class="refentry" id="ST_MaximumInscribedCircle"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MaximumInscribedCircle — 计算几何体中包含的最大圆。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(geometry, geometry, double precision) <strong class="fsfunc">ST_MaximumInscribedCircle</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm17094"><h2>描述</h2><p>查找（多）多边形内包含的最大圆，或者不与任何线和点重叠的最大圆。 返回包含字段的记录： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">center</code>-圆的中心点 </p></li><li class="listitem"><p><code class="varname">nearest</code>-几何上最接近中心的点 </p></li><li class="listitem"><p><code class="varname">radius</code>-圆的半径 </p></li></ul></div><p>对于多边形输入，圆内接于边界环内，使用内环作为边界。 对于线性和点输入，圆内切于输入的凸包内，使用输入线和点作为进一步的边界。</p><p class="availability">可用性：3.1.0。</p><p class="geos_requirement">需要GEOS &gt;= 3.9.0。</p></div><div class="refsection" id="idm17110"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_maximuminscribedcircle01.png"/><div class="caption"><p>多边形的最大内切圆。 返回中心、最近点和半径。</p></div></div></div><pre class="programlisting">SELECT radius, ST_AsText(center) AS center, ST_AsText(nearest) AS nearest
    FROM ST_MaximumInscribedCircle(
        'POLYGON ((40 180, 110 160, 180 180, 180 120, 140 90, 160 40, 80 10, 70 40, 20 50, 40 180),
        (60 140, 50 90, 90 140, 60 140))');

     radius      |           center           |    nearest
-----------------+----------------------------+---------------
 45.165845650018 | POINT(96.953125 76.328125) | POINT(140 90)
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_maximuminscribedcircle02.png"/><div class="caption"><p>多线串的最大内切圆。 返回中心、最近点和半径。</p></div></div></div></div><div class="refsection" id="idm17125"><h2>相关信息</h2><p><a class="xref" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a>, <a class="xref" href="#ST_LargestEmptyCircle" title="ST_LargestEmptyCircle">ST_LargestEmptyCircle</a></p></div></div><div class="refentry" id="ST_LargestEmptyCircle"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LargestEmptyCircle — 计算不与几何图形重叠的最大圆。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(geometry, geometry, double precision) <strong class="fsfunc">ST_LargestEmptyCircle</strong>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">tolerance=0.0</var>, geometry  <var class="pdparam">boundary=POINT EMPTY</var><code>)</code>;</p></div></div><div class="refsection" id="idm17148"><h2>描述</h2><p>找到不与一组点和线障碍物重叠的最大圆。 （多边形几何图形可以作为障碍物包含在内，但仅使用它们的边界线。）圆的中心被限制位于多边形边界内，默认情况下，多边形边界是输入几何图形的凸包。 圆心是边界内部距离障碍物最远的点。 圆本身由中心点和位于确定圆半径的障碍物上的最近点提供。</p><p>使用迭代算法将圆心确定为由距离容差指定的给定精度。 如果未指定精度距离，则使用合理的默认值。</p><p>返回包含字段的记录：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">center</code>-圆的中心点 </p></li><li class="listitem"><p><code class="varname">nearest</code>-几何上最接近中心的点 </p></li><li class="listitem"><p><code class="varname">radius</code>-圆的半径 </p></li></ul></div><p>要查找多边形内部最大的空圆，请参见<a class="xref" href="#ST_MaximumInscribedCircle" title="ST_MaximumInscribedCircle">ST_MaximumInscribedCircle</a>。</p><p class="availability">可用性：3.4.0。</p><p class="geos_requirement">需要GEOS &gt;= 3.9.0。</p></div><div class="refsection" id="idm17167"><h2>示例</h2><pre class="programlisting">SELECT radius,
      center,
      nearest
  FROM ST_LargestEmptyCircle(
        'MULTILINESTRING (
          (10 100, 60 180, 130 150, 190 160),
          (20 50, 70 70, 90 20, 110 40),
          (160 30, 100 100, 180 100))');</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_largestemptycircle01.png"/><div class="caption"><p>一组线内最大的空圆。</p></div></div></div><pre class="programlisting">SELECT radius,
       center,
       nearest
  FROM ST_LargestEmptyCircle(
         ST_Collect(
           'MULTIPOINT ((70 50), (60 130), (130 150), (80 90))'::geometry,
           'POLYGON ((90 190, 10 100, 60 10, 190 40, 120 100, 190 180, 90 190))'::geometry),
           0,
         'POLYGON ((90 190, 10 100, 60 10, 190 40, 120 100, 190 180, 90 190))'::geometry
       );</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_largestemptycircle02.png"/><div class="caption"><p>一组点内最大的空圆，约束位于多边形内。 约束多边形边界必须作为障碍物包含在内，并指定为圆心的约束。 </p></div></div></div></div><div class="refsection" id="idm17183"><h2>相关信息</h2><p><a class="xref" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a></p></div></div><div class="refentry" id="ST_MinimumBoundingCircle"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinimumBoundingCircle — 返回包含几何图形的最小圆形多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MinimumBoundingCircle</strong>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">num_segs_per_qt_circ=48</var><code>)</code>;</p></div></div><div class="refsection" id="idm17202"><h2>描述</h2><p>返回包含几何图形的最小圆形多边形。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>边界圆近似为多边形，默认情况下每四分之一圆有 48 个线段。 由于多边形是最小外接圆的近似值，因此输入几何中的某些点可能不包含在多边形内。 可以通过增加分段数量来改进近似值。 对于近似值不合适的应用，可以使用 <a class="xref" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a>。</p></td></tr></table></div><p>与<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a> 一起使用以获得一组几何图形的最小边界圆。</p><p>要计算位于最小圆（“最大直径”）上的两个点，请使用<a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>。 </p><p>多边形的面积除以最小包含圆的面积之比称为<span class="emphasis"><em> REOCK 紧致度得分</em></span>。</p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：1.4.0</p></div><div class="refsection" id="idm17216"><h2>示例</h2><pre class="programlisting">SELECT d.disease_type,
    ST_MinimumBoundingCircle(ST_Collect(d.geom)) As geom
    FROM disease_obs As d
    GROUP BY d.disease_type;
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_minimumboundingcircle01.png"/><div class="caption"><p>点和线串的最小外接圆。 用8段近似四分之一圆</p></div></div></div><pre class="programlisting">SELECT ST_AsText(ST_MinimumBoundingCircle(
        ST_Collect(
            ST_GeomFromText('LINESTRING(55 75,125 150)'),
                ST_Point(20, 80)), 8
                )) As wktmbc;
wktmbc
-----------
POLYGON((135.59714732062 115,134.384753327498 102.690357210921,130.79416296937 90.8537670908995,124.963360620072 79.9451031602111,117.116420743937 70.3835792560632,107.554896839789 62.5366393799277,96.6462329091006 56.70583703063,84.8096427890789 53.115246672502,72.5000000000001 51.9028526793802,60.1903572109213 53.1152466725019,48.3537670908996 56.7058370306299,37.4451031602112 62.5366393799276,27.8835792560632 70.383579256063,20.0366393799278 79.9451031602109,14.20583703063 90.8537670908993,10.615246672502 102.690357210921,9.40285267938019 115,10.6152466725019 127.309642789079,14.2058370306299 139.1462329091,20.0366393799275 150.054896839789,27.883579256063 159.616420743937,
37.4451031602108 167.463360620072,48.3537670908992 173.29416296937,60.190357210921 176.884753327498,
72.4999999999998 178.09714732062,84.8096427890786 176.884753327498,96.6462329091003 173.29416296937,107.554896839789 167.463360620072,
117.116420743937 159.616420743937,124.963360620072 150.054896839789,130.79416296937 139.146232909101,134.384753327498 127.309642789079,135.59714732062 115))
                </pre></div><div class="refsection" id="idm17226"><h2>相关信息</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a>, <a class="xref" href="#ST_LargestEmptyCircle" title="ST_LargestEmptyCircle">ST_LargestEmptyCircle</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a> </p></div></div><div class="refentry" id="ST_MinimumBoundingRadius"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinimumBoundingRadius — 返回包含几何图形的最小圆的中心点和半径。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(geometry, double precision) <strong class="fsfunc">ST_MinimumBoundingRadius</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm17245"><h2>描述</h2><p>计算包含几何图形的最小圆的中心点和半径。 返回包含字段的记录： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">center</code>-圆的中心点 </p></li><li class="listitem"><p><code class="varname">radius</code>-圆的半径 </p></li></ul></div><p>与<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a> 一起使用以获得一组几何图形的最小边界圆。</p><p>要计算位于最小圆（“最大直径”）上的两个点，请使用<a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>。 </p><p class="availability">可用性-2.3.0</p></div><div class="refsection" id="idm17260"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(center), radius FROM ST_MinimumBoundingRadius('POLYGON((26426 65078,26531 65242,26075 65136,26096 65427,26426 65078))');

                st_astext                 |      radius
------------------------------------------+------------------
 POINT(26284.8418027133 65267.1145090825) | 247.436045591407
</pre></div><div class="refsection" id="idm17263"><h2>相关信息</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a></p></div></div><div class="refentry" id="ST_OrientedEnvelope"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_OrientedEnvelope — 返回包含几何图形的最小面积矩形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_OrientedEnvelope</strong>(</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm17281"><h2>描述</h2><p>返回包围几何体的最小面积旋转矩形。 请注意，可能存在多个这样的矩形。 在退化输入的情况下可能返回 Point 或 LineString。 </p><p class="availability">可用性：2.5.0。 </p><p class="geos_requirement">需要GEOS &gt;= 3.6.0。</p></div><div class="refsection" id="idm17286"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_OrientedEnvelope('MULTIPOINT ((0 0), (-1 -1), (3 2))'));

                st_astext
                ------------------------------------------------
                POLYGON((3 2,2.88 2.16,-1.12 -0.84,-1 -1,3 2))
            </pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_orientedenvelope01.png"/><div class="caption"><p>点和线串的最小外接矩形。</p></div></div></div><pre class="programlisting">SELECT ST_AsText(ST_OrientedEnvelope(
        ST_Collect(
            ST_GeomFromText('LINESTRING(55 75,125 150)'),
                ST_Point(20, 80))
                )) As wktenv;
wktenv
-----------
POLYGON((19.9999999999997 79.9999999999999,33.0769230769229 60.3846153846152,138.076923076924 130.384615384616,125.000000000001 150.000000000001,19.9999999999997 79.9999999999999))
</pre></div><div class="refsection" id="idm17296"><h2>相关信息</h2><p>
                <a class="xref" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a>
                <a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a>
            </p></div></div><div class="refentry" id="ST_OffsetCurve"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_OffsetCurve — 返回距输入线给定距离和方向的偏移线。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_OffsetCurve</strong>(</code>geometry  <var class="pdparam">line</var>, float  <var class="pdparam">signed_distance</var>, text  <var class="pdparam">style_parameters=''</var><code>)</code>;</p></div></div><div class="refsection" id="idm17319"><h2>描述</h2><p>返回距输入线给定距离和方向的偏移线。 返回几何图形的所有点与输入几何图形的距离不超过给定距离。 对于计算围绕中心线的平行线很有用。 </p><p>对于正距离，偏移位于输入线的左侧并保持相同的方向。 对于负距离，它位于右侧且方向相反。 </p><p>距离单位以空间参考系的单位来测量。 </p><p>请注意，对于某些拼图形状的输入几何图形，输出可能是 MULTILINESTRING 或 EMPTY。 </p><p>可选的第三个参数允许指定空白分隔的键=值对的列表来调整操作，如下所示： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>'quad_segs=#' ：用于近似四分之一圆的线段数（默认为 8）。</p></li><li class="listitem"><p>'join=round|mitre|bevel' ：连接样式（默认为“round”）。 “mitre”也被认为是“mitre”的同义词。</p></li><li class="listitem"><p>'mitre_limit=#.#' ：斜接比率限制（仅影响斜接连接样式）。 “miter_limit”也被接受为“mitre_limit”的同义词。</p></li></ul></div><p>
                </p><p>这个函数是由 GEOS 模块执行的。</p><p class="changed">Behavior changed in GEOS 3.11 so offset curves now have the same direction as the input line, for both positive and negative offsets.</p><p class="availability">可用性：2.0</p><p class="enhanced">增强：2.5 - 添加了对 GEOMETRYCOLLECTION 和 MULTILINESTRING 的支持</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数忽略 Z 维度。 即使在 3D 几何体上使用时，它也始终给出 2D 结果。</p></td></tr></table></div></div><div class="refsection" id="idm17339"><h2>示例</h2><p>计算道路周围的开放缓冲区</p><pre class="programlisting">SELECT ST_Union(
 ST_OffsetCurve(f.geom,  f.width/2, 'quad_segs=4 join=round'),
 ST_OffsetCurve(f.geom, -f.width/2, 'quad_segs=4 join=round')
) as track
FROM someroadstable;

                </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve01.png"/><div class="caption"><p>15、'quad_segs=4 join=round' 原始线及其偏移 15 个单位。</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(ST_OffsetCurve(ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
    44 16,24 16,20 16,18 16,17 17,
    16 18,16 20,16 40,16 60,16 80,16 100,
    16 120,16 140,16 160,16 180,16 195)'),
    15, 'quad_segs=4 join=round'));
<em class="lineannotation"><span class="lineannotation">
output
</span></em>
LINESTRING(164 1,18 1,12.2597485145237 2.1418070123307,
    7.39339828220179 5.39339828220179,
    5.39339828220179 7.39339828220179,
    2.14180701233067 12.2597485145237,1 18,1 195)
                </pre><p>
                          </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve02.png"/><div class="caption"><p>-15, 'quad_segs=4 join=round' 原始线及其偏移量-15个单位 </p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(ST_OffsetCurve(geom,
    -15, 'quad_segs=4 join=round')) As notsocurvy
    FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
    44 16,24 16,20 16,18 16,17 17,
    16 18,16 20,16 40,16 60,16 80,16 100,
    16 120,16 140,16 160,16 180,16 195)') As geom;
<em class="lineannotation"><span class="lineannotation">
notsocurvy
</span></em>
LINESTRING(31 195,31 31,164 31)
                </pre><p>
                        </p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve05.png"/><div class="caption"><p>双偏移以获得更多曲线，请注意第一个反转方向，因此 -30+15 = -15</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(ST_OffsetCurve(ST_OffsetCurve(geom,
    -30, 'quad_segs=4 join=round'), -15, 'quad_segs=4 join=round')) As morecurvy
    FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
    44 16,24 16,20 16,18 16,17 17,
    16 18,16 20,16 40,16 60,16 80,16 100,
    16 120,16 140,16 160,16 180,16 195)') As geom;
<em class="lineannotation"><span class="lineannotation">
morecurvy
</span></em>
LINESTRING(164 31,46 31,40.2597485145236 32.1418070123307,
35.3933982822018 35.3933982822018,
32.1418070123307 40.2597485145237,31 46,31 195)
                </pre><p>
                        </p></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve06.png"/><div class="caption"><p>双偏移以获得更多曲线，与常规偏移 15 结合以获得平行线。 与原图重叠。</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(ST_Collect(
    ST_OffsetCurve(geom, 15, 'quad_segs=4 join=round'),
    ST_OffsetCurve(ST_OffsetCurve(geom,
    -30, 'quad_segs=4 join=round'), -15, 'quad_segs=4 join=round')
    )
) As parallel_curves
    FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
    44 16,24 16,20 16,18 16,17 17,
    16 18,16 20,16 40,16 60,16 80,16 100,
    16 120,16 140,16 160,16 180,16 195)') As geom;
<em class="lineannotation"><span class="lineannotation">
parallel curves
</span></em>
MULTILINESTRING((164 1,18 1,12.2597485145237 2.1418070123307,
7.39339828220179 5.39339828220179,5.39339828220179 7.39339828220179,
2.14180701233067 12.2597485145237,1 18,1 195),
(164 31,46 31,40.2597485145236 32.1418070123307,35.3933982822018 35.3933982822018,
32.1418070123307 40.2597485145237,31 46,31 195))
                </pre><p>
                        </p></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve03.png"/><div class="caption"><p>15、'quad_segs=4 join=bevel' 显示为原始线</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(ST_OffsetCurve(ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
    44 16,24 16,20 16,18 16,17 17,
    16 18,16 20,16 40,16 60,16 80,16 100,
    16 120,16 140,16 160,16 180,16 195)'),
        15, 'quad_segs=4 join=bevel'));
<em class="lineannotation"><span class="lineannotation">
output
</span></em>
LINESTRING(164 1,18 1,7.39339828220179 5.39339828220179,
    5.39339828220179 7.39339828220179,1 18,1 195)
                </pre><p>
                         </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve04.png"/><div class="caption"><p>15、-15收集，join=mitre mitre_limit=2.1</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(ST_Collect(
    ST_OffsetCurve(geom, 15, 'quad_segs=4 join=mitre mitre_limit=2.2'),
    ST_OffsetCurve(geom, -15, 'quad_segs=4 join=mitre mitre_limit=2.2')
    ) )
    FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
    44 16,24 16,20 16,18 16,17 17,
    16 18,16 20,16 40,16 60,16 80,16 100,
    16 120,16 140,16 160,16 180,16 195)') As geom;
<em class="lineannotation"><span class="lineannotation">
output
</span></em>
MULTILINESTRING((164 1,11.7867965644036 1,1 11.7867965644036,1 195),
    (31 195,31 31,164 31))
                </pre><p>
                          </p></td></tr></tbody></table></div></div><div class="refsection" id="idm17409"><h2>相关信息</h2><p><a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a></p></div></div><div class="refentry" id="ST_PointOnSurface"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PointOnSurface — 计算保证位于多边形或几何体上的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PointOnSurface</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm17425"><h2>描述</h2><p>返回保证位于曲面内部的<code class="varname">POINT</code>（<code class="varname">POLYGON</code>、<code class="varname">MULTIPOLYGON</code> 和 <code class="varname">CURVEPOLYGON</code>） 。 在 PostGIS 中，此函数也适用于线和点几何图形。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法实现了 <a class="link" href="http://www.opengeospatial.org/standards/sfs" target="_top">SQL 1.1 的 OGC 简单功能规范。</a>  s3.2.14.2 // s3.2.18.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3：8.1.5、9.5.6。 该规范仅针对表面几何形状定义 ST_PointOnSurface。 PostGIS扩展了功能以支持所有常见的几何类型。 其他数据库（Oracle、DB2、ArcSDE）似乎仅支持曲面的此功能。 SQL Server 2008 支持所有常见的几何类型。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm17445"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_pointonsurface01.png"/><div class="caption"><p><code class="varname">MULTIPOINT</code> 表面上的点</p></div></div></div></td><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_pointonsurface02.png"/><div class="caption"><p><code class="varname">LINESTRING</code> 表面上的点</p></div></div></div></td></tr><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_pointonsurface03.png"/><div class="caption"><p><code class="varname">POLYGON</code> 表面上的点</p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_pointonsurface04.png"/><div class="caption"><p><code class="varname">GEOMETRYCOLLECTION</code> 表面上的点</p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText(ST_PointOnSurface('POINT(0 5)'::geometry));
------------
 POINT(0 5)

SELECT ST_AsText(ST_PointOnSurface('LINESTRING(0 5, 0 10)'::geometry));
------------
 POINT(0 5)

SELECT ST_AsText(ST_PointOnSurface('POLYGON((0 0, 0 5, 5 5, 5 0, 0 0))'::geometry));
----------------
 POINT(2.5 2.5)

SELECT ST_AsEWKT(ST_PointOnSurface(ST_GeomFromEWKT('LINESTRING(0 5 1, 0 0 1, 0 10 2)')));
----------------
 POINT(0 0 1)
</pre><p><span class="bold"><strong>示例：</strong></span>ST_PointOnSurface 的结果保证位于多边形内，而 <a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>计算的点可能位于多边形外。 </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_pointonsurface.png"/><div class="caption"><p>红色：表面上的点； 绿色：质心</p></div></div></div><pre class="programlisting">SELECT ST_AsText(ST_PointOnSurface(geom)) AS pt_on_surf,
       ST_AsText(ST_Centroid(geom)) AS centroid
    FROM (SELECT 'POLYGON ((130 120, 120 190, 30 140, 50 20, 190 20,
                      170 100, 90 60, 90 130, 130 120))'::geometry AS geom) AS t;

   pt_on_surf    |                  centroid
-----------------+---------------------------------------------
 POINT(62.5 110) | POINT(100.18264840182648 85.11415525114155)
</pre></div><div class="refsection" id="idm17499"><h2>相关信息</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>, <a class="xref" href="#ST_MaximumInscribedCircle" title="ST_MaximumInscribedCircle">ST_MaximumInscribedCircle</a></p></div></div><div class="refentry" id="ST_Polygonize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Polygonize — 计算由一组几何图形的线条形成的多边形集合。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Polygonize</strong>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Polygonize</strong>(</code>geometry[] <var class="pdparam">geom_array</var><code>)</code>;</p></div></div><div class="refsection" id="idm17522"><h2>描述</h2><p>创建一个 GeometryCollection，其中包含由一组几何图形的线条形成的多边形。 如果输入线条未形成任何多边形，则返回空的 GeometryCollection。 </p><p>此函数创建覆盖所有分隔区域的多边形。 如果结果旨在形成有效的多边形几何体，请使用 <a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a> 来防止填充孔。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>输入线条必须正确节点才能使该功能正常工作。 为了确保输入已节点化，请在多边形化之前在输入几何体上使用 <a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a>。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>使用外部工具可能很难处理几何集合。 使用<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> 将多边形结果转换为单独的多边形。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性： 1.0.0RC1</p></div><div class="refsection" id="idm17535"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_polygonize01.png"/><div class="caption"><p>输入线</p></div></div></div><p>
        </p></td><td><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_polygonize02.png"/><div class="caption"><p>多边形化结果</p></div></div></div><p>
        </p></td></tr></tbody></table></div><pre class="programlisting">WITH data(geom) AS (VALUES
   ('LINESTRING (180 40, 30 20, 20 90)'::geometry)
  ,('LINESTRING (180 40, 160 160)'::geometry)
  ,('LINESTRING (80 60, 120 130, 150 80)'::geometry)
  ,('LINESTRING (80 60, 150 80)'::geometry)
  ,('LINESTRING (20 90, 70 70, 80 130)'::geometry)
  ,('LINESTRING (80 130, 160 160)'::geometry)
  ,('LINESTRING (20 90, 20 160, 70 190)'::geometry)
  ,('LINESTRING (70 190, 80 130)'::geometry)
  ,('LINESTRING (70 190, 160 160)'::geometry)
)
SELECT ST_AsText( ST_Polygonize( geom ))
    FROM data;

------------------------------------------------------------------------------------------
GEOMETRYCOLLECTION (POLYGON ((180 40, 30 20, 20 90, 70 70, 80 130, 160 160, 180 40), (150 80, 120 130, 80 60, 150 80)),
                    POLYGON ((20 90, 20 160, 70 190, 80 130, 70 70, 20 90)),
                    POLYGON ((160 160, 80 130, 70 190, 160 160)),
                    POLYGON ((80 60, 120 130, 150 80, 80 60)))

</pre><p>多边形线串表：</p><pre class="programlisting">SELECT ST_AsEWKT(ST_Polygonize(geom_4269)) As geomtextrep
FROM (SELECT geom_4269 FROM ma.suffolk_edges) As foo;

-------------------------------------
 SRID=4269;GEOMETRYCOLLECTION(POLYGON((-71.040878 42.285678,-71.040943 42.2856,-71.04096 42.285752,-71.040878 42.285678)),
 POLYGON((-71.17166 42.353675,-71.172026 42.354044,-71.17239 42.354358,-71.171794 42.354971,-71.170511 42.354855,
 -71.17112 42.354238,-71.17166 42.353675)))

--Use ST_Dump to dump out the polygonize geoms into individual polygons
SELECT ST_AsEWKT((ST_Dump(t.polycoll)).geom) AS geomtextrep
FROM (SELECT ST_Polygonize(geom_4269) AS polycoll
    FROM (SELECT geom_4269 FROM ma.suffolk_edges)
        As foo) AS t;

------------------------
 SRID=4269;POLYGON((-71.040878 42.285678,-71.040943 42.2856,-71.04096 42.285752,
-71.040878 42.285678))
 SRID=4269;POLYGON((-71.17166 42.353675,-71.172026 42.354044,-71.17239 42.354358
,-71.171794 42.354971,-71.170511 42.354855,-71.17112 42.354238,-71.17166 42.353675))
</pre></div><div class="refsection" id="idm17560"><h2>相关信息</h2><p><a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a> </p></div></div><div class="refentry" id="ST_ReducePrecision"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ReducePrecision — 返回有效的几何图形，其点舍入到网格公差。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ReducePrecision</strong>(</code>geometry  <var class="pdparam">g</var>, float8  <var class="pdparam">gridsize</var><code>)</code>;</p></div></div><div class="refsection" id="idm17581"><h2>描述</h2><p>返回有效的几何图形，其中所有点均舍入到提供的网格公差，并删除低于公差的要素。</p><p>与<a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> 不同，返回的几何图形将是有效的，没有环自相交或折叠组件。</p><p>精度降低可用于： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>将坐标精度与数据精度相匹配 </p></li><li class="listitem"><p>减少表示几何图形所需的坐标数量 </p></li><li class="listitem"><p>确保有效的几何输出为使用较低精度的格式（例如，当输出小数位数有限时，WKT、GeoJSON 或 KML 等文本格式）。 </p></li><li class="listitem"><p>将有效几何图形导出到使用较低或有限精度的系统（例如 SDE、Oracle 公差值） </p></li></ul></div><p>
		</p><p class="availability">可用性：3.1.0。</p><p class="geos_requirement">需要GEOS &gt;= 3.9.0。</p></div><div class="refsection" id="idm17598"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_ReducePrecision('POINT(1.412 19.323)', 0.1));
    st_astext
-----------------
 POINT(1.4 19.3)

SELECT ST_AsText(ST_ReducePrecision('POINT(1.412 19.323)', 1.0));
  st_astext
-------------
 POINT(1 19)

SELECT ST_AsText(ST_ReducePrecision('POINT(1.412 19.323)', 10));
  st_astext
-------------
 POINT(0 20)
</pre><p>降低精度可以减少顶点数量</p><pre class="programlisting">SELECT ST_AsText(ST_ReducePrecision('LINESTRING (10 10, 19.6 30.1, 20 30, 20.3 30, 40 40)', 1));
  st_astext
-------------
 LINESTRING (10 10, 20 30, 40 40)
</pre><p>如果需要的话，精度降低会分割多边形以确保有效性</p><pre class="programlisting">SELECT ST_AsText(ST_ReducePrecision('POLYGON ((10 10, 60 60.1, 70 30, 40 40, 50 10, 10 10))', 10));
  st_astext
-------------
 MULTIPOLYGON (((60 60, 70 30, 40 40, 60 60)), ((40 40, 50 10, 10 10, 40 40)))
</pre></div><div class="refsection" id="idm17605"><h2>相关信息</h2><p><a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>, <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a></p></div></div><div class="refentry" id="ST_SharedPaths"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SharedPaths — 返回一个集合，其中包含两个输入线串/多线串共享的路径。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SharedPaths</strong>(</code>geometry <var class="pdparam">lineal1</var>, geometry <var class="pdparam">lineal2</var><code>)</code>;</p></div></div><div class="refsection" id="idm17626"><h2>描述</h2><p>返回一个集合，其中包含两个输入几何图形共享的路径。 那些朝相同方向去的在集合的第一个元素中，那些朝相反方向去的在第二个元素中。 路径本身是在第一个几何体的方向上给出的。 </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm17631"><h2>示例：查找共享路径</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_sharedpaths01.png"/><div class="caption"><p>multilinestring和linestring</p></div></div></div>
               </td></tr><tr><td style="border-bottom: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_sharedpaths02.png"/><div class="caption"><p>multilinestring和 linestring与原始几何图形重叠的共享路径。</p></div></div></div><p>
                  </p><pre class="programlisting">SELECT ST_AsText(
  ST_SharedPaths(
    ST_GeomFromText('MULTILINESTRING((26 125,26 200,126 200,126 125,26 125),
       (51 150,101 150,76 175,51 150))'),
    ST_GeomFromText('LINESTRING(151 100,126 156.25,126 125,90 161, 76 175)')
    )
  ) As wkt

                                wkt
-------------------------------------------------------------
GEOMETRYCOLLECTION(MULTILINESTRING((126 156.25,126 125),
 (101 150,90 161),(90 161,76 175)),MULTILINESTRING EMPTY)
              </pre><p>
            </p>
            </td></tr><tr><td><p>
                  </p><pre class="programlisting"><em class="lineannotation"><span class="lineannotation">
same example but linestring orientation flipped
</span></em>
SELECT ST_AsText(
  ST_SharedPaths(
   ST_GeomFromText('LINESTRING(76 175,90 161,126 125,126 156.25,151 100)'),
   ST_GeomFromText('MULTILINESTRING((26 125,26 200,126 200,126 125,26 125),
       (51 150,101 150,76 175,51 150))')
    )
  ) As wkt

                                wkt
-------------------------------------------------------------
GEOMETRYCOLLECTION(MULTILINESTRING EMPTY,
MULTILINESTRING((76 175,90 161),(90 161,101 150),(126 125,126 156.25)))
              </pre><p>
            </p>
            </td></tr></tbody></table></div></div><div class="refsection" id="idm17660"><h2>相关信息</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> </p></div></div><div class="refentry" id="ST_Simplify"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Simplify — 返回几何图形的简化表示，使用 Douglas-Peucker算法。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Simplify</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Simplify</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">tolerance</var>, boolean <var class="pdparam">preserveCollapsed</var><code>)</code>;</p></div></div><div class="refsection" id="idm17693"><h2>描述</h2><p>使用<a class="link" href="https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm" target="_top">Douglas-Peucker算法</a>计算几何图形的简化表示。简化的<code class="varname">tolerance</code>是一个距离值，以输入SRS的单位为准。简化会移除在简化线条的公差距离内的顶点。即使输入是有效的，结果可能不是有效的。 </p><p>该函数可用于任何类型的几何图形（包括GeometryCollections），但只有线和多边形元素会被简化。线性几何的端点将被保留。 </p><p><code class="varname">preserveCollapsed</code>标志保留那些在给定公差下本应被移除的小几何图形。例如，如果将一个1米长的线条使用10米的公差进行简化，当<code class="varname">preserveCollapsed</code>为true时，该线条将不会消失。这个标志对于渲染目的很有用，以防止地图上非常小的特征消失。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的几何图形可能会失去其简单性（参见<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>），拓扑可能不会被保留，并且多边形结果可能是无效的（参见<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>）。使用<a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>来保留拓扑并确保有效性。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不保留多边形之间共享的边界。如果需要保留共享边界，请使用<a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>。</p></td></tr></table></div><p class="availability">可用性：1.2.2</p></div><div class="refsection" id="idm17711"><h2>示例</h2><p>它是一个经过简化后变成三角形或八角形的圆， </p><pre class="programlisting">SELECT ST_Npoints(geom) AS np_before,
       ST_NPoints(ST_Simplify(geom, 0.1)) AS np01_notbadcircle,
       ST_NPoints(ST_Simplify(geom, 0.5)) AS np05_notquitecircle,
       ST_NPoints(ST_Simplify(geom, 1)) AS np1_octagon,
       ST_NPoints(ST_Simplify(geom, 10)) AS np10_triangle,
       (ST_Simplify(geom, 100) is null) AS  np100_geometrygoesaway
  FROM (SELECT ST_Buffer('POINT(1 3)', 10,12) As geom) AS t;

 np_before | np01_notbadcircle | np05_notquitecircle | np1_octagon | np10_triangle | np100_geometrygoesaway
-----------+-------------------+---------------------+-------------+---------------+------------------------
        49 |                33 |                  17 |           9 |             4 | t
</pre><p>简化一组线。简化后，线可能会相交。</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplify01.png"/></div></div><pre class="programlisting">SELECT ST_Simplify(
  'MULTILINESTRING ((20 180, 20 150, 50 150, 50 100, 110 150, 150 140, 170 120), (20 10, 80 30, 90 120), (90 120, 130 130), (130 130, 130 70, 160 40, 180 60, 180 90, 140 80), (50 40, 70 40, 80 70, 70 60, 60 60, 50 50, 50 40))',
    40);
</pre><p>简化一个MultiPolygon。多边形的结果可能是无效的。</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplify02.png"/></div></div><pre class="programlisting">SELECT ST_Simplify(
  'MULTIPOLYGON (((90 110, 80 180, 50 160, 10 170, 10 140, 20 110, 90 110)), ((40 80, 100 100, 120 160, 170 180, 190 70, 140 10, 110 40, 60 40, 40 80), (180 70, 170 110, 142.5 128.5, 128.5 77.5, 90 60, 180 70)))',
    40);
</pre></div><div class="refsection" id="idm17727"><h2>相关信息</h2><p><a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>, <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a>, <a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>, Topology <a class="xref" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" id="ST_SimplifyPreserveTopology"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SimplifyPreserveTopology — 使用Douglas-Peucker算法返回几何图形的简化且有效表示。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SimplifyPreserveTopology</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm17750"><h2>描述</h2><p>使用一种变体的<a class="link" href="https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm" target="_top">Douglas-Peucker 算法</a> 计算几何图形的简化表示，该算法限制简化以确保结果具有与输入相同的拓扑。简化的<code class="varname">tolerance</code>是一个距离值，以输入SRS的单位为准。只要保留拓扑，简化会移除在简化线条的公差距离内的顶点。如果输入是有效和简单的，则结果也将是有效和简单的。 </p><p>该函数可用于任何类型的几何图形（包括GeometryCollections），但只有线和多边形元素会被简化。对于多边形输入，结果将具有相同数量的环（外壳和内环），并且这些环不会相交。环的端点可能会被简化。对于线性输入，结果将具有相同数量的线，如果在原始几何中它们不相交，则线也不会相交。线性几何的端点将被保留。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不保留多边形之间共享的边界。如果需要保留共享边界，请使用<a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：1.3.3</p></div><div class="refsection" id="idm17761"><h2>示例</h2><p>对于与<a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>相同的示例，ST_SimplifyPreserveTopology防止过度简化。圆最多可以变成一个正方形。</p><pre class="programlisting">SELECT  ST_Npoints(geom) AS np_before, 
        ST_NPoints(ST_SimplifyPreserveTopology(geom, 0.1)) AS np01_notbadcircle, 
        ST_NPoints(ST_SimplifyPreserveTopology(geom, 0.5)) AS np05_notquitecircle,
        ST_NPoints(ST_SimplifyPreserveTopology(geom, 1))   AS np1_octagon, 
        ST_NPoints(ST_SimplifyPreserveTopology(geom, 10))  AS np10_square,
        ST_NPoints(ST_SimplifyPreserveTopology(geom, 100)) AS np100_stillsquare
FROM (SELECT ST_Buffer('POINT(1 3)', 10,12) AS geom) AS t;

 np_before | np01_notbadcircle | np05_notquitecircle | np1_octagon | np10_square | np100_stillsquare
-----------+-------------------+---------------------+-------------+-------------+-------------------
        49 |                33 |                  17 |           9 |           5 |                 5
</pre><p>简化一组线，保留非相交线的拓扑。</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifypreservetopology01.png"/></div></div><pre class="programlisting">SELECT ST_SimplifyPreserveTopology(
  'MULTILINESTRING ((20 180, 20 150, 50 150, 50 100, 110 150, 150 140, 170 120), (20 10, 80 30, 90 120), (90 120, 130 130), (130 130, 130 70, 160 40, 180 60, 180 90, 140 80), (50 40, 70 40, 80 70, 70 60, 60 60, 50 50, 50 40))',
    40);
</pre><p>简化一个MultiPolygon，保留外壳和内环的拓扑。</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifypreservetopology02.png"/></div></div><pre class="programlisting">SELECT ST_SimplifyPreserveTopology(
  'MULTIPOLYGON (((90 110, 80 180, 50 160, 10 170, 10 140, 20 110, 90 110)), ((40 80, 100 100, 120 160, 170 180, 190 70, 140 10, 110 40, 60 40, 40 80), (180 70, 170 110, 142.5 128.5, 128.5 77.5, 90 60, 180 70)))',
    40);
</pre></div><div class="refsection" id="idm17778"><h2>相关信息</h2><p><a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a>, <a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a></p></div></div><div class="refentry" id="ST_SimplifyPolygonHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SimplifyPolygonHull — 计算多边形几何的简化的保留拓扑的外部或内部外壳。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SimplifyPolygonHull</strong>(</code>geometry  <var class="pdparam">param_geom</var>, float  <var class="pdparam">vertex_fraction</var>, boolean  <var class="pdparam">is_outer = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm17802"><h2>描述</h2><p>计算多边形几何的简化的保留拓扑的外部或内部外壳。 外壳完全覆盖输入几何体。 内部外壳完全被输入几何体覆盖。 结果是由输入顶点的子集形成的多边形几何体。 处理多重多边形和孔并产生与输入结构相同的结果。 </p><p>The reduction in vertex count is controlled by the <code class="varname">vertex_fraction</code> parameter, which is a number in the range 0 to 1. Lower values produce simpler results, with smaller vertex count and less concaveness. For both outer and inner hulls a vertex fraction of 1.0 produces the original geometry. For outer hulls a value of 0.0 produces the convex hull (for a single polygon); for inner hulls it produces a triangle.</p><p>简化过程通过逐步删除包含最少面积的凹角来进行，直到达到顶点数目标。 它可以防止边交叉，因此结果始终是有效的多边形几何体。 </p><p>为了获得包含相对较长线段的几何图形的更好结果，可能需要“分段”输入，如下所示。</p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：3.3.0。</p><p class="geos_requirement">需要GEOS &gt;= 3.11.0。</p></div><div class="refsection" id="idm17812"><h2>示例</h2><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifypolygonhull02.png"/><div class="caption"><p>多边形的外壳</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_SimplifyPolygonHull(
  'POLYGON ((131 158, 136 163, 161 165, 173 156, 179 148, 169 140, 186 144, 190 137, 185 131, 174 128, 174 124, 166 119, 158 121, 158 115, 165 107, 161 97, 166 88, 166 79, 158 57, 145 57, 112 53, 111 47, 93 43, 90 48, 88 40, 80 39, 68 32, 51 33, 40 31, 39 34, 49 38, 34 38, 25 34, 28 39, 36 40, 44 46, 24 41, 17 41, 14 46, 19 50, 33 54, 21 55, 13 52, 11 57, 22 60, 34 59, 41 68, 75 72, 62 77, 56 70, 46 72, 31 69, 46 76, 52 82, 47 84, 56 90, 66 90, 64 94, 56 91, 33 97, 36 100, 23 100, 22 107, 29 106, 31 112, 46 116, 36 118, 28 131, 53 132, 59 127, 62 131, 76 130, 80 135, 89 137, 87 143, 73 145, 80 150, 88 150, 85 157, 99 162, 116 158, 115 165, 123 165, 122 170, 134 164, 131 158))',
    0.3);
</pre><p>
    </p><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifypolygonhull03.png"/><div class="caption"><p>多边形的内壳</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_SimplifyPolygonHull(
  'POLYGON ((131 158, 136 163, 161 165, 173 156, 179 148, 169 140, 186 144, 190 137, 185 131, 174 128, 174 124, 166 119, 158 121, 158 115, 165 107, 161 97, 166 88, 166 79, 158 57, 145 57, 112 53, 111 47, 93 43, 90 48, 88 40, 80 39, 68 32, 51 33, 40 31, 39 34, 49 38, 34 38, 25 34, 28 39, 36 40, 44 46, 24 41, 17 41, 14 46, 19 50, 33 54, 21 55, 13 52, 11 57, 22 60, 34 59, 41 68, 75 72, 62 77, 56 70, 46 72, 31 69, 46 76, 52 82, 47 84, 56 90, 66 90, 64 94, 56 91, 33 97, 36 100, 23 100, 22 107, 29 106, 31 112, 46 116, 36 118, 28 131, 53 132, 59 127, 62 131, 76 130, 80 135, 89 137, 87 143, 73 145, 80 150, 88 150, 85 157, 99 162, 116 158, 115 165, 123 165, 122 170, 134 164, 131 158))',
    0.3, false);
</pre><p>
    </p><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifypolygonhull01.png"/><div class="caption"><p>多多边形 的外壳简化，具有分段功能</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_SimplifyPolygonHull(
  ST_Segmentize(ST_Letters('xt'), 2.0),
    0.1);
</pre><p>
    </p></div><div class="refsection" id="idm17838"><h2>相关信息</h2><p><a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a>, <a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a></p></div></div><div class="refentry" id="ST_SimplifyVW"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SimplifyVW — 使用Visvalingam-Whyatt算法返回几何图形的简化表示</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SimplifyVW</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm17860"><h2>描述</h2><p>使用<a class="link" href="https://en.wikipedia.org/wiki/Visvalingam%E2%80%93Whyatt_algorithm" target="_top">Visvalingam-Whyatt 算法</a>返回几何图形的简化表示。简化的<code class="varname">tolerance</code>是一个面积值，以输入SRS的单位为准。简化会移除与面积小于公差的“拐角”形成的顶点。即使输入是有效的，结果可能也不是有效的。 </p><p>该函数可用于任何类型的几何图形（包括GeometryCollections），但只有线和多边形元素会被简化。线性几何的端点将被保留。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的几何图形可能会失去其简单性（参见<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>），拓扑可能不会被保留，并且多边形的结果可能是无效的（参见<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>）。使用<a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>来保留拓扑并确保有效性。<a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>也会保留拓扑和有效性。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不保留多边形之间共享的边界。如果需要保留共享边界，请使用<a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数处理 3D，第三维将影响结果。</p></td></tr></table></div><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm17878"><h2>示例</h2><p>使用最小面积公差为30对LineString进行简化。</p><pre class="programlisting">SELECT ST_AsText(ST_SimplifyVW(geom,30)) simplified
  FROM (SELECT 'LINESTRING(5 2, 3 8, 6 20, 7 25, 10 10)'::geometry AS geom) AS t;

 simplified
------------------------------
LINESTRING(5 2,7 25,10 10)
</pre><p>对一条线进行简化。</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifyvw01.png"/></div></div><pre class="programlisting">SELECT ST_SimplifyVW(
  'LINESTRING (10 10, 50 40, 30 70, 50 60, 70 80, 50 110, 100 100, 90 140, 100 180, 150 170, 170 140, 190 90, 180 40, 110 40, 150 20)',
    1600);
</pre><p>对多边形进行简化。</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_simplifyvw02.png"/></div></div><pre class="programlisting">SELECT ST_SimplifyVW(
  'MULTIPOLYGON (((90 110, 80 180, 50 160, 10 170, 10 140, 20 110, 90 110)), ((40 80, 100 100, 120 160, 170 180, 190 70, 140 10, 110 40, 60 40, 40 80), (180 70, 170 110, 142.5 128.5, 128.5 77.5, 90 60, 180 70)))',
    40);
</pre></div><div class="refsection" id="idm17894"><h2>相关信息</h2><p><a class="xref" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a>, <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>, <a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>, Topology <a class="xref" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" id="ST_SetEffectiveArea"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetEffectiveArea — 使用 Visvalingam-Whyatt 算法设置每个顶点的有效区域。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SetEffectiveArea</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">threshold = 0</var>, integer <var class="pdparam">set_area = 1</var><code>)</code>;</p></div></div><div class="refsection" id="idm17920"><h2>描述</h2><p>使用 Visvalingam-Whyatt 算法设置每个顶点的有效区域。 有效区域存储为顶点的 M 值。 如果使用可选的“threshold”参数，则将返回简化的几何图形，仅包含有效区域大于或等于阈值的顶点。 </p><p>当指定阈值时，此函数可用于服务器端简化。 另一种选择是使用零阈值。 在这种情况下，将返回完整的几何图形，其中有效区域作为 M 值，客户端可以使用它来快速简化。 </p><p>实际上只会对（多）线和（多）多边形执行某些操作，但您可以使用任何类型的几何体安全地调用它。 由于简化是在逐个对象的基础上进行的，因此您还可以将 GeometryCollection 提供给此函数。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请注意，返回的几何图形可能会失去其简单性（请参阅<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>）</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请注意，拓扑可能不会保留，并可能导致无效的几何图形。 使用（请参阅<a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>）保留拓扑。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>输出几何图形将丢失 M 值中的所有先前信息</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此功能处理 3D，三维度会影响有效区域</p></td></tr></table></div><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm17936"><h2>示例</h2><p>计算 LineString 的有效区域。 因为我们使用阈值为零，所以返回输入几何体中的所有顶点。 </p><pre class="programlisting">select ST_AsText(ST_SetEffectiveArea(geom)) all_pts, ST_AsText(ST_SetEffectiveArea(geom,30) ) thrshld_30
FROM (SELECT  'LINESTRING(5 2, 3 8, 6 20, 7 25, 10 10)'::geometry geom) As foo;
-result
 all_pts | thrshld_30
-----------+-------------------+
LINESTRING M (5 2 3.40282346638529e+38,3 8 29,6 20 1.5,7 25 49.5,10 10 3.40282346638529e+38) | LINESTRING M (5 2 3.40282346638529e+38,7 25 49.5,10 10 3.40282346638529e+38)

                </pre></div><div class="refsection" id="idm17940"><h2>相关信息</h2><p><a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a></p></div></div><div class="refentry" id="ST_TriangulatePolygon"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_TriangulatePolygon — 计算多边形的约束 Delaunay 三角剖分</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_TriangulatePolygon</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm17956"><h2>描述</h2><p>计算多边形的约束 Delaunay 三角剖分。 支持孔和多边形。 </p><p>多边形的“约束 Delaunay 三角剖分”是由多边形的顶点形成的一组三角形，并精确地覆盖它，并且在所有可能的三角剖分上具有最大总内角。 它提供了多边形的“最佳质量”三角测量。</p><p class="availability">可用性：3.3.0。</p><p class="geos_requirement">需要GEOS &gt;= 3.11.0。</p></div><div class="refsection" id="idm17962"><h2>示例</h2><p>正方形的三角剖分。</p><pre class="programlisting">SELECT ST_AsText(
    ST_TriangulatePolygon('POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))'));

                                 st_astext
---------------------------------------------------------------------------
 GEOMETRYCOLLECTION(POLYGON((0 0,0 1,1 1,0 0)),POLYGON((1 1,1 0,0 0,1 1)))
                </pre></div><div class="refsection" id="idm17966"><h2>示例</h2><p>字母 P 的三角剖分。</p><pre class="programlisting">SELECT ST_AsText(ST_TriangulatePolygon(
    'POLYGON ((26 17, 31 19, 34 21, 37 24, 38 29, 39 43, 39 161, 38 172, 36 176, 34 179, 30 181, 25 183, 10 185, 10 190, 100 190, 121 189, 139 187, 154 182, 167 177, 177 169, 184 161, 189 152, 190 141, 188 128, 186 123, 184 117, 180 113, 176 108, 170 104, 164 101, 151 96, 136 92, 119 89, 100 89, 86 89, 73 89, 73 39, 74 32, 75 27, 77 23, 79 20, 83 18, 89 17, 106 15, 106 10, 10 10, 10 15, 26 17), (152 147, 151 152, 149 157, 146 162, 142 166, 137 169, 132 172, 126 175, 118 177, 109 179, 99 180, 89 180, 80 179, 76 178, 74 176, 73 171, 73 100, 85 99, 91 99, 102 99, 112 100, 121 102, 128 104, 134 107, 139 110, 143 114, 147 118, 149 123, 151 128, 153 141, 152 147))'
    ));
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_triangulatepolygon01.png"/><div class="caption"><p>多边形三角剖分</p></div></div></div></div><div class="refsection" id="idm17976"><h2>同样的例子，如ST_Tesselate</h2><pre class="programlisting">SELECT ST_TriangulatePolygon(
                'POLYGON (( 10 190, 10 70, 80 70, 80 130, 50 160, 120 160, 120 190, 10 190 ))'::geometry
                );</pre><p>ST_AsText 输出</p><pre class="screen">GEOMETRYCOLLECTION(POLYGON((50 160,120 190,120 160,50 160))
    ,POLYGON((10 70,80 130,80 70,10 70))
    ,POLYGON((50 160,10 70,10 190,50 160))
    ,POLYGON((120 190,50 160,10 190,120 190))
    ,POLYGON((80 130,10 70,50 160,80 130)))</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
                      </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate03.png"/><div class="caption"><p>原始多边形</p></div></div></div>
                      </td><td>
                      <div class="informalfigure"><div class="mediaobject"><img src="images/st_triangulatepolygon02.png"/><div class="caption"><p>三角形多边形</p></div></div></div>
                      </td></tr></tbody></table></div></div><div class="refsection" id="idm18001"><h2>相关信息</h2><p><a class="xref" href="#ST_ConstrainedDelaunayTriangles" title="ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a>, <a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>, <a class="xref" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> </p></div></div><div class="refentry" id="ST_VoronoiLines"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_VoronoiLines — 返回几何体顶点的 Voronoi 图的边界。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_VoronoiLines</strong>(</code> geometry <var class="pdparam">geom</var> ,  float8 <var class="pdparam">tolerance = 0.0</var> ,  geometry <var class="pdparam">extend_to = NULL</var> <code>)</code>;</p></div></div><div class="refsection" id="idm18025"><h2>描述</h2><p>根据提供的几何图形的顶点计算二维<a class="link" href="https://en.wikipedia.org/wiki/Voronoi_diagram" target="_top"> Voronoi 图</a>，并将图中单元格之间的边界作为 MultiLineString 返回。 如果输入几何图形为 null，则返回 null。 如果输入几何图形仅包含一个顶点，则返回一个空几何图形集合。 如果<code class="varname">extend_to</code>最小外接矩形的面积为零，则返回空几何集合。 </p><p>可选参数： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">tolerance</code>：顶点被视为相等的距离。 通过提供非零容差距离可以提高算法的稳健性。 （默认 = 0.0）</p></li><li class="listitem"><p><code class="varname">extend_to</code>：如果存在，图表将扩展以覆盖所提供几何图形的最小外接矩形，除非小于默认最小外接矩形（默认 = NULL，默认最小外接矩形是输入扩展约 50% 的边界框）。 </p></li></ul></div><p>
        </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm18040"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi03.png"/><div class="caption"><p>Voronoi 图线，容差为 30 个单位</p></div></div></div><pre class="programlisting">SELECT ST_VoronoiLines(
            'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry,
            30) AS geom;
</pre><pre class="screen"><em class="lineannotation"><span class="lineannotation">ST_AsText output</span></em>
MULTILINESTRING((135.555555555556 270,36.8181818181818 92.2727272727273),(36.8181818181818 92.2727272727273,-110 43.3333333333333),(230 -45.7142857142858,36.8181818181818 92.2727272727273))
</pre></div><div class="refsection" id="idm18051"><h2>相关信息</h2><p><a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>, <a class="xref" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a> </p></div></div><div class="refentry" id="ST_VoronoiPolygons"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_VoronoiPolygons — 返回几何体顶点的 Voronoi 图的单元格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_VoronoiPolygons</strong>(</code> geometry <var class="pdparam">geom</var> ,  float8 <var class="pdparam">tolerance = 0.0</var> ,  geometry <var class="pdparam">extend_to = NULL</var> <code>)</code>;</p></div></div><div class="refsection" id="idm18074"><h2>描述</h2><p>根据提供的几何图形的顶点计算二维<a class="link" href="https://en.wikipedia.org/wiki/Voronoi_diagram" target="_top"> Voronoi 图</a>。 结果是 POLYGON 的 GEOMETRYCOLLECTION，其覆盖的包络大于输入顶点的范围。 如果输入几何图形为 null，则返回 null。 如果输入几何图形仅包含一个顶点，则返回一个空几何图形集合。 如果<code class="varname">extend_to</code>最小外接矩形的面积为零，则返回空几何集合。 </p><p>可选参数： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">tolerance</code>：顶点被视为相等的距离。 通过提供非零容差距离可以提高算法的稳健性。 （默认 = 0.0） </p></li><li class="listitem"><p><code class="varname">extend_to</code>：如果存在，图表将扩展以覆盖所提供几何图形的最小外接矩形，除非小于默认最小外接矩形（默认 = NULL，默认最小外接矩形是输入扩展约 50% 的边界框）。 </p></li></ul></div><p>
        </p><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm18089"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi01.png"/><div class="caption"><p>覆盖在 Voronoi 图顶部的点</p></div></div></div><pre class="programlisting">SELECT ST_VoronoiPolygons(
                'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry
            ) AS geom;
</pre><pre class="screen"><em class="lineannotation"><span class="lineannotation">ST_AsText output</span></em>
GEOMETRYCOLLECTION(POLYGON((-110 43.3333333333333,-110 270,100.5 270,59.3478260869565 132.826086956522,36.8181818181818 92.2727272727273,-110 43.3333333333333)),
POLYGON((55 -90,-110 -90,-110 43.3333333333333,36.8181818181818 92.2727272727273,55 79.2857142857143,55 -90)),
POLYGON((230 47.5,230 -20.7142857142857,55 79.2857142857143,36.8181818181818 92.2727272727273,59.3478260869565 132.826086956522,230 47.5)),POLYGON((230 -20.7142857142857,230 -90,55 -90,55 79.2857142857143,230 -20.7142857142857)),
POLYGON((100.5 270,230 270,230 47.5,59.3478260869565 132.826086956522,100.5 270)))
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi02.png"/><div class="caption"><p>Voronoi 图，容差为 30 个单位</p></div></div></div><pre class="programlisting">SELECT ST_VoronoiPolygons(
            'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry,
            30) AS geom;
</pre><pre class="screen"><em class="lineannotation"><span class="lineannotation">ST_AsText output</span></em>
GEOMETRYCOLLECTION(POLYGON((-110 43.3333333333333,-110 270,100.5 270,59.3478260869565 132.826086956522,36.8181818181818 92.2727272727273,-110 43.3333333333333)),
POLYGON((230 47.5,230 -45.7142857142858,36.8181818181818 92.2727272727273,59.3478260869565 132.826086956522,230 47.5)),POLYGON((230 -45.7142857142858,230 -90,-110 -90,-110 43.3333333333333,36.8181818181818 92.2727272727273,230 -45.7142857142858)),
POLYGON((100.5 270,230 270,230 47.5,59.3478260869565 132.826086956522,100.5 270)))
</pre></div><div class="refsection" id="idm18109"><h2>相关信息</h2><p><a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>, <a class="xref" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a> </p></div></div></section><section class="section" id="Coverage"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.15. 覆盖范围</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数对形成“隐式覆盖”的多边形几何体集进行操作。 为了形成有效的覆盖范围，多边形不得重叠，并且相邻边的顶点必须完全匹配。 覆盖处理速度很快，并且可以使用窗口函数进行操作，窗口函数保留窗口分区内的覆盖拓扑，同时更改边缘。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a></span><span class="refpurpose"> — 用于查找多边形无法形成有效覆盖范围的位置的窗口函数。</span></li><li><span class="refentrytitle"><a href="#ST_CoverageSimplify">ST_CoverageSimplify</a></span><span class="refpurpose"> — 简化多边形覆盖范围边缘的窗口函数。</span></li><li><span class="refentrytitle"><a href="#ST_CoverageUnion">ST_CoverageUnion</a></span><span class="refpurpose"> — 通过删除共享边来计算形成覆盖范围的一组多边形的并集。</span></li></ul></div><div class="refentry" id="ST_CoverageInvalidEdges"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CoverageInvalidEdges — 用于查找多边形无法形成有效覆盖范围的位置的窗口函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CoverageInvalidEdges</strong>(</code>geometry winset  <var class="pdparam">geom</var>, float8  <var class="pdparam">tolerance = 0</var><code>)</code>;</p></div></div><div class="refsection" id="idm18134"><h2>描述</h2><p>一个窗口函数，用于检查窗口分区中的多边形是否形成有效的多边形覆盖范围。 它返回线性指示器，显示每个多边形中无效边（如果有）的位置。 </p><p>如果满足以下条件，则一组有效多边形是有效的覆盖范围： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>Non-overlapping</strong></span>-多边形不重叠（它们的内部不相交） </p></li><li class="listitem"><p><span class="bold"><strong>Edge-Matched</strong></span>-沿共享边的顶点相同 </p></li></ul></div><p>作为窗口函数，为每个输入多边形返回一个值。 对于违反一个或多个有效性条件的多边形，返回值是包含有问题边的 MULTILINESTRING。 覆盖范围有效的面返回值 NULL。 非多边形或空几何图形也会产生 NULL 值。</p><p>只要周围的多边形边缘匹配，这些条件就允许有效的覆盖范围包含孔（多边形之间的间隙）。 然而，非常窄的间隙通常是不希望的。 如果使用非零距离指定<em class="parameter"><code>公差</code></em>参数，则形成较窄间隙的边缘也将被返回为无效。 </p><p>正在检查覆盖范围有效性的多边形也必须是有效的几何图形。 这可以使用<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a> 进行检查。 </p><p class="availability">可用性：3.4.0</p><p class="geos_requirement">需要GEOS &gt;= 3.12.0</p></div><div class="refsection" id="idm18152"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_coverageinvalidedges01.png"/><div class="caption"><p>由重叠和不匹配顶点引起的无效边</p></div></div></div><pre class="programlisting">WITH coverage(id, geom) AS (VALUES
  (1, 'POLYGON ((10 190, 30 160, 40 110, 100 70, 120 10, 10 10, 10 190))'::geometry),
  (2, 'POLYGON ((100 190, 10 190, 30 160, 40 110, 50 80, 74 110.5, 100 130, 140 120, 140 160, 100 190))'::geometry),
  (3, 'POLYGON ((140 190, 190 190, 190 80, 140 80, 140 190))'::geometry),
  (4, 'POLYGON ((180 40, 120 10, 100 70, 140 80, 190 80, 180 40))'::geometry)
)
SELECT id, ST_AsText(ST_CoverageInvalidEdges(geom) OVER ())
  FROM coverage;

 id |               st_astext
----+---------------------------------------
  1 | LINESTRING (40 110, 100 70)
  2 | MULTILINESTRING ((100 130, 140 120, 140 160, 100 190), (40 110, 50 80, 74 110.5))
  3 | LINESTRING (140 80, 140 190)
  4 | null
      </pre><pre class="programlisting">-- Test entire table for coverage validity
SELECT true = ALL (
    SELECT ST_CoverageInvalidEdges(geom) OVER () IS NULL
    FROM coverage
    );
      </pre></div><div class="refsection" id="idm18162"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_CoverageUnion" title="ST_CoverageUnion">ST_CoverageUnion</a>, <a class="xref" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a> </p></div></div><div class="refentry" id="ST_CoverageSimplify"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CoverageSimplify — 简化多边形覆盖范围边缘的窗口函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CoverageSimplify</strong>(</code>geometry winset  <var class="pdparam">geom</var>, float8  <var class="pdparam">tolerance</var>, boolean  <var class="pdparam">simplifyBoundary = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm18186"><h2>描述</h2><p>一种窗函数，可简化多边形覆盖范围内的多边形边缘。 简化保留了覆盖拓扑。 这意味着简化的输出多边形沿着共享边是一致的，并且仍然形成有效的覆盖范围。 </p><p>简化使用了 <a class="link" href="https://en.wikipedia.org/wiki/Visvalingam%E2%80%93Whyatt_algorithm" target="_top">Visvalingam–Whyatt </a>算法的格式。 <em class="parameter"><code>公差</code></em>参数以距离为单位，大致等于待简化的三角形面积的平方根。 </p><p>要仅简化 Coverage 的“内部”边缘（由两个多边形共享的边缘），请将 <em class="parameter"><code>SimplyBoundary </code></em>参数设置为 false。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果输入不是有效的覆盖范围，则输出中可能会出现意外的伪影（例如边界交叉点或看似共享的分离边界）。 使用 <a class="xref" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a> 确定覆盖范围是否有效。 </p></td></tr></table></div><p class="availability">可用性：3.4.0</p><p class="geos_requirement">需要GEOS &gt;= 3.12.0</p></div><div class="refsection" id="idm18199"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_coveragesimplify01.png"/><div class="caption"><p>输入覆盖范围</p></div></div></div><p>
        </p></td><td><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_coveragesimplify02.png"/><div class="caption"><p>简化覆盖范围</p></div></div></div><p>
        </p></td></tr></tbody></table></div><pre class="programlisting">WITH coverage(id, geom) AS (VALUES
  (1, 'POLYGON ((160 150, 110 130, 90 100, 90 70, 60 60, 50 10, 30 30, 40 50, 25 40, 10 60, 30 100, 30 120, 20 170, 60 180, 90 190, 130 180, 130 160, 160 150), (40 160, 50 140, 66 125, 60 100, 80 140, 90 170, 60 160, 40 160))'::geometry),
  (2, 'POLYGON ((40 160, 60 160, 90 170, 80 140, 60 100, 66 125, 50 140, 40 160))'::geometry),
  (3, 'POLYGON ((110 130, 160 50, 140 50, 120 33, 90 30, 50 10, 60 60, 90 70, 90 100, 110 130))'::geometry),
  (4, 'POLYGON ((160 150, 150 120, 160 90, 160 50, 110 130, 160 150))'::geometry)
)
SELECT id, ST_AsText(ST_CoverageSimplify(geom, 30) OVER ())
  FROM coverage;

 id |               st_astext
----+---------------------------------------
  1 | POLYGON ((160 150, 110 130, 50 10, 10 60, 20 170, 90 190, 160 150), (40 160, 66 125, 90 170, 40 160))
  2 | POLYGON ((40 160, 66 125, 90 170, 40 160))
  3 | POLYGON ((110 130, 160 50, 50 10, 110 130))
  4 | POLYGON ((160 150, 160 50, 110 130, 160 150))
      </pre></div><div class="refsection" id="idm18222"><h2>相关信息</h2><p>
        <a class="xref" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a>
      </p></div></div><div class="refentry" id="ST_CoverageUnion"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CoverageUnion — 通过删除共享边来计算形成覆盖范围的一组多边形的并集。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_CoverageUnion</strong>(</code>geometry set <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm18238"><h2>描述</h2><p>将一组多边形联合起来形成多边形覆盖范围的聚合函数。 结果是覆盖与覆盖范围相同的区域的多边形几何体。 该函数产生与 <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>相同的结果，但使用覆盖结构来更快地计算并集。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果输入不是有效的覆盖范围，则输出中可能会出现意外的伪影（例如未合并或重叠的多边形）。 使用 <a class="xref" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a>确定覆盖范围是否有效。 </p></td></tr></table></div><p class="availability">可用性：3.4.0-需要 GEOS &gt;= 3.8.0</p></div><div class="refsection" id="idm18246"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_coverageunion01.png"/><div class="caption"><p>输入覆盖范围</p></div></div></div><p>
        </p></td><td><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_coverageunion02.png"/><div class="caption"><p>联合结果</p></div></div></div><p>
        </p></td></tr></tbody></table></div><pre class="programlisting">WITH coverage(id, geom) AS (VALUES
  (1, 'POLYGON ((10 10, 10 150, 80 190, 110 150, 90 110, 40 110, 50 60, 10 10))'::geometry),
  (2, 'POLYGON ((120 10, 10 10, 50 60, 100 70, 120 10))'::geometry),
  (3, 'POLYGON ((140 80, 120 10, 100 70, 40 110, 90 110, 110 150, 140 80))'::geometry),
  (4, 'POLYGON ((140 190, 120 170, 140 130, 160 150, 140 190))'::geometry),
  (5, 'POLYGON ((180 160, 170 140, 140 130, 160 150, 140 190, 180 160))'::geometry)
)
SELECT ST_AsText(ST_CoverageUnion(geom))
  FROM coverage;

--------------------------------------
MULTIPOLYGON (((10 150, 80 190, 110 150, 140 80, 120 10, 10 10, 10 150), (50 60, 100 70, 40 110, 50 60)), ((120 170, 140 190, 180 160, 170 140, 140 130, 120 170)))
      </pre></div><div class="refsection" id="idm18269"><h2>相关信息</h2><p><a class="xref" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> </p></div></div></section><section class="section" id="Affine_Transformation"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.16. 仿射变换</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数使用<a class="link" href="https://en.wikipedia.org/wiki/Affine_transformation" target="_top">仿射变换</a>来改变几何图形的位置和形状。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_Affine">ST_Affine</a></span><span class="refpurpose"> — 对几何体应用 3D 仿射变换。</span></li><li><span class="refentrytitle"><a href="#ST_Rotate">ST_Rotate</a></span><span class="refpurpose"> — 绕原点旋转几何体。</span></li><li><span class="refentrytitle"><a href="#ST_RotateX">ST_RotateX</a></span><span class="refpurpose"> — 绕 X 轴旋转几何体。</span></li><li><span class="refentrytitle"><a href="#ST_RotateY">ST_RotateY</a></span><span class="refpurpose"> — 绕 Y 轴旋转几何体。</span></li><li><span class="refentrytitle"><a href="#ST_RotateZ">ST_RotateZ</a></span><span class="refpurpose"> — 绕 Z 轴旋转几何体。</span></li><li><span class="refentrytitle"><a href="#ST_Scale">ST_Scale</a></span><span class="refpurpose"> — 按给定因子缩放几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_Translate">ST_Translate</a></span><span class="refpurpose"> — 按给定的偏移量平移几何图形。</span></li><li><span class="refentrytitle"><a href="#ST_TransScale">ST_TransScale</a></span><span class="refpurpose"> — 按给定的偏移量和系数平移和缩放几何图形。</span></li></ul></div><div class="refentry" id="ST_Affine"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Affine — 对几何体应用 3D 仿射变换。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Affine</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">a</var>, float  <var class="pdparam">b</var>, float  <var class="pdparam">c</var>, float  <var class="pdparam">d</var>, float  <var class="pdparam">e</var>, float  <var class="pdparam">f</var>, float  <var class="pdparam">g</var>, float  <var class="pdparam">h</var>, float  <var class="pdparam">i</var>, float  <var class="pdparam">xoff</var>, float  <var class="pdparam">yoff</var>, float  <var class="pdparam">zoff</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Affine</strong>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">a</var>, float  <var class="pdparam">b</var>, float  <var class="pdparam">d</var>, float  <var class="pdparam">e</var>, float  <var class="pdparam">xoff</var>, float  <var class="pdparam">yoff</var><code>)</code>;</p></div></div><div class="refsection" id="idm18352"><h2>描述</h2><p>对几何体应用 3D 仿射变换，一步完成平移、旋转、缩放等操作。</p><p>版本1：调用</p><pre class="programlisting">ST_Affine(geom, a, b, c, d, e, f, g, h, i, xoff, yoff, zoff)</pre><p>表示变换矩阵</p><pre class="programlisting">/ a b c xoff \
| d e f yoff |
| g h i zoff |
\ 0 0 0     1 /</pre><p> 并且顶点变换如下： </p><pre class="programlisting">x' = a*x + b*y + c*z + xoff
y' = d*x + e*y + f*z + yoff
z' = g*x + h*y + i*z + zoff</pre><p> 下面所有的平移/缩放函数都是通过这样的仿射变换来表达的。</p><p>版本 2：对几何体应用 2d 仿射变换。 调用</p><pre class="programlisting">ST_Affine(geom, a, b, d, e, xoff, yoff)</pre><p>表示变换矩阵</p><pre class="programlisting">/ a b 0 xoff \ / a b xoff \
| d e 0 yoff | rsp.   | d e yoff |
| 0 0 1 0 | 0 0 1 0 \ 0 0 1 /
\ 0 0 0    1 /</pre><p> 并且顶点变换如下： </p><pre class="programlisting">x' = a*x + b*y + xoff
y' = d*x + e*y + yoff
z' = z </pre><p> 此方法是上述 3D 方法的子情况。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="availability">可用性：1.1.2。 1.2.2 中名称从 Affine 更改为 ST_Affine</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm18383"><h2>示例</h2><pre class="programlisting">--Rotate a 3d line 180 degrees about the z axis.  Note this is long-hand for doing ST_Rotate();
 SELECT ST_AsEWKT(ST_Affine(geom,  cos(pi()), -sin(pi()), 0,  sin(pi()), cos(pi()), 0,  0, 0, 1,  0, 0, 0)) As using_affine,
         ST_AsEWKT(ST_Rotate(geom, pi())) As using_rotate
        FROM (SELECT ST_GeomFromEWKT('LINESTRING(1 2 3, 1 4 3)') As geom) As foo;
        using_affine         |        using_rotate
-----------------------------+-----------------------------
 LINESTRING(-1 -2 3,-1 -4 3) | LINESTRING(-1 -2 3,-1 -4 3)
(1 row)

--Rotate a 3d line 180 degrees in both the x and z axis
SELECT ST_AsEWKT(ST_Affine(geom, cos(pi()), -sin(pi()), 0, sin(pi()), cos(pi()), -sin(pi()), 0, sin(pi()), cos(pi()), 0, 0, 0))
        FROM (SELECT ST_GeomFromEWKT('LINESTRING(1 2 3, 1 4 3)') As geom) As foo;
           st_asewkt
-------------------------------
 LINESTRING(-1 -2 -3,-1 -4 -3)
(1 row)
                </pre></div><div class="refsection" id="idm18386"><h2>相关信息</h2><p><a class="xref" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a>, <a class="xref" href="#ST_Scale" title="ST_Scale">ST_Scale</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a>, <a class="xref" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a></p></div></div><div class="refentry" id="ST_Rotate"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Rotate — 绕原点旋转几何体。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Rotate</strong>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Rotate</strong>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var>, float <var class="pdparam">x0</var>, float <var class="pdparam">y0</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Rotate</strong>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var>, geometry <var class="pdparam">pointOrigin</var><code>)</code>;</p></div></div><div class="refsection" id="idm18435"><h2>描述</h2><p>围绕原点逆时针旋转几何体 rotRadians。 旋转原点可以指定为 POINT 几何图形，也可以指定为 x 和 y 坐标。 如果未指定原点，则几何图形将围绕 POINT(0 0) 旋转。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="enhanced">增强：2.0.0 添加了用于指定旋转原点的附加参数。</p><p class="availability">可用性：1.1.2。 1.2.2 中名称从 Rotate 更改为 ST_Rotate</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm18457"><h2>示例</h2><pre class="programlisting">--Rotate 180 degrees
SELECT ST_AsEWKT(ST_Rotate('LINESTRING (50 160, 50 50, 100 50)', pi()));
               st_asewkt
---------------------------------------
 LINESTRING(-50 -160,-50 -50,-100 -50)
(1 row)

--Rotate 30 degrees counter-clockwise at x=50, y=160
SELECT ST_AsEWKT(ST_Rotate('LINESTRING (50 160, 50 50, 100 50)', pi()/6, 50, 160));
                                 st_asewkt
---------------------------------------------------------------------------
 LINESTRING(50 160,105 64.7372055837117,148.301270189222 89.7372055837117)
(1 row)

--Rotate 60 degrees clockwise from centroid
SELECT ST_AsEWKT(ST_Rotate(geom, -pi()/3, ST_Centroid(geom)))
FROM (SELECT 'LINESTRING (50 160, 50 50, 100 50)'::geometry AS geom) AS foo;
                           st_asewkt
--------------------------------------------------------------
 LINESTRING(116.4225 130.6721,21.1597 75.6721,46.1597 32.3708)
(1 row)
                </pre></div><div class="refsection" id="idm18460"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>, <a class="xref" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a>, <a class="xref" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a></p></div></div><div class="refentry" id="ST_RotateX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RotateX — 绕 X 轴旋转几何体。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RotateX</strong>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p></div></div><div class="refsection" id="idm18482"><h2>描述</h2><p>绕 X 轴旋转几何体 geomA - rotRadians。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="code">ST_RotateX(geomA, rotRadians) </code>是 <code class="code">ST_Affine(geomA, 1, 0, 0, 0, cos(rotRadians), -sin(rotRadians), 0, sin(rotRadians), cos(rotRadians), 0, 0, 0）</code>的简写。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="availability">可用性：1.1.2。 1.2.2 中名称从 RotateX 更改为 ST_RotateX</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm18503"><h2>示例</h2><pre class="programlisting">--Rotate a line 90 degrees along x-axis
SELECT ST_AsEWKT(ST_RotateX(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), pi()/2));
                 st_asewkt
---------------------------
 LINESTRING(1 -3 2,1 -1 1)
</pre></div><div class="refsection" id="idm18506"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a>, <a class="xref" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a></p></div></div><div class="refentry" id="ST_RotateY"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RotateY — 绕 Y 轴旋转几何体。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RotateY</strong>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p></div></div><div class="refsection" id="idm18527"><h2>描述</h2><p>围绕 y 轴旋转几何体 geomA - rotRadians。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="code">ST_RotateY(geomA, rotRadians)</code> 是 <code class="code">ST_Affine(geomA, cos(rotRadians), 0, sin(rotRadians), 0, 1, 0, -sin(rotRadians), 0, cos(rotRadians), 0, 0, 0）</code>的简写。</p></td></tr></table></div><p class="availability">可用性：1.1.2。 1.2.2 中名称从 RotateY 更改为 ST_RotateY</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm18548"><h2>示例</h2><pre class="programlisting">--Rotate a line 90 degrees along y-axis
 SELECT ST_AsEWKT(ST_RotateY(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), pi()/2));
                 st_asewkt
---------------------------
 LINESTRING(3 2 -1,1 1 -1)
</pre></div><div class="refsection" id="idm18551"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>, <a class="xref" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a></p></div></div><div class="refentry" id="ST_RotateZ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RotateZ — 绕 Z 轴旋转几何体。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_RotateZ</strong>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p></div></div><div class="refsection" id="idm18572"><h2>描述</h2><p>绕 Z 轴旋转几何体 geomA - rotRadians。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这是 ST_Rotate 的同义词</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="code">ST_RotateZ(geomA, rotRadians)</code> 是 <code class="code">SELECT ST_Affine(geomA, cos(rotRadians), -sin(rotRadians), 0, sin(rotRadians), cos(rotRadians), 0, 0, 0, 1, 0, 0, 0)</code>的简写。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="availability">可用性：1.1.2。 1.2.2 中名称从 RotateZ 更改为 ST_RotateZ</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm18601"><h2>示例</h2><pre class="programlisting">--Rotate a line 90 degrees along z-axis
SELECT ST_AsEWKT(ST_RotateZ(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), pi()/2));
                 st_asewkt
---------------------------
 LINESTRING(-2 1 3,-1 1 1)

 --Rotate a curved circle around z-axis
SELECT ST_AsEWKT(ST_RotateZ(geom, pi()/2))
FROM (SELECT ST_LineToCurve(ST_Buffer(ST_GeomFromText('POINT(234 567)'), 3)) As geom) As foo;

                                                                                                           st_asewkt
----------------------------------------------------------------------------------------------------------------------------
 CURVEPOLYGON(CIRCULARSTRING(-567 237,-564.87867965644 236.12132034356,-564 234,-569.12132034356 231.87867965644,-567 237))

</pre></div><div class="refsection" id="idm18604"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>, <a class="xref" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a></p></div></div><div class="refentry" id="ST_Scale"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Scale — 按给定因子缩放几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Scale</strong>(</code>geometry  <var class="pdparam">geomA</var>, float <var class="pdparam">XFactor</var>, float <var class="pdparam">YFactor</var>, float <var class="pdparam">ZFactor</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Scale</strong>(</code>geometry  <var class="pdparam">geomA</var>, float <var class="pdparam">XFactor</var>, float <var class="pdparam">YFactor</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Scale</strong>(</code>geometry  <var class="pdparam">geom</var>, geometry <var class="pdparam">factor</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Scale</strong>(</code>geometry  <var class="pdparam">geom</var>, geometry <var class="pdparam">factor</var>, geometry <var class="pdparam">origin</var><code>)</code>;</p></div></div><div class="refsection" id="idm18664"><h2>描述</h2><p>通过将坐标与相应的因子参数相乘，将几何体缩放到新的尺寸。 </p><p>采用几何图形作为 <code class="varname">factor</code> 参数的版本允许传递 2d、3dm、3dz 或 4d 点来为所有支持的维度设置缩放因子。 <code class="varname">factor</code> 点中缺少维度相当于没有缩放相应的维度。 </p><p>三几何体变体允许传入缩放的“假原点”。这允许“就地缩放”，例如使用几何体的质心作为假原点。 如果没有假原点，缩放是相对于实际原点进行的，因此所有坐标都只是乘以比例因子。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p class="availability">可用性：1.1.0。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="enhanced">增强：2.2.0 引入了对缩放所有维度（<code class="varname">factor</code> 参数）的支持。</p><p class="enhanced">增强：2.5.0 引入了对相对于本地原点（<code class="varname">origin</code> 参数）进行缩放的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm18699"><h2>示例</h2><pre class="programlisting">--Version 1: scale X, Y, Z
SELECT ST_AsEWKT(ST_Scale(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), 0.5, 0.75, 0.8));
                          st_asewkt
--------------------------------------
 LINESTRING(0.5 1.5 2.4,0.5 0.75 0.8)

--Version 2: Scale X Y
 SELECT ST_AsEWKT(ST_Scale(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), 0.5, 0.75));
                        st_asewkt
----------------------------------
 LINESTRING(0.5 1.5 3,0.5 0.75 1)

--Version 3: Scale X Y Z M
 SELECT ST_AsEWKT(ST_Scale(ST_GeomFromEWKT('LINESTRING(1 2 3 4, 1 1 1 1)'),
   ST_MakePoint(0.5, 0.75, 2, -1)));
                               st_asewkt
----------------------------------------
 LINESTRING(0.5 1.5 6 -4,0.5 0.75 2 -1)

--Version 4: Scale X Y using false origin
SELECT ST_AsText(ST_Scale('LINESTRING(1 1, 2 2)', 'POINT(2 2)', 'POINT(1 1)'::geometry));
      st_astext
---------------------
 LINESTRING(1 1,3 3)

</pre></div><div class="refsection" id="idm18702"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a></p></div></div><div class="refentry" id="ST_Translate"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Translate — 按给定的偏移量平移几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Translate</strong>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">deltax</var>, float  <var class="pdparam">deltay</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Translate</strong>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">deltax</var>, float  <var class="pdparam">deltay</var>, float  <var class="pdparam">deltaz</var><code>)</code>;</p></div></div><div class="refsection" id="idm18740"><h2>描述</h2><p>返回一个新的几何图形，其坐标转换为 delta x、delta y、delta z 单位。 单位基于该几何的空间参考 (SRID) 中定义的单位。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p class="availability">可用性：1.2.2</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm18754"><h2>示例</h2><p>将点移动 1 度经度</p><pre class="programlisting">SELECT ST_AsText(ST_Translate(ST_GeomFromText('POINT(-71.01 42.37)',4326),1,0)) As wgs_transgeomtxt;

        wgs_transgeomtxt
        ---------------------
        POINT(-70.01 42.37)
                </pre><p>将线串移动 1 度经度和 1/2 度纬度</p><pre class="programlisting">SELECT ST_AsText(ST_Translate(ST_GeomFromText('LINESTRING(-71.01 42.37,-71.11 42.38)',4326),1,0.5)) As wgs_transgeomtxt;
                   wgs_transgeomtxt
        ---------------------------------------
        LINESTRING(-70.01 42.87,-70.11 42.88)
                </pre><p>移动 3d 点</p><pre class="programlisting">SELECT ST_AsEWKT(ST_Translate(CAST('POINT(0 0 0)' As geometry), 5, 12,3));
        st_asewkt
        ---------
        POINT(5 12 3)
                </pre><p>移动曲线和点</p><pre class="programlisting">SELECT ST_AsText(ST_Translate(ST_Collect('CURVEPOLYGON(CIRCULARSTRING(4 3,3.12 0.878,1 0,-1.121 5.1213,6 7, 8 9,4 3))','POINT(1 3)'),1,2));
                                                                                                                 st_astext
------------------------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(CURVEPOLYGON(CIRCULARSTRING(5 5,4.12 2.878,2 2,-0.121 7.1213,7 9,9 11,5 5)),POINT(2 5))
</pre></div><div class="refsection" id="idm18764"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="ST_TransScale"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_TransScale — 按给定的偏移量和系数平移和缩放几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_TransScale</strong>(</code>geometry  <var class="pdparam">geomA</var>, float <var class="pdparam">deltaX</var>, float <var class="pdparam">deltaY</var>, float <var class="pdparam">XFactor</var>, float <var class="pdparam">YFactor</var><code>)</code>;</p></div></div><div class="refsection" id="idm18794"><h2>描述</h2><p>使用 deltaX 和 deltaY 参数转换几何体，然后使用 XFactor、YFactor 参数缩放它，仅在 2D 中工作。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="code">ST_TransScale(geomA, deltaX, deltaY, XFactor, YFactor) </code>是<code class="code"> ST_Affine(geomA, XFactor, 0, 0, 0, YFactor, 0, 0, 0, 1, deltaX*XFactor, deltaY*YFactor, 0) </code>的简写。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 1.3.4 之前，此函数在与包含曲线的几何图形一起使用时崩溃。 此问题已在 1.3.4 及更高版本中得到纠正</p></td></tr></table></div><p class="availability">可用性：1.1.0。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm18812"><h2>示例</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_TransScale(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), 0.5, 1, 1, 2));
                  st_asewkt
-----------------------------
 LINESTRING(1.5 6 3,1.5 4 1)


--Buffer a point to get an approximation of a circle, convert to curve and then translate 1,2 and scale it 3,4
  SELECT ST_AsText(ST_Transscale(ST_LineToCurve(ST_Buffer('POINT(234 567)', 3)),1,2,3,4));
                                                                                                                  st_astext
------------------------------------------------------------------------------------------------------------------------------
 CURVEPOLYGON(CIRCULARSTRING(714 2276,711.363961030679 2267.51471862576,705 2264,698.636038969321 2284.48528137424,714 2276))

</pre></div><div class="refsection" id="idm18815"><h2>相关信息</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a></p></div></div></section><section class="section" id="Clustering_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.17. 聚类函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数为几何图形集实现聚类算法。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_ClusterDBSCAN">ST_ClusterDBSCAN</a></span><span class="refpurpose"> — 使用 DBSCAN 算法返回每个输入几何图形的簇 id 的窗口函数。</span></li><li><span class="refentrytitle"><a href="#ST_ClusterIntersecting">ST_ClusterIntersecting</a></span><span class="refpurpose"> — 将输入几何图形聚类成连接集的聚合函数。</span></li><li><span class="refentrytitle"><a href="#ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a></span><span class="refpurpose"> — 窗口函数，返回每个输入几何图形的簇 ID，将输入几何图形聚类到连接的集合中。</span></li><li><span class="refentrytitle"><a href="#ST_ClusterKMeans">ST_ClusterKMeans</a></span><span class="refpurpose"> — 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</span></li><li><span class="refentrytitle"><a href="#ST_ClusterWithin">ST_ClusterWithin</a></span><span class="refpurpose"> — 按间隔距离对几何图形进行聚合的聚合函数。</span></li><li><span class="refentrytitle"><a href="#ST_ClusterWithinWin">ST_ClusterWithinWin</a></span><span class="refpurpose"> — 窗口函数，返回每个输入几何图形的簇 ID，使用分离距离进行聚类。</span></li></ul></div><div class="refentry" id="ST_ClusterDBSCAN"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClusterDBSCAN — 使用 DBSCAN 算法返回每个输入几何图形的簇 id 的窗口函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_ClusterDBSCAN</strong>(</code>geometry winset  <var class="pdparam">geom</var>, float8  <var class="pdparam">eps</var>, integer  <var class="pdparam">minpoints</var><code>)</code>;</p></div></div><div class="refsection" id="idm18843"><h2>描述</h2><p>一个窗口函数，使用 2D <a class="link" href="https://en.wikipedia.org/wiki/DBSCAN" target="_top">基于密度的噪声应用空间聚类 (DBSCAN)</a>算法。 与 <a class="xref" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> 不同，它不需要指定簇的数量，而是使用所需的<a class="link" href="#ST_Distance" title="ST_Distance">距离</a> (<code class="varname">eps</code> ）和密度（<code class="varname">minpoints</code>）参数来确定每个簇。 </p><p>如果输入几何体满足以下任一条件，则将其添加到簇中： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>在<code class="varname">eps</code> <a class="link" href="#ST_Distance" title="ST_Distance">距离</a>内的“核心”几何图形，至少有<code class="varname">minpoints</code>个输入几何图形（包括它自己）；或 </p></li><li class="listitem"><p>“边界”几何图形，位于核心几何图形的 <code class="varname">eps</code> <a class="link" href="#ST_Distance" title="ST_Distance">距离</a> 内。 </p></li></ul></div><p>
		</p><p>请注意，边界几何图形可能位于多个集群中核心几何图形的 <code class="varname">eps</code> 距离内。 任一分配都是正确的，因此边界几何图形将被任意分配给可用集群之一。 在这种情况下，可以使用少于 <code class="varname">minpoints</code> 几何图形生成正确的簇。 为了确保边界几何形状的确定性分配（以便重复调用 ST_ClusterDBSCAN 将产生相同的结果），请在窗口定义中使用 <code class="code">ORDER BY</code> 子句。 不明确的簇分配可能与其他 DBSCAN 实现不同。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不满足加入任何簇的条件的几何图形将被分配簇号 NULL。 </p></td></tr></table></div><p class="availability">可用性：2.3.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm18873"><h2>示例</h2><p>对彼此相距 50 米以内的多边形进行聚类，并且每个聚类至少需要 2 个多边形。 </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_clusterdbscan01.png"/><div class="caption"><p>50 米范围内的聚类，每个聚类至少有两个面。 如果只有一个，则 cid 为 NULL</p></div></div></div><p>
  </p><pre class="programlisting">
SELECT name, ST_ClusterDBSCAN(geom, eps =
&gt; 50, minpoints =
&gt; 2) over () AS cid
FROM boston_polys
WHERE name 
&gt; '' AND building 
&gt; ''
        AND ST_DWithin(geom,
        ST_Transform(
            ST_GeomFromText('POINT(-71.04054 42.35141)', 4326), 26986),
           500);
</pre><p>
						  </p></td><td><pre class="screen">
                name                 | bucket
-------------------------------------+--------
 Manulife Tower                      |      0
 Park Lane Seaport I                 |      0
 Park Lane Seaport II                |      0
 Renaissance Boston Waterfront Hotel |      0
 Seaport Boston Hotel                |      0
 Seaport Hotel &amp; World Trade Center  |      0
 Waterside Place                     |      0
 World Trade Center East             |      0
 100 Northern Avenue                 |      1
 100 Pier 4                          |      1
 The Institute of Contemporary Art   |      1
 101 Seaport                         |      2
 District Hall                       |      2
 One Marina Park Drive               |      2
 Twenty Two Liberty                  |      2
 Vertex                              |      2
 Vertex                              |      2
 Watermark Seaport                   |      2
 Blue Hills Bank Pavilion            |   NULL
 World Trade Center West             |   NULL
(20 rows)
</pre>
				</td></tr></tbody></table></div><p>显示将具有相同簇编号的地块组合成几何集合的示例。 </p><pre class="programlisting">SELECT cid, ST_Collect(geom) AS cluster_geom, array_agg(parcel_id) AS ids_in_cluster FROM (
    SELECT parcel_id, ST_ClusterDBSCAN(geom, eps =&gt; 0.5, minpoints =&gt; 5) over () AS cid, geom
    FROM parcels) sq
GROUP BY cid;
    </pre></div><div class="refsection" id="idm18894"><h2>相关信息</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>, <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>, <a class="xref" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a>, <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>, <a class="xref" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> </p></div></div><div class="refentry" id="ST_ClusterIntersecting"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClusterIntersecting — 将输入几何图形聚类成连接集的聚合函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry[] <strong class="fsfunc">ST_ClusterIntersecting</strong>(</code>geometry set <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" id="idm18915"><h2>描述</h2><p>一个聚合函数，返回 GeometryCollections 数组，将输入几何图形划分为不相交的连接簇。 簇中的每个几何图形与该簇中的至少一个其他几何图形相交，并且不与其他簇中的任何几何图形相交。 </p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm18919"><h2>示例</h2><pre class="programlisting">WITH testdata AS
  (SELECT unnest(ARRAY['LINESTRING (0 0, 1 1)'::geometry,
           'LINESTRING (5 5, 4 4)'::geometry,
           'LINESTRING (6 6, 7 7)'::geometry,
           'LINESTRING (0 0, -1 -1)'::geometry,
           'POLYGON ((0 0, 4 0, 4 4, 0 4, 0 0))'::geometry]) AS geom)

SELECT ST_AsText(unnest(ST_ClusterIntersecting(geom))) FROM testdata;

--result

st_astext
---------
GEOMETRYCOLLECTION(LINESTRING(0 0,1 1),LINESTRING(5 5,4 4),LINESTRING(0 0,-1 -1),POLYGON((0 0,4 0,4 4,0 4,0 0)))
GEOMETRYCOLLECTION(LINESTRING(6 6,7 7))
        </pre></div><div class="refsection" id="idm18922"><h2>相关信息</h2><p><a class="xref" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a>, <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>, <a class="xref" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> </p></div></div><div class="refentry" id="ST_ClusterIntersectingWin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClusterIntersectingWin — 窗口函数，返回每个输入几何图形的簇 ID，将输入几何图形聚类到连接的集合中。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_ClusterIntersectingWin</strong>(</code>geometry winset  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm18940"><h2>描述</h2><p>一种窗口函数，用于构建相交的连接几何图形簇。 可以在不离开集群的情况下遍历集群中的所有几何图形。 返回值是几何参数参与的簇号，或者对于空输入为空。</p><p class="availability">可用性：3.4.0</p></div><div class="refsection" id="idm18944"><h2>示例</h2><pre class="programlisting">WITH testdata AS (
  SELECT id, geom::geometry FROM (
  VALUES  (1, 'LINESTRING (0 0, 1 1)'),
          (2, 'LINESTRING (5 5, 4 4)'),
          (3, 'LINESTRING (6 6, 7 7)'),
          (4, 'LINESTRING (0 0, -1 -1)'),
          (5, 'POLYGON ((0 0, 4 0, 4 4, 0 4, 0 0))')) AS t(id, geom)
)
SELECT id,
  ST_AsText(geom),
  ST_ClusterIntersectingWin(geom) OVER () AS cluster
FROM testdata;

 id |           st_astext            | cluster
----+--------------------------------+---------
  1 | LINESTRING(0 0,1 1)            |       0
  2 | LINESTRING(5 5,4 4)            |       0
  3 | LINESTRING(6 6,7 7)            |       1
  4 | LINESTRING(0 0,-1 -1)          |       0
  5 | POLYGON((0 0,4 0,4 4,0 4,0 0)) |       0

        </pre></div><div class="refsection" id="idm18947"><h2>相关信息</h2><p><a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>, <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>, <a class="xref" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> </p></div></div><div class="refentry" id="ST_ClusterKMeans"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClusterKMeans — 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_ClusterKMeans</strong>(</code>geometry winset  <var class="pdparam">geom</var>, integer  <var class="pdparam">number_of_clusters</var>, float  <var class="pdparam">max_radius</var><code>)</code>;</p></div></div><div class="refsection" id="idm18971"><h2>描述</h2><p>返回每个输入几何图形的 <a class="link" href="https://en.wikipedia.org/wiki/K-means_clustering" target="_top">K-means</a> 簇号。 用于聚类的距离是 2D 几何形状的质心之间的距离，以及 3D 几何形状的边界框中心之间的距离。 对于 POINT 输入，M 坐标将被视为输入的权重，并且必须大于 0。 </p><p><code class="varname">max_radius</code> 如果设置，将导致 ST_ClusterKMeans 生成比 <code class="varname">k</code> 更多的簇，确保输出中没有簇的半径大于 <code class="varname">max_radius</code>。 这在可达性分析中很有用。 </p><p class="enhanced">增强：3.2.0 支持<code class="varname"> max_radius</code></p><p class="enhanced">增强：3.1.0 支持 3D 几何和权重</p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm18983"><h2>示例</h2><p>生成虚拟地块集，例如：</p><pre class="programlisting">CREATE TABLE parcels AS
SELECT lpad((row_number() over())::text,3,'0') As parcel_id, geom,
('{residential, commercial}'::text[])[1 + mod(row_number()OVER(),2)] As type
FROM
    ST_Subdivide(ST_Buffer('SRID=3857;LINESTRING(40 100, 98 100, 100 150, 60 90)'::geometry,
    40, 'endcap=square'),12) As geom;
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_clusterkmeans02.png"/><div class="caption"><p>地块按簇号 (cid) 进行颜色编码</p></div></div></div><p>
</p><pre class="programlisting">SELECT ST_ClusterKMeans(geom, 3) OVER() AS cid, parcel_id, geom
    FROM parcels;</pre><p>
</p><pre class="screen">cid | parcel_id |   geom
-----+-----------+---------------
   0 | 001       | 0103000000...
   0 | 002       | 0103000000...
   1 | 003       | 0103000000...
   0 | 004       | 0103000000...
   1 | 005       | 0103000000...
   2 | 006       | 0103000000...
   2 | 007       | 0103000000...
</pre><p>
        </p><p>按类型划分地块集群：</p><pre class="programlisting">SELECT ST_ClusterKMeans(geom, 3) over (PARTITION BY type) AS cid, parcel_id, type
    FROM parcels;</pre><pre class="screen">cid | parcel_id |    type
-----+-----------+-------------
   1 | 005       | commercial
   1 | 003       | commercial
   2 | 007       | commercial
   0 | 001       | commercial
   1 | 004       | residential
   0 | 002       | residential
   2 | 006       | residential
</pre><p>示例：使用 3D 聚类和加权对预先聚合的全球人口数据集进行聚类。 根据<a class="link" href="https://data.humdata.org/dataset/kontur-population-dataset" target="_top">Kontur人口数据</a>，至少确定了距离中心不到3000公里的20个地区：</p><pre class="programlisting">create table kontur_population_3000km_clusters as
select
    geom,
    ST_ClusterKMeans(
        ST_Force4D(
            ST_Transform(ST_Force3D(geom), 4978), -- cluster in 3D XYZ CRS
            mvalue =&gt; population -- set clustering to be weighed by population
        ),
        20,                      -- aim to generate at least 20 clusters
        max_radius =&gt; 3000000    -- but generate more to make each under 3000 km radius
    ) over () as cid
from
    kontur_population;
    </pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_clusterkmeans03.png"/><div class="caption"><p>根据上述规范对世界人口进行聚类，得到46个聚类。 在人口稠密的地区（纽约，莫斯科）是集群的中心。 格陵兰岛是一个集群。 有些集群跨越国际日期变更线。 聚类的边缘遵循地球的曲线。</p></div></div></div><p>
    </p></div><div class="refsection" id="idm19009"><h2>相关信息</h2><p><a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>, <a class="xref" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a>, <a class="xref" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a>, <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>, <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>, <a class="xref" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>, <a class="xref" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a>, </p></div></div><div class="refentry" id="ST_ClusterWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClusterWithin — 按间隔距离对几何图形进行聚合的聚合函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry[] <strong class="fsfunc">ST_ClusterWithin</strong>(</code>geometry set  <var class="pdparam">g</var>, float8  <var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" id="idm19035"><h2>描述</h2><p>返回 GeometryCollections 数组的聚合函数，其中每个集合都是包含一些输入几何图形的簇。 聚类将输入几何图形划分为多个集合，其中每个几何图形都在同一簇中至少一个其他几何图形的指定<em class="parameter"><code>距离</code></em>内。 距离是以 SRID 为单位的笛卡尔距离。 </p><p>ST_ClusterWithin相当于运行<a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>使用<code class="code">minpoints =&gt; 0</code>。</p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19047"><h2>示例</h2><pre class="programlisting">WITH testdata AS
  (SELECT unnest(ARRAY['LINESTRING (0 0, 1 1)'::geometry,
                       'LINESTRING (5 5, 4 4)'::geometry,
                       'LINESTRING (6 6, 7 7)'::geometry,
                       'LINESTRING (0 0, -1 -1)'::geometry,
                       'POLYGON ((0 0, 4 0, 4 4, 0 4, 0 0))'::geometry]) AS geom)

SELECT ST_AsText(unnest(ST_ClusterWithin(geom, 1.4))) FROM testdata;

--result

st_astext
---------
GEOMETRYCOLLECTION(LINESTRING(0 0,1 1),LINESTRING(5 5,4 4),LINESTRING(0 0,-1 -1),POLYGON((0 0,4 0,4 4,0 4,0 0)))
GEOMETRYCOLLECTION(LINESTRING(6 6,7 7))
        </pre></div><div class="refsection" id="idm19050"><h2>相关信息</h2><p><a class="xref" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a>, <a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>, <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>, <a class="xref" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a> </p></div></div><div class="refentry" id="ST_ClusterWithinWin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClusterWithinWin — 窗口函数，返回每个输入几何图形的簇 ID，使用分离距离进行聚类。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_ClusterWithinWin</strong>(</code>geometry winset  <var class="pdparam">geom</var>, float8  <var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" id="idm19072"><h2>描述</h2><p>返回每个输入几何图形的簇号的窗口函数。 聚类将几何图形划分为多个集合，其中每个几何图形都在同一簇中至少一个其他几何图形的指定<code class="varname">距离</code>内。 距离是以 SRID 为单位的笛卡尔距离。 </p><p>ST_ClusterWithinWin等效于运行<a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>使用<code class="code">minpoints =&gt; 0</code>。</p><p class="availability">可用性：3.4.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19084"><h2>示例</h2><pre class="programlisting">WITH testdata AS (
  SELECT id, geom::geometry FROM (
  VALUES  (1, 'LINESTRING (0 0, 1 1)'),
          (2, 'LINESTRING (5 5, 4 4)'),
          (3, 'LINESTRING (6 6, 7 7)'),
          (4, 'LINESTRING (0 0, -1 -1)'),
          (5, 'POLYGON ((0 0, 4 0, 4 4, 0 4, 0 0))')) AS t(id, geom)
)
SELECT id,
  ST_AsText(geom),
  ST_ClusterWithinWin(geom, 1.4) OVER () AS cluster
FROM testdata;


 id |           st_astext            | cluster
----+--------------------------------+---------
  1 | LINESTRING(0 0,1 1)            |       0
  2 | LINESTRING(5 5,4 4)            |       0
  3 | LINESTRING(6 6,7 7)            |       1
  4 | LINESTRING(0 0,-1 -1)          |       0
  5 | POLYGON((0 0,4 0,4 4,0 4,0 0)) |       0

        </pre></div><div class="refsection" id="idm19087"><h2>相关信息</h2><p><a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>, <a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>, <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>, <a class="xref" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a>, </p></div></div></section><section class="section" id="BBox_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.18. 边界框函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数产生或操作边界框。 它们还可以通过使用自动或显式转换来提供和接受几何值。 </p><p>另请参见<a class="xref" href="#PostGIS_BoxFunctions" title="13.7. PostGIS 边界框函数">Section 13.7, “PostGIS 边界框函数”</a>。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#Box2D">Box2D</a></span><span class="refpurpose"> — 返回表示几何图形的 2D 范围的 BOX2D。</span></li><li><span class="refentrytitle"><a href="#Box3D">Box3D</a></span><span class="refpurpose"> — 返回表示几何体 3D 范围的 BOX3D。</span></li><li><span class="refentrytitle"><a href="#ST_EstimatedExtent">ST_EstimatedExtent</a></span><span class="refpurpose"> — 返回空间表的估计范围。</span></li><li><span class="refentrytitle"><a href="#ST_Expand">ST_Expand</a></span><span class="refpurpose"> — 返回从另一个边界框或几何图形扩展的边界框。</span></li><li><span class="refentrytitle"><a href="#ST_Extent">ST_Extent</a></span><span class="refpurpose"> — 返回几何图形边界框的聚合函数。</span></li><li><span class="refentrytitle"><a href="#ST_3DExtent">ST_3DExtent</a></span><span class="refpurpose"> — 返回几何图形的 3D 边界框的聚合函数。</span></li><li><span class="refentrytitle"><a href="#ST_MakeBox2D">ST_MakeBox2D</a></span><span class="refpurpose"> — 创建由两个 2D 点几何图形定义的 BOX2D。</span></li><li><span class="refentrytitle"><a href="#ST_3DMakeBox">ST_3DMakeBox</a></span><span class="refpurpose"> — 创建由两个 3D 点几何图形定义的 BOX3D。</span></li><li><span class="refentrytitle"><a href="#ST_XMax">ST_XMax</a></span><span class="refpurpose"> — 返回 2D 或 3D 边界框或几何体的 X 最大值。</span></li><li><span class="refentrytitle"><a href="#ST_XMin">ST_XMin</a></span><span class="refpurpose"> — 返回 2D 或 3D 边界框或几何体的 X 最小值。</span></li><li><span class="refentrytitle"><a href="#ST_YMax">ST_YMax</a></span><span class="refpurpose"> — 返回 2D 或 3D 边界框或几何体的 Y 最大值。</span></li><li><span class="refentrytitle"><a href="#ST_YMin">ST_YMin</a></span><span class="refpurpose"> — 返回 2D 或 3D 边界框或几何体的 Y 最小值。</span></li><li><span class="refentrytitle"><a href="#ST_ZMax">ST_ZMax</a></span><span class="refpurpose"> — 返回 2D 或 3D 边界框或几何体的 Z 最大值。</span></li><li><span class="refentrytitle"><a href="#ST_ZMin">ST_ZMin</a></span><span class="refpurpose"> — 返回 2D 或 3D 边界框或几何体的 Z 最小值。</span></li></ul></div><div class="refentry" id="Box2D"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Box2D — 返回表示几何图形的 2D 范围的 BOX2D。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <strong class="fsfunc">Box2D</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm19113"><h2>描述</h2><p>返回表示几何图形的 2D 范围的<a class="xref" href="#box2d_type" title="box2d">box2d</a>。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm19130"><h2>示例</h2><pre class="programlisting">SELECT Box2D(ST_GeomFromText('LINESTRING(1 2, 3 4, 5 6)'));

box2d
---------
BOX(1 2,5 6)
</pre><pre class="programlisting">SELECT Box2D(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'));

box2d
--------
BOX(220186.984375 150406,220288.25 150506.140625)
</pre></div><div class="refsection" id="idm19134"><h2>相关信息</h2><p><a class="xref" href="#Box3D" title="Box3D">Box3D</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" id="Box3D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Box3D — 返回表示几何体 3D 范围的 BOX3D。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <strong class="fsfunc">Box3D</strong>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm19151"><h2>描述</h2><p>返回表示几何体 3D 范围的<a class="xref" href="#box3d_type" title="box3d">box3d</a>。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm19172"><h2>示例</h2><pre class="programlisting">SELECT Box3D(ST_GeomFromEWKT('LINESTRING(1 2 3, 3 4 5, 5 6 5)'));

Box3d
---------
BOX3D(1 2 3,5 6 5)
</pre><pre class="programlisting">SELECT Box3D(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 1,220227 150406 1)'));

Box3d
--------
BOX3D(220227 150406 1,220268 150415 1)
</pre></div><div class="refsection" id="idm19176"><h2>相关信息</h2><p><a class="xref" href="#Box2D" title="Box2D">Box2D</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" id="ST_EstimatedExtent"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_EstimatedExtent — 返回空间表的估计范围。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <strong class="fsfunc">ST_EstimatedExtent</strong>(</code>text  <var class="pdparam">schema_name</var>, text  <var class="pdparam">table_name</var>, text  <var class="pdparam">geocolumn_name</var>, boolean  <var class="pdparam">parent_only</var><code>)</code>;</p><p><code class="funcdef">box2d <strong class="fsfunc">ST_EstimatedExtent</strong>(</code>text  <var class="pdparam">schema_name</var>, text  <var class="pdparam">table_name</var>, text  <var class="pdparam">geocolumn_name</var><code>)</code>;</p><p><code class="funcdef">box2d <strong class="fsfunc">ST_EstimatedExtent</strong>(</code>text  <var class="pdparam">table_name</var>, text  <var class="pdparam">geocolumn_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm19223"><h2>描述</h2><p>以<a class="xref" href="#box2d_type" title="box2d">box2d</a> 形式返回空间表的估计范围。 如果未指定，则使用当前架构。 估计范围取自几何列的统计数据。 这通常比使用 <a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a>或 <a class="xref" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> 计算表的精确范围要快得多。 </p><p>默认行为是还使用从子表（具有 INHERITS 的表）收集的统计信息（如果可用）。 如果<code class="varname">parent_only </code>设置为TRUE，则仅使用给定表的统计信息并忽略子表。 </p><p>对于 PostgreSQL &gt;= 8.0.0，统计信息由 VACUUM ANALYZE 收集，结果范围约为实际范围的 95%。 对于 PostgreSQL &lt; 8.0.0 统计信息是通过运行 <code class="code">update_geometry_stats()</code> 收集的，结果范围是准确的。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果没有统计信息（空表或未调用 ANALYZE），此函数将返回 NULL。 在 1.5.4 版本之前，会抛出异常。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>Escaping names for tables and/or namespaces that include special characters and quotes may require special handling. A user notes: "For schemas and tables, use identifier escaping rules to produce a double-quoted string, and afterwards remove the first and last double-quote character. For geometry column pass as is." </p></td></tr></table></div><p class="availability">可用性：1.0.0</p><p class="changed">更改：2.1.0。 在 2.0.x 之前，这称为 ST_Estimated_Extent。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19243"><h2>示例</h2><pre class="programlisting">SELECT ST_EstimatedExtent('ny', 'edges', 'geom');
--result--
BOX(-8877653 4912316,-8010225.5 5589284)

SELECT ST_EstimatedExtent('feature_poly', 'geom');
--result--
BOX(-124.659652709961 24.6830825805664,-67.7798080444336 49.0012092590332)
                </pre></div><div class="refsection" id="idm19246"><h2>相关信息</h2><p><a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a>, <a class="xref" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a></p></div></div><div class="refentry" id="ST_Expand"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Expand — 返回从另一个边界框或几何图形扩展的边界框。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Expand</strong>(</code>geometry  <var class="pdparam">geom</var>, float <var class="pdparam">units_to_expand</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_Expand</strong>(</code>geometry  <var class="pdparam">geom</var>, float <var class="pdparam">dx</var>, float <var class="pdparam">dy</var>, float <var class="pdparam">dz=0</var>, float <var class="pdparam">dm=0</var><code>)</code>;</p><p><code class="funcdef">box2d <strong class="fsfunc">ST_Expand</strong>(</code>box2d  <var class="pdparam">box</var>, float <var class="pdparam">units_to_expand</var><code>)</code>;</p><p><code class="funcdef">box2d <strong class="fsfunc">ST_Expand</strong>(</code>box2d  <var class="pdparam">box</var>, float <var class="pdparam">dx</var>, float <var class="pdparam">dy</var><code>)</code>;</p><p><code class="funcdef">box3d <strong class="fsfunc">ST_Expand</strong>(</code>box3d  <var class="pdparam">box</var>, float <var class="pdparam">units_to_expand</var><code>)</code>;</p><p><code class="funcdef">box3d <strong class="fsfunc">ST_Expand</strong>(</code>box3d  <var class="pdparam">box</var>, float <var class="pdparam">dx</var>, float <var class="pdparam">dy</var>, float <var class="pdparam">dz=0</var><code>)</code>;</p></div></div><div class="refsection" id="idm19329"><h2>描述</h2><p>返回从输入的边界框扩展的边界框，通过指定框应在两个轴上扩展的单个距离，或通过指定每个轴的扩展距离。 使用双精度。 可用于距离查询，或向查询添加边界框过滤器以利用空间索引。</p><p>除了接受和返回几何图形的 ST_Expand 版本之外，还提供了接受和返回<a class="xref" href="#box2d_type" title="box2d">box2d</a> 和<a class="xref" href="#box3d_type" title="box3d">box3d</a> 数据类型的形式。 </p><p>距离采用输入的空间参考系的单位。</p><p>ST_Expand 与 <a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> 类似，不同之处在于缓冲在所有方向上扩展几何图形，而 ST_Expand 沿每个轴扩展边界框。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在版本 1.3 之前，ST_Expand 与 <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a> 结合使用来执行可索引距离查询。 例如，<code class="code">geom &amp;&amp; ST_Expand('POINT(10 20)', 10) AND ST_Distance(geom, 'POINT(10 20)')&lt;10 </code>。它已被更简单、更高效的 <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> 函数取代。</p></td></tr></table></div><p class="availability">可用性：1.5.0 行为更改为输出双精度而不是 float4 坐标。</p><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="enhanced">增强：2.3.0 添加了对不同维度的盒子进行不同数量扩展的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm19354"><h2>示例</h2><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>以下示例使用美国国家地图平等面积投影（SRID=2163），这是一个以米为单位的投影</p></td></tr></table></div><pre class="programlisting">
--10 meter expanded box around bbox of a linestring
SELECT CAST(ST_Expand(ST_GeomFromText('LINESTRING(2312980 110676,2312923 110701,2312892 110714)', 2163),10) As box2d);
                                         st_expand
------------------------------------
 BOX(2312882 110666,2312990 110724)

--10 meter expanded 3D box of a 3D box
SELECT ST_Expand(CAST('BOX3D(778783 2951741 1,794875 2970042.61545891 10)' As box3d),10)
                                                          st_expand
-----------------------------------------------------
 BOX3D(778773 2951731 -9,794885 2970052.61545891 20)

 --10 meter geometry astext rep of a expand box around a point geometry
 SELECT ST_AsEWKT(ST_Expand(ST_GeomFromEWKT('SRID=2163;POINT(2312980 110676)'),10));
                                                                                        st_asewkt
-------------------------------------------------------------------------------------------------
 SRID=2163;POLYGON((2312970 110666,2312970 110686,2312990 110686,2312990 110666,2312970 110666))

                </pre></div><div class="refsection" id="idm19359"><h2>相关信息</h2><p><a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_Extent"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Extent — 返回几何图形边界框的聚合函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <strong class="fsfunc">ST_Extent</strong>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" id="idm19377"><h2>描述</h2><p>一个聚合函数，返回一个包围一组几何图形的<a class="xref" href="#box2d_type" title="box2d">box2d</a> 边界框。 </p><p>边界框坐标位于输入几何图形的空间参考系统中。</p><p>ST_Extent 在概念上与 Oracle Spatial/Locator 的 SDO_AGGR_MBR 类似。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Extent 返回仅具有 X 和 Y 坐标的框，即使具有 3D 几何图形也是如此。 要返回 XYZ 坐标，请使用 <a class="xref" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a>。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的<code class="code"> box3d </code>值不包含 SRID。 使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 将其转换为具有 SRID 元数据的几何图形。 SRID 与输入几何形状相同。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm19399"><h2>示例</h2><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>以下示例使用以英尺为单位的马萨诸塞州平面 (SRID=2249)</p></td></tr></table></div><pre class="programlisting">SELECT ST_Extent(geom) as bextent FROM sometable;
                                         st_bextent
------------------------------------
BOX(739651.875 2908247.25,794875.8125 2970042.75)


--Return extent of each category of geometries
SELECT ST_Extent(geom) as bextent
FROM sometable
GROUP BY category ORDER BY category;

                                          bextent                       |         name
----------------------------------------------------+----------------
 BOX(778783.5625 2951741.25,794875.8125 2970042.75) | A
 BOX(751315.8125 2919164.75,765202.6875 2935417.25) | B
 BOX(739651.875 2917394.75,756688.375 2935866)      | C

 --Force back into a geometry
 -- and render the extended text representation of that geometry
SELECT ST_SetSRID(ST_Extent(geom),2249) as bextent FROM sometable;

                                bextent
--------------------------------------------------------------------------------
 SRID=2249;POLYGON((739651.875 2908247.25,739651.875 2970042.75,794875.8125 2970042.75,
 794875.8125 2908247.25,739651.875 2908247.25))
                </pre></div><div class="refsection" id="idm19404"><h2>相关信息</h2><p><a class="xref" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a>, <a class="xref" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> </p></div></div><div class="refentry" id="ST_3DExtent"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DExtent — 返回几何图形的 3D 边界框的聚合函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <strong class="fsfunc">ST_3DExtent</strong>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" id="idm19422"><h2>描述</h2><p>一个聚合函数，返回包围一组几何图形的 <a class="xref" href="#box3d_type" title="box3d">box3d</a>（包括 Z 坐标）边界框。 </p><p>边界框坐标位于输入几何图形的空间参考系统中。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的<code class="code"> box3d </code>值不包含 SRID。 使用 <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> 将其转换为具有 SRID 元数据的几何图形。 SRID 与输入几何形状相同。</p></td></tr></table></div><p class="enhanced">增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。</p><p class="changed">更改：2.0.0 在之前的版本中，这曾经被称为 ST_Extent3D</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm19449"><h2>示例</h2><pre class="programlisting">SELECT ST_3DExtent(foo.geom) As b3extent
FROM (SELECT ST_MakePoint(x,y,z) As geom
        FROM generate_series(1,3) As x
                CROSS JOIN generate_series(1,2) As y
                CROSS JOIN generate_series(0,2) As Z) As foo;
          b3extent
--------------------
 BOX3D(1 1 0,3 2 2)

--Get the extent of various elevated circular strings
SELECT ST_3DExtent(foo.geom) As b3extent
FROM (SELECT ST_Translate(ST_Force_3DZ(ST_LineToCurve(ST_Buffer(ST_Point(x,y),1))),0,0,z) As geom
        FROM generate_series(1,3) As x
                CROSS JOIN generate_series(1,2) As y
                CROSS JOIN generate_series(0,2) As Z) As foo;

        b3extent
--------------------
 BOX3D(1 0 0,4 2 2)
                </pre></div><div class="refsection" id="idm19452"><h2>相关信息</h2><p><a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a>, <a class="xref" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a></p></div></div><div class="refentry" id="ST_MakeBox2D"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeBox2D — 创建由两个 2D 点几何图形定义的 BOX2D。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <strong class="fsfunc">ST_MakeBox2D</strong>(</code>geometry  <var class="pdparam">pointLowLeft</var>, geometry  <var class="pdparam">pointUpRight</var><code>)</code>;</p></div></div><div class="refsection" id="idm19473"><h2>描述</h2><p>创建由两个 Point 几何图形定义的<a class="xref" href="#box2d_type" title="box2d">box2d</a>。 这对于进行范围查询很有用。</p></div><div class="refsection" id="idm19477"><h2>示例</h2><pre class="programlisting">

--Return all features that fall reside or partly reside in a US national atlas coordinate bounding box
--It is assumed here that the geometries are stored with SRID = 2163 (US National atlas equal area)
SELECT feature_id, feature_name, geom
FROM features
WHERE geom &amp;&amp; ST_SetSRID(ST_MakeBox2D(ST_Point(-989502.1875, 528439.5625),
        ST_Point(-987121.375 ,529933.1875)),2163)
</pre></div><div class="refsection" id="idm19480"><h2>相关信息</h2><p><a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_3DMakeBox"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DMakeBox — 创建由两个 3D 点几何图形定义的 BOX3D。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <strong class="fsfunc">ST_3DMakeBox</strong>(</code>geometry  <var class="pdparam">point3DLowLeftBottom</var>, geometry  <var class="pdparam">point3DUpRightTop</var><code>)</code>;</p></div></div><div class="refsection" id="idm19501"><h2>描述</h2><p>创建由两个 3D 点几何图形定义的<a class="xref" href="#box3d_type" title="box3d">box3d</a>。 </p><p><span class="inlinemediaobject"><img src="images/check.png"/></span> 这个函数支持3D且不会降低z-index。</p><p class="changed">更改：2.0.0 在之前的版本中，这曾经被称为 ST_MakeBox3D</p></div><div class="refsection" id="idm19510"><h2>示例</h2><pre class="programlisting">SELECT ST_3DMakeBox(ST_MakePoint(-989502.1875, 528439.5625, 10),
        ST_MakePoint(-987121.375 ,529933.1875, 10)) As abb3d

--bb3d--
--------
BOX3D(-989502.1875 528439.5625 10,-987121.375 529933.1875 10)
        </pre></div><div class="refsection" id="idm19513"><h2>相关信息</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="ST_XMax"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_XMax — 返回 2D 或 3D 边界框或几何体的 X 最大值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_XMax</strong>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" id="idm19531"><h2>描述</h2><p>返回 2D 或 3D 边界框或几何体的 X 最大值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>虽然此函数仅针对 box3d 定义，但由于自动转换，它也适用于 box2d 和几何值。 但是，它不会接受几何图形或 box2d 文本表示，因为它们不会自动转换。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19544"><h2>示例</h2><pre class="programlisting">SELECT ST_XMax('BOX3D(1 2 3, 4 5 6)');
st_xmax
-------
4

SELECT ST_XMax(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_xmax
-------
5

SELECT ST_XMax(CAST('BOX(-3 2, 3 4)' As box2d));
st_xmax
-------
3
--Observe THIS DOES NOT WORK because it will try to auto-cast the string representation to a BOX3D
SELECT ST_XMax('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_XMax(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_xmax
--------
220288.248780547
                </pre></div><div class="refsection" id="idm19547"><h2>相关信息</h2><p><a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" id="ST_XMin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_XMin — 返回 2D 或 3D 边界框或几何体的 X 最小值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_XMin</strong>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" id="idm19567"><h2>描述</h2><p>返回 2D 或 3D 边界框或几何体的 X 最小值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>虽然此函数仅针对 box3d 定义，但由于自动转换，它也适用于 box2d 和几何值。 但是，它不会接受几何图形或 box2d 文本表示，因为它们不会自动转换。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19580"><h2>示例</h2><pre class="programlisting">SELECT ST_XMin('BOX3D(1 2 3, 4 5 6)');
st_xmin
-------
1

SELECT ST_XMin(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_xmin
-------
1

SELECT ST_XMin(CAST('BOX(-3 2, 3 4)' As box2d));
st_xmin
-------
-3
--Observe THIS DOES NOT WORK because it will try to auto-cast the string representation to a BOX3D
SELECT ST_XMin('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_XMin(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_xmin
--------
220186.995121892
                </pre></div><div class="refsection" id="idm19583"><h2>相关信息</h2><p><a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" id="ST_YMax"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_YMax — 返回 2D 或 3D 边界框或几何体的 Y 最大值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_YMax</strong>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" id="idm19603"><h2>描述</h2><p>返回 2D 或 3D 边界框或几何体的 Y 最大值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>虽然此函数仅针对 box3d 定义，但由于自动转换，它也适用于 box2d 和几何值。 但是，它不会接受几何图形或 box2d 文本表示，因为它们不会自动转换。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19616"><h2>示例</h2><pre class="programlisting">SELECT ST_YMax('BOX3D(1 2 3, 4 5 6)');
st_ymax
-------
5

SELECT ST_YMax(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_ymax
-------
6

SELECT ST_YMax(CAST('BOX(-3 2, 3 4)' As box2d));
st_ymax
-------
4
--Observe THIS DOES NOT WORK because it will try to auto-cast the string representation to a BOX3D
SELECT ST_YMax('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_YMax(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_ymax
--------
150506.126829327
                </pre></div><div class="refsection" id="idm19619"><h2>相关信息</h2><p><a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" id="ST_YMin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_YMin — 返回 2D 或 3D 边界框或几何体的 Y 最小值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_YMin</strong>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" id="idm19639"><h2>描述</h2><p>返回 2D 或 3D 边界框或几何体的 Y 最小值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>虽然此函数仅针对 box3d 定义，但由于自动转换，它也适用于 box2d 和几何值。 但是，它不会接受几何图形或 box2d 文本表示，因为它们不会自动转换。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19652"><h2>示例</h2><pre class="programlisting">SELECT ST_YMin('BOX3D(1 2 3, 4 5 6)');
st_ymin
-------
2

SELECT ST_YMin(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_ymin
-------
3

SELECT ST_YMin(CAST('BOX(-3 2, 3 4)' As box2d));
st_ymin
-------
2
--Observe THIS DOES NOT WORK because it will try to auto-cast the string representation to a BOX3D
SELECT ST_YMin('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_YMin(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_ymin
--------
150406
                </pre></div><div class="refsection" id="idm19655"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" id="ST_ZMax"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ZMax — 返回 2D 或 3D 边界框或几何体的 Z 最大值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_ZMax</strong>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" id="idm19676"><h2>描述</h2><p>返回 2D 或 3D 边界框或几何体的 Z 最大值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>虽然此函数仅针对 box3d 定义，但由于自动转换，它也适用于 box2d 和几何值。 但是，它不会接受几何图形或 box2d 文本表示，因为它们不会自动转换。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19689"><h2>示例</h2><pre class="programlisting">SELECT ST_ZMax('BOX3D(1 2 3, 4 5 6)');
st_zmax
-------
6

SELECT ST_ZMax(ST_GeomFromEWKT('LINESTRING(1 3 4, 5 6 7)'));
st_zmax
-------
7

SELECT ST_ZMax('BOX3D(-3 2 1, 3 4 1)' );
st_zmax
-------
1
--Observe THIS DOES NOT WORK because it will try to auto-cast the string representation to a BOX3D
SELECT ST_ZMax('LINESTRING(1 3 4, 5 6 7)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_ZMax(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_zmax
--------
3
                </pre></div><div class="refsection" id="idm19692"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a></p></div></div><div class="refentry" id="ST_ZMin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ZMin — 返回 2D 或 3D 边界框或几何体的 Z 最小值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_ZMin</strong>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" id="idm19713"><h2>描述</h2><p>返回 2D 或 3D 边界框或几何体的 Z 最小值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>虽然此函数仅针对 box3d 定义，但由于自动转换，它也适用于 box2d 和几何值。 但是，它不会接受几何图形或 box2d 文本表示，因为它们不会自动转换。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm19726"><h2>示例</h2><pre class="programlisting">SELECT ST_ZMin('BOX3D(1 2 3, 4 5 6)');
st_zmin
-------
3

SELECT ST_ZMin(ST_GeomFromEWKT('LINESTRING(1 3 4, 5 6 7)'));
st_zmin
-------
4

SELECT ST_ZMin('BOX3D(-3 2 1, 3 4 1)' );
st_zmin
-------
1
--Observe THIS DOES NOT WORK because it will try to auto-cast the string representation to a BOX3D
SELECT ST_ZMin('LINESTRING(1 3 4, 5 6 7)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_ZMin(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_zmin
--------
1
                </pre></div><div class="refsection" id="idm19729"><h2>相关信息</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a></p></div></div></section><section class="section" id="Linear_Referencing"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.19. 线性参考</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_LineInterpolatePoint">ST_LineInterpolatePoint</a></span><span class="refpurpose"> — 返回沿线在百分比指示位置的插值点。</span></li><li><span class="refentrytitle"><a href="#ST_3DLineInterpolatePoint">ST_3DLineInterpolatePoint</a></span><span class="refpurpose"> — 返回沿 3D 线的小数指示位置插值的点。</span></li><li><span class="refentrytitle"><a href="#ST_LineInterpolatePoints">ST_LineInterpolatePoints</a></span><span class="refpurpose"> — 返回沿直线以分数间隔插值的点。 </span></li><li><span class="refentrytitle"><a href="#ST_LineLocatePoint">ST_LineLocatePoint</a></span><span class="refpurpose"> — 返回线上最接近点的分数位置。</span></li><li><span class="refentrytitle"><a href="#ST_LineSubstring">ST_LineSubstring</a></span><span class="refpurpose"> — 返回两个小数位置之间的直线部分。</span></li><li><span class="refentrytitle"><a href="#ST_LocateAlong">ST_LocateAlong</a></span><span class="refpurpose"> — 返回几何上与测量值匹配的点。</span></li><li><span class="refentrytitle"><a href="#ST_LocateBetween">ST_LocateBetween</a></span><span class="refpurpose"> — 返回与测量范围匹配的几何图形部分。</span></li><li><span class="refentrytitle"><a href="#ST_LocateBetweenElevations">ST_LocateBetweenElevations</a></span><span class="refpurpose"> — 返回位于高程 (Z) 范围内的几何图形部分。</span></li><li><span class="refentrytitle"><a href="#ST_InterpolatePoint">ST_InterpolatePoint</a></span><span class="refpurpose"> — 返回最接近点的几何图形的插值测量值。</span></li><li><span class="refentrytitle"><a href="#ST_AddMeasure">ST_AddMeasure</a></span><span class="refpurpose"> — 沿线性几何形状插值测量值。</span></li></ul></div><div class="refentry" id="ST_LineInterpolatePoint"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineInterpolatePoint — 返回沿线在百分比指示位置的插值点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineInterpolatePoint</strong>(</code>geometry  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">a_fraction</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_LineInterpolatePoint</strong>(</code>geography  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">a_fraction</var>, boolean <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm19768"><h2>描述</h2><p>返回沿线在百分比指示位置的插值点。 第一个参数是线串。 第二个参数是介于 0 和 1 之间的浮点数，它表示点的位置与线长度的比率。 如果存在 Z 和 M 值，则执行插值计算。 </p><p>请参阅<a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a>以计算最接近该点的线位置。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数计算 2D 中的点，然后对 Z 和 M 的值进行插值，而 <a class="xref" href="#ST_3DLineInterpolatePoint" title="ST_3DLineInterpolatePoint">ST_3DLineInterpolatePoint</a> 计算 3D 中的点，然后仅对 M 值进行插值。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>从版本 1.1.1 开始，此函数还会插入 M 和 Z 值（如果存在），而之前的版本将它们设置为 0.0。</p></td></tr></table></div><p class="availability">可用性：0.8.2，1.1.1中添加支持Z和M</p><p class="changed">更改：2.1.0。 在 2.0.x 之前，这称为 ST_Line_Interpolate_Point。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm19784"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_line_interpolate_point01.png"/><div class="caption"><p>插值点位于 20% 位置 (0.20) 的线串 </p></div></div></div><pre class="programlisting">-- The point 20% along a line

SELECT ST_AsEWKT(  ST_LineInterpolatePoint(
        'LINESTRING(25 50, 100 125, 150 190)',
        0.2 ));
----------------
 POINT(51.5974135047432 76.5974135047432)
</pre><p>3D 线的中点：</p><pre class="programlisting">SELECT ST_AsEWKT(  ST_LineInterpolatePoint('
        LINESTRING(1 2 3, 4 5 6, 6 7 8)',
        0.5 ));
--------------------
 POINT(3.5 4.5 5.5)
</pre><p>直线上距离某点最近的点：</p><pre class="programlisting">SELECT ST_AsText( ST_LineInterpolatePoint( line.geom,
                      ST_LineLocatePoint( line.geom, 'POINT(4 3)')))
FROM (SELECT ST_GeomFromText('LINESTRING(1 2, 4 5, 6 7)') As geom) AS line;
------------
 POINT(3 4)
</pre></div><div class="refsection" id="idm19797"><h2>相关信息</h2><p><a class="xref" href="#ST_LineInterpolatePoints" title="ST_LineInterpolatePoints">ST_LineInterpolatePoints</a>, <a class="xref" href="#ST_3DLineInterpolatePoint" title="ST_3DLineInterpolatePoint">ST_3DLineInterpolatePoint</a>, <a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> </p></div></div><div class="refentry" id="ST_3DLineInterpolatePoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DLineInterpolatePoint — 返回沿 3D 线的小数指示位置插值的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DLineInterpolatePoint</strong>(</code>geometry  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">a_fraction</var><code>)</code>;</p></div></div><div class="refsection" id="idm19818"><h2>描述</h2><p>返回沿 3D 线的小数指示位置插值的点。 第一个参数必须是 LINESTRING。 第二个参数是 0 到 1 之间的浮点数，表示点位置占线长度的一部分。 如果存在 M 值，则对其进行插值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a> 计算 2D 中的点，然后对 Z 和 M 的值进行插值，而此函数计算 3D 中的点，并且仅对 M 值进行插值。</p></td></tr></table></div><p class="availability">可用性：3.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm19829"><h2>示例</h2><p>沿 3D 线返回20%处的点</p><pre class="programlisting">SELECT ST_AsText(
    ST_3DLineInterpolatePoint('LINESTRING(25 50 70, 100 125 90, 150 190 200)',
        0.20));

   st_asetext
----------------
 POINT Z (59.0675892910822 84.0675892910822 79.0846904776219)
</pre></div><div class="refsection" id="idm19833"><h2>相关信息</h2><p><a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>, <a class="xref" href="#ST_LineInterpolatePoints" title="ST_LineInterpolatePoints">ST_LineInterpolatePoints</a>, <a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> </p></div></div><div class="refentry" id="ST_LineInterpolatePoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineInterpolatePoints — 返回沿直线以分数间隔插值的点。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineInterpolatePoints</strong>(</code>geometry  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">a_fraction</var>, boolean  <var class="pdparam">repeat</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_LineInterpolatePoints</strong>(</code>geography  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">a_fraction</var>, boolean <var class="pdparam">use_spheroid = true</var>, boolean  <var class="pdparam">repeat = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm19872"><h2>描述</h2><p>返回沿一条线以分数间隔插值的一个或多个点。 第一个参数必须是 LINESTRING。 第二个参数是一个介于 float8 0 和 1 之间的值，表示点之间的间距作为线长度的一部分。 如果第三个参数为 false，则最多构造一个点（相当于<a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>。） </p><p>如果结果有零个或一个点，则将其作为 POINT 返回。 如果它有两个或更多点，则以 MULTIPOINT 形式返回。 </p><p class="availability">可用性：2.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p></div><div class="refsection" id="idm19886"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_line_interpolate_points01.png"/><div class="caption"><p>每 20% 插值一次点的 LineString </p></div></div></div><pre class="programlisting">--Return points each 20% along a 2D line
SELECT ST_AsText(ST_LineInterpolatePoints('LINESTRING(25 50, 100 125, 150 190)', 0.20))
----------------
 MULTIPOINT((51.5974135047432 76.5974135047432),(78.1948270094864 103.194827009486),(104.132163186446 130.37181214238),(127.066081593223 160.18590607119),(150 190))
</pre></div><div class="refsection" id="idm19895"><h2>相关信息</h2><p><a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>, <a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> </p></div></div><div class="refentry" id="ST_LineLocatePoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineLocatePoint — 返回线上最接近点的分数位置。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_LineLocatePoint</strong>(</code>geometry  <var class="pdparam">a_linestring</var>, geometry  <var class="pdparam">a_point</var><code>)</code>;</p><p><code class="funcdef">float8 <strong class="fsfunc">ST_LineLocatePoint</strong>(</code>geography  <var class="pdparam">a_linestring</var>, geography  <var class="pdparam">a_point</var>, boolean <var class="pdparam">use_spheroid = true</var><code>)</code>;</p></div></div><div class="refsection" id="idm19927"><h2>描述</h2><p>返回 0 到 1 之间的浮点数，表示 LineString 上距离给定 Point 最近的点的位置，作为 <a class="link" href="#ST_Length2D" title="ST_Length2D">2d 线</a>长度的一部分。</p><p>您可以使用返回的位置来提取点 (<a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>) 或子字符串 (<a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a>)。</p><p>这对于近似地址数量很有用</p><p class="availability">可用性：1.1.0</p><p class="changed">更改：2.1.0。 在 2.0.x 之前，这称为 ST_Line_Locate_Point。</p></div><div class="refsection" id="idm19937"><h2>示例</h2><pre class="programlisting">--Rough approximation of finding the street number of a point along the street
--Note the whole foo thing is just to generate dummy data that looks
--like house centroids and street
--We use ST_DWithin to exclude
--houses too far away from the street to be considered on the street
SELECT ST_AsText(house_loc) As as_text_house_loc,
        startstreet_num +
                CAST( (endstreet_num - startstreet_num)
                        * ST_LineLocatePoint(street_line, house_loc) As integer) As street_num
FROM
(SELECT ST_GeomFromText('LINESTRING(1 2, 3 4)') As street_line,
        ST_Point(x*1.01,y*1.03) As house_loc, 10 As startstreet_num,
                20 As endstreet_num
FROM generate_series(1,3) x CROSS JOIN generate_series(2,4) As y)
As foo
WHERE ST_DWithin(street_line, house_loc, 0.2);

 as_text_house_loc | street_num
-------------------+------------
 POINT(1.01 2.06)  |         10
 POINT(2.02 3.09)  |         15
 POINT(3.03 4.12)  |         20

 --find closest point on a line to a point or other geometry
 SELECT ST_AsText(ST_LineInterpolatePoint(foo.the_line, ST_LineLocatePoint(foo.the_line, ST_GeomFromText('POINT(4 3)'))))
FROM (SELECT ST_GeomFromText('LINESTRING(1 2, 4 5, 6 7)') As the_line) As foo;
   st_astext
----------------
 POINT(3 4)

</pre></div><div class="refsection" id="idm19940"><h2>相关信息</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_Length2D" title="ST_Length2D">ST_Length2D</a>, <a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>, <a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a></p></div></div><div class="refentry" id="ST_LineSubstring"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LineSubstring — 返回两个小数位置之间的直线部分。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LineSubstring</strong>(</code>geometry  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">startfraction</var>, float8  <var class="pdparam">endfraction</var><code>)</code>;</p><p><code class="funcdef">geography <strong class="fsfunc">ST_LineSubstring</strong>(</code>geography  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">startfraction</var>, float8  <var class="pdparam">endfraction</var><code>)</code>;</p></div></div><div class="refsection" id="idm19977"><h2>描述</h2><p>计算作为输入线在给定小数位置处开始和结束的部分的线。 第一个参数必须是 LINESTRING。 第二个和第三个参数是 [0, 1] 范围内的值，将起始位置和结束位置表示为行长度的分数。 如果存在添加的端点，则对 Z 和 M 值进行插值。 </p><p>如果 <code class="varname">startfraction</code> 和 <code class="varname">endfraction </code>具有相同的值，则相当于<a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这仅适用于 LINESTRING。 要在连续的 MULTILINESTRING 上使用，首先使用 <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>将它们连接起来。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>从 1.1.1 版开始，此函数对 M 和 Z 值进行插值。 之前的版本将 Z 和 M 设置为未指定的值。</p></td></tr></table></div><p class="enhanced">增强：3.4.0 - 引入了对地理的支持。</p><p class="changed">更改：2.1.0。 在 2.0.x 之前，这被称为 ST_Line_Substring。</p><p class="availability">可用性：1.1.0，1.1.1中添加支持Z和M</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm19996"><h2>示例</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_line_substring01.png"/><div class="caption"><p>在1/3中间范围上叠加的LineString（0.333, 0.666） </p></div></div></div><pre class="programlisting">SELECT ST_AsText(ST_LineSubstring( 'LINESTRING (20 180, 50 20, 90 80, 120 40, 180 150)', 0.333, 0.666));
------------------------------------------------------------------------------------------------
LINESTRING (45.17311810399485 45.74337011202746, 50 20, 90 80, 112.97593050157862 49.36542599789519)
</pre><p>如果起始位置和结束位置相同，则结果是一个 POINT。 </p><pre class="programlisting">SELECT ST_AsText(ST_LineSubstring( 'LINESTRING(25 50, 100 125, 150 190)', 0.333, 0.333));
------------------------------------------
 POINT(69.2846934853974 94.2846934853974)
</pre><p>将 LineString 切成长度为 100 或更短的部分的查询。 它使用<code class="varname">generate_series() </code>和CROSS JOIN LATERAL 来生成FOR 循环的等效项。 </p><pre class="programlisting">

WITH data(id, geom) AS (VALUES
        ( 'A', 'LINESTRING( 0 0, 200 0)'::geometry ),
        ( 'B', 'LINESTRING( 0 100, 350 100)'::geometry ),
        ( 'C', 'LINESTRING( 0 200, 50 200)'::geometry )
    )
SELECT id, i,
       ST_AsText( ST_LineSubstring( geom, startfrac, LEAST( endfrac, 1 )) ) AS geom
FROM (
    SELECT id, geom, ST_Length(geom) len, 100 sublen FROM data
    ) AS d
CROSS JOIN LATERAL (
    SELECT i, (sublen * i) / len AS startfrac,
              (sublen * (i+1)) / len AS endfrac
    FROM generate_series(0, floor( len / sublen )::integer ) AS t(i)
    -- skip last i if line length is exact multiple of sublen
    WHERE (sublen * i) / len &lt;
&gt; 1.0
    ) AS d2;

 id | i |            geom
----+---+-----------------------------
 A  | 0 | LINESTRING(0 0,100 0)
 A  | 1 | LINESTRING(100 0,200 0)
 B  | 0 | LINESTRING(0 100,100 100)
 B  | 1 | LINESTRING(100 100,200 100)
 B  | 2 | LINESTRING(200 100,300 100)
 B  | 3 | LINESTRING(300 100,350 100)
 C  | 0 | LINESTRING(0 200,50 200)

</pre><p>地理实现沿球体表面进行测量，而几何实现沿线进行测量</p><pre class="programlisting">SELECT ST_AsText(ST_LineSubstring( 'LINESTRING(-118.2436 34.0522, -71.0570 42.3611)'::geography, 0.333, 0.666),6) AS geog_sub
 , ST_AsText(ST_LineSubstring('LINESTRING(-118.2436 34.0522, -71.0570 42.3611)'::geometry, 0.333, 0.666),6) AS geom_sub;
---------------------------------------------------------------
geog_sub | LINESTRING(-104.167064 38.854691,-87.674646 41.849854)
geom_sub | LINESTRING(-102.530462 36.819064,-86.817324 39.585927)
</pre></div><div class="refsection" id="idm20012"><h2>相关信息</h2><p><a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_LineExtend" title="ST_LineExtend">ST_LineExtend</a>, <a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>, <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a></p></div></div><div class="refentry" id="ST_LocateAlong"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LocateAlong — 返回几何上与测量值匹配的点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LocateAlong</strong>(</code>geometry  <var class="pdparam">geom_with_measure</var>, float8  <var class="pdparam">measure</var>, float8  <var class="pdparam">offset = 0</var><code>)</code>;</p></div></div><div class="refsection" id="idm20037"><h2>描述</h2><p>返回沿具有给定测量值的测量几何图形的位置。 结果是点或多点。 不支持多边形输入。</p><p>如果提供了 <code class="varname">offset</code>，则结果将向输入线的左侧或右侧偏移指定的距离。 正偏移将向左偏移，负偏移将向右偏移。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅对具有 M 分量的线性几何使用此函数</p></td></tr></table></div><p>语义由 <span class="emphasis"><em>ISO/IEC 13249-3 SQL/MM 空间</em></span>标准指定。</p><p class="availability">可用性：1.1.0（旧名称 ST_Locate_Along_Measure）。 </p><p class="changed">更改：2.0.0 在之前的版本中，这曾经被称为 ST_Locate_Along_Measure。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1.13</p></div><div class="refsection" id="idm20056"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(
  ST_LocateAlong(
    'MULTILINESTRINGM((1 2 3, 3 4 2, 9 4 3),(1 2 3, 5 4 5))'::geometry,
    3 ));

----------------------------------
 MULTIPOINT M ((1 2 3),(9 4 3),(1 2 3))
</pre></div><div class="refsection" id="idm20059"><h2>相关信息</h2><p><a class="xref" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a>, <a class="xref" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a>, <a class="xref" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a> </p></div></div><div class="refentry" id="ST_LocateBetween"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LocateBetween — 返回与测量范围匹配的几何图形部分。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LocateBetween</strong>(</code>geometry  <var class="pdparam">geom</var>, float8  <var class="pdparam">measure_start</var>, float8  <var class="pdparam">measure_end</var>, float8  <var class="pdparam">offset = 0</var><code>)</code>;</p></div></div><div class="refsection" id="idm20086"><h2>描述</h2><p>返回一个几何图形（集合），其中包含与指定测量范围（包含）匹配的输入测量几何图形部分。</p><p>如果提供了<code class="varname">偏移量</code>，则结果将向输入行的左侧或右侧偏移指定的距离。 正偏移量将向左偏移，负偏移量将向右偏移。</p><p>裁剪非凸多边形可能会产生无效的几何图形。</p><p>语义由 <span class="emphasis"><em>ISO/IEC 13249-3 SQL/MM 空间</em></span>标准指定。</p><p class="availability">可用性：1.1.0（旧名称 ST_Locate_Between_Measures）。 </p><p class="changed">更改：2.0.0 - 在之前的版本中，这曾经被称为 ST_Locate_Between_Measures。</p><p class="enhanced">增强：3.0.0 - 添加了对多边形、TIN、三角形的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该功能支持M坐标。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p></div><div class="refsection" id="idm20105"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(
  ST_LocateBetween(
       'MULTILINESTRING M ((1 2 3, 3 4 2, 9 4 3),(1 2 3, 5 4 5))':: geometry,
       1.5, 3 ));
------------------------------------------------------------------------
 GEOMETRYCOLLECTION M (LINESTRING M (1 2 3,3 4 2,9 4 3),POINT M (1 2 3))
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_locatebetween01.png"/><div class="caption"><p>一个 LineString，其部分位于小节 2 和小节 8 之间，向左偏移 </p></div></div></div><pre class="programlisting">SELECT ST_AsText( ST_LocateBetween(
  ST_AddMeasure('LINESTRING (20 180, 50 20, 100 120, 180 20)', 0, 10),
  2, 8,
  20
));
------------------------------------------------------------------------
MULTILINESTRING((54.49835019899045 104.53426957938231,58.70056060327303 82.12248075654186,69.16695286779743 103.05526528559065,82.11145618000168 128.94427190999915,84.24893681714357 132.32493442618113,87.01636951231555 135.21267035596549,90.30307285299679 137.49198684843182,93.97759758337769 139.07172433557758,97.89298381958797 139.8887023914453,101.89263860095893 139.9102465862721,105.81659870902816 139.13549527600819,109.50792827749828 137.5954340631298,112.81899532549731 135.351656550512,115.6173761888606 132.49390095108848,145.31017306064817 95.37790486135405))
</pre></div><div class="refsection" id="idm20115"><h2>相关信息</h2><p><a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>, <a class="xref" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a></p></div></div><div class="refentry" id="ST_LocateBetweenElevations"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_LocateBetweenElevations — 返回位于高程 (Z) 范围内的几何图形部分。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_LocateBetweenElevations</strong>(</code>geometry  <var class="pdparam">geom</var>, float8  <var class="pdparam">elevation_start</var>, float8  <var class="pdparam">elevation_end</var><code>)</code>;</p></div></div><div class="refsection" id="idm20138"><h2>描述</h2><p>返回一个几何图形（集合），其中包含位于高程 (Z) 范围内的几何图形部分。</p><p>裁剪非凸多边形可能会产生无效的几何图形。</p><p class="availability">可用性：1.4.0</p><p class="enhanced">增强：3.0.0 - 添加了对多边形、TIN、三角形的支持。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20148"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(
  ST_LocateBetweenElevations(
    'LINESTRING(1 2 3, 4 5 6)'::geometry,
    2, 4 ));

             st_astext
-----------------------------------
 MULTILINESTRING Z ((1 2 3,2 3 4))

SELECT ST_AsText(
    ST_LocateBetweenElevations(
      'LINESTRING(1 2 6, 4 5 -1, 7 8 9)',
      6, 9)) As ewelev;

                                ewelev
-----------------------------------------------------------------------
 GEOMETRYCOLLECTION Z (POINT Z (1 2 6),LINESTRING Z (6.1 7.1 6,7 8 9))
</pre></div><div class="refsection" id="idm20151"><h2>相关信息</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a></p></div></div><div class="refentry" id="ST_InterpolatePoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_InterpolatePoint — 返回最接近点的几何图形的插值测量值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_InterpolatePoint</strong>(</code>geometry  <var class="pdparam">linear_geom_with_measure</var>, geometry  <var class="pdparam">point</var><code>)</code>;</p></div></div><div class="refsection" id="idm20171"><h2>描述</h2><p>返回最接近给定点的位置处的线性测量几何图形的插值测量值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>仅对具有 M 分量的线性几何使用此函数</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20181"><h2>示例</h2><pre class="programlisting">SELECT ST_InterpolatePoint('LINESTRING M (0 0 0, 10 0 20)', 'POINT(5 5)');
 ---------------------
         10
        </pre></div><div class="refsection" id="idm20184"><h2>相关信息</h2><p><a class="xref" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>, <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>, <a class="xref" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a></p></div></div><div class="refentry" id="ST_AddMeasure"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddMeasure — 沿线性几何形状插值测量值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_AddMeasure</strong>(</code>geometry  <var class="pdparam">geom_mline</var>, float8  <var class="pdparam">measure_start</var>, float8  <var class="pdparam">measure_end</var><code>)</code>;</p></div></div><div class="refsection" id="idm20208"><h2>描述</h2><p>返回派生几何图形，其测量值在起点和终点之间线性插值。 如果几何图形没有测量尺寸，则添加一个。 如果几何图形具有测量尺寸，则会用新值覆盖它。 仅支持 LINESTRINGS 和 MULTILINESTRINGS。</p><p class="availability">可用性：1.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20216"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('LINESTRING(1 0, 2 0, 4 0)'),1,4)) As ewelev;
           ewelev
--------------------------------
 LINESTRINGM(1 0 1,2 0 2,4 0 4)

SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('LINESTRING(1 0 4, 2 0 4, 4 0 4)'),10,40)) As ewelev;
                 ewelev
----------------------------------------
 LINESTRING(1 0 4 10,2 0 4 20,4 0 4 40)

SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('LINESTRINGM(1 0 4, 2 0 4, 4 0 4)'),10,40)) As ewelev;
                 ewelev
----------------------------------------
 LINESTRINGM(1 0 10,2 0 20,4 0 40)

SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('MULTILINESTRINGM((1 0 4, 2 0 4, 4 0 4),(1 0 4, 2 0 4, 4 0 4))'),10,70)) As ewelev;
                             ewelev
-----------------------------------------------------------------
 MULTILINESTRINGM((1 0 10,2 0 20,4 0 40),(1 0 40,2 0 50,4 0 70))
</pre></div></div></section><section class="section" id="Temporal"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.20. 轨迹函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数支持处理轨迹。 轨迹是每个坐标上具有递增度量（M 值）的线性几何。 时空数据可以使用相对时间（例如历元）作为度量值来建模。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_IsValidTrajectory">ST_IsValidTrajectory</a></span><span class="refpurpose"> — 测试几何图形是否为有效轨迹。</span></li><li><span class="refentrytitle"><a href="#ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a></span><span class="refpurpose"> — 返回两条轨迹最接近点处的测量值。 </span></li><li><span class="refentrytitle"><a href="#ST_DistanceCPA">ST_DistanceCPA</a></span><span class="refpurpose"> — 返回两条轨迹的最近接近点之间的距离。 </span></li><li><span class="refentrytitle"><a href="#ST_CPAWithin">ST_CPAWithin</a></span><span class="refpurpose"> — 测试两条轨迹的最近接近点是否在指定距离内。 </span></li></ul></div><div class="refentry" id="ST_IsValidTrajectory"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsValidTrajectory — 测试几何图形是否为有效轨迹。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsValidTrajectory</strong>(</code>geometry  <var class="pdparam">line</var><code>)</code>;</p></div></div><div class="refsection" id="idm20236"><h2>描述</h2><p>测试几何体是否编码有效的轨迹。 有效轨迹表示为带有度量（M 值）的<code class="varname"> LINESTRING</code>。 测量值必须从每个顶点到下一个顶点增加。 </p><p>预计有效轨迹作为时空函数（如 <a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>）的输入 </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20247"><h2>示例</h2><pre class="programlisting">-- A valid trajectory
SELECT ST_IsValidTrajectory(ST_MakeLine(
  ST_MakePointM(0,0,1),
  ST_MakePointM(0,1,2))
);
 t

-- An invalid trajectory
SELECT ST_IsValidTrajectory(ST_MakeLine(ST_MakePointM(0,0,1), ST_MakePointM(0,1,0)));
NOTICE:  Measure of vertex 1 (0) not bigger than measure of vertex 0 (1)
 st_isvalidtrajectory
----------------------
 f
</pre></div><div class="refsection" id="idm20250"><h2>相关信息</h2><p>
<a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>
			</p></div></div><div class="refentry" id="ST_ClosestPointOfApproach"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ClosestPointOfApproach — 返回两条轨迹最接近点处的测量值。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_ClosestPointOfApproach</strong>(</code>geometry  <var class="pdparam">track1</var>, geometry  <var class="pdparam">track2</var><code>)</code>;</p></div></div><div class="refsection" id="idm20269"><h2>描述</h2><p>返回沿着给定轨迹插值的点之间距离最短的最小度量值。 </p><p>输入必须是经 <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> 检查的有效轨迹。 如果轨迹在其 M 范围内不重叠，则返回 Null。 </p><p>要获取计算得到的度量值上的实际点，请使用 <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>。 </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20281"><h2>示例</h2><pre class="programlisting">-- Return the time in which two objects moving between 10:00 and 11:00
-- are closest to each other and their distance at that point
WITH inp AS ( SELECT
  ST_AddMeasure('LINESTRING Z (0 0 0, 10 0 5)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) a,
  ST_AddMeasure('LINESTRING Z (0 2 10, 12 1 2)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) b
), cpa AS (
  SELECT ST_ClosestPointOfApproach(a,b) m FROM inp
), points AS (
  SELECT ST_GeometryN(ST_LocateAlong(a,m),1) pa,
         ST_GeometryN(ST_LocateAlong(b,m),1) pb
  FROM inp, cpa
)
SELECT to_timestamp(m) t,
       ST_Distance(pa,pb) distance,
       ST_AsText(pa, 2) AS pa, ST_AsText(pb, 2) AS pb
FROM points, cpa;

               t               |      distance      |                  pa                  |                   pb                   
-------------------------------+--------------------+--------------------------------------+----------------------------------------
 2015-05-26 10:45:31.034483-07 | 1.9603683315139542 | POINT ZM (7.59 0 3.79 1432662331.03) | POINT ZM (9.1 1.24 3.93 1432662331.03)
 </pre></div><div class="refsection" id="idm20284"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>, <a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>, <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>, <a class="xref" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a> </p></div></div><div class="refentry" id="ST_DistanceCPA"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DistanceCPA — 返回两条轨迹的最近接近点之间的距离。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_DistanceCPA</strong>(</code>geometry  <var class="pdparam">track1</var>, geometry  <var class="pdparam">track2</var><code>)</code>;</p></div></div><div class="refsection" id="idm20306"><h2>描述</h2><p>返回两条轨迹在它们最接近的相交点处的距离（在二维空间中）。 </p><p>输入必须是经 <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> 检查的有效轨迹。 如果轨迹在其 M 范围内不重叠，则返回 Null。 </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20316"><h2>示例</h2><pre class="programlisting">-- Return the minimum distance of two objects moving between 10:00 and 11:00
WITH inp AS ( SELECT
  ST_AddMeasure('LINESTRING Z (0 0 0, 10 0 5)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) a,
  ST_AddMeasure('LINESTRING Z (0 2 10, 12 1 2)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) b
)
SELECT ST_DistanceCPA(a,b) distance FROM inp;

     distance
------------------
 1.96036833151395
</pre></div><div class="refsection" id="idm20319"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>, <a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>, <a class="xref" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>, <a class="xref" href="#geometry_distance_cpa" title="|=|">|=|</a> </p></div></div><div class="refentry" id="ST_CPAWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CPAWithin — 测试两条轨迹的最近接近点是否在指定距离内。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_CPAWithin</strong>(</code>geometry  <var class="pdparam">track1</var>, geometry  <var class="pdparam">track2</var>, float8  <var class="pdparam">dist</var><code>)</code>;</p></div></div><div class="refsection" id="idm20344"><h2>描述</h2><p>测试两个移动物体是否曾经比指定距离更近。 </p><p>输入必须是经 <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> 检查的有效轨迹。 如果轨迹在其 M 范围内不重叠，则返回 False。 </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm20354"><h2>示例</h2><pre class="programlisting">WITH inp AS ( SELECT
  ST_AddMeasure('LINESTRING Z (0 0 0, 10 0 5)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) a,
  ST_AddMeasure('LINESTRING Z (0 2 10, 12 1 2)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) b
)
SELECT ST_CPAWithin(a,b,2), ST_DistanceCPA(a,b) distance FROM inp;

 st_cpawithin |     distance
--------------+------------------
 t            | 1.96521473776207
</pre></div><div class="refsection" id="idm20357"><h2>相关信息</h2><p><a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>, <a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>, <a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>, <a class="xref" href="#geometry_distance_cpa" title="|=|">|=|</a> </p></div></div></section><section class="section" id="Version_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.21. 版本函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数报告和升级 PostGIS 版本。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#PostGIS_Extensions_Upgrade">PostGIS_Extensions_Upgrade</a></span><span class="refpurpose"> — 将 PostGIS 扩展（例如 postgis_raster、postgis_topology、postgis_sfcgal）打包并升级到给定版本或最新版本。 </span></li><li><span class="refentrytitle"><a href="#PostGIS_Full_Version">PostGIS_Full_Version</a></span><span class="refpurpose"> — 报告完整的 PostGIS 版本和构建配置信息。</span></li><li><span class="refentrytitle"><a href="#PostGIS_GEOS_Version">PostGIS_GEOS_Version</a></span><span class="refpurpose"> — 返回 GEOS 库的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_GEOS_Compiled_Version">PostGIS_GEOS_Compiled_Version</a></span><span class="refpurpose"> — 返回构建 PostGIS 所依据的 GEOS 库的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_Liblwgeom_Version">PostGIS_Liblwgeom_Version</a></span><span class="refpurpose"> — 返回 liblwgeom 库的版本号。 这应该与 PostGIS 的版本匹配。</span></li><li><span class="refentrytitle"><a href="#PostGIS_LibXML_Version">PostGIS_LibXML_Version</a></span><span class="refpurpose"> — 返回 libxml2 库的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_LibJSON_Version">PostGIS_LibJSON_Version</a></span><span class="refpurpose"> — Returns the version number of the libjson-c library.</span></li><li><span class="refentrytitle"><a href="#PostGIS_Lib_Build_Date">PostGIS_Lib_Build_Date</a></span><span class="refpurpose"> — 返回 PostGIS 库的构建日期。</span></li><li><span class="refentrytitle"><a href="#PostGIS_Lib_Version">PostGIS_Lib_Version</a></span><span class="refpurpose"> — 返回 PostGIS 库的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_PROJ_Version">PostGIS_PROJ_Version</a></span><span class="refpurpose"> — 返回 PROJ4 库的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_PROJ_Compiled_Version">PostGIS_PROJ_Compiled_Version</a></span><span class="refpurpose"> — Returns the version number of the PROJ library against which PostGIS was built.</span></li><li><span class="refentrytitle"><a href="#PostGIS_Wagyu_Version">PostGIS_Wagyu_Version</a></span><span class="refpurpose"> — 返回内部 Wagyu 库的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_Scripts_Build_Date">PostGIS_Scripts_Build_Date</a></span><span class="refpurpose"> — 返回 PostGIS 脚本的构建日期。</span></li><li><span class="refentrytitle"><a href="#PostGIS_Scripts_Installed">PostGIS_Scripts_Installed</a></span><span class="refpurpose"> — 返回此数据库中安装的 PostGIS 脚本的版本。</span></li><li><span class="refentrytitle"><a href="#PostGIS_Scripts_Released">PostGIS_Scripts_Released</a></span><span class="refpurpose"> — 返回随安装的 PostGIS 库一起发布的 postgis.sql 脚本的版本号。</span></li><li><span class="refentrytitle"><a href="#PostGIS_Version">PostGIS_Version</a></span><span class="refpurpose"> — 返回 PostGIS 版本号和编译时选项。</span></li></ul></div><div class="refentry" id="PostGIS_Extensions_Upgrade"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Extensions_Upgrade — 将 PostGIS 扩展（例如 postgis_raster、postgis_topology、postgis_sfcgal）打包并升级到给定版本或最新版本。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Extensions_Upgrade</strong>(</code>text <var class="pdparam">target_version=null</var><code>)</code>;</p></div></div><div class="refsection" id="idm20381"><h2>描述</h2><p>将 PostGIS 扩展打包并升级到给定版本或最新版本。 如果需要，只会打包和升级您在数据库中安装的扩展。 报告完整的 PostGIS 版本并随后构建配置信息。 这是对每个 PostGIS 扩展执行多个 CREATE EXTENSION .. FROM unpackaged 和 ALTER EXTENSION .. UPDATE 的简写。 目前仅尝试升级扩展 postgis、postgis_raster、postgis_sfcgal、postgis_topology 和 postgis_tiger_geocoder。</p><p class="availability">可用性：2.5.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p class="changed">更改：3.4.0 添加 target_version 参数。</p><p class="changed">更改：3.3.0 支持从任何 PostGIS 版本升级。 不适用于所有系统。</p><p class="changed">更改：3.0.0 重新打包松散扩展并支持 postgis_raster。</p></td></tr></table></div></div><div class="refsection" id="idm20389"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Extensions_Upgrade();</pre><pre class="screen">NOTICE:  Packaging extension postgis
NOTICE:  Packaging extension postgis_raster
NOTICE:  Packaging extension postgis_sfcgal
NOTICE:  Extension postgis_topology is not available or not packagable for some reason
NOTICE:  Extension postgis_tiger_geocoder is not available or not packagable for some reason

                    postgis_extensions_upgrade
-------------------------------------------------------------------
 Upgrade completed, run SELECT postgis_full_version(); for details
(1 row)</pre></div><div class="refsection" id="idm20393"><h2>相关信息</h2><p><a class="xref" href="#upgrading" title="3.4. 升级空间数据库">Section 3.4, “升级空间数据库”</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a> </p></div></div><div class="refentry" id="PostGIS_Full_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Full_Version — 报告完整的 PostGIS 版本和构建配置信息。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Full_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20412"><h2>描述</h2><p>报告完整的 PostGIS 版本和构建配置信息。 还通知库和脚本之间的同步，建议根据需要进行升级。</p><p class="enhanced">增强功能：3.4.0 现在包括额外的 PROJ 配置 NETWORK_ENABLED、URL_ENDPOINT 和 proj.db 位置的 DATABASE_PATH </p></div><div class="refsection" id="idm20416"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Full_Version();
                                                           postgis_full_version
----------------------------------------------------------------------------------
POSTGIS="3.4.0dev 3.3.0rc2-993-g61bdf43a7" [EXTENSION] PGSQL="160" GEOS="3.12.0dev-CAPI-1.18.0" SFCGAL="1.3.8" PROJ="7.2.1 NETWORK_ENABLED=OFF URL_ENDPOINT=https://cdn.proj.org USER_WRITABLE_DIRECTORY=/tmp/proj DATABASE_PATH=/usr/share/proj/proj.db" GDAL="GDAL 3.2.2, released 2021/03/05" LIBXML="2.9.10" LIBJSON="0.15" LIBPROTOBUF="1.3.3" WAGYU="0.5.0 (Internal)" TOPOLOGY RASTER
(1 row)
</pre></div><div class="refsection" id="idm20419"><h2>相关信息</h2><p><a class="xref" href="#upgrading" title="3.4. 升级空间数据库">Section 3.4, “升级空间数据库”</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Wagyu_Version" title="PostGIS_Wagyu_Version">PostGIS_Wagyu_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a> </p></div></div><div class="refentry" id="PostGIS_GEOS_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_GEOS_Version — 返回 GEOS 库的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_GEOS_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20439"><h2>描述</h2><p>返回 GEOS 库的版本号，如果未启用 GEOS 支持，则返回<code class="varname"> NULL</code>。</p></div><div class="refsection" id="idm20443"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_GEOS_Version();
 postgis_geos_version
----------------------
3.12.0dev-CAPI-1.18.0
(1 row)</pre></div><div class="refsection" id="idm20446"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_GEOS_Compiled_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_GEOS_Compiled_Version — 返回构建 PostGIS 所依据的 GEOS 库的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_GEOS_Compiled_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20464"><h2>描述</h2><p>返回 GEOS 库的版本号，或构建 PostGIS 的版本号。</p><p class="availability">可用性：3.4.0</p></div><div class="refsection" id="idm20468"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_GEOS_Compiled_Version();
 postgis_geos_compiled_version
-------------------------------
 3.12.0
(1 row)</pre></div><div class="refsection" id="idm20471"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a> </p></div></div><div class="refentry" id="PostGIS_Liblwgeom_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Liblwgeom_Version — 返回 liblwgeom 库的版本号。 这应该与 PostGIS 的版本匹配。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Liblwgeom_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20486"><h2>描述</h2><p>返回 liblwgeom 库的版本号/</p></div><div class="refsection" id="idm20489"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Liblwgeom_Version();
postgis_liblwgeom_version
--------------------------
3.4.0dev 3.3.0rc2-993-g61bdf43a7
(1 row)</pre></div><div class="refsection" id="idm20492"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_LibXML_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_LibXML_Version — 返回 libxml2 库的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_LibXML_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20510"><h2>描述</h2><p>返回 libxml2 库的版本号。</p><p class="availability">可用性：1.5</p></div><div class="refsection" id="idm20514"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_LibXML_Version();
 postgis_libxml_version
----------------------
 2.9.10
(1 row)</pre></div><div class="refsection" id="idm20517"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_LibJSON_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_LibJSON_Version — Returns the version number of the libjson-c library.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_LibJSON_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20535"><h2>描述</h2><p>Returns the version number of the LibJSON-C library.</p></div><div class="refsection" id="idm20538"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_LibJSON_Version();
 postgis_libjson_version
-------------------------
 0.17</pre></div><div class="refsection" id="idm20541"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_Lib_Build_Date"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Lib_Build_Date — 返回 PostGIS 库的构建日期。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Lib_Build_Date</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20559"><h2>描述</h2><p>返回 PostGIS 库的构建日期。</p></div><div class="refsection" id="idm20562"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Lib_Build_Date();
 postgis_lib_build_date
------------------------
 2023-06-22 03:56:11
(1 row)</pre></div></div><div class="refentry" id="PostGIS_Lib_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Lib_Version — 返回 PostGIS 库的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Lib_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20575"><h2>描述</h2><p>返回 PostGIS 库的版本号。</p></div><div class="refsection" id="idm20578"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Lib_Version();
 postgis_lib_version
---------------------
 3.4.0dev
(1 row)</pre></div><div class="refsection" id="idm20581"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_PROJ_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_PROJ_Version — 返回 PROJ4 库的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_PROJ_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20599"><h2>描述</h2><p>返回 PROJ 库的版本号和 proj 的一些配置选项。</p><p class="enhanced">增强功能：3.4.0 现在包括 proj.db 位置的 NETWORK_ENABLED、URL_ENDPOINT 和 DATABASE_PATH </p></div><div class="refsection" id="idm20603"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_PROJ_Version();
  postgis_proj_version
-------------------------
7.2.1 NETWORK_ENABLED=OFF URL_ENDPOINT=https://cdn.proj.org USER_WRITABLE_DIRECTORY=/tmp/proj DATABASE_PATH=/usr/share/proj/proj.db
(1 row)</pre></div><div class="refsection" id="idm20606"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_PROJ_Compiled_Version" title="PostGIS_PROJ_Compiled_Version">PostGIS_PROJ_Compiled_Version</a>, <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_PROJ_Compiled_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_PROJ_Compiled_Version — Returns the version number of the PROJ library against which PostGIS was built.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_PROJ_Compiled_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20625"><h2>描述</h2><p>Returns the version number of the PROJ library, or against which PostGIS was built.</p><p class="availability">可用性：3.5.0</p></div><div class="refsection" id="idm20629"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_PROJ_Compiled_Version();
 postgis_proj_compiled_version
-------------------------------
 9.1.1
(1 row)</pre></div><div class="refsection" id="idm20632"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a> </p></div></div><div class="refentry" id="PostGIS_Wagyu_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Wagyu_Version — 返回内部 Wagyu 库的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Wagyu_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20647"><h2>描述</h2><p>返回内部 Wagyu 库的版本号，如果未启用 Wagyu 支持，则返回 <code class="varname">NULL</code>。</p></div><div class="refsection" id="idm20651"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Wagyu_Version();
 postgis_wagyu_version
-----------------------
 0.5.0 (Internal)
(1 row)</pre></div><div class="refsection" id="idm20654"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_Scripts_Build_Date"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Scripts_Build_Date — 返回 PostGIS 脚本的构建日期。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Scripts_Build_Date</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20673"><h2>描述</h2><p>返回 PostGIS 脚本的构建日期。</p><p class="availability">可用性： 1.0.0RC1</p></div><div class="refsection" id="idm20677"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Scripts_Build_Date();
  postgis_scripts_build_date
-------------------------
 2023-06-22 03:56:11
(1 row)</pre></div><div class="refsection" id="idm20680"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_Scripts_Installed"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Scripts_Installed — 返回此数据库中安装的 PostGIS 脚本的版本。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Scripts_Installed</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20698"><h2>描述</h2><p>返回此数据库中安装的 PostGIS 脚本的版本。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果此函数的输出与 <a class="xref" href="#PostGIS_Scripts_Released" title="PostGIS_Scripts_Released">PostGIS_Scripts_Released</a>的输出不匹配，您可能错过了正确升级现有数据库的机会。 有关详细信息，请参阅<a class="link" href="#upgrading" title="3.4. 升级空间数据库">升级</a>部分。</p></td></tr></table></div><p class="availability">可用性：0.9.0</p></div><div class="refsection" id="idm20706"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Scripts_Installed();
  postgis_scripts_installed
-------------------------
 3.4.0dev 3.3.0rc2-993-g61bdf43a7
(1 row)</pre></div><div class="refsection" id="idm20709"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Scripts_Released" title="PostGIS_Scripts_Released">PostGIS_Scripts_Released</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" id="PostGIS_Scripts_Released"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Scripts_Released — 返回随安装的 PostGIS 库一起发布的 postgis.sql 脚本的版本号。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Scripts_Released</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20725"><h2>描述</h2><p>返回随安装的 PostGIS 库一起发布的 postgis.sql 脚本的版本号。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>从版本 1.1.0 开始，此函数返回与 <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>相同的值。 保留向后兼容性。</p></td></tr></table></div><p class="availability">可用性：0.9.0</p></div><div class="refsection" id="idm20732"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Scripts_Released();
  postgis_scripts_released
-------------------------
 3.4.0dev 3.3.0rc2-993-g61bdf43a7
(1 row)</pre></div><div class="refsection" id="idm20735"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Scripts_Installed" title="PostGIS_Scripts_Installed">PostGIS_Scripts_Installed</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a></p></div></div><div class="refentry" id="PostGIS_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Version — 返回 PostGIS 版本号和编译时选项。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm20751"><h2>描述</h2><p>返回 PostGIS 版本号和编译时选项。</p></div><div class="refsection" id="idm20754"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Version();
                        postgis_version
---------------------------------------
 3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
(1 row)</pre></div><div class="refsection" id="idm20757"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a></p></div></div></section><section class="section" id="PostGIS_GUC"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.22. 大一统自定义变量 (GUCs)</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本部分列出了自定义 PostGIS Grand Unified 自定义变量 (GUC)。 这些可以通过数据库、会话或事务进行全局设置。 最好在全局或数据库级别设置。</p><p>For more examples of usage refer to <a class="link" href="https://www.postgresql.org/docs/current/sql-set.html" target="_top">SQL SET</a> and <a class="link" href="https://www.postgresql.org/docs/current/sql-altersystem.html" target="_top">SQL ALTER SYSTEM</a></p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#postgis_backend">postgis.backend</a></span><span class="refpurpose"> — 为 GEOS 和 SFCGAL 重叠的功能提供服务的后端。 选项：geos 或 sfcgal。 默认为geos。</span></li><li><span class="refentrytitle"><a href="#postgis_gdal_datapath">postgis.gdal_datapath</a></span><span class="refpurpose"> — 用于分配 GDAL 的 GDAL_DATA 选项值的配置选项。 如果未设置，则使用环境设置的 GDAL_DATA 变量。 </span></li><li><span class="refentrytitle"><a href="#postgis_gdal_enabled_drivers">postgis.gdal_enabled_drivers</a></span><span class="refpurpose"> — 用于设置 PostGIS 环境中启用的 GDAL 驱动程序的配置选项。 影响 GDAL 配置变量 GDAL_SKIP。 </span></li><li><span class="refentrytitle"><a href="#postgis_enable_outdb_rasters">postgis.enable_outdb_rasters</a></span><span class="refpurpose"> — 一个布尔配置选项，用于启用对数据库外栅格波段的访问。 </span></li><li><span class="refentrytitle"><a href="#postgis_gdal_vsi_options">postgis.gdal_vsi_options</a></span><span class="refpurpose"> — 用于设置处理外部数据库栅格时使用的选项的字符串配置。 </span></li></ul></div><div class="refentry" id="postgis_backend"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis.backend — 为 GEOS 和 SFCGAL 重叠的功能提供服务的后端。 选项：geos 或 sfcgal。 默认为geos。</p></div><div class="refsection" id="idm20777"><h2>描述</h2><p>仅当您使用 sfcgal 支持编译 PostGIS 时，此 GUC 才相关。 默认情况下，<code class="varname">geos </code>后端用于 GEOS 和 SFCGAL 具有相同命名函数的函数。 此变量允许您覆盖并使 sfcgal 成为后端来服务请求。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm20782"><h2>示例</h2><p>仅针对连接生命周期设置后端</p><pre class="programlisting">set postgis.backend = sfcgal;</pre><p>设置数据库新连接的后端</p><pre class="programlisting">ALTER DATABASE mygisdb SET postgis.backend = sfcgal;</pre></div><div class="refsection" id="idm20788"><h2>相关信息</h2><p><a class="xref" href="#reference_sfcgal" title="Chapter 8. SFCGAL函数参考">Chapter 8, <em>SFCGAL函数参考</em></a></p></div></div><div class="refentry" id="postgis_gdal_datapath"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis.gdal_datapath — 用于分配 GDAL 的 GDAL_DATA 选项值的配置选项。 如果未设置，则使用环境设置的 GDAL_DATA 变量。 </p></div><div class="refsection" id="idm20796"><h2>描述</h2><p>一个 PostgreSQL GUC 变量，用于设置 GDAL 的 GDAL_DATA 选项的值。 <code class="varname">postgis.gdal_datapath</code> 值应该是 GDAL 数据文件的完整物理路径。 </p><p>此配置选项最适用于 GDAL 数据文件路径未硬编码的 Windows 平台。 当 GDAL 的数据文件不在 GDAL 的预期路径中时，也应该设置此选项。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该选项可以在 PostgreSQL 的配置文件 postgresql.conf 中设置。 也可以通过连接或事务来设置。 </p></td></tr></table></div><p class="availability">可用性：2.2.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关 GDAL_DATA 的其他信息可在 GDAL 的<a class="link" href="http://trac.osgeo.org/gdal/wiki/ConfigOptions" target="_top">配置选项</a>中找到。 </p></td></tr></table></div></div><div class="refsection" id="idm20807"><h2>示例</h2><p>设置和重置<code class="varname"> postgis.gdal_datapath</code></p><pre class="programlisting">SET postgis.gdal_datapath TO '/usr/local/share/gdal.hidden';
SET postgis.gdal_datapath TO default;
                </pre><p>在 Windows 上针对特定数据库进行设置</p><pre class="programlisting">ALTER DATABASE gisdb
SET postgis.gdal_datapath = 'C:/Program Files/PostgreSQL/9.3/gdal-data';</pre></div><div class="refsection" id="idm20814"><h2>相关信息</h2><p><a class="xref" href="#RT_PostGIS_GDAL_Version" title="PostGIS_GDAL_Version">PostGIS_GDAL_Version</a>, <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> </p></div></div><div class="refentry" id="postgis_gdal_enabled_drivers"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis.gdal_enabled_drivers — 用于设置 PostGIS 环境中启用的 GDAL 驱动程序的配置选项。 影响 GDAL 配置变量 GDAL_SKIP。 </p></div><div class="refsection" id="idm20823"><h2>描述</h2><p>用于设置 PostGIS 环境中启用的 GDAL 驱动程序的配置选项。 影响 GDAL 配置变量 GDAL_SKIP。 该选项可以在 PostgreSQL 的配置文件：postgresql.conf 中设置。 也可以通过连接或事务来设置。 </p><p><code class="varname">postgis.gdal_enabled_drivers</code> 的初始值也可以通过将环境变量 <code class="varname">POSTGIS_GDAL_ENABLED_DRIVERS </code>和已启用的驱动程序列表传递给启动 PostgreSQL 的进程来设置。 </p><p>启用GDAL指定的驱动程序可以通过驱动程序的短名称或代码来指定。 驱动程序短名称或代码可以在 <a class="link" href="http://www.gdal.org/formats_list.html" target="_top">GDAL 栅格格式</a>中找到。 可以通过在每个驱动程序之间添加空格来指定多个驱动程序。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="varname">postgis.gdal_enabled_drivers </code>有三个可用的特殊代码。 代码区分大小写。 </p><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p><code class="varname">DISABLE_ALL </code>禁用所有 GDAL 驱动程序。 如果存在，<code class="varname">DISABLE_ALL </code>会覆盖 <code class="varname">postgis.gdal_enabled_drivers </code>中的所有其他值。</p></li><li class="listitem"><p><code class="varname">ENABLE_ALL </code>启用所有 GDAL 驱动程序。</p></li><li class="listitem"><p><code class="varname">VSICURL</code> 启用 GDAL 的 <code class="varname">/vsicurl/ </code>虚拟文件系统。</p></li></ul></div><p>
                    </p><p>当<code class="varname"> postgis.gdal_enabled_drivers </code>设置为 DISABLE_ALL 时，尝试使用 out-db 栅格、ST_FromGDALRaster()、ST_AsGDALRaster()、ST_AsTIFF()、ST_AsJPEG() 和 ST_AsPNG() 将导致错误消息。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在标准 PostGIS 安装中，<code class="varname">postgis.gdal_enabled_drivers </code>设置为 DISABLE_ALL。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关 GDAL_SKIP 的其他信息可在 GDAL 的<a class="link" href="http://trac.osgeo.org/gdal/wiki/ConfigOptions" target="_top">配置选项</a>中找到。 </p></td></tr></table></div><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm20856"><h2>示例</h2><p>To set and reset <code class="varname">postgis.gdal_enabled_drivers</code> for current session</p><pre class="programlisting">SET postgis.gdal_enabled_drivers = 'ENABLE_ALL';
SET postgis.gdal_enabled_drivers = default;
                </pre><p>Set for all new connections to a specific database to specific drivers</p><pre class="programlisting">ALTER DATABASE mygisdb SET postgis.gdal_enabled_drivers TO 'GTiff PNG JPEG';</pre><p>Setting for whole database cluster to enable all drivers. Requires super user access. Also note that database, session, and user settings override this.</p><pre class="programlisting">--writes to postgres.auto.conf
ALTER SYSTEM SET postgis.gdal_enabled_drivers TO 'ENABLE_ALL';
 --Reloads postgres conf
SELECT pg_reload_conf();
                </pre></div><div class="refsection" id="idm20865"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a>, <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a>, <a class="xref" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a> </p></div></div><div class="refentry" id="postgis_enable_outdb_rasters"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis.enable_outdb_rasters — 一个布尔配置选项，用于启用对数据库外栅格波段的访问。 </p></div><div class="refsection" id="idm20878"><h2>描述</h2><p>一个布尔配置选项，用于启用对数据库外栅格波段的访问。 该选项可以在 PostgreSQL 的配置文件：postgresql.conf 中设置。 也可以通过连接或事务来设置。 </p><p><code class="varname">postgis.enable_outdb_rasters </code>的初始值也可以通过将具有非零值的环境变量 <code class="varname">POSTGIS_ENABLE_OUTDB_RASTERS </code>传递给启动 PostgreSQL 的进程来设置。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>即使 <code class="varname">postgis.enable_outdb_rasters</code> 为 True，GUC<code class="varname"> postgis.gdal_enabled_drivers </code>也会确定可访问的栅格格式。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在标准 PostGIS 安装中，<code class="varname">postgis.enable_outdb_rasters</code> 设置为 False。 </p></td></tr></table></div><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm20892"><h2>示例</h2><p>设置和重置当前会话的 <code class="varname">postgis.enable_outdb_rasters</code></p><pre class="programlisting">SET postgis.enable_outdb_rasters TO True;
SET postgis.enable_outdb_rasters = default;
SET postgis.enable_outdb_rasters = True;
SET postgis.enable_outdb_rasters = False;
                </pre><p>Set for all new connections to a specific database</p><pre class="programlisting">ALTER DATABASE gisdb SET postgis.enable_outdb_rasters = true;
                </pre><p>Setting for whole database cluster. Requires super user access. Also note that database, session, and user settings override this.</p><pre class="programlisting">--writes to postgres.auto.conf
ALTER SYSTEM SET postgis.enable_outdb_rasters = true;
 --Reloads postgres conf
SELECT pg_reload_conf();
                </pre></div><div class="refsection" id="idm20901"><h2>相关信息</h2><p>
                    <a class="xref" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a>
                    <a class="xref" href="#postgis_gdal_vsi_options" title="postgis.gdal_vsi_options">postgis.gdal_vsi_options</a>
                </p></div></div><div class="refentry" id="postgis_gdal_vsi_options"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis.gdal_vsi_options — 用于设置处理外部数据库栅格时使用的选项的字符串配置。 </p></div><div class="refsection" id="idm20910"><h2>描述</h2><p>用于设置处理外部数据库栅格时使用的选项的字符串配置。 <a class="link" href="http://trac.osgeo.org/gdal/wiki/ConfigOptions" target="_top">配置选项</a>控制诸如 GDAL 分配给本地数据缓存的空间大小、是否读取概述以及对远程 out-db 数据源使用哪些访问键等内容。 </p><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm20915"><h2>示例</h2><p>为当前会话设置 <code class="varname">postgis.gdal_vsi_options</code>：</p><pre class="programlisting">SET postgis.gdal_vsi_options = 'AWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxx AWS_SECRET_ACCESS_KEY=yyyyyyyyyyyyyyyyyyyyyyyyyy';
                </pre><p>使用<code class="varname"> LOCAL</code> 关键字仅为<span class="emphasis"><em>当前事务</em></span>设置<code class="varname"> postgis.gdal_vsi_options</code>：</p><pre class="programlisting">SET LOCAL postgis.gdal_vsi_options = 'AWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxx AWS_SECRET_ACCESS_KEY=yyyyyyyyyyyyyyyyyyyyyyyyyy';
                </pre></div><div class="refsection" id="idm20925"><h2>相关信息</h2><p>
                    <a class="xref" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a>
                    <a class="xref" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a>
                </p></div></div></section><section class="section" id="Troubleshooting_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.23. 故障排除函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数是用于故障排除和修复几何数据的实用程序。 仅当几何数据以某种方式损坏时才需要它们，而这种情况在正常情况下永远不会发生。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#PostGIS_AddBBox">PostGIS_AddBBox</a></span><span class="refpurpose"> — 向几何体添加边界框。</span></li><li><span class="refentrytitle"><a href="#PostGIS_DropBBox">PostGIS_DropBBox</a></span><span class="refpurpose"> — 从几何体中删除边界框缓存。</span></li><li><span class="refentrytitle"><a href="#PostGIS_HasBBox">PostGIS_HasBBox</a></span><span class="refpurpose"> — 如果该几何体的 bbox 已缓存，则返回 TRUE，否则返回 FALSE。</span></li></ul></div><div class="refentry" id="PostGIS_AddBBox"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_AddBBox — 向几何体添加边界框。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">PostGIS_AddBBox</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm20947"><h2>描述</h2><p>向几何体添加边界框。 这将使基于边界框的查询更快，但会增加几何形状的大小。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>边界框会自动添加到几何图形中，因此通常不需要这样做，除非生成的边界框以某种方式损坏或者您的旧安装缺少边界框。 然后你需要删除旧的并重新读取。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm20956"><h2>示例</h2><pre class="programlisting">UPDATE sometable
 SET geom =  PostGIS_AddBBox(geom)
 WHERE PostGIS_HasBBox(geom) = false;</pre></div><div class="refsection" id="idm20959"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a>, <a class="xref" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a></p></div></div><div class="refentry" id="PostGIS_DropBBox"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_DropBBox — 从几何体中删除边界框缓存。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">PostGIS_DropBBox</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm20976"><h2>描述</h2><p>从几何体中删除边界框缓存。 这会减少几何尺寸，但会使基于边界框的查询变慢。 它还用于删除损坏的边界框。 缓存边界框损坏的一个迹象是 ST_Intersects 和其他关系查询遗漏了理应返回 true 的几何图形。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>边界框会自动添加到几何图形中并提高查询速度，因此通常不需要这样做，除非生成的边界框以某种方式损坏或者您的旧安装缺少边界框。 然后你需要删除旧的并重新读取。 在 8.3-8.3.6 系列中已经观察到这种损坏，其中当几何图形更改时，并不总是重新计算缓存的 bbox，并且在不重新加载转储的情况下升级到较新的版本将不会纠正已经损坏的框。 因此，可以使用下面的方法手动更正并重新添加 bbox 或进行转储重新加载。</p></td></tr></table></div><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm20985"><h2>示例</h2><pre class="programlisting">--This example drops bounding boxes where the cached box is not correct
                        --The force to ST_AsBinary before applying Box2D forces a recalculation of the box, and Box2D applied to the table geometry always
                        -- returns the cached bounding box.
                        UPDATE sometable
 SET geom =  PostGIS_DropBBox(geom)
 WHERE Not (Box2D(ST_AsBinary(geom)) = Box2D(geom));

        UPDATE sometable
 SET geom =  PostGIS_AddBBox(geom)
 WHERE Not PostGIS_HasBBOX(geom);


 </pre></div><div class="refsection" id="idm20988"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>, <a class="xref" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a>, <a class="xref" href="#Box2D" title="Box2D">Box2D</a></p></div></div><div class="refentry" id="PostGIS_HasBBox"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_HasBBox — 如果该几何体的 bbox 已缓存，则返回 TRUE，否则返回 FALSE。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">PostGIS_HasBBox</strong>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" id="idm21006"><h2>描述</h2><p>如果该几何体的 bbox 已缓存，则返回 TRUE，否则返回 FALSE。 使用<a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>和<a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a>来控制缓存。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此方法支持圆形字符串和曲线。 </p></div><div class="refsection" id="idm21015"><h2>示例</h2><pre class="programlisting">SELECT geom
FROM sometable WHERE PostGIS_HasBBox(geom) = false;</pre></div><div class="refsection" id="idm21018"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>, <a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a></p></div></div></section></section><section class="chapter" id="reference_sfcgal"><div class="titlepage"><div><div><h1 class="title">Chapter 8. SFCGAL函数参考</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#sfcgal_management">8.1. SFCGAL管理函数</a></span></li><li><span class="section"><a href="#sfcgal_accessors">8.2. SFCGAL访问器和设置器</a></span></li><li><span class="section"><a href="#sfcgal_processing">8.3. SFCGAL处理和关系函数</a></span></li></ul></div><p>SFCGAL是CGAL的C++封装库，提供高级的二维和三维空间函数。为了确保稳健性，几何坐标具有精确的有理数表示。 </p><p>该库的安装说明可以在 SFCGAL 主页 (<a class="link" href="http://www.sfcgal.org" target="_top">http://www.sfcgal.org</a>) 上找到。 要启用这些功能，请使用<code class="code">create extension postgis_sfcgal</code>。 </p><section class="section" id="sfcgal_management"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.1. SFCGAL管理函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这部分列出了几个函数,用于确定您当前环境中 SFCGAL 的版本信息以及相关库文件的依赖关系。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#postgis_sfcgal_version">postgis_sfcgal_version</a></span><span class="refpurpose"> — 返回正在使用的 SFCGAL 版本</span></li><li><span class="refentrytitle"><a href="#postgis_sfcgal_full_version">postgis_sfcgal_full_version</a></span><span class="refpurpose"> — 返回正在使用的 SFCGAL 的完整版本，包括 CGAL 和 Boost 版本</span></li></ul></div><div class="refentry" id="postgis_sfcgal_version"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis_sfcgal_version — 返回正在使用的 SFCGAL 版本</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">文本 <strong class="fsfunc">postgis_sfcgal_version</strong>描述(</code><code>void)</code>;</p></div></div><div class="refsection" id="idm21044"><h2>描述</h2><p>返回正在使用的 SFCGAL 版本</p><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm21052"><h2>相关信息</h2><p><a class="xref" href="#postgis_sfcgal_full_version" title="postgis_sfcgal_full_version">postgis_sfcgal_full_version</a></p></div></div><div class="refentry" id="postgis_sfcgal_full_version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>postgis_sfcgal_full_version — 返回正在使用的 SFCGAL 的完整版本，包括 CGAL 和 Boost 版本</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">文本<strong class="fsfunc">postgis_sfcgal_full_version</strong>(</code><code>void)</code>;</p></div></div><div class="refsection" id="idm21066"><h2>描述</h2><p>返回正在使用的 SFCGAL 的完整版本，包括 CGAL 和 Boost 版本</p><p class="availability">可用性： 3.3.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm21074"><h2>相关信息</h2><p><a class="xref" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a></p></div></div></section><section class="section" id="sfcgal_accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.2. SFCGAL访问器和设置器</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>这些函数访问或设置几何图形的属性。这些函数主要支持TINS和多面体表面。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#CG_ForceLHR">CG_ForceLHR</a></span><span class="refpurpose"> — 强制 LHR 方向</span></li><li><span class="refentrytitle"><a href="#CG_IsPlanar">CG_IsPlanar</a></span><span class="refpurpose"> — 检查表面是否平坦</span></li><li><span class="refentrytitle"><a href="#CG_IsSolid">CG_IsSolid</a></span><span class="refpurpose"> — 测试几何体是否为实体。 不执行有效性检查。</span></li><li><span class="refentrytitle"><a href="#CG_MakeSolid">CG_MakeSolid</a></span><span class="refpurpose"> — 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</span></li><li><span class="refentrytitle"><a href="#CG_Orientation">CG_Orientation</a></span><span class="refpurpose"> — 确定表面方向</span></li><li><span class="refentrytitle"><a href="#CG_Area">CG_Area</a></span><span class="refpurpose"> — Calculates the area of a geometry</span></li><li><span class="refentrytitle"><a href="#CG_3DArea">CG_3DArea</a></span><span class="refpurpose"> — 计算 3D 表面几何形状的面积。 对于固体将返回 0。</span></li><li><span class="refentrytitle"><a href="#CG_Volume">CG_Volume</a></span><span class="refpurpose"> — 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</span></li><li><span class="refentrytitle"><a href="#ST_ForceLHR">ST_ForceLHR</a></span><span class="refpurpose"> — 强制 LHR 方向</span></li><li><span class="refentrytitle"><a href="#ST_IsPlanar">ST_IsPlanar</a></span><span class="refpurpose"> — 检查表面是否平坦</span></li><li><span class="refentrytitle"><a href="#ST_IsSolid">ST_IsSolid</a></span><span class="refpurpose"> — 测试几何体是否为实体。 不执行有效性检查。</span></li><li><span class="refentrytitle"><a href="#ST_MakeSolid">ST_MakeSolid</a></span><span class="refpurpose"> — 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</span></li><li><span class="refentrytitle"><a href="#ST_Orientation">ST_Orientation</a></span><span class="refpurpose"> — 确定表面方向</span></li><li><span class="refentrytitle"><a href="#ST_3DArea">ST_3DArea</a></span><span class="refpurpose"> — 计算 3D 表面几何形状的面积。 对于固体将返回 0。</span></li><li><span class="refentrytitle"><a href="#ST_Volume">ST_Volume</a></span><span class="refpurpose"> — 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</span></li></ul></div><div class="refentry" id="CG_ForceLHR"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_ForceLHR — 强制 LHR 方向</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_ForceLHR</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm21095"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_IsPlanar"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_IsPlanar — 检查表面是否平坦</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">CG_IsPlanar</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm21126"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_IsSolid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_IsSolid — 测试几何体是否为实体。 不执行有效性检查。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">CG_IsSolid</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21157"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_MakeSolid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_MakeSolid — 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_MakeSolid</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21188"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_Orientation"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Orientation — 确定表面方向</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">CG_Orientation</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm21219"><h2>描述</h2><p>该函数仅适用于多边形。 如果多边形是逆时针方向，则返回 -1；如果多边形是顺时针方向，则返回 1。</p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div></div><div class="refentry" id="CG_Area"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Area — Calculates the area of a geometry</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">CG_Area</strong>(</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21243"><h2>描述</h2><p>Calculates the area of a geometry.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a double precision value representing the area.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm21254"><h2>几何示例</h2><pre class="programlisting">SELECT CG_Area('Polygon ((0 0, 0 5, 5 5, 5 0, 0 0), (1 1, 2 1, 2 2, 1 2, 1 1), (3 3, 4 3, 4 4, 3 4, 3 3))');
                cg_area
                --------
                25
                (1 row)</pre></div><div class="refsection" id="idm21257"><h2>相关信息</h2><p><a class="xref" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a>, <a class="xref" href="#ST_Area" title="ST_Area">ST_Area</a></p></div></div><div class="refentry" id="CG_3DArea"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DArea — 计算 3D 表面几何形状的面积。 对于固体将返回 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float<strong class="fsfunc">CG_3DArea</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21274"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 8.1, 10.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21297"><h2>示例</h2><p>注意：默认情况下，从 WKT 构建的 PolyhedralSurface 是曲面几何体，而不是实体。 因此它具有表面积。 一旦转换为实体，就没有面积了。</p><pre class="programlisting">SELECT CG_3DArea(geom) As cube_surface_area,
            CG_3DArea(CG_MakeSolid(geom)) As solid_surface_area
            FROM (SELECT 'POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
            ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
            ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
            ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
            ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
            ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'::geometry) As f(geom);

            cube_surface_area | solid_surface_area
            -------------------+--------------------
            6 |                  0    </pre></div><div class="refsection" id="idm21301"><h2>相关信息</h2><p><a class="xref" href="#CG_Area" title="CG_Area">CG_Area</a>, <a class="xref" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a>, <a class="xref" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a>, <a class="xref" href="#CG_Area" title="CG_Area">CG_Area</a></p></div></div><div class="refentry" id="CG_Volume"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Volume — 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">CG_Volume</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21320"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 9.1 (same as CG_3DVolume)</p></div><div class="refsection" id="idm21343"><h2>示例</h2><p>When closed surfaces are created with WKT, they are treated as areal rather than solid. To make them solid, you need to use <a class="xref" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a>. Areal geometries have no volume. Here is an example to demonstrate.</p><pre class="programlisting">SELECT CG_Volume(geom) As cube_surface_vol,
    CG_Volume(CG_MakeSolid(geom)) As solid_surface_vol
    FROM (SELECT 'POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
    ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
    ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
    ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
    ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
    ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'::geometry) As f(geom);

    cube_surface_vol | solid_surface_vol
    ------------------+-------------------
    0 |                 1
</pre></div><div class="refsection" id="idm21348"><h2>相关信息</h2><p><a class="xref" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a>, <a class="xref" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a>, <a class="xref" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a></p></div></div><div class="refentry" id="ST_ForceLHR"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ForceLHR — 强制 LHR 方向</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ForceLHR</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm21366"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_ForceLHR" title="CG_ForceLHR">CG_ForceLHR</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="ST_IsPlanar"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsPlanar — 检查表面是否平坦</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsPlanar</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm21401"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_IsPlanar" title="CG_IsPlanar">CG_IsPlanar</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.2.0：这在 2.1.0 中已记录，但在 2.1 版本中意外遗漏。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="ST_IsSolid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsSolid — 测试几何体是否为实体。 不执行有效性检查。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsSolid</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21436"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="ST_MakeSolid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeSolid — 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MakeSolid</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21471"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="ST_Orientation"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Orientation — 确定表面方向</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_Orientation</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm21506"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_Orientation" title="CG_Orientation">CG_Orientation</a> instead. </p></td></tr></table></div><p>该函数仅适用于多边形。 如果多边形是逆时针方向，则返回 -1；如果多边形是顺时针方向，则返回 1。</p><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div></div><div class="refentry" id="ST_3DArea"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DArea — 计算 3D 表面几何形状的面积。 对于固体将返回 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float<strong class="fsfunc">ST_3DArea</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21534"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 8.1, 10.5</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21561"><h2>示例</h2><p>注意：默认情况下，从 WKT 构建的 PolyhedralSurface 是曲面几何体，而不是实体。 因此它具有表面积。 一旦转换为实体，就没有面积了。</p><pre class="programlisting">SELECT ST_3DArea(geom) As cube_surface_area,
            ST_3DArea(ST_MakeSolid(geom)) As solid_surface_area
            FROM (SELECT 'POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
            ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
            ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
            ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
            ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
            ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'::geometry) As f(geom);

            cube_surface_area | solid_surface_area
            -------------------+--------------------
            6 |                  0    </pre></div><div class="refsection" id="idm21565"><h2>相关信息</h2><p><a class="xref" href="#ST_Area" title="ST_Area">ST_Area</a>, <a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>, <a class="xref" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a>, <a class="xref" href="#ST_Area" title="ST_Area">ST_Area</a></p></div></div><div class="refentry" id="ST_Volume"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Volume — 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <strong class="fsfunc">ST_Volume</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21584"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_Volume" title="ST_Volume">ST_Volume</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_Volume" title="CG_Volume">CG_Volume</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 9.1 (与ST_3DVolume相同)</p></div><div class="refsection" id="idm21611"><h2>示例</h2><p>当使用 WKT 创建闭合曲面时，它们将被视为面而不是实体。 要使它们成为实体，您需要使用<a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>。 面积几何没有体积。 这里有一个例子来演示。</p><pre class="programlisting">SELECT ST_Volume(geom) As cube_surface_vol,
    ST_Volume(ST_MakeSolid(geom)) As solid_surface_vol
    FROM (SELECT 'POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
    ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
    ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
    ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
    ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
    ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'::geometry) As f(geom);

    cube_surface_vol | solid_surface_vol
    ------------------+-------------------
    0 |                 1
</pre></div><div class="refsection" id="idm21616"><h2>相关信息</h2><p><a class="xref" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a>, <a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>, <a class="xref" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a></p></div></div></section><section class="section" id="sfcgal_processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.3. SFCGAL处理和关系函数</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#CG_Intersection">CG_Intersection</a></span><span class="refpurpose"> — Computes the intersection of two geometries</span></li><li><span class="refentrytitle"><a href="#CG_Intersects">CG_Intersects</a></span><span class="refpurpose"> — 测试两个几何图形是否相交（它们至少有一个共同点）</span></li><li><span class="refentrytitle"><a href="#CG_3DIntersects">CG_3DIntersects</a></span><span class="refpurpose"> — Tests if two 3D geometries intersect</span></li><li><span class="refentrytitle"><a href="#CG_Difference">CG_Difference</a></span><span class="refpurpose"> — Computes the geometric difference between two geometries</span></li><li><span class="refentrytitle"><a href="#ST_3DDifference">ST_3DDifference</a></span><span class="refpurpose"> — 执行 3D 差异</span></li><li><span class="refentrytitle"><a href="#CG_3DDifference">CG_3DDifference</a></span><span class="refpurpose"> — 执行 3D 差异</span></li><li><span class="refentrytitle"><a href="#CG_Distance">CG_Distance</a></span><span class="refpurpose"> — Computes the minimum distance between two geometries</span></li><li><span class="refentrytitle"><a href="#CG_3DDistance">CG_3DDistance</a></span><span class="refpurpose"> — Computes the minimum 3D distance between two geometries</span></li><li><span class="refentrytitle"><a href="#ST_3DConvexHull">ST_3DConvexHull</a></span><span class="refpurpose"> — 计算几何体的 3D 凸包。</span></li><li><span class="refentrytitle"><a href="#CG_3DConvexHull">CG_3DConvexHull</a></span><span class="refpurpose"> — 计算几何体的 3D 凸包。</span></li><li><span class="refentrytitle"><a href="#ST_3DIntersection">ST_3DIntersection</a></span><span class="refpurpose"> — 执行 3D 相交</span></li><li><span class="refentrytitle"><a href="#CG_3DIntersection">CG_3DIntersection</a></span><span class="refpurpose"> — 执行 3D 相交</span></li><li><span class="refentrytitle"><a href="#CG_Union">CG_Union</a></span><span class="refpurpose"> — Computes the union of two geometries</span></li><li><span class="refentrytitle"><a href="#ST_3DUnion">ST_3DUnion</a></span><span class="refpurpose"> — 执行 3D 联合。</span></li><li><span class="refentrytitle"><a href="#CG_3DUnion">CG_3DUnion</a></span><span class="refpurpose"> — Perform 3D union using postgis_sfcgal.</span></li><li><span class="refentrytitle"><a href="#ST_AlphaShape">ST_AlphaShape</a></span><span class="refpurpose"> — 计算包围几何体的 Alpha 形状</span></li><li><span class="refentrytitle"><a href="#CG_AlphaShape">CG_AlphaShape</a></span><span class="refpurpose"> — 计算包围几何体的 Alpha 形状</span></li><li><span class="refentrytitle"><a href="#CG_ApproxConvexPartition">CG_ApproxConvexPartition</a></span><span class="refpurpose"> — 计算多边形几何图形的近似凸分割</span></li><li><span class="refentrytitle"><a href="#ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a></span><span class="refpurpose"> — 计算几何区域的近似中轴。</span></li><li><span class="refentrytitle"><a href="#CG_ApproximateMedialAxis">CG_ApproximateMedialAxis</a></span><span class="refpurpose"> — 计算几何区域的近似中轴。</span></li><li><span class="refentrytitle"><a href="#ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a></span><span class="refpurpose"> — 返回围绕给定输入几何体的约束 Delaunay 三角剖分。 </span></li><li><span class="refentrytitle"><a href="#CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a></span><span class="refpurpose"> — 返回围绕给定输入几何体的约束 Delaunay 三角剖分。 </span></li><li><span class="refentrytitle"><a href="#ST_Extrude">ST_Extrude</a></span><span class="refpurpose"> — 将曲面挤出到相关体积</span></li><li><span class="refentrytitle"><a href="#CG_Extrude">CG_Extrude</a></span><span class="refpurpose"> — 将曲面挤出到相关体积</span></li><li><span class="refentrytitle"><a href="#CG_ExtrudeStraightSkeleton">CG_ExtrudeStraightSkeleton</a></span><span class="refpurpose"> — 直线骨架外凸</span></li><li><span class="refentrytitle"><a href="#CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a></span><span class="refpurpose"> — 计算多边形几何图形的近似凸分割</span></li><li><span class="refentrytitle"><a href="#ST_MinkowskiSum">ST_MinkowskiSum</a></span><span class="refpurpose"> — 执行 Minkowski sum</span></li><li><span class="refentrytitle"><a href="#CG_MinkowskiSum">CG_MinkowskiSum</a></span><span class="refpurpose"> — 执行 Minkowski sum</span></li><li><span class="refentrytitle"><a href="#ST_OptimalAlphaShape">ST_OptimalAlphaShape</a></span><span class="refpurpose"> — 使用“最佳”alpha 值计算包围几何体的 Alpha 形状。</span></li><li><span class="refentrytitle"><a href="#CG_OptimalAlphaShape">CG_OptimalAlphaShape</a></span><span class="refpurpose"> — 使用“最佳”alpha 值计算包围几何体的 Alpha 形状。</span></li><li><span class="refentrytitle"><a href="#CG_OptimalConvexPartition">CG_OptimalConvexPartition</a></span><span class="refpurpose"> — 计算多边形几何图形的最优凸分割</span></li><li><span class="refentrytitle"><a href="#CG_StraightSkeleton">CG_StraightSkeleton</a></span><span class="refpurpose"> — 从几何体计算直骨架</span></li><li><span class="refentrytitle"><a href="#ST_StraightSkeleton">ST_StraightSkeleton</a></span><span class="refpurpose"> — 从几何体计算直骨架</span></li><li><span class="refentrytitle"><a href="#ST_Tesselate">ST_Tesselate</a></span><span class="refpurpose"> — 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</span></li><li><span class="refentrytitle"><a href="#CG_Tesselate">CG_Tesselate</a></span><span class="refpurpose"> — 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</span></li><li><span class="refentrytitle"><a href="#CG_Triangulate">CG_Triangulate</a></span><span class="refpurpose"> — Triangulates a polygonal geometry</span></li><li><span class="refentrytitle"><a href="#CG_Visibility">CG_Visibility</a></span><span class="refpurpose"> — 计算一个从点或多边形几何中的线段生成的可见性多边形</span></li><li><span class="refentrytitle"><a href="#CG_YMonotonePartition">CG_YMonotonePartition</a></span><span class="refpurpose"> — 计算多边形几何的 y 单调分割</span></li></ul></div><div class="refentry" id="CG_Intersection"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Intersection — Computes the intersection of two geometries</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Intersection</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21639"><h2>描述</h2><p>Computes the intersection of two geometries.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a geometry representing the intersection.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm21650"><h2>几何示例</h2><pre class="programlisting">SELECT ST_AsText(CG_Intersection('LINESTRING(0 0, 5 5)', 'LINESTRING(5 0, 0 5)'));
                cg_intersection
                -----------------
                POINT(2.5 2.5)
                (1 row)</pre></div><div class="refsection" id="idm21653"><h2>相关信息</h2><p><a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a></p></div></div><div class="refentry" id="CG_Intersects"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Intersects — 测试两个几何图形是否相交（它们至少有一个共同点）</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">CG_Intersects</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21673"><h2>描述</h2><p>如果两个几何图形相交，则返回 <code class="varname">true</code>。 如果几何图形有任何共同点，则它们相交。 </p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>注意：这是返回布尔值而不是整数的“允许”版本。</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21689"><h2>几何示例</h2><pre class="programlisting">SELECT CG_Intersects('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
    cg_intersects
    ---------------
    f
    (1 row)
    SELECT CG_Intersects('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry);
    cg_intersects
    ---------------
    t
    (1 row)
</pre></div><div class="refsection" id="idm21692"><h2>相关信息</h2><p><a class="xref" href="#CG_3DIntersects" title="CG_3DIntersects">CG_3DIntersects</a>, <a class="xref" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a></p></div></div><div class="refentry" id="CG_3DIntersects"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DIntersects — Tests if two 3D geometries intersect</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">CG_3DIntersects</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21714"><h2>描述</h2><p>Tests if two 3D geometries intersect. 3D geometries intersect if they have any point in common in the three-dimensional space.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>注意：这是返回布尔值而不是整数的“允许”版本。</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21729"><h2>几何示例</h2><pre class="programlisting">SELECT CG_3DIntersects('POINT(1.2 0.1 0)','POLYHEDRALSURFACE(((0 0 0,0.5 0.5 0,1 0 0,1 1 0,0 1 0,0 0 0)),((1 0 0,2 0 0,2 1 0,1 1 0,1 0 0),(1.2 0.2 0,1.2 0.8 0,1.8 0.8 0,1.8 0.2 0,1.2 0.2 0)))');
        cg_3dintersects
        ---------------
        t
        (1 row)
    </pre></div><div class="refsection" id="idm21732"><h2>相关信息</h2><p><a class="xref" href="#CG_Intersects" title="CG_Intersects">CG_Intersects</a>, <a class="xref" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a></p></div></div><div class="refentry" id="CG_Difference"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Difference — Computes the geometric difference between two geometries</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Difference</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21754"><h2>描述</h2><p>Computes the geometric difference between two geometries. The resulting geometry is a set of points that are present in geomA but not in geomB.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a geometry.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21769"><h2>几何示例</h2><pre class="programlisting">SELECT ST_AsText(CG_Difference('POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))'::geometry, 'LINESTRING(0 0, 2 2)'::geometry));
    cg_difference
    ---------------
    POLYGON((0 0,1 0,1 1,0 1,0 0))
    (1 row)</pre></div><div class="refsection" id="idm21772"><h2>相关信息</h2><p><a class="xref" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a>, <a class="xref" href="#ST_Difference" title="ST_Difference">ST_Difference</a></p></div></div><div class="refentry" id="ST_3DDifference"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DDifference — 执行 3D 差异</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DDifference</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" id="idm21792"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a> instead. </p></td></tr></table></div><p>返回 geom1 中不属于 geom2 的部分。</p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_3DDifference"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DDifference — 执行 3D 差异</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_3DDifference</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" id="idm21835"><h2>描述</h2><p>返回 geom1 中不属于 geom2 的部分。</p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21859"><h2>示例</h2><p>3D 图像是使用 <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>生成的，并使用<a class="link" href="http://www.x3dom.org" target="_top"> X3Dom HTML Javascript 渲染库</a>以 HTML 形式渲染。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
                                </p><pre class="programlisting">SELECT CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                50, 'quad_segs=2'),0,0,30) AS geom1,
                                CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
                                50, 'quad_segs=1'),0,0,30) AS geom2;
                            </pre><p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference01.png"/><div class="caption"><p>原始 3D 几何图形叠加。 geom2 是将要删除的部分。</p></div></div></div>
                    </td><td><p>
                            </p><pre class="programlisting">SELECT CG_3DDifference(geom1,geom2)
                            FROM ( SELECT CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                            50, 'quad_segs=2'),0,0,30) AS geom1,
                            CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
                            50, 'quad_segs=1'),0,0,30) AS geom2 ) As t;</pre><p>
                        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference02.png"/><div class="caption"><p>删除geom2后还剩下什么</p></div></div></div>
                </td></tr></tbody></table></div></div><div class="refsection" id="idm21886"><h2>相关信息</h2><p><a class="xref" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a>, <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>, <a class="xref" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> <a class="xref" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> </p></div></div><div class="refentry" id="CG_Distance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Distance — Computes the minimum distance between two geometries</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">CG_Distance</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21908"><h2>描述</h2><p>Computes the minimum distance between two geometries.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a double precision value representing the distance.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21923"><h2>几何示例</h2><pre class="programlisting">SELECT CG_Distance('LINESTRING(0.0 0.0,-1.0 -1.0)', 'LINESTRING(3.0 4.0,4.0 5.0)');
        cg_distance
        -------------
        2.0
        (1 row)</pre></div><div class="refsection" id="idm21926"><h2>相关信息</h2><p><a class="xref" href="#CG_3DDistance" title="CG_3DDistance">CG_3DDistance</a>, <a class="xref" href="#CG_Distance" title="CG_Distance">CG_Distance</a></p></div></div><div class="refentry" id="CG_3DDistance"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DDistance — Computes the minimum 3D distance between two geometries</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">CG_3DDistance</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm21946"><h2>描述</h2><p>Computes the minimum 3D distance between two geometries.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a double precision value representing the 3D distance.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm21961"><h2>几何示例</h2><pre class="programlisting">SELECT CG_3DDistance('LINESTRING(-1.0 0.0 2.0,1.0 0.0 3.0)', 'TRIANGLE((-4.0 0.0 1.0,4.0 0.0 1.0,0.0 4.0 1.0,-4.0 0.0 1.0))');
        cg_3ddistance
        ----------------
        1
        (1 row)</pre></div><div class="refsection" id="idm21964"><h2>相关信息</h2><p><a class="xref" href="#CG_Distance" title="CG_Distance">CG_Distance</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a></p></div></div><div class="refentry" id="ST_3DConvexHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DConvexHull — 计算几何体的 3D 凸包。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DConvexHull</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm21981"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_3DConvexHull" title="ST_3DConvexHull">ST_3DConvexHull</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_3DConvexHull" title="CG_3DConvexHull">CG_3DConvexHull</a> instead. </p></td></tr></table></div><p class="availability">可用性： 3.3.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_3DConvexHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DConvexHull — 计算几何体的 3D 凸包。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_3DConvexHull</strong>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" id="idm22016"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm22035"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(CG_3DConvexHull('LINESTRING Z(0 0 5, 1 5 3, 5 7 6, 9 5 3 , 5 7 5, 6 3 5)'::geometry));</pre><pre class="screen">POLYHEDRALSURFACE Z (((1 5 3,9 5 3,0 0 5,1 5 3)),((1 5 3,0 0 5,5 7 6,1 5 3)),((5 7 6,5 7 5,1 5 3,5 7 6)),((0 0 5,6 3 5,5 7 6,0 0 5)),((6 3 5,9 5 3,5 7 6,6 3 5)),((0 0 5,9 5 3,6 3 5,0 0 5)),((9 5 3,5 7 5,5 7 6,9 5 3)),((1 5 3,5 7 5,9 5 3,1 5 3)))</pre><pre class="programlisting">WITH f AS (SELECT i, CG_Extrude(geom, 0,0, i ) AS geom
        FROM ST_Subdivide(ST_Letters('CH'),5) WITH ORDINALITY AS sd(geom,i)
        )
        SELECT CG_3DConvexHull(ST_Collect(f.geom) )
        FROM f;</pre><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3dconvexhull.png"/><div class="caption"><p>原始几何体覆盖 3D 凸包</p></div></div></div><p>
    </p></div><div class="refsection" id="idm22047"><h2>相关信息</h2><p><a class="xref" href="#ST_Letters" title="ST_Letters">ST_Letters</a>, <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a></p></div></div><div class="refentry" id="ST_3DIntersection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DIntersection — 执行 3D 相交</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DIntersection</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" id="idm22067"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> instead. </p></td></tr></table></div><p>返回作为 geom1 和 geom2 之间共享部分的几何图形。</p><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_3DIntersection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DIntersection — 执行 3D 相交</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_3DIntersection</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" id="idm22110"><h2>描述</h2><p>返回作为 geom1 和 geom2 之间共享部分的几何图形。</p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm22134"><h2>示例</h2><p>3D 图像是使用 <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>生成的，并使用<a class="link" href="http://www.x3dom.org" target="_top"> X3Dom HTML Javascript 渲染库</a>以 HTML 形式渲染。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
                                    </p><pre class="programlisting">SELECT CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                    50, 'quad_segs=2'),0,0,30) AS geom1,
                                    CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
                                    50, 'quad_segs=1'),0,0,30) AS geom2;
                                </pre><p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference01.png"/><div class="caption"><p>原始 3D 几何图形叠加。 geom2 显示为半透明</p></div></div></div>
                        </td><td><p>
                                </p><pre class="programlisting">SELECT CG_3DIntersection(geom1,geom2)
                                FROM ( SELECT CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                50, 'quad_segs=2'),0,0,30) AS geom1,
                                CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
                                50, 'quad_segs=1'),0,0,30) AS geom2 ) As t;</pre><p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3dintersection01.png"/><div class="caption"><p>geom1和geom2的交集</p></div></div></div>
                    </td></tr></tbody></table></div><p>3D 线串和多边形</p><pre class="programlisting">SELECT ST_AsText(CG_3DIntersection(linestring, polygon)) As wkt
    FROM  ST_GeomFromText('LINESTRING Z (2 2 6,1.5 1.5 7,1 1 8,0.5 0.5 8,0 0 10)') AS linestring
    CROSS JOIN ST_GeomFromText('POLYGON((0 0 8, 0 1 8, 1 1 8, 1 0 8, 0 0 8))') AS polygon;

    wkt
    --------------------------------
    LINESTRING Z (1 1 8,0.5 0.5 8)
</pre><p>立方体（闭合多面体曲面）和多边形 Z</p><pre class="programlisting">SELECT ST_AsText(CG_3DIntersection(
ST_GeomFromText('POLYHEDRALSURFACE Z( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'),
'POLYGON Z ((0 0 0, 0 0 0.5, 0 0.5 0.5, 0 0.5 0, 0 0 0))'::geometry))</pre><pre class="screen">TIN Z (((0 0 0,0 0 0.5,0 0.5 0.5,0 0 0)),((0 0.5 0,0 0 0,0 0.5 0.5,0 0.5 0)))</pre><p>两个实体的交点也是实体（ST_Dimension返回3）</p><pre class="programlisting">SELECT ST_AsText(CG_3DIntersection( CG_Extrude(ST_Buffer('POINT(10 20)'::geometry,10,1),0,0,30),
            CG_Extrude(ST_Buffer('POINT(10 20)'::geometry,10,1),2,0,10) ));</pre><pre class="screen">POLYHEDRALSURFACE Z (((13.3333333333333 13.3333333333333 10,20 20 0,20 20 10,13.3333333333333 13.3333333333333 10)),
        ((20 20 10,16.6666666666667 23.3333333333333 10,13.3333333333333 13.3333333333333 10,20 20 10)),
        ((20 20 0,16.6666666666667 23.3333333333333 10,20 20 10,20 20 0)),
        ((13.3333333333333 13.3333333333333 10,10 10 0,20 20 0,13.3333333333333 13.3333333333333 10)),
        ((16.6666666666667 23.3333333333333 10,12 28 10,13.3333333333333 13.3333333333333 10,16.6666666666667 23.3333333333333 10)),
        ((20 20 0,9.99999999999995 30 0,16.6666666666667 23.3333333333333 10,20 20 0)),
        ((10 10 0,9.99999999999995 30 0,20 20 0,10 10 0)),((13.3333333333333 13.3333333333333 10,12 12 10,10 10 0,13.3333333333333 13.3333333333333 10)),
        ((12 28 10,12 12 10,13.3333333333333 13.3333333333333 10,12 28 10)),
        ((16.6666666666667 23.3333333333333 10,9.99999999999995 30 0,12 28 10,16.6666666666667 23.3333333333333 10)),
        ((10 10 0,0 20 0,9.99999999999995 30 0,10 10 0)),
        ((12 12 10,11 11 10,10 10 0,12 12 10)),((12 28 10,11 11 10,12 12 10,12 28 10)),
        ((9.99999999999995 30 0,11 29 10,12 28 10,9.99999999999995 30 0)),((0 20 0,2 20 10,9.99999999999995 30 0,0 20 0)),
        ((10 10 0,2 20 10,0 20 0,10 10 0)),((11 11 10,2 20 10,10 10 0,11 11 10)),((12 28 10,11 29 10,11 11 10,12 28 10)),
        ((9.99999999999995 30 0,2 20 10,11 29 10,9.99999999999995 30 0)),((11 11 10,11 29 10,2 20 10,11 11 10)))</pre></div></div><div class="refentry" id="CG_Union"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Union — Computes the union of two geometries</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Union</strong>(</code> geometry <var class="pdparam">geomA</var> ,  geometry <var class="pdparam">geomB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm22184"><h2>描述</h2><p>Computes the union of two geometries.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a geometry representing the union.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm22195"><h2>几何示例</h2><pre class="programlisting">SELECT CG_Union('POINT(.5 0)', 'LINESTRING(-1 0,1 0)');
                cg_union
                -----------
                LINESTRING(-1 0,0.5 0,1 0)
                (1 row)</pre></div><div class="refsection" id="idm22198"><h2>相关信息</h2><p><a class="xref" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" id="ST_3DUnion"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_3DUnion — 执行 3D 联合。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DUnion</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">ST_3DUnion</strong>(</code>geometry set <var class="pdparam">g1field</var><code>)</code>;</p></div></div><div class="refsection" id="idm22224"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.2.0</p><p class="availability">可用性：3.3.0 添加了聚合函数格式</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p><span class="bold"><strong>聚合形式：</strong></span>返回几何图形，该几何图形是几何图形行集的 3D 并集。 ST_3DUnion() 函数是 PostgreSQL 术语中的“聚合”函数。 这意味着它对数据行进行操作，与 SUM() 和 AVG() 函数的操作方式相同，并且与大多数聚合一样，它也会忽略 NULL 几何图形。 </p></div></div><div class="refentry" id="CG_3DUnion"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_3DUnion — Perform 3D union using postgis_sfcgal.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_3DUnion</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">CG_3DUnion</strong>(</code>geometry set <var class="pdparam">g1field</var><code>)</code>;</p></div></div><div class="refsection" id="idm22275"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM IEC 13249-3: 5.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p><p><span class="bold"><strong>Aggregate variant:</strong></span> returns a geometry that is the 3D union of a rowset of geometries. The CG_3DUnion() function is an "aggregate" function in the terminology of PostgreSQL. That means that it operates on rows of data, in the same way the SUM() and AVG() functions do and like most aggregates, it also ignores NULL geometries. </p></div><div class="refsection" id="idm22300"><h2>示例</h2><p>3D 图像是使用 <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>生成的，并使用<a class="link" href="http://www.x3dom.org" target="_top"> X3Dom HTML Javascript 渲染库</a>以 HTML 形式渲染。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
                                    </p><pre class="programlisting">SELECT CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                    50, 'quad_segs=2'),0,0,30) AS geom1,
                                    CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
                                    50, 'quad_segs=1'),0,0,30) AS geom2;
                                </pre><p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference01.png"/><div class="caption"><p>原始 3D 几何图形叠加。 geom2是具有透明度的。</p></div></div></div>
                        </td><td><p>
                                </p><pre class="programlisting">SELECT CG_3DUnion(geom1,geom2)
                                FROM ( SELECT CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                50, 'quad_segs=2'),0,0,30) AS geom1,
                                CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
                                50, 'quad_segs=1'),0,0,30) AS geom2 ) As t;</pre><p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3dunion01.png"/><div class="caption"><p>geom1 和 geom2 的并集</p></div></div></div>
                    </td></tr></tbody></table></div></div><div class="refsection" id="idm22327"><h2>相关信息</h2><p><a class="xref" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a>, <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>, <a class="xref" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> <a class="xref" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a> </p></div></div><div class="refentry" id="ST_AlphaShape"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AlphaShape — 计算包围几何体的 Alpha 形状</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_AlphaShape</strong>(</code>geometry <var class="pdparam">geom</var>, float  <var class="pdparam">alpha</var>, boolean  <var class="pdparam">allow_holes = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm22352"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_AlphaShape" title="ST_AlphaShape">ST_AlphaShape</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_AlphaShape" title="CG_AlphaShape">CG_AlphaShape</a> instead. </p></td></tr></table></div><p>计算几何中点的 <a class="link" href="https://en.wikipedia.org/wiki/Alpha_shape" target="_top">Alpha 形状</a>。 alpha 形状是（通常）凹多边形几何体，它包含输入的所有顶点，并且其顶点是输入顶点的子集。 与<a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">凸包</a>生成的形状相比，alpha 形状更适合输入的形状。 </p></div></div><div class="refentry" id="CG_AlphaShape"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_AlphaShape — 计算包围几何体的 Alpha 形状</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_AlphaShape</strong>(</code>geometry <var class="pdparam">geom</var>, float  <var class="pdparam">alpha</var>, boolean  <var class="pdparam">allow_holes = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm22379"><h2>描述</h2><p>计算几何中点的 <a class="link" href="https://en.wikipedia.org/wiki/Alpha_shape" target="_top">Alpha 形状</a>。 alpha 形状是（通常）凹多边形几何体，它包含输入的所有顶点，并且其顶点是输入顶点的子集。 与<a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">凸包</a>生成的形状相比，alpha 形状更适合输入的形状。 </p><p>“拟合紧密度”由 <code class="varname">alpha </code>参数控制，该参数的值可以从 0 到无穷大。 较小的 alpha 值会产生更凹的结果。 大于某些数据相关值的 Alpha 值会生成输入的凸包。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在 CGAL 实现之后，alpha 值是 Alpha-Shape 算法中用于“侵蚀”输入点的 Delaunay 三角剖分的圆半径的<span class="emphasis"><em>平方</em></span>。 有关详细信息，请参阅 <a class="link" href="https://doc.cgal.org/latest/Alpha_shapes_2/index.html#Chapter_2D_Alpha_Shapes" target="_top">CGAL Alpha 形状</a>。 这与 alpha 形状的原始定义不同，后者将 alpha 定义为侵蚀圆的半径。 </p></td></tr></table></div><p>除非将可选的<code class="varname">allow_holes</code>参数指定为true，否则计算的形状不包含孔。 </p><p>该函数以与<a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>类似的方式有效地计算几何体的凹壳，但使用 CGAL 和不同的算法。 </p><p class="availability">Availability: 3.5.0 - requires SFCGAL &gt;= 1.4.1.</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm22399"><h2>示例</h2><p>
            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_alphashape01.png"/><div class="caption"><p>Alpha-shape of a MultiPoint (same example As <a class="xref" href="#CG_OptimalAlphaShape" title="CG_OptimalAlphaShape">CG_OptimalAlphaShape</a>)</p></div></div></div><p>
            </p><pre class="programlisting">SELECT ST_AsText(CG_AlphaShape('MULTIPOINT((63 84),(76 88),(68 73),(53 18),(91 50),(81 70),
            (88 29),(24 82),(32 51),(37 23),(27 54),(84 19),(75 87),(44 42),(77 67),(90 30),(36 61),(32 65),
            (81 47),(88 58),(68 73),(49 95),(81 60),(87 50),
            (78 16),(79 21),(30 22),(78 43),(26 85),(48 34),(35 35),(36 40),(31 79),(83 29),(27 84),(52 98),(72 95),(85 71),
            (75 84),(75 77),(81 29),(77 73),(41 42),(83 72),(23 36),(89 53),(27 57),(57 97),(27 77),(39 88),(60 81),
            (80 72),(54 32),(55 26),(62 22),(70 20),(76 27),(84 35),(87 42),(82 54),(83 64),(69 86),(60 90),(50 86),(43 80),(36 73),
            (36 68),(40 75),(24 67),(23 60),(26 44),(28 33),(40 32),(43 19),(65 16),(73 16),(38 46),(31 59),(34 86),(45 90),(64 97))'::geometry,80.2));</pre><p>
        </p><pre class="screen">POLYGON((89 53,91 50,87 42,90 30,88 29,84 19,78 16,73 16,65 16,53 18,43 19,
        37 23,30 22,28 33,23 36,26 44,27 54,23 60,24 67,27 77,
        24 82,26 85,34 86,39 88,45 90,49 95,52 98,57 97,
        64 97,72 95,76 88,75 84,83 72,85 71,88 58,89 53))</pre><p>
</p><p>
    </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_alphashape02.png"/><div class="caption"><p>Alpha-shape of a MultiPoint, allowing holes (same example as <a class="xref" href="#CG_OptimalAlphaShape" title="CG_OptimalAlphaShape">CG_OptimalAlphaShape</a>)</p></div></div></div><p>
    </p><pre class="programlisting">SELECT ST_AsText(CG_AlphaShape('MULTIPOINT((63 84),(76 88),(68 73),(53 18),(91 50),(81 70),(88 29),(24 82),(32 51),(37 23),(27 54),(84 19),(75 87),(44 42),(77 67),(90 30),(36 61),(32 65),(81 47),(88 58),(68 73),(49 95),(81 60),(87 50),
    (78 16),(79 21),(30 22),(78 43),(26 85),(48 34),(35 35),(36 40),(31 79),(83 29),(27 84),(52 98),(72 95),(85 71),
    (75 84),(75 77),(81 29),(77 73),(41 42),(83 72),(23 36),(89 53),(27 57),(57 97),(27 77),(39 88),(60 81),
    (80 72),(54 32),(55 26),(62 22),(70 20),(76 27),(84 35),(87 42),(82 54),(83 64),(69 86),(60 90),(50 86),(43 80),(36 73),
    (36 68),(40 75),(24 67),(23 60),(26 44),(28 33),(40 32),(43 19),(65 16),(73 16),(38 46),(31 59),(34 86),(45 90),(64 97))'::geometry, 100.1,true))</pre><p>
</p><pre class="screen">POLYGON((89 53,91 50,87 42,90 30,84 19,78 16,73 16,65 16,53 18,43 19,30 22,28 33,23 36,
26 44,27 54,23 60,24 67,27 77,24 82,26 85,34 86,39 88,45 90,49 95,52 98,57 97,64 97,72 95,
76 88,75 84,83 72,85 71,88 58,89 53),(36 61,36 68,40 75,43 80,60 81,68 73,77 67,
81 60,82 54,81 47,78 43,76 27,62 22,54 32,44 42,38 46,36 61))</pre><p>
            </p><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_alphashape03.png"/><div class="caption"><p>MultiPoint 的 Alpha 形状，允许有孔（与 <a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>相同的示例）</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(CG_AlphaShape(
                'MULTIPOINT ((132 64), (114 64), (99 64), (81 64), (63 64), (57 49), (52 36), (46 20), (37 20), (26 20), (32 36), (39 55), (43 69), (50 84), (57 100), (63 118), (68 133), (74 149), (81 164), (88 180), (101 180), (112 180), (119 164), (126 149), (132 131), (139 113), (143 100), (150 84), (157 69), (163 51), (168 36), (174 20), (163 20), (150 20), (143 36), (139 49), (132 64), (99 151), (92 138), (88 124), (81 109), (74 93), (70 82), (83 82), (99 82), (112 82), (126 82), (121 96), (114 109), (110 122), (103 138), (99 151), (34 27), (43 31), (48 44), (46 58), (52 73), (63 73), (61 84), (72 71), (90 69), (101 76), (123 71), (141 62), (166 27), (150 33), (159 36), (146 44), (154 53), (152 62), (146 73), (134 76), (143 82), (141 91), (130 98), (126 104), (132 113), (128 127), (117 122), (112 133), (119 144), (108 147), (119 153), (110 171), (103 164), (92 171), (86 160), (88 142), (79 140), (72 124), (83 131), (79 118), (68 113), (63 102), (68 93), (35 45))'::geometry,102.2, true));</pre><p>
            </p><pre class="screen">POLYGON((26 20,32 36,35 45,39 55,43 69,50 84,57 100,63 118,68 133,74 149,81 164,88 180,
            101 180,112 180,119 164,126 149,132 131,139 113,143 100,150 84,157 69,163 51,168 36,
            174 20,163 20,150 20,143 36,139 49,132 64,114 64,99 64,90 69,81 64,63 64,57 49,52 36,46 20,37 20,26 20),
            (74 93,81 109,88 124,92 138,103 138,110 122,114 109,121 96,112 82,99 82,83 82,74 93))</pre><p>
    </p></div><div class="refsection" id="idm22431"><h2>相关信息</h2><p><a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#CG_OptimalAlphaShape" title="CG_OptimalAlphaShape">CG_OptimalAlphaShape</a></p></div></div><div class="refentry" id="CG_ApproxConvexPartition"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_ApproxConvexPartition — 计算多边形几何图形的近似凸分割</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_ApproxConvexPartition</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm22448"><h2>描述</h2><p>计算多边形几何图形的近似凸分割（使用三角剖分）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>多边形 P 的一个划分是指一组多边形，这些多边形的内部不相交，并且这些多边形的并集等于原始多边形 P 的内部。CG_ApproxConvexPartition 和 CG_GreeneApproxConvexPartition 函数生成近似最优的凸分割。这两个函数通过首先将多边形分解为更简单的多边形来生成凸分解；CG_ApproxConvexPartition 使用三角剖分，而 CG_GreeneApproxConvexPartition 使用一个单调分割。这两个函数都保证它们生成的凸片段数不会超过最优数量的四倍，但它们在运行时复杂性上有所不同。尽管基于三角剖分的近似算法通常会产生较少的凸片段，但并非总是如此。 </p></td></tr></table></div><p class="availability">可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。</p><p class="sfcgal_requirement">需要 SFCGAL 版本&gt;= 1.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm22459"><h2>示例</h2><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/cg_approxconvexpartition01.png"/><div class="caption"><p>近似凸分割（与 <a class="xref" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>、<a class="xref" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a> 和 <a class="xref" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a> 相同的示例）</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(CG_ApproxConvexPartition('POLYGON((156 150,83 181,89 131,148 120,107 61,32 159,0 45,41 86,45 1,177 2,67 24,109 31,170 60,180 110,156 150))'::geometry));</pre><p>
                </p><pre class="screen">GEOMETRYCOLLECTION(POLYGON((156 150,83 181,89 131,148 120,156 150)),POLYGON((32 159,0 45,41 86,32 159)),POLYGON((107 61,32 159,41 86,107 61)),POLYGON((45 1,177 2,67 24,45 1)),POLYGON((41 86,45 1,67 24,41 86)),POLYGON((107 61,41 86,67 24,109 31,107 61)),POLYGON((148 120,107 61,109 31,170 60,148 120)),POLYGON((156 150,148 120,170 60,180 110,156 150)))</pre><p>
            </p></div><div class="refsection" id="idm22473"><h2>相关信息</h2><p><a class="xref" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>, <a class="xref" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a>, <a class="xref" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a></p></div></div><div class="refentry" id="ST_ApproximateMedialAxis"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ApproximateMedialAxis — 计算几何区域的近似中轴。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ApproximateMedialAxis</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm22491"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_ApproximateMedialAxis" title="CG_ApproximateMedialAxis">CG_ApproximateMedialAxis</a> instead. </p></td></tr></table></div><p>Return an approximate medial axis for the areal input based on its straight skeleton. Uses an SFCGAL specific API when built against a capable version (1.2.0+). Otherwise the function is just a wrapper around CG_StraightSkeleton (slower case). </p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_ApproximateMedialAxis"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_ApproximateMedialAxis — 计算几何区域的近似中轴。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_ApproximateMedialAxis</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm22527"><h2>描述</h2><p>Return an approximate medial axis for the areal input based on its straight skeleton. Uses an SFCGAL specific API when built against a capable version (1.2.0+). Otherwise the function is just a wrapper around CG_StraightSkeleton (slower case). </p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm22547"><h2>示例</h2><pre class="programlisting">SELECT CG_ApproximateMedialAxis(ST_GeomFromText('POLYGON (( 190 190, 10 190, 10 10, 190 10, 190 20, 160 30, 60 30, 60 130, 190 140, 190 190 ))'));</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_approximatemedialaxis01.png"/><div class="caption"><p>多边形及其近似中轴</p></div></div></div>
                            </td></tr></tbody></table></div></div><div class="refsection" id="idm22562"><h2>相关信息</h2><p><a class="xref" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a></p></div></div><div class="refentry" id="ST_ConstrainedDelaunayTriangles"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ConstrainedDelaunayTriangles — 返回围绕给定输入几何体的约束 Delaunay 三角剖分。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ConstrainedDelaunayTriangles</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm22578"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_ConstrainedDelaunayTriangles" title="ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_ConstrainedDelaunayTriangles" title="CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a> instead. </p></td></tr></table></div><p>返回围绕输入几何体顶点的<a class="link" href="https://en.wikipedia.org/wiki/Constrained_Delaunay_triangulation" target="_top">约束 Delaunay 三角剖分</a>。 输出是 TIN。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p class="availability">可用性：3.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div></div><div class="refentry" id="CG_ConstrainedDelaunayTriangles"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_ConstrainedDelaunayTriangles — 返回围绕给定输入几何体的约束 Delaunay 三角剖分。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_ConstrainedDelaunayTriangles</strong>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" id="idm22607"><h2>描述</h2><p>返回围绕输入几何体顶点的<a class="link" href="https://en.wikipedia.org/wiki/Constrained_Delaunay_triangulation" target="_top">约束 Delaunay 三角剖分</a>。 输出是 TIN。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p class="availability">可用性：3.0.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm22620"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_constraineddelaunaytriangles01.png"/><div class="caption"><p>CG_ConstrainedDelaunayTriangles of 2 polygons</p></div></div></div><p>
                                    </p><pre class="programlisting">select CG_ConstrainedDelaunayTriangles(
                                        ST_Union(
                                        'POLYGON((175 150, 20 40, 50 60, 125 100, 175 150))'::geometry,
                                        ST_Buffer('POINT(110 170)'::geometry, 20)
                                        )
                                        );
                                    </pre><p>
                            </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_constraineddelaunaytriangles02.png"/><div class="caption"><p><a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a> 2 个多边形。 三角形边与多边形边界相交。</p></div></div></div><p>
                                    </p><pre class="programlisting">select ST_DelaunayTriangles(
                                        ST_Union(
                                        'POLYGON((175 150, 20 40, 50 60, 125 100, 175 150))'::geometry,
                                        ST_Buffer('POINT(110 170)'::geometry, 20)
                                        )
                                        );
                                    </pre><p>
                            </p></td></tr></tbody></table></div></div><div class="refsection" id="idm22645"><h2>相关信息</h2><p><a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>, <a class="xref" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a>, <a class="xref" href="#CG_Tesselate" title="CG_Tesselate">CG_Tesselate</a>, <a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> </p></div></div><div class="refentry" id="ST_Extrude"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Extrude — 将曲面挤出到相关体积</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Extrude</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var><code>)</code>;</p></div></div><div class="refsection" id="idm22674"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_Extrude"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Extrude — 将曲面挤出到相关体积</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Extrude</strong>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var><code>)</code>;</p></div></div><div class="refsection" id="idm22718"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm22737"><h2>示例</h2><p>3D 图像是使用 <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>生成的，并使用<a class="link" href="http://www.x3dom.org" target="_top"> X3Dom HTML Javascript 渲染库</a>以 HTML 形式渲染。</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>
                                    </p><pre class="programlisting">SELECT ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                    50, 'quad_segs=2'),0,0,30);</pre><p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude01.png"/><div class="caption"><p>由缓冲点形成的原始八边形</p></div></div></div>
                        </td><td style="border-bottom: 1px solid ; "><p>
                                </p><pre class="programlisting">CG_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
                                50, 'quad_segs=2'),0,0,30);</pre><p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude02.png"/><div class="caption"><p>六边形沿 Z 方向挤压 30 个单位产生多面体表面 Z</p></div></div></div>
                    </td></tr><tr><td style="border-right: 1px solid ; "><p>
                            </p><pre class="programlisting">SELECT ST_GeomFromText('LINESTRING(50 50, 100 90, 95 150)')</pre><p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude03.png"/><div class="caption"><p>原始线串</p></div></div></div>
                    </td><td><p>
                            </p><pre class="programlisting">SELECT CG_Extrude(
                            ST_GeomFromText('LINESTRING(50 50, 100 90, 95 150)'),0,0,10));</pre><p>
                        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude04.png"/><div class="caption"><p>沿 Z 方向拉伸的 LineString 会生成 PolyhedralSurfaceZ</p></div></div></div>
                </td></tr></tbody></table></div></div><div class="refsection" id="idm22783"><h2>相关信息</h2><p><a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>, <a class="xref" href="#CG_ExtrudeStraightSkeleton" title="CG_ExtrudeStraightSkeleton">CG_ExtrudeStraightSkeleton</a></p></div></div><div class="refentry" id="CG_ExtrudeStraightSkeleton"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_ExtrudeStraightSkeleton — 直线骨架外凸</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_ExtrudeStraightSkeleton</strong>(</code>geometry <var class="pdparam">geom</var>, float  <var class="pdparam">roof_height</var>, float  <var class="pdparam">body_height = 0</var><code>)</code>;</p></div></div><div class="refsection" id="idm22806"><h2>描述</h2><p>计算多边形几何图形的最大高度拉伸。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>Perhaps the first (historically) use-case of straight skeletons: given a polygonal roof, the straight skeleton directly gives the layout of each tent. If each skeleton edge is lifted from the plane a height equal to its offset distance, the resulting roof is "correct" in that water will always fall down to the contour edges (the roof's border), regardless of where it falls on the roof. The function computes this extrusion aka "roof" on a polygon. If the argument body_height 
&gt; 0, so the polygon is extruded like with CG_Extrude(polygon, 0, 0, body_height). The result is an union of these polyhedralsurfaces. </p></td></tr></table></div><p class="availability">可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。</p><p class="sfcgal_requirement">需要 SFCGAL 版本&gt;= 1.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm22817"><h2>示例</h2><p>
                </p><pre class="programlisting">SELECT ST_AsText(CG_ExtrudeStraightSkeleton('POLYGON (( 0 0, 5 0, 5 5, 4 5, 4 4, 0 4, 0 0 ), (1 1, 1 2,2 2, 2 1, 1 1))', 3.0, 2.0));</pre><p>
                </p><pre class="screen">POLYHEDRALSURFACE Z (((0 0 0,0 4 0,4 4 0,4 5 0,5 5 0,5 0 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2 0,1 1 0)),((0 0 0,0 0 2,0 4 2,0 4 0,0 0 0)),((0 4 0,0 4 2,4 4 2,4 4 0,0 4 0)),((4 4 0,4 4 2,4 5 2,4 5 0,4 4 0)),((4 5 0,4 5 2,5 5 2,5 5 0,4 5 0)),((5 5 0,5 5 2,5 0 2,5 0 0,5 5 0)),((5 0 0,5 0 2,0 0 2,0 0 0,5 0 0)),((1 1 0,1 1 2,2 1 2,2 1 0,1 1 0)),((2 1 0,2 1 2,2 2 2,2 2 0,2 1 0)),((2 2 0,2 2 2,1 2 2,1 2 0,2 2 0)),((1 2 0,1 2 2,1 1 2,1 1 0,1 2 0)),((4 5 2,5 5 2,4 4 2,4 5 2)),((2 1 2,5 0 2,0 0 2,2 1 2)),((5 5 2,5 0 2,4 4 2,5 5 2)),((2 1 2,0 0 2,1 1 2,2 1 2)),((1 2 2,1 1 2,0 0 2,1 2 2)),((0 4 2,2 2 2,1 2 2,0 4 2)),((0 4 2,1 2 2,0 0 2,0 4 2)),((4 4 2,5 0 2,2 2 2,4 4 2)),((4 4 2,2 2 2,0 4 2,4 4 2)),((2 2 2,5 0 2,2 1 2,2 2 2)),((0.5 2.5 2.5,0 0 2,0.5 0.5 2.5,0.5 2.5 2.5)),((1 3 3,0 4 2,0.5 2.5 2.5,1 3 3)),((0.5 2.5 2.5,0 4 2,0 0 2,0.5 2.5 2.5)),((2.5 0.5 2.5,5 0 2,3.5 1.5 3.5,2.5 0.5 2.5)),((0 0 2,5 0 2,2.5 0.5 2.5,0 0 2)),((0.5 0.5 2.5,0 0 2,2.5 0.5 2.5,0.5 0.5 2.5)),((4.5 3.5 2.5,5 5 2,4.5 4.5 2.5,4.5 3.5 2.5)),((3.5 2.5 3.5,3.5 1.5 3.5,4.5 3.5 2.5,3.5 2.5 3.5)),((4.5 3.5 2.5,5 0 2,5 5 2,4.5 3.5 2.5)),((3.5 1.5 3.5,5 0 2,4.5 3.5 2.5,3.5 1.5 3.5)),((5 5 2,4 5 2,4.5 4.5 2.5,5 5 2)),((4.5 4.5 2.5,4 4 2,4.5 3.5 2.5,4.5 4.5 2.5)),((4.5 4.5 2.5,4 5 2,4 4 2,4.5 4.5 2.5)),((3 3 3,0 4 2,1 3 3,3 3 3)),((3.5 2.5 3.5,4.5 3.5 2.5,3 3 3,3.5 2.5 3.5)),((3 3 3,4 4 2,0 4 2,3 3 3)),((4.5 3.5 2.5,4 4 2,3 3 3,4.5 3.5 2.5)),((2 1 2,1 1 2,0.5 0.5 2.5,2 1 2)),((2.5 0.5 2.5,2 1 2,0.5 0.5 2.5,2.5 0.5 2.5)),((1 1 2,1 2 2,0.5 2.5 2.5,1 1 2)),((0.5 0.5 2.5,1 1 2,0.5 2.5 2.5,0.5 0.5 2.5)),((1 3 3,2 2 2,3 3 3,1 3 3)),((0.5 2.5 2.5,1 2 2,1 3 3,0.5 2.5 2.5)),((1 3 3,1 2 2,2 2 2,1 3 3)),((2 2 2,2 1 2,2.5 0.5 2.5,2 2 2)),((3.5 2.5 3.5,3 3 3,3.5 1.5 3.5,3.5 2.5 3.5)),((3.5 1.5 3.5,2 2 2,2.5 0.5 2.5,3.5 1.5 3.5)),((3 3 3,2 2 2,3.5 1.5 3.5,3 3 3)))</pre><p>
            </p></div><div class="refsection" id="idm22822"><h2>相关信息</h2><p><a class="xref" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a>, <a class="xref" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a></p></div></div><div class="refentry" id="CG_GreeneApproxConvexPartition"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_GreeneApproxConvexPartition — 计算多边形几何图形的近似凸分割</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_GreeneApproxConvexPartition</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm22839"><h2>描述</h2><p>计算多边形几何图形的近似单调凸分割。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>多边形 P 的一个划分是指一组多边形，这些多边形的内部不相交，并且这些多边形的并集等于原始多边形 P 的内部。CG_ApproxConvexPartition 和 CG_GreeneApproxConvexPartition 函数生成近似最优的凸分割。这两个函数通过首先将多边形分解为更简单的多边形来生成凸分解；CG_ApproxConvexPartition 使用三角剖分，而 CG_GreeneApproxConvexPartition 使用一个单调分割。这两个函数都保证它们生成的凸片段数不会超过最优数量的四倍，但它们在运行时复杂性上有所不同。尽管基于三角剖分的近似算法通常会产生较少的凸片段，但并非总是如此。 </p></td></tr></table></div><p class="availability">可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。</p><p class="sfcgal_requirement">需要 SFCGAL 版本&gt;= 1.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm22850"><h2>示例</h2><p>
            </p><div class="informalfigure"><div class="mediaobject"><img src="images/cg_greeneapproxconvexpartition01.png"/><div class="caption"><p>格林近似凸分割（与 <a class="xref" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>、<a class="xref" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a> 和 <a class="xref" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a> 相同的示例）</p></div></div></div><p>
            </p><pre class="programlisting">SELECT ST_AsText(CG_GreeneApproxConvexPartition('POLYGON((156 150,83 181,89 131,148 120,107 61,32 159,0 45,41 86,45 1,177 2,67 24,109 31,170 60,180 110,156 150))'::geometry));</pre><p>
            </p><pre class="screen">GEOMETRYCOLLECTION(POLYGON((32 159,0 45,41 86,32 159)),POLYGON((45 1,177 2,67 24,45 1)),POLYGON((67 24,109 31,170 60,107 61,67 24)),POLYGON((41 86,45 1,67 24,41 86)),POLYGON((107 61,32 159,41 86,67 24,107 61)),POLYGON((148 120,107 61,170 60,148 120)),POLYGON((148 120,170 60,180 110,156 150,148 120)),POLYGON((156 150,83 181,89 131,148 120,156 150)))</pre><p>
        </p></div><div class="refsection" id="idm22864"><h2>相关信息</h2><p><a class="xref" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>, <a class="xref" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a>, <a class="xref" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a></p></div></div><div class="refentry" id="ST_MinkowskiSum"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinkowskiSum — 执行 Minkowski sum</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MinkowskiSum</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" id="idm22885"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_MinkowskiSum" title="ST_MinkowskiSum">ST_MinkowskiSum</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_MinkowskiSum" title="CG_MinkowskiSum">CG_MinkowskiSum</a> instead. </p></td></tr></table></div><p>此函数执行点、线或多边形与多边形的 2D minkowski 和。</p><p>两个几何图形 A 和 B 的minkowski和是所有点的集合，这些点是 A 和 B 中任意点的和。minkowski和经常用于运动规划和计算机辅助设计。 有关更多详细信息在<a class="link" href="https://en.wikipedia.org/wiki/Minkowski_addition" target="_top">维基百科 Minkowski 添加</a>。</p><p>第一个参数可以是任何 2D 几何图形（点、线串、多边形）。 如果传递 3D 几何图形，则会通过强制 Z 为 0 将其转换为 2D，从而可能导致无效的情况。 第二个参数必须是二维多边形。</p><p>实现利用 <a class="link" href="http://doc.cgal.org/latest/Minkowski_sum_2/" target="_top">CGAL 2D Minkowskisum</a>。</p><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div></div><div class="refentry" id="CG_MinkowskiSum"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_MinkowskiSum — 执行 Minkowski sum</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_MinkowskiSum</strong>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" id="idm22917"><h2>描述</h2><p>此函数执行点、线或多边形与多边形的 2D minkowski 和。</p><p>两个几何图形 A 和 B 的minkowski和是所有点的集合，这些点是 A 和 B 中任意点的和。minkowski和经常用于运动规划和计算机辅助设计。 有关更多详细信息在<a class="link" href="https://en.wikipedia.org/wiki/Minkowski_addition" target="_top">维基百科 Minkowski 添加</a>。</p><p>第一个参数可以是任何 2D 几何图形（点、线串、多边形）。 如果传递 3D 几何图形，则会通过强制 Z 为 0 将其转换为 2D，从而可能导致无效的情况。 第二个参数必须是二维多边形。</p><p>实现利用 <a class="link" href="http://doc.cgal.org/latest/Minkowski_sum_2/" target="_top">CGAL 2D Minkowskisum</a>。</p><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm22930"><h2>示例</h2><p>Minkowski 线串与圆多边形的总和，其中线串穿过圆</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                            <p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum01.png"/><div class="caption"><p>求和前</p></div></div></div><p>
                            </p>
                        </td><td>
                            <p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum02.png"/><div class="caption"><p>求和后</p></div></div></div><p>
                            </p>
                        </td></tr></tbody></table></div><pre class="programlisting">SELECT CG_MinkowskiSum(line, circle))
            FROM (SELECT
            ST_MakeLine(ST_Point(10, 10),ST_Point(100, 100)) As line,
            ST_Buffer(ST_GeomFromText('POINT(50 50)'), 30) As circle) As foo;

            -- wkt --
            MULTIPOLYGON(((30 59.9999999999999,30.5764415879031 54.1472903395161,32.2836140246614 48.5194970290472,35.0559116309237 43.3328930094119,38.7867965644036 38.7867965644035,43.332893009412 35.0559116309236,48.5194970290474 32.2836140246614,54.1472903395162 30.5764415879031,60.0000000000001 30,65.8527096604839 30.5764415879031,71.4805029709527 32.2836140246614,76.6671069905881 35.0559116309237,81.2132034355964 38.7867965644036,171.213203435596 128.786796564404,174.944088369076 133.332893009412,177.716385975339 138.519497029047,179.423558412097 144.147290339516,180 150,179.423558412097 155.852709660484,177.716385975339 161.480502970953,174.944088369076 166.667106990588,171.213203435596 171.213203435596,166.667106990588 174.944088369076,
            161.480502970953 177.716385975339,155.852709660484 179.423558412097,150 180,144.147290339516 179.423558412097,138.519497029047 177.716385975339,133.332893009412 174.944088369076,128.786796564403 171.213203435596,38.7867965644035 81.2132034355963,35.0559116309236 76.667106990588,32.2836140246614 71.4805029709526,30.5764415879031 65.8527096604838,30 59.9999999999999)))
        </pre><p>多边形和多点的 Minkowski 和</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                            <p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum03.png"/><div class="caption"><p>求和前</p></div></div></div><p>
                            </p>
                        </td><td>
                            <p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum04.png"/><div class="caption"><p>求和后：复制多边形并转换为点的位置</p></div></div></div><p>
                            </p>
                        </td></tr></tbody></table></div><pre class="programlisting">SELECT CG_MinkowskiSum(mp, poly)
        FROM (SELECT 'MULTIPOINT(25 50,70 25)'::geometry As mp,
        'POLYGON((130 150, 20 40, 50 60, 125 100, 130 150))'::geometry As poly
        ) As foo


        -- wkt --
        MULTIPOLYGON(
        ((70 115,100 135,175 175,225 225,70 115)),
        ((120 65,150 85,225 125,275 175,120 65))
        )
    </pre></div></div><div class="refentry" id="ST_OptimalAlphaShape"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_OptimalAlphaShape — 使用“最佳”alpha 值计算包围几何体的 Alpha 形状。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_OptimalAlphaShape</strong>(</code>geometry <var class="pdparam">geom</var>, boolean  <var class="pdparam">allow_holes = false</var>, integer  <var class="pdparam">nb_components = 1</var><code>)</code>;</p></div></div><div class="refsection" id="idm22994"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_OptimalAlphaShape" title="ST_OptimalAlphaShape">ST_OptimalAlphaShape</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_OptimalAlphaShape" title="CG_OptimalAlphaShape">CG_OptimalAlphaShape</a> instead. </p></td></tr></table></div><p>计算几何中点的“最佳”alpha 形状。 alpha 形状是使用所选的 α 值计算的，以便： </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>多边形元素的数量等于或小于<code class="varname">nb_components</code>（默认为1）</p></li><li class="listitem"><p>所有输入点都包含在形状中</p></li></ol></div><p>除非将可选的<code class="varname">allow_holes</code>参数指定为true，否则结果将不包含孔。 </p><p class="availability">可用性：3.3.0 - 需要 SFCGAL &gt;= 1.4.1。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div></div><div class="refentry" id="CG_OptimalAlphaShape"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_OptimalAlphaShape — 使用“最佳”alpha 值计算包围几何体的 Alpha 形状。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_OptimalAlphaShape</strong>(</code>geometry <var class="pdparam">geom</var>, boolean  <var class="pdparam">allow_holes = false</var>, integer  <var class="pdparam">nb_components = 1</var><code>)</code>;</p></div></div><div class="refsection" id="idm23032"><h2>描述</h2><p>计算几何中点的“最佳”alpha 形状。 alpha 形状是使用所选的 α 值计算的，以便： </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>多边形元素的数量等于或小于<code class="varname">nb_components</code>（默认为1）</p></li><li class="listitem"><p>所有输入点都包含在形状中</p></li></ol></div><p>除非将可选的<code class="varname">allow_holes</code>参数指定为true，否则结果将不包含孔。 </p><p class="availability">Availability: 3.5.0 - requires SFCGAL &gt;= 1.4.1.</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm23048"><h2>示例</h2><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_optimalalphashape01.png"/><div class="caption"><p>Optimal alpha-shape of a MultiPoint (same example as <a class="xref" href="#CG_AlphaShape" title="CG_AlphaShape">CG_AlphaShape</a>)</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(CG_OptimalAlphaShape('MULTIPOINT((63 84),(76 88),(68 73),(53 18),(91 50),(81 70),
                (88 29),(24 82),(32 51),(37 23),(27 54),(84 19),(75 87),(44 42),(77 67),(90 30),(36 61),(32 65),
                (81 47),(88 58),(68 73),(49 95),(81 60),(87 50),
                (78 16),(79 21),(30 22),(78 43),(26 85),(48 34),(35 35),(36 40),(31 79),(83 29),(27 84),(52 98),(72 95),(85 71),
                (75 84),(75 77),(81 29),(77 73),(41 42),(83 72),(23 36),(89 53),(27 57),(57 97),(27 77),(39 88),(60 81),
                (80 72),(54 32),(55 26),(62 22),(70 20),(76 27),(84 35),(87 42),(82 54),(83 64),(69 86),(60 90),(50 86),(43 80),(36 73),
                (36 68),(40 75),(24 67),(23 60),(26 44),(28 33),(40 32),(43 19),(65 16),(73 16),(38 46),(31 59),(34 86),(45 90),(64 97))'::geometry));</pre><p>
            </p><pre class="screen">POLYGON((89 53,91 50,87 42,90 30,88 29,84 19,78 16,73 16,65 16,53 18,43 19,37 23,30 22,28 33,23 36,
            26 44,27 54,23 60,24 67,27 77,24 82,26 85,34 86,39 88,45 90,49 95,52 98,57 97,64 97,72 95,76 88,75 84,75 77,83 72,85 71,83 64,88 58,89 53))</pre><p>
    </p><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_optimalalphashape02.png"/><div class="caption"><p>Optimal alpha-shape of a MultiPoint, allowing holes (same example as <a class="xref" href="#CG_AlphaShape" title="CG_AlphaShape">CG_AlphaShape</a>)</p></div></div></div><p>
        </p><pre class="programlisting">SELECT ST_AsText(CG_OptimalAlphaShape('MULTIPOINT((63 84),(76 88),(68 73),(53 18),(91 50),(81 70),(88 29),(24 82),(32 51),(37 23),(27 54),(84 19),(75 87),(44 42),(77 67),(90 30),(36 61),(32 65),(81 47),(88 58),(68 73),(49 95),(81 60),(87 50),
        (78 16),(79 21),(30 22),(78 43),(26 85),(48 34),(35 35),(36 40),(31 79),(83 29),(27 84),(52 98),(72 95),(85 71),
        (75 84),(75 77),(81 29),(77 73),(41 42),(83 72),(23 36),(89 53),(27 57),(57 97),(27 77),(39 88),(60 81),
        (80 72),(54 32),(55 26),(62 22),(70 20),(76 27),(84 35),(87 42),(82 54),(83 64),(69 86),(60 90),(50 86),(43 80),(36 73),
        (36 68),(40 75),(24 67),(23 60),(26 44),(28 33),(40 32),(43 19),(65 16),(73 16),(38 46),(31 59),(34 86),(45 90),(64 97))'::geometry, allow_holes =&gt; true));</pre><p>
    </p><pre class="screen">POLYGON((89 53,91 50,87 42,90 30,88 29,84 19,78 16,73 16,65 16,53 18,43 19,37 23,30 22,28 33,23 36,26 44,27 54,23 60,24 67,27 77,24 82,26 85,34 86,39 88,45 90,49 95,52 98,57 97,64 97,72 95,76 88,75 84,75 77,83 72,85 71,83 64,88 58,89 53),(36 61,36 68,40 75,43 80,50 86,60 81,68 73,77 67,81 60,82 54,81 47,78 43,81 29,76 27,70 20,62 22,55 26,54 32,48 34,44 42,38 46,36 61))</pre><p>
</p></div><div class="refsection" id="idm23070"><h2>相关信息</h2><p><a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#CG_AlphaShape" title="CG_AlphaShape">CG_AlphaShape</a></p></div></div><div class="refentry" id="CG_OptimalConvexPartition"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_OptimalConvexPartition — 计算多边形几何图形的最优凸分割</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_OptimalConvexPartition</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm23087"><h2>描述</h2><p>计算多边形几何图形的最优凸分割。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>多边形 P 的一个划分是指一组多边形，这些多边形的内部不相交，并且这些多边形的并集等于原始多边形 P 的内部。CG_OptimalConvexPartition 生成的划分在片段数量上是最优的。 </p></td></tr></table></div><p class="availability">可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。</p><p class="sfcgal_requirement">需要 SFCGAL 版本&gt;= 1.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm23098"><h2>示例</h2><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/cg_optimalconvexpartition01.png"/><div class="caption"><p>最优凸分割（与 <a class="xref" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>、<a class="xref" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a> 和 <a class="xref" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a> 相同的示例）</p></div></div></div><p>
                </p><pre class="programlisting">SELECT ST_AsText(CG_OptimalConvexPartition('POLYGON((156 150,83 181,89 131,148 120,107 61,32 159,0 45,41 86,45 1,177 2,67 24,109 31,170 60,180 110,156 150))'::geometry));</pre><p>
                </p><pre class="screen">GEOMETRYCOLLECTION(POLYGON((156 150,83 181,89 131,148 120,156 150)),POLYGON((32 159,0 45,41 86,32 159)),POLYGON((45 1,177 2,67 24,45 1)),POLYGON((41 86,45 1,67 24,41 86)),POLYGON((107 61,32 159,41 86,67 24,109 31,107 61)),POLYGON((148 120,107 61,109 31,170 60,180 110,148 120)),POLYGON((156 150,148 120,180 110,156 150)))</pre><p>
            </p></div><div class="refsection" id="idm23112"><h2>相关信息</h2><p><a class="xref" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>, <a class="xref" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a>, <a class="xref" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a></p></div></div><div class="refentry" id="CG_StraightSkeleton"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_StraightSkeleton — 从几何体计算直骨架</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_StraightSkeleton</strong>(</code>geometry <var class="pdparam">geom</var>, boolean  <var class="pdparam">use_distance_as_m = false</var><code>)</code>;</p></div></div><div class="refsection" id="idm23133"><h2>描述</h2><p class="availability">可用性：3.5.0</p><p class="sfcgal_requirement">Requires SFCGAL &gt;= 1.3.8 for option use_distance_as_m</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm23153"><h2>示例</h2><pre class="programlisting">SELECT CG_StraightSkeleton(ST_GeomFromText('POLYGON (( 190 190, 10 190, 10 10, 190 10, 190 20, 160 30, 60 30, 60 130, 190 140, 190 190 ))'));</pre><pre class="programlisting">ST_AsText(CG_StraightSkeleton('POLYGON((0 0,1 0,1 1,0 1,0 0))', true);</pre><pre class="screen">MULTILINESTRING M ((0 0 0,0.5 0.5 0.5),(1 0 0,0.5 0.5 0.5),(1 1 0,0.5 0.5 0.5),(0 1 0,0.5 0.5 0.5))</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_straightskeleton01.png"/><div class="caption"><p>原始多边形</p></div></div></div>
                            </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_straightskeleton02.png"/><div class="caption"><p>多边形的直骨架</p></div></div></div>
                            </td></tr></tbody></table></div></div><div class="refsection" id="idm23178"><h2>相关信息</h2><p><a class="xref" href="#CG_ExtrudeStraightSkeleton" title="CG_ExtrudeStraightSkeleton">CG_ExtrudeStraightSkeleton</a></p></div></div><div class="refentry" id="ST_StraightSkeleton"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_StraightSkeleton — 从几何体计算直骨架</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_StraightSkeleton</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm23194"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a> instead. </p></td></tr></table></div><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm23217"><h2>示例</h2><pre class="programlisting">SELECT ST_StraightSkeleton(ST_GeomFromText('POLYGON (( 190 190, 10 190, 10 10, 190 10, 190 20, 160 30, 60 30, 60 130, 190 140, 190 190 ))'));</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_straightskeleton01.png"/><div class="caption"><p>原始多边形</p></div></div></div>
                            </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_straightskeleton02.png"/><div class="caption"><p>多边形的直骨架</p></div></div></div>
                            </td></tr></tbody></table></div></div><div class="refsection" id="idm23240"><h2>相关信息</h2><p><a class="xref" href="#CG_ExtrudeStraightSkeleton" title="CG_ExtrudeStraightSkeleton">CG_ExtrudeStraightSkeleton</a></p></div></div><div class="refentry" id="ST_Tesselate"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Tesselate — 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Tesselate</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm23256"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> is deprecated as of 3.5.0. Use <a class="xref" href="#CG_Tesselate" title="CG_Tesselate">CG_Tesselate</a> instead. </p></td></tr></table></div><p>将 MULTI(POLYGON) 或 POLYHEDRALSURFACE 等曲面作为输入，并通过使用三角形的细分过程返回 TIN 表示形式。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a> 与此函数类似，但返回一个多边形的几何集合而不是三角形网，并且仅适用于二维几何。</p></td></tr></table></div><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div></div><div class="refentry" id="CG_Tesselate"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Tesselate — 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Tesselate</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm23295"><h2>描述</h2><p>将 MULTI(POLYGON) 或 POLYHEDRALSURFACE 等曲面作为输入，并通过使用三角形的细分过程返回 TIN 表示形式。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a> 与此函数类似，但返回一个多边形的几何集合而不是三角形网，并且仅适用于二维几何。</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm23318"><h2>示例</h2><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; "><p>
                                    </p><pre class="programlisting">SELECT ST_GeomFromText('POLYHEDRALSURFACE Z( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                                    ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                                    ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                                    ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )');</pre><p>
                                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate01.png"/><div class="caption"><p>原始立方体</p></div></div></div>
                        </td><td style="border-bottom: 1px solid ; "><p>
                                </p><pre class="programlisting">SELECT CG_Tesselate(ST_GeomFromText('POLYHEDRALSURFACE Z( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
                                ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
                                ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
                                ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));</pre>
                        <p>ST_AsText 输出:</p>
                        <pre class="screen">TIN Z (((0 0 0,0 0 1,0 1 1,0 0 0)),((0 1 0,0 0 0,0 1 1,0 1 0)),
                        ((0 0 0,0 1 0,1 1 0,0 0 0)),
                        ((1 0 0,0 0 0,1 1 0,1 0 0)),((0 0 1,1 0 0,1 0 1,0 0 1)),
                        ((0 0 1,0 0 0,1 0 0,0 0 1)),
                        ((1 1 0,1 1 1,1 0 1,1 1 0)),((1 0 0,1 1 0,1 0 1,1 0 0)),
                        ((0 1 0,0 1 1,1 1 1,0 1 0)),((1 1 0,0 1 0,1 1 1,1 1 0)),
                        ((0 1 1,1 0 1,1 1 1,0 1 1)),((0 1 1,0 0 1,1 0 1,0 1 1)))</pre>
                    <p> </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate02.png"/><div class="caption"><p>带有彩色三角形的细分立方体</p></div></div></div>
                </td></tr><tr><td style="border-right: 1px solid ; "><p>
                        </p><pre class="programlisting">SELECT 'POLYGON (( 10 190, 10 70, 80 70, 80 130, 50 160, 120 160, 120 190, 10 190 ))'::geometry;</pre><p>
                        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate03.png"/><div class="caption"><p>原始多边形</p></div></div></div>
                </td><td><p>
                        </p><pre class="programlisting">SELECT
                        CG_Tesselate('POLYGON (( 10 190, 10 70, 80 70, 80 130, 50 160, 120 160, 120 190, 10 190 ))'::geometry);</pre><p>
                </p>
                <p>ST_AsText 输出</p>
                <pre class="screen">TIN(((80 130,50 160,80 70,80 130)),((50 160,10 190,10 70,50 160)),
                ((80 70,50 160,10 70,80 70)),((120 160,120 190,50 160,120 160)),
                ((120 190,10 190,50 160,120 190)))</pre>
            <div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate04.png"/><div class="caption"><p>细分多边形</p></div></div></div>
        </td></tr></tbody></table></div></div><div class="refsection" id="idm23367"><h2>相关信息</h2><p><a class="xref" href="#CG_ConstrainedDelaunayTriangles" title="CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a>, <a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>, <a class="xref" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a></p></div></div><div class="refentry" id="CG_Triangulate"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Triangulate — Triangulates a polygonal geometry</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Triangulate</strong>(</code> geometry <var class="pdparam">geom</var> <code>)</code>;</p></div></div><div class="refsection" id="idm23385"><h2>描述</h2><p>Triangulates a polygonal geometry.</p><p>Performed by the SFCGAL module</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>NOTE: this function returns a geometry representing the triangulated result.</p></td></tr></table></div><p class="availability">可用性：3.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm23396"><h2>几何示例</h2><pre class="programlisting">SELECT CG_Triangulate('POLYGON((0.0 0.0,1.0 0.0,1.0 1.0,0.0 1.0,0.0 0.0),(0.2 0.2,0.2 0.8,0.8 0.8,0.8 0.2,0.2 0.2))');
                cg_triangulate
                ----------------
                TIN(((0.8 0.2,0.2 0.2,1 0,0.8 0.2)),((0.2 0.2,0 0,1 0,0.2 0.2)),((1 1,0.8 0.8,0.8 0.2,1 1)),((0 1,0 0,0.2 0.2,0 1)),((0 1,0.2 0.8,1 1,0 1)),((0 1,0.2 0.2,0.2 0.8,0 1)),((0.2 0.8,0.8 0.8,1 1,0.2 0.8)),((0.2 0.8,0.2 0.2,0.8 0.2,0.2 0.8)),((1 1,0.8 0.2,1 0,1 1)),((0.8 0.8,0.2 0.8,0.8 0.2,0.8 0.8)))

                (1 row)</pre></div><div class="refsection" id="idm23399"><h2>相关信息</h2><p><a class="xref" href="#CG_ConstrainedDelaunayTriangles" title="CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a>, <a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>, <a class="xref" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a></p></div></div><div class="refentry" id="CG_Visibility"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_Visibility — 计算一个从点或多边形几何中的线段生成的可见性多边形</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_Visibility</strong>(</code>geometry <var class="pdparam">polygon</var>, geometry <var class="pdparam">point</var><code>)</code>;</p><p><code class="funcdef">geometry <strong class="fsfunc">CG_Visibility</strong>(</code>geometry <var class="pdparam">polygon</var>, geometry <var class="pdparam">pointA</var>, geometry <var class="pdparam">pointB</var><code>)</code>;</p></div></div><div class="refsection" id="idm23432"><h2>描述</h2><p class="availability">可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。</p><p class="sfcgal_requirement">需要 SFCGAL 版本&gt;= 1.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持多面体曲面。 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 此函数支持三角形和不规则三角网面 (TIN)。 </p></div><div class="refsection" id="idm23452"><h2>示例</h2><pre class="programlisting">SELECT CG_Visibility('POLYGON((23.5 23.5,23.5 173.5,173.5 173.5,173.5 23.5,23.5 23.5),(108 98,108 36,156 37,155 99,108 98),(107 157.5,107 106.5,135 107.5,133 127.5,143.5 127.5,143.5 108.5,153.5 109.5,151.5 166,107 157.5),(41 95.5,41 35,100.5 36,98.5 68,78.5 68,77.5 96.5,41 95.5),(39 150,40 104,97.5 106.5,95.5 152,39 150))'::geometry, 'POINT(91 87)'::geometry);</pre><pre class="programlisting">SELECT CG_Visibility('POLYGON((23.5 23.5,23.5 173.5,173.5 173.5,173.5 23.5,23.5 23.5),(108 98,108 36,156 37,155 99,108 98),(107 157.5,107 106.5,135 107.5,133 127.5,143.5 127.5,143.5 108.5,153.5 109.5,151.5 166,107 157.5),(41 95.5,41 35,100.5 36,98.5 68,78.5 68,77.5 96.5,41 95.5),(39 150,40 104,97.5 106.5,95.5 152,39 150))'::geometry,'POINT(78.5 68)'::geometry, 'POINT(98.5 68)'::geometry);</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/cg_visibility01.png"/><div class="caption"><p>原始多边形</p></div></div></div>
                            </td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/cg_visibility02.png"/><div class="caption"><p>从点的视角来看，可见性</p></div></div></div>
                            </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/cg_visibility03.png"/><div class="caption"><p>从线段的视角来看，可见性</p></div></div></div>
                            </td></tr></tbody></table></div></div></div><div class="refentry" id="CG_YMonotonePartition"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CG_YMonotonePartition — 计算多边形几何的 y 单调分割</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">CG_YMonotonePartition</strong>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" id="idm23496"><h2>描述</h2><p>计算多边形几何图形的 y-单调分割。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>多边形 P 的一个划分是指一组多边形，这些多边形的内部不相交，并且这些多边形的并集等于原始多边形 P 的内部。一个 y-单调多边形是指其顶点 v1,…,vn 可以划分成两个链 v1,…,vk 和 vk,…,vn,v1，使得任何水平线最多与其中一条链相交一次。该算法不能保证在产生的多边形数量上达到最优数量的界限。 </p></td></tr></table></div><p class="availability">可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。</p><p class="sfcgal_requirement">需要 SFCGAL 版本&gt;= 1.5.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要SFCGAL后端。 </p></div><div class="refsection" id="idm23507"><h2>示例</h2><p>
            </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/cg_ymonotonepartition01.png"/><div class="caption"><p>原始多边形</p></div></div></div>
                            </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/cg_ymonotonepartition02.png"/><div class="caption"><p>Y-单调分割（与 <a class="xref" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a>、<a class="xref" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a> 和 <a class="xref" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a> 相同的示例）</p></div></div></div>
                            </td></tr></tbody></table></div><p>
            </p><pre class="programlisting">SELECT ST_AsText(CG_YMonotonePartition('POLYGON((156 150,83 181,89 131,148 120,107 61,32 159,0 45,41 86,45 1,177 2,67 24,109 31,170 60,180 110,156 150))'::geometry));</pre><p>
            </p><pre class="screen">GEOMETRYCOLLECTION(POLYGON((32 159,0 45,41 86,32 159)),POLYGON((107 61,32 159,41 86,45 1,177 2,67 24,109 31,170 60,107 61)),POLYGON((156 150,83 181,89 131,148 120,107 61,170 60,180 110,156 150)))</pre><p>
        </p></div><div class="refsection" id="idm23535"><h2>相关信息</h2><p><a class="xref" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a>, <a class="xref" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a>, <a class="xref" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a></p></div></div></section></section><section class="chapter" id="Topology"><div class="titlepage"><div><div><h1 class="title">Chapter 9. 拓扑结构</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#Topology_Types">9.1. 拓扑类型</a></span></li><li><span class="section"><a href="#Topology_Domains">9.2. 拓扑域</a></span></li><li><span class="section"><a href="#Topology_ManagementFunctions">9.3. 拓扑和拓扑几何管理</a></span></li><li><span class="section"><a href="#Topology_StatsManagement">9.4. 拓扑统计管理</a></span></li><li><span class="section"><a href="#Topology_Constructors">9.5. 拓扑构造器</a></span></li><li><span class="section"><a href="#Topology_Editing">9.6. 拓扑编辑器</a></span></li><li><span class="section"><a href="#Topology_Accessors">9.7. 拓扑访问器</a></span></li><li><span class="section"><a href="#Topology_Processing">9.8. 拓扑处理</a></span></li><li><span class="section"><a href="#TopoGeometry_Constructors">9.9. 拓扑几何构造函数</a></span></li><li><span class="section"><a href="#TopoGeometry_Editors">9.10. 拓扑几何编辑器</a></span></li><li><span class="section"><a href="#TopoGeom_Accessors">9.11. 拓扑几何访问器</a></span></li><li><span class="section"><a href="#TopoGeometry_Outputs">9.12. 拓扑几何输出</a></span></li><li><span class="section"><a href="#Topology_Relationships">9.13. 拓扑空间关系</a></span></li><li><span class="section"><a href="#Topology_Import_Export">9.14. 导入和导出拓扑</a></span></li></ul></div><p>PostGIS拓扑类型和函数用于管理拓扑对象，例如面、边和节点。 </p><p>Sandro Santilli在2011年PostGIS Day Paris会议上的演示提供了关于PostGIS拓扑和未来发展方向的很好概述。您可以查看他的幻灯片演示，链接如下：<a class="link" href="http://strk.kbt.io/projects/postgis/Paris2011_TopologyWithPostGIS_2_0.pdf" target="_top">Topology with PostGIS 2.0 slide deck</a>。</p><p>Vincent Picavet 在<a class="link" href="https://gitlab.com/Oslandia/documentation/presentations/-/blob/master/2012/pgconf_eu_2012/pgconfeu2012_vincent_picavet_postgis_topology.pdf" target="_top"> PostGIS 拓扑 PGConf EU 2012 </a>中对拓扑是什么、如何使用以及支持它的各种 FOSS4G 工具提供了很好的概要和概述。 </p><p>基于拓扑的 GIS 数据库的一个示例是<a class="link" href="https://www.census.gov/geo/maps-data/data/tiger.html" target="_top">美国人口普查拓扑集成地理编码和参考系统 (TIGER) </a>数据库。 如果您想尝试 PostGIS 拓扑并需要一些数据，请查看 <a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a>。</p><p>PostGIS 拓扑模块已存在于 PostGIS 的早期版本中，但从未成为官方 PostGIS 文档的一部分。 在 PostGIS 2.0.0 中，正在进行重大清理，以删除其中所有已弃用函数的使用，修复已知的可用性问题，更好地记录特性和函数，添加新函数，并进行增强以更符合 SQL-MM 标准。</p><p>该项目的详细信息可以在 <a class="link" href="http://trac.osgeo.org/postgis/wiki/UsersWikiPostgisTopology" target="_top">PostGIS Topology Wiki </a>中找到</p><p>与该模块关联的所有函数和表都安装在称为<code class="varname">拓扑</code>架构中。</p><p>SQL/MM 标准中定义的函数以 ST_ 为前缀，而 PostGIS 特定的函数没有前缀。</p><p>从 PostGIS 2.0 开始默认构建拓扑支持，并且可以在构建时指定 --without-topology 配置选项来禁用拓扑支持，如第 2 章 <a class="xref" href="#postgis_installation" title="Chapter 2. PostGIS 安装">Chapter 2, <em>PostGIS 安装</em></a>中所述</p><section class="section" id="Topology_Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.1. 拓扑类型</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了 PostGIS Topology 安装的 PostgreSQL 数据类型。 请注意，我们描述了这些的强制转换行为，这非常重要，尤其是在设计您自己的函数时。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#getfaceedges_returntype">getfaceedges_returntype</a></span><span class="refpurpose"> — 由序号和边号组成的复合类型。 </span></li><li><span class="refentrytitle"><a href="#topogeometry">TopoGeometry</a></span><span class="refpurpose"> — 表示拓扑定义的几何图形的复合类型。</span></li><li><span class="refentrytitle"><a href="#validatetopology_returntype">validatetopology_returntype</a></span><span class="refpurpose"> — 复合类型，由错误消息以及表示错误位置的 id1 和 id2 组成。 这是<code class="varname"> ValidateTopology</code> 的返回类型。</span></li></ul></div><div class="refentry" id="getfaceedges_returntype"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>getfaceedges_returntype — 由序号和边号组成的复合类型。 </p></div><div class="refsection" id="idm23568"><h2>描述</h2><p>由序列号和边号组成的复合类型。 这是<code class="varname"> ST_GetFaceEdges </code>和<code class="varname"> GetNodeEdges</code> 函数的返回类型。 </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">sequence</code>是一个整数：指的是在topology.topology表中定义的拓扑，该表定义了拓扑架构和srid。</p></li><li class="listitem"><p><code class="varname">edge</code>是一个整数：边的标识号。</p></li></ol></div></div></div><div class="refentry" id="topogeometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeometry — 表示拓扑定义的几何图形的复合类型。</p></div><div class="refsection" id="idm23584"><h2>描述</h2><p>一个复合类型，它引用了特定拓扑层中的拓扑几何图形，具有特定的类型和特定的标识符。TopoGeometry 的元素包括属性：topology_id、layer_id、id 整数和 type 整数。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">topology_id </code>是一个整数：指的是在topology.topology 表中定义的拓扑，该表定义了拓扑架构和srid。</p></li><li class="listitem"><p><code class="varname">layer_id </code>（整数）：拓扑几何所属的图层表中的layer_id。 topology_id 和 layer_id 的组合唯一地引用了拓扑图层表。</p></li><li class="listitem"><p><code class="varname">id</code> 是一个整数：id 是自动生成的序列号，唯一定义相应拓扑层中的主题几何图形。</p></li><li class="listitem"><p><code class="varname">type</code>输入 1 - 4 之间的整数，定义几何类型：1:[多]点、2:[多]线、3:[多]多边形、4:集合</p></li></ol></div></div><div class="refsection" id="idm23600"><h2>类型强制转换</h2><p>这个部分列出了允许用于这种数据类型的自动转换以及显式转换</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">转换到</td><td style="border-bottom: 1px solid ; ">行为</td></tr><tr><td style="border-right: 1px solid ; ">geometry</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" id="idm23612"><h2>相关信息</h2><p><a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a></p></div></div><div class="refentry" id="validatetopology_returntype"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>validatetopology_returntype — 复合类型，由错误消息以及表示错误位置的 id1 和 id2 组成。 这是<code class="varname"> ValidateTopology</code> 的返回类型。</p></div><div class="refsection" id="idm23621"><h2>描述</h2><p>由错误消息和两个整数组成的复合类型。<a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a>函数返回一组值来表示验证错误，并返回 id1 和 id2 来表示错误中涉及的拓扑对象的 id。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">error </code>为 varchar：表示错误类型。 </p><p>当前的错误描述符有：重合节点、边交叉节点、边不简单、边结束节点几何形状不匹配、边起始节点几何形状不匹配、面重叠面、面内面， </p></li><li class="listitem"><p><code class="varname">id1</code> 是一个整数：表示错误的边/面/节点的标识符。</p></li><li class="listitem"><p><code class="varname">id2</code> 是一个整数：对于涉及 2 个对象的错误，表示次要边缘/或节点</p></li></ol></div></div><div class="refsection" id="idm23636"><h2>相关信息</h2><p><a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a></p></div></div></section><section class="section" id="Topology_Domains"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.2. 拓扑域</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了 PostGIS Topology 安装的 PostgreSQL 域。 域可以像对象类型一样用作函数或表列的返回对象。 域和类型之间的区别在于，域是绑定了检查约束的现有类型。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#topoelement">TopoElement</a></span><span class="refpurpose"> — 一个由 2 个整数组成的数组，用于表示简单或分层拓扑几何的一个组件。</span></li><li><span class="refentrytitle"><a href="#topoelementarray">TopoElementArray</a></span><span class="refpurpose"> — TopoElement 对象的数组。</span></li></ul></div><div class="refentry" id="topoelement"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoElement — 一个由 2 个整数组成的数组，用于表示简单或分层拓扑几何的一个组件。</p></div><div class="refsection" id="idm23649"><h2>描述</h2><p>一个由 2 个整数组成的数组，用于表示简单或分层<a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>的一个组件。 </p><p>对于简单的 TopoGeometry，数组的第一个元素表示拓扑基元的标识符，第二个元素表示其类型（1：节点、2：边、3：面）。 在分层 TopoGeometry 的情况下，数组的第一个元素表示子 TopoGeometry 的标识符，第二个元素表示其层标识符。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于任何给定的层次结构 TopoGeometry，所有子 TopoGeometry 元素都将来自同一子层，如所定义的 TopoGeometry 层的 topology.layer 记录中所指定。 </p></td></tr></table></div></div><div class="refsection" id="idm23656"><h2>示例</h2><pre class="programlisting">SELECT te[1] AS id, te[2] AS type FROM
( SELECT ARRAY[1,2]::topology.topoelement AS te ) f;
 id | type
----+------
  1 |    2
                 </pre><pre class="programlisting">SELECT ARRAY[1,2]::topology.topoelement;
  te
-------
 {1,2}
                 </pre><pre class="programlisting">--Example of what happens when you try to case a 3 element array to topoelement
-- NOTE: topoement has to be a 2 element array so fails dimension check
SELECT ARRAY[1,2,3]::topology.topoelement;
ERROR:  value for domain topology.topoelement violates check constraint "dimensions"
                 </pre></div><div class="refsection" id="idm23661"><h2>相关信息</h2><p><a class="xref" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>, <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>, <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>, <a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>, <a class="xref" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a> </p></div></div><div class="refentry" id="topoelementarray"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoElementArray — TopoElement 对象的数组。</p></div><div class="refsection" id="idm23673"><h2>描述</h2><p>1 个或多个 TopoElement 对象的数组，通常用于传递 TopoGeometry 对象的组件。</p></div><div class="refsection" id="idm23676"><h2>示例</h2><pre class="programlisting">SELECT '{{1,2},{4,3}}'::topology.topoelementarray As tea;
  tea
-------
{{1,2},{4,3}}

-- more verbose equivalent --
SELECT ARRAY[ARRAY[1,2], ARRAY[4,3]]::topology.topoelementarray As tea;

  tea
-------
{{1,2},{4,3}}

--using the array agg function packaged with topology --
SELECT topology.TopoElementArray_Agg(ARRAY[e,t]) As tea
  FROM generate_series(1,4) As e CROSS JOIN generate_series(1,3) As t;
  tea
--------------------------------------------------------------------------
{{1,1},{1,2},{1,3},{2,1},{2,2},{2,3},{3,1},{3,2},{3,3},{4,1},{4,2},{4,3}}
                 </pre><pre class="programlisting">SELECT '{{1,2,4},{3,4,5}}'::topology.topoelementarray As tea;
ERROR:  value for domain topology.topoelementarray violates check constraint "dimensions"
                 </pre></div><div class="refsection" id="idm23680"><h2>相关信息</h2><p><a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>, <a class="xref" href="#GetTopoGeomElementArray" title="GetTopoGeomElementArray">GetTopoGeomElementArray</a>, <a class="xref" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a> </p></div></div></section><section class="section" id="Topology_ManagementFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.3. 拓扑和拓扑几何管理</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了用于构建新拓扑模式、验证拓扑和管理 TopoGeometry 列的拓扑函数</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#AddTopoGeometryColumn">AddTopoGeometryColumn</a></span><span class="refpurpose"> — 将拓扑几何列添加到现有表中，将此新列注册为topology.layer 中的图层并返回新的layer_id。</span></li><li><span class="refentrytitle"><a href="#RenameTopoGeometryColumn">RenameTopoGeometryColumn</a></span><span class="refpurpose"> — 重命名拓扑几何列</span></li><li><span class="refentrytitle"><a href="#DropTopology">DropTopology</a></span><span class="refpurpose"> — 谨慎使用：删除拓扑模式并从topology.topology 表中删除其引用，并从geometry_columns 表中删除对该模式中表的引用。</span></li><li><span class="refentrytitle"><a href="#RenameTopology">RenameTopology</a></span><span class="refpurpose"> — 重命名拓扑</span></li><li><span class="refentrytitle"><a href="#DropTopoGeometryColumn">DropTopoGeometryColumn</a></span><span class="refpurpose"> — 从架构 <code class="varname">schema_name </code>中名为<code class="varname"> table_name </code>的表中删除拓扑几何列，并从 topology.layer 表中取消注册这些列。</span></li><li><span class="refentrytitle"><a href="#Populate_Topology_Layer">Populate_Topology_Layer</a></span><span class="refpurpose"> — 通过从拓扑表读取元数据，将缺失的条目添加到topology.layer表中。</span></li><li><span class="refentrytitle"><a href="#TopologySummary">TopologySummary</a></span><span class="refpurpose"> — 获取拓扑名称并提供拓扑中对象类型的汇总总数。</span></li><li><span class="refentrytitle"><a href="#ValidateTopology">ValidateTopology</a></span><span class="refpurpose"> — 返回一组 validatetopology_returntype 对象，详细说明拓扑问题。</span></li><li><span class="refentrytitle"><a href="#ValidateTopologyRelation">ValidateTopologyRelation</a></span><span class="refpurpose"> — 返回有关无效拓扑关系记录的信息</span></li><li><span class="refentrytitle"><a href="#FindTopology">FindTopology</a></span><span class="refpurpose"> — 通过不同的方式返回拓扑记录。</span></li><li><span class="refentrytitle"><a href="#FindLayer">FindLayer</a></span><span class="refpurpose"> — 通过不同的方式返回topology.layer记录。</span></li></ul></div><div class="refentry" id="AddTopoGeometryColumn"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddTopoGeometryColumn — 将拓扑几何列添加到现有表中，将此新列注册为topology.layer 中的图层并返回新的layer_id。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">AddTopoGeometryColumn</strong>(</code>varchar  <var class="pdparam">topology_name</var>, varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, varchar  <var class="pdparam">feature_type</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">AddTopoGeometryColumn</strong>(</code>varchar  <var class="pdparam">topology_name</var>, varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var>, varchar  <var class="pdparam">feature_type</var>, integer  <var class="pdparam">child_layer</var><code>)</code>;</p></div></div><div class="refsection" id="idm23736"><h2>描述</h2><p>每个 TopoGeometry 对象都属于特定拓扑的特定层。 在创建 TopoGeometry 对象之前，您需要创建其 TopologyLayer。 拓扑层是要素表与拓扑的关联。 它还包含类型和层次结构信息。 我们使用 AddTopoGeometryColumn() 函数创建一个图层： </p><p>此函数会将请求的列添加到表中，并将包含所有给定信息的记录添加到topology.layer 表中。</p><p>如果您不指定 [child_layer]（或将其设置为 NULL），该图层将包含基本拓扑几何（由原始拓扑元素组成）。 否则，该层将包含分层的 TopoGeometries（由 child_layer 中的 TopoGeometries 组成）。</p><p>创建图层后（其 id 由 AddTopoGeometryColumn 函数返回），您就可以在其中构造 TopoGeometry 对象</p><p>有效的<code class="varname"> feature_types </code>为：POINT、MULTIPOINT、LINE、MULTILINE、POLYGON、MULTIPOLYGON、COLLECTION</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm23745"><h2>示例</h2><pre class="programlisting">-- Note for this example we created our new table in the ma_topo schema
-- though we could have created it in a different schema -- in which case topology_name and schema_name would be different
CREATE SCHEMA ma;
CREATE TABLE ma.parcels(gid serial, parcel_id varchar(20) PRIMARY KEY, address text);
SELECT topology.AddTopoGeometryColumn('ma_topo', 'ma', 'parcels', 'topo', 'POLYGON');</pre><pre class="programlisting">CREATE SCHEMA ri;
CREATE TABLE ri.roads(gid serial PRIMARY KEY, road_name text);
SELECT topology.AddTopoGeometryColumn('ri_topo', 'ri', 'roads', 'topo', 'LINE');
</pre></div><div class="refsection" id="idm23749"><h2>相关信息</h2><p><a class="xref" href="#DropTopoGeometryColumn" title="DropTopoGeometryColumn">DropTopoGeometryColumn</a>, <a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a> </p></div></div><div class="refentry" id="RenameTopoGeometryColumn"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>RenameTopoGeometryColumn — 重命名拓扑几何列</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topology.layer <strong class="fsfunc">RenameTopoGeometryColumn</strong>(</code>regclass  <var class="pdparam">layer_table</var>, name  <var class="pdparam">feature_column</var>, name  <var class="pdparam">new_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm23774"><h2>描述</h2><p>此函数更改现有 TopoGeometry 列的名称，确保有关它的元数据信息相应更新。 </p><p class="availability">可用性：3.4.0</p></div><div class="refsection" id="idm23778"><h2>示例</h2><pre class="programlisting">SELECT topology.RenameTopoGeometryColumn('public.parcels', 'topogeom', 'tgeom');
                </pre></div><div class="refsection" id="idm23781"><h2>相关信息</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>, <a class="xref" href="#RenameTopology" title="RenameTopology">RenameTopology</a> </p></div></div><div class="refentry" id="DropTopology"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>DropTopology — 谨慎使用：删除拓扑模式并从topology.topology 表中删除其引用，并从geometry_columns 表中删除对该模式中表的引用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">DropTopology</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm23798"><h2>描述</h2><p>删除拓扑模式并从topology.topology 表中删除其引用，并从geometry_columns 表中删除对该模式中表的引用。 应谨慎使用此功能，因为它可能会破坏您关心的数据。 如果架构不存在，它只会删除指定架构的引用条目。</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm23802"><h2>示例</h2><p>Cascade 会删除 ma_topo 架构，并删除在topology.topology 和geometry_columns 中对它的所有引用。</p><pre class="programlisting">SELECT topology.DropTopology('ma_topo');</pre></div><div class="refsection" id="idm23806"><h2>相关信息</h2><p><a class="xref" href="#DropTopoGeometryColumn" title="DropTopoGeometryColumn">DropTopoGeometryColumn</a></p></div></div><div class="refentry" id="RenameTopology"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>RenameTopology — 重命名拓扑</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">varchar <strong class="fsfunc">RenameTopology</strong>(</code>varchar  <var class="pdparam">old_name</var>, varchar  <var class="pdparam">new_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm23825"><h2>描述</h2><p>重命名拓扑架构，更新其在<code class="varname">topology.topology </code>表中的元数据记录。 </p><p class="availability">可用性：3.4.0</p></div><div class="refsection" id="idm23830"><h2>示例</h2><p>将拓扑从<code class="varname"> topo_stage </code>重命名为<code class="varname">topo_prod</code>。 </p><pre class="programlisting">SELECT topology.RenameTopology('topo_stage', 'topo_prod');</pre></div><div class="refsection" id="idm23836"><h2>相关信息</h2><p><a class="xref" href="#CopyTopology" title="CopyTopology">CopyTopology</a>, <a class="xref" href="#RenameTopoGeometryColumn" title="RenameTopoGeometryColumn">RenameTopoGeometryColumn</a> </p></div></div><div class="refentry" id="DropTopoGeometryColumn"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>DropTopoGeometryColumn — 从架构 <code class="varname">schema_name </code>中名为<code class="varname"> table_name </code>的表中删除拓扑几何列，并从 topology.layer 表中取消注册这些列。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">DropTopoGeometryColumn</strong>(</code>varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm23861"><h2>描述</h2><p>从架构 <code class="varname">schema_name</code> 中名为<code class="varname"> table_name </code>的表中删除拓扑几何列，并从 topology.layer 表中取消注册这些列。 返回放置状态的摘要。 注意：它首先将所有值设置为 NULL，然后再删除以绕过引用完整性检查。</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm23867"><h2>示例</h2><pre class="programlisting">SELECT topology.DropTopoGeometryColumn('ma_topo', 'parcel_topo', 'topo');</pre></div><div class="refsection" id="idm23870"><h2>相关信息</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a></p></div></div><div class="refentry" id="Populate_Topology_Layer"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Populate_Topology_Layer — 通过从拓扑表读取元数据，将缺失的条目添加到topology.layer表中。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">Populate_Topology_Layer</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm23884"><h2>描述</h2><p>通过检查表上的拓扑约束将缺失的条目添加到<code class="varname">topology.layer</code> 表中。 此功能对于在使用拓扑数据恢复模式后修复拓扑目录中的条目非常有用。</p><p>它返回创建的条目列表。 返回的列是 <code class="varname">schema_name</code>、<code class="varname">table_name</code>、<code class="varname">feature_column</code>。</p><p class="availability">可用性：2.3.0</p></div><div class="refsection" id="idm23893"><h2>示例</h2><pre class="programlisting">SELECT CreateTopology('strk_topo');
CREATE SCHEMA strk;
CREATE TABLE strk.parcels(gid serial, parcel_id varchar(20) PRIMARY KEY, address text);
SELECT topology.AddTopoGeometryColumn('strk_topo', 'strk', 'parcels', 'topo', 'POLYGON');
-- this will return no records because this feature is already registered
SELECT *
  FROM topology.Populate_Topology_Layer();

-- let's rebuild
TRUNCATE TABLE topology.layer;

SELECT *
  FROM topology.Populate_Topology_Layer();

SELECT topology_id,layer_id, schema_name As sn, table_name As tn, feature_column As fc
FROM topology.layer;

                                </pre><pre class="screen">schema_name | table_name | feature_column
-------------+------------+----------------
 strk        | parcels    | topo
(1 row)

 topology_id | layer_id |  sn  |   tn    |  fc
-------------+----------+------+---------+------
           2 |        2 | strk | parcels | topo
(1 row)</pre></div><div class="refsection" id="idm23897"><h2>相关信息</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a></p></div></div><div class="refentry" id="TopologySummary"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopologySummary — 获取拓扑名称并提供拓扑中对象类型的汇总总数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">TopologySummary</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm23913"><h2>描述</h2><p>获取拓扑名称并提供拓扑中对象类型的汇总总数。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm23917"><h2>示例</h2><pre class="programlisting">SELECT topology.topologysummary('city_data');
                    topologysummary
--------------------------------------------------------
 Topology city_data (329), SRID 4326, precision: 0
 22 nodes, 24 edges, 10 faces, 29 topogeoms in 5 layers
 Layer 1, type Polygonal (3), 9 topogeoms
  Deploy: features.land_parcels.feature
 Layer 2, type Puntal (1), 8 topogeoms
  Deploy: features.traffic_signs.feature
 Layer 3, type Lineal (2), 8 topogeoms
  Deploy: features.city_streets.feature
 Layer 4, type Polygonal (3), 3 topogeoms
  Hierarchy level 1, child layer 1
  Deploy: features.big_parcels.feature
 Layer 5, type Puntal (1), 1 topogeoms
  Hierarchy level 1, child layer 2
  Deploy: features.big_signs.feature</pre></div><div class="refsection" id="idm23920"><h2>相关信息</h2><p><a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p></div></div><div class="refentry" id="ValidateTopology"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ValidateTopology — 返回一组 validatetopology_returntype 对象，详细说明拓扑问题。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof validatetopology_returntype <strong class="fsfunc">ValidateTopology</strong>(</code>varchar  <var class="pdparam">toponame</var>, geometry <var class="pdparam">bbox</var><code>)</code>;</p></div></div><div class="refsection" id="idm23939"><h2>描述</h2><p>返回一组<a class="xref" href="#validatetopology_returntype" title="validatetopology_returntype">validatetopology_returntype</a>对象，详细说明拓扑问题，可以选择将检查限制到<code class="varname"> bbox</code> 参数指定的区域。 </p><p>下面显示了可能的错误列表、它们的含义以及返回的 id 代表的内容：</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">错误</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">id1</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">id2</th><th style="border-bottom: 1px solid ; ">意义</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">重合节点</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">第一个节点的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">第二个节点的标识符。</td><td style="border-bottom: 1px solid ; ">两个节点具有相同的几何形状。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边穿过节点</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">节点的标识符。</td><td style="border-bottom: 1px solid ; ">边在其内部有一个节点。 请参阅<a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">无效边</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">无效边几何图形。 请参阅<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">不简单边</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">边几何体具有自相交。 请参阅<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边与边交叉</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">第一条边的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">第二条边的标识符。</td><td style="border-bottom: 1px solid ; ">两条边有一个内部交叉点。 请参阅<a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边起始节点几何形状不匹配</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">指示的起始节点的标识符。 </td><td style="border-bottom: 1px solid ; ">指示为边的起始节点的节点的几何形状与边几何形状的第一个点不匹配。 请参阅<a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边端节点几何形状不匹配</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的标识符。</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">指示的端节点的标识符。 </td><td style="border-bottom: 1px solid ; ">指示为边的结束节点的节点的几何形状与边几何形状的最后一个点不匹配。 请参阅<a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">无边面</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">孤立面的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">没有边报告其两侧存在现有面（left_face、right_face）。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">face has no rings（面没有环）</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">部分定义的面的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">在其侧面报告面的边不形成环。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">face has wrong mbr（面的最小边界框错误）</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">mbr 缓存错误的面的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">面的最小边界矩形与报告其侧面的面的边集合的最小边界框不匹配。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">hole not in advertised face（孔不在宣传的面内）</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的签名标识符，标识环。 请参阅<a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">在其外部报告一个面的边缘环包含在不同的面上。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">非隔离节点具有 not- contains_face</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">不明确的节点的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">被报告为位于一个或多个边界上的节点表示一个包含的面。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">孤立节点有 contains_face</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">不明确的节点的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">一个节点如果没有被报告位于任何边界上，那就缺乏表示包含面的指示。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">孤立节点有错误的 contains_face</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">错误表述节点的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">一个未被报告位于任何边界上的节点指示了一个包含它的面，并且这个面不是实际包含它的面。 请参阅<a class="xref" href="#GetFaceContainingPoint" title="GetFaceContainingPoint">GetFaceContainingPoint</a>。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">无效的 next_right_edge</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">错误表示的边的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的有符号 ID，应指示为下一个右边。 </td><td style="border-bottom: 1px solid ; ">在沿着一条边的右侧行走时所指示的下一条边是错误的。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">无效的 next_left_edge</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">错误表示的边的标识符。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的有符号 ID，应指示为下一个左边。 </td><td style="border-bottom: 1px solid ; ">在沿着一条边的左侧行走时所指示的下一条边是错误的。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">mixed face labeling in ring（环内混合面标记）</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的签名标识符，标识环。 请参阅<a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">环中的边表示了在行走的一侧存在冲突的面。这也被称为 '边界位置冲突'。 </td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">非闭合环</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">边的签名标识符，标识环。 请参阅<a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>。 </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="border-bottom: 1px solid ; ">由以下 next_left_edge/next_right_edge 属性形成的边环在不同节点上开始和结束。 </td></tr><tr><td style="border-right: 1px solid ; ">face has multiple shells（面有多个外壳）</td><td style="border-right: 1px solid ; ">有争议的面的标识符。 </td><td style="border-right: 1px solid ; ">边的签名标识符，标识环。 请参阅<a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>。 </td><td>多个环状边界表示了同一个面的内部。 </td></tr></tbody></table></div><p class="availability">可用性：1.0.0</p><p class="enhanced">增强：2.0.0 更有效的边缘交叉检测并修复了先前版本中存在的误报。</p><p class="changed">更改：2.2.0 id1 和 id2 的值被交换为“边缘交叉节点”，以与错误描述一致。</p><p class="changed">更改：3.2.0 添加了可选的 bbox 参数，执行面标记和边链接检查。</p></div><div class="refsection" id="idm24064"><h2>示例</h2><pre class="programlisting">SELECT * FROM  topology.ValidateTopology('ma_topo');
      error        | id1 | id2
-------------------+-----+-----
face without edges |   1 |
                                </pre></div><div class="refsection" id="idm24067"><h2>相关信息</h2><p><a class="xref" href="#validatetopology_returntype" title="validatetopology_returntype">validatetopology_returntype</a>, <a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p></div></div><div class="refentry" id="ValidateTopologyRelation"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ValidateTopologyRelation — 返回有关无效拓扑关系记录的信息</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ValidateTopologyRelation</strong>(</code>varchar  <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" id="idm24084"><h2>描述</h2><p>返回一组记录，提供有关拓扑关系表中无效性的信息。 </p><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm24088"><h2>相关信息</h2><p><a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a></p></div></div><div class="refentry" id="FindTopology"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>FindTopology — 通过不同的方式返回拓扑记录。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topology <strong class="fsfunc">FindTopology</strong>(</code>TopoGeometry <var class="pdparam">topogeom</var><code>)</code>;</p><p><code class="funcdef">topology <strong class="fsfunc">FindTopology</strong>(</code>regclass <var class="pdparam">layerTable</var>, name <var class="pdparam">layerColumn</var><code>)</code>;</p><p><code class="funcdef">topology <strong class="fsfunc">FindTopology</strong>(</code>name <var class="pdparam">layerSchema</var>, name <var class="pdparam">layerTable</var>, name <var class="pdparam">layerColumn</var><code>)</code>;</p><p><code class="funcdef">topology <strong class="fsfunc">FindTopology</strong>(</code>text <var class="pdparam">topoName</var><code>)</code>;</p><p><code class="funcdef">topology <strong class="fsfunc">FindTopology</strong>(</code>int <var class="pdparam">id</var><code>)</code>;</p></div></div><div class="refsection" id="idm24137"><h2>描述</h2><p>获取拓扑标识符或拓扑相关对象的标识符并返回topology.topology 记录。</p><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm24141"><h2>示例</h2><pre class="programlisting">SELECT name(findTopology('features.land_parcels', 'feature'));
   name
-----------
 city_data
(1 row)
</pre></div><div class="refsection" id="idm24144"><h2>相关信息</h2><p><a class="xref" href="#FindLayer" title="FindLayer">FindLayer</a></p></div></div><div class="refentry" id="FindLayer"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>FindLayer — 通过不同的方式返回topology.layer记录。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topology.layer <strong class="fsfunc">FindLayer</strong>(</code>TopoGeometry <var class="pdparam">tg</var><code>)</code>;</p><p><code class="funcdef">topology.layer <strong class="fsfunc">FindLayer</strong>(</code>regclass <var class="pdparam">layer_table</var>, name <var class="pdparam">feature_column</var><code>)</code>;</p><p><code class="funcdef">topology.layer <strong class="fsfunc">FindLayer</strong>(</code>name <var class="pdparam">schema_name</var>, name <var class="pdparam">table_name</var>, name <var class="pdparam">feature_column</var><code>)</code>;</p><p><code class="funcdef">topology.layer <strong class="fsfunc">FindLayer</strong>(</code>integer <var class="pdparam">topology_id</var>, integer <var class="pdparam">layer_id</var><code>)</code>;</p></div></div><div class="refsection" id="idm24190"><h2>描述</h2><p>获取层标识符或拓扑相关对象的标识符并返回topology.layer 记录。</p><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm24194"><h2>示例</h2><pre class="programlisting">SELECT layer_id(findLayer('features.land_parcels', 'feature'));
 layer_id
----------
        1
(1 row)
</pre></div><div class="refsection" id="idm24197"><h2>相关信息</h2><p><a class="xref" href="#FindTopology" title="FindTopology">FindTopology</a></p></div></div></section><section class="section" id="Topology_StatsManagement"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.4. 拓扑统计管理</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节讨论拓扑构建期间数据库统计信息的管理。 </p></div></div></div></div><p>向拓扑添加元素会触发许多数据库查询，以查找将被分割的现有边、添加节点并更新将与新线路连接的边。 因此，有关拓扑表中数据的统计信息是最新的非常有用。 </p><p>PostGIS 拓扑数据的填充和编辑函数不会自动更新统计信息，因为在每次拓扑更改之后都更新统计信息会显得过于冗余，所以更新统计信息是调用者的责任。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>由 autovacuum 更新的统计信息对于在 autovacuum 过程完成之前启动的事务不可见，因此长时间运行的事务将需要自行运行 ANALYZE，以使用更新的统计信息。 </p></td></tr></table></div></section><section class="section" id="Topology_Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.5. 拓扑构造器</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节介绍用于创建新拓扑的拓扑函数。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#CreateTopology">CreateTopology</a></span><span class="refpurpose"> — 创建一个新的拓扑架构并将其注册到topology.topology 表中。</span></li><li><span class="refentrytitle"><a href="#CopyTopology">CopyTopology</a></span><span class="refpurpose"> — 将拓扑（节点、边、面、层和拓扑几何）的副本复制到新模式中</span></li><li><span class="refentrytitle"><a href="#ST_InitTopoGeo">ST_InitTopoGeo</a></span><span class="refpurpose"> — 创建一个新的拓扑架构并将其注册到topology.topology 表中。</span></li><li><span class="refentrytitle"><a href="#ST_CreateTopoGeo">ST_CreateTopoGeo</a></span><span class="refpurpose"> — 将几何图形集合添加到给定的空拓扑并返回详细说明成功的消息。 </span></li><li><span class="refentrytitle"><a href="#TopoGeo_AddPoint">TopoGeo_AddPoint</a></span><span class="refpurpose"> — 使用容差并可能分割现有边向现有拓扑添加点。 </span></li><li><span class="refentrytitle"><a href="#TopoGeo_AddLineString">TopoGeo_AddLineString</a></span><span class="refpurpose"> — Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces. </span></li><li><span class="refentrytitle"><a href="#TopoGeo_AddPolygon">TopoGeo_AddPolygon</a></span><span class="refpurpose"> — 使用公差并可能分割现有边/面将多边形添加到现有拓扑。 返回面标识符。</span></li><li><span class="refentrytitle"><a href="#TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a></span><span class="refpurpose"> — Load a geometry into an existing topology, snapping and splitting as needed.</span></li></ul></div><div class="refentry" id="CreateTopology"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CreateTopology — 创建一个新的拓扑架构并将其注册到topology.topology 表中。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">CreateTopology</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">CreateTopology</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">CreateTopology</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var>, integer  <var class="pdparam">srid</var>, double precision  <var class="pdparam">prec</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">CreateTopology</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var>, integer  <var class="pdparam">srid</var>, double precision  <var class="pdparam">prec</var>, boolean  <var class="pdparam">hasz</var><code>)</code>;</p></div></div><div class="refsection" id="idm24263"><h2>描述</h2><p>创建名为<code class="varname">topology_name</code>的新拓扑模式并将其注册到<code class="varname">topology.topology</code>表中。 拓扑必须具有唯一的名称。 拓扑表（<code class="varname">edge_data</code>、<code class="varname">face</code>、<code class="varname">node</code>和<code class="varname">relation</code>）在模式中创建。它返回拓扑的 id。 </p><p><code class="varname">srid</code> 是拓扑的<a class="link" href="#spatial_ref_sys" title="4.5. 空间参考系统">空间参考系统</a> SRID。 </p><p>容差<code class="varname">精度</code>以空间参考系的单位进行测量。 容差默认为 0。 </p><p>如果未指定，<code class="varname">hasz </code>默认为 false。 </p><p>这与 SQL/MM <a class="xref" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a> 类似，但具有更多功能。</p><p class="availability">可用性：1.1</p><p class="enhanced">增强：2.0添加接受hasZ的格式</p></div><div class="refsection" id="idm24283"><h2>示例</h2><p>创建一个名为<code class="varname"> ma_topo </code>的拓扑模式，用于存储马萨诸塞州平面米 (SRID = 26986) 中的边和节点。 由于空间参考系统是基于米的，因此容差表示 0.5 米。</p><pre class="programlisting">SELECT topology.CreateTopology('ma_topo', 26986, 0.5);</pre><p>在空间参考系统 State Plane-feet (SRID = 3438) 中为罗德岛创建一个名为<code class="varname"> ri_topo </code>的拓扑</p><pre class="programlisting">SELECT topology.CreateTopology('ri_topo', 3438) AS topoid;
topoid
------
2</pre></div><div class="refsection" id="idm24291"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a>, <a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p></div></div><div class="refentry" id="CopyTopology"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CopyTopology — 将拓扑（节点、边、面、层和拓扑几何）的副本复制到新模式中</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">CopyTopology</strong>(</code>varchar  <var class="pdparam">existing_topology_name</var>, varchar  <var class="pdparam">new_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm24312"><h2>描述</h2><p>创建名为<code class="varname"> new_name </code>的新拓扑，并使用从<code class="varname"> existing_topology_name</code>复制的 SRID 和精度。<code class="varname">existing_topology_name</code> 中的节点、边和面以及层及其关联的 TopoGeometries 都将复制到新拓扑中。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="varname">topology.layer</code> 表中的新行包含 schema_name、table_name 和 feature_column 的合成值。 这是因为 TopoGeometry 对象仅作为定义存在，并且在用户定义的表中尚不可用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm24322"><h2>示例</h2><p>备份名为<code class="varname"> ma_topo </code>的拓扑。 </p><pre class="programlisting">SELECT topology.CopyTopology('ma_topo', 'ma_topo_backup');</pre></div><div class="refsection" id="idm24327"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#RenameTopology" title="RenameTopology">RenameTopology</a> </p></div></div><div class="refentry" id="ST_InitTopoGeo"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_InitTopoGeo — 创建一个新的拓扑架构并将其注册到topology.topology 表中。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_InitTopoGeo</strong>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm24345"><h2>描述</h2><p>这在 SQL-MM 中相当于<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>。 它缺乏空间参考系统和容差的选项。 它返回拓扑创建的文本描述，而不是拓扑 ID。</p><p class="availability">可用性：1.1</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3 Topo-Geo 和 Topo-Net 3：例程详细信息：X.3.17</p></div><div class="refsection" id="idm24354"><h2>示例</h2><pre class="programlisting">SELECT topology.ST_InitTopoGeo('topo_schema_to_create') AS topocreation;
                      astopocreation
------------------------------------------------------------
 Topology-Geometry 'topo_schema_to_create' (id:7) created.
                                </pre></div><div class="refsection" id="idm24357"><h2>相关信息</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a></p></div></div><div class="refentry" id="ST_CreateTopoGeo"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CreateTopoGeo — 将几何图形集合添加到给定的空拓扑并返回详细说明成功的消息。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_CreateTopoGeo</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">acollection</var><code>)</code>;</p></div></div><div class="refsection" id="idm24376"><h2>描述</h2><p>将几何图形集合添加到给定的空拓扑并返回详细说明成功的消息。 </p><p>对于填充空拓扑很有用。</p><p class="availability">可用性：2.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 例程详细信息 -- X.3.18</p></div><div class="refsection" id="idm24385"><h2>示例</h2><pre class="programlisting">-- Populate topology --
SELECT topology.ST_CreateTopoGeo('ri_topo',
 ST_GeomFromText('MULTILINESTRING((384744 236928,384750 236923,384769 236911,384799 236895,384811 236890,384833 236884,
  384844 236882,384866 236881,384879 236883,384954 236898,385087 236932,385117 236938,
  385167 236938,385203 236941,385224 236946,385233 236950,385241 236956,385254 236971,
  385260 236979,385268 236999,385273 237018,385273 237037,385271 237047,385267 237057,
  385225 237125,385210 237144,385192 237161,385167 237192,385162 237202,385159 237214,
  385159 237227,385162 237241,385166 237256,385196 237324,385209 237345,385234 237375,
  385237 237383,385238 237399,385236 237407,385227 237419,385213 237430,385193 237439,
  385174 237451,385170 237455,385169 237460,385171 237475,385181 237503,385190 237521,
  385200 237533,385206 237538,385213 237541,385221 237542,385235 237540,385242 237541,
  385249 237544,385260 237555,385270 237570,385289 237584,385292 237589,385291 237596,385284 237630))',3438)
  );

      st_createtopogeo
----------------------------
 Topology ri_topo populated


-- create tables and topo geometries --
CREATE TABLE ri.roads(gid serial PRIMARY KEY, road_name text);

SELECT topology.AddTopoGeometryColumn('ri_topo', 'ri', 'roads', 'topo', 'LINE');
                                </pre></div><div class="refsection" id="idm24388"><h2>相关信息</h2><p><a class="xref" href="#TopoGeo_LoadGeometry" title="TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a>, <a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a> </p></div></div><div class="refentry" id="TopoGeo_AddPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeo_AddPoint — 使用容差并可能分割现有边向现有拓扑添加点。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">TopoGeo_AddPoint</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm24413"><h2>描述</h2><p>向现有拓扑添加一个点并返回其标识符。 给定点将捕捉到给定容差内的现有节点或边。 现有的边可能会被捕捉点分割。 </p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm24417"><h2>相关信息</h2><p><a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>, <a class="xref" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a>, <a class="xref" href="#TopoGeo_LoadGeometry" title="TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a>, <a class="xref" href="#AddNode" title="AddNode">AddNode</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a> </p></div></div><div class="refentry" id="TopoGeo_AddLineString"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeo_AddLineString — Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces. </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF integer <strong class="fsfunc">TopoGeo_AddLineString</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">aline</var>, float8  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm24443"><h2>描述</h2><p>Adds a linestring to an existing topology and returns a set of signed edge identifiers forming it up (negative identifies mean the edge goes in the opposite direction of the input linestring). The given line will snap to existing nodes or edges within given tolerance. Existing edges and faces may be split by the line. New nodes and faces may be added. </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>更新有关通过此函数加载的拓扑的统计信息由调用者决定，请参阅<a class="xref" href="#Topology_StatsManagement" title="9.4. 拓扑统计管理">maintaining statistics during topology editing and population</a>在拓扑编辑和填充期间维护统计信息。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">Enhanced: 3.2.0 added support for returning signed identifier.</p></div><div class="refsection" id="idm24451"><h2>相关信息</h2><p><a class="xref" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a>, <a class="xref" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a>, <a class="xref" href="#TopoGeo_LoadGeometry" title="TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a>, <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a> </p></div></div><div class="refentry" id="TopoGeo_AddPolygon"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeo_AddPolygon — 使用公差并可能分割现有边/面将多边形添加到现有拓扑。 返回面标识符。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF integer <strong class="fsfunc">TopoGeo_AddPolygon</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoly</var>, float8  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm24477"><h2>描述</h2><p>将多边形添加到现有拓扑并返回组成它的一组面标识符。 给定多边形的边界将捕捉到给定容差内的现有节点或边。 现有边和面可能会被新多边形的边界分割。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>更新有关通过此函数加载的拓扑的统计信息由调用者决定，请参阅<a class="xref" href="#Topology_StatsManagement" title="9.4. 拓扑统计管理">maintaining statistics during topology editing and population</a>在拓扑编辑和填充期间维护统计信息。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm24484"><h2>相关信息</h2><p><a class="xref" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a>, <a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>, <a class="xref" href="#TopoGeo_LoadGeometry" title="TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a>, <a class="xref" href="#AddFace" title="AddFace">AddFace</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a> </p></div></div><div class="refentry" id="TopoGeo_LoadGeometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeo_LoadGeometry — Load a geometry into an existing topology, snapping and splitting as needed.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">void <strong class="fsfunc">TopoGeo_LoadGeometry</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">ageom</var>, float8  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm24510"><h2>描述</h2><p>Loads a geometry into an existing topology. The given geometry will snap to existing nodes or edges within given tolerance. Existing edges and faces may be split as a consequence of the load. </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>更新有关通过此函数加载的拓扑的统计信息由调用者决定，请参阅<a class="xref" href="#Topology_StatsManagement" title="9.4. 拓扑统计管理">maintaining statistics during topology editing and population</a>在拓扑编辑和填充期间维护统计信息。 </p></td></tr></table></div><p class="availability">可用性：3.5.0</p></div><div class="refsection" id="idm24517"><h2>相关信息</h2><p><a class="xref" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a>, <a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>, <a class="xref" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a> </p></div></div></section><section class="section" id="Topology_Editing"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.6. 拓扑编辑器</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节介绍用于添加、移动、删除和分割边、面和节点的拓扑函数。 所有这些函数都是由 ISO SQL/MM 定义的。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#ST_AddIsoNode">ST_AddIsoNode</a></span><span class="refpurpose"> — 将一个孤立的节点添加到拓扑结构中的一个面，并返回新节点的节点ID。如果"face"为空（null），仍然会创建节点。</span></li><li><span class="refentrytitle"><a href="#ST_AddIsoEdge">ST_AddIsoEdge</a></span><span class="refpurpose"> — 将由几何 <code class="varname">alinestring</code> 定义的孤立边添加到连接两个现有孤立节点<code class="varname">anode</code>和<code class="varname">anothernode</code>的拓扑，并返回新边的边id。</span></li><li><span class="refentrytitle"><a href="#ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a></span><span class="refpurpose"> — 添加新边，如果这样做会分割一个面，请删除原始面并用两个新面替换它。</span></li><li><span class="refentrytitle"><a href="#ST_AddEdgeModFace">ST_AddEdgeModFace</a></span><span class="refpurpose"> — 添加新边，如果这样做会分割面，则修改原始面并添加新面。</span></li><li><span class="refentrytitle"><a href="#ST_RemEdgeNewFace">ST_RemEdgeNewFace</a></span><span class="refpurpose"> — 删除一条边，如果删除的边将两个面分开，则删除原始面并用新面替换它们。 </span></li><li><span class="refentrytitle"><a href="#ST_RemEdgeModFace">ST_RemEdgeModFace</a></span><span class="refpurpose"> — 删除一条边，如果该边将两个面分开，则删除一个面并修改另一个面以覆盖两个面的空间。 </span></li><li><span class="refentrytitle"><a href="#ST_ChangeEdgeGeom">ST_ChangeEdgeGeom</a></span><span class="refpurpose"> — 改变边的形状而不影响拓扑结构。 </span></li><li><span class="refentrytitle"><a href="#ST_ModEdgeSplit">ST_ModEdgeSplit</a></span><span class="refpurpose"> — 通过沿现有边创建新节点、修改原始边并添加新边来分割边。</span></li><li><span class="refentrytitle"><a href="#ST_ModEdgeHeal">ST_ModEdgeHeal</a></span><span class="refpurpose"> — 通过删除连接两条边的节点、修改第一条边并删除第二条边来修复两条边。 返回已删除节点的 id。 </span></li><li><span class="refentrytitle"><a href="#ST_NewEdgeHeal">ST_NewEdgeHeal</a></span><span class="refpurpose"> — 通过删除连接两条边的节点、删除两条边并用方向与提供的第一条边相同的边替换它们来修复两条边。 </span></li><li><span class="refentrytitle"><a href="#ST_MoveIsoNode">ST_MoveIsoNode</a></span><span class="refpurpose"> — 在拓扑结构中将一个孤立节点从一个点移动到另一个点。如果新的<code class="varname">apoint</code>几何对象已存在作为一个节点，则会抛出错误。返回移动的描述。</span></li><li><span class="refentrytitle"><a href="#ST_NewEdgesSplit">ST_NewEdgesSplit</a></span><span class="refpurpose"> — 通过沿现有边创建新节点、删除原始边并用两条新边替换它来分割边。 返回创建的连接新边的新节点的 id。</span></li><li><span class="refentrytitle"><a href="#ST_RemoveIsoNode">ST_RemoveIsoNode</a></span><span class="refpurpose"> — 删除孤立节点并返回操作描述。 如果节点不是孤立的（是边的开始或结束），则会引发异常。</span></li><li><span class="refentrytitle"><a href="#ST_RemoveIsoEdge">ST_RemoveIsoEdge</a></span><span class="refpurpose"> — 删除孤立的边并返回操作的描述。 如果边缘未被隔离，则会引发异常。</span></li></ul></div><div class="refentry" id="ST_AddIsoNode"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddIsoNode — 将一个孤立的节点添加到拓扑结构中的一个面，并返回新节点的节点ID。如果"face"为空（null），仍然会创建节点。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_AddIsoNode</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aface</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" id="idm24547"><h2>描述</h2><p>将具有点位置指定的孤立节点<code class="varname">apoint</code>添加到具有<code class="varname">aface</code>的现有面到拓扑 <code class="varname">atopology</code>拓扑并返回新节点的nodeid。</p><p>如果点几何的空间参考系 (srid) 与拓扑不同、 <code class="varname">apoint</code>不是点几何、该点为空或该点与现有边相交（即使在边界处），则例外情况是抛出。 如果该点已作为节点存在，则会引发异常。</p><p>如果<code class="varname">aface</code>不为null并且<code class="varname">apoint</code>不在该面内，则抛出异常。</p><p class="availability">可用性：1.1 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Net 例程: X+1.3.1</p></div><div class="refsection" id="idm24563"><h2>示例</h2><p/></div><div class="refsection" id="idm24566"><h2>相关信息</h2><p><a class="xref" href="#AddNode" title="AddNode">AddNode</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" id="ST_AddIsoEdge"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddIsoEdge — 将由几何 <code class="varname">alinestring</code> 定义的孤立边添加到连接两个现有孤立节点<code class="varname">anode</code>和<code class="varname">anothernode</code>的拓扑，并返回新边的边id。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_AddIsoEdge</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, integer  <var class="pdparam">anothernode</var>, geometry  <var class="pdparam">alinestring</var><code>)</code>;</p></div></div><div class="refsection" id="idm24597"><h2>描述</h2><p>将由几何<code class="varname">alinestring</code>定义的孤立边添加到连接两个现有孤立节点<code class="varname">anode</code>和<code class="varname">anothernode</code>的拓扑，并返回新边的边ID。</p><p>如果<code class="varname">alinestring</code>几何的空间参考系统 （SRID） 与拓扑不同、不是点几何、点为 NULL 或点与现有边（包括其边界）交互，则会引发异常。 此外，如果该点已作为节点存在，则会引发异常。</p><p>如果<code class="varname">alinestring</code>不在<code class="varname">anode</code>和<code class="varname">anothernode</code>所属的面内，那么将抛出一个异常。</p><p>如果<code class="varname">anode</code>和<code class="varname">anothernode</code>不是<code class="varname">alinestring</code>的起始点和结束点，则会抛出异常。</p><p class="availability">可用性：1.1 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo和 Topo-Net 3: 详细例程: X.3.4</p></div><div class="refsection" id="idm24618"><h2>示例</h2><p/></div><div class="refsection" id="idm24621"><h2>相关信息</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a>, <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" id="ST_AddEdgeNewFaces"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddEdgeNewFaces — 添加新边，如果这样做会分割一个面，请删除原始面并用两个新面替换它。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_AddEdgeNewFaces</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, integer  <var class="pdparam">anothernode</var>, geometry  <var class="pdparam">acurve</var><code>)</code>;</p></div></div><div class="refsection" id="idm24648"><h2>描述</h2><p>添加新边，如果这样做会分割一个面，请删除原始面并用两个新面替换它。 返回新添加的边的 id。 </p><p>相应地更新所有现有的连接边和关系。 </p><p>如果任何参数为null，给定的节点未知（必须已经存在于拓扑模式的<code class="varname">node</code>表中），<code class="varname">acurve</code>不是<code class="varname">LINESTRING</code>，<code class="varname">anode</code>和<code class="varname">anothernode</code>不是<code class="varname">acurve</code>的起始点和终点，则会引发错误。</p><p>如果<code class="varname">acurve</code>几何对象的空间参考系统（SRID）与拓扑结构不同，那么将抛出异常。</p><p class="availability">可用性：2.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.12</p></div><div class="refsection" id="idm24666"><h2>示例</h2><p/></div><div class="refsection" id="idm24669"><h2>相关信息</h2><p><a class="xref" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a></p><p><a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a></p></div></div><div class="refentry" id="ST_AddEdgeModFace"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddEdgeModFace — 添加新边，如果这样做会分割面，则修改原始面并添加新面。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_AddEdgeModFace</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, integer  <var class="pdparam">anothernode</var>, geometry  <var class="pdparam">acurve</var><code>)</code>;</p></div></div><div class="refsection" id="idm24696"><h2>描述</h2><p>添加新边，如果这样做会分割面，则修改原始面并添加新面。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果可能，新面将创建在新边的左侧。 如果左侧的面需要是宇宙面（无界），则这是不可能的。 </p></td></tr></table></div><p>返回新添加的边的 id。 </p><p>相应地更新所有现有的连接边和关系。 </p><p>如果任何参数为null，给定的节点未知（必须已经存在于拓扑模式的<code class="varname">node</code>表中），<code class="varname">acurve</code>不是<code class="varname">LINESTRING</code>，<code class="varname">anode</code>和<code class="varname">anothernode</code>不是<code class="varname">acurve</code>的起始点和终点，则会引发错误。</p><p>如果<code class="varname">acurve</code>几何对象的空间参考系统（SRID）与拓扑结构不同，那么将抛出异常。</p><p class="availability">可用性：2.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.13</p></div><div class="refsection" id="idm24717"><h2>示例</h2><p/></div><div class="refsection" id="idm24720"><h2>相关信息</h2><p><a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a></p><p><a class="xref" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a></p></div></div><div class="refentry" id="ST_RemEdgeNewFace"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemEdgeNewFace — 删除一条边，如果删除的边将两个面分开，则删除原始面并用新面替换它们。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_RemEdgeNewFace</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var><code>)</code>;</p></div></div><div class="refsection" id="idm24741"><h2>描述</h2><p>删除一条边，如果删除的边将两个面分开，则删除原始面并用新面替换它们。 </p><p>返回一个新创建的面的ID，或者返回NULL，如果没有创建新的面。当被移除的边是悬挂的、孤立的，或者与宇宙面相连（可能导致宇宙面涌入另一侧的面）时，不会创建新的面。 </p><p>相应地更新所有现有的连接边和关系。 </p><p>拒绝移除参与现有TopoGeometry定义的边。如果有任何TopoGeometry只由其中一个面定义而不是另一个面，则拒绝合并这两个面。 </p><p>如果任何参数为null，给定的边是未知的（必须已经存在于拓扑模式的<code class="varname">edge</code>表中），拓扑名称无效，则会抛出错误。 </p><p class="availability">可用性：2.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.14</p></div><div class="refsection" id="idm24754"><h2>示例</h2><p/></div><div class="refsection" id="idm24757"><h2>相关信息</h2><p><a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a></p><p><a class="xref" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a></p></div></div><div class="refentry" id="ST_RemEdgeModFace"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemEdgeModFace — 删除一条边，如果该边将两个面分开，则删除一个面并修改另一个面以覆盖两个面的空间。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_RemEdgeModFace</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var><code>)</code>;</p></div></div><div class="refsection" id="idm24778"><h2>描述</h2><p>删除一条边，如果删除的边将两个面分开，则删除一个面并修改另一个面以覆盖两个面的空间。 优先将面保持在右侧，以与<a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a>保持一致。 返回保留的面的 id。 </p><p>相应地更新所有现有的连接边和关系。 </p><p>拒绝移除参与现有TopoGeometry定义的边。如果有任何TopoGeometry只由其中一个面定义而不是另一个面，则拒绝合并这两个面。 </p><p>如果任何参数为null，给定的边是未知的（必须已经存在于拓扑模式的<code class="varname">edge</code>表中），拓扑名称无效，则会抛出错误。 </p><p class="availability">可用性：2.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.15</p></div><div class="refsection" id="idm24791"><h2>示例</h2><p/></div><div class="refsection" id="idm24794"><h2>相关信息</h2><p><a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a></p><p><a class="xref" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a></p></div></div><div class="refentry" id="ST_ChangeEdgeGeom"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ChangeEdgeGeom — 改变边的形状而不影响拓扑结构。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_ChangeEdgeGeom</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">acurve</var><code>)</code>;</p></div></div><div class="refsection" id="idm24818"><h2>描述</h2><p>改变边的形状而不影响拓扑结构。 </p><p>如果任何参数为null，给定的边在拓扑模式的<code class="varname">edge</code>表中不存在，<code class="varname">acurve</code>不是<code class="varname">LINESTRING</code>，或者修改将改变底层拓扑结构，则会抛出错误。 </p><p>如果<code class="varname">acurve</code>几何对象的空间参考系统（SRID）与拓扑结构不同，那么将抛出异常。</p><p>如果新的<code class="varname">acurve</code>不是简单线（simple line），则会抛出错误。</p><p>如果将边从旧位置移动到新位置会碰到障碍物，那么会抛出错误。 </p><p class="availability">可用性：1.1.0</p><p>增强版 2.0.0 添加了拓扑一致性强制执行功能 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程 X.3.6</p></div><div class="refsection" id="idm24836"><h2>示例</h2><pre class="programlisting">SELECT topology.ST_ChangeEdgeGeom('ma_topo', 1,
                ST_GeomFromText('LINESTRING(227591.9 893900.4,227622.6 893844.3,227641.6 893816.6, 227704.5 893778.5)', 26986) );
 ----
 Edge 1 changed</pre></div><div class="refsection" id="idm24839"><h2>相关信息</h2><p><a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a></p><p><a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a></p><p><a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a></p></div></div><div class="refentry" id="ST_ModEdgeSplit"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ModEdgeSplit — 通过沿现有边创建新节点、修改原始边并添加新边来分割边。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_ModEdgeSplit</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" id="idm24865"><h2>描述</h2><p>通过沿现有边创建新节点、修改原始边并添加新边来分割边。 相应地更新所有现有的连接边和关系。 返回新添加的节点的标识符。 </p><p class="availability">可用性：1.1 </p><p class="changed">更改：2.0 - 在之前的版本中，它被错误命名为 ST_ModEdgesSplit</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.9</p></div><div class="refsection" id="idm24874"><h2>示例</h2><pre class="programlisting">-- Add an edge --
 SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227592 893910, 227600 893910)', 26986) ) As edgeid;

-- edgeid-
3


-- Split the edge  --
SELECT topology.ST_ModEdgeSplit('ma_topo',  3, ST_SetSRID(ST_Point(227594,893910),26986)  ) As node_id;
        node_id
-------------------------
7
</pre></div><div class="refsection" id="idm24877"><h2>相关信息</h2><p><a class="xref" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>, <a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>, <a class="xref" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a>, <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a> </p></div></div><div class="refentry" id="ST_ModEdgeHeal"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ModEdgeHeal — 通过删除连接两条边的节点、修改第一条边并删除第二条边来修复两条边。 返回已删除节点的 id。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">int <strong class="fsfunc">ST_ModEdgeHeal</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, integer  <var class="pdparam">anotheredge</var><code>)</code>;</p></div></div><div class="refsection" id="idm24902"><h2>描述</h2><p>通过删除连接两条边的节点、修改第一条边并删除第二条边来修复两条边。 返回已删除节点的 id。 相应地更新所有现有的连接边和关系。 </p><p class="availability">可用性：2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.9</p></div><div class="refsection" id="idm24910"><h2>相关信息</h2><p>
				<a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
				<a class="xref" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>
				</p></div></div><div class="refentry" id="ST_NewEdgeHeal"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NewEdgeHeal — 通过删除连接两条边的节点、删除两条边并用方向与提供的第一条边相同的边替换它们来修复两条边。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">int <strong class="fsfunc">ST_NewEdgeHeal</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, integer  <var class="pdparam">anotheredge</var><code>)</code>;</p></div></div><div class="refsection" id="idm24933"><h2>描述</h2><p>通过删除连接两条边的节点、删除两条边并用方向与提供的第一条边相同的边替换它们来修复两条边。 返回替换已修复边的新边的 ID。 相应地更新所有现有的连接边和关系。 </p><p class="availability">可用性：2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo 和 Topo-Net 3: 详细例程: X.3.9</p></div><div class="refsection" id="idm24941"><h2>相关信息</h2><p>
				<a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>
				<a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
				<a class="xref" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>
				</p></div></div><div class="refentry" id="ST_MoveIsoNode"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MoveIsoNode — 在拓扑结构中将一个孤立节点从一个点移动到另一个点。如果新的<code class="varname">apoint</code>几何对象已存在作为一个节点，则会抛出错误。返回移动的描述。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_MoveIsoNode</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" id="idm24966"><h2>描述</h2><p>将拓扑中的孤立节点从一点移动到另一点。 如果新的<code class="varname">apoint</code>几何图形作为节点存在，则会抛出错误。</p><p>如果任何参数为null，<code class="varname">apoint</code>不是一个点，现有节点不是孤立的（是现有边的起点或终点），新节点位置与现有边相交（即使在端点处也相交），或新位置在不同的面（自3.2.0版本起），则会抛出异常。 </p><p>如果点几何的空间参考系统 (srid) 与拓扑不同，则会引发异常。</p><p class="availability">可用性: 2.0.0 </p><p>增强：3.2.0 确保节点不能移动到不同的面 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Net 例程: X.3.2</p></div><div class="refsection" id="idm24979"><h2>示例</h2><pre class="programlisting">-- Add an isolated node with no face  --
SELECT topology.ST_AddIsoNode('ma_topo',  NULL, ST_GeomFromText('POINT(227579 893916)', 26986) ) As nodeid;
 nodeid
--------
      7
-- Move the new node --
SELECT topology.ST_MoveIsoNode('ma_topo', 7,  ST_GeomFromText('POINT(227579.5 893916.5)', 26986) ) As descrip;
                      descrip
----------------------------------------------------
Isolated Node 7 moved to location 227579.5,893916.5</pre></div><div class="refsection" id="idm24982"><h2>相关信息</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a></p></div></div><div class="refentry" id="ST_NewEdgesSplit"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NewEdgesSplit — 通过沿现有边创建新节点、删除原始边并用两条新边替换它来分割边。 返回创建的连接新边的新节点的 id。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NewEdgesSplit</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" id="idm25004"><h2>描述</h2><p>通过在当前边上创建一个具有点位置<code class="varname">apoint</code>的新节点，删除原始边并用两个新边替换它，来分割具有边ID<code class="varname">anedge</code>的边。返回连接新边的新节点的ID。相应地更新所有已连接的边和关系。 </p><p>如果点几何对象的空间参考系统（SRID）与拓扑结构不同，<code class="varname">apoint</code>不是点几何对象，点为null，点已经存在作为一个节点，边与现有边不对应，或者点不在边上，则会抛出异常。</p><p class="availability">可用性：1.1 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Net 例程: X.3.8</p></div><div class="refsection" id="idm25016"><h2>示例</h2><pre class="programlisting">-- Add an edge  --
SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227575 893917,227592 893900)', 26986) ) As edgeid;
-- result-
edgeid
------
        2
-- Split the new edge --
SELECT topology.ST_NewEdgesSplit('ma_topo', 2,  ST_GeomFromText('POINT(227578.5 893913.5)', 26986) ) As newnodeid;
 newnodeid
---------
       6</pre></div><div class="refsection" id="idm25019"><h2>相关信息</h2><p>
				<a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
				<a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>
				<a class="xref" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a>
				<a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>
				</p></div></div><div class="refentry" id="ST_RemoveIsoNode"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemoveIsoNode — 删除孤立节点并返回操作描述。 如果节点不是孤立的（是边的开始或结束），则会引发异常。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_RemoveIsoNode</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var><code>)</code>;</p></div></div><div class="refsection" id="idm25041"><h2>描述</h2><p>移除一个孤立节点并返回操作的描述。如果节点不是孤立的（是边的起点或终点），则会抛出异常。</p><p class="availability">可用性：1.1 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo和 Topo-Net 3: 详细例程: X+1.3.3</p></div><div class="refsection" id="idm25049"><h2>示例</h2><pre class="programlisting">-- Remove an isolated node with no face  --
SELECT topology.ST_RemoveIsoNode('ma_topo',  7 ) As result;
         result
-------------------------
 Isolated node 7 removed
</pre></div><div class="refsection" id="idm25052"><h2>相关信息</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a></p></div></div><div class="refentry" id="ST_RemoveIsoEdge"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RemoveIsoEdge — 删除孤立的边并返回操作的描述。 如果边缘未被隔离，则会引发异常。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_RemoveIsoEdge</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var><code>)</code>;</p></div></div><div class="refsection" id="idm25071"><h2>描述</h2><p>移除一个孤立的边并返回操作的描述。如果边不是孤立的，将抛出异常。</p><p class="availability">可用性：1.1 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM: Topo-Geo和 Topo-Net 3: 详细例程: X+1.3.3</p></div><div class="refsection" id="idm25079"><h2>示例</h2><pre class="programlisting">-- Remove an isolated node with no face  --
SELECT topology.ST_RemoveIsoNode('ma_topo',  7 ) As result;
         result
-------------------------
 Isolated node 7 removed
</pre></div><div class="refsection" id="idm25082"><h2>相关信息</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a></p></div></div></section><section class="section" id="Topology_Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.7. 拓扑访问器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#GetEdgeByPoint">GetEdgeByPoint</a></span><span class="refpurpose"> — 查找与给定点相交的边的边 ID。</span></li><li><span class="refentrytitle"><a href="#GetFaceByPoint">GetFaceByPoint</a></span><span class="refpurpose"> — 查找与给定点相交的面。</span></li><li><span class="refentrytitle"><a href="#GetFaceContainingPoint">GetFaceContainingPoint</a></span><span class="refpurpose"> — 查找包含点的面。</span></li><li><span class="refentrytitle"><a href="#GetNodeByPoint">GetNodeByPoint</a></span><span class="refpurpose"> — 查找某个点位置处节点的节点 ID。</span></li><li><span class="refentrytitle"><a href="#GetTopologyID">GetTopologyID</a></span><span class="refpurpose"> — 返回topology.topology表中给定拓扑名称的拓扑的id。</span></li><li><span class="refentrytitle"><a href="#GetTopologySRID">GetTopologySRID</a></span><span class="refpurpose"> — 返回拓扑表中给定拓扑名称的拓扑的 SRID。</span></li><li><span class="refentrytitle"><a href="#GetTopologyName">GetTopologyName</a></span><span class="refpurpose"> — 返回给定拓扑 ID 的拓扑（架构）名称。</span></li><li><span class="refentrytitle"><a href="#ST_GetFaceEdges">ST_GetFaceEdges</a></span><span class="refpurpose"> — 返回一组有序的边，这些边界绑定了<code class="varname">aface</code>。</span></li><li><span class="refentrytitle"><a href="#ST_GetFaceGeometry">ST_GetFaceGeometry</a></span><span class="refpurpose"> — 返回给定拓扑中具有指定面 ID 的多边形。</span></li><li><span class="refentrytitle"><a href="#GetRingEdges">GetRingEdges</a></span><span class="refpurpose"> — 返回按顺序排列的边标识符集合，这些标识符是通过沿给定边的一侧行走时遇到的。 </span></li><li><span class="refentrytitle"><a href="#GetNodeEdges">GetNodeEdges</a></span><span class="refpurpose"> — 返回与给定节点相关的一组有序边。 </span></li></ul></div><div class="refentry" id="GetEdgeByPoint"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetEdgeByPoint — 查找与给定点相交的边的边 ID。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">GetEdgeByPoint</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tol1</var><code>)</code>;</p></div></div><div class="refsection" id="idm25106"><h2>描述</h2><p>检索与 Point 相交的边的 id。</p><p>给定拓扑、POINT 和容差，该函数返回一个整数 (id-edge)。 如果容差 = 0，则该点必须与边相交。</p><p>如果<code class="varname">apoint</code>与边不相交，返回0。</p><p>如果使用的容差（tolerance）大于0，并且在某点附近存在多条边，则会引发异常。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果tolerance = 0，则该函数使用 ST_Intersects，否则使用 ST_DWithin。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25117"><h2>示例</h2><p>这些示例使用我们在 <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>中创建的边</p><pre class="programlisting">SELECT topology.GetEdgeByPoint('ma_topo',geom, 1) As with1mtol, topology.GetEdgeByPoint('ma_topo',geom,0) As withnotol
FROM ST_GeomFromEWKT('SRID=26986;POINT(227622.6 893843)') As geom;
 with1mtol | withnotol
-----------+-----------
         2 |         0
</pre><pre class="programlisting">SELECT topology.GetEdgeByPoint('ma_topo',geom, 1) As nearnode
FROM ST_GeomFromEWKT('SRID=26986;POINT(227591.9 893900.4)') As geom;

-- get error --
ERROR:  Two or more edges found</pre></div><div class="refsection" id="idm25123"><h2>相关信息</h2><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a>, <a class="xref" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a> </p></div></div><div class="refentry" id="GetFaceByPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetFaceByPoint — 查找与给定点相交的面。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">GetFaceByPoint</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tol1</var><code>)</code>;</p></div></div><div class="refsection" id="idm25147"><h2>描述</h2><p>查找由点引用且具有给定容差的面。 </p><p>该函数将有效地查找与以该点为中心、以公差为半径的圆相交的面。 </p><p>如果没有面与给定查询位置相交，则返回 0（通用面）。 </p><p>如果多个面与查询位置相交，则会引发异常。 </p><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：3.2.0 更高效的实施和更清晰的契约，停止使用无效的拓扑。</p></div><div class="refsection" id="idm25155"><h2>示例</h2><pre class="programlisting">SELECT topology.GetFaceByPoint('ma_topo',geom, 10) As with1mtol, topology.GetFaceByPoint('ma_topo',geom,0) As withnotol
        FROM ST_GeomFromEWKT('POINT(234604.6 899382.0)') As geom;

         with1mtol | withnotol
        -----------+-----------
                         1 |         0</pre><pre class="programlisting">SELECT topology.GetFaceByPoint('ma_topo',geom, 1) As nearnode
        FROM ST_GeomFromEWKT('POINT(227591.9 893900.4)') As geom;

-- get error --
ERROR:  Two or more faces found</pre></div><div class="refsection" id="idm25159"><h2>相关信息</h2><p><a class="xref" href="#GetFaceContainingPoint" title="GetFaceContainingPoint">GetFaceContainingPoint</a>, <a class="xref" href="#AddFace" title="AddFace">AddFace</a>, <a class="xref" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a>, <a class="xref" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a> </p></div></div><div class="refentry" id="GetFaceContainingPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetFaceContainingPoint — 查找包含点的面。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">GetFaceContainingPoint</strong>(</code>text  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" id="idm25181"><h2>描述</h2><p>返回包含点的面的 id。</p><p>如果点落在面边界上，则会引发异常。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数依赖于有效的拓扑，使用边链接和面标记。</p></td></tr></table></div><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm25188"><h2>相关信息</h2><p>
<a class="xref" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a>
</p></div></div><div class="refentry" id="GetNodeByPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetNodeByPoint — 查找某个点位置处节点的节点 ID。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">GetNodeByPoint</strong>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tol1</var><code>)</code>;</p></div></div><div class="refsection" id="idm25210"><h2>描述</h2><p>检索某个点位置处的节点 id。</p><p>给定拓扑（ topology）、POINT 和容差（tolerance），该函数返回一个整数（id-node）。 如果公差 = 0 表示精确交集，否则从区间中检索节点。</p><p>如果<code class="varname">apoint</code>不与节点相交，则返回 0（零）。</p><p>如果设置容差（tolerance）大于0，并且在某点附近存在多个节点（node），那么可能会引发异常。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果tolerance = 0，则该函数使用 ST_Intersects，否则使用 ST_DWithin。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25221"><h2>示例</h2><p>这些示例使用我们在 <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>中创建的边</p><pre class="programlisting">SELECT topology.GetNodeByPoint('ma_topo',geom, 1) As nearnode
 FROM ST_GeomFromEWKT('SRID=26986;POINT(227591.9 893900.4)') As geom;
  nearnode
----------
        2
 </pre><pre class="programlisting">SELECT topology.GetNodeByPoint('ma_topo',geom, 1000) As too_much_tolerance
 FROM ST_GeomFromEWKT('SRID=26986;POINT(227591.9 893900.4)') As geom;

 ----get error--
 ERROR:  Two or more nodes found
 </pre></div><div class="refsection" id="idm25227"><h2>相关信息</h2><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a>, <a class="xref" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a> </p></div></div><div class="refentry" id="GetTopologyID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetTopologyID — 返回topology.topology表中给定拓扑名称的拓扑的id。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">GetTopologyID</strong>(</code>varchar <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" id="idm25245"><h2>描述</h2><p>返回topology.topology表中给定拓扑名称的拓扑的id。</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm25249"><h2>示例</h2><pre class="programlisting">SELECT topology.GetTopologyID('ma_topo') As topo_id;
 topo_id
---------
       1</pre></div><div class="refsection" id="idm25252"><h2>相关信息</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>, <a class="xref" href="#GetTopologyName" title="GetTopologyName">GetTopologyName</a>, <a class="xref" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a> </p></div></div><div class="refentry" id="GetTopologySRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetTopologySRID — 返回拓扑表中给定拓扑名称的拓扑的 SRID。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">GetTopologyID</strong>(</code>varchar <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" id="idm25271"><h2>描述</h2><p>在给定拓扑名称的情况下，返回topology.topology 表中拓扑的空间参考ID。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25275"><h2>示例</h2><pre class="programlisting">SELECT topology.GetTopologySRID('ma_topo') As SRID;
 SRID
-------
  4326</pre></div><div class="refsection" id="idm25278"><h2>相关信息</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>, <a class="xref" href="#GetTopologyName" title="GetTopologyName">GetTopologyName</a>, <a class="xref" href="#GetTopologyID" title="GetTopologyID">GetTopologyID</a> </p></div></div><div class="refentry" id="GetTopologyName"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetTopologyName — 返回给定拓扑 ID 的拓扑（架构）名称。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">varchar <strong class="fsfunc">GetTopologyName</strong>(</code>integer <var class="pdparam">topology_id</var><code>)</code>;</p></div></div><div class="refsection" id="idm25297"><h2>描述</h2><p>在给定拓扑的拓扑 ID 的情况下，从 topology.topology 表中返回拓扑的拓扑名称（架构）。</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm25301"><h2>示例</h2><pre class="programlisting">SELECT topology.GetTopologyName(1) As topo_name;
 topo_name
-----------
 ma_topo</pre></div><div class="refsection" id="idm25304"><h2>相关信息</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>, <a class="xref" href="#GetTopologyID" title="GetTopologyID">GetTopologyID</a>, <a class="xref" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a> </p></div></div><div class="refentry" id="ST_GetFaceEdges"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GetFaceEdges — 返回一组有序的边，这些边界绑定了<code class="varname">aface</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">getfaceedges_returntype <strong class="fsfunc">ST_GetFaceEdges</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aface</var><code>)</code>;</p></div></div><div class="refsection" id="idm25327"><h2>描述</h2><p>返回一组有序的边，这些边界绑定了<code class="varname">aface</code>。每个输出包括一个序列号和边ID。序列号从1开始。</p><p>每个环边的枚举从具有最小标识符的边开始。 边的顺序遵循左手定则（合界面位于每个有向边的左侧）。 </p><p class="availability">可用性：2.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3 Topo-Geo 和 Topo-Net 3: 详细例程: X.3.5</p></div><div class="refsection" id="idm25337"><h2>示例</h2><pre class="programlisting">-- Returns the edges bounding face 1
SELECT (topology.ST_GetFaceEdges('tt', 1)).*;
-- result --
 sequence | edge
----------+------
        1 |   -4
        2 |    5
        3 |    7
        4 |   -6
        5 |    1
        6 |    2
        7 |    3
(7 rows)
</pre><pre class="programlisting">-- Returns the sequence, edge id
-- and geometry of the edges that bound face 1
-- If you just need geom and seq, can use ST_GetFaceGeometry
SELECT t.seq, t.edge, geom
FROM topology.ST_GetFaceEdges('tt',1) As t(seq,edge)
        INNER JOIN tt.edge AS e ON abs(t.edge) = e.edge_id;
</pre></div><div class="refsection" id="idm25341"><h2>相关信息</h2><p><a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>, <a class="xref" href="#AddFace" title="AddFace">AddFace</a>, <a class="xref" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a> </p></div></div><div class="refentry" id="ST_GetFaceGeometry"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GetFaceGeometry — 返回给定拓扑中具有指定面 ID 的多边形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_GetFaceGeometry</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aface</var><code>)</code>;</p></div></div><div class="refsection" id="idm25362"><h2>描述</h2><p>返回给定拓扑中具有指定面 ID 的多边形。 从构成面的边构建多边形。</p><p class="availability">可用性：1.1 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3 Topo-Geo 和 Topo-Net 3: 详细例程: X.3.16</p></div><div class="refsection" id="idm25370"><h2>示例</h2><pre class="programlisting">-- Returns the wkt of the polygon added with AddFace
SELECT ST_AsText(topology.ST_GetFaceGeometry('ma_topo', 1)) As facegeomwkt;
-- result --
               facegeomwkt

--------------------------------------------------------------------------------
 POLYGON((234776.9 899563.7,234896.5 899456.7,234914 899436.4,234946.6 899356.9,
234872.5 899328.7,234891 899285.4,234992.5 899145,234890.6 899069,
234755.2 899255.4,234612.7 899379.4,234776.9 899563.7))
</pre></div><div class="refsection" id="idm25373"><h2>相关信息</h2><p><a class="xref" href="#AddFace" title="AddFace">AddFace</a></p></div></div><div class="refentry" id="GetRingEdges"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetRingEdges — 返回按顺序排列的边标识符集合，这些标识符是通过沿给定边的一侧行走时遇到的。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">getfaceedges_returntype <strong class="fsfunc">GetRingEdges</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aring</var>, integer  <var class="pdparam">max_edges=null</var><code>)</code>;</p></div></div><div class="refsection" id="idm25395"><h2>描述</h2><p>返回在给定边上行走时遇到的有符号边标识符的有序集合。 每个输出由一个序列和一个带符号的边 id 组成。 序列号从值 1 开始。 </p><p>如果传递正边缘 id，则行走从相应边缘的左侧开始，并遵循边缘方向。 如果您传递负边缘 ID，则行走从其右侧开始并向后走。 </p><p>如果<code class="varname"> max_edges</code> 不为 null，则该函数返回的记录数不超过这些记录。 在处理可能无效的拓扑时，这是一个安全参数。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数使用边环链接元数据。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm25404"><h2>相关信息</h2><p><a class="xref" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a>, <a class="xref" href="#GetNodeEdges" title="GetNodeEdges">GetNodeEdges</a> </p></div></div><div class="refentry" id="GetNodeEdges"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetNodeEdges — 返回与给定节点相关的一组有序边。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">getfaceedges_returntype <strong class="fsfunc">GetNodeEdges</strong>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var><code>)</code>;</p></div></div><div class="refsection" id="idm25424"><h2>描述</h2><p>返回与给定节点相关的一组有序边。 每个输出由一个序列和一个带符号的边 id 组成。 序列号从值 1 开始。上升沿从给定节点开始。 负边沿结束于给定节点。 封闭的边将出现两次（都有两个标志）。 顺序是从北行开始顺时针方向。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数计算排序而不是从元数据导出，因此可用于构建边环链接。 </p></td></tr></table></div><p class="availability">可用性：2.0 </p></div><div class="refsection" id="idm25430"><h2>相关信息</h2><p><a class="xref" href="#getfaceedges_returntype" title="getfaceedges_returntype">getfaceedges_returntype</a>, <a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>, <a class="xref" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> </p></div></div></section><section class="section" id="Topology_Processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.8. 拓扑处理</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节介绍以非标准方式处理拓扑的函数。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#TopologyPolygonize">Polygonize</a></span><span class="refpurpose"> — 查找并注册由拓扑边定义的所有面。</span></li><li><span class="refentrytitle"><a href="#AddNode">AddNode</a></span><span class="refpurpose"> — 将点节点添加到指定拓扑模式的节点表中，并返回新节点的nodeid。 如果点已经作为节点存在，则返回现有的nodeid。</span></li><li><span class="refentrytitle"><a href="#AddEdge">AddEdge</a></span><span class="refpurpose"> — 使用指定的线串几何将线串边添加到边表，并将关联的起点和终点添加到指定拓扑方案的点节点表，并返回新（或现有）边的edgeid。</span></li><li><span class="refentrytitle"><a href="#AddFace">AddFace</a></span><span class="refpurpose"> — 将面基元注册到拓扑并获取其标识符。</span></li><li><span class="refentrytitle"><a href="#TP_ST_Simplify">ST_Simplify</a></span><span class="refpurpose"> — 使用 Douglas-Peucker 算法返回给定 TopoGeometry 的“简化”几何版本。</span></li><li><span class="refentrytitle"><a href="#TP_RemoveUnusedPrimitives">RemoveUnusedPrimitives</a></span><span class="refpurpose"> — 删除定义现有 TopoGeometry 对象不需要的拓扑基元。</span></li></ul></div><div class="refentry" id="TopologyPolygonize"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Polygonize — 查找并注册由拓扑边定义的所有面。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Polygonize</strong>(</code>varchar  <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" id="idm25453"><h2>描述</h2><p>注册可以构建拓扑边基元的所有面。</p><p>假设目标拓扑不包含自相交边。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>已经识别出已知的面，因此在同一拓扑上多次调用 Polygonize 是安全的。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不使用也不设置边表的 next_left_edge 和 next_right_edge 字段。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25462"><h2>相关信息</h2><p><a class="xref" href="#AddFace" title="AddFace">AddFace</a>, <a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a></p></div></div><div class="refentry" id="AddNode"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddNode — 将点节点添加到指定拓扑模式的节点表中，并返回新节点的nodeid。 如果点已经作为节点存在，则返回现有的nodeid。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">AddNode</strong>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">apoint</var>, boolean  <var class="pdparam">allowEdgeSplitting=false</var>, boolean  <var class="pdparam">computeContainingFace=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm25488"><h2>描述</h2><p>将点节点添加到指定拓扑方案的节点表中。 <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>函数在调用时会自动添加边的起点和终点，因此无需显式添加边的节点。 </p><p>如果发现任何穿过节点的边，则会引发异常或分割边，具体取决于 <code class="varname">allowedEdgeSplitting</code> 参数值。 </p><p>如果<code class="varname">computeContainingFace</code>为真，新添加的节点将计算出正确的包含面。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname">apoint</code>几何图形已作为节点存在，则不会添加该节点，但会返回现有的nodeid。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25500"><h2>示例</h2><pre class="programlisting">SELECT topology.AddNode('ma_topo', ST_GeomFromText('POINT(227641.6 893816.5)', 26986) ) As nodeid;
-- result --
nodeid
--------
 4

</pre></div><div class="refsection" id="idm25503"><h2>相关信息</h2><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a></p></div></div><div class="refentry" id="AddEdge"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddEdge — 使用指定的线串几何将线串边添加到边表，并将关联的起点和终点添加到指定拓扑方案的点节点表，并返回新（或现有）边的edgeid。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">AddEdge</strong>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">aline</var><code>)</code>;</p></div></div><div class="refsection" id="idm25523"><h2>描述</h2><p>使用指定的线串几何图形将边添加到边表，并将关联节点添加到指定<code class="varname">toponame</code>模式的节点表，并返回新记录或现有记录的edgeid。 新添加的边两侧都有“宇宙”面，并与其自身相连。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname">aline</code>几何图形与现有线串边交叉、重叠、包含或被现有线串边包含，则会引发错误并且不会添加边。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="varname">aline </code>的几何形状必须具有与为拓扑定义的相同的 <code class="varname">srid</code>，否则将引发无效的空间参考系统错误。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a> is deprecated as of 3.5.0. Use <a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a> instead.</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25540"><h2>示例</h2><pre class="programlisting">SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227575.8 893917.2,227591.9 893900.4)', 26986) ) As edgeid;
-- result-
edgeid
--------
 1

SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227591.9 893900.4,227622.6 893844.2,227641.6 893816.5,
 227704.5 893778.5)', 26986) ) As edgeid;
-- result --
edgeid
--------
 2

 SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227591.2 893900, 227591.9 893900.4,
  227704.5 893778.5)', 26986) ) As edgeid;
 -- gives error --
 ERROR:  Edge intersects (not on endpoints) with existing edge 1
</pre></div><div class="refsection" id="idm25543"><h2>相关信息</h2><p><a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a> </p></div></div><div class="refentry" id="AddFace"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddFace — 将面基元注册到拓扑并获取其标识符。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">AddFace</strong>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">apolygon</var>, boolean  <var class="pdparam">force_new=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm25567"><h2>描述</h2><p>将面基元注册到拓扑并获取其标识符。 </p><p>对于新添加的面，形成其边界的边以及面中包含的边将更新为在 left_face 和 right_face 字段中具有正确的值。 面中包含的孤立节点也将更新为具有正确的 contains_face 字段值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不使用也不设置边表的 next_left_edge 和 next_right_edge 字段。 </p></td></tr></table></div><p>假定目标拓扑有效（不包含自相交边）。 如果出现以下情况，则会引发异常： 多边形边界未完全由现有边定义，或者多边形与现有面重叠。</p><p>如果<code class="varname">多边形</code>几何体已经作为面存在，则： 如果<code class="varname">force_new</code>为假（默认），则返回现有面的面id； 如果<code class="varname">force_new</code>为true，新的id将被分配给新产生的面。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对现有面执行新配准（force_new=true）时，不会采取任何措施来解决边、节点和关系表中对现有面的悬挂引用，也不会更新现有面记录的MBR字段。这由调用者自行处理。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="varname">多边形</code>几何图形必须具有与为拓扑定义的相同的 <code class="varname">srid</code>，否则将引发无效的空间参考系统错误。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25585"><h2>示例</h2><pre class="programlisting">

-- first add the edges we use generate_series as an iterator (the below
-- will only work for polygons with &lt; 10000 points because of our max in gs)
SELECT topology.AddEdge('ma_topo', ST_MakeLine(ST_PointN(geom,i), ST_PointN(geom, i + 1) )) As edgeid
    FROM (SELECT  ST_NPoints(geom) AS npt, geom
            FROM
                (SELECT ST_Boundary(ST_GeomFromText('POLYGON((234896.5 899456.7,234914 899436.4,234946.6 899356.9,234872.5 899328.7,
                234891 899285.4,234992.5 899145, 234890.6 899069,234755.2 899255.4,
                234612.7 899379.4,234776.9 899563.7,234896.5 899456.7))', 26986) )  As geom
            )  As geoms) As facen CROSS JOIN generate_series(1,10000) As i
         WHERE i &lt; npt;
-- result --
 edgeid
--------
      3
      4
      5
      6
      7
      8
      9
     10
     11
     12
(10 rows)
-- then add the face -

SELECT topology.AddFace('ma_topo',
    ST_GeomFromText('POLYGON((234896.5 899456.7,234914 899436.4,234946.6 899356.9,234872.5 899328.7,
    234891 899285.4,234992.5 899145, 234890.6 899069,234755.2 899255.4,
    234612.7 899379.4,234776.9 899563.7,234896.5 899456.7))', 26986) ) As faceid;
-- result --
faceid
--------
 1

</pre></div><div class="refsection" id="idm25588"><h2>相关信息</h2><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a></p></div></div><div class="refentry" id="TP_ST_Simplify"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Simplify — 使用 Douglas-Peucker 算法返回给定 TopoGeometry 的“简化”几何版本。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Simplify</strong>(</code>TopoGeometry <var class="pdparam">tg</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm25609"><h2>描述</h2><p>在每个组件边上使用 Douglas-Peucker 算法返回给定 TopoGeometry 的“简化”几何版本。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的几何图形可能不简单或无效。</p><p>拆分组件边缘可能有助于保持简单性/有效性。</p></td></tr></table></div><p>这个函数是由 GEOS 模块执行的。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm25617"><h2>相关信息</h2><p>几何 <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a></p></div></div><div class="refentry" id="TP_RemoveUnusedPrimitives"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>RemoveUnusedPrimitives — 删除定义现有 TopoGeometry 对象不需要的拓扑基元。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">int <strong class="fsfunc">RemoveUnusedPrimitives</strong>(</code>text <var class="pdparam">topology_name</var>, geometry <var class="pdparam">bbox</var><code>)</code>;</p></div></div><div class="refsection" id="idm25639"><h2>描述</h2><p>查找表示现有 TopoGeometry 对象并不严格需要的所有图元（节点、边、面）并将其删除，从而保持拓扑有效性（边链接、面标记）和 TopoGeometry 空间占用。 </p><p>不会创建新的图元标识符，而是扩展现有图元以包括合并的面（在删除边时）或修复的边（在删除节点时）。 </p><p class="availability">可用性： 3.3.0</p></div><div class="refsection" id="idm25644"><h2>相关信息</h2><p><a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>, <a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a> </p></div></div></section><section class="section" id="TopoGeometry_Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.9. 拓扑几何构造函数</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节介绍用于创建新拓扑几何的拓扑函数。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#CreateTopoGeom">CreateTopoGeom</a></span><span class="refpurpose"> — 从拓扑元素数组创建一个新的拓扑几何对象 - tg_type: 1:[多]点, 2:[多]线, 3:[多]多边形, 4:集合</span></li><li><span class="refentrytitle"><a href="#toTopoGeom">toTopoGeom</a></span><span class="refpurpose"> — 将简单几何图形转换为拓扑几何图形。</span></li><li><span class="refentrytitle"><a href="#TopoElementArray_Agg">TopoElementArray_Agg</a></span><span class="refpurpose"> — 返回一组 element_id、类型数组 (topoelements) 的 <code class="varname">topoelementarray</code>。</span></li><li><span class="refentrytitle"><a href="#TopoElement">TopoElement</a></span><span class="refpurpose"> — 将拓扑几何转换为拓扑元素。</span></li></ul></div><div class="refentry" id="CreateTopoGeom"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>CreateTopoGeom — 从拓扑元素数组创建一个新的拓扑几何对象 - tg_type: 1:[多]点, 2:[多]线, 3:[多]多边形, 4:集合</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <strong class="fsfunc">CreateTopoGeom</strong>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">tg_type</var>, integer <var class="pdparam">layer_id</var>, topoelementarray <var class="pdparam">tg_objs</var><code>)</code>;</p><p><code class="funcdef">topogeometry <strong class="fsfunc">CreateTopoGeom</strong>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">tg_type</var>, integer <var class="pdparam">layer_id</var><code>)</code>;</p></div></div><div class="refsection" id="idm25687"><h2>描述</h2><p>为由<code class="varname">layer_id</code>表示的图层创建一个拓扑几何对象，并将其注册到<code class="varname">拓扑名称</code>架构的关系表中。</p><p><code class="varname">tg_type</code> 是一个整数：1：[多]点（点）、2：[多]线（线性）、3：[多]多边形（面）、4：集合。 <code class="varname">layer_id</code> 是topology.layer 表中的层id。</p><p>点状层由一组节点形成，线性层由一组边形成，区域层由一组面形成，集合可以由节点、边和面的混合形成。</p><p>省略组件数组会生成一个空的 TopoGeometry 对象。</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm25698"><h2>示例：从现有边形成</h2><p>在"ri_topo"模式中为"layer 2"（我们的"ri_roads"）创建一个拓扑几何对象，类型为(2) LINE，用于第一条边（我们在<code class="varname">ST_CreateTopoGeo</code>中加载的边）。</p><pre class="programlisting">INSERT INTO ri.ri_roads(road_name, topo) VALUES('Unknown', topology.CreateTopoGeom('ri_topo',2,2,'{{1,2}}'::topology.topoelementarray);</pre></div><div class="refsection" id="idm25703"><h2>示例：将面状几何对象转换为最佳猜测的拓扑几何对象</h2><p>假设我们有应该由面的集合形成的几何形状。 例如，我们有块组表，并且想知道每个块组的拓扑几何形状。 如果我们的数据完全一致，我们可以这样做：</p><pre class="programlisting">-- create our topo geometry column --
SELECT topology.AddTopoGeometryColumn(
        'topo_boston',
        'boston', 'blockgroups', 'topo', 'POLYGON');

-- addtopgeometrycolumn --
1

-- update our column assuming
-- everything is perfectly aligned with our edges
UPDATE boston.blockgroups AS bg
        SET topo = topology.CreateTopoGeom('topo_boston'
        ,3,1
        , foo.bfaces)
FROM (SELECT b.gid,  topology.TopoElementArray_Agg(ARRAY[f.face_id,3]) As bfaces
        FROM boston.blockgroups As b
            INNER JOIN topo_boston.face As f ON b.geom &amp;&amp; f.mbr
        WHERE ST_Covers(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id))
            GROUP BY b.gid) As foo
WHERE foo.gid = bg.gid;
</pre><pre class="programlisting">--the world is rarely perfect allow for some error
--count the face if 50% of it falls
-- within what we think is our blockgroup boundary
UPDATE boston.blockgroups AS bg
        SET topo = topology.CreateTopoGeom('topo_boston'
        ,3,1
        , foo.bfaces)
FROM (SELECT b.gid,  topology.TopoElementArray_Agg(ARRAY[f.face_id,3]) As bfaces
        FROM boston.blockgroups As b
            INNER JOIN topo_boston.face As f ON b.geom &amp;&amp; f.mbr
        WHERE ST_Covers(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id))
        OR
 (  ST_Intersects(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id))
            AND ST_Area(ST_Intersection(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id) ) ) &gt;
                ST_Area(topology.ST_GetFaceGeometry('topo_boston', f.face_id))*0.5
                )
            GROUP BY b.gid) As foo
WHERE foo.gid = bg.gid;

-- and if we wanted to convert our topogeometry back
-- to a denormalized geometry aligned with our faces and edges
-- cast the topo to a geometry
-- The really cool thing is my new geometries
-- are now aligned with my tiger street centerlines
UPDATE boston.blockgroups SET new_geom = topo::geometry;
</pre></div><div class="refsection" id="idm25708"><h2>相关信息</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>, <a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> <a class="xref" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a>, <a class="xref" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a>, <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>, <a class="xref" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a> </p></div></div><div class="refentry" id="toTopoGeom"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>toTopoGeom — 将简单几何图形转换为拓扑几何图形。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <strong class="fsfunc">toTopoGeom</strong>(</code>geometry  <var class="pdparam">geom</var>, varchar  <var class="pdparam">toponame</var>, integer <var class="pdparam">layer_id</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p><p><code class="funcdef">topogeometry <strong class="fsfunc">toTopoGeom</strong>(</code>geometry  <var class="pdparam">geom</var>, topogeometry  <var class="pdparam">topogeom</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" id="idm25750"><h2>描述</h2><p>将简单的几何图形转换为拓扑几何图形<a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>。 </p><p>表示输入几何所需的拓扑基元将被添加到底层拓扑中，可能会拆分现有拓扑，并且它们将与<code class="varname">关系</code>表中的输出 TopoGeometry 相关联。 </p><p>现有的 TopoGeometry 对象（<code class="varname">拓扑几何</code>可能除外，如果给定的话）将保留其形状。 </p><p>当给出<code class="varname">公差</code>时，它将用于将输入几何体捕捉到现有图元。 </p><p>在第一种形式中，将为给定拓扑 (<code class="varname">toponame</code>) 的给定图层 (<code class="varname">layer_id</code>) 创建新的 TopoGeometry。 </p><p>在第二种形式中，转换产生的图元将被添加到预先存在的 TopoGeometry (<code class="varname">topogeom</code>) 中，可能会为其最终形状添加空间。 要让新形状完全取代旧形状，请参阅<a class="xref" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a>。 </p><p class="availability">可用性：2.0</p><p class="enhanced">增强：2.1.0添加了采用现有TopoGeometry的版本。</p></div><div class="refsection" id="idm25768"><h2>示例</h2><p>这是一个完整的独立工作流程</p><pre class="programlisting">-- do this if you don't have a topology setup already
-- creates topology not allowing any tolerance
SELECT topology.CreateTopology('topo_boston_test', 2249);
-- create a new table
CREATE TABLE nei_topo(gid serial primary key, nei varchar(30));
--add a topogeometry column to it
SELECT topology.AddTopoGeometryColumn('topo_boston_test', 'public', 'nei_topo', 'topo', 'MULTIPOLYGON') As new_layer_id;
new_layer_id
-----------
1

--use new layer id in populating the new topogeometry column
-- we add the topogeoms to the new layer with 0 tolerance
INSERT INTO nei_topo(nei, topo)
SELECT nei,  topology.toTopoGeom(geom, 'topo_boston_test', 1)
FROM neighborhoods
WHERE gid BETWEEN 1 and 15;

--use to verify what has happened --
SELECT * FROM
    topology.TopologySummary('topo_boston_test');

-- summary--
Topology topo_boston_test (5), SRID 2249, precision 0
61 nodes, 87 edges, 35 faces, 15 topogeoms in 1 layers
Layer 1, type Polygonal (3), 15 topogeoms
 Deploy: public.nei_topo.topo</pre><pre class="programlisting">

-- Shrink all TopoGeometry polygons by 10 meters
UPDATE nei_topo SET topo = ST_Buffer(clearTopoGeom(topo), -10);

-- Get the no-one-lands left by the above operation
-- I think GRASS calls this "polygon0 layer"
SELECT ST_GetFaceGeometry('topo_boston_test', f.face_id)
  FROM topo_boston_test.face f
  WHERE f.face_id 
&gt; 0 -- don't consider the universe face
  AND NOT EXISTS ( -- check that no TopoGeometry references the face
    SELECT * FROM topo_boston_test.relation
    WHERE layer_id = 1 AND element_id = f.face_id
  );
        </pre></div><div class="refsection" id="idm25773"><h2>相关信息</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>, <a class="xref" href="#TopologySummary" title="TopologySummary">TopologySummary</a>, <a class="xref" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a> </p></div></div><div class="refentry" id="TopoElementArray_Agg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoElementArray_Agg — 返回一组 element_id、类型数组 (topoelements) 的 <code class="varname">topoelementarray</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topoelementarray <strong class="fsfunc">TopoElementArray_Agg</strong>(</code>topoelement set <var class="pdparam">tefield</var><code>)</code>;</p></div></div><div class="refsection" id="idm25794"><h2>描述</h2><p>用于从一组 <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>创建<a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm25800"><h2>示例</h2><pre class="programlisting">SELECT topology.TopoElementArray_Agg(ARRAY[e,t]) As tea
  FROM generate_series(1,3) As e CROSS JOIN generate_series(1,4) As t;
  tea
--------------------------------------------------------------------------
{{1,1},{1,2},{1,3},{1,4},{2,1},{2,2},{2,3},{2,4},{3,1},{3,2},{3,3},{3,4}}</pre></div><div class="refsection" id="idm25803"><h2>相关信息</h2><p><a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>, <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a></p></div></div><div class="refentry" id="TopoElement"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoElement — 将拓扑几何转换为拓扑元素。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topoelement <strong class="fsfunc">TopoElement</strong>(</code>topogeometry  <var class="pdparam">topo</var><code>)</code>;</p></div></div><div class="refsection" id="idm25820"><h2>描述</h2><p>将 <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>转换为<a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>。</p><p class="availability">可用性：3.4.0</p></div><div class="refsection" id="idm25826"><h2>示例</h2><p>这是一个完整的独立工作流程</p><pre class="programlisting">-- do this if you don't have a topology setup already
-- Creates topology not allowing any tolerance
SELECT TopoElement(topo)
FROM neighborhoods;</pre><pre class="programlisting">-- using as cast
SELECT topology.TopoElementArray_Agg(topo::topoelement)
FROM neighborhoods
GROUP BY city;</pre></div><div class="refsection" id="idm25831"><h2>相关信息</h2><p><a class="xref" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a>, <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>, <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a></p></div></div></section><section class="section" id="TopoGeometry_Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.10. 拓扑几何编辑器</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节介绍用于编辑现有拓扑几何的拓扑函数。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#clearTopoGeom">clearTopoGeom</a></span><span class="refpurpose"> — 清除拓扑几何的内容。</span></li><li><span class="refentrytitle"><a href="#TopoGeom_addElement">TopoGeom_addElement</a></span><span class="refpurpose"> — 将元素添加到 TopoGeometry 的定义中。</span></li><li><span class="refentrytitle"><a href="#TopoGeom_remElement">TopoGeom_remElement</a></span><span class="refpurpose"> — 从 TopoGeometry 的定义中删除元素。</span></li><li><span class="refentrytitle"><a href="#TopoGeom_addTopoGeom">TopoGeom_addTopoGeom</a></span><span class="refpurpose"> — 将一个 TopoGeometry 的元素添加到另一个 TopoGeometry 的定义中。</span></li><li><span class="refentrytitle"><a href="#toTopoGeom_editor_proxy">toTopoGeom</a></span><span class="refpurpose"> — 将几何形状添加到现有拓扑几何图形中。</span></li></ul></div><div class="refentry" id="clearTopoGeom"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>clearTopoGeom — 清除拓扑几何的内容。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <strong class="fsfunc">clearTopoGeom</strong>(</code>topogeometry  <var class="pdparam">topogeom</var><code>)</code>;</p></div></div><div class="refsection" id="idm25854"><h2>描述</h2><p>清除 <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>的内容，将其变为空内容。 主要与<a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> 结合使用，以替换现有对象的形状以及更高层次级别中的任何依赖对象。 </p><p class="availability">可用性：2.1</p></div><div class="refsection" id="idm25860"><h2>示例</h2><pre class="programlisting">-- Shrink all TopoGeometry polygons by 10 meters
UPDATE nei_topo SET topo = ST_Buffer(clearTopoGeom(topo), -10);
                                </pre></div><div class="refsection" id="idm25863"><h2>相关信息</h2><p>
<a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>
        </p></div></div><div class="refentry" id="TopoGeom_addElement"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeom_addElement — 将元素添加到 TopoGeometry 的定义中。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <strong class="fsfunc">TopoGeom_addElement</strong>(</code>topogeometry  <var class="pdparam">tg</var>, topoelement  <var class="pdparam">el</var><code>)</code>;</p></div></div><div class="refsection" id="idm25882"><h2>描述</h2><p>将 <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a> 添加到 TopoGeometry 对象的定义中。 如果元素已经是定义的一部分，则不会出错。 </p><p class="availability">可用性：2.3</p></div><div class="refsection" id="idm25887"><h2>示例</h2><pre class="programlisting">-- Add edge 5 to TopoGeometry tg
UPDATE mylayer SET tg = TopoGeom_addElement(tg, '{5,2}');
                                </pre></div><div class="refsection" id="idm25890"><h2>相关信息</h2><p><a class="xref" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a> </p></div></div><div class="refentry" id="TopoGeom_remElement"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeom_remElement — 从 TopoGeometry 的定义中删除元素。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <strong class="fsfunc">TopoGeom_remElement</strong>(</code>topogeometry  <var class="pdparam">tg</var>, topoelement  <var class="pdparam">el</var><code>)</code>;</p></div></div><div class="refsection" id="idm25910"><h2>描述</h2><p>从 TopoGeometry 对象的定义中删除 <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>。 </p><p class="availability">可用性：2.3</p></div><div class="refsection" id="idm25915"><h2>示例</h2><pre class="programlisting">-- Remove face 43 from TopoGeometry tg
UPDATE mylayer SET tg = TopoGeom_remElement(tg, '{43,3}');
                                </pre></div><div class="refsection" id="idm25918"><h2>相关信息</h2><p><a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a> </p></div></div><div class="refentry" id="TopoGeom_addTopoGeom"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>TopoGeom_addTopoGeom — 将一个 TopoGeometry 的元素添加到另一个 TopoGeometry 的定义中。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <strong class="fsfunc">TopoGeom_addTopoGeom</strong>(</code>topogeometry  <var class="pdparam">tgt</var>, topogeometry  <var class="pdparam">src</var><code>)</code>;</p></div></div><div class="refsection" id="idm25938"><h2>描述</h2><p>将一个<a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a> 的元素添加到另一个 TopoGeometry 的定义中，如果需要保存源对象中的所有元素，可能会将其缓存类型（类型属性）更改为集合。 </p><p>两个 TopoGeometry 对象需要针对“相同”拓扑进行定义，并且如果按层次结构定义，则需要由同一子层的元素组成。 </p><p class="availability">可用性：3.2</p></div><div class="refsection" id="idm25944"><h2>示例</h2><pre class="programlisting">-- Set an "overall" TopoGeometry value to be composed by all
-- elements of specific TopoGeometry values
UPDATE mylayer SET tg_overall = TopoGeom_addTopogeom(
    TopoGeom_addTopoGeom(
        clearTopoGeom(tg_overall),
        tg_specific1
    ),
    tg_specific2
);
                                </pre></div><div class="refsection" id="idm25947"><h2>相关信息</h2><p><a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>, <a class="xref" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a> </p></div></div><div class="refentry" id="toTopoGeom_editor_proxy"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>toTopoGeom — 将几何形状添加到现有拓扑几何图形中。</p></div><div class="refsection" id="idm25957"><h2>描述</h2><p>参考<a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>。 </p></div></div></section><section class="section" id="TopoGeom_Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.11. 拓扑几何访问器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#GetTopoGeomElementArray">GetTopoGeomElementArray</a></span><span class="refpurpose"> — 返回一个<code class="varname">topoelementarray</code>（包含拓扑元素的数组），其中包含给定TopoGeometry的拓扑元素和类型（原始元素）。</span></li><li><span class="refentrytitle"><a href="#GetTopoGeomElements">GetTopoGeomElements</a></span><span class="refpurpose"> — 返回一组<code class="varname"> topoelement</code> 对象，其中包含给定 TopoGeometry（原始元素）的拓扑 element_id、element_type。</span></li><li><span class="refentrytitle"><a href="#TG_ST_SRID">ST_SRID</a></span><span class="refpurpose"> — 返回拓扑几何的空间参考标识符。</span></li></ul></div><div class="refentry" id="GetTopoGeomElementArray"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetTopoGeomElementArray — 返回一个<code class="varname">topoelementarray</code>（包含拓扑元素的数组），其中包含给定TopoGeometry的拓扑元素和类型（原始元素）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topoelementarray <strong class="fsfunc">GetTopoGeomElementArray</strong>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">layer_id</var>, integer <var class="pdparam">tg_id</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">topoelementarray <strong class="fsfunc">GetTopoGeomElementArray</strong>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p></div></div><div class="refsection" id="idm25989"><h2>描述</h2><p>返回一个<a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>，其中包含给定 TopoGeometry（原始元素）的拓扑元素和类型。 这与 GetTopoGeomElements 类似，只不过它将元素作为数组而不是数据集返回。</p><p>tg_id 是topology.layer 表中<code class="varname">layer_id </code>表示的图层中拓扑中的拓扑几何对象的拓扑几何ID。</p><p class="availability">可用性：1.1</p></div><div class="refsection" id="idm25996"><h2>示例</h2><p/></div><div class="refsection" id="idm25999"><h2>相关信息</h2><p><a class="xref" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>, <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a></p></div></div><div class="refentry" id="GetTopoGeomElements"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>GetTopoGeomElements — 返回一组<code class="varname"> topoelement</code> 对象，其中包含给定 TopoGeometry（原始元素）的拓扑 element_id、element_type。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof topoelement <strong class="fsfunc">GetTopoGeomElements</strong>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">layer_id</var>, integer <var class="pdparam">tg_id</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">setof topoelement <strong class="fsfunc">GetTopoGeomElements</strong>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p></div></div><div class="refsection" id="idm26030"><h2>描述</h2><p>返回一组与基本拓扑元素<a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>（1：节点，2：边，3：面）对应的element_id、element_type（topoelements），这些元素组成了<code class="varname">toponame</code>模式中的给定拓扑几何对象。</p><p>tg_id 是topology.layer 表中<code class="varname">layer_id </code>表示的图层中拓扑中的拓扑几何对象的拓扑几何ID。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm26038"><h2>示例</h2><p/></div><div class="refsection" id="idm26041"><h2>相关信息</h2><p><a class="xref" href="#GetTopoGeomElementArray" title="GetTopoGeomElementArray">GetTopoGeomElementArray</a>, <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>, <a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>, <a class="xref" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a> </p></div></div><div class="refentry" id="TG_ST_SRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SRID — 返回拓扑几何的空间参考标识符。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_SRID</strong>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p></div></div><div class="refsection" id="idm26060"><h2>描述</h2><p>返回ST_Geometry spatial_ref_sys表中定义的空间参考系统标识号。 请参见 <a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a></p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>spatial_ref_sys表对 PostGIS 已知的所有参考系进行编目，并用于从一个空间参考系转换为另一个空间参考系。 如果计划转换几何，请务必确保具有正确的空间参考系统标识号。</p></td></tr></table></div><p class="availability">可用性：3.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法实现了SQL/MM规范。  SQL-MM 3: 14.1.5</p></div><div class="refsection" id="idm26072"><h2>示例</h2><pre class="programlisting">SELECT ST_SRID(ST_GeomFromText('POINT(-71.1043 42.315)',4326));
                --result
                4326
                </pre></div><div class="refsection" id="idm26075"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div></section><section class="section" id="TopoGeometry_Outputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.12. 拓扑几何输出</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#AsGML">AsGML</a></span><span class="refpurpose"> — 返回拓扑几何的 GML 表示形式。</span></li><li><span class="refentrytitle"><a href="#AsTopoJSON">AsTopoJSON</a></span><span class="refpurpose"> — 返回拓扑几何的 TopoJSON 表示形式。</span></li></ul></div><div class="refentry" id="AsGML"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AsGML — 返回拓扑几何的 GML 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, regclass  <var class="pdparam">visitedTable</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, regclass  <var class="pdparam">visitedTable</var>, text  <var class="pdparam">nsprefix</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var>, regclass  <var class="pdparam">visitedTable</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var>, regclass  <var class="pdparam">visitedTable</var>, text  <var class="pdparam">idprefix</var><code>)</code>;</p><p><code class="funcdef">text <strong class="fsfunc">AsGML</strong>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var>, regclass  <var class="pdparam">visitedTable</var>, text  <var class="pdparam">idprefix</var>, int  <var class="pdparam">gmlversion</var><code>)</code>;</p></div></div><div class="refsection" id="idm26204"><h2>描述</h2><p>返回 GML3 版本格式的拓扑几何的 GML 表示形式。 如果未指定 <code class="varname">nsprefix_in</code>，则使用 <code class="varname">gml</code>。 为 nsprefix 传入一个空字符串以获取非限定名称空间。 精度（默认值：15）和选项（默认值 1）参数（如果给定）将原封不动地传递到 ST_AsGML 的底层调用。</p><p><code class="varname">VisitedTable </code>参数（如果给定）用于跟踪访问过的 Node 和 Edge 元素，以便使用交叉引用 (xlink:xref) 而不是重复定义。 该表预计有（至少）两个整数字段：“element_type”和“element_id”。 调用用户必须对给定表具有读取和写入权限。 为了获得最佳性能，应按 <code class="varname">element_type </code>和 <code class="varname">element_id </code>的顺序定义索引。 此类索引将通过向字段添加唯一约束来自动创建。 例子： </p><pre class="programlisting">CREATE TABLE visited (
  element_type integer, element_id integer,
  unique(element_type, element_id)
);
</pre><p>
		</p><p><code class="varname">idprefix</code> 参数（如果给定）将被添加到 Edge 和 Node 标记标识符之前。</p><p><code class="varname">gmlver</code> 参数（如果给定）将被传递到底层 ST_AsGML。 默认为 3。</p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm26219"><h2>示例</h2><p>这使用了我们在<a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>中创建的拓扑几何体</p><pre class="programlisting">
SELECT topology.AsGML(topo) As rdgml
  FROM ri.roads
  WHERE road_name = 'Unknown';

-- rdgml--
&lt;gml:TopoCurve&gt;
    &lt;gml:directedEdge&gt;
        &lt;gml:Edge gml:id="E1"&gt;
            &lt;gml:directedNode orientation="-"&gt;
                &lt;gml:Node gml:id="N1"/&gt;
            &lt;/gml:directedNode&gt;
            &lt;gml:directedNode
&gt;&lt;/gml:directedNode&gt;
            &lt;gml:curveProperty&gt;
                &lt;gml:Curve srsName="urn:ogc:def:crs:EPSG::3438"&gt;
                    &lt;gml:segments&gt;
                        &lt;gml:LineStringSegment&gt;
                            &lt;gml:posList srsDimension="2"
&gt;384744 236928 384750 236923 384769 236911 384799 236895 384811 236890
                            384833 236884 384844 236882 384866 236881 384879 236883 384954 236898 385087 236932 385117 236938
                            385167 236938 385203 236941 385224 236946 385233 236950 385241 236956 385254 236971
                            385260 236979 385268 236999 385273 237018 385273 237037 385271 237047 385267 237057 385225 237125
                            385210 237144 385192 237161 385167 237192 385162 237202 385159 237214 385159 237227 385162 237241
                            385166 237256 385196 237324 385209 237345 385234 237375 385237 237383 385238 237399 385236 237407
                            385227 237419 385213 237430 385193 237439 385174 237451 385170 237455 385169 237460 385171 237475
                            385181 237503 385190 237521 385200 237533 385206 237538 385213 237541 385221 237542 385235 237540 385242 237541
                            385249 237544 385260 237555 385270 237570 385289 237584 385292 237589 385291 237596 385284 237630&lt;/gml:posList&gt;
                        &lt;/gml:LineStringSegment&gt;
                    &lt;/gml:segments&gt;
                &lt;/gml:Curve&gt;
            &lt;/gml:curveProperty&gt;
        &lt;/gml:Edge&gt;
    &lt;/gml:directedEdge&gt;
&lt;/gml:TopoCurve&gt;
</pre><p>与之前的练习相同，没有命名空间</p><pre class="programlisting">
SELECT topology.AsGML(topo,'') As rdgml
  FROM ri.roads
  WHERE road_name = 'Unknown';

-- rdgml--
&lt;TopoCurve&gt;
    &lt;directedEdge&gt;
        &lt;Edge id="E1"&gt;
            &lt;directedNode orientation="-"&gt;
                &lt;Node id="N1"/&gt;
            &lt;/directedNode&gt;
            &lt;directedNode
&gt;&lt;/directedNode&gt;
            &lt;curveProperty&gt;
                &lt;Curve srsName="urn:ogc:def:crs:EPSG::3438"&gt;
                    &lt;segments&gt;
                        &lt;LineStringSegment&gt;
                            &lt;posList srsDimension="2"
&gt;384744 236928 384750 236923 384769 236911 384799 236895 384811 236890
                            384833 236884 384844 236882 384866 236881 384879 236883 384954 236898 385087 236932 385117 236938
                            385167 236938 385203 236941 385224 236946 385233 236950 385241 236956 385254 236971
                            385260 236979 385268 236999 385273 237018 385273 237037 385271 237047 385267 237057 385225 237125
                            385210 237144 385192 237161 385167 237192 385162 237202 385159 237214 385159 237227 385162 237241
                            385166 237256 385196 237324 385209 237345 385234 237375 385237 237383 385238 237399 385236 237407
                            385227 237419 385213 237430 385193 237439 385174 237451 385170 237455 385169 237460 385171 237475
                            385181 237503 385190 237521 385200 237533 385206 237538 385213 237541 385221 237542 385235 237540 385242 237541
                            385249 237544 385260 237555 385270 237570 385289 237584 385292 237589 385291 237596 385284 237630&lt;/posList&gt;
                         &lt;/LineStringSegment&gt;
                    &lt;/segments&gt;
                &lt;/Curve&gt;
            &lt;/curveProperty&gt;
        &lt;/Edge&gt;
    &lt;/directedEdge&gt;
&lt;/TopoCurve&gt;
</pre></div><div class="refsection" id="idm26226"><h2>相关信息</h2><p><a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>, <a class="xref" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a></p></div></div><div class="refentry" id="AsTopoJSON"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AsTopoJSON — 返回拓扑几何的 TopoJSON 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">AsTopoJSON</strong>(</code>topogeometry  <var class="pdparam">tg</var>, regclass  <var class="pdparam">edgeMapTable</var><code>)</code>;</p></div></div><div class="refsection" id="idm26246"><h2>描述</h2><p>返回拓扑几何的 TopoJSON 表示形式。 如果<code class="varname">edgeMapTable</code>不为空，它将用作边标识符到弧索引的查找/存储映射。 这是为了能够在最终文档中允许紧凑的“arcs”数组。 </p><p>该表（如果给定）应具有“serial”类型的“arc_id”字段和整数类型的“edge_id”字段； 该代码将查询表中的“edge_id”，因此建议在该字段上添加索引。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>TopoJSON 输出中的弧索引是从 0 开始的，但在“edgeMapTable”表中它们是从 1 开始的。 </p></td></tr></table></div><p>除了该函数返回的片段之外，完整的 TopoJSON 文档还需要包含实际的弧和一些标头。 请参阅 <a class="link" href="http://github.com/mbostock/topojson-specification/blob/master/README.md" target="_top">TopoJSON 规范</a>。 </p><p class="availability">可用性：2.1.0 </p><p class="enhanced">增强：2.2.1 添加了对 puntal 输入的支持</p></div><div class="refsection" id="idm26257"><h2>相关信息</h2><p><a class="xref" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a></p></div><div class="refsection" id="idm26261"><h2>示例</h2><pre class="programlisting">CREATE TEMP TABLE edgemap(arc_id serial, edge_id int unique);

-- header
SELECT '{ "type": "Topology", "transform": { "scale": [1,1], "translate": [0,0] }, "objects": {'

-- objects
UNION ALL SELECT '"' || feature_name || '": ' || AsTopoJSON(feature, 'edgemap')
FROM features.big_parcels WHERE feature_name = 'P3P4';

-- arcs
WITH edges AS (
  SELECT m.arc_id, e.geom FROM edgemap m, city_data.edge e
  WHERE e.edge_id = m.edge_id
), points AS (
  SELECT arc_id, (st_dumppoints(geom)).* FROM edges
), compare AS (
  SELECT p2.arc_id,
         CASE WHEN p1.path IS NULL THEN p2.geom
              ELSE ST_Translate(p2.geom, -ST_X(p1.geom), -ST_Y(p1.geom))
         END AS geom
  FROM points p2 LEFT OUTER JOIN points p1
  ON ( p1.arc_id = p2.arc_id AND p2.path[1] = p1.path[1]+1 )
  ORDER BY arc_id, p2.path
), arcsdump AS (
  SELECT arc_id, (regexp_matches( ST_AsGeoJSON(geom), '\[.*\]'))[1] as t
  FROM compare
), arcs AS (
  SELECT arc_id, '[' || array_to_string(array_agg(t), ',') || ']' as a FROM arcsdump
  GROUP BY arc_id
  ORDER BY arc_id
)
SELECT '}, "arcs": [' UNION ALL
SELECT array_to_string(array_agg(a), E',\n') from arcs

-- footer
UNION ALL SELECT ']}'::text as t;

-- Result:
{ "type": "Topology", "transform": { "scale": [1,1], "translate": [0,0] }, "objects": {
"P3P4": { "type": "MultiPolygon", "arcs": [[[-1]],[[6,5,-5,-4,-3,1]]]}
}, "arcs": [
 [[25,30],[6,0],[0,10],[-14,0],[0,-10],[8,0]],
 [[35,6],[0,8]],
 [[35,6],[12,0]],
 [[47,6],[0,8]],
 [[47,14],[0,8]],
 [[35,22],[12,0]],
 [[35,14],[0,8]]
 ]}
</pre></div></div></section><section class="section" id="Topology_Relationships"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.13. 拓扑空间关系</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了用于检查拓扑几何和拓扑基元之间关系的拓扑函数</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#TG_Equals">Equals</a></span><span class="refpurpose"> — 如果两个拓扑几何由相同的拓扑基元组成，则返回 true。</span></li><li><span class="refentrytitle"><a href="#TG_Intersects">Intersects</a></span><span class="refpurpose"> — 如果两个拓扑几何中的任何一对图元相交，则返回 true。</span></li></ul></div><div class="refentry" id="TG_Equals"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Equals — 如果两个拓扑几何由相同的拓扑基元组成，则返回 true。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">Equals</strong>(</code>topogeometry  <var class="pdparam">tg1</var>, topogeometry  <var class="pdparam">tg2</var><code>)</code>;</p></div></div><div class="refsection" id="idm26284"><h2>描述</h2><p>如果两个拓扑几何由相同的拓扑基元组成：面、边、节点，则返回 true。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>作为几何集合的拓扑几何不支持此函数。 它也无法比较不同拓扑的拓扑几何形状。</p></td></tr></table></div><p class="availability">可用性：1.1.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm26294"><h2>示例</h2><pre class="programlisting"/></div><div class="refsection" id="idm26297"><h2>相关信息</h2><p><a class="xref" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a></p></div></div><div class="refentry" id="TG_Intersects"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Intersects — 如果两个拓扑几何中的任何一对图元相交，则返回 true。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">Intersects</strong>(</code>topogeometry  <var class="pdparam">tg1</var>, topogeometry  <var class="pdparam">tg2</var><code>)</code>;</p></div></div><div class="refsection" id="idm26317"><h2>描述</h2><p>如果两个拓扑几何中的任何一对图元相交，则返回 true。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>作为几何集合的拓扑几何不支持此函数。 它也无法比较不同拓扑的拓扑几何形状。 目前也不支持分层拓扑几何（由其他拓扑几何组成的拓扑几何）。</p></td></tr></table></div><p class="availability">可用性：1.1.0 </p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该函数支持 3d 并且不会丢失 z-index。 </p></div><div class="refsection" id="idm26327"><h2>示例</h2><pre class="programlisting"/></div><div class="refsection" id="idm26330"><h2>相关信息</h2><p><a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div></section><section class="section" id="Topology_Import_Export"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.14. 导入和导出拓扑</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#pgtopo_export">9.14.1. 使用拓扑导出器</a></span></li><li><span class="section"><a href="#pgtopo_import">9.14.2. 使用拓扑导入器</a></span></li></ul></div><p>创建拓扑以及关联的拓扑层后，您可能希望将它们导出为基于文件的格式以进行备份或传输到另一个数据库中。 </p><p>使用 PostgreSQL 的标准转储/恢复工具是有问题的，因为拓扑由一组表（基元为 4 个，层为任意数量）和元数据表中的记录（topology.topology 和 topology.layer）组成。 此外，拓扑标识符在数据库中并不是唯一的，因此在恢复拓扑时需要更改拓扑参数。 </p><p>为了简化拓扑的导出/恢复，提供了一对可执行文件：<code class="filename">pgtopo_export</code> 和<code class="filename">pgtopo_import</code>。 用法示例： </p><pre class="programlisting">pgtopo_export dev_db topo1 | pgtopo_import topo1 | psql staging_db
</pre><section class="section" id="pgtopo_export"><div class="titlepage"><div><div><h3 class="title">9.14.1. 使用拓扑导出器</h3></div></div></div><p><code class="filename">pgtopo_export </code>脚本采用数据库和拓扑的名称，并输出转储文件，该文件可用于将拓扑（和关联的层）导入到新数据库中。 </p><p>默认情况下，<code class="filename">pgtopo_export </code>将转储文件写入标准输出，以便可以将其通过管道传输到 <code class="filename">pgtopo_import </code>或重定向到文件（拒绝写入终端）。 您可以选择使用<code class="code"> -f </code>命令行开关指定输出文件名。 </p><p>默认情况下，<code class="filename">pgtopo_export</code> 包含针对给定拓扑定义的所有层的转储。 这可能是比您需要的更多的数据，或者可能不起作用（如果您的图层表具有复杂的依赖关系），在这种情况下，您可以使用<code class="code"> --skip-layers</code> 开关请求跳过图层并单独处理这些图层。 </p><p>调用 <code class="filename">pgtopo_export</code>时使用 <code class="code">--help</code>（或缩写的 <code class="code">-h</code>）指令将始终打印简短的用法说明字符串。 </p><p>转储文件格式是<code class="filename"> pgtopo_export</code> 目录的压缩 tar 存档，其中至少包含一个带有格式版本信息的<code class="filename"> pgtopo_dump_version </code>文件。 从版本<code class="code"> 1 </code>开始，该目录包含制表符分隔的 CSV 文件，其中包含拓扑基元表的数据（节点、边、面、关系）、与其关联的拓扑和层记录以及（除非给出 <code class="code">--skip-layers</code>）自定义 -format PostgreSQL 转储表报告为给定拓扑的层。 </p></section><section class="section" id="pgtopo_import"><div class="titlepage"><div><div><h3 class="title">9.14.2. 使用拓扑导入器</h3></div></div></div><p><code class="filename">pgtopo_import </code>脚本采用 <code class="code">pgtopo_export </code>格式的拓扑转储和要创建的拓扑的名称，并输出重建拓扑和关联层的 SQL 脚本。 </p><p>生成的 SQL 文件将包含以下语句：创建具有给定名称的拓扑、在其中加载原始数据、通过将所有 TopoGeometry 值正确链接到其正确的拓扑来恢复和注册所有拓扑层。 </p><p>默认情况下，<code class="filename">pgtopo_import </code>从标准输入读取转储，以便它可以与管道中的 <code class="filename">pgtopo_export </code>结合使用。 您可以选择使用<code class="code"> -f</code> 命令行开关指定输入文件名。 </p><p>默认情况下，<code class="filename">pgtopo_import </code>在输出 SQL 文件中包含用于恢复转储中找到的所有层的代码。 </p><p>如果您的目标数据库已经具有与转储中的表同名的表，这可能是不需要的或不起作用的。 在这种情况下，您可以使用<code class="code"> --skip-layers </code>命令请求跳过层并单独（或稍后）处理这些层。 </p><p>可以使用<code class="code"> --only-layers</code> 命令生成仅加载层并将层链接到命名拓扑的 SQL。 这对于在解决命名冲突后加载图层或将图层链接到不同的拓扑（例如起始拓扑的空间简化版本）非常有用。 </p></section></section></section><section class="chapter" id="using_raster_dataman"><div class="titlepage"><div><div><h1 class="title">Chapter 10. 栅格数据管理、查询和应用程序</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#RT_Loading_Rasters">10.1. 加载和创建栅格</a></span></li><li><span class="section"><a href="#RT_Raster_Catalog">10.2. 栅格目录</a></span></li><li><span class="section"><a href="#RT_Raster_Applications">10.3. 使用 PostGIS Raster 构建自定义应用程序</a></span></li></ul></div><section class="section" id="RT_Loading_Rasters"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.1. 加载和创建栅格</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#RT_Raster_Loader">10.1.1. 使用 raster2pgsql 加载栅格</a></span></li><li><span class="section"><a href="#RT_Creating_Rasters">10.1.2. 使用 PostGIS 栅格函数创建栅格</a></span></li><li><span class="section"><a href="#RT_Cloud_Rasters">10.1.3. 使用“out db”云栅格</a></span></li></ul></div><p>对于大多数用例，您将通过使用打包的 <code class="varname">raster2pgsql </code>栅格加载器加载现有栅格文件来创建 PostGIS 栅格。</p><section class="section" id="RT_Raster_Loader"><div class="titlepage"><div><div><h3 class="title">10.1.1. 使用 raster2pgsql 加载栅格</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm26394">10.1.1.1. 用法示例</a></span></li><li><span class="section"><a href="#idm26408">10.1.1.2. raster2pgsql 选项</a></span></li></ul></div><p><code class="varname">raster2pgsql</code>是一个用于将 GDAL 支持的栅格格式加载到适合加载到 PostGIS 栅格表的 SQL 的栅格加载器可执行文件。它能够加载文件夹中的栅格文件，同时创建栅格的概览。 </p><p>由于 raster2pgsql 最常被编译为 PostGIS 的一部分（除非您编译自己的 GDAL 库），因此可执行文件支持的栅格类型将与 GDAL 依赖库中编译的栅格类型相同。 要获取特定 <code class="varname">raster2pgsql </code>支持的栅格类型列表，请使用 <code class="varname">-G</code> 指令。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在从一组对齐的栅格创建特定因子的概览时，有可能概览不会对齐。请访问<a class="link" href="http://trac.osgeo.org/postgis/ticket/1764" target="_top"> http://trac.osgeo.org/postgis/ticket/1764 </a>查看一个示例，其中概览未对齐。</p></td></tr></table></div><section class="section" id="idm26394"><div class="titlepage"><div><div><h4 class="title">10.1.1.1. 用法示例</h4></div></div></div><p>使用加载器创建输入文件并将其以 100x100 块分块上传的示例会话可能如下所示：</p><pre class="programlisting">
# -s use srid 4326
# -I create spatial index
# -C use standard raster constraints
# -M vacuum analyze after load
# *.tif load all these files
# -F include a filename column in the raster table
# -t tile the output 100x100
# public.demelevation load into this table
raster2pgsql -s 4326 -I -C -M -F -t 100x100 *.tif public.demelevation 
&gt; elev.sql

# -d connect to this database
# -f read this file after connecting
psql -d gisdb -f elev.sql
</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您没有将架构指定为目标表名称的一部分，则该表将在您所连接的数据库或用户的默认架构中创建。</p></td></tr></table></div><p>使用 UNIX 管道可以一步完成转换和上传：</p><pre class="programlisting">raster2pgsql -s 4326 -I -C -M *.tif -F -t 100x100 public.demelevation | psql -d gisdb</pre><p>将马萨诸塞州平面米制航空瓦片加载到名为<code class="varname">aerial</code>的架构中，并创建一个全视图，2级和4级概览表，使用复制模式进行插入（没有中间文件，直接到数据库），并且使用“-e”选项来避免强制将所有内容放入一个事务中（如果你希望立即查看表中的数据而不必等待的话）。将栅格分割成128x128像素的瓦片，并应用栅格约束。同时，包括一个名为“filename”的字段，用于存储瓦片所来自的文件的名称。</p><pre class="programlisting">raster2pgsql -I -C -e -Y -F -s 26986 -t 128x128  -l 2,4 bostonaerials2008/*.jpg aerials.boston | psql -U postgres -d gisdb -h localhost -p 5432</pre><pre class="programlisting">--get a list of raster types supported:
raster2pgsql -G</pre><p>-G 指令输出类似的列表 </p><pre class="screen">Available GDAL raster formats:
  Virtual Raster
  GeoTIFF
  National Imagery Transmission Format
  Raster Product Format TOC format
  ECRG TOC format
  Erdas Imagine Images (.img)
  CEOS SAR Image
  CEOS Image
  ...
  Arc/Info Export E00 GRID
  ZMap Plus Grid
  NOAA NGS Geoid Height Grids</pre></section><section class="section" id="idm26408"><div class="titlepage"><div><div><h4 class="title">10.1.1.2. raster2pgsql 选项</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-?</code></span></dt><dd><p>显示帮助屏幕。 如果您不传入任何参数，也会显示帮助。 </p></dd><dt><span class="term"><code class="option">-G</code></span></dt><dd><p>打印支持的栅格格式。 </p></dd><dt><span class="term">（c|a|d|p）这些是相互排斥的选项：</span></dt><dd><p>
              </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>创建新表并用栅格填充它，<span class="emphasis"><em>这是默认模式</em></span> </p></dd><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>将栅格附加到现有表。 </p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>删除表，创建新表并用栅格填充它 </p></dd><dt><span class="term"><code class="option">-p</code></span></dt><dd><p>准备模式，只创建表。 </p></dd></dl></div><p>
            </p></dd><dt><span class="term">栅格处理：应用约束以在栅格目录中正确注册</span></dt><dd><p>
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-C </code></span></dt><dd><p>应用栅格约束——srid、像素大小等，以确保栅格在<code class="varname">raster_columns</code> 视图中正确配准。 </p></dd><dt><span class="term"><code class="option">-x </code></span></dt><dd><p>禁用设置最大范围约束。 仅当还使用 -C 指令时才适用。 </p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>设置规范块约束（空间唯一和详尽的切片）。 仅当还使用 -C 指令时才适用。 </p></dd></dl></div><p>
				</p></dd><dt><span class="term">栅格处理：用于操作输入栅格数据集的可选参数</span></dt><dd><p>
            </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-s &lt;SRID&gt;</code></span></dt><dd><p>使用指定的 SRID 分配输出栅格。 如果未提供或为零，则将检查栅格的元数据以确定适当的 SRID。 </p></dd><dt><span class="term"><code class="option">-b BAND</code></span></dt><dd><p>从栅格中提取的波段索引（从 1 开始）。 对于多个波段索引，用逗号（,）分隔。 如果未指定，则将提取栅格的所有波段。 </p></dd><dt><span class="term"><code class="option">-t TILE_SIZE</code></span></dt><dd><p>将光栅切割成图块，以便在每个表行插入一个图块。<code class="varname"> TILE_SIZE</code> 表示为 WIDTHxHEIGHT 或设置为值“auto”，以允许加载程序使用第一个栅格计算适当的切片大小并将其应用于所有栅格。 </p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>填充最右侧和最底部的图块，以保证所有图块具有相同的宽度和高度。 </p></dd><dt><span class="term"><code class="option">-R, --register</code></span></dt><dd><p>将栅格注册为文件系统 (out-db) 栅格。</p><p>仅栅格的元数据和栅格的路径位置存储在数据库中（而不是像素）。</p></dd><dt><span class="term"><code class="option">-l OVERVIEW_FACTOR</code></span></dt><dd><p>创建栅格的概览。 对于多个因素，用逗号（，）分隔。 概览表名称遵循 o_<code class="varname">overview Factor</code>_<code class="varname">table</code> 模式，其中<code class="varname">概览因子</code>是数字概览因子的占位符，<code class="varname">表</code>将替换为基表名称。 创建的概述存储在数据库中，不受-R影响。 请注意，生成的 sql 文件将包含主表和概览表。</p></dd><dt><span class="term"><code class="option">-N NODATA</code></span></dt><dd><p>NODATA 值用于没有 NODATA 值的带。 </p></dd></dl></div><p>
            </p></dd><dt><span class="term">用于操作数据库对象的可选参数</span></dt><dd><p>
              </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-f COLUMN</code></span></dt><dd><p>指定目标栅格列的名称，默认为“rast” </p></dd><dt><span class="term"><code class="option">-F</code></span></dt><dd><p>添加包含文件名的列</p></dd><dt><span class="term"><code class="option">-n COLUMN</code></span></dt><dd><p>指定文件名列的名称。 意味着-F。</p></dd><dt><span class="term"><code class="option">-q</code></span></dt><dd><p>将 PostgreSQL 标识符括在引号中。</p></dd><dt><span class="term"><code class="option">-I</code></span></dt><dd><p>在栅格列上创建 GiST 索引。 </p></dd><dt><span class="term"><code class="option">-M</code></span></dt><dd><p>真空分析栅格表。 </p></dd><dt><span class="term"><code class="option">-k</code></span></dt><dd><p>保留空的瓦片并跳过每个光栅波段的NODATA值检查。请注意，这样可以节省检查的时间，但可能会导致数据库中出现更多的垃圾行，并且这些垃圾行不会标记为空的瓦片。 </p></dd><dt><span class="term"><code class="option">-T tablespace</code></span></dt><dd><p>指定新表的表空间。 请注意，索引（包括主键）仍将使用默认表空间，除非还使用了 -X 标志。 </p></dd><dt><span class="term"><code class="option">-X tablespace</code></span></dt><dd><p>指定表的新索引的表空间。 如果使用 -I 标志，这适用于主键和空间索引。 </p></dd><dt><span class="term"><code class="option">-Y max_rows_per_copy=50</code></span></dt><dd><p>使用复制语句而不是插入语句。 可以选择指定 <code class="varname">max_rows_per_copy</code>； 未指定时默认为 50。</p></dd></dl></div><p>
            </p></dd><dt><span class="term"><code class="option">-e</code></span></dt><dd><p>单独执行每条语句，不使用事务。</p></dd><dt><span class="term"><code class="option">-E ENDIAN</code></span></dt><dd><p>控制生成的光栅二进制输出的字节顺序； 为 XDR 指定 0，为 NDR 指定 1（默认）； 现在仅支持 NDR 输出</p></dd><dt><span class="term"><code class="option">-V version</code></span></dt><dd><p>指定输出格式的版本。 默认为0。目前仅支持0。</p></dd></dl></div></section></section><section class="section" id="RT_Creating_Rasters"><div class="titlepage"><div><div><h3 class="title">10.1.2. 使用 PostGIS 栅格函数创建栅格</h3></div></div></div><p>在许多情况下，您需要直接在数据库中创建栅格和栅格表。 有很多函数可以做到这一点。 要遵循的一般步骤。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>创建一个包含栅格列的表来保存新的栅格记录，可以通过以下方式完成：</p><pre class="programlisting">CREATE TABLE myrasters(rid serial primary key, rast raster);</pre></li><li class="listitem"><p>有许多功能可以帮助实现这一目标。 如果您创建的栅格不是其他栅格的衍生品，则需要从以下位置开始：<a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>，然后是 <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a></p><p>您还可以从几何图形创建栅格。 为了实现这一点，您可能需要使用 <a class="xref" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> 以及其他函数，例如 <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a> 或 <a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>或任何其他地图代数函数系列。</p><p>甚至还有更多选项可用于从现有表创建新栅格表。 例如，您可以使用 <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>在与现有投影不同的投影中创建栅格表 </p></li><li class="listitem"><p>最初填充表后，您将需要在栅格列上创建一个空间索引，如下所示：</p><pre class="programlisting">CREATE INDEX myrasters_rast_st_convexhull_idx ON myrasters USING gist( ST_ConvexHull(rast) );</pre><p>请注意 <a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>的使用，因为大多数栅格运算符都基于栅格的凸包。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostGIS 栅格 2.0 之前的版本基于最小外接矩形而不是凸包。 为了使空间索引正常工作，您需要删除它们并替换为基于凸包的索引。</p></td></tr></table></div></li><li class="listitem"><p>使用 <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>应用栅格约束</p></li></ol></div></section><section class="section" id="RT_Cloud_Rasters"><div class="titlepage"><div><div><h3 class="title">10.1.3. 使用“out db”云栅格</h3></div></div></div><p><code class="varname">raster2pgsql</code> 工具使用 GDAL 访问栅格数据，并且可以利用 GDAL 的一个关键功能：能够从<a class="link" href="https://gdal.org/user/virtual_file_systems.html#network-based-file-systems" target="_top">远程存储</a>在云“对象存储”（例如 AWS S3、Google Cloud Storage）中的栅格中读取数据。 </p><p>有效使用云存储栅格需要使用“云优化”格式。 最知名和最广泛使用的是“<a class="link" href="https://gdal.org/drivers/raster/cog.html" target="_top">云优化的 GeoTIFF</a>”格式。 使用非云格式（例如 JPEG 或未平铺的 TIFF）将导致性能非常差，因为系统每次需要访问子集时都必须下载整个栅格。 </p><p>首先，将栅格加载到您选择的云存储中。 一旦加载，您将有一个 URI 来访问它，可以是“http”URI，有时也可以是特定于服务的 URI。 （例如，“s3://bucket/object”）。 要访问非公共存储桶，您需要提供 GDAL 配置选项来验证您的连接。 请注意，此命令是从云栅格<span class="emphasis"><em>读取</em></span>并<span class="emphasis"><em>写入</em></span>数据库。 </p><pre class="programlisting">AWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxxxxxxx \
AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
raster2pgsql \
  -s 990000 \
  -t 256x256 \
  -I \
  -R \
  /vsis3/your.bucket.com/your_file.tif \
  your_table \
  | psql your_db</pre><p>加载表后，您需要通过设置两个权限（<a class="xref" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a> 和<a class="xref" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a>）来授予数据库从远程栅格读取的权限。 </p><pre class="programlisting">SET postgis.enable_outdb_rasters = true;
SET postgis.gdal_enabled_drivers TO 'ENABLE_ALL';
    </pre><p>为了使更改生效并持久化，直接在您的数据库上进行设置。您将需要重新连接以体验新的设置。 </p><pre class="programlisting">ALTER DATABASE your_db SET postgis.enable_outdb_rasters = true;
ALTER DATABASE your_db SET postgis.gdal_enabled_drivers TO 'ENABLE_ALL';
    </pre><p>对于非公开的栅格数据，你可能需要提供访问密钥来从云端栅格数据中读取。你可以将写入 <code class="varname">raster2pgsql</code> 调用时使用的相同密钥设置为在数据库内部使用，使用 <a class="xref" href="#postgis_gdal_vsi_options" title="postgis.gdal_vsi_options">postgis.gdal_vsi_options</a> 配置。请注意，可以通过用空格分隔 <code class="varname">key=value</code> 对来设置多个选项。 </p><pre class="programlisting">SET postgis.gdal_vsi_options = 'AWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxxxxxxx
AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';</pre><p>加载数据并设置权限后，您可以使用相同的功能像任何其他栅格表一样与栅格表进行交互。 当需要读取像素数据时，数据库将处理连接到云数据的所有机制。 </p></section></section><section class="section" id="RT_Raster_Catalog"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.2. 栅格目录</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#RT_Raster_Columns">10.2.1. 栅格列目录</a></span></li><li><span class="section"><a href="#RT_Raster_Overviews">10.2.2. 栅格概述</a></span></li></ul></div><p>PostGIS 附带了两个栅格目录视图。 两个视图都利用嵌入在栅格表约束中的信息。 因此，由于强制实施了约束，目录视图始终与表中的栅格数据一致。 </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">raster_columns</code> 此视图对数据库中的所有栅格表列进行编目。</p></li><li class="listitem"><p><code class="varname">raster_overviews </code>此视图对数据库中的所有栅格表列进行编目，这些列用作更细粒度表的概述。 当您在加载期间使用<code class="varname"> -l </code>开关时，会生成这种类型的表。</p></li></ol></div><section class="section" id="RT_Raster_Columns"><div class="titlepage"><div><div><h3 class="title">10.2.1. 栅格列目录</h3></div></div></div><p><code class="varname">raster_columns</code> 是数据库中所有栅格类型的栅格表列的目录。 它是一种利用表约束的视图，因此即使您从另一个数据库的备份恢复一个栅格表，信息也始终保持一致。 <code class="varname">raster_columns </code>目录中存在以下列。</p><p>如果您未使用加载器创建表或忘记在加载期间指定 <code class="varname">-C </code>标志，则可以在事后使用 <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>强制执行约束，以便 <code class="varname">raster_columns </code>目录注册有关栅格切片的通用信息。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">r_table_catalog </code>表所在的数据库。这将始终读取当前数据库。</p></li><li class="listitem"><p><code class="varname">r_table_schema </code>栅格表所属的数据库模式。</p></li><li class="listitem"><p><code class="varname">r_table_name</code> 栅格表</p></li><li class="listitem"><p><code class="varname">r_raster_column </code>在<code class="varname">r_table_name</code> 表中栅格类型的列。 PostGIS 中没有任何内容可以阻止您在每个表中拥有多个栅格列，因此可以多次列出一个栅格表，并且每个表具有不同的栅格列。</p></li><li class="listitem"><p><code class="varname">srid </code>栅格的空间参考标识符。 应该是<a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>中的条目。</p></li><li class="listitem"><p><code class="varname">scale_x </code>几何空间坐标与像素之间的缩放比例。 仅当栅格列中的所有切片具有相同的<code class="varname">scale_x</code>并且应用此约束时，此功能才可用。 有关更多详细信息，请参阅 <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>。</p></li><li class="listitem"><p><code class="varname">scale_y </code>几何空间坐标与像素之间的缩放比例。 仅当栅格列中的所有切片具有相同的<code class="varname">scale_y</code>并且应用了<code class="varname">scale_y</code>约束时，此功能才可用。 有关详细信息，请参阅 <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>。</p></li><li class="listitem"><p><code class="varname">blocksize_x </code>每个栅格图块的宽度（跨像素数）。 有关更多详细信息，请参阅<a class="xref" href="#RT_ST_Width" title="ST_Width">ST_Width</a>。</p></li><li class="listitem"><p><code class="varname">blocksize_y </code>每个栅格图块的宽度（向下的像素数）。 有关更多详细信息，请参阅<a class="xref" href="#RT_ST_Height" title="ST_Height">ST_Height</a>。</p></li><li class="listitem"><p><code class="varname">same_alignment </code>一个布尔值，如果所有栅格图块具有相同的对齐方式，则该值为 true。 有关更多详细信息，请参阅<a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a>。</p></li><li class="listitem"><p><code class="varname">Regular_blocking</code> 如果栅格列具有空间唯一性和覆盖范围切片约束，则该值为 TRUE。 否则，它将是 FALSE。</p></li><li class="listitem"><p><code class="varname">num_bands </code>栅格集中每个切片中的波段数。 这与 ST_NumBands 提供的信息相同 <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></li><li class="listitem"><p><code class="varname">Pixel_types</code> 定义每个波段的像素类型的数组。 该数组中的元素数量与波段的数量相同。 Pixel_types 是 <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中定义的以下类型之一。</p></li><li class="listitem"><p><code class="varname">nodata_values</code> 双精度数字数组，表示每个波段的<code class="varname"> nodata_value</code>。 该数组中的元素数量与带的数量相同。 这些数字定义了大多数操作中应忽略的每个波段的像素值。 这与<a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a> 提供的信息类似。</p></li><li class="listitem"><p><code class="varname">out_db </code>布尔标志数组，指示栅格波段数据是否在数据库外部维护。 该数组中的元素数量与带的数量相同。</p></li><li class="listitem"><p><code class="varname">extent</code>这是栅格集中所有栅格行的范围。 如果您计划加载更多数据来更改集的范围，则需要在加载之前运行 <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a> 函数，然后在加载后使用<a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a> 重新应用约束。 </p></li><li class="listitem"><p><code class="varname">Spatial_index </code>如果栅格列具有空间索引，则为 true 的布尔值。</p></li></ul></div></section><section class="section" id="RT_Raster_Overviews"><div class="titlepage"><div><div><h3 class="title">10.2.2. 栅格概述</h3></div></div></div><p><code class="varname">raster_overviews</code> 目录有关用于概览的栅格表列的信息以及在使用概览时了解的有用的附加信息。 概览表在 <code class="varname">raster_columns</code> 和 <code class="varname">raster_overviews </code>中进行编目，因为它们本身就是栅格，但还具有作为高分辨率表的较低分辨率的漫画化图像的额外特殊用途。 当您在栅格加载中使用 <code class="varname">-l </code>开关时，它们会与主栅格表一起生成，或者可以使用 <a class="xref" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>手动生成。</p><p>概览表包含与其他栅格表相同的约束以及特定于概览的附加信息约束。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><code class="varname">raster_overviews</code> 中的信息与<code class="varname"> raster_columns </code>中的信息不重复。 如果您需要有关 <code class="varname">raster_columns </code>中存在的概览表的信息，您可以将 <code class="varname">raster_overviews</code> 和 <code class="varname">raster_columns </code>连接在一起以获得所需的完整信息集。</p></td></tr></table></div><p>进行概览的两个主要原因是：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>通常用于快速映射缩小的核心表的低分辨率表示。</p></li><li class="listitem"><p>它们的计算速度通常比其更高分辨率的父级更快，因为记录更少，每个像素覆盖更多区域。 尽管计算不如它们支持的高分辨率表那么准确，但它们在许多粗略计算中已经足够了。</p></li></ol></div><p><code class="varname">raster_overviews</code> 目录包含以下信息。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">o_table_catalog </code>概览表所在的数据库。这将始终读取当前数据库。</p></li><li class="listitem"><p><code class="varname">o_table_schema</code> 概览栅格表所属的数据库架构。</p></li><li class="listitem"><p><code class="varname">o_table_name </code>栅格概览表名称</p></li><li class="listitem"><p><code class="varname">o_raster_column </code>概览表中的栅格列。</p></li><li class="listitem"><p><code class="varname">r_table_catalog</code> 该概览服务所在的栅格表所在的数据库。这将始终读取当前数据库。</p></li><li class="listitem"><p><code class="varname">r_table_schema </code>此概览服务所属的栅格表的数据库架构。</p></li><li class="listitem"><p><code class="varname">r_table_name</code> 此概览服务的栅格表。</p></li><li class="listitem"><p><code class="varname">r_raster_column</code> 此概览列服务的栅格列。</p></li><li class="listitem"><p><code class="varname">Overview_factor</code> - 这是概述表的金字塔级别。 数字越大，表的分辨率越低。 raster2pgsql 如果给定图像文件夹，将计算每个图像文件的概述并单独加载。 假定级别为 1，并且始终为原始文件。 2 级是每个图块代表 4 个原始图块。 例如，如果您有一个包含 5000x5000 像素图像文件的文件夹，您选择将其分块为 125x125，则对于每个图像文件，您的基表将有 (5000*5000)/(125*125) 条记录 = 1600，您的 (l=2) <code class="varname">o_2 </code>表将有上限(1600/Power(2,2)) = 400 行，您的 (l=3) <code class="varname">o_3 </code>将有上限(1600/Power(2,3) ) = 200 行。 如果您的像素不能被图块的大小整除，您将得到一些废图块（未完全填充的图块）。 请注意，raster2pgsql 生成的每个概览图块与其父级图块具有相同数量的像素，但分辨率较低，其中每个像素代表（原始图块的 Power(2,overview_factor) 像素）。</p></li></ul></div></section></section><section class="section" id="RT_Raster_Applications"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.3. 使用 PostGIS Raster 构建自定义应用程序</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#RT_PHP_Output">10.3.1. PHP 示例使用 ST_AsPNG 与其他栅格函数进行输出</a></span></li><li><span class="section"><a href="#RT_Net_Output_CS">10.3.2. ASP.NET C# 示例使用 ST_AsPNG 与其他栅格函数进行输出</a></span></li><li><span class="section"><a href="#RT_Java_Console_App">10.3.3. 将栅格查询输出为图像文件的 Java 控制台应用程序</a></span></li><li><span class="section"><a href="#RT_PLPython">10.3.4. 使用 PLPython 通过 SQL 转储图像</a></span></li><li><span class="section"><a href="#RasterOutput_PSQL">10.3.5. 使用 PSQL 输出栅格</a></span></li></ul></div><p>事实上，PostGIS 栅格为您提供了 SQL 函数来以已知图像格式渲染栅格，这为您提供了很多渲染栅格的选项。 例如，您可以使用 OpenOffice / LibreOffice 进行渲染，如 <a class="link" href="http://www.postgresonline.com/journal/archives/244-Rendering-PostGIS-Raster-graphics-with-LibreOffice-Base-Reports.html" target="_top">使用 LibreOffice 基础报告渲染 PostGIS 栅格图形</a>中所示。 此外，您还可以使用本节中演示的多种语言。</p><section class="section" id="RT_PHP_Output"><div class="titlepage"><div><div><h3 class="title">10.3.1. PHP 示例使用 ST_AsPNG 与其他栅格函数进行输出</h3></div></div></div><p>在本节中，我们将演示如何使用 PHP PostgreSQL 驱动程序和 <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>系列函数将栅格的波段 1、2、3 输出到 PHP 请求流，然后将其嵌入到 img src html 标记中。</p><p>示例查询演示了如何将一大堆栅格函数组合在一起，以获取与特定 wgs 84 边界框相交的所有图块，然后将相交图块与 <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>联合起来，返回所有波段，使用 <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>转换为用户指定的投影，然后输出 使用 <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>将结果显示为 png。</p><p>您可以使用</p><pre class="programlisting"> http://mywebserver/test_raster.php?srid=2249 </pre><p>调用以下命令来获取马萨诸塞州平面英尺的栅格图像。</p><pre class="programlisting">

&lt;?php
/** contents of test_raster.php **/
$conn_str ='dbname=mydb host=localhost port=5432 user=myuser password=mypwd';
$dbconn = pg_connect($conn_str);
header('Content-Type: image/png');
/**If a particular projection was requested use it otherwise use mass state plane meters **/
if (!empty( $_REQUEST['srid'] ) &amp;amp;&amp;amp; is_numeric( $_REQUEST['srid']) ){
                $input_srid = intval($_REQUEST['srid']);
}
else { $input_srid = 26986; }
/** The set bytea_output may be needed for PostgreSQL 9.0+, but not for 8.4 **/
$sql = "set bytea_output='escape';
SELECT ST_AsPNG(ST_Transform(
                        ST_AddBand(ST_Union(rast,1), ARRAY[ST_Union(rast,2),ST_Union(rast,3)])
                                ,$input_srid) ) As new_rast
 FROM aerials.boston
        WHERE
         ST_Intersects(rast, ST_Transform(ST_MakeEnvelope(-71.1217, 42.227, -71.1210, 42.218,4326),26986) )";
$result = pg_query($sql);
$row = pg_fetch_row($result);
pg_free_result($result);
if ($row === false) return;
echo pg_unescape_bytea($row[0]);
?&gt;
</pre></section><section class="section" id="RT_Net_Output_CS"><div class="titlepage"><div><div><h3 class="title">10.3.2. ASP.NET C# 示例使用 ST_AsPNG 与其他栅格函数进行输出</h3></div></div></div><p>在本节中，我们将演示如何使用 Npgsql PostgreSQL .NET 驱动程序和<a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>系列函数将栅格的波段 1、2、3 输出到 PHP 请求流，然后将其嵌入到 img src html 标记中。</p><p>本练习需要 npgsql .NET PostgreSQL 驱动程序，您可以从 <a class="link" href="http://npgsql.projects.postgresql.org/" target="_top"> http://npgsql.projects.postgresql.org/ </a>获取最新的驱动程序。 只需下载最新版本并放入 ASP.NET bin 文件夹中即可开始使用。</p><p>示例查询演示了如何将一大堆栅格函数组合在一起，以获取与特定 wgs 84 边界框相交的所有图块，然后将相交图块与 <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>联合起来，返回所有波段，使用 <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>转换为用户指定的投影，然后输出 使用 <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>将结果显示为 png。</p><p>该示例与<a class="xref" href="#RT_PHP_Output" title="10.3.1. PHP 示例使用 ST_AsPNG 与其他栅格函数进行输出">Section 10.3.1, “PHP 示例使用 ST_AsPNG 与其他栅格函数进行输出”</a>示例相同，只不过是在 C# 中实现的。</p><p>您可以使用</p><pre class="programlisting"> http://mywebserver/TestRaster.ashx?srid=2249 </pre><p>调用以下命令来获取马萨诸塞州平面英尺的栅格图像。</p><pre class="programlisting">
 -- web.config connection string section --
&lt;connectionStrings&gt;
    &lt;add name="DSN"
        connectionString="server=localhost;database=mydb;Port=5432;User Id=myuser;password=mypwd"/&gt;
&lt;/connectionStrings&gt;
</pre><pre class="programlisting">
// Code for TestRaster.ashx
&lt;%@ WebHandler Language="C#" Class="TestRaster" %&gt;
using System;
using System.Data;
using System.Web;
using Npgsql;

public class TestRaster : IHttpHandler
{
        public void ProcessRequest(HttpContext context)
        {

                context.Response.ContentType = "image/png";
                context.Response.BinaryWrite(GetResults(context));

        }

        public bool IsReusable {
                get { return false; }
        }

        public byte[] GetResults(HttpContext context)
        {
                byte[] result = null;
                NpgsqlCommand command;
                string sql = null;
                int input_srid = 26986;
        try {
                    using (NpgsqlConnection conn = new NpgsqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["DSN"].ConnectionString)) {
                            conn.Open();

                if (context.Request["srid"] != null)
                {
                    input_srid = Convert.ToInt32(context.Request["srid"]);
                }
                sql = @"SELECT ST_AsPNG(
                            ST_Transform(
                                        ST_AddBand(
                                ST_Union(rast,1), ARRAY[ST_Union(rast,2),ST_Union(rast,3)])
                                                    ,:input_srid) ) As new_rast
                        FROM aerials.boston
                                WHERE
                                    ST_Intersects(rast,
                                    ST_Transform(ST_MakeEnvelope(-71.1217, 42.227, -71.1210, 42.218,4326),26986) )";
                            command = new NpgsqlCommand(sql, conn);
                command.Parameters.Add(new NpgsqlParameter("input_srid", input_srid));


                            result = (byte[]) command.ExecuteScalar();
                conn.Close();
                        }

                }
        catch (Exception ex)
        {
            result = null;
            context.Response.Write(ex.Message.Trim());
        }
                return result;
        }
}
</pre></section><section class="section" id="RT_Java_Console_App"><div class="titlepage"><div><div><h3 class="title">10.3.3. 将栅格查询输出为图像文件的 Java 控制台应用程序</h3></div></div></div><p>这是一个简单的 java 控制台应用程序，它接受一个返回一张图像并输出到指定文件的查询。</p><p>您可以从 <a class="link" href="http://jdbc.postgresql.org/download.html" target="_top"> http://jdbc.postgresql.org/download.html </a>下载最新的 PostgreSQL JDBC 驱动程序 </p><p>您可以使用如下命令编译以下代码：</p><pre class="programlisting">set env CLASSPATH .:..\postgresql-9.0-801.jdbc4.jar
javac SaveQueryImage.java
jar cfm SaveQueryImage.jar Manifest.txt *.class</pre><p>并使用类似的命令从命令行调用它</p><pre class="programlisting">java -jar SaveQueryImage.jar "SELECT ST_AsPNG(ST_AsRaster(ST_Buffer(ST_Point(1,5),10, 'quad_segs=2'),150, 150, '8BUI',100));" "test.png" </pre><pre class="programlisting">-- Manifest.txt --
Class-Path: postgresql-9.0-801.jdbc4.jar
Main-Class: SaveQueryImage</pre><pre class="programlisting">// Code for SaveQueryImage.java
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.io.*;

public class SaveQueryImage {
  public static void main(String[] argv) {
      System.out.println("Checking if Driver is registered with DriverManager.");

      try {
        //java.sql.DriverManager.registerDriver (new org.postgresql.Driver());
        Class.forName("org.postgresql.Driver");
      }
      catch (ClassNotFoundException cnfe) {
        System.out.println("Couldn't find the driver!");
        cnfe.printStackTrace();
        System.exit(1);
      }

      Connection conn = null;

      try {
        conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/mydb","myuser", "mypwd");
        conn.setAutoCommit(false);

        PreparedStatement sGetImg = conn.prepareStatement(argv[0]);

        ResultSet rs = sGetImg.executeQuery();

                FileOutputStream fout;
                try
                {
                        rs.next();
                        /** Output to file name requested by user **/
                        fout = new FileOutputStream(new File(argv[1]) );
                        fout.write(rs.getBytes(1));
                        fout.close();
                }
                catch(Exception e)
                {
                        System.out.println("Can't create file");
                        e.printStackTrace();
                }

        rs.close();
                sGetImg.close();
        conn.close();
      }
      catch (SQLException se) {
        System.out.println("Couldn't connect: print out a stack trace and exit.");
        se.printStackTrace();
        System.exit(1);
      }
  }
}</pre></section><section class="section" id="RT_PLPython"><div class="titlepage"><div><div><h3 class="title">10.3.4. 使用 PLPython 通过 SQL 转储图像</h3></div></div></div><p>这是一个 plpython 存储函数，它在服务器目录中为每条记录创建一个文件。 需要你安装了 plpython。 应该可以与 plpythonu 和 plpython3u 一起正常工作。</p><pre class="programlisting">CREATE OR REPLACE FUNCTION write_file (param_bytes bytea, param_filepath text)
RETURNS text
AS $$
f = open(param_filepath, 'wb+')
f.write(param_bytes)
return param_filepath
$$ LANGUAGE plpythonu;</pre><pre class="programlisting">--write out 5 images to the PostgreSQL server in varying sizes
-- note the postgresql daemon account needs to have write access to folder
-- this echos back the file names created;
 SELECT write_file(ST_AsPNG(
        ST_AsRaster(ST_Buffer(ST_Point(1,5),j*5, 'quad_segs=2'),150*j, 150*j, '8BUI',100)),
         'C:/temp/slices'|| j || '.png')
         FROM generate_series(1,5) As j;

     write_file
---------------------
 C:/temp/slices1.png
 C:/temp/slices2.png
 C:/temp/slices3.png
 C:/temp/slices4.png
 C:/temp/slices5.png
</pre></section><section class="section" id="RasterOutput_PSQL"><div class="titlepage"><div><div><h3 class="title">10.3.5. 使用 PSQL 输出栅格</h3></div></div></div><p>遗憾的是，PSQL 没有易于使用的内置功能来输出二进制文件。 这是一个有点依赖于 PostgreSQL 遗留的大对象支持的 hack。 要使用，首先启动连接到数据库的 psql 命令行。 </p><p>与 python 方法不同，此方法在本地计算机上创建文件。</p><pre class="screen">SELECT oid, lowrite(lo_open(oid, 131072), png) As num_bytes
 FROM
 ( VALUES (lo_create(0),
   ST_AsPNG( (SELECT rast FROM aerials.boston WHERE rid=1) )
  ) ) As v(oid,png);
-- you'll get an output something like --
   oid   | num_bytes
---------+-----------
 2630819 |     74860

-- next note the oid and do this replacing the c:/test.png to file path location
-- on your local computer
 \lo_export 2630819 'C:/temp/aerial_samp.png'

-- this deletes the file from large object storage on db
SELECT lo_unlink(2630819);
                        </pre></section></section></section><section class="chapter" id="RT_reference"><div class="titlepage"><div><div><h1 class="title">Chapter 11. 栅格参考</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#Raster_Types">11.1. 栅格支持数据类型</a></span></li><li><span class="section"><a href="#Raster_Management_Functions">11.2. 栅格管理</a></span></li><li><span class="section"><a href="#Raster_Constructors">11.3. 栅格构造器</a></span></li><li><span class="section"><a href="#Raster_Accessors">11.4. 栅格访问器</a></span></li><li><span class="section"><a href="#RasterBand_Accessors">11.5. 栅格波段访问器</a></span></li><li><span class="section"><a href="#Raster_Pixel_Accessors">11.6. 栅格像素访问器和设置器</a></span></li><li><span class="section"><a href="#Raster_Editors">11.7. 栅格编辑器</a></span></li><li><span class="section"><a href="#RasterBand_Editors">11.8. 栅格波段编辑器</a></span></li><li><span class="section"><a href="#RasterBand_Stats">11.9. 栅格波段统计和分析</a></span></li><li><span class="section"><a href="#Raster_Inputs">11.10. 栅格输入</a></span></li><li><span class="section"><a href="#Raster_Outputs">11.11. 栅格输出</a></span></li><li><span class="section"><a href="#Raster_Processing_MapAlgebra">11.12. 栅格处理：地图代数</a></span></li><li><span class="section"><a href="#Raster_Processing_MapAlgebra_Callbacks">11.13. 内置地图代数回调函数</a></span></li><li><span class="section"><a href="#Raster_Processing_DEM">11.14. 栅格处理：DEM（高程）</a></span></li><li><span class="section"><a href="#Raster_Processing_Geometry">11.15. 栅格处理：栅格到几何</a></span></li><li><span class="section"><a href="#RT_Operators">11.16. 栅格运算符</a></span></li><li><span class="section"><a href="#Raster_Relationships">11.17. 栅格和栅格波段空间关系</a></span></li><li><span class="section"><a href="#Raster_Tips">11.18. 栅格提示</a></span></li></ul></div><p>下面给出的功能是 PostGIS Raster 用户可能需要的功能，并且当前在 PostGIS Raster 中可用。 还有一些其他功能是栅格对象所需的支持功能，但对一般用户来说没有用处。</p><p><code class="varname">raster</code> 是一种新的 PostGIS 类型，用于存储和分析栅格数据。 </p><p>有关从光栅文件加载光栅的信息，请参阅<a class="xref" href="#RT_Loading_Rasters" title="10.1. 加载和创建栅格">Section 10.1, “加载和创建栅格”</a></p><p>对于本参考文献中的示例，我们将使用虚拟栅格的栅格表 - 由以下代码组成 </p><pre class="programlisting">CREATE TABLE dummy_rast(rid integer, rast raster);
INSERT INTO dummy_rast(rid, rast)
VALUES (1,
('01' -- little endian (uint8 ndr)
||
'0000' -- version (uint16 0)
||
'0000' -- nBands (uint16 0)
||
'0000000000000040' -- scaleX (float64 2)
||
'0000000000000840' -- scaleY (float64 3)
||
'000000000000E03F' -- ipX (float64 0.5)
||
'000000000000E03F' -- ipY (float64 0.5)
||
'0000000000000000' -- skewX (float64 0)
||
'0000000000000000' -- skewY (float64 0)
||
'00000000' -- SRID (int32 0)
||
'0A00' -- width (uint16 10)
||
'1400' -- height (uint16 20)
)::raster
),
-- Raster: 5 x 5 pixels, 3 bands, PT_8BUI pixel type, NODATA = 0
(2,  ('01000003009A9999999999A93F9A9999999999A9BF000000E02B274A' ||
'41000000007719564100000000000000000000000000000000FFFFFFFF050005000400FDFEFDFEFEFDFEFEFDF9FAFEF' ||
'EFCF9FBFDFEFEFDFCFAFEFEFE04004E627AADD16076B4F9FE6370A9F5FE59637AB0E54F58617087040046566487A1506CA2E3FA5A6CAFFBFE4D566DA4CB3E454C5665')::raster);</pre><section class="section" id="Raster_Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.1. 栅格支持数据类型</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了专门为支持栅格功能而创建的 PostgreSQL 数据类型。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#geomval">geomval</a></span><span class="refpurpose"> — 具有两个字段的空间数据类型 - geom（保存几何对象）和 val（保存栅格带中的双精度像素值）。</span></li><li><span class="refentrytitle"><a href="#addbandarg">addbandarg</a></span><span class="refpurpose"> — 用作 ST_AddBand 函数的输入的复合类型，定义新波段的属性和初始值。</span></li><li><span class="refentrytitle"><a href="#rastbandarg">rastbandarg</a></span><span class="refpurpose"> — 需要表达栅格和该栅格的波段索引时使用的复合类型。</span></li><li><span class="refentrytitle"><a href="#raster">raster</a></span><span class="refpurpose"> — 栅格空间数据类型。</span></li><li><span class="refentrytitle"><a href="#reclassarg">reclassarg</a></span><span class="refpurpose"> — 用作定义重新分类行为的 ST_Reclass 函数的输入的复合类型。</span></li><li><span class="refentrytitle"><a href="#summarystats">summarystats</a></span><span class="refpurpose"> — ST_SummaryStats 和 ST_SummaryStatsAgg 函数返回的复合类型。</span></li><li><span class="refentrytitle"><a href="#unionarg">unionarg</a></span><span class="refpurpose"> — 用作 ST_Union 函数的输入的复合类型，定义要处理的波段和 UNION 操作的行为。</span></li></ul></div><div class="refentry" id="geomval"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>geomval — 具有两个字段的空间数据类型 - geom（保存几何对象）和 val（保存栅格带中的双精度像素值）。</p></div><div class="refsection" id="idm26847"><h2>描述</h2><p>geomval 是一种复合数据类型，由 .geom 字段引用的几何对象和 val 组成，val 是一个双精度值，表示栅格带中特定几何位置处的像素值。 ST_DumpAsPolygon 和栅格交集函数系列使用它作为输出类型，将栅格带分解为几何多边形。</p></div><div class="refsection" id="idm26850"><h2>相关信息</h2><p><a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="13.6. PostGIS 几何/地理/栅格导出函数">Section 13.6, “PostGIS 几何/地理/栅格导出函数”</a> </p></div></div><div class="refentry" id="addbandarg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>addbandarg — 用作 ST_AddBand 函数的输入的复合类型，定义新波段的属性和初始值。</p></div><div class="refsection" id="idm26858"><h2>描述</h2><p>用作 ST_AddBand 函数的输入的复合类型，定义新波段的属性和初始值。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">index integer </code></span></dt><dd><p>从 1 开始的值，指示新波段将添加到栅格波段中的位置。 如果为 NULL，则新波段将添加到栅格波段的末尾。 </p></dd><dt><span class="term"><code class="varname">pixeltype text </code></span></dt><dd><p>新波段的像素类型。 <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中描述的已定义像素类型之一。 </p></dd><dt><span class="term"><code class="varname">initialvalue double precision </code></span></dt><dd><p>新波段的所有像素将设置为的初始值。 </p></dd><dt><span class="term"><code class="varname">nodataval double precision </code></span></dt><dd><p>新波段的 NODATA 值。 如果为 NULL，则新波段将不会分配 NODATA 值。 </p></dd></dl></div><p>

                </p></div><div class="refsection" id="idm26883"><h2>相关信息</h2><p>
                    <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>
                </p></div></div><div class="refentry" id="rastbandarg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>rastbandarg — 需要表达栅格和该栅格的波段索引时使用的复合类型。</p></div><div class="refsection" id="idm26891"><h2>描述</h2><p>需要表达栅格和该栅格的波段索引时使用的复合类型。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">rast raster </code></span></dt><dd><p>有问题的栅格/ </p></dd><dt><span class="term"><code class="varname">nband integer </code></span></dt><dd><p>从 1 开始的值，表示栅格的波段 </p></dd></dl></div><p>

                </p></div><div class="refsection" id="idm26905"><h2>相关信息</h2><p>
                    <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>
                </p></div></div><div class="refentry" id="raster"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>raster — 栅格空间数据类型。</p></div><div class="refsection" id="idm26913"><h2>描述</h2><p>栅格是一种空间数据类型，用于表示栅格数据，例如从 JPEG、TIFF、PNG、数字高程模型导入的栅格数据。 每个栅格都有 1 个或多个波段，每个波段都有一组像素值。 栅格可以进行地理参考。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>需要使用 GDAL 支持来编译 PostGIS。 目前栅格可以隐式转换为几何类型，但转换返回栅格的 <a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>。 此自动铸造可能会在不久的将来被删除，因此不要依赖它。</p></td></tr></table></div></div><div class="refsection" id="idm26919"><h2>类型强制转换</h2><p>这个部分列出了允许用于这种数据类型的自动转换以及显式转换</p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">转换到</td><td style="border-bottom: 1px solid ; ">行为</td></tr><tr><td style="border-right: 1px solid ; ">geometry</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" id="idm26931"><h2>相关信息</h2><p><a class="xref" href="#RT_reference" title="Chapter 11. 栅格参考">Chapter 11, <em>栅格参考</em></a></p></div></div><div class="refentry" id="reclassarg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>reclassarg — 用作定义重新分类行为的 ST_Reclass 函数的输入的复合类型。</p></div><div class="refsection" id="idm26939"><h2>描述</h2><p>用作定义重新分类行为的 ST_Reclass 函数的输入的复合类型。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">nband integer</code></span></dt><dd><p>要重新分类的波段的波段号。</p></dd><dt><span class="term"><code class="varname">reclassexpr text</code></span></dt><dd><p>由逗号分隔的 range:map_range 映射组成的范围表达式。 ：定义映射，定义如何将旧波段值映射到新波段值。 ( 表示 &gt;，) 表示&lt;，] 表示&lt; 或=，[ 表示 &gt; 或=</p><pre class="programlisting">
1. [a-b] = a &lt;= x &lt;= b

2. (a-b] = a &lt; x &lt;= b

3. [a-b) = a &lt;= x &lt; b

4. (a-b) = a &lt; x &lt; b
</pre><p>( 符号是可选的，因此 a-b 与 (a-b) 的含义相同</p></dd><dt><span class="term"><code class="varname">pixeltype text</code></span></dt><dd><p><a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>中描述的已定义像素类型之一</p></dd><dt><span class="term"><code class="varname">nodataval double precision</code></span></dt><dd><p>视为无数据的值。 对于支持透明度的图像输出，这些将为空白。</p></dd></dl></div></div><div class="refsection" id="idm26967"><h2>示例：将波段 2 重新分类为 8BUI，其中 255 是无数据值</h2><pre class="programlisting">SELECT ROW(2, '0-100:1-10, 101-500:11-150,501 - 10000: 151-254', '8BUI', 255)::reclassarg;</pre></div><div class="refsection" id="idm26970"><h2>示例：将波段 1 重新分类为 1BB 并且未定义 nodata 值</h2><pre class="programlisting">SELECT ROW(1, '0-100]:0, (100-255:1', '1BB', NULL)::reclassarg;</pre></div><div class="refsection" id="idm26973"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a></p></div></div><div class="refentry" id="summarystats"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>summarystats — ST_SummaryStats 和 ST_SummaryStatsAgg 函数返回的复合类型。</p></div><div class="refsection" id="idm26981"><h2>描述</h2><p><a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> 和 <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> 函数返回的复合类型。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">count integer </span></dt><dd><p>摘要统计数据的像素数。 </p></dd><dt><span class="term">sum double precision </span></dt><dd><p>所有计数像素值的总和。 </p></dd><dt><span class="term">mean double precision </span></dt><dd><p>所有计数像素值的算术平均值。 </p></dd><dt><span class="term">stddev double precision </span></dt><dd><p>所有计数像素值的标准偏差。 </p></dd><dt><span class="term">min double precision </span></dt><dd><p>计数像素值的最小值。 </p></dd><dt><span class="term">max double precision </span></dt><dd><p>计数像素值的最大值。 </p></dd></dl></div><p>

                </p></div><div class="refsection" id="idm27011"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>, <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> </p></div></div><div class="refentry" id="unionarg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>unionarg — 用作 ST_Union 函数的输入的复合类型，定义要处理的波段和 UNION 操作的行为。</p></div><div class="refsection" id="idm27020"><h2>描述</h2><p>用作 ST_Union 函数的输入的复合类型，定义要处理的波段和 UNION 操作的行为。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">nband integer </code></span></dt><dd><p>从 1 开始的值，指示要处理的每个输入栅格的波段。 </p></dd><dt><span class="term"><code class="varname">uniontype text </code></span></dt><dd><p>UNION 操作的类型。<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a> 中描述的已定义类型之一。 </p></dd></dl></div><p>

                </p></div><div class="refsection" id="idm27035"><h2>相关信息</h2><p>
                    <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>
                </p></div></div></section><section class="section" id="Raster_Management_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.2. 栅格管理</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_AddRasterConstraints">AddRasterConstraints</a></span><span class="refpurpose"> — 将栅格约束添加到已加载的栅格表中，用于特定列，该列约束了空间参考、比例、块大小、对齐、波段、波段类型以及一个标志，用于表示栅格列是否被规则地分块。表必须加载数据才能推断出约束。如果约束设置成功，则返回 true，否则会发出通知。</span></li><li><span class="refentrytitle"><a href="#RT_DropRasterConstraints">DropRasterConstraints</a></span><span class="refpurpose"> — 删除引用栅格表列的 PostGIS 栅格约束。 如果您需要重新加载数据或更新栅格列数据，则非常有用。</span></li><li><span class="refentrytitle"><a href="#RT_AddOverviewConstraints">AddOverviewConstraints</a></span><span class="refpurpose"> — 将栅格列标记为另一栅格列的概述。</span></li><li><span class="refentrytitle"><a href="#RT_DropOverviewConstraints">DropOverviewConstraints</a></span><span class="refpurpose"> — 取消栅格列作为另一栅格列概览的标记。</span></li><li><span class="refentrytitle"><a href="#RT_PostGIS_GDAL_Version">PostGIS_GDAL_Version</a></span><span class="refpurpose"> — 报告 PostGIS 使用的 GDAL 库的版本。</span></li><li><span class="refentrytitle"><a href="#RT_PostGIS_Raster_Lib_Build_Date">PostGIS_Raster_Lib_Build_Date</a></span><span class="refpurpose"> — 报告完整的栅格库构建日期。</span></li><li><span class="refentrytitle"><a href="#RT_PostGIS_Raster_Lib_Version">PostGIS_Raster_Lib_Version</a></span><span class="refpurpose"> — 报告完整的栅格版本和构建配置信息。</span></li><li><span class="refentrytitle"><a href="#RT_ST_GDALDrivers">ST_GDALDrivers</a></span><span class="refpurpose"> — 通过 GDAL 返回 PostGIS 支持的栅格格式列表。 ST_AsGDALRaster 仅可使用 can_write=True 的格式</span></li><li><span class="refentrytitle"><a href="#RT_ST_Contour">ST_Contour</a></span><span class="refpurpose"> — 使用  GDAL 轮廓算法从提供的栅格波段生成一组矢量轮廓。</span></li><li><span class="refentrytitle"><a href="#RT_ST_InterpolateRaster">ST_InterpolateRaster</a></span><span class="refpurpose"> — 基于输入的 3 维点集插值网格表面，使用 X 和 Y 值在网格上定位点，并使用点的 Z 值作为表面高程。 </span></li><li><span class="refentrytitle"><a href="#RT_UpdateRasterSRID">UpdateRasterSRID</a></span><span class="refpurpose"> — 更改用户指定的列和表中所有栅格的 SRID。 </span></li><li><span class="refentrytitle"><a href="#RT_CreateOverview">ST_CreateOverview</a></span><span class="refpurpose"> — 创建给定栅格覆盖范围的降低分辨率版本。 </span></li></ul></div><div class="refentry" id="RT_AddRasterConstraints"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddRasterConstraints — 将栅格约束添加到已加载的栅格表中，用于特定列，该列约束了空间参考、比例、块大小、对齐、波段、波段类型以及一个标志，用于表示栅格列是否被规则地分块。表必须加载数据才能推断出约束。如果约束设置成功，则返回 true，否则会发出通知。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">AddRasterConstraints</strong>(</code>name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, boolean  <var class="pdparam">srid=true</var>, boolean  <var class="pdparam">scale_x=true</var>, boolean  <var class="pdparam">scale_y=true</var>, boolean  <var class="pdparam">blocksize_x=true</var>, boolean  <var class="pdparam">blocksize_y=true</var>, boolean  <var class="pdparam">same_alignment=true</var>, boolean  <var class="pdparam">regular_blocking=false</var>, boolean  <var class="pdparam">num_bands=true</var> , boolean  <var class="pdparam">pixel_types=true</var> , boolean  <var class="pdparam">nodata_values=true</var> , boolean  <var class="pdparam">out_db=true</var> , boolean  <var class="pdparam">extent=true</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">AddRasterConstraints</strong>(</code>name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, text[]  <var class="pdparam">VARIADIC constraints</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">AddRasterConstraints</strong>(</code>name  <var class="pdparam">rastschema</var>, name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, text[]  <var class="pdparam">VARIADIC constraints</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">AddRasterConstraints</strong>(</code>name  <var class="pdparam">rastschema</var>, name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, boolean  <var class="pdparam">srid=true</var>, boolean  <var class="pdparam">scale_x=true</var>, boolean  <var class="pdparam">scale_y=true</var>, boolean  <var class="pdparam">blocksize_x=true</var>, boolean  <var class="pdparam">blocksize_y=true</var>, boolean  <var class="pdparam">same_alignment=true</var>, boolean  <var class="pdparam">regular_blocking=false</var>, boolean  <var class="pdparam">num_bands=true</var>, boolean  <var class="pdparam">pixel_types=true</var>, boolean  <var class="pdparam">nodata_values=true</var> , boolean  <var class="pdparam">out_db=true</var> , boolean  <var class="pdparam">extent=true</var> <code>)</code>;</p></div></div><div class="refsection" id="idm27167"><h2>描述</h2><p>在栅格列上生成约束，用于显示 <code class="varname">raster_columns</code> 栅格目录中的信息。<code class="varname"> rastschema</code> 是表所在的表模式的名称。<code class="varname">srid</code> 必须是对 SPATIAL_REF_SYS 表中条目的整数值引用。</p><p><code class="varname">raster2pgsql</code> 加载器使用此函数来注册栅格表</p><p>要传入的有效约束名称：有关更多详细信息，请参阅<a class="xref" href="#RT_Raster_Columns" title="10.2.1. 栅格列目录">Section 10.2.1, “栅格列目录”</a>。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">blocksize </code>设置 X 和 Y 块大小</p></li><li class="listitem"><p><code class="varname">blocksize_x </code>设置 X 个图块（每个图块的宽度（以像素为单位））</p></li><li class="listitem"><p><code class="varname">blocksize_y</code> 设置 Y 图块（每个图块的像素高度）</p></li><li class="listitem"><p><code class="varname">extent</code>计算整个表的范围并应用约束所有栅格必须在该范围内</p></li><li class="listitem"><p><code class="varname">num_bands</code> 波段数量</p></li><li class="listitem"><p><code class="varname">Pixel_types</code> 读取每个波段的像素类型数组，确保所有波段 n 具有相同的像素类型</p></li><li class="listitem"><p><code class="varname">Regular_blocking </code>设置空间唯一（两个栅格不能在空间上相同）和覆盖图块（栅格与覆盖范围对齐）约束</p></li><li class="listitem"><p><code class="varname">Same_alignment</code> 确保它们都具有相同的对齐方式，这意味着您比较的任何两个图块都将返回 true。 请参阅 <a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a>。</p></li><li class="listitem"><p><code class="varname">srid</code> 确保所有人都有相同的 srid</p></li><li class="listitem"><p>More--任何列为上述函数输入的内容</p></li></ul></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数根据表中已有的数据推断约束。 因此，要使其正常工作，您必须首先创建栅格列，然后向其加载数据。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果在应用约束后需要在表中加载更多数据，并且数据范围已更改，则可能需要运行 DropRasterConstraints。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm27213"><h2>示例：根据数据对列应用所有可能的约束</h2><pre class="programlisting">CREATE TABLE myrasters(rid SERIAL primary key, rast raster);
INSERT INTO myrasters(rast)
SELECT ST_AddBand(ST_MakeEmptyRaster(1000, 1000, 0.3, -0.3, 2, 2, 0, 0,4326), 1, '8BSI'::text, -129, NULL);

SELECT AddRasterConstraints('myrasters'::name, 'rast'::name);


-- verify if registered correctly in the raster_columns view --
SELECT srid, scale_x, scale_y, blocksize_x, blocksize_y, num_bands, pixel_types, nodata_values
    FROM raster_columns
    WHERE r_table_name = 'myrasters';

 srid | scale_x | scale_y | blocksize_x | blocksize_y | num_bands | pixel_types| nodata_values
------+---------+---------+-------------+-------------+-----------+-------------+---------------
 4326 |       2 |       2 |        1000 |        1000 |         1 | {8BSI}      | {0}
        </pre></div><div class="refsection" id="idm27216"><h2>示例：应用单一约束</h2><pre class="programlisting">CREATE TABLE public.myrasters2(rid SERIAL primary key, rast raster);
INSERT INTO myrasters2(rast)
SELECT ST_AddBand(ST_MakeEmptyRaster(1000, 1000, 0.3, -0.3, 2, 2, 0, 0,4326), 1, '8BSI'::text, -129, NULL);

SELECT AddRasterConstraints('public'::name, 'myrasters2'::name, 'rast'::name,'regular_blocking', 'blocksize');
-- get notice--
NOTICE:  Adding regular blocking constraint
NOTICE:  Adding blocksize-X constraint
NOTICE:  Adding blocksize-Y constraint</pre></div><div class="refsection" id="idm27219"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Columns" title="10.2.1. 栅格列目录">Section 10.2.1, “栅格列目录”</a>, <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>, <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="RT_DropRasterConstraints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>DropRasterConstraints — 删除引用栅格表列的 PostGIS 栅格约束。 如果您需要重新加载数据或更新栅格列数据，则非常有用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">DropRasterConstraints</strong>(</code>name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, boolean  <var class="pdparam">srid</var>, boolean  <var class="pdparam">scale_x</var>, boolean  <var class="pdparam">scale_y</var>, boolean  <var class="pdparam">blocksize_x</var>, boolean  <var class="pdparam">blocksize_y</var>, boolean  <var class="pdparam">same_alignment</var>, boolean  <var class="pdparam">regular_blocking</var>, boolean  <var class="pdparam">num_bands=true</var>, boolean  <var class="pdparam">pixel_types=true</var>, boolean  <var class="pdparam">nodata_values=true</var>, boolean  <var class="pdparam">out_db=true</var> , boolean  <var class="pdparam">extent=true</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">DropRasterConstraints</strong>(</code>name  <var class="pdparam">rastschema</var>, name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, boolean  <var class="pdparam">srid=true</var>, boolean  <var class="pdparam">scale_x=true</var>, boolean  <var class="pdparam">scale_y=true</var>, boolean  <var class="pdparam">blocksize_x=true</var>, boolean  <var class="pdparam">blocksize_y=true</var>, boolean  <var class="pdparam">same_alignment=true</var>, boolean  <var class="pdparam">regular_blocking=false</var>, boolean  <var class="pdparam">num_bands=true</var>, boolean  <var class="pdparam">pixel_types=true</var>, boolean  <var class="pdparam">nodata_values=true</var>, boolean  <var class="pdparam">out_db=true</var> , boolean  <var class="pdparam">extent=true</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">DropRasterConstraints</strong>(</code>name  <var class="pdparam">rastschema</var>, name  <var class="pdparam">rasttable</var>, name  <var class="pdparam">rastcolumn</var>, text[]  <var class="pdparam">constraints</var><code>)</code>;</p></div></div><div class="refsection" id="idm27342"><h2>描述</h2><p>删除引用由<a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>添加的栅格表列的 PostGIS 栅格约束。 如果您需要加载更多数据或更新栅格列数据，则非常有用。 如果您想要删除栅格表或栅格列，则无需执行此操作。 </p><p>要删除栅格表，请使用标准 </p><pre class="programlisting">DROP TABLE mytable</pre><p>要仅删除栅格列并保留表的其余部分，请使用标准 SQL </p><pre class="programlisting">ALTER TABLE mytable DROP COLUMN rast</pre><p>如果删除列或表，该表将从 <code class="varname">raster_columns</code> 目录中消失。 但是，如果仅删除约束，则栅格列仍将列在<code class="varname"> raster_columns </code>目录中，但除了列名称和表之外，不会有任何其他信息。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm27354"><h2>示例</h2><pre class="programlisting">SELECT DropRasterConstraints ('myrasters','rast');
----RESULT output ---
t

-- verify change in raster_columns --
SELECT srid, scale_x, scale_y, blocksize_x, blocksize_y, num_bands, pixel_types, nodata_values
    FROM raster_columns
    WHERE r_table_name = 'myrasters';

 srid | scale_x | scale_y | blocksize_x | blocksize_y | num_bands | pixel_types| nodata_values
------+---------+---------+-------------+-------------+-----------+-------------+---------------
    0 |         |         |             |             |           |             |
        </pre></div><div class="refsection" id="idm27357"><h2>相关信息</h2><p><a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a></p></div></div><div class="refentry" id="RT_AddOverviewConstraints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>AddOverviewConstraints — 将栅格列标记为另一栅格列的概述。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">AddOverviewConstraints</strong>(</code>name  <var class="pdparam">ovschema</var>, name  <var class="pdparam">ovtable</var>, name  <var class="pdparam">ovcolumn</var>, name  <var class="pdparam">refschema</var>, name  <var class="pdparam">reftable</var>, name  <var class="pdparam">refcolumn</var>, int  <var class="pdparam">ovfactor</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">AddOverviewConstraints</strong>(</code>name  <var class="pdparam">ovtable</var>, name  <var class="pdparam">ovcolumn</var>, name  <var class="pdparam">reftable</var>, name  <var class="pdparam">refcolumn</var>, int  <var class="pdparam">ovfactor</var><code>)</code>;</p></div></div><div class="refsection" id="idm27409"><h2>描述</h2><p>添加对栅格列的约束，用于显示<code class="varname"> raster_overviews</code> 栅格目录中的信息。 </p><p><code class="varname">ovfactor</code> 参数表示概览列中的比例乘数：概览因子越高，分辨率越低。 </p><p>当省略<code class="varname"> ovschema </code>和<code class="varname"> refschema </code>参数时，将使用扫描 <code class="varname">search_path </code>找到的第一个表。 </p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm27420"><h2>示例</h2><pre class="programlisting">CREATE TABLE res1 AS SELECT
ST_AddBand(
  ST_MakeEmptyRaster(1000, 1000, 0, 0, 2),
  1, '8BSI'::text, -129, NULL
) r1;

CREATE TABLE res2 AS SELECT
ST_AddBand(
  ST_MakeEmptyRaster(500, 500, 0, 0, 4),
  1, '8BSI'::text, -129, NULL
) r2;

SELECT AddOverviewConstraints('res2', 'r2', 'res1', 'r1', 2);

-- verify if registered correctly in the raster_overviews view --
SELECT o_table_name ot, o_raster_column oc,
       r_table_name rt, r_raster_column rc,
       overview_factor f
FROM raster_overviews WHERE o_table_name = 'res2';
  ot  | oc |  rt  | rc | f
------+----+------+----+---
 res2 | r2 | res1 | r1 | 2
(1 row)
        </pre></div><div class="refsection" id="idm27423"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Overviews" title="10.2.2. 栅格概述">Section 10.2.2, “栅格概述”</a>, <a class="xref" href="#RT_DropOverviewConstraints" title="DropOverviewConstraints">DropOverviewConstraints</a>, <a class="xref" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a>, <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a> </p></div></div><div class="refentry" id="RT_DropOverviewConstraints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>DropOverviewConstraints — 取消栅格列作为另一栅格列概览的标记。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">DropOverviewConstraints</strong>(</code>name  <var class="pdparam">ovschema</var>, name  <var class="pdparam">ovtable</var>, name  <var class="pdparam">ovcolumn</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">DropOverviewConstraints</strong>(</code>name  <var class="pdparam">ovtable</var>, name  <var class="pdparam">ovcolumn</var><code>)</code>;</p></div></div><div class="refsection" id="idm27457"><h2>描述</h2><p>从栅格列中删除用于将其显示为<code class="varname"> raster_overviews </code>栅格目录中另一个栅格列的概述的约束。 </p><p>当省略 <code class="varname">ovschema </code>参数时，将使用扫描 <code class="varname">search_path </code>找到的第一个表。 </p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm27465"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Overviews" title="10.2.2. 栅格概述">Section 10.2.2, “栅格概述”</a>, <a class="xref" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>, <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a> </p></div></div><div class="refentry" id="RT_PostGIS_GDAL_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_GDAL_Version — 报告 PostGIS 使用的 GDAL 库的版本。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_GDAL_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm27481"><h2>描述</h2><p>报告 PostGIS 使用的 GDAL 库的版本。 还将检查并报告 GDAL 是否可以找到其数据文件。</p></div><div class="refsection" id="idm27484"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_GDAL_Version();
       postgis_gdal_version
-----------------------------------
 GDAL 1.11dev, released 2013/04/13
                </pre></div><div class="refsection" id="idm27487"><h2>相关信息</h2><p>
                    <a class="xref" href="#postgis_gdal_datapath" title="postgis.gdal_datapath">postgis.gdal_datapath</a>
                </p></div></div><div class="refentry" id="RT_PostGIS_Raster_Lib_Build_Date"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Raster_Lib_Build_Date — 报告完整的栅格库构建日期。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Raster_Lib_Build_Date</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm27501"><h2>描述</h2><p>报告栅格构建日期</p></div><div class="refsection" id="idm27504"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Raster_Lib_Build_Date();
postgis_raster_lib_build_date
-----------------------------
2010-04-28 21:15:10
</pre></div><div class="refsection" id="idm27507"><h2>相关信息</h2><p> <a class="xref" href="#RT_PostGIS_Raster_Lib_Version" title="PostGIS_Raster_Lib_Version">PostGIS_Raster_Lib_Version</a></p></div></div><div class="refentry" id="RT_PostGIS_Raster_Lib_Version"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>PostGIS_Raster_Lib_Version — 报告完整的栅格版本和构建配置信息。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">PostGIS_Raster_Lib_Version</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm27521"><h2>描述</h2><p>报告完整的栅格版本和构建配置信息。</p></div><div class="refsection" id="idm27524"><h2>示例</h2><pre class="programlisting">SELECT PostGIS_Raster_Lib_Version();
postgis_raster_lib_version
-----------------------------
 2.0.0
</pre></div><div class="refsection" id="idm27527"><h2>相关信息</h2><p> <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a></p></div></div><div class="refentry" id="RT_ST_GDALDrivers"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GDALDrivers — 通过 GDAL 返回 PostGIS 支持的栅格格式列表。 ST_AsGDALRaster 仅可使用 can_write=True 的格式</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_GDALDrivers</strong>(</code>integer  <var class="pdparam">OUT idx</var>, text  <var class="pdparam">OUT short_name</var>, text  <var class="pdparam">OUT long_name</var>, text  <var class="pdparam">OUT can_read</var>, text  <var class="pdparam">OUT can_write</var>, text  <var class="pdparam">OUT create_options</var><code>)</code>;</p></div></div><div class="refsection" id="idm27558"><h2>描述</h2><p>返回 GDAL 支持的每种格式的栅格格式短名称、长名称和创建者选项的列表。 使用短名称作为<code class="varname">格式</code>参数 <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>中的输入。 选项根据编译 libgdal 所使用的驱动程序而有所不同。<code class="varname"> create_options </code>返回 XML 格式的 CreationOptionList/Option 集，其中包含特定驱动程序的每个创建者选项的名称和可选<code class="varname">type</code>、<code class="varname">description</code>以及<code class="varname"> VALUE</code> 集。 </p><p class="changed">更改：2.5.0 - 添加 can_read 和 can_write 列。</p><p class="changed">更改：2.0.6、2.1.3 - 默认情况下不启用任何驱动程序，除非设置了 GUC 或环境变量 gdal_enabled_drivers。</p><p class="availability">可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。 </p></div><div class="refsection" id="idm27570"><h2>示例：驱动程序列表</h2><pre class="programlisting">SET postgis.gdal_enabled_drivers = 'ENABLE_ALL';
SELECT short_name, long_name, can_write
FROM st_gdaldrivers()
ORDER BY short_name;

   short_name    |                          long_name                          | can_write
-----------------+-------------------------------------------------------------+-----------
 AAIGrid         | Arc/Info ASCII Grid                                         | t
 ACE2            | ACE2                                                        | f
 ADRG            | ARC Digitized Raster Graphics                               | f
 AIG             | Arc/Info Binary Grid                                        | f
 AirSAR          | AirSAR Polarimetric Image                                   | f
 ARG             | Azavea Raster Grid format                                   | t
 BAG             | Bathymetry Attributed Grid                                  | f
 BIGGIF          | Graphics Interchange Format (.gif)                          | f
 BLX             | Magellan topo (.blx)                                        | t
 BMP             | MS Windows Device Independent Bitmap                        | f
 BSB             | Maptech BSB Nautical Charts                                 | f
 PAux            | PCI .aux Labelled                                           | f
 PCIDSK          | PCIDSK Database File                                        | f
 PCRaster        | PCRaster Raster File                                        | f
 PDF             | Geospatial PDF                                              | f
 PDS             | NASA Planetary Data System                                  | f
 PDS4            | NASA Planetary Data System 4                                | t
 PLMOSAIC        | Planet Labs Mosaics API                                     | f
 PLSCENES        | Planet Labs Scenes API                                      | f
 PNG             | Portable Network Graphics                                   | t
 PNM             | Portable Pixmap Format (netpbm)                             | f
 PRF             | Racurs PHOTOMOD PRF                                         | f
 R               | R Object Data Store                                         | t
 Rasterlite      | Rasterlite                                                  | t
 RDA             | DigitalGlobe Raster Data Access driver                      | f
 RIK             | Swedish Grid RIK (.rik)                                     | f
 RMF             | Raster Matrix Format                                        | f
 ROI_PAC         | ROI_PAC raster                                              | f
 RPFTOC          | Raster Product Format TOC format                            | f
 RRASTER         | R Raster                                                    | f
 RS2             | RadarSat 2 XML Product                                      | f
 RST             | Idrisi Raster A.1                                           | t
 SAFE            | Sentinel-1 SAR SAFE Product                                 | f
 SAGA            | SAGA GIS Binary Grid (.sdat, .sg-grd-z)                     | t
 SAR_CEOS        | CEOS SAR Image                                              | f
 SDTS            | SDTS Raster                                                 | f
 SENTINEL2       | Sentinel 2                                                  | f
 SGI             | SGI Image File Format 1.0                                   | f
 SNODAS          | Snow Data Assimilation System                               | f
 SRP             | Standard Raster Product (ASRP/USRP)                         | f
 SRTMHGT         | SRTMHGT File Format                                         | t
 Terragen        | Terragen heightfield                                        | f
 TIL             | EarthWatch .TIL                                             | f
 TSX             | TerraSAR-X Product                                          | f
 USGSDEM         | USGS Optional ASCII DEM (and CDED)                          | t
 VICAR           | MIPL VICAR file                                             | f
 VRT             | Virtual Raster                                              | t
 WCS             | OGC Web Coverage Service                                    | f
 WMS             | OGC Web Map Service                                         | t
 WMTS            | OGC Web Map Tile Service                                    | t
 XPM             | X11 PixMap Format                                           | t
 XYZ             | ASCII Gridded XYZ                                           | t
 ZMap            | ZMap Plus Grid                                              | t
</pre></div><div class="refsection" id="idm27573"><h2>示例：每个驱动程序的选项列表</h2><pre class="programlisting">-- Output the create options XML column of JPEG as a table  --
-- Note you can use these creator options in ST_AsGDALRaster options argument
SELECT (xpath('@name', g.opt))[1]::text As oname,
       (xpath('@type', g.opt))[1]::text As otype,
       (xpath('@description', g.opt))[1]::text As descrip
FROM (SELECT unnest(xpath('/CreationOptionList/Option', create_options::xml)) As opt
FROM  st_gdaldrivers()
WHERE short_name = 'JPEG') As g;

       oname        |  otype  |      descrip
--------------------+---------+-------------------------------------------------
 PROGRESSIVE        | boolean | whether to generate a progressive JPEG
 QUALITY            | int     | good=100, bad=0, default=75
 WORLDFILE          | boolean | whether to generate a worldfile
 INTERNAL_MASK      | boolean | whether to generate a validity mask
 COMMENT            | string  | Comment
 SOURCE_ICC_PROFILE | string  | ICC profile encoded in Base64
 EXIF_THUMBNAIL     | boolean | whether to generate an EXIF thumbnail(overview).
                                By default its max dimension will be 128
 THUMBNAIL_WIDTH    | int     | Forced thumbnail width
 THUMBNAIL_HEIGHT   | int     | Forced thumbnail height
(9 rows)
</pre><pre class="programlisting">

-- raw xml output for creator options for GeoTiff --
SELECT create_options
FROM st_gdaldrivers()
WHERE short_name = 'GTiff';

&lt;CreationOptionList&gt;
    &lt;Option name="COMPRESS" type="string-select"&gt;
        &lt;Value
&gt;NONE&lt;/Value&gt;
        &lt;Value
&gt;LZW&lt;/Value&gt;
        &lt;Value
&gt;PACKBITS&lt;/Value&gt;
        &lt;Value
&gt;JPEG&lt;/Value&gt;
        &lt;Value
&gt;CCITTRLE&lt;/Value&gt;
        &lt;Value
&gt;CCITTFAX3&lt;/Value&gt;
        &lt;Value
&gt;CCITTFAX4&lt;/Value&gt;
        &lt;Value
&gt;DEFLATE&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="PREDICTOR" type="int" description="Predictor Type"/&gt;
    &lt;Option name="JPEG_QUALITY" type="int" description="JPEG quality 1-100" default="75"/&gt;
    &lt;Option name="ZLEVEL" type="int" description="DEFLATE compression level 1-9" default="6"/&gt;
    &lt;Option name="NBITS" type="int" description="BITS for sub-byte files (1-7), sub-uint16 (9-15), sub-uint32 (17-31)"/&gt;
    &lt;Option name="INTERLEAVE" type="string-select" default="PIXEL"&gt;
        &lt;Value
&gt;BAND&lt;/Value&gt;
        &lt;Value
&gt;PIXEL&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="TILED" type="boolean" description="Switch to tiled format"/&gt;
    &lt;Option name="TFW" type="boolean" description="Write out world file"/&gt;
    &lt;Option name="RPB" type="boolean" description="Write out .RPB (RPC) file"/&gt;
    &lt;Option name="BLOCKXSIZE" type="int" description="Tile Width"/&gt;
    &lt;Option name="BLOCKYSIZE" type="int" description="Tile/Strip Height"/&gt;
    &lt;Option name="PHOTOMETRIC" type="string-select"&gt;
        &lt;Value
&gt;MINISBLACK&lt;/Value&gt;
        &lt;Value
&gt;MINISWHITE&lt;/Value&gt;
        &lt;Value
&gt;PALETTE&lt;/Value&gt;
        &lt;Value
&gt;RGB&lt;/Value&gt;
        &lt;Value
&gt;CMYK&lt;/Value&gt;
        &lt;Value
&gt;YCBCR&lt;/Value&gt;
        &lt;Value
&gt;CIELAB&lt;/Value&gt;
        &lt;Value
&gt;ICCLAB&lt;/Value&gt;
        &lt;Value
&gt;ITULAB&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="SPARSE_OK" type="boolean" description="Can newly created files have missing blocks?" default="FALSE"/&gt;
    &lt;Option name="ALPHA" type="boolean" description="Mark first extrasample as being alpha"/&gt;
    &lt;Option name="PROFILE" type="string-select" default="GDALGeoTIFF"&gt;
        &lt;Value
&gt;GDALGeoTIFF&lt;/Value&gt;
        &lt;Value
&gt;GeoTIFF&lt;/Value&gt;
        &lt;Value
&gt;BASELINE&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="PIXELTYPE" type="string-select"&gt;
        &lt;Value
&gt;DEFAULT&lt;/Value&gt;
        &lt;Value
&gt;SIGNEDBYTE&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="BIGTIFF" type="string-select" description="Force creation of BigTIFF file"&gt;
        &lt;Value
&gt;YES&lt;/Value&gt;
        &lt;Value
&gt;NO&lt;/Value&gt;
        &lt;Value
&gt;IF_NEEDED&lt;/Value&gt;
        &lt;Value
&gt;IF_SAFER&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="ENDIANNESS" type="string-select" default="NATIVE" description="Force endianness of created file. For DEBUG purpose mostly"&gt;
        &lt;Value
&gt;NATIVE&lt;/Value&gt;
        &lt;Value
&gt;INVERTED&lt;/Value&gt;
        &lt;Value
&gt;LITTLE&lt;/Value&gt;
        &lt;Value
&gt;BIG&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="COPY_SRC_OVERVIEWS" type="boolean" default="NO" description="Force copy of overviews of source dataset (CreateCopy())"/&gt;
&lt;/CreationOptionList&gt;

-- Output the create options XML column for GTiff as a table  --
SELECT (xpath('@name', g.opt))[1]::text As oname,
       (xpath('@type', g.opt))[1]::text As otype,
       (xpath('@description', g.opt))[1]::text As descrip,
       array_to_string(xpath('Value/text()', g.opt),', ') As vals
FROM (SELECT unnest(xpath('/CreationOptionList/Option', create_options::xml)) As opt
FROM  st_gdaldrivers()
WHERE short_name = 'GTiff') As g;

       oname        |     otype     |                               descrip                                |                                   vals
--------------------+---------------+----------------------------------------------------------------------+---------------------------------------------------------------------------
 COMPRESS           | string-select |                                                                      | NONE, LZW, PACKBITS, JPEG, CCITTRLE, CCITTFAX3, CCITTFAX4, DEFLATE
 PREDICTOR          | int           | Predictor Type                                                       |
 JPEG_QUALITY       | int           | JPEG quality 1-100                                                   |
 ZLEVEL             | int           | DEFLATE compression level 1-9                                        |
 NBITS              | int           | BITS for sub-byte files (1-7), sub-uint16 (9-15), sub-uint32 (17-31) |
 INTERLEAVE         | string-select |                                                                      | BAND, PIXEL
 TILED              | boolean       | Switch to tiled format                                               |
 TFW                | boolean       | Write out world file                                                 |
 RPB                | boolean       | Write out .RPB (RPC) file                                            |
 BLOCKXSIZE         | int           | Tile Width                                                           |
 BLOCKYSIZE         | int           | Tile/Strip Height                                                    |
 PHOTOMETRIC        | string-select |                                                                      | MINISBLACK, MINISWHITE, PALETTE, RGB, CMYK, YCBCR, CIELAB, ICCLAB, ITULAB
 SPARSE_OK          | boolean       | Can newly created files have missing blocks?                         |
 ALPHA              | boolean       | Mark first extrasample as being alpha                                |
 PROFILE            | string-select |                                                                      | GDALGeoTIFF, GeoTIFF, BASELINE
 PIXELTYPE          | string-select |                                                                      | DEFAULT, SIGNEDBYTE
 BIGTIFF            | string-select | Force creation of BigTIFF file                                       | YES, NO, IF_NEEDED, IF_SAFER
 ENDIANNESS         | string-select | Force endianness of created file. For DEBUG purpose mostly           | NATIVE, INVERTED, LITTLE, BIG
 COPY_SRC_OVERVIEWS | boolean       | Force copy of overviews of source dataset (CreateCopy())             |
(19 rows)

</pre></div><div class="refsection" id="idm27577"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a> </p></div></div><div class="refentry" id="RT_ST_Contour"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Contour — 使用 <a class="link" href="https://gdal.org/api/gdal_alg.html?highlight=contour#_CPPv421GDALContourGenerateEx15GDALRasterBandHPv12CSLConstList16GDALProgressFuncPv" target="_top"> GDAL 轮廓算法</a>从提供的栅格波段生成一组矢量轮廓。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_Contour</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">bandnumber=1</var>, double precision <var class="pdparam">level_interval=100.0</var>, double precision <var class="pdparam">level_base=0.0</var>, double precision[] <var class="pdparam">fixed_levels=ARRAY[]</var>, boolean <var class="pdparam">polygonize=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm27611"><h2>描述</h2><p>使用<a class="link" href="https://gdal.org/api/gdal_alg.html?highlight=contour#_CPPv421GDALContourGenerateEx15GDALRasterBandHPv12CSLConstList16GDALProgressFuncPv" target="_top"> GDAL 轮廓算法</a>从提供的栅格带生成一组矢量轮廓。</p><p>当<code class="varname">fixed_levels</code>参数为非空数组时，<code class="varname">level_interval</code>和<code class="varname">level_base</code>参数被忽略。 </p><p>输入参数为： </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">rast</code></span></dt><dd><p>生成等高线的栅格</p></dd><dt><span class="term"><code class="varname">bandnumber</code></span></dt><dd><p>用于生成等高线的波段</p></dd><dt><span class="term"><code class="varname">level_interval</code></span></dt><dd><p>生成的等高线之间的高程间隔</p></dd><dt><span class="term"><code class="varname">level_base</code></span></dt><dd><p>用于应用等高线间隔的 “基准”通常为零，但也可以是不同的值。要生成高程为10米的等高线，间隔为5、15、25、...，LEVEL_BASE 将设为5。</p></dd><dt><span class="term"><code class="varname">fixed_levels</code></span></dt><dd><p>生成的等高线之间的高程间隔</p></dd><dt><span class="term"><code class="varname">polygonize</code></span></dt><dd><p>如果 <code class="literal">true</code>，将创建等高线多边形，而不是多边形线。</p></dd></dl></div><p>返回值是一组具有以下属性的记录： </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">geom</code></span></dt><dd><p>轮廓线的几何形状。</p></dd><dt><span class="term"><code class="varname">id</code></span></dt><dd><p>GDAL 赋予轮廓线的唯一标识符。</p></dd><dt><span class="term"><code class="varname">value</code></span></dt><dd><p>该线代表的栅格值。 对于高程 DEM 输入，这将是输出等高线的高程。</p></dd></dl></div><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm27670"><h2>示例</h2><pre class="programlisting">WITH c AS (
SELECT (ST_Contour(rast, 1, fixed_levels =&gt; ARRAY[100.0, 200.0, 300.0])).*
FROM dem_grid WHERE rid = 1
)
SELECT st_astext(geom), id, value
FROM c;</pre></div><div class="refsection" id="idm27673"><h2>相关信息</h2><p>
        <a class="xref" href="#RT_ST_InterpolateRaster" title="ST_InterpolateRaster">ST_InterpolateRaster</a>
        </p></div></div><div class="refentry" id="RT_ST_InterpolateRaster"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_InterpolateRaster — 基于输入的 3 维点集插值网格表面，使用 X 和 Y 值在网格上定位点，并使用点的 Z 值作为表面高程。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_InterpolateRaster</strong>(</code>geometry <var class="pdparam">input_points</var>, text <var class="pdparam">algorithm_options</var>, raster <var class="pdparam">template</var>, integer <var class="pdparam">template_band_num=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm27698"><h2>描述</h2><p>基于输入的 3 维点集插值网格表面，使用 X 和 Y 值在网格上定位点，并使用点的 Z 值作为表面高程。 有五种可用的插值算法：反距离、反距离最近邻、移动平均、最近邻和线性插值。 有关算法及其参数的更多详细信息，请参阅 <a class="link" href="https://gdal.org/programs/gdal_grid.html#interpolation-algorithms" target="_top"> gdal_grid 文档</a>。 有关如何计算插值的更多信息，请参阅<a class="link" href="https://gdal.org/tutorials/gdal_grid_tut.html" target="_top"> GDAL 网格教程</a>。 </p><p>输入参数为： </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">input_points</code></span></dt><dd><p>驱动插值的点。 任何具有 Z 值的几何图形都是可接受的，将使用输入中的所有点。</p></dd><dt><span class="term"><code class="varname">algorithm_options</code></span></dt><dd><p>定义算法和算法选项的字符串，采用<a class="link" href="https://gdal.org/programs/gdal_grid.html#interpolation-algorithms" target="_top"> gdal_grid </a>使用的格式。 例如，对于平滑度为 2 的反距离插值，您可以使用“invdist:smoothing=2.0” </p></dd><dt><span class="term"><code class="varname">template</code></span></dt><dd><p>用于驱动输出栅格几何形状的栅格模板。 宽度、高度、像素大小、空间范围和像素类型将从该模板中读取。 </p></dd><dt><span class="term"><code class="varname">template_band_num</code></span></dt><dd><p>默认情况下，模板栅格中的第一个波段用于驱动输出栅格，但可以使用此参数进行调整。 </p></dd></dl></div><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm27727"><h2>示例</h2><pre class="programlisting">SELECT ST_InterpolateRaster(
    'MULTIPOINT(10.5 9.5 1000, 11.5 8.5 1000, 10.5 8.5 500, 11.5 9.5 500)'::geometry,
    'invdist:smoothing:2.0',
    ST_AddBand(ST_MakeEmptyRaster(200, 400, 10, 10, 0.01, -0.005, 0, 0), '16BSI')
)</pre></div><div class="refsection" id="idm27730"><h2>相关信息</h2><p>
            <a class="xref" href="#RT_ST_Contour" title="ST_Contour">ST_Contour</a>
            </p></div></div><div class="refentry" id="RT_UpdateRasterSRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>UpdateRasterSRID — 更改用户指定的列和表中所有栅格的 SRID。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">UpdateRasterSRID</strong>(</code>name  <var class="pdparam">schema_name</var>, name  <var class="pdparam">table_name</var>, name  <var class="pdparam">column_name</var>, integer  <var class="pdparam">new_srid</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">UpdateRasterSRID</strong>(</code>name  <var class="pdparam">table_name</var>, name  <var class="pdparam">column_name</var>, integer  <var class="pdparam">new_srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm27767"><h2>描述</h2><p>更改用户指定的列和表中所有栅格的 SRID。 在更改指定列栅格的 SRID 之前，该函数将删除所有适当的列约束（范围、对齐方式和 SRID）。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不会触及栅格的数据（波段像素值）。 仅栅格的元数据发生更改。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm27773"><h2>相关信息</h2><p>
          <a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a>
        </p></div></div><div class="refentry" id="RT_CreateOverview"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CreateOverview — 创建给定栅格覆盖范围的降低分辨率版本。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">regclass <strong class="fsfunc">ST_CreateOverview</strong>(</code>regclass  <var class="pdparam">tab</var>, name  <var class="pdparam">col</var>, int  <var class="pdparam">factor</var>, text  <var class="pdparam">algo='NearestNeighbor'</var><code>)</code>;</p></div></div><div class="refsection" id="idm27798"><h2>描述</h2><p>使用源表中重新采样的图块创建一个概览表。 输出图块将具有与输入图块相同的大小，并以较低的分辨率覆盖相同的空间范围（像素大小在两个方向上都是原始图块的 1/<code class="varname">factor</code>）。 </p><p>概览表将在<code class="varname"> raster_overviews </code>目录中提供，并将强制执行栅格约束。 </p><p>算法选项有：“NearestNeighbor”、“Bilinear”、“Cubic”、“CubicSpline”和“Lanczos”。 有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。</p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm27807"><h2>示例</h2><p>输出质量通常较好，但产品格式较慢</p><pre class="programlisting">SELECT ST_CreateOverview('mydata.mytable'::regclass, 'rast', 2, 'Lanczos');</pre><p>输出到更快地处理默认最近邻</p><pre class="programlisting">SELECT ST_CreateOverview('mydata.mytable'::regclass, 'rast', 2);</pre></div><div class="refsection" id="idm27813"><h2>相关信息</h2><p><a class="xref" href="#RT_Retile" title="ST_Retile">ST_Retile</a>, <a class="xref" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>, <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>, <a class="xref" href="#RT_Raster_Overviews" title="10.2.2. 栅格概述">Section 10.2.2, “栅格概述”</a> </p></div></div></section><section class="section" id="Raster_Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.3. 栅格构造器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_AddBand">ST_AddBand</a></span><span class="refpurpose"> — 返回一个栅格，其中在给定索引位置添加了给定类型的新波段和给定初始值。 如果未指定索引，则将带添加到末尾。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_AsRaster">ST_AsRaster</a></span><span class="refpurpose"> — 将 PostGIS 几何图形转换为 PostGIS 栅格。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Band">ST_Band</a></span><span class="refpurpose"> — 返回现有栅格的一个或多个波段作为新栅格。 对于从现有栅格构建新栅格非常有用。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MakeEmptyCoverage">ST_MakeEmptyCoverage</a></span><span class="refpurpose"> — 用空栅格图块网格覆盖地理参考区域。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MakeEmptyRaster">ST_MakeEmptyRaster</a></span><span class="refpurpose"> — 返回一个空白栅格（不包含波段），其具有给定的尺寸（宽度和高度）、左上角 X 和 Y 坐标、像素大小和旋转参数（scalex、scaley、skewx 和 skewy），以及参考系统（SRID）。如果传递了一个栅格，则返回一个具有相同大小、对齐方式和 SRID 的新栅格。如果省略了 SRID，则空间参考将设置为未知（0）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Tile">ST_Tile</a></span><span class="refpurpose"> — 返回根据输出栅格的所需维度分割输入栅格而产生的一组栅格。</span></li><li><span class="refentrytitle"><a href="#RT_Retile">ST_Retile</a></span><span class="refpurpose"> — 从任意平铺的栅格覆盖范围返回一组配置的平铺。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_FromGDALRaster">ST_FromGDALRaster</a></span><span class="refpurpose"> — 从受支持的 GDAL 栅格文件返回栅格。</span></li></ul></div><div class="refentry" id="RT_ST_AddBand"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AddBand — 返回一个栅格，其中在给定索引位置添加了给定类型的新波段和给定初始值。 如果未指定索引，则将带添加到末尾。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(1) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">rast</var>, addbandarg[]  <var class="pdparam">addbandargset</var><code>)</code>;</p><p><code class="funcdef">(2) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">index</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">initialvalue=0</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">(3) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">initialvalue=0</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">(4) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">torast</var>, raster  <var class="pdparam">fromrast</var>, integer  <var class="pdparam">fromband=1</var>, integer  <var class="pdparam">torastindex=at_end</var><code>)</code>;</p><p><code class="funcdef">(5) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">torast</var>, raster[]  <var class="pdparam">fromrasts</var>, integer  <var class="pdparam">fromband=1</var>, integer  <var class="pdparam">torastindex=at_end</var><code>)</code>;</p><p><code class="funcdef">(6) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">index</var>, text  <var class="pdparam">outdbfile</var>, integer[]  <var class="pdparam">outdbindex</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">(7) raster <strong class="fsfunc">ST_AddBand</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">outdbfile</var>, integer[]  <var class="pdparam">outdbindex</var>, integer  <var class="pdparam">index=at_end</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm27936"><h2>描述</h2><p>返回一个栅格，其中在给定位置（索引）、给定类型、给定初始值和给定 nodata 值中添加了新波段。 如果未指定索引，则将带添加到末尾。 如果未指定 <code class="varname">fromband</code>，则假定为 band 1。 像素类型是 <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中指定的像素类型之一的字符串表示形式。 如果指定了现有索引，则所有&gt;=该索引的后续波段都会增加 1。如果指定的初始值大于像素类型的最大值，则初始值将设置为像素类型允许的最高值。 </p><p>对于采用 <a class="xref" href="#addbandarg" title="addbandarg">addbandarg</a>数组的格式（格式 1），特定addbandarg 的索引值与该 addbandarg 描述的波段添加到栅格时的栅格相关。 请参阅下面的多个新波段示例。 </p><p>对于采用栅格数组的格式（格式 5），如果<code class="varname"> torast</code>为 NULL，则数组中每个栅格的<code class="varname"> fromband </code>波段将累积到新栅格中。 </p><p>对于采用 <code class="varname">outdbfile </code>的格式（格式6 和 7），该值必须包含栅格文件的完整路径。 该文件还必须可供 postgres 服务器进程访问。 </p><p class="enhanced">增强：2.1.0 添加了对 addbandarg 的支持。</p><p class="enhanced">增强：2.1.0 添加了对新的 out-db波段的支持。</p></div><div class="refsection" id="idm27950"><h2>示例：单个新波段</h2><pre class="programlisting">-- Add another band of type 8 bit unsigned integer with pixels initialized to 200
UPDATE dummy_rast
    SET rast = ST_AddBand(rast,'8BUI'::text,200)
WHERE rid = 1;
                </pre><pre class="programlisting">-- Create an empty raster 100x100 units, with upper left  right at 0, add 2 bands (band 1 is 0/1 boolean bit switch, band2 allows values 0-15)
-- uses addbandargs
INSERT INTO dummy_rast(rid,rast)
    VALUES(10, ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 1, -1, 0, 0, 0),
    ARRAY[
        ROW(1, '1BB'::text, 0, NULL),
        ROW(2, '4BUI'::text, 0, NULL)
            ]::addbandarg[]
     )
    );

-- output meta data of raster bands to verify all is right --
SELECT  (bmd).*
FROM (SELECT ST_BandMetaData(rast,generate_series(1,2)) As bmd
    FROM dummy_rast WHERE rid = 10) AS foo;
 --result --
 pixeltype | nodatavalue | isoutdb | path
-----------+----------------+-------------+---------+------
 1BB       |             | f       |
 4BUI      |             | f       |


-- output meta data of raster -
SELECT  (rmd).width, (rmd).height, (rmd).numbands
FROM (SELECT ST_MetaData(rast) As rmd
    FROM dummy_rast WHERE rid = 10) AS foo;
-- result --
 upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
------------+------------+-------+--------+------------+------------+-------+-------+------+----------
          0 |          0 |   100 |    100 |      1 |     -1 |     0 |     0 |   0 |        2
                </pre></div><div class="refsection" id="idm27954"><h2>示例：多个新波段</h2><pre class="programlisting">SELECT
    *
FROM ST_BandMetadata(
    ST_AddBand(
        ST_MakeEmptyRaster(10, 10, 0, 0, 1, -1, 0, 0, 0),
        ARRAY[
            ROW(NULL, '8BUI', 255, 0),
            ROW(NULL, '16BUI', 1, 2),
            ROW(2, '32BUI', 100, 12),
            ROW(2, '32BF', 3.14, -1)
        ]::addbandarg[]
    ),
    ARRAY[]::integer[]
);

 bandnum | pixeltype | nodatavalue | isoutdb | path
---------+-----------+-------------+---------+------
       1 | 8BUI      |           0 | f       |
       2 | 32BF      |          -1 | f       |
       3 | 32BUI     |          12 | f       |
       4 | 16BUI     |           2 | f       |
                </pre><pre class="programlisting">-- Aggregate the 1st band of a table of like rasters into a single raster
-- with as many bands as there are test_types and as many rows (new rasters) as there are mice
-- NOTE: The ORDER BY test_type is only supported in PostgreSQL 9.0+
-- for 8.4 and below it usually works to order your data in a subselect (but not guaranteed)
-- The resulting raster will have a band for each test_type alphabetical by test_type
-- For mouse lovers: No mice were harmed in this exercise
SELECT
    mouse,
    ST_AddBand(NULL, array_agg(rast ORDER BY test_type), 1) As rast
FROM mice_studies
GROUP BY mouse;
                </pre></div><div class="refsection" id="idm27958"><h2>示例：新的 Out-db 波段</h2><pre class="programlisting">SELECT
    *
FROM ST_BandMetadata(
    ST_AddBand(
        ST_MakeEmptyRaster(10, 10, 0, 0, 1, -1, 0, 0, 0),
        '/home/raster/mytestraster.tif'::text, NULL::int[]
    ),
    ARRAY[]::integer[]
);

 bandnum | pixeltype | nodatavalue | isoutdb | path
---------+-----------+-------------+---------+------
       1 | 8BUI      |             | t       | /home/raster/mytestraster.tif
       2 | 8BUI      |             | t       | /home/raster/mytestraster.tif
       3 | 8BUI      |             | t       | /home/raster/mytestraster.tif
                </pre></div><div class="refsection" id="idm27961"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>, <a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a> </p></div></div><div class="refentry" id="RT_ST_AsRaster"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsRaster — 将 PostGIS 几何图形转换为 PostGIS 栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, raster  <var class="pdparam">ref</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, raster  <var class="pdparam">ref</var>, text[]  <var class="pdparam">pixeltype=ARRAY['8BUI']</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, text[]  <var class="pdparam">pixeltype=ARRAY['8BUI']</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text[]  <var class="pdparam">pixeltype</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, text[]  <var class="pdparam">pixeltype=ARRAY['8BUI']</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_AsRaster</strong>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, text[]  <var class="pdparam">pixeltype</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm28306"><h2>描述</h2><p>将一个 PostGIS 几何对象转换为 PostGIS 栅格。这些不同的变体提供了三组可能性，用于设置生成的栅格的对齐方式和像素大小。</p><p>第一组由前两个变体组成，生成具有与所提供的参考栅格相同的对齐方式（<code class="varname">scalex</code>、<code class="varname">scaley</code>、<code class="varname">gridx</code> 和 <code class="varname">gridy</code>）、像素类型和节点数据值的栅格。 通常，您可以通过将包含几何图形的表与包含参考栅格的表连接来传递此参考栅格。</p><p>第二组，由四个变体组成，允许您通过提供像素大小的参数（<code class="varname">scalex </code> &amp; <code class="varname">scaley </code>以及 <code class="varname">skewx </code> &amp; <code class="varname">skewy</code>）来设置栅格的尺寸。生成的栅格的<code class="varname">宽度</code> &amp; <code class="varname">高度</code>将根据几何对象的范围进行调整。在大多数情况下，您必须将整数的 <code class="varname">scalex </code> &amp; <code class="varname">scaley</code> 参数强制转换为双精度，以便 PostgreSQL 选择正确的变体。</p><p>第三组，由四个变体组成，允许您通过提供栅格的尺寸（<code class="varname">宽度</code> &amp; <code class="varname">高度</code>）来固定栅格的尺寸。生成的栅格的像素大小参数（<code class="varname">scalex</code> &amp; <code class="varname">scaley</code> 以及 <code class="varname">skewx</code> &amp; <code class="varname">skewy</code>）将被调整以适应几何对象的范围。</p><p>这两个最后两组中的前两个变体允许您使用对齐网格的任意角（<code class="varname">gridx </code> &amp; <code class="varname">gridy</code>）指定对齐方式，而最后两个变体则使用左上角（<code class="varname">upperleftx</code> &amp; <code class="varname">upperlefty</code>）指定对齐方式。</p><p>每组变体都允许生成单波段栅格或多波段栅格。 要生成多波段栅格，必须提供像素类型数组 (<code class="varname">pixeltype[]</code>)、初始值数组 (<code class="varname">value</code>) 和 nodata 值数组 (<code class="varname">nodataval</code>)。 如果未提供，pixeltyped 默认为 8BUI，值为 1，nodataval 为 0。</p><p>输出栅格将与源几何具有相同的空间参考。 唯一的例外是具有参考栅格的变体。 在这种情况下，生成的栅格将获得与参考栅格相同的 SRID。</p><p>可选的参数 <code class="varname">touched</code> 默认值为 false，并映射到 GDAL 中的 ALL_TOUCHED 栅格化选项，该选项确定由线或多边形接触的像素是否会被设置值。不仅仅是那些在线渲染路径上的像素，或者它们的中心点位于多边形内的像素。</p><p>当与 <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>和其他 <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> 系列函数结合使用时，这对于直接从数据库渲染几何图形的 jpeg 和 png 特别有用。</p><p class="availability">可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>目前还无法渲染复杂的几何类型，例如曲线、TINS 和多面体曲面，但一旦 GDAL 可以了，也应该可以了。</p></td></tr></table></div></div><div class="refsection" id="idm28348"><h2>示例：将几何图形输出为 PNG 文件</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_asraster01.png"/><div class="caption"><p>黑色圆圈</p></div></div></div><pre class="programlisting">-- this will output a black circle taking up 150 x 150 pixels --
SELECT ST_AsPNG(ST_AsRaster(ST_Buffer(ST_Point(1,5),10),150, 150));</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_asraster02.png"/><div class="caption"><p>仅使用 PostGIS 渲染的缓冲区的示例</p></div></div></div><pre class="programlisting">-- the bands map to RGB bands - the value (118,154,118) - teal  --
SELECT ST_AsPNG(
    ST_AsRaster(
        ST_Buffer(
            ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'), 10,'join=bevel'),
            200,200,ARRAY['8BUI', '8BUI', '8BUI'], ARRAY[118,154,118], ARRAY[0,0,0]));</pre></div><div class="refsection" id="idm28366"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="RT_ST_Band"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Band — 返回现有栅格的一个或多个波段作为新栅格。 对于从现有栅格构建新栅格非常有用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Band</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands = ARRAY[1]</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Band</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Band</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">nbands</var>, character  <var class="pdparam">delimiter=,</var><code>)</code>;</p></div></div><div class="refsection" id="idm28412"><h2>描述</h2><p>返回现有栅格的一个或多个波段作为新栅格。 对于从现有栅格构建新栅格或仅导出栅格的选定波段或重新排列栅格中波段的顺序非常有用。 如果未指定波段或栅格中不存在任何指定波段，则返回所有波段。 用作各种功能中的辅助功能，例如删除波段。 </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于函数的<code class="code">nbands</code>作为文本变体，默认分隔符是<code class="code">,</code>，这意味着您可以请求<code class="code">'1,2,3'</code>，如果您想使用不同的分隔符，可以使用 <code class="code">ST_Band(rast, '1@2@3', '@')</code>。对于请求多个波段，我们强烈建议您使用这个函数的数组形式，例如 <code class="code">ST_Band(rast, '{1,2,3}'::int[]);</code>，因为 <code class="code">text</code> 格式的波段列表可能会在将来的 PostGIS 版本中被移除。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm28424"><h2>示例</h2><pre class="programlisting">-- Make 2 new rasters: 1 containing band 1 of dummy, second containing band 2 of dummy and then reclassified as a 2BUI
SELECT ST_NumBands(rast1) As numb1, ST_BandPixelType(rast1) As pix1,
 ST_NumBands(rast2) As numb2,  ST_BandPixelType(rast2) As pix2
FROM (
    SELECT ST_Band(rast) As rast1, ST_Reclass(ST_Band(rast,3), '100-200):1, [200-254:2', '2BUI') As rast2
        FROM dummy_rast
        WHERE rid = 2) As foo;

 numb1 | pix1 | numb2 | pix2
-------+------+-------+------
     1 | 8BUI |     1 | 2BUI
                    </pre><pre class="programlisting">-- Return bands 2 and 3. Using array cast syntax
SELECT ST_NumBands(ST_Band(rast, '{2,3}'::int[])) As num_bands
    FROM dummy_rast WHERE rid=2;

num_bands
----------
2

-- Return bands 2 and 3. Use array to define bands
SELECT ST_NumBands(ST_Band(rast, ARRAY[2,3])) As num_bands
    FROM dummy_rast
WHERE rid=2;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_band01.png"/><div class="caption"><p>原始（列栅格）</p></div></div></div>
         </td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_band02.png"/><div class="caption"><p>双波段</p></div></div></div>
         </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_band03.png"/><div class="caption"><p>单波段</p></div></div></div>
         </td></tr></tbody></table></div><pre class="programlisting">--Make a new raster with 2nd band of original and 1st band repeated twice,
and another with just the third band
SELECT rast, ST_Band(rast, ARRAY[2,1,1]) As dupe_band,
    ST_Band(rast, 3) As sing_band
FROM samples.than_chunked
WHERE rid=35;
                    </pre></div><div class="refsection" id="idm28457"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>, <a class="xref" href="#RT_reference" title="Chapter 11. 栅格参考">Chapter 11, <em>栅格参考</em></a></p></div></div><div class="refentry" id="RT_ST_MakeEmptyCoverage"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeEmptyCoverage — 用空栅格图块网格覆盖地理参考区域。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MakeEmptyCoverage</strong>(</code>integer  <var class="pdparam">tilewidth</var>, integer  <var class="pdparam">tileheight</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">upperleftx</var>, double precision  <var class="pdparam">upperlefty</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">skewx</var>, double precision  <var class="pdparam">skewy</var>, integer  <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" id="idm28506"><h2>描述</h2><p>使用 <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a> 创建一组栅格瓦片。栅格维度由宽度（<code class="varname">width</code>）&amp; 高度（<code class="varname">height</code>）确定，而瓦片维度则由瓦片宽度（<code class="varname">tilewidth</code>）&amp; 瓦片高度（<code class="varname">tileheight</code>）确定。覆盖的地理参考区域从左上角（<code class="varname">upperleftx</code>，<code class="varname">upperlefty</code>）延伸到右下角（<code class="varname">upperleftx</code> +<code class="varname"> width</code> * <code class="varname">scalex</code>，<code class="varname">upperlefty</code> + <code class="varname">height </code>* <code class="varname">scaley</code>）。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>请注意，对于栅格，scaley 通常为负值，scalex 通常为正值。 所以右下角的 y 值会比左上角低，x 值会比左上角高。</p></td></tr></table></div><p class="availability">可用性：2.4.0 </p></div><div class="refsection" id="idm28525"><h2>基本示例</h2><p>在 4x4 网格中创建 16 个图块，以覆盖从左上角 (22, 77) 到右下角 (55, 33) 的 WGS84 区域。</p><pre class="programlisting">SELECT (ST_MetaData(tile)).* FROM ST_MakeEmptyCoverage(1, 1, 4, 4, 22, 33, (55 - 22)/(4)::float, (33 - 77)/(4)::float, 0., 0., 4326) tile;

 upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
-------------------------------------------------------------------------------------
         22 |         33 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      30.25 |         33 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
       38.5 |         33 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      46.75 |         33 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
         22 |         22 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      30.25 |         22 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
       38.5 |         22 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      46.75 |         22 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
         22 |         11 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      30.25 |         11 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
       38.5 |         11 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      46.75 |         11 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
         22 |          0 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      30.25 |          0 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
       38.5 |          0 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0
      46.75 |          0 |     1 |      1 |   8.25 |    -11 |     0 |     0 | 4326 |        0</pre></div><div class="refsection" id="idm28529"><h2>相关信息</h2><p>
                      <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>
                    </p></div></div><div class="refentry" id="RT_ST_MakeEmptyRaster"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MakeEmptyRaster — 返回一个空白栅格（不包含波段），其具有给定的尺寸（宽度和高度）、左上角 X 和 Y 坐标、像素大小和旋转参数（scalex、scaley、skewx 和 skewy），以及参考系统（SRID）。如果传递了一个栅格，则返回一个具有相同大小、对齐方式和 SRID 的新栅格。如果省略了 SRID，则空间参考将设置为未知（0）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MakeEmptyRaster</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MakeEmptyRaster</strong>(</code>integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, float8  <var class="pdparam">upperleftx</var>, float8  <var class="pdparam">upperlefty</var>, float8  <var class="pdparam">scalex</var>, float8  <var class="pdparam">scaley</var>, float8  <var class="pdparam">skewx</var>, float8  <var class="pdparam">skewy</var>, integer  <var class="pdparam">srid=unknown</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MakeEmptyRaster</strong>(</code>integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, float8  <var class="pdparam">upperleftx</var>, float8  <var class="pdparam">upperlefty</var>, float8  <var class="pdparam">pixelsize</var><code>)</code>;</p></div></div><div class="refsection" id="idm28593"><h2>描述</h2><p>返回一个空白栅格（没有波段），其具有给定的尺寸（宽度和高度）并以空间（或世界）坐标进行地理参考，具有左上角 X 坐标（upperleftx）、左上角 Y 坐标（upperlefty）、像素大小和旋转参数（scalex、scaley、skewx 和 skewy），以及参考系统（SRID）。</p><p>最后一个版本使用单个参数来指定像素大小（pixelsize）。 scalex 设置为此参数，scaley 设置为此参数的负值。 skewx 和 skewy 设置为 0。 </p><p>如果传入现有栅格，它将返回具有相同元数据设置（不带波段）的新栅格。 </p><p>如果未指定 srid，则默认为 0。创建空栅格后，您可能想要向其中添加波段并可能对其进行编辑。 参考 <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>定义波段，参考 <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>设置初始像素值。</p></div><div class="refsection" id="idm28601"><h2>示例</h2><pre class="programlisting">INSERT INTO dummy_rast(rid,rast)
VALUES(3, ST_MakeEmptyRaster( 100, 100, 0.0005, 0.0005, 1, 1, 0, 0, 4326) );

--use an existing raster as template for new raster
INSERT INTO dummy_rast(rid,rast)
SELECT 4, ST_MakeEmptyRaster(rast)
FROM dummy_rast WHERE rid = 3;

-- output meta data of rasters we just added
SELECT rid, (md).*
FROM (SELECT rid, ST_MetaData(rast) As md
    FROM dummy_rast
    WHERE rid IN(3,4)) As foo;

-- output --
 rid | upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
-----+------------+------------+-------+--------+------------+------------+-------+-------+------+----------
   3 |     0.0005 |     0.0005 |   100 |    100 |          1 |          1 |    0  |     0 | 4326 |        0
   4 |     0.0005 |     0.0005 |   100 |    100 |          1 |          1 |    0  |     0 | 4326 |        0
                </pre></div><div class="refsection" id="idm28604"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, , <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" id="RT_ST_Tile"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Tile — 返回根据输出栅格的所需维度分割输入栅格而产生的一组栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof raster <strong class="fsfunc">ST_Tile</strong>(</code>raster  <var class="pdparam">rast</var>, int[]  <var class="pdparam">nband</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, boolean  <var class="pdparam">padwithnodata=FALSE</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">setof raster <strong class="fsfunc">ST_Tile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, boolean  <var class="pdparam">padwithnodata=FALSE</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">setof raster <strong class="fsfunc">ST_Tile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, boolean  <var class="pdparam">padwithnodata=FALSE</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm28680"><h2>描述</h2><p>返回根据输出栅格的所需维度分割输入栅格而产生的一组栅格。 </p><p>如果 <code class="varname">padwithnodata</code> = FALSE，则栅格右侧和底侧的边缘切片可能具有与其余切片不同的维度。 如果 <code class="varname">padwithnodata</code> = TRUE，则所有图块将具有相同的维度，并且边缘图块可能会用 NODATA 值填充。 如果栅格波段未指定 NODATA 值，则可以通过设置<code class="varname"> nodataval</code>来指定 NODATA 值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果输入栅格的指定波段处于数据库外，则输出栅格中的相应波段也将处于数据库外。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm28690"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 2, '8BUI', 10, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, 0, 1, -1, 0, 0, 0), 1, '8BUI', 2, 0), 2, '8BUI', 20, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, 0, 1, -1, 0, 0, 0), 1, '8BUI', 3, 0), 2, '8BUI', 30, 0) AS rast UNION ALL

    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -3, 1, -1, 0, 0, 0), 1, '8BUI', 4, 0), 2, '8BUI', 40, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -3, 1, -1, 0, 0, 0), 1, '8BUI', 5, 0), 2, '8BUI', 50, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -3, 1, -1, 0, 0, 0), 1, '8BUI', 6, 0), 2, '8BUI', 60, 0) AS rast UNION ALL

    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -6, 1, -1, 0, 0, 0), 1, '8BUI', 7, 0), 2, '8BUI', 70, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -6, 1, -1, 0, 0, 0), 1, '8BUI', 8, 0), 2, '8BUI', 80, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -6, 1, -1, 0, 0, 0), 1, '8BUI', 9, 0), 2, '8BUI', 90, 0) AS rast
), bar AS (
    SELECT ST_Union(rast) AS rast FROM foo
), baz AS (
    SELECT ST_Tile(rast, 3, 3, TRUE) AS rast FROM bar
)
SELECT
    ST_DumpValues(rast)
FROM baz;

              st_dumpvalues
------------------------------------------
 (1,"{{1,1,1},{1,1,1},{1,1,1}}")
 (2,"{{10,10,10},{10,10,10},{10,10,10}}")
 (1,"{{2,2,2},{2,2,2},{2,2,2}}")
 (2,"{{20,20,20},{20,20,20},{20,20,20}}")
 (1,"{{3,3,3},{3,3,3},{3,3,3}}")
 (2,"{{30,30,30},{30,30,30},{30,30,30}}")
 (1,"{{4,4,4},{4,4,4},{4,4,4}}")
 (2,"{{40,40,40},{40,40,40},{40,40,40}}")
 (1,"{{5,5,5},{5,5,5},{5,5,5}}")
 (2,"{{50,50,50},{50,50,50},{50,50,50}}")
 (1,"{{6,6,6},{6,6,6},{6,6,6}}")
 (2,"{{60,60,60},{60,60,60},{60,60,60}}")
 (1,"{{7,7,7},{7,7,7},{7,7,7}}")
 (2,"{{70,70,70},{70,70,70},{70,70,70}}")
 (1,"{{8,8,8},{8,8,8},{8,8,8}}")
 (2,"{{80,80,80},{80,80,80},{80,80,80}}")
 (1,"{{9,9,9},{9,9,9},{9,9,9}}")
 (2,"{{90,90,90},{90,90,90},{90,90,90}}")
(18 rows)
                </pre><pre class="programlisting">WITH foo AS (
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 2, '8BUI', 10, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, 0, 1, -1, 0, 0, 0), 1, '8BUI', 2, 0), 2, '8BUI', 20, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, 0, 1, -1, 0, 0, 0), 1, '8BUI', 3, 0), 2, '8BUI', 30, 0) AS rast UNION ALL

    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -3, 1, -1, 0, 0, 0), 1, '8BUI', 4, 0), 2, '8BUI', 40, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -3, 1, -1, 0, 0, 0), 1, '8BUI', 5, 0), 2, '8BUI', 50, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -3, 1, -1, 0, 0, 0), 1, '8BUI', 6, 0), 2, '8BUI', 60, 0) AS rast UNION ALL

    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -6, 1, -1, 0, 0, 0), 1, '8BUI', 7, 0), 2, '8BUI', 70, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -6, 1, -1, 0, 0, 0), 1, '8BUI', 8, 0), 2, '8BUI', 80, 0) AS rast UNION ALL
    SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -6, 1, -1, 0, 0, 0), 1, '8BUI', 9, 0), 2, '8BUI', 90, 0) AS rast
), bar AS (
    SELECT ST_Union(rast) AS rast FROM foo
), baz AS (
    SELECT ST_Tile(rast, 3, 3, 2) AS rast FROM bar
)
SELECT
    ST_DumpValues(rast)
FROM baz;

              st_dumpvalues
------------------------------------------
 (1,"{{10,10,10},{10,10,10},{10,10,10}}")
 (1,"{{20,20,20},{20,20,20},{20,20,20}}")
 (1,"{{30,30,30},{30,30,30},{30,30,30}}")
 (1,"{{40,40,40},{40,40,40},{40,40,40}}")
 (1,"{{50,50,50},{50,50,50},{50,50,50}}")
 (1,"{{60,60,60},{60,60,60},{60,60,60}}")
 (1,"{{70,70,70},{70,70,70},{70,70,70}}")
 (1,"{{80,80,80},{80,80,80},{80,80,80}}")
 (1,"{{90,90,90},{90,90,90},{90,90,90}}")
(9 rows)
                </pre></div><div class="refsection" id="idm28694"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#RT_Retile" title="ST_Retile">ST_Retile</a> </p></div></div><div class="refentry" id="RT_Retile"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Retile — 从任意平铺的栅格覆盖范围返回一组配置的平铺。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF raster <strong class="fsfunc">ST_Retile</strong>(</code>regclass  <var class="pdparam">tab</var>, name  <var class="pdparam">col</var>, geometry  <var class="pdparam">ext</var>, float8  <var class="pdparam">sfx</var>, float8  <var class="pdparam">sfy</var>, int  <var class="pdparam">tw</var>, int  <var class="pdparam">th</var>, text  <var class="pdparam">algo='NearestNeighbor'</var><code>)</code>;</p></div></div><div class="refsection" id="idm28732"><h2>描述</h2><p>返回一组具有指定比例 (<code class="varname">sfx</code>, <code class="varname">sfy</code>) 和最大尺寸 (<code class="varname">tw</code>, <code class="varname">th</code>) 并使用来自指定栅格覆盖范围 (<code class="varname">tab</code>, <code class="varname">col</code>) 的数据覆盖指定范围 (<code class="varname">ext</code>) 的图块。 </p><p>算法选项有：“NearestNeighbor”、“Bilinear”、“Cubic”、“CubicSpline”和“Lanczos”。 有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。</p><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm28745"><h2>相关信息</h2><p>
          <a class="xref" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a>
        </p></div></div><div class="refentry" id="RT_ST_FromGDALRaster"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_FromGDALRaster — 从受支持的 GDAL 栅格文件返回栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_FromGDALRaster</strong>(</code>bytea  <var class="pdparam">gdaldata</var>, integer  <var class="pdparam">srid=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm28764"><h2>描述</h2><p>从受支持的 GDAL 栅格文件返回栅格。 <code class="varname">gdaldata</code> 是 bytea 类型，应该是 GDAL 栅格文件的内容。 </p><p>如果 <code class="varname">srid</code> 为 NULL，该函数将尝试自动从 GDAL 栅格分配 SRID。 如果提供了 <code class="varname">srid</code>，则提供的值将覆盖任何自动分配的 SRID。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm28772"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_AsPNG(ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 0.1, -0.1, 0, 0, 4326), 1, '8BUI', 1, 0), 2, '8BUI', 2, 0), 3, '8BUI', 3, 0)) AS png
),
bar AS (
    SELECT 1 AS rid, ST_FromGDALRaster(png) AS rast FROM foo
    UNION ALL
    SELECT 2 AS rid, ST_FromGDALRaster(png, 3310) AS rast FROM foo
)
SELECT
    rid,
    ST_Metadata(rast) AS metadata,
    ST_SummaryStats(rast, 1) AS stats1,
    ST_SummaryStats(rast, 2) AS stats2,
    ST_SummaryStats(rast, 3) AS stats3
FROM bar
ORDER BY rid;

 rid |         metadata          |    stats1     |    stats2     |     stats3
-----+---------------------------+---------------+---------------+----------------
   1 | (0,0,2,2,1,-1,0,0,0,3)    | (4,4,1,0,1,1) | (4,8,2,0,2,2) | (4,12,3,0,3,3)
   2 | (0,0,2,2,1,-1,0,0,3310,3) | (4,4,1,0,1,1) | (4,8,2,0,2,2) | (4,12,3,0,3,3)
(2 rows)
                </pre></div><div class="refsection" id="idm28775"><h2>相关信息</h2><p>
                    <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>
                </p></div></div></section><section class="section" id="Raster_Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.4. 栅格访问器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_GeoReference">ST_GeoReference</a></span><span class="refpurpose"> — 返回 GDAL 或 ESRI 格式的地理配准元数据，如世界文件中常见的格式。 默认为 GDAL。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Height">ST_Height</a></span><span class="refpurpose"> — 返回栅格的高度（以像素为单位）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_IsEmpty">ST_IsEmpty</a></span><span class="refpurpose"> — 如果栅格为空（宽度 = 0 且高度 = 0），则返回 true。 否则，返回 false。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MemSize">ST_MemSize</a></span><span class="refpurpose"> — 返回栅格占用的空间量（以字节为单位）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MetaData">ST_MetaData</a></span><span class="refpurpose"> — 返回有关栅格对象的基本元数据，例如像素大小、旋转（倾斜）、左上、左下等。</span></li><li><span class="refentrytitle"><a href="#RT_ST_NumBands">ST_NumBands</a></span><span class="refpurpose"> — 返回栅格对象中的波段数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelHeight">ST_PixelHeight</a></span><span class="refpurpose"> — 返回空间参考系统的几何单位的像素高度。</span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelWidth">ST_PixelWidth</a></span><span class="refpurpose"> — 返回空间参考系统的几何单位的像素宽度。</span></li><li><span class="refentrytitle"><a href="#RT_ST_ScaleX">ST_ScaleX</a></span><span class="refpurpose"> — 返回像素宽度的 X 分量（以坐标参考系为单位）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_ScaleY">ST_ScaleY</a></span><span class="refpurpose"> — 返回像素高度的 Y 分量（以坐标参考系为单位）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_RasterToWorldCoord">ST_RasterToWorldCoord</a></span><span class="refpurpose"> — 在给定列和行的情况下，以几何 X 和 Y（经度和纬度）形式返回栅格的左上角。 列和行从 1 开始。</span></li><li><span class="refentrytitle"><a href="#RT_ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a></span><span class="refpurpose"> — 返回栅格、列和行左上角的几何 X 坐标。 列和行的编号从 1 开始。</span></li><li><span class="refentrytitle"><a href="#RT_ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a></span><span class="refpurpose"> — 返回栅格、列和行的左上角的几何 Y 坐标。 列和行的编号从 1 开始。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Rotation">ST_Rotation</a></span><span class="refpurpose"> — 返回栅格的旋转弧度。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SkewX">ST_SkewX</a></span><span class="refpurpose"> — 返回地理参考 X 倾斜（或旋转参数）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SkewY">ST_SkewY</a></span><span class="refpurpose"> — 返回地理参考 Y 倾斜（或旋转参数）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SRID">ST_SRID</a></span><span class="refpurpose"> — 返回在spatial_ref_sys表中定义的栅格的空间参考标识符。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Summary">ST_Summary</a></span><span class="refpurpose"> — 返回栅格内容的文本摘要。</span></li><li><span class="refentrytitle"><a href="#RT_ST_UpperLeftX">ST_UpperLeftX</a></span><span class="refpurpose"> — 返回投影空间参考中栅格的左上角 X 坐标。</span></li><li><span class="refentrytitle"><a href="#RT_ST_UpperLeftY">ST_UpperLeftY</a></span><span class="refpurpose"> — 返回投影空间参考中栅格的左上角 Y 坐标。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Width">ST_Width</a></span><span class="refpurpose"> — 返回栅格的宽度（以像素为单位）。</span></li><li><span class="refentrytitle"><a href="#RT_ST_WorldToRasterCoord">ST_WorldToRasterCoord</a></span><span class="refpurpose"> — 给定几何 X 和 Y（经度和纬度）或以栅格的空间参考坐标系表示的点几何，将左上角作为列和行返回。</span></li><li><span class="refentrytitle"><a href="#RT_ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a></span><span class="refpurpose"> — 返回栅格中点几何 (pt) 的列或以栅格世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</span></li><li><span class="refentrytitle"><a href="#RT_ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a></span><span class="refpurpose"> — 返回点几何图形 (pt) 的栅格中的行或以栅格的世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</span></li></ul></div><div class="refentry" id="RT_ST_GeoReference"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_GeoReference — 返回 GDAL 或 ESRI 格式的地理配准元数据，如世界文件中常见的格式。 默认为 GDAL。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_GeoReference</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">format=GDAL</var><code>)</code>;</p></div></div><div class="refsection" id="idm28796"><h2>描述</h2><p>返回地理配准元数据，包括 GDAL 或 ESRI 格式的回车符，如<a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a>中常见的那样。 如果未指定类型，则默认为 GDAL。 类型是字符串“GDAL”或“ESRI”。 </p><p>格式表示的区别如下：</p><p><code class="varname">GDAL</code>: </p><pre class="programlisting">scalex
skewy
skewx
scaley
upperleftx
upperlefty</pre><p><code class="varname">ESRI</code>: </p><pre class="programlisting">scalex
skewy
skewx
scaley
upperleftx + scalex*0.5
upperlefty + scaley*0.5</pre></div><div class="refsection" id="idm28807"><h2>示例</h2><pre class="programlisting">SELECT ST_GeoReference(rast, 'ESRI') As esri_ref, ST_GeoReference(rast, 'GDAL') As gdal_ref
 FROM dummy_rast WHERE rid=1;

   esri_ref   |   gdal_ref
--------------+--------------
 2.0000000000 | 2.0000000000
 0.0000000000 : 0.0000000000
 0.0000000000 : 0.0000000000
 3.0000000000 : 3.0000000000
 1.5000000000 : 0.5000000000
 2.0000000000 : 0.5000000000
                </pre></div><div class="refsection" id="idm28810"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a></p></div></div><div class="refentry" id="RT_ST_Height"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Height — 返回栅格的高度（以像素为单位）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_Height</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28828"><h2>描述</h2><p>返回栅格的高度（以像素为单位）。</p></div><div class="refsection" id="idm28831"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_Height(rast) As rastheight
FROM dummy_rast;

 rid | rastheight
-----+------------
   1 |         20
   2 |          5
                </pre></div><div class="refsection" id="idm28834"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Width" title="ST_Width">ST_Width</a></p></div></div><div class="refentry" id="RT_ST_IsEmpty"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_IsEmpty — 如果栅格为空（宽度 = 0 且高度 = 0），则返回 true。 否则，返回 false。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_IsEmpty</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28850"><h2>描述</h2><p>如果栅格为空（宽度 = 0 且高度 = 0），则返回 true。 否则，返回 false。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm28854"><h2>示例</h2><pre class="programlisting">SELECT ST_IsEmpty(ST_MakeEmptyRaster(100, 100, 0, 0, 0, 0, 0, 0))
st_isempty |
-----------+
f          |


SELECT ST_IsEmpty(ST_MakeEmptyRaster(0, 0, 0, 0, 0, 0, 0, 0))
st_isempty |
-----------+
t          |

                </pre></div><div class="refsection" id="idm28857"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a></p></div></div><div class="refentry" id="RT_ST_MemSize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MemSize — 返回栅格占用的空间量（以字节为单位）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_MemSize</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28873"><h2>描述</h2><p>返回栅格占用的空间量（以字节为单位）。 </p><p>这是对 PostgreSQL 内置函数 pg_column_size、pg_size_pretty、pg_relation_size、pg_total_relation_size 的一个很好的补充。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>给出表的字节大小的 pg_relation_size 可能返回小于 ST_MemSize 的字节大小。 这是因为 pg_relation_size 不会添加 toasted 表贡献，并且大型几何图形存储在 TOAST 表中。 pg_column_size 可能返回较低的值，因为它返回压缩后的大小。</p><p>pg_total_relation_size - 包括表、压缩表和索引。</p></td></tr></table></div><p class="availability">可用性：2.2.0</p></div><div class="refsection" id="idm28881"><h2>示例</h2><pre class="programlisting">SELECT ST_MemSize(ST_AsRaster(ST_Buffer(ST_Point(1,5),10,1000),150, 150, '8BUI')) As rast_mem;

        rast_mem
        --------
        22568
    </pre></div><div class="refsection" id="idm28884"><h2>相关信息</h2><p/></div></div><div class="refentry" id="RT_ST_MetaData"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MetaData — 返回有关栅格对象的基本元数据，例如像素大小、旋转（倾斜）、左上、左下等。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <strong class="fsfunc">ST_MetaData</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28899"><h2>描述</h2><p>返回有关栅格对象的基本元数据，例如像素大小、旋转（倾斜）、左上、左下等。返回的列： upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands</p></div><div class="refsection" id="idm28902"><h2>示例</h2><pre class="programlisting">SELECT rid, (foo.md).*
 FROM (SELECT rid, ST_MetaData(rast) As md
FROM dummy_rast) As foo;

 rid | upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
 ----+------------+------------+-------+--------+--------+-----------+-------+-------+------+-------
   1 |        0.5 |        0.5 |    10 |     20 |      2 |      3 |     0 |     0 |    0 |        0
   2 | 3427927.75 |    5793244 |     5 |      5 |   0.05 |  -0.05 |     0 |     0 |    0 |        3
                </pre></div><div class="refsection" id="idm28905"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" id="RT_ST_NumBands"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NumBands — 返回栅格对象中的波段数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_NumBands</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28922"><h2>描述</h2><p>返回栅格对象中的波段数。</p></div><div class="refsection" id="idm28925"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_NumBands(rast) As numbands
FROM dummy_rast;

rid | numbands
----+----------
  1 |        0
  2 |        3
                </pre></div><div class="refsection" id="idm28928"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a></p></div></div><div class="refentry" id="RT_ST_PixelHeight"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelHeight — 返回空间参考系统的几何单位的像素高度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_PixelHeight</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28944"><h2>描述</h2><p>以空间参考系统的几何单位返回像素的高度。 在没有倾斜的常见情况下，像素高度只是几何坐标与光栅像素之间的比例。</p><p>请参阅 <a class="xref" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a> 以直观地了解该关系。 </p></div><div class="refsection" id="idm28949"><h2>示例：无倾斜的栅格</h2><pre class="programlisting">SELECT ST_Height(rast) As rastheight, ST_PixelHeight(rast) As pixheight,
 ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
        ST_SkewY(rast) As skewy
FROM dummy_rast;

 rastheight | pixheight | scalex | scaley | skewx | skewy
------------+-----------+--------+--------+-------+----------
         20 |         3 |      2 |      3 |     0 |        0
          5 |      0.05 |   0.05 |  -0.05 |     0 |        0
            </pre></div><div class="refsection" id="idm28952"><h2>示例：倾斜度不为 0 的栅格</h2><pre class="programlisting">SELECT ST_Height(rast) As rastheight, ST_PixelHeight(rast) As pixheight,
 ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
        ST_SkewY(rast) As skewy
FROM (SELECT ST_SetSKew(rast,0.5,0.5) As rast
        FROM dummy_rast) As skewed;

rastheight |     pixheight     | scalex | scaley | skewx | skewy
-----------+-------------------+--------+--------+-------+----------
        20 |  3.04138126514911 |      2 |      3 |   0.5 |      0.5
         5 | 0.502493781056044 |   0.05 |  -0.05 |   0.5 |      0.5
            </pre></div><div class="refsection" id="idm28955"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a> </p></div></div><div class="refentry" id="RT_ST_PixelWidth"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelWidth — 返回空间参考系统的几何单位的像素宽度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_PixelWidth</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm28975"><h2>描述</h2><p>返回空间参考系统的几何单位中像素的宽度。 在没有倾斜的常见情况下，像素宽度只是几何坐标与光栅像素之间的比例。</p><p>下图展示了这种关系：</p><p>
            </p><div class="informalfigure"><div class="mediaobject"><img src="images/raster_xscale_yscale_xskew_yskew.png"/><div class="caption"><p>像素宽度：i方向的像素大小</p><p>像素高度：j方向的像素大小</p></div></div></div><p>
            </p></div><div class="refsection" id="idm28987"><h2>示例：无倾斜的栅格</h2><pre class="programlisting">SELECT ST_Width(rast) As rastwidth, ST_PixelWidth(rast) As pixwidth,
    ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
    ST_SkewY(rast) As skewy
    FROM dummy_rast;

    rastwidth | pixwidth | scalex | scaley | skewx | skewy
    -----------+----------+--------+--------+-------+----------
    10 |        2 |      2 |      3 |     0 |        0
     5 |     0.05 |   0.05 |  -0.05 |     0 |        0
        </pre></div><div class="refsection" id="idm28990"><h2>示例：倾斜度不为 0 的栅格</h2><pre class="programlisting">SELECT ST_Width(rast) As rastwidth, ST_PixelWidth(rast) As pixwidth,
    ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
    ST_SkewY(rast) As skewy
    FROM (SELECT ST_SetSkew(rast,0.5,0.5) As rast
    FROM dummy_rast) As skewed;

    rastwidth |     pixwidth      | scalex | scaley | skewx | skewy
    -----------+-------------------+--------+--------+-------+----------
    10 |  2.06155281280883 |      2 |      3 |   0.5 |      0.5
     5 | 0.502493781056044 |   0.05 |  -0.05 |   0.5 |      0.5
        </pre></div><div class="refsection" id="idm28993"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_PixelHeight" title="ST_PixelHeight">ST_PixelHeight</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" id="RT_ST_ScaleX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ScaleX — 返回像素宽度的 X 分量（以坐标参考系为单位）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_ScaleX</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29013"><h2>描述</h2><p>返回像素宽度的 X 分量（以坐标参考系为单位）。 有关更多详细信息，请参阅 <a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a> 。</p><p class="changed">更改：2.0.0。 在 WKTRaster 版本中，这称为 ST_PixelSizeX。</p></div><div class="refsection" id="idm29018"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_ScaleX(rast) As rastpixwidth
FROM dummy_rast;

 rid | rastpixwidth
-----+--------------
   1 |            2
   2 |         0.05
                </pre></div><div class="refsection" id="idm29021"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Width" title="ST_Width">ST_Width</a></p></div></div><div class="refentry" id="RT_ST_ScaleY"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ScaleY — 返回像素高度的 Y 分量（以坐标参考系为单位）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_ScaleY</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29037"><h2>描述</h2><p>返回像素高度的 Y 分量（以坐标参考系为单位）。 可能是负值。 有关更多详细信息，请参阅<a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a> 。</p><p class="changed">更改：2.0.0。 在 WKTRaster 版本中，这称为 ST_PixelSizeY。</p></div><div class="refsection" id="idm29042"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_ScaleY(rast) As rastpixheight
FROM dummy_rast;

 rid | rastpixheight
-----+---------------
   1 |             3
   2 |         -0.05
                </pre></div><div class="refsection" id="idm29045"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Height" title="ST_Height">ST_Height</a></p></div></div><div class="refentry" id="RT_ST_RasterToWorldCoord"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RasterToWorldCoord — 在给定列和行的情况下，以几何 X 和 Y（经度和纬度）形式返回栅格的左上角。 列和行从 1 开始。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <strong class="fsfunc">ST_RasterToWorldCoord</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p></div></div><div class="refsection" id="idm29067"><h2>描述</h2><p>在给定列和行的情况下，以几何 X 和 Y（经度和纬度）形式返回左上角。 返回的 X 和 Y 采用地理参考栅格的几何单位。 列和行的编号从 1 开始，但如果向任一参数传递零、负数或大于栅格相应维度的数字，则假定栅格网格适用于栅格边界之外，它将返回栅格外部的坐标 。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm29071"><h2>示例</h2><pre class="programlisting">-- non-skewed raster
SELECT
    rid,
    (ST_RasterToWorldCoord(rast,1, 1)).*,
    (ST_RasterToWorldCoord(rast,2, 2)).*
FROM dummy_rast

 rid | longitude  | latitude | longitude |  latitude
-----+------------+----------+-----------+------------
   1 |        0.5 |      0.5 |       2.5 |        3.5
   2 | 3427927.75 |  5793244 | 3427927.8 | 5793243.95
                </pre><pre class="programlisting">-- skewed raster
SELECT
    rid,
    (ST_RasterToWorldCoord(rast, 1, 1)).*,
    (ST_RasterToWorldCoord(rast, 2, 3)).*
FROM (
    SELECT
        rid,
        ST_SetSkew(rast, 100.5, 0) As rast
    FROM dummy_rast
) As foo

 rid | longitude  | latitude | longitude | latitude
-----+------------+----------+-----------+-----------
   1 |        0.5 |      0.5 |     203.5 |       6.5
   2 | 3427927.75 |  5793244 | 3428128.8 | 5793243.9
                </pre></div><div class="refsection" id="idm29075"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a> </p></div></div><div class="refentry" id="RT_ST_RasterToWorldCoordX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RasterToWorldCoordX — 返回栅格、列和行左上角的几何 X 坐标。 列和行的编号从 1 开始。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_RasterToWorldCoordX</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var><code>)</code>;</p><p><code class="funcdef">float8 <strong class="fsfunc">ST_RasterToWorldCoordX</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p></div></div><div class="refsection" id="idm29108"><h2>描述</h2><p>返回栅格列中一行的左上角 X 坐标，以地理参考栅格的几何单位表示。列和行的编号从1开始，但如果传入一个负数或大于栅格中列的数量的数字，它将给出栅格文件外部左侧或右侧的坐标，假设倾斜度和像素大小与所选的栅格相同。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于非倾斜栅格，提供 X 列就足够了。 对于倾斜栅格，地理参考坐标是 ST_ScaleX 和 ST_SkewX 以及行和列的函数。 如果您只为倾斜栅格提供 X 列，则会出现错误。</p></td></tr></table></div><p class="changed">更改：2.1.0 在之前的版本中，这称为 ST_Raster2WorldCoordX</p></div><div class="refsection" id="idm29114"><h2>示例</h2><pre class="programlisting">-- non-skewed raster providing column is sufficient
SELECT rid, ST_RasterToWorldCoordX(rast,1) As x1coord,
    ST_RasterToWorldCoordX(rast,2) As x2coord,
    ST_ScaleX(rast) As pixelx
FROM dummy_rast;

 rid |  x1coord   |  x2coord  | pixelx
-----+------------+-----------+--------
   1 |        0.5 |       2.5 |      2
   2 | 3427927.75 | 3427927.8 |   0.05
                </pre><pre class="programlisting">-- for fun lets skew it
SELECT rid, ST_RasterToWorldCoordX(rast, 1, 1) As x1coord,
    ST_RasterToWorldCoordX(rast, 2, 3) As x2coord,
    ST_ScaleX(rast) As pixelx
FROM (SELECT rid, ST_SetSkew(rast, 100.5, 0) As rast FROM dummy_rast) As foo;

 rid |  x1coord   |  x2coord  | pixelx
-----+------------+-----------+--------
   1 |        0.5 |     203.5 |      2
   2 | 3427927.75 | 3428128.8 |   0.05
                </pre></div><div class="refsection" id="idm29118"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a></p></div></div><div class="refentry" id="RT_ST_RasterToWorldCoordY"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RasterToWorldCoordY — 返回栅格、列和行的左上角的几何 Y 坐标。 列和行的编号从 1 开始。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_RasterToWorldCoordY</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p><p><code class="funcdef">float8 <strong class="fsfunc">ST_RasterToWorldCoordY</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p></div></div><div class="refsection" id="idm29152"><h2>描述</h2><p>以地理参考栅格的几何单位返回栅格列行的左上角 Y 坐标。 列和行的编号从 1 开始，但如果您传入负数或高于栅格中的列/行数的数字，它会为您提供栅格文件外部向左或向右的坐标，并假设倾斜和像素 尺寸与选定的栅格图块相同。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>对于非倾斜栅格，提供 Y 列就足够了。 对于倾斜栅格，地理参考坐标是 ST_ScaleY 和 ST_SkewY 以及行和列的函数。 如果您仅给出倾斜栅格的 Y 行，则会出现错误。</p></td></tr></table></div><p class="changed">更改：2.1.0 在之前的版本中，这称为 ST_Raster2WorldCoordY</p></div><div class="refsection" id="idm29158"><h2>示例</h2><pre class="programlisting">-- non-skewed raster providing row is sufficient
SELECT rid, ST_RasterToWorldCoordY(rast,1) As y1coord,
    ST_RasterToWorldCoordY(rast,3) As y2coord,
    ST_ScaleY(rast) As pixely
FROM dummy_rast;

 rid | y1coord |  y2coord  | pixely
-----+---------+-----------+--------
   1 |     0.5 |       6.5 |      3
   2 | 5793244 | 5793243.9 |  -0.05
                </pre><pre class="programlisting">-- for fun lets skew it
SELECT rid, ST_RasterToWorldCoordY(rast,1,1) As y1coord,
    ST_RasterToWorldCoordY(rast,2,3) As y2coord,
    ST_ScaleY(rast) As pixely
FROM (SELECT rid, ST_SetSkew(rast,0,100.5) As rast FROM dummy_rast) As foo;

 rid | y1coord |  y2coord  | pixely
-----+---------+-----------+--------
   1 |     0.5 |       107 |      3
   2 | 5793244 | 5793344.4 |  -0.05
                </pre></div><div class="refsection" id="idm29162"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" id="RT_ST_Rotation"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Rotation — 返回栅格的旋转弧度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Rotation</strong>(</code>raster <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29181"><h2>描述</h2><p>返回栅格的均匀旋转弧度。 如果栅格没有均匀旋转，则返回 NaN。 有关更多详细信息，请参阅 <a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a>。</p></div><div class="refsection" id="idm29185"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_Rotation(ST_SetScale(ST_SetSkew(rast, sqrt(2)), sqrt(2))) as rot FROM dummy_rast;

 rid |        rot
-----+-------------------
   1 | 0.785398163397448
   2 | 0.785398163397448
                </pre></div><div class="refsection" id="idm29188"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a>, <a class="xref" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a></p></div></div><div class="refentry" id="RT_ST_SkewX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SkewX — 返回地理参考 X 倾斜（或旋转参数）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_SkewX</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29206"><h2>描述</h2><p>返回地理参考 X 倾斜（或旋转参数）。 有关更多详细信息，请参阅<a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a>。</p></div><div class="refsection" id="idm29210"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast;

 rid | skewx | skewy |       georef
-----+-------+-------+--------------------
   1 |     0 |     0 | 2.0000000000
                     : 0.0000000000
                     : 0.0000000000
                     : 3.0000000000
                     : 0.5000000000
                     : 0.5000000000
                     :
   2 |     0 |     0 | 0.0500000000
                     : 0.0000000000
                     : 0.0000000000
                     : -0.0500000000
                     : 3427927.7500000000
                     : 5793244.0000000000
                </pre></div><div class="refsection" id="idm29213"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a></p></div></div><div class="refentry" id="RT_ST_SkewY"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SkewY — 返回地理参考 Y 倾斜（或旋转参数）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_SkewY</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29231"><h2>描述</h2><p>返回地理参考 Y 倾斜（或旋转参数）。 有关更多详细信息，请参阅<a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a>。</p></div><div class="refsection" id="idm29235"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast;

 rid | skewx | skewy |       georef
-----+-------+-------+--------------------
   1 |     0 |     0 | 2.0000000000
                     : 0.0000000000
                     : 0.0000000000
                     : 3.0000000000
                     : 0.5000000000
                     : 0.5000000000
                     :
   2 |     0 |     0 | 0.0500000000
                     : 0.0000000000
                     : 0.0000000000
                     : -0.0500000000
                     : 3427927.7500000000
                     : 5793244.0000000000
                </pre></div><div class="refsection" id="idm29238"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a></p></div></div><div class="refentry" id="RT_ST_SRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SRID — 返回在spatial_ref_sys表中定义的栅格的空间参考标识符。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_SRID</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29256"><h2>描述</h2><p>返回在 Spatial_ref_sys 表中定义的栅格对象的空间参考标识符。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>从 PostGIS 2.0 开始，非地理参考栅格/几何图形的 srid 为 0，而不是之前的 -1。</p></td></tr></table></div></div><div class="refsection" id="idm29261"><h2>示例</h2><pre class="programlisting">SELECT ST_SRID(rast) As srid
FROM dummy_rast WHERE rid=1;

srid
----------------
0
                </pre></div><div class="refsection" id="idm29264"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="RT_ST_Summary"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Summary — 返回栅格内容的文本摘要。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_Summary</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29281"><h2>描述</h2><p>返回栅格内容的文本摘要。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm29285"><h2>示例</h2><pre class="programlisting">SELECT ST_Summary(
    ST_AddBand(
        ST_AddBand(
            ST_AddBand(
                ST_MakeEmptyRaster(10, 10, 0, 0, 1, -1, 0, 0, 0)
                , 1, '8BUI', 1, 0
            )
            , 2, '32BF', 0, -9999
        )
        , 3, '16BSI', 0, NULL
    )
);

                            st_summary
------------------------------------------------------------------
 Raster of 10x10 pixels has 3 bands and extent of BOX(0 -10,10 0)+
     band 1 of pixtype 8BUI is in-db with NODATA value of 0      +
     band 2 of pixtype 32BF is in-db with NODATA value of -9999  +
     band 3 of pixtype 16BSI is in-db with no NODATA value
(1 row)
                </pre></div><div class="refsection" id="idm29288"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>, <a class="xref" href="#ST_Summary" title="ST_Summary">ST_Summary</a> <a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a> </p></div></div><div class="refentry" id="RT_ST_UpperLeftX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_UpperLeftX — 返回投影空间参考中栅格的左上角 X 坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_UpperLeftX</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29307"><h2>描述</h2><p>返回投影空间参考中栅格的左上角 X 坐标。</p></div><div class="refsection" id="idm29310"><h2>示例</h2><pre class="programlisting">SELECt rid, ST_UpperLeftX(rast) As ulx
FROM dummy_rast;

 rid |    ulx
-----+------------
   1 |        0.5
   2 | 3427927.75
                </pre></div><div class="refsection" id="idm29313"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" id="RT_ST_UpperLeftY"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_UpperLeftY — 返回投影空间参考中栅格的左上角 Y 坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_UpperLeftY</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29331"><h2>描述</h2><p>返回投影空间参考中栅格的左上角 Y 坐标。</p></div><div class="refsection" id="idm29334"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_UpperLeftY(rast) As uly
FROM dummy_rast;

 rid |   uly
-----+---------
   1 |     0.5
   2 | 5793244
                </pre></div><div class="refsection" id="idm29337"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" id="RT_ST_Width"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Width — 返回栅格的宽度（以像素为单位）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_Width</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm29355"><h2>描述</h2><p>返回栅格的宽度（以像素为单位）。</p></div><div class="refsection" id="idm29358"><h2>示例</h2><pre class="programlisting">SELECT ST_Width(rast) As rastwidth
FROM dummy_rast WHERE rid=1;

rastwidth
----------------
10
                </pre></div><div class="refsection" id="idm29361"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Height" title="ST_Height">ST_Height</a></p></div></div><div class="refentry" id="RT_ST_WorldToRasterCoord"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_WorldToRasterCoord — 给定几何 X 和 Y（经度和纬度）或以栅格的空间参考坐标系表示的点几何，将左上角作为列和行返回。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <strong class="fsfunc">ST_WorldToRasterCoord</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var><code>)</code>;</p><p><code class="funcdef">record <strong class="fsfunc">ST_WorldToRasterCoord</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">longitude</var>, double precision  <var class="pdparam">latitude</var><code>)</code>;</p></div></div><div class="refsection" id="idm29392"><h2>描述</h2><p>在给定几何 X 和 Y（经度和纬度）或点几何的情况下，将左上角作为列和行返回。 无论几何 X 和 Y 或点几何是否位于栅格范围之外，此函数都会起作用。 几何X和Y必须在栅格的空间参考坐标系中表示。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm29396"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    (ST_WorldToRasterCoord(rast,3427927.8,20.5)).*,
    (ST_WorldToRasterCoord(rast,ST_GeomFromText('POINT(3427927.8 20.5)',ST_SRID(rast)))).*
FROM dummy_rast;

 rid | columnx |   rowy    | columnx |   rowy
-----+---------+-----------+---------+-----------
   1 | 1713964 |         7 | 1713964 |         7
   2 |       2 | 115864471 |       2 | 115864471
                </pre></div><div class="refsection" id="idm29399"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a>, <a class="xref" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a> </p></div></div><div class="refentry" id="RT_ST_WorldToRasterCoordX"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_WorldToRasterCoordX — 返回栅格中点几何 (pt) 的列或以栅格世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_WorldToRasterCoordX</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">ST_WorldToRasterCoordX</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">ST_WorldToRasterCoordX</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var>, double precision  <var class="pdparam">yw</var><code>)</code>;</p></div></div><div class="refsection" id="idm29443"><h2>描述</h2><p>返回点几何 (pt) 或 X 和 Y 世界坐标 (xw, yw) 的栅格中的列。 一个点，或者（如果栅格倾斜，则需要 xw 和 yw 世界坐标）。 如果栅格没有倾斜，则 xw 就足够了。 世界坐标位于栅格的空间参考坐标系中。</p><p class="changed">更改：2.1.0 在之前的版本中，这称为 ST_World2RasterCoordX</p></div><div class="refsection" id="idm29447"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_WorldToRasterCoordX(rast,3427927.8) As xcoord,
        ST_WorldToRasterCoordX(rast,3427927.8,20.5) As xcoord_xwyw,
        ST_WorldToRasterCoordX(rast,ST_GeomFromText('POINT(3427927.8 20.5)',ST_SRID(rast))) As ptxcoord
FROM dummy_rast;

 rid | xcoord  |  xcoord_xwyw   | ptxcoord
-----+---------+---------+----------
   1 | 1713964 | 1713964 |  1713964
   2 |       1 |       1 |        1
                </pre></div><div class="refsection" id="idm29450"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a> </p></div></div><div class="refentry" id="RT_ST_WorldToRasterCoordY"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_WorldToRasterCoordY — 返回点几何图形 (pt) 的栅格中的行或以栅格的世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_WorldToRasterCoordY</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">ST_WorldToRasterCoordY</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var><code>)</code>;</p><p><code class="funcdef">integer <strong class="fsfunc">ST_WorldToRasterCoordY</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var>, double precision  <var class="pdparam">yw</var><code>)</code>;</p></div></div><div class="refsection" id="idm29492"><h2>描述</h2><p>返回点几何 (pt) 或 X 和 Y 世界坐标 (xw, yw) 的栅格中的行。 一个点，或者（如果栅格倾斜，则需要 xw 和 yw 世界坐标）。 如果栅格没有倾斜，则 xw 就足够了。 世界坐标位于栅格的空间参考坐标系中。</p><p class="changed">更改：2.1.0 在之前的版本中，这称为 ST_World2RasterCoordY</p></div><div class="refsection" id="idm29496"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_WorldToRasterCoordY(rast,20.5) As ycoord,
        ST_WorldToRasterCoordY(rast,3427927.8,20.5) As ycoord_xwyw,
        ST_WorldToRasterCoordY(rast,ST_GeomFromText('POINT(3427927.8 20.5)',ST_SRID(rast))) As ptycoord
FROM dummy_rast;

 rid |  ycoord   | ycoord_xwyw | ptycoord
-----+-----------+-------------+-----------
   1 |         7 |           7 |         7
   2 | 115864471 |   115864471 | 115864471
                </pre></div><div class="refsection" id="idm29499"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div></section><section class="section" id="RasterBand_Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.5. 栅格波段访问器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_BandMetaData">ST_BandMetaData</a></span><span class="refpurpose"> — 返回特定栅格波段的基本元数据。 如果未指定，则假定波段编号为 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_BandNoDataValue">ST_BandNoDataValue</a></span><span class="refpurpose"> — 返回表示无数据的给定波段中的值。如果没有指定波段编号，默认为波段1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_BandIsNoData">ST_BandIsNoData</a></span><span class="refpurpose"> — 如果波段仅填充无数据值，则返回 true。</span></li><li><span class="refentrytitle"><a href="#RT_ST_BandPath">ST_BandPath</a></span><span class="refpurpose"> — 返回存储在文件系统中的波段的系统文件路径。 如果未指定波段号，则假定为 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_BandFileSize">ST_BandFileSize</a></span><span class="refpurpose"> — 返回文件系统中存储的波段的文件大小。 如果未指定波段号，则假定为 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_BandFileTimestamp">ST_BandFileTimestamp</a></span><span class="refpurpose"> — 返回文件系统中存储的波段的文件时间戳。 如果未指定 波段号，则假定为 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_BandPixelType">ST_BandPixelType</a></span><span class="refpurpose"> — 返回给定波段的像素类型。 如果未指定 波段号，则假定为 1。</span></li><li><span class="refentrytitle"><a href="#ST_MinPossibleValue">ST_MinPossibleValue</a></span><span class="refpurpose"> — 返回此像素类型可以存储的最小值。</span></li><li><span class="refentrytitle"><a href="#RT_ST_HasNoBand">ST_HasNoBand</a></span><span class="refpurpose"> — 如果不存在具有给定波段编号的波段，则返回 true。 如果未指定波段号，则假定波段号为 1。</span></li></ul></div><div class="refentry" id="RT_ST_BandMetaData"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandMetaData — 返回特定栅格波段的基本元数据。 如果未指定，则假定波段编号为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(1) record <strong class="fsfunc">ST_BandMetaData</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band=1</var><code>)</code>;</p><p><code class="funcdef">(2) record <strong class="fsfunc">ST_BandMetaData</strong>(</code>raster <var class="pdparam">rast</var>, integer[] <var class="pdparam">band</var><code>)</code>;</p></div></div><div class="refsection" id="idm29531"><h2>描述</h2><p>返回有关栅格波段的基本元数据。 返回的列：pixeltype、nodatavalue、isoutdb、path、outdbbandnum、filesize、filetimestamp。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果栅格不包含波段，则会引发错误。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果 band 没有 NODATA 值，则 nodatavalue 为 NULL。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果 isoutdb 为 False，则路径、outdbbandnum、文件大小和文件时间戳为 NULL。 如果禁用 outdb 访问，则文件大小和文件时间戳也将为 NULL。 </p></td></tr></table></div><p class="enhanced">增强：2.5.0 包括<span class="emphasis"><em> outdbbandnum</em></span>、<span class="emphasis"><em>文件大小</em></span>和<span class="emphasis"><em>文件时间戳</em></span> for outdb 栅格。</p></div><div class="refsection" id="idm29544"><h2>示例：格式 1</h2><pre class="programlisting">SELECT
    rid,
    (foo.md).*
FROM (
    SELECT
        rid,
        ST_BandMetaData(rast, 1) AS md
    FROM dummy_rast
    WHERE rid=2
) As foo;

 rid | pixeltype | nodatavalue | isoutdb | path | outdbbandnum
-----+-----------+---- --------+---------+------+--------------
   2 | 8BUI      |           0 | f       |      |
                </pre></div><div class="refsection" id="idm29547"><h2>示例：格式2</h2><pre class="programlisting">WITH foo AS (
    SELECT
        ST_AddBand(NULL::raster, '/home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif', NULL::int[]) AS rast
)
SELECT
    *
FROM ST_BandMetadata(
    (SELECT rast FROM foo),
    ARRAY[1,3,2]::int[]
);

 bandnum | pixeltype | nodatavalue | isoutdb |                                      path                                      | outdbbandnum  | filesize | filetimestamp |
---------+-----------+-------------+---------+--------------------------------------------------------------------------------+---------------+----------+---------------+-
       1 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif      |            1  |    12345 |    1521807257 |
       3 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif      |            3  |    12345 |    1521807257 |
       2 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif      |            2  |    12345 |    1521807257 |
                </pre></div><div class="refsection" id="idm29550"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a></p></div></div><div class="refentry" id="RT_ST_BandNoDataValue"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandNoDataValue — 返回表示无数据的给定波段中的值。如果没有指定波段编号，默认为波段1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_BandNoDataValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm29570"><h2>描述</h2><p>返回表示该波段中无数据的数值</p></div><div class="refsection" id="idm29573"><h2>示例</h2><pre class="programlisting">SELECT ST_BandNoDataValue(rast,1) As bnval1,
    ST_BandNoDataValue(rast,2) As bnval2, ST_BandNoDataValue(rast,3) As bnval3
FROM dummy_rast
WHERE rid = 2;

 bnval1 | bnval2 | bnval3
--------+--------+--------
      0 |      0 |      0
                </pre></div><div class="refsection" id="idm29576"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" id="RT_ST_BandIsNoData"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandIsNoData — 如果波段仅填充无数据值，则返回 true。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_BandIsNoData</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, boolean  <var class="pdparam">forceChecking=true</var><code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_BandIsNoData</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">forceChecking=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm29607"><h2>描述</h2><p>如果波段仅填充无数据值，则返回 true。 如果未指定，则假定波段为1。 如果最后一个参数为 TRUE，则逐像素检查整个波段。 否则，该函数仅返回该带的 isnodata 标志的值。 如果未指定，此参数的默认值为 FALSE。</p><p class="availability">可用性: 2.0.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果标志位为 "dirty"（即，使用 TRUE 作为最后一个参数和不使用它的结果不同），您应该更新栅格，将该标志设置为 true，可以使用 ST_SetBandIsNodata() 或 ST_SetBandNodataValue()，并将 TRUE 作为最后一个参数。请参阅 <a class="xref" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a>。</p></td></tr></table></div></div><div class="refsection" id="idm29614"><h2>示例</h2><pre class="programlisting">-- Create dummy table with one raster column
create table dummy_rast (rid integer, rast raster);

-- Add raster with two bands, one pixel/band. In the first band, nodatavalue = pixel value = 3.
-- In the second band, nodatavalue = 13, pixel value = 4
insert into dummy_rast values(1,
(
'01' -- little endian (uint8 ndr)
||
'0000' -- version (uint16 0)
||
'0200' -- nBands (uint16 0)
||
'17263529ED684A3F' -- scaleX (float64 0.000805965234044584)
||
'F9253529ED684ABF' -- scaleY (float64 -0.00080596523404458)
||
'1C9F33CE69E352C0' -- ipX (float64 -75.5533328537098)
||
'718F0E9A27A44840' -- ipY (float64 49.2824585505576)
||
'ED50EB853EC32B3F' -- skewX (float64 0.000211812383858707)
||
'7550EB853EC32B3F' -- skewY (float64 0.000211812383858704)
||
'E6100000' -- SRID (int32 4326)
||
'0100' -- width (uint16 1)
||
'0100' -- height (uint16 1)
||
'6' -- hasnodatavalue and isnodata value set to true.
||
'2' -- first band type (4BUI)
||
'03' -- novalue==3
||
'03' -- pixel(0,0)==3 (same that nodata)
||
'0' -- hasnodatavalue set to false
||
'5' -- second band type (16BSI)
||
'0D00' -- novalue==13
||
'0400' -- pixel(0,0)==4
)::raster
);

select st_bandisnodata(rast, 1) from dummy_rast where rid = 1; -- Expected true
select st_bandisnodata(rast, 2) from dummy_rast where rid = 1; -- Expected false
            </pre></div><div class="refsection" id="idm29617"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>, <a class="xref" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a></p></div></div><div class="refentry" id="RT_ST_BandPath"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandPath — 返回存储在文件系统中的波段的系统文件路径。 如果未指定波段号，则假定为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_BandPath</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm29639"><h2>描述</h2><p>返回指定波段的系统文件路径。如果调用时使用数据库中的波段，则会抛出错误。</p></div><div class="refsection" id="idm29642"><h2>示例</h2><pre class="programlisting">
                    </pre></div><div class="refsection" id="idm29645"><h2>相关信息</h2><p/></div></div><div class="refentry" id="RT_ST_BandFileSize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandFileSize — 返回文件系统中存储的波段的文件大小。 如果未指定波段号，则假定为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bigint <strong class="fsfunc">ST_BandFileSize</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm29663"><h2>描述</h2><p>返回文件系统中存储的波段的文件大小。 如果使用 in db band 调用，或者未启用 outdb 访问，则会引发错误。</p><p>此函数通常与 ST_BandPath() 和 ST_BandFileTimestamp() 结合使用，以便客户端可以确定它看到的 outdb 栅格文件名是否与服务器看到的文件名相同。</p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm29668"><h2>示例</h2><pre class="programlisting">SELECT ST_BandFileSize(rast,1) FROM dummy_rast WHERE rid = 1;

 st_bandfilesize
-----------------
          240574
                </pre></div></div><div class="refentry" id="RT_ST_BandFileTimestamp"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandFileTimestamp — 返回文件系统中存储的波段的文件时间戳。 如果未指定 波段号，则假定为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bigint <strong class="fsfunc">ST_BandFileTimestamp</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm29686"><h2>描述</h2><p>返回文件系统中存储的波段的文件时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数）。 如果使用 in db band 调用，或者未启用 outdb 访问，则会引发错误。</p><p>此函数通常与 ST_BandPath() 和 ST_BandFileSize() 结合使用，以便客户端可以确定它所看到的 outdb 栅格的文件名是否与服务器所看到的相同。</p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm29691"><h2>示例</h2><pre class="programlisting">SELECT ST_BandFileTimestamp(rast,1) FROM dummy_rast WHERE rid = 1;

 st_bandfiletimestamp
----------------------
           1521807257
                </pre></div></div><div class="refentry" id="RT_ST_BandPixelType"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_BandPixelType — 返回给定波段的像素类型。 如果未指定 波段号，则假定为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_BandPixelType</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm29709"><h2>描述</h2><p>返回描述给定带区每个单元格中存储的数据类型和值大小的名称。</p><p>有 11 种像素类型。 支持的像素类型如下： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1BB - 1 位布尔值</p></li><li class="listitem"><p>2BUI - 2 位无符号整数</p></li><li class="listitem"><p>4BUI - 4位无符号整数 </p></li><li class="listitem"><p>8BSI - 8 位有符号整数 </p></li><li class="listitem"><p>8BUI - 8 位无符号整数</p></li><li class="listitem"><p>16BSI - 16 位有符号整数</p></li><li class="listitem"><p>16BUI - 16 位无符号整数</p></li><li class="listitem"><p>32BSI - 32 位有符号整数</p></li><li class="listitem"><p>32BUI - 32 位无符号整数</p></li><li class="listitem"><p>32BF - 32 位浮点数</p></li><li class="listitem"><p>64BF - 64 位浮点数</p></li></ul></div><p>
                </p></div><div class="refsection" id="idm29736"><h2>示例</h2><pre class="programlisting">SELECT ST_BandPixelType(rast,1) As btype1,
    ST_BandPixelType(rast,2) As btype2, ST_BandPixelType(rast,3) As btype3
FROM dummy_rast
WHERE rid = 2;

 btype1 | btype2 | btype3
--------+--------+--------
 8BUI   | 8BUI   | 8BUI
                </pre></div><div class="refsection" id="idm29739"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" id="ST_MinPossibleValue"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinPossibleValue — 返回此像素类型可以存储的最小值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <strong class="fsfunc">ST_MinPossibleValue</strong>(</code>text  <var class="pdparam">pixeltype</var><code>)</code>;</p></div></div><div class="refsection" id="idm29755"><h2>描述</h2><p>返回此像素类型可以存储的最小值。</p></div><div class="refsection" id="idm29758"><h2>示例</h2><pre class="programlisting">SELECT ST_MinPossibleValue('16BSI');

 st_minpossiblevalue
---------------------
              -32768


SELECT ST_MinPossibleValue('8BUI');

 st_minpossiblevalue
---------------------
                   0
                </pre></div><div class="refsection" id="idm29761"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a></p></div></div><div class="refentry" id="RT_ST_HasNoBand"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HasNoBand — 如果不存在具有给定波段编号的波段，则返回 true。 如果未指定波段号，则假定波段号为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_HasNoBand</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm29780"><h2>描述</h2><p>如果不存在具有给定波段编号的波段，则返回 true。 如果未指定波段号，则假定波段号为 1。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm29784"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_HasNoBand(rast) As hb1, ST_HasNoBand(rast,2) as hb2,
ST_HasNoBand(rast,4) as hb4, ST_NumBands(rast) As numbands
FROM dummy_rast;

rid | hb1 | hb2 | hb4 | numbands
-----+-----+-----+-----+----------
1 | t   | t   | t   |        0
2 | f   | f   | t   |        3
            </pre></div><div class="refsection" id="idm29787"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div></section><section class="section" id="Raster_Pixel_Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.6. 栅格像素访问器和设置器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_PixelAsPolygon">ST_PixelAsPolygon</a></span><span class="refpurpose"> — 返回限定特定行和列的像素的多边形几何形状。</span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelAsPolygons">ST_PixelAsPolygons</a></span><span class="refpurpose"> — 返回包围栅格带的每个像素的多边形几何图形以及每个像素的值、X 和 Y 栅格坐标。</span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelAsPoint">ST_PixelAsPoint</a></span><span class="refpurpose"> — 返回像素左上角的点几何形状。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelAsPoints">ST_PixelAsPoints</a></span><span class="refpurpose"> — 返回栅格波段的每个像素的点几何图形以及每个像素的值、X 和 Y 栅格坐标。 点几何的坐标是像素的左上角。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelAsCentroid">ST_PixelAsCentroid</a></span><span class="refpurpose"> — 返回像素表示的区域的质心（点几何）。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelAsCentroids">ST_PixelAsCentroids</a></span><span class="refpurpose"> — 返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Value">ST_Value</a></span><span class="refpurpose"> — 返回指定列 x、行 y 像素或特定几何点处给定波段的值。波段编号从 1 开始，如果未指定，则默认为 1。如果将参数 <code class="varname">exclude_nodata_value</code> 设置为 false，则所有像素都被认为与 <code class="varname">nodata</code> 像素相交并返回其值。如果未传递参数 <code class="varname">exclude_nodata_value</code>，则从栅格的元数据中读取该值。</span></li><li><span class="refentrytitle"><a href="#RT_ST_NearestValue">ST_NearestValue</a></span><span class="refpurpose"> — 返回由 columnx 和 rowy 指定的给定带像素的最接近的非<code class="varname"> NODATA </code>值或以与栅格相同的空间参考坐标系表示的几何点。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_SetZ">ST_SetZ</a></span><span class="refpurpose"> — 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 Z 维度。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetM">ST_SetM</a></span><span class="refpurpose"> — 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 M 维度。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Neighborhood">ST_Neighborhood</a></span><span class="refpurpose"> — 返回给定波段像素周围非 <code class="varname">NODATA</code> 值的二维双精度数组，该给定波段像素由 columnX 和 rowY 或以与栅格相同的空间参考坐标系表示的几何点指定。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_SetValue">ST_SetValue</a></span><span class="refpurpose"> — 返回修改后的栅格，其结果是将给定波段中的值设置为指定列x、行y像素或与特定几何图形相交的像素。波段编号从1开始，如果未指定波段，则默认为1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetValues">ST_SetValues</a></span><span class="refpurpose"> — 返回通过设置给定波段的值而产生的修改后的栅格。</span></li><li><span class="refentrytitle"><a href="#RT_ST_DumpValues">ST_DumpValues</a></span><span class="refpurpose"> — 获取指定 band（波段） 的值作为二维数组。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_PixelOfValue">ST_PixelOfValue</a></span><span class="refpurpose"> — 获取值等于搜索值的像素的列x、行y坐标。 </span></li></ul></div><div class="refentry" id="RT_ST_PixelAsPolygon"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPolygon — 返回限定特定行和列的像素的多边形几何形状。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PixelAsPolygon</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var><code>)</code>;</p></div></div><div class="refsection" id="idm29811"><h2>描述</h2><p>返回限定特定行和列的像素的多边形几何形状。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm29815"><h2>示例</h2><pre class="programlisting">-- get raster pixel polygon
SELECT i,j, ST_AsText(ST_PixelAsPolygon(foo.rast, i,j)) As b1pgeom
FROM dummy_rast As foo
    CROSS JOIN generate_series(1,2) As i
    CROSS JOIN generate_series(1,1) As j
WHERE rid=2;

 i | j |                                                    b1pgeom
---+---+-----------------------------------------------------------------------------
 1 | 1 | POLYGON((3427927.75 5793244,3427927.8 5793244,3427927.8 5793243.95,...
 2 | 1 | POLYGON((3427927.8 5793244,3427927.85 5793244,3427927.85 5793243.95, ..
  </pre></div><div class="refsection" id="idm29818"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>, <a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>, <a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>, <a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>, <a class="xref" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a> </p></div></div><div class="refentry" id="RT_ST_PixelAsPolygons"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPolygons — 返回包围栅格带的每个像素的多边形几何图形以及每个像素的值、X 和 Y 栅格坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelAsPolygons</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" id="idm29847"><h2>描述</h2><p>返回包围栅格带的每个像素的多边形几何图形以及每个像素的值（双精度）、X 和 Y 栅格坐标（整数）。</p><p>返回记录格式：<em class="parameter"><code>geom</code></em> <a class="xref" href="#geometry" title="geometry">geometry</a>，<em class="parameter"><code>val</code></em>双精度，<em class="parameter"><code>x</code></em>整数，<em class="parameter"><code>y</code></em>整数。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>当<em class="parameter"><code> except_nodata_value</code></em> = TRUE 时，仅将那些值不是 NODATA 的像素作为点返回。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_PixelAsPolygons 为每个像素返回一个多边形几何图形。 这与 ST_DumpAsPolygons 不同，其中每个几何图形代表一个或多个具有相同像素值的像素。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加了 except_nodata_value 可选参数。</p><p class="changed">更改：2.1.1 更改了 except_nodata_value 的行为。</p></div><div class="refsection" id="idm29864"><h2>示例</h2><pre class="programlisting">-- get raster pixel polygon
SELECT (gv).x, (gv).y, (gv).val, ST_AsText((gv).geom) geom
FROM (SELECT ST_PixelAsPolygons(
                 ST_SetValue(ST_SetValue(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 0.001, -0.001, 0.001, 0.001, 4269),
                                                    '8BUI'::text, 1, 0),
                                         2, 2, 10),
                             1, 1, NULL)
) gv
) foo;

 x | y | val |                geom
---+---+-----------------------------------------------------------------------------
 1 | 1 |     | POLYGON((0 0,0.001 0.001,0.002 0,0.001 -0.001,0 0))
 1 | 2 |   1 | POLYGON((0.001 -0.001,0.002 0,0.003 -0.001,0.002 -0.002,0.001 -0.001))
 2 | 1 |   1 | POLYGON((0.001 0.001,0.002 0.002,0.003 0.001,0.002 0,0.001 0.001))
 2 | 2 |  10 | POLYGON((0.002 0,0.003 0.001,0.004 0,0.003 -0.001,0.002 0))
  </pre></div><div class="refsection" id="idm29867"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>, <a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>, <a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>, <a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>, <a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a> </p></div></div><div class="refentry" id="RT_ST_PixelAsPoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPoint — 返回像素左上角的点几何形状。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PixelAsPoint</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var><code>)</code>;</p></div></div><div class="refsection" id="idm29895"><h2>描述</h2><p>返回像素左上角的点几何形状。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm29899"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_PixelAsPoint(rast, 1, 1)) FROM dummy_rast WHERE rid = 1;

   st_astext
----------------
 POINT(0.5 0.5)
                </pre></div><div class="refsection" id="idm29902"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>, <a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>, <a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>, <a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> </p></div></div><div class="refentry" id="RT_ST_PixelAsPoints"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPoints — 返回栅格波段的每个像素的点几何图形以及每个像素的值、X 和 Y 栅格坐标。 点几何的坐标是像素的左上角。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelAsPoints</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" id="idm29929"><h2>描述</h2><p>返回栅格波段的每个像素的点几何图形以及每个像素的值、X 和 Y 栅格坐标。 点几何的坐标是像素的左上角。 </p><p>返回记录格式：<em class="parameter"><code>geom</code></em> <a class="xref" href="#geometry" title="geometry">geometry</a>，<em class="parameter"><code>val</code></em>双精度，<em class="parameter"><code>x</code></em>整数，<em class="parameter"><code>y</code></em>整数。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>当<em class="parameter"><code> except_nodata_value</code></em> = TRUE 时，仅将那些值不是 NODATA 的像素作为点返回。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p><p class="changed">更改：2.1.1 更改了 except_nodata_value 的行为。</p></div><div class="refsection" id="idm29943"><h2>示例</h2><pre class="programlisting">SELECT x, y, val, ST_AsText(geom) FROM (SELECT (ST_PixelAsPoints(rast, 1)).* FROM dummy_rast WHERE rid = 2) foo;

 x | y | val |          st_astext
---+---+-----+------------------------------
 1 | 1 | 253 | POINT(3427927.75 5793244)
 2 | 1 | 254 | POINT(3427927.8 5793244)
 3 | 1 | 253 | POINT(3427927.85 5793244)
 4 | 1 | 254 | POINT(3427927.9 5793244)
 5 | 1 | 254 | POINT(3427927.95 5793244)
 1 | 2 | 253 | POINT(3427927.75 5793243.95)
 2 | 2 | 254 | POINT(3427927.8 5793243.95)
 3 | 2 | 254 | POINT(3427927.85 5793243.95)
 4 | 2 | 253 | POINT(3427927.9 5793243.95)
 5 | 2 | 249 | POINT(3427927.95 5793243.95)
 1 | 3 | 250 | POINT(3427927.75 5793243.9)
 2 | 3 | 254 | POINT(3427927.8 5793243.9)
 3 | 3 | 254 | POINT(3427927.85 5793243.9)
 4 | 3 | 252 | POINT(3427927.9 5793243.9)
 5 | 3 | 249 | POINT(3427927.95 5793243.9)
 1 | 4 | 251 | POINT(3427927.75 5793243.85)
 2 | 4 | 253 | POINT(3427927.8 5793243.85)
 3 | 4 | 254 | POINT(3427927.85 5793243.85)
 4 | 4 | 254 | POINT(3427927.9 5793243.85)
 5 | 4 | 253 | POINT(3427927.95 5793243.85)
 1 | 5 | 252 | POINT(3427927.75 5793243.8)
 2 | 5 | 250 | POINT(3427927.8 5793243.8)
 3 | 5 | 254 | POINT(3427927.85 5793243.8)
 4 | 5 | 254 | POINT(3427927.9 5793243.8)
 5 | 5 | 254 | POINT(3427927.95 5793243.8)
                </pre></div><div class="refsection" id="idm29946"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>, <a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>, <a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>, <a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> </p></div></div><div class="refentry" id="RT_ST_PixelAsCentroid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsCentroid — 返回像素表示的区域的质心（点几何）。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_PixelAsCentroid</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">x</var>, integer  <var class="pdparam">y</var><code>)</code>;</p></div></div><div class="refsection" id="idm29973"><h2>描述</h2><p>返回像素表示的区域的质心（点几何）。</p><p class="enhanced">增强：3.2.0 Faster 现在用 C 实现。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm29978"><h2>示例</h2><pre class="programlisting">SELECT ST_AsText(ST_PixelAsCentroid(rast, 1, 1)) FROM dummy_rast WHERE rid = 1;

  st_astext
--------------
 POINT(1.5 2)
                </pre></div><div class="refsection" id="idm29981"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>, <a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>, <a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>, <a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> </p></div></div><div class="refentry" id="RT_ST_PixelAsCentroids"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsCentroids — 返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelAsCentroids</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" id="idm30008"><h2>描述</h2><p>返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。 </p><p>返回记录格式：<em class="parameter"><code>geom</code></em> <a class="xref" href="#geometry" title="geometry">geometry</a>，<em class="parameter"><code>val</code></em>双精度，<em class="parameter"><code>x</code></em>整数，<em class="parameter"><code>y</code></em>整数。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>当<em class="parameter"><code> except_nodata_value</code></em> = TRUE 时，仅将那些值不是 NODATA 的像素作为点返回。 </p></td></tr></table></div><p class="enhanced">增强：3.2.0 Faster 现在用 C 实现。</p><p class="changed">更改：2.1.1 更改了 except_nodata_value 的行为。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm30023"><h2>示例</h2><pre class="programlisting">--LATERAL syntax requires PostgreSQL 9.3+
SELECT x, y, val, ST_AsText(geom)
    FROM (SELECT dp.* FROM dummy_rast, LATERAL ST_PixelAsCentroids(rast, 1) AS dp WHERE rid = 2) foo;
 x | y | val |           st_astext
---+---+-----+--------------------------------
 1 | 1 | 253 | POINT(3427927.775 5793243.975)
 2 | 1 | 254 | POINT(3427927.825 5793243.975)
 3 | 1 | 253 | POINT(3427927.875 5793243.975)
 4 | 1 | 254 | POINT(3427927.925 5793243.975)
 5 | 1 | 254 | POINT(3427927.975 5793243.975)
 1 | 2 | 253 | POINT(3427927.775 5793243.925)
 2 | 2 | 254 | POINT(3427927.825 5793243.925)
 3 | 2 | 254 | POINT(3427927.875 5793243.925)
 4 | 2 | 253 | POINT(3427927.925 5793243.925)
 5 | 2 | 249 | POINT(3427927.975 5793243.925)
 1 | 3 | 250 | POINT(3427927.775 5793243.875)
 2 | 3 | 254 | POINT(3427927.825 5793243.875)
 3 | 3 | 254 | POINT(3427927.875 5793243.875)
 4 | 3 | 252 | POINT(3427927.925 5793243.875)
 5 | 3 | 249 | POINT(3427927.975 5793243.875)
 1 | 4 | 251 | POINT(3427927.775 5793243.825)
 2 | 4 | 253 | POINT(3427927.825 5793243.825)
 3 | 4 | 254 | POINT(3427927.875 5793243.825)
 4 | 4 | 254 | POINT(3427927.925 5793243.825)
 5 | 4 | 253 | POINT(3427927.975 5793243.825)
 1 | 5 | 252 | POINT(3427927.775 5793243.775)
 2 | 5 | 250 | POINT(3427927.825 5793243.775)
 3 | 5 | 254 | POINT(3427927.875 5793243.775)
 4 | 5 | 254 | POINT(3427927.925 5793243.775)
 5 | 5 | 254 | POINT(3427927.975 5793243.775)
                </pre></div><div class="refsection" id="idm30026"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>, <a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>, <a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>, <a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>, <a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a> </p></div></div><div class="refentry" id="RT_ST_Value"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Value — 返回指定列 x、行 y 像素或特定几何点处给定波段的值。波段编号从 1 开始，如果未指定，则默认为 1。如果将参数 <code class="varname">exclude_nodata_value</code> 设置为 false，则所有像素都被认为与 <code class="varname">nodata</code> 像素相交并返回其值。如果未传递参数 <code class="varname">exclude_nodata_value</code>，则从栅格的元数据中读取该值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_Value</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Value</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, text  <var class="pdparam">resample='nearest'</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Value</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">x</var>, integer  <var class="pdparam">y</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Value</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, integer  <var class="pdparam">x</var>, integer  <var class="pdparam">y</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm30107"><h2>描述</h2><p>返回给定列 x、行 y 像素或给定几何点处给定波段的值。波段编号从1开始，如果未指定波段，则默认为1。</p><p>如果<code class="varname"> except_nodata_value </code>设置为 true，则仅考虑非<code class="varname">nodata</code>像素。 如果 <code class="varname">except_nodata_value </code>设置为 false，则考虑所有像素。</p><p><code class="varname">重采样</code> 参数的允许值为“nearest”（执行默认的最近邻重采样）和“bilinear”（执行 <a class="link" href="https://en.wikipedia.org/wiki/Bilinear_interpolation" target="_top">双线性插值</a> 以估计像素中心之间的值）。</p><p class="enhanced">增强：添加了 3.2.0 重新采样可选参数。</p><p class="enhanced">增强：2.0.0 添加了 except_nodata_value 可选参数。</p></div><div class="refsection" id="idm30119"><h2>示例</h2><pre class="programlisting">-- get raster values at particular postgis geometry points
-- the srid of your geometry should be same as for your raster
SELECT rid, ST_Value(rast, foo.pt_geom) As b1pval, ST_Value(rast, 2, foo.pt_geom) As b2pval
FROM dummy_rast CROSS JOIN (SELECT ST_SetSRID(ST_Point(3427927.77, 5793243.76), 0) As pt_geom) As foo
WHERE rid=2;

 rid | b1pval | b2pval
-----+--------+--------
   2 |    252 |     79


-- general fictitious example using a real table
SELECT rid, ST_Value(rast, 3, sometable.geom) As b3pval
FROM sometable
WHERE ST_Intersects(rast,sometable.geom);
                </pre><pre class="programlisting">SELECT rid, ST_Value(rast, 1, 1, 1) As b1pval,
    ST_Value(rast, 2, 1, 1) As b2pval, ST_Value(rast, 3, 1, 1) As b3pval
FROM dummy_rast
WHERE rid=2;

 rid | b1pval | b2pval | b3pval
-----+--------+--------+--------
   2 |    253 |     78 |     70
                </pre><pre class="programlisting">

--- Get all values in bands 1,2,3 of each pixel --
SELECT x, y, ST_Value(rast, 1, x, y) As b1val,
    ST_Value(rast, 2, x, y) As b2val, ST_Value(rast, 3, x, y) As b3val
FROM dummy_rast CROSS JOIN
generate_series(1, 1000) As x CROSS JOIN generate_series(1, 1000) As y
WHERE rid =  2 AND x &lt;= ST_Width(rast) AND y &lt;= ST_Height(rast);

 x | y | b1val | b2val | b3val
---+---+-------+-------+-------
 1 | 1 |   253 |    78 |    70
 1 | 2 |   253 |    96 |    80
 1 | 3 |   250 |    99 |    90
 1 | 4 |   251 |    89 |    77
 1 | 5 |   252 |    79 |    62
 2 | 1 |   254 |    98 |    86
 2 | 2 |   254 |   118 |   108
 :
 :

</pre><pre class="programlisting">

--- Get all values in bands 1,2,3 of each pixel same as above but returning the upper left point point of each pixel --
SELECT ST_AsText(ST_SetSRID(
    ST_Point(ST_UpperLeftX(rast) + ST_ScaleX(rast)*x,
        ST_UpperLeftY(rast) + ST_ScaleY(rast)*y),
        ST_SRID(rast))) As uplpt
    , ST_Value(rast, 1, x, y) As b1val,
    ST_Value(rast, 2, x, y) As b2val, ST_Value(rast, 3, x, y) As b3val
FROM dummy_rast CROSS JOIN
generate_series(1,1000) As x CROSS JOIN generate_series(1,1000) As y
WHERE rid =  2 AND x &lt;= ST_Width(rast) AND y &lt;= ST_Height(rast);

            uplpt            | b1val | b2val | b3val
-----------------------------+-------+-------+-------
 POINT(3427929.25 5793245.5) |   253 |    78 |    70
 POINT(3427929.25 5793247)   |   253 |    96 |    80
 POINT(3427929.25 5793248.5) |   250 |    99 |    90
:

</pre><pre class="programlisting">

--- Get a polygon formed by union of all pixels
    that fall in a particular value range and intersect particular polygon --
SELECT ST_AsText(ST_Union(pixpolyg)) As shadow
FROM (SELECT ST_Translate(ST_MakeEnvelope(
        ST_UpperLeftX(rast), ST_UpperLeftY(rast),
            ST_UpperLeftX(rast) + ST_ScaleX(rast),
            ST_UpperLeftY(rast) + ST_ScaleY(rast), 0
            ), ST_ScaleX(rast)*x, ST_ScaleY(rast)*y
        ) As pixpolyg, ST_Value(rast, 2, x, y) As b2val
    FROM dummy_rast CROSS JOIN
generate_series(1,1000) As x CROSS JOIN generate_series(1,1000) As y
WHERE rid =  2
    AND x &lt;= ST_Width(rast) AND y &lt;= ST_Height(rast)) As foo
WHERE
    ST_Intersects(
        pixpolyg,
        ST_GeomFromText('POLYGON((3427928 5793244,3427927.75 5793243.75,3427928 5793243.75,3427928 5793244))',0)
        ) AND b2val != 254;


        shadow
------------------------------------------------------------------------------------
 MULTIPOLYGON(((3427928 5793243.9,3427928 5793243.85,3427927.95 5793243.85,3427927.95 5793243.9,
 3427927.95 5793243.95,3427928 5793243.95,3427928.05 5793243.95,3427928.05 5793243.9,3427928 5793243.9)),((3427927.95 5793243.9,3427927.95 579324
3.85,3427927.9 5793243.85,3427927.85 5793243.85,3427927.85 5793243.9,3427927.9 5793243.9,3427927.9 5793243.95,
3427927.95 5793243.95,3427927.95 5793243.9)),((3427927.85 5793243.75,3427927.85 5793243.7,3427927.8 5793243.7,3427927.8 5793243.75
,3427927.8 5793243.8,3427927.8 5793243.85,3427927.85 5793243.85,3427927.85 5793243.8,3427927.85 5793243.75)),
((3427928.05 5793243.75,3427928.05 5793243.7,3427928 5793243.7,3427927.95 5793243.7,3427927.95 5793243.75,3427927.95 5793243.8,3427
927.95 5793243.85,3427928 5793243.85,3427928 5793243.8,3427928.05 5793243.8,
3427928.05 5793243.75)),((3427927.95 5793243.75,3427927.95 5793243.7,3427927.9 5793243.7,3427927.85 5793243.7,
3427927.85 5793243.75,3427927.85 5793243.8,3427927.85 5793243.85,3427927.9 5793243.85,
3427927.95 5793243.85,3427927.95 5793243.8,3427927.95 5793243.75)))

</pre><pre class="programlisting">

--- Checking all the pixels of a large raster tile can take a long time.
--- You can dramatically improve speed at some lose of precision by orders of magnitude
--  by sampling pixels using the step optional parameter of generate_series.
--  This next example does the same as previous but by checking 1 for every 4 (2x2) pixels and putting in the last checked
--  putting in the checked pixel as the value for subsequent 4

SELECT ST_AsText(ST_Union(pixpolyg)) As shadow
FROM (SELECT ST_Translate(ST_MakeEnvelope(
        ST_UpperLeftX(rast), ST_UpperLeftY(rast),
            ST_UpperLeftX(rast) + ST_ScaleX(rast)*2,
            ST_UpperLeftY(rast) + ST_ScaleY(rast)*2, 0
            ), ST_ScaleX(rast)*x, ST_ScaleY(rast)*y
        ) As pixpolyg, ST_Value(rast, 2, x, y) As b2val
    FROM dummy_rast CROSS JOIN
generate_series(1,1000,2) As x CROSS JOIN generate_series(1,1000,2) As y
WHERE rid =  2
    AND x &lt;= ST_Width(rast)  AND y &lt;= ST_Height(rast)  ) As foo
WHERE
    ST_Intersects(
        pixpolyg,
        ST_GeomFromText('POLYGON((3427928 5793244,3427927.75 5793243.75,3427928 5793243.75,3427928 5793244))',0)
        ) AND b2val != 254;

        shadow
------------------------------------------------------------------------------------
 MULTIPOLYGON(((3427927.9 5793243.85,3427927.8 5793243.85,3427927.8 5793243.95,
 3427927.9 5793243.95,3427928 5793243.95,3427928.1 5793243.95,3427928.1 5793243.85,3427928 5793243.85,3427927.9 5793243.85)),
 ((3427927.9 5793243.65,3427927.8 5793243.65,3427927.8 5793243.75,3427927.8 5793243.85,3427927.9 5793243.85,
 3427928 5793243.85,3427928 5793243.75,3427928.1 5793243.75,3427928.1 5793243.65,3427928 5793243.65,3427927.9 5793243.65)))

</pre></div><div class="refsection" id="idm30127"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>, <a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> </p></div></div><div class="refentry" id="RT_ST_NearestValue"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NearestValue — 返回由 columnx 和 rowy 指定的给定带像素的最接近的非<code class="varname"> NODATA </code>值或以与栅格相同的空间参考坐标系表示的几何点。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_NearestValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_NearestValue</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_NearestValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_NearestValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm30211"><h2>描述</h2><p>返回给定列 x、行y像素或特定几何点中给定带的最接近的非<code class="varname"> NODATA </code>值。 如果列x、行y像素或指定几何点处的像素为<code class="varname">NODATA</code>，则函数将查找距离列x、行y像素或值为非<code class="varname">NODATA</code>的几何点最近的像素。 </p><p>Band 编号从 1 开始，如果未指定，则<code class="varname"> bandnum </code>假定为 1。 如果<code class="varname"> except_nodata_value </code>设置为 false，则所有包含<code class="varname"> nodata </code>像素的像素都被视为相交并返回值。 如果<code class="varname">exclude_nodata_value</code>未传入，则从栅格的元数据中读取它。 </p><p class="availability">可用性：2.1.0</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_NearestValue 是 ST_Value 的直接替代品。 </p></td></tr></table></div></div><div class="refsection" id="idm30225"><h2>示例</h2><pre class="programlisting">-- pixel 2x2 has value
SELECT
    ST_Value(rast, 2, 2) AS value,
    ST_NearestValue(rast, 2, 2) AS nearestvalue
FROM (
    SELECT
        ST_SetValue(
            ST_SetValue(
                ST_SetValue(
                    ST_SetValue(
                        ST_SetValue(
                            ST_AddBand(
                                ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
                                '8BUI'::text, 1, 0
                            ),
                            1, 1, 0.
                        ),
                        2, 3, 0.
                    ),
                    3, 5, 0.
                ),
                4, 2, 0.
            ),
            5, 4, 0.
        ) AS rast
) AS foo

 value | nearestvalue
-------+--------------
     1 |            1
                </pre><pre class="programlisting">-- pixel 2x3 is NODATA
SELECT
    ST_Value(rast, 2, 3) AS value,
    ST_NearestValue(rast, 2, 3) AS nearestvalue
FROM (
    SELECT
        ST_SetValue(
            ST_SetValue(
                ST_SetValue(
                    ST_SetValue(
                        ST_SetValue(
                            ST_AddBand(
                                ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
                                '8BUI'::text, 1, 0
                            ),
                            1, 1, 0.
                        ),
                        2, 3, 0.
                    ),
                    3, 5, 0.
                ),
                4, 2, 0.
            ),
            5, 4, 0.
        ) AS rast
) AS foo

 value | nearestvalue
-------+--------------
       |            1
                </pre></div><div class="refsection" id="idm30229"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a>, <a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a> </p></div></div><div class="refentry" id="RT_ST_SetZ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetZ — 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 Z 维度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SetZ</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">resample=nearest</var>, integer  <var class="pdparam">band=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm30255"><h2>描述</h2><p>返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 Z 维度。</p><p><code class="varname">重采样</code> 参数可以设置为 "nearest"，以复制每个顶点所在单元格的值，或者设置为 "bilinear"，以使用<a class="link" href="https://en.wikipedia.org/wiki/Bilinear_interpolation" target="_top">双线性插值</a>来计算考虑到相邻单元格的值。</p><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm30262"><h2>示例</h2><pre class="programlisting">--
-- 2x2 test raster with values
--
-- 10 50
-- 40 20
--
WITH test_raster AS (
SELECT
ST_SetValues(
  ST_AddBand(
    ST_MakeEmptyRaster(width =&gt; 2, height =&gt; 2,
      upperleftx =&gt; 0, upperlefty =&gt; 2,
      scalex =&gt; 1.0, scaley =&gt; -1.0,
      skewx =&gt; 0, skewy =&gt; 0, srid =&gt; 4326),
    index =&gt; 1, pixeltype =&gt; '16BSI',
    initialvalue =&gt; 0,
    nodataval =&gt; -999),
  1,1,1,
  newvalueset =&gt;ARRAY[ARRAY[10.0::float8, 50.0::float8], ARRAY[40.0::float8, 20.0::float8]]) AS rast
)
SELECT
ST_AsText(
  ST_SetZ(
    rast,
    band =&gt; 1,
    geom =&gt; 'SRID=4326;LINESTRING(1.0 1.9, 1.0 0.2)'::geometry,
    resample =&gt; 'bilinear'
))
FROM test_raster

            st_astext
----------------------------------
 LINESTRING Z (1 1.9 38,1 0.2 27)</pre></div><div class="refsection" id="idm30265"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_SetM" title="ST_SetM">ST_SetM</a> </p></div></div><div class="refentry" id="RT_ST_SetM"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetM — 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 M 维度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_SetM</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">resample=nearest</var>, integer  <var class="pdparam">band=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm30291"><h2>描述</h2><p>返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 M 维度。</p><p><code class="varname">重采样</code> 参数可以设置为 "nearest"，以复制每个顶点所在单元格的值，或者设置为 "bilinear"，以使用<a class="link" href="https://en.wikipedia.org/wiki/Bilinear_interpolation" target="_top">双线性插值</a>来计算考虑到相邻单元格的值。</p><p class="availability">可用性：3.2.0</p></div><div class="refsection" id="idm30298"><h2>示例</h2><pre class="programlisting">--
-- 2x2 test raster with values
--
-- 10 50
-- 40 20
--
WITH test_raster AS (
SELECT
ST_SetValues(
  ST_AddBand(
    ST_MakeEmptyRaster(width =&gt; 2, height =&gt; 2,
      upperleftx =&gt; 0, upperlefty =&gt; 2,
      scalex =&gt; 1.0, scaley =&gt; -1.0,
      skewx =&gt; 0, skewy =&gt; 0, srid =&gt; 4326),
    index =&gt; 1, pixeltype =&gt; '16BSI',
    initialvalue =&gt; 0,
    nodataval =&gt; -999),
  1,1,1,
  newvalueset =&gt;ARRAY[ARRAY[10.0::float8, 50.0::float8], ARRAY[40.0::float8, 20.0::float8]]) AS rast
)
SELECT
ST_AsText(
  ST_SetM(
    rast,
    band =&gt; 1,
    geom =&gt; 'SRID=4326;LINESTRING(1.0 1.9, 1.0 0.2)'::geometry,
    resample =&gt; 'bilinear'
))
FROM test_raster

            st_astext
----------------------------------
 LINESTRING M (1 1.9 38,1 0.2 27)</pre></div><div class="refsection" id="idm30301"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_SetZ" title="ST_SetZ">ST_SetZ</a> </p></div></div><div class="refentry" id="RT_ST_Neighborhood"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Neighborhood — 返回给定波段像素周围非 <code class="varname">NODATA</code> 值的二维双精度数组，该给定波段像素由 columnX 和 rowY 或以与栅格相同的空间参考坐标系表示的几何点指定。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision[][] <strong class="fsfunc">ST_Neighborhood</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, integer  <var class="pdparam">columnX</var>, integer  <var class="pdparam">rowY</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision[][] <strong class="fsfunc">ST_Neighborhood</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnX</var>, integer  <var class="pdparam">rowY</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision[][] <strong class="fsfunc">ST_Neighborhood</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, geometry  <var class="pdparam">pt</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision[][] <strong class="fsfunc">ST_Neighborhood</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" id="idm30397"><h2>描述</h2><p>返回一个二维双精度数组，其中包含围绕给定波段的像素的非<code class="varname">NODATA</code>值。这可以通过指定列X和行Y，或者使用与栅格相同的空间参考坐标系统表示的几何点来完成。参数<code class="varname">distanceX</code>和<code class="varname">distanceY</code>定义了X和Y轴上指定像素周围的像素数量，例如，我想获取我感兴趣的像素周围X轴方向上3个像素距离和Y轴方向上2个像素距离内的所有值。二维数组的中心值将是由列X和行Y或几何点指定的像素的值。 </p><p>Band 编号从 1 开始，如果未指定，则<code class="varname"> bandnum </code>假定为 1。 如果<code class="varname"> except_nodata_value </code>设置为 false，则所有包含<code class="varname"> nodata </code>像素的像素都被视为相交并返回值。 如果<code class="varname">exclude_nodata_value</code>未传入，则从栅格的元数据中读取它。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>返回的二维数组沿每个轴的元素数量为 2 * (<code class="varname">distanceX</code>|<code class="varname">distanceY</code>) 1。因此，对于 <code class="varname">distanceX </code>和 <code class="varname">distanceY </code>为 1，返回的数组将为 3x3。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>二维数组输出可以传递给任何栅格处理内置函数，例如 ST_Min4ma、ST_Sum4ma、ST_Mean4ma。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm30417"><h2>示例</h2><pre class="programlisting">-- pixel 2x2 has value
SELECT
    ST_Neighborhood(rast, 2, 2, 1, 1)
FROM (
    SELECT
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
                '8BUI'::text, 1, 0
            ),
            1, 1, 1, ARRAY[
                [0, 1, 1, 1, 1],
                [1, 1, 1, 0, 1],
                [1, 0, 1, 1, 1],
                [1, 1, 1, 1, 0],
                [1, 1, 0, 1, 1]
            ]::double precision[],
            1
        ) AS rast
) AS foo

         st_neighborhood
---------------------------------
{{NULL,1,1},{1,1,1},{1,NULL,1}}
                </pre><pre class="programlisting">-- pixel 2x3 is NODATA
SELECT
    ST_Neighborhood(rast, 2, 3, 1, 1)
FROM (
    SELECT
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
                '8BUI'::text, 1, 0
            ),
            1, 1, 1, ARRAY[
                [0, 1, 1, 1, 1],
                [1, 1, 1, 0, 1],
                [1, 0, 1, 1, 1],
                [1, 1, 1, 1, 0],
                [1, 1, 0, 1, 1]
            ]::double precision[],
            1
        ) AS rast
) AS foo

       st_neighborhood
------------------------------
 {{1,1,1},{1,NULL,1},{1,1,1}}
                </pre><pre class="programlisting">-- pixel 3x3 has value
-- exclude_nodata_value = FALSE
SELECT
    ST_Neighborhood(rast, 3, 3, 1, 1, false)
FROM ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
                '8BUI'::text, 1, 0
            ),
            1, 1, 1, ARRAY[
                [0, 1, 1, 1, 1],
                [1, 1, 1, 0, 1],
                [1, 0, 1, 1, 1],
                [1, 1, 1, 1, 0],
                [1, 1, 0, 1, 1]
            ]::double precision[],
            1
        ) AS rast

      st_neighborhood
---------------------------
{{1,1,0},{0,1,1},{1,1,1}}
                </pre></div><div class="refsection" id="idm30422"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_SetValue"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetValue — 返回修改后的栅格，其结果是将给定波段中的值设置为指定列x、行y像素或与特定几何图形相交的像素。波段编号从1开始，如果未指定波段，则默认为1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValue</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p></div></div><div class="refsection" id="idm30499"><h2>描述</h2><p>返回修改后的栅格，该栅格是通过将指定像素的值设置为给定栅格的行和列或几何图形的指定波段的新值而产生的。 如果未指定波段，则假定为 1。 </p><p class="enhanced">增强：2.1.0 ST_SetValue() 的 几何变体现在支持任何几何类型，而不仅仅是点。 几何变体是 ST_SetValues() 的 geomval[] 变体的包装</p></div><div class="refsection" id="idm30503"><h2>示例</h2><pre class="programlisting">

                -- Geometry example
SELECT (foo.geomval).val, ST_AsText(ST_Union((foo.geomval).geom))
FROM (SELECT ST_DumpAsPolygons(
        ST_SetValue(rast,1,
                ST_Point(3427927.75, 5793243.95),
                50)
            ) As geomval
FROM dummy_rast
where rid = 2) As foo
WHERE (foo.geomval).val &lt; 250
GROUP BY (foo.geomval).val;

 val |                                                     st_astext
-----+-------------------------------------------------------------------
  50 | POLYGON((3427927.75 5793244,3427927.75 5793243.95,3427927.8 579324 ...
 249 | POLYGON((3427927.95 5793243.95,3427927.95 5793243.85,3427928 57932 ...


</pre><pre class="programlisting">-- Store the changed raster --
    UPDATE dummy_rast SET rast = ST_SetValue(rast,1, ST_Point(3427927.75, 5793243.95),100)
        WHERE rid = 2   ;

                </pre></div><div class="refsection" id="idm30507"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a></p></div></div><div class="refentry" id="RT_ST_SetValues"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetValues — 返回通过设置给定波段的值而产生的修改后的栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValues</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision[][]  <var class="pdparam">newvalueset</var>, boolean[][]  <var class="pdparam">noset=NULL</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValues</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision[][]  <var class="pdparam">newvalueset</var>, double precision  <var class="pdparam">nosetvalue</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValues</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">newvalue</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValues</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">newvalue</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetValues</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, geomval[]  <var class="pdparam">geomvalset</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm30632"><h2>描述</h2><p>返回通过将指定波段的指定像素设置为新值而产生的修改后的栅格。 <code class="varname">columnx </code>和 <code class="varname">rowy </code>是 从1 开始索引的。 </p><p>如果<code class="varname">keepnodata</code>为TRUE，那些值为NODATA的像素将不会被设置为<code class="varname">newvalueset</code>中的相应值。 </p><p>对于变体1，要设置的特定像素由<code class="varname">columnx</code>、<code class="varname">rowy</code>像素坐标和<code class="varname">newvalueset</code>数组的尺寸决定。<code class="varname">noset</code>可以用来防止设置具有<code class="varname">newvalueset</code>中存在的值的像素（因为PostgreSQL不允许不规则数组）。请参见变体1的示例。 </p><p>变体2与变体1类似，但是使用简单的双精度<code class="varname">nosetvalue</code>而不是布尔型的<code class="varname">noset</code>数组。<code class="varname">newvalueset</code>中具有<code class="varname">nosetvalue</code>值的元素将被跳过。请参见变体2的示例。 </p><p>对于变体3，要设置的特定像素由<code class="varname">columnx</code>、<code class="varname">rowy</code>像素坐标、<code class="varname">width</code>和<code class="varname">height</code>决定。请参见变体3的示例。 </p><p>变体4与变体3相同，唯一的区别是它假定将设置<code class="varname">rast</code>的第一个波段的像素。 </p><p>对于变体5，将使用<a class="xref" href="#geomval" title="geomval">geomval</a>数组来确定要设置的特定像素。如果数组中的所有几何图形都是点类型或多点类型，函数将使用一种快捷方式，其中每个点的经度和纬度用于直接设置像素。否则，几何图形将转换为栅格，然后一次迭代通过它们。请参见变体5的示例。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm30661"><h2>示例：格式 1</h2><pre class="programlisting">

/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =
&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                1, '8BUI', 1, 0
            ),
            1, 2, 2, ARRAY[[9, 9], [9, 9]]::double precision[][]
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9

</pre><pre class="programlisting">

/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =
&gt;    | 9 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                1, '8BUI', 1, 0
            ),
            1, 1, 1, ARRAY[[9, 9, 9], [9, NULL, 9], [9, 9, 9]]::double precision[][]
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   9
 1 | 2 |   9
 1 | 3 |   9
 2 | 1 |   9
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   9
 3 | 2 |   9
 3 | 3 |   9

</pre><pre class="programlisting">/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                1, '8BUI', 1, 0
            ),
            1, 1, 1,
                ARRAY[[9, 9, 9], [9, NULL, 9], [9, 9, 9]]::double precision[][],
                ARRAY[[false], [true]]::boolean[][]
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   9
 1 | 2 |   1
 1 | 3 |   9
 2 | 1 |   9
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   9
 3 | 2 |   9
 3 | 3 |   9
                </pre><pre class="programlisting">/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
|   | 1 | 1 |          |   | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_SetValue(
                ST_AddBand(
                    ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                    1, '8BUI', 1, 0
                ),
                1, 1, 1, NULL
            ),
            1, 1, 1,
                ARRAY[[9, 9, 9], [9, NULL, 9], [9, 9, 9]]::double precision[][],
                ARRAY[[false], [true]]::boolean[][],
                TRUE
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |
 1 | 2 |   1
 1 | 3 |   9
 2 | 1 |   9
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   9
 3 | 2 |   9
 3 | 3 |   9
                </pre></div><div class="refsection" id="idm30667"><h2>示例：格式2</h2><pre class="programlisting">/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                1, '8BUI', 1, 0
            ),
            1, 1, 1, ARRAY[[-1, -1, -1], [-1, 9, 9], [-1, 9, 9]]::double precision[][], -1
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
                </pre><pre class="programlisting">/*
This example is like the previous one.  Instead of nosetvalue = -1, nosetvalue = NULL

The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                1, '8BUI', 1, 0
            ),
            1, 1, 1, ARRAY[[NULL, NULL, NULL], [NULL, 9, 9], [NULL, 9, 9]]::double precision[][], NULL::double precision
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
                </pre></div><div class="refsection" id="idm30671"><h2>示例：变体3</h2><pre class="programlisting">/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                1, '8BUI', 1, 0
            ),
            1, 2, 2, 2, 2, 9
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
                </pre><pre class="programlisting">/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 |   | 1 |    =&gt;    | 1 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
    (poly).x,
    (poly).y,
    (poly).val
FROM (
SELECT
    ST_PixelAsPolygons(
        ST_SetValues(
            ST_SetValue(
                ST_AddBand(
                    ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
                    1, '8BUI', 1, 0
                ),
                1, 2, 2, NULL
            ),
            1, 2, 2, 2, 2, 9, TRUE
        )
    ) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
                </pre></div><div class="refsection" id="idm30675"><h2>示例：变体5</h2><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0) AS rast
), bar AS (
    SELECT 1 AS gid, 'SRID=0;POINT(2.5 -2.5)'::geometry geom UNION ALL
    SELECT 2 AS gid, 'SRID=0;POLYGON((1 -1, 4 -1, 4 -4, 1 -4, 1 -1))'::geometry geom UNION ALL
    SELECT 3 AS gid, 'SRID=0;POLYGON((0 0, 5 0, 5 -1, 1 -1, 1 -4, 0 -4, 0 0))'::geometry geom UNION ALL
    SELECT 4 AS gid, 'SRID=0;MULTIPOINT(0 0, 4 4, 4 -4)'::geometry
)
SELECT
    rid, gid, ST_DumpValues(ST_SetValue(rast, 1, geom, gid))
FROM foo t1
CROSS JOIN bar t2
ORDER BY rid, gid;

 rid | gid |                                                                st_dumpvalues
-----+-----+---------------------------------------------------------------------------------------------------------------------------------------------
   1 |   1 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,1,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL}}")
   1 |   2 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,NULL,NULL,NULL,NULL}}")
   1 |   3 | (1,"{{3,3,3,3,3},{3,NULL,NULL,NULL,NULL},{3,NULL,NULL,NULL,NULL},{3,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL}}")
   1 |   4 | (1,"{{4,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,4}}")
(4 rows)
                </pre><p>下面显示了数组中后面的 geomvals 可以覆盖前面的 geomvals</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0) AS rast
), bar AS (
    SELECT 1 AS gid, 'SRID=0;POINT(2.5 -2.5)'::geometry geom UNION ALL
    SELECT 2 AS gid, 'SRID=0;POLYGON((1 -1, 4 -1, 4 -4, 1 -4, 1 -1))'::geometry geom UNION ALL
    SELECT 3 AS gid, 'SRID=0;POLYGON((0 0, 5 0, 5 -1, 1 -1, 1 -4, 0 -4, 0 0))'::geometry geom UNION ALL
    SELECT 4 AS gid, 'SRID=0;MULTIPOINT(0 0, 4 4, 4 -4)'::geometry
)
SELECT
    t1.rid, t2.gid, t3.gid, ST_DumpValues(ST_SetValues(rast, 1, ARRAY[ROW(t2.geom, t2.gid), ROW(t3.geom, t3.gid)]::geomval[]))
FROM foo t1
CROSS JOIN bar t2
CROSS JOIN bar t3
WHERE t2.gid = 1
    AND t3.gid = 2
ORDER BY t1.rid, t2.gid, t3.gid;

 rid | gid | gid |                                                    st_dumpvalues
-----+-----+-----+---------------------------------------------------------------------------------------------------------------------
   1 |   1 |   2 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,NULL,NULL,NULL,NULL}}")
(1 row)
                </pre><p>这个例子与前面的例子相反</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0) AS rast
), bar AS (
    SELECT 1 AS gid, 'SRID=0;POINT(2.5 -2.5)'::geometry geom UNION ALL
    SELECT 2 AS gid, 'SRID=0;POLYGON((1 -1, 4 -1, 4 -4, 1 -4, 1 -1))'::geometry geom UNION ALL
    SELECT 3 AS gid, 'SRID=0;POLYGON((0 0, 5 0, 5 -1, 1 -1, 1 -4, 0 -4, 0 0))'::geometry geom UNION ALL
    SELECT 4 AS gid, 'SRID=0;MULTIPOINT(0 0, 4 4, 4 -4)'::geometry
)
SELECT
    t1.rid, t2.gid, t3.gid, ST_DumpValues(ST_SetValues(rast, 1, ARRAY[ROW(t2.geom, t2.gid), ROW(t3.geom, t3.gid)]::geomval[]))
FROM foo t1
CROSS JOIN bar t2
CROSS JOIN bar t3
WHERE t2.gid = 2
    AND t3.gid = 1
ORDER BY t1.rid, t2.gid, t3.gid;

 rid | gid | gid |                                                    st_dumpvalues
-----+-----+-----+---------------------------------------------------------------------------------------------------------------------
   1 |   2 |   1 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,2,2,2,NULL},{NULL,2,1,2,NULL},{NULL,2,2,2,NULL},{NULL,NULL,NULL,NULL,NULL}}")
(1 row)
                </pre></div><div class="refsection" id="idm30682"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>, <a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> </p></div></div><div class="refentry" id="RT_ST_DumpValues"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DumpValues — 获取指定 band（波段） 的值作为二维数组。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_DumpValues</strong>(</code> raster  <var class="pdparam">rast</var> ,  integer[]  <var class="pdparam">nband=NULL</var> ,  boolean  <var class="pdparam">exclude_nodata_value=true</var> <code>)</code>;</p><p><code class="funcdef">double precision[][] <strong class="fsfunc">ST_DumpValues</strong>(</code> raster  <var class="pdparam">rast</var> ,  integer  <var class="pdparam">nband</var> ,  boolean  <var class="pdparam">exclude_nodata_value=true</var> <code>)</code>;</p></div></div><div class="refsection" id="idm30718"><h2>描述</h2><p>获取指定 band 的值作为二维数组（第一个索引是行，第二个索引是列）。 如果 <code class="varname">nband</code> 为 NULL 或未提供，则处理所有栅格波段。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm30723"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI'::text, 1, 0), 2, '32BF'::text, 3, -9999), 3, '16BSI', 0, 0) AS rast
)
SELECT
    (ST_DumpValues(rast)).*
FROM foo;

 nband |                       valarray
-------+------------------------------------------------------
     1 | {{1,1,1},{1,1,1},{1,1,1}}
     2 | {{3,3,3},{3,3,3},{3,3,3}}
     3 | {{NULL,NULL,NULL},{NULL,NULL,NULL},{NULL,NULL,NULL}}
(3 rows)
                </pre><pre class="programlisting">WITH foo AS (
    SELECT ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI'::text, 1, 0), 2, '32BF'::text, 3, -9999), 3, '16BSI', 0, 0) AS rast
)
SELECT
    (ST_DumpValues(rast, ARRAY[3, 1])).*
FROM foo;

 nband |                       valarray
-------+------------------------------------------------------
     3 | {{NULL,NULL,NULL},{NULL,NULL,NULL},{NULL,NULL,NULL}}
     1 | {{1,1,1},{1,1,1},{1,1,1}}
(2 rows)
                </pre><pre class="programlisting">WITH foo AS (
    SELECT ST_SetValue(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 1, 2, 5) AS rast
)
SELECT
    (ST_DumpValues(rast, 1))[2][1]
FROM foo;

 st_dumpvalues
---------------
             5
(1 row)
                </pre></div><div class="refsection" id="idm30728"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>, <a class="xref" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a> </p></div></div><div class="refentry" id="RT_ST_PixelOfValue"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_PixelOfValue — 获取值等于搜索值的像素的列x、行y坐标。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelOfValue</strong>(</code> raster  <var class="pdparam">rast</var> ,  integer  <var class="pdparam">nband</var> ,  double precision[]  <var class="pdparam">search</var> ,  boolean  <var class="pdparam">exclude_nodata_value=true</var> <code>)</code>;</p><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelOfValue</strong>(</code> raster  <var class="pdparam">rast</var> ,  double precision[]  <var class="pdparam">search</var> ,  boolean  <var class="pdparam">exclude_nodata_value=true</var> <code>)</code>;</p><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelOfValue</strong>(</code> raster  <var class="pdparam">rast</var> ,  integer  <var class="pdparam">nband</var> ,  double precision  <var class="pdparam">search</var> ,  boolean  <var class="pdparam">exclude_nodata_value=true</var> <code>)</code>;</p><p><code class="funcdef">setof record <strong class="fsfunc">ST_PixelOfValue</strong>(</code> raster  <var class="pdparam">rast</var> ,  double precision  <var class="pdparam">search</var> ,  boolean  <var class="pdparam">exclude_nodata_value=true</var> <code>)</code>;</p></div></div><div class="refsection" id="idm30794"><h2>描述</h2><p>获取值等于搜索值的像素的列x、行y坐标。 如果未指定波段，则假定为波段 1。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm30798"><h2>示例</h2><pre class="programlisting">SELECT
    (pixels).*
FROM (
    SELECT
        ST_PixelOfValue(
            ST_SetValue(
                ST_SetValue(
                    ST_SetValue(
                        ST_SetValue(
                            ST_SetValue(
                                ST_AddBand(
                                    ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
                                    '8BUI'::text, 1, 0
                                ),
                                1, 1, 0
                            ),
                            2, 3, 0
                        ),
                        3, 5, 0
                    ),
                    4, 2, 0
                ),
                5, 4, 255
            )
        , 1, ARRAY[1, 255]) AS pixels
) AS foo

 val | x | y
-----+---+---
   1 | 1 | 2
   1 | 1 | 3
   1 | 1 | 4
   1 | 1 | 5
   1 | 2 | 1
   1 | 2 | 2
   1 | 2 | 4
   1 | 2 | 5
   1 | 3 | 1
   1 | 3 | 2
   1 | 3 | 3
   1 | 3 | 4
   1 | 4 | 1
   1 | 4 | 3
   1 | 4 | 4
   1 | 4 | 5
   1 | 5 | 1
   1 | 5 | 2
   1 | 5 | 3
 255 | 5 | 4
   1 | 5 | 5
                </pre></div></div></section><section class="section" id="Raster_Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.7. 栅格编辑器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_SetGeoReference">ST_SetGeoReference</a></span><span class="refpurpose"> — 在一次调用中设置 Georeference 6 地理配准参数。 数字应该用空格分隔。 接受 GDAL 或 ESRI 格式的输入。 默认为 GDAL。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetRotation">ST_SetRotation</a></span><span class="refpurpose"> — 以弧度设置栅格的旋转。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetScale">ST_SetScale</a></span><span class="refpurpose"> — 以坐标参考系为单位设置像素的 X 和 Y 大小。 数字单位/像素宽度/高度。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetSkew">ST_SetSkew</a></span><span class="refpurpose"> — 设置地理参考 X 和 Y 倾斜（或旋转参数）。 如果只传入一个，则将X和Y设置为相同的值。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetSRID">ST_SetSRID</a></span><span class="refpurpose"> — 将栅格的 SRID 设置为在 Spatial_ref_sys 表中定义的特定整数 srid。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetUpperLeft">ST_SetUpperLeft</a></span><span class="refpurpose"> — 将栅格左上角的值设置为投影的X和Y坐标。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Resample">ST_Resample</a></span><span class="refpurpose"> — 重采样一个栅格图像，可以指定重新采样算法、新的尺寸、任意的栅格角点，以及一组栅格地理参考属性，这些属性可以自己定义，也可以从另一个栅格图像中借用。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Rescale">ST_Rescale</a></span><span class="refpurpose"> — 通过仅调整栅格的比例（或像素大小）来重新采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline、 Lanczos、Max或Min重采样算法计算的。 默认为NearestNeighbor。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Reskew">ST_Reskew</a></span><span class="refpurpose"> — 通过仅调整栅格的倾斜（或旋转参数）来重采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_SnapToGrid">ST_SnapToGrid</a></span><span class="refpurpose"> — 通过将栅格捕捉到网格来重采样栅格。 新的像素值是使用NearestNeighbor（英语或美式拼写）、Bilinear, Cubic, CubicSpline 或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Resize">ST_Resize</a></span><span class="refpurpose"> — 将栅格大小调整为新的宽度/高度</span></li><li><span class="refentrytitle"><a href="#RT_ST_Transform">ST_Transform</a></span><span class="refpurpose"> — 使用指定的重采样算法将已知空间参考系统中的栅格重新投影到另一个已知空间参考系统。 选项有 NearestNeighbor、Bilinear、Cubic、CubicSpline、Lanczos（默认为 NearestNeighbor）。</span></li></ul></div><div class="refentry" id="RT_ST_SetGeoReference"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetGeoReference — 在一次调用中设置 Georeference 6 地理配准参数。 数字应该用空格分隔。 接受 GDAL 或 ESRI 格式的输入。 默认为 GDAL。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetGeoReference</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">georefcoords</var>, text  <var class="pdparam">format=GDAL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetGeoReference</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">upperleftx</var>, double precision  <var class="pdparam">upperlefty</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">skewx</var>, double precision  <var class="pdparam">skewy</var><code>)</code>;</p></div></div><div class="refsection" id="idm30845"><h2>描述</h2><p>在一次调用中设置 Georeference 6 地理配准参数。 接受“GDAL”或“ESRI”格式的输入。 默认为 GDAL。 如果未提供 6 个坐标，则返回 null。</p><p>格式表示的区别如下：</p><p><code class="varname">GDAL</code>: </p><pre class="programlisting">scalex skewy skewx scaley upperleftx upperlefty</pre><p><code class="varname">ESRI</code>: </p><pre class="programlisting">scalex skewy skewx scaley upperleftx + scalex*0.5 upperlefty + scaley*0.5</pre><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果栅格具有数据库外波段，则更改地理参考可能会导致无法正确访问该波段的外部存储数据。 </p></td></tr></table></div><p class="enhanced">增强：2.1.0 添加 ST_SetGeoReference(raster, double precision, ...) 变体</p></div><div class="refsection" id="idm30858"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0) AS rast
)
SELECT
    0 AS rid, (ST_Metadata(rast)).*
FROM foo
UNION ALL
SELECT
    1, (ST_Metadata(ST_SetGeoReference(rast, '10 0 0 -10 0.1 0.1', 'GDAL'))).*
FROM foo
UNION ALL
SELECT
    2, (ST_Metadata(ST_SetGeoReference(rast, '10 0 0 -10 5.1 -4.9', 'ESRI'))).*
FROM foo
UNION ALL
SELECT
    3, (ST_Metadata(ST_SetGeoReference(rast, 1, 1, 10, -10, 0.001, 0.001))).*
FROM foo

 rid |     upperleftx     |     upperlefty     | width | height | scalex | scaley | skewx | skewy | srid | numbands
-----+--------------------+--------------------+-------+--------+--------+--------+-------+-------+------+----------
   0 |                  0 |                  0 |     5 |      5 |      1 |     -1 |     0 |     0 |    0 |        0
   1 |                0.1 |                0.1 |     5 |      5 |     10 |    -10 |     0 |     0 |    0 |        0
   2 | 0.0999999999999996 | 0.0999999999999996 |     5 |      5 |     10 |    -10 |     0 |     0 |    0 |        0
   3 |                  1 |                  1 |     5 |      5 |     10 |    -10 | 0.001 | 0.001 |    0 |        0
                </pre></div><div class="refsection" id="idm30861"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a></p></div></div><div class="refentry" id="RT_ST_SetRotation"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetRotation — 以弧度设置栅格的旋转。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetRotation</strong>(</code>raster <var class="pdparam">rast</var>, float8 <var class="pdparam">rotation</var><code>)</code>;</p></div></div><div class="refsection" id="idm30884"><h2>描述</h2><p>均匀旋转栅格。 旋转以弧度为单位。 有关更多详细信息，请参阅<a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a>。</p></div><div class="refsection" id="idm30888"><h2>示例</h2><pre class="programlisting">SELECT
  ST_ScaleX(rast1), ST_ScaleY(rast1), ST_SkewX(rast1), ST_SkewY(rast1),
  ST_ScaleX(rast2), ST_ScaleY(rast2), ST_SkewX(rast2), ST_SkewY(rast2)
FROM (
  SELECT ST_SetRotation(rast, 15) AS rast1, rast as rast2 FROM dummy_rast
) AS foo;
      st_scalex      |      st_scaley      |      st_skewx      |      st_skewy      | st_scalex | st_scaley | st_skewx | st_skewy
---------------------+---------------------+--------------------+--------------------+-----------+-----------+----------+----------
   -1.51937582571764 |   -2.27906373857646 |   1.95086352047135 |   1.30057568031423 |         2 |         3 |        0 |        0
 -0.0379843956429411 | -0.0379843956429411 | 0.0325143920078558 | 0.0325143920078558 |      0.05 |     -0.05 |        0 |        0
                </pre></div><div class="refsection" id="idm30891"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Rotation" title="ST_Rotation">ST_Rotation</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" id="RT_ST_SetScale"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetScale — 以坐标参考系为单位设置像素的 X 和 Y 大小。 数字单位/像素宽度/高度。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetScale</strong>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">xy</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetScale</strong>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">x</var>, float8  <var class="pdparam">y</var><code>)</code>;</p></div></div><div class="refsection" id="idm30926"><h2>描述</h2><p>以坐标参考系为单位设置像素的 X 和 Y 大小。 数字单位/像素宽度/高度。 如果只传入一个单位，则假设 X 和 Y 是相同的数字。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_SetScale 与<a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> 的不同之处在于 ST_SetScale 不会对栅格重新采样以匹配栅格范围。 它仅更改栅格的元数据（或地理参考）以纠正最初错误指定的缩放比例。 ST_Rescale 会生成具有不同宽度和高度的栅格，计算结果以适合输入栅格的地理范围。 ST_SetScale 不修改栅格的宽度或高度。</p></td></tr></table></div><p class="changed">更改：2.0.0 在 WKTRaster 版本中，这称为 ST_SetPixelSize。 这在 2.0.0 中发生了变化。</p></div><div class="refsection" id="idm30933"><h2>示例</h2><pre class="programlisting">UPDATE dummy_rast
    SET rast = ST_SetScale(rast, 1.5)
WHERE rid = 2;

SELECT ST_ScaleX(rast) As pixx, ST_ScaleY(rast) As pixy, Box3D(rast) As newbox
FROM dummy_rast
WHERE rid = 2;

 pixx | pixy |                    newbox
------+------+----------------------------------------------
  1.5 |  1.5 | BOX(3427927.75 5793244 0, 3427935.25 5793251.5 0)
                </pre><pre class="programlisting">UPDATE dummy_rast
    SET rast = ST_SetScale(rast, 1.5, 0.55)
WHERE rid = 2;

SELECT ST_ScaleX(rast) As pixx, ST_ScaleY(rast) As pixy, Box3D(rast) As newbox
FROM dummy_rast
WHERE rid = 2;

 pixx | pixy |                   newbox
------+------+--------------------------------------------
  1.5 | 0.55 | BOX(3427927.75 5793244 0,3427935.25 5793247 0)
                </pre></div><div class="refsection" id="idm30937"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" id="RT_ST_SetSkew"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetSkew — 设置地理参考 X 和 Y 倾斜（或旋转参数）。 如果只传入一个，则将X和Y设置为相同的值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetSkew</strong>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">skewxy</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetSkew</strong>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">skewx</var>, float8  <var class="pdparam">skewy</var><code>)</code>;</p></div></div><div class="refsection" id="idm30970"><h2>描述</h2><p>设置地理参考 X 和 Y 倾斜（或旋转参数）。 如果只传入一个，则将X和Y设置为相同的值。 有关更多详细信息，请参阅<a class="link" href="http://en.wikipedia.org/wiki/World_file" target="_top">世界文件</a>。</p></div><div class="refsection" id="idm30974"><h2>示例</h2><pre class="programlisting">-- Example 1
UPDATE dummy_rast SET rast = ST_SetSkew(rast,1,2) WHERE rid = 1;
SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast WHERE rid = 1;

rid | skewx | skewy |    georef
----+-------+-------+--------------
  1 |     1 |     2 | 2.0000000000
                    : 2.0000000000
                    : 1.0000000000
                    : 3.0000000000
                    : 0.5000000000
                    : 0.5000000000

                </pre><pre class="programlisting">-- Example 2 set both to same number:
UPDATE dummy_rast SET rast = ST_SetSkew(rast,0) WHERE rid = 1;
SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast WHERE rid = 1;

 rid | skewx | skewy |    georef
-----+-------+-------+--------------
   1 |     0 |     0 | 2.0000000000
                     : 0.0000000000
                     : 0.0000000000
                     : 3.0000000000
                     : 0.5000000000
                     : 0.5000000000
                </pre></div><div class="refsection" id="idm30978"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" id="RT_ST_SetSRID"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetSRID — 将栅格的 SRID 设置为在 Spatial_ref_sys 表中定义的特定整数 srid。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetSRID</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" id="idm31000"><h2>描述</h2><p>将栅格上的 SRID 设置为特定整数值。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数不会以任何方式转换栅格 - 它只是设置定义其当前所在坐标参考系统的空间参考的元数据。对于以后的转换很有用。 </p></td></tr></table></div></div><div class="refsection" id="idm31005"><h2>相关信息</h2><p><a class="xref" href="#spatial_ref_sys" title="4.5. 空间参考系统">Section 4.5, “空间参考系统”</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="RT_ST_SetUpperLeft"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetUpperLeft — 将栅格左上角的值设置为投影的X和Y坐标。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetUpperLeft</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">x</var>, double precision  <var class="pdparam">y</var><code>)</code>;</p></div></div><div class="refsection" id="idm31028"><h2>描述</h2><p>将栅格像素左上角的值设置为投影的 X 和 Y 坐标</p></div><div class="refsection" id="idm31031"><h2>示例</h2><pre class="programlisting">SELECT ST_SetUpperLeft(rast,-71.01,42.37)
FROM dummy_rast
WHERE rid = 2;
                    </pre></div><div class="refsection" id="idm31034"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a></p></div></div><div class="refentry" id="RT_ST_Resample"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Resample — 重采样一个栅格图像，可以指定重新采样算法、新的尺寸、任意的栅格角点，以及一组栅格地理参考属性，这些属性可以自己定义，也可以从另一个栅格图像中借用。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Resample</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Resample</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">scalex=0</var>, double precision  <var class="pdparam">scaley=0</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Resample</strong>(</code>raster  <var class="pdparam">rast</var>, raster  <var class="pdparam">ref</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var>, boolean  <var class="pdparam">usescale=true</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Resample</strong>(</code>raster  <var class="pdparam">rast</var>, raster  <var class="pdparam">ref</var>, boolean  <var class="pdparam">usescale</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" id="idm31141"><h2>描述</h2><p>使用指定的重新采样算法、新的尺寸（width&amp;height）、一个网格角点（gridx &amp; gridy），以及一组栅格地理参考属性（scalex、scaley、skewx &amp; skewy），这些属性可以自己定义，也可以从另一个栅格图像中借用。如果使用参考栅格图像，那么这两个栅格图像必须具有相同的空间参考ID（SRID）。 </p><p>使用以下重采样算法之一计算新像素值：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>NearestNeighbor (英语或美式拼写)</p></li><li class="listitem" style="list-style-type: disc"><p>Bilinear</p></li><li class="listitem" style="list-style-type: disc"><p>Cubic</p></li><li class="listitem" style="list-style-type: disc"><p>CubicSpline</p></li><li class="listitem" style="list-style-type: disc"><p>Lanczos</p></li><li class="listitem" style="list-style-type: disc"><p>Max</p></li><li class="listitem" style="list-style-type: disc"><p>Min</p></li></ul></div><p>默认值是“NearestNeighbor”，它速度最快，但插值效果最差。</p><p>如果未指定<code class="varname"> maxerr</code>，则使用 0.125 的 maxerror 百分比。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。 </p></td></tr></table></div><p class="availability">可用性：2.0.0 需要 GDAL 1.6.1+</p><p class="enhanced">增强：3.4.0 添加了最大和最小重采样选项</p></div><div class="refsection" id="idm31169"><h2>示例</h2><pre class="programlisting">SELECT
    ST_Width(orig) AS orig_width,
    ST_Width(reduce_100) AS new_width
FROM (
    SELECT
        rast AS orig,
        ST_Resample(rast,100,100) AS reduce_100
    FROM aerials.boston
    WHERE ST_Intersects(rast,
        ST_Transform(
            ST_MakeEnvelope(-71.128, 42.2392,-71.1277, 42.2397, 4326),26986)
    )
    LIMIT 1
) AS foo;

 orig_width | new_width
------------+-------------
        200 |         100
                </pre></div><div class="refsection" id="idm31172"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>, <a class="xref" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a>, <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> </p></div></div><div class="refentry" id="RT_ST_Rescale"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Rescale — 通过仅调整栅格的比例（或像素大小）来重新采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline、 Lanczos、Max或Min重采样算法计算的。 默认为NearestNeighbor。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Rescale</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">scalexy</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Rescale</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" id="idm31217"><h2>描述</h2><p>通过仅调整栅格的比例（或像素大小）来重新采样栅格。 使用以下重采样算法之一计算新像素值：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>NearestNeighbor (英语或美式拼写)</p></li><li class="listitem" style="list-style-type: disc"><p>Bilinear</p></li><li class="listitem" style="list-style-type: disc"><p>Cubic</p></li><li class="listitem" style="list-style-type: disc"><p>CubicSpline</p></li><li class="listitem" style="list-style-type: disc"><p>Lanczos</p></li><li class="listitem" style="list-style-type: disc"><p>Max</p></li><li class="listitem" style="list-style-type: disc"><p>Min</p></li></ul></div><p>默认值是“NearestNeighbor”，它速度最快，但插值效果最差。</p><p><code class="varname">scalex </code>和<code class="varname">scaley </code>定义新的像素大小。 为了获得良好定向的栅格，scaley 通常必须为负值。</p><p>当新的scalex或scaley不是栅格宽度或高度的约数时，生成的栅格的范围将扩展以包含所提供栅格的范围。 如果您想确保保留精确的输入范围，请参阅 <a class="xref" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a></p><p><code class="varname">maxerr </code>是重采样算法进行变换近似的阈值（以像素为单位）。 如果未指定 <code class="varname">maxerr</code>，则使用默认值 0.125，该值与 GDAL gdalwarp 实用程序中使用的值相同。 如果设置为零，则不会发生近似。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Rescale 与<a class="xref" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a>的不同之处在于 ST_SetScale 不会对栅格重新采样以匹配栅格范围。 ST_SetScale 仅更改栅格的元数据（或地理参考）以纠正最初错误指定的缩放比例。 ST_Rescale 会生成具有不同宽度和高度的栅格，计算结果以适合输入栅格的地理范围。 ST_SetScale 不修改栅格的宽度或高度。</p></td></tr></table></div><p class="availability">可用性：2.0.0 需要 GDAL 1.6.1+</p><p class="enhanced">增强：3.4.0 添加了最大和最小重采样选项</p><p class="changed">更改：2.1.0 适用于没有 SRID 的栅格</p></div><div class="refsection" id="idm31254"><h2>示例</h2><p>将栅格从 0.001 度的像素大小重新缩放为 0.0015 度的像素大小的简单示例。</p><pre class="programlisting">-- the original raster pixel size
SELECT ST_PixelWidth(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0)) width

   width
----------
0.001

-- the rescaled raster raster pixel size
SELECT ST_PixelWidth(ST_Rescale(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0), 0.0015)) width

   width
----------
0.0015
</pre></div><div class="refsection" id="idm31258"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a>, <a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>, <a class="xref" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> </p></div></div><div class="refentry" id="RT_ST_Reskew"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Reskew — 通过仅调整栅格的倾斜（或旋转参数）来重采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Reskew</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">skewxy</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Reskew</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">skewx</var>, double precision  <var class="pdparam">skewy</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" id="idm31306"><h2>描述</h2><p>通过仅调整栅格的倾斜（或旋转参数）来重采样栅格。 新的像素值是使用NearestNeighbor （英语或美式拼写）、Bilinear, Cubic, CubicSpline或 Lanczos 重采样算法计算的。 默认值是“NearestNeighbor”，它速度最快，但插值效果最差。</p><p><code class="varname">skewx</code> 和<code class="varname"> skewy </code>定义新的倾斜。</p><p>新栅格的范围将包含所提供栅格的范围。</p><p>如果未指定<code class="varname"> maxerr</code>，则 maxerror 百分比为 0.125。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Reskew 与 <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a> 的不同之处在于 ST_SetSkew 不会对栅格重新采样以匹配栅格范围。 ST_SetSkew 仅更改栅格的元数据（或地理参考）以纠正最初错误指定的倾斜。 ST_Reskew 会生成具有不同宽度和高度的栅格，计算结果以适合输入栅格的地理范围。 ST_SetSkew 不修改栅格的宽度或高度。</p></td></tr></table></div><p class="availability">可用性：2.0.0 需要 GDAL 1.6.1+</p><p class="changed">更改：2.1.0 适用于没有 SRID 的栅格</p></div><div class="refsection" id="idm31323"><h2>示例</h2><p>将栅格从倾斜 0.0 重新倾斜到倾斜 0.0015 的简单示例。</p><pre class="programlisting">-- the original raster non-rotated
SELECT ST_Rotation(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0));

-- result
0

-- the reskewed raster raster rotation
SELECT ST_Rotation(ST_Reskew(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0), 0.0015));

-- result
-0.982793723247329</pre></div><div class="refsection" id="idm31327"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>, <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>, <a class="xref" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a>, <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" id="RT_ST_SnapToGrid"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SnapToGrid — 通过将栅格捕捉到网格来重采样栅格。 新的像素值是使用NearestNeighbor（英语或美式拼写）、Bilinear, Cubic, CubicSpline 或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SnapToGrid</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var>, double precision  <var class="pdparam">scalex=DEFAULT 0</var>, double precision  <var class="pdparam">scaley=DEFAULT 0</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SnapToGrid</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SnapToGrid</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, double precision  <var class="pdparam">scalexy</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" id="idm31412"><h2>描述</h2><p>通过将栅格图像重新采样，将其对齐到由任意像素角点（gridx &amp; gridy）定义的网格，可选地使用像素大小（scalex &amp; scaley）。新的像素值是使用最近邻（NearestNeighbor，英式或美式拼写）、双线性（Bilinear）、三次样条（Cubic）、立方样条（CubicSpline）或兰索斯（Lanczos）重新采样算法计算的。默认情况下使用最近邻（NearestNeighbor），这是最快但插值效果最差的算法。</p><p><code class="varname">gridx </code>和 <code class="varname">gridy </code>定义新网格的任意像素角。 这不一定是新栅格的左上角，也不必位于新栅格范围的内部或边缘。</p><p>您可以选择使用<code class="varname">scalex</code>和<code class="varname">scaley</code>定义新网格的像素大小。</p><p>新栅格的范围将包含所提供栅格的范围。</p><p>如果未指定<code class="varname"> maxerr</code>，则 maxerror 百分比为 0.125。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您需要对网格参数进行更多控制，请使用 <a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>。</p></td></tr></table></div><p class="availability">可用性：2.0.0 需要 GDAL 1.6.1+</p><p class="changed">更改：2.1.0 适用于没有 SRID 的栅格</p></div><div class="refsection" id="idm31432"><h2>示例</h2><p>将栅格捕捉到稍微不同的网格的简单示例。</p><pre class="programlisting">-- the original raster upper left X
SELECT ST_UpperLeftX(ST_AddBand(ST_MakeEmptyRaster(10, 10, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0));
-- result
0

-- the upper left of raster after snapping
SELECT ST_UpperLeftX(ST_SnapToGrid(ST_AddBand(ST_MakeEmptyRaster(10, 10, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0), 0.0002, 0.0002));

--result
-0.0008</pre></div><div class="refsection" id="idm31436"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>, <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>, <a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a></p></div></div><div class="refentry" id="RT_ST_Resize"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Resize — 将栅格大小调整为新的宽度/高度</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Resize</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Resize</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">percentwidth</var>, double precision  <var class="pdparam">percentheight</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Resize</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">width</var>, text  <var class="pdparam">height</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" id="idm31503"><h2>描述</h2><p>将栅格大小调整为新的宽度/高度。 新的宽度/高度可以以精确的像素数或栅格宽度/高度的百分比来指定。 新栅格的范围将与提供的栅格的范围相同。 </p><p>新的像素值是使用NearestNeighbor（英语或美式拼写）、Bilinear, Cubic, CubicSpline或 Lanczos 重采样算法计算的。 默认值是“NearestNeighbor”，它速度最快，但插值效果最差。 </p><p>变体 1 期望输出栅格的实际宽度/高度。 </p><p>变体 2 期望零 (0) 和一 (1) 之间的十进制值，表示输入栅格宽度/高度的百分比。 </p><p>变体3可以接受输出栅格图像的实际宽度/高度，也可以接受文本百分比（例如 "20%"），表示输入栅格图像宽度/高度的百分比。 </p><p class="availability">可用性：2.1.0 需要 GDAL 1.6.1+</p></div><div class="refsection" id="idm31511"><h2>示例</h2><pre class="programlisting">WITH foo AS(
SELECT
    1 AS rid,
    ST_Resize(
        ST_AddBand(
            ST_MakeEmptyRaster(1000, 1000, 0, 0, 1, -1, 0, 0, 0)
            , 1, '8BUI', 255, 0
        )
    , '50%', '500') AS rast
UNION ALL
SELECT
    2 AS rid,
    ST_Resize(
        ST_AddBand(
            ST_MakeEmptyRaster(1000, 1000, 0, 0, 1, -1, 0, 0, 0)
            , 1, '8BUI', 255, 0
        )
    , 500, 100) AS rast
UNION ALL
SELECT
    3 AS rid,
    ST_Resize(
        ST_AddBand(
            ST_MakeEmptyRaster(1000, 1000, 0, 0, 1, -1, 0, 0, 0)
            , 1, '8BUI', 255, 0
        )
    , 0.25, 0.9) AS rast
), bar AS (
    SELECT rid, ST_Metadata(rast) AS meta, rast FROM foo
)
SELECT rid, (meta).* FROM bar

 rid | upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
-----+------------+------------+-------+--------+--------+--------+-------+-------+------+----------
   1 |          0 |          0 |   500 |    500 |      1 |     -1 |     0 |     0 |    0 |        1
   2 |          0 |          0 |   500 |    100 |      1 |     -1 |     0 |     0 |    0 |        1
   3 |          0 |          0 |   250 |    900 |      1 |     -1 |     0 |     0 |    0 |        1
(3 rows)
                </pre></div><div class="refsection" id="idm31514"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>, <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>, <a class="xref" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a>, <a class="xref" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> </p></div></div><div class="refentry" id="RT_ST_Transform"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Transform — 使用指定的重采样算法将已知空间参考系统中的栅格重新投影到另一个已知空间参考系统。 选项有 NearestNeighbor、Bilinear、Cubic、CubicSpline、Lanczos（默认为 NearestNeighbor）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Transform</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">srid</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Transform</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">srid</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Transform</strong>(</code>raster  <var class="pdparam">rast</var>, raster  <var class="pdparam">alignto</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" id="idm31584"><h2>描述</h2><p>使用指定的像素扭曲算法将已知空间参考系统中的栅格重新投影到另一个已知空间参考系统。 如果未指定算法，则使用“NearestNeighbor”；如果未指定 maxerr，则使用 0.125 的 maxerror 百分比。</p><p>算法选项有：“NearestNeighbor”、“Bilinear”、“Cubic”、“CubicSpline”和“Lanczos”。 有关更多详细信息，请参阅：<a class="link" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp 重采样方法</a>。</p><p>ST_Transform 经常与 ST_SetSRID() 混淆。 ST_Transform 实际上将栅格的坐标从一种空间参考系统更改为另一种空间参考系统（并对像素值进行重新采样），而 ST_SetSRID() 只是更改栅格的 SRID 标识符。 </p><p>与其他变体不同，变体 3 需要参考栅格作为<code class="varname">alignto</code>。 转换后的栅格将转换为参考栅格的空间参考系统 (SRID)，并与参考栅格对齐 (ST_SameAlignment = TRUE)。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您发现转换支持无法正常工作，您可能需要将环境变量 PROJSO 设置为 PostGIS 正在使用的 .so 或 .dll 投影库。 只需要文件名即可。 例如，在 Windows 上，您可以在控制面板 -&gt; 系统 -&gt; 环境变量中添加一个名为 <code class="varname">PROJSO</code> 的系统变量并将其设置为 <code class="varname">libproj.dll</code>（如果您使用的是 proj 4.6.1）。 进行此更改后，您必须重新启动 PostgreSQL 服务/守护程序。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在转换图块覆盖范围时，您几乎总是希望使用参考栅格来确保图块中的对齐方式相同并且没有间隙，如示例所示：变体 3。 </p></td></tr></table></div><p class="availability">可用性：2.0.0 需要 GDAL 1.6.1+</p><p class="enhanced">增强：2.1.0 添加 ST_Transform(rast,alignto) 变体</p></div><div class="refsection" id="idm31600"><h2>示例</h2><pre class="programlisting">SELECT ST_Width(mass_stm) As w_before, ST_Width(wgs_84) As w_after,
  ST_Height(mass_stm) As h_before, ST_Height(wgs_84) As h_after
    FROM
    ( SELECT rast As mass_stm, ST_Transform(rast,4326) As wgs_84
  ,  ST_Transform(rast,4326, 'Bilinear') AS wgs_84_bilin
        FROM aerials.o_2_boston
            WHERE ST_Intersects(rast,
                ST_Transform(ST_MakeEnvelope(-71.128, 42.2392,-71.1277, 42.2397, 4326),26986) )
        LIMIT 1) As foo;

 w_before | w_after | h_before | h_after
----------+---------+----------+---------
      200 |     228 |      200 |     170
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform01.png"/><div class="caption"><p>原始的马萨诸塞州平面米（mass_stm）</p></div></div></div>
         </td><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform02.png"/><div class="caption"><p>转换为 wgs 84 经纬度 (wgs_84) 后</p></div></div></div>
         </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform03.png"/><div class="caption"><p>使用双线性算法而不是 NN 默认值 (wgs_84_bilin) 转换为 wgs 84 经纬度后</p></div></div></div>
         </td></tr></tbody></table></div></div><div class="refsection" id="idm31631"><h2>示例：变体3</h2><p>下面展示了使用 ST_Transform(raster, srid) 和 ST_Transform(raster,alignto) 之间的区别</p><pre class="programlisting">WITH foo AS (
    SELECT 0 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, -500000, 600000, 100, -100, 0, 0, 2163), 1, '16BUI', 1, 0) AS rast UNION ALL
    SELECT 1, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499800, 600000, 100, -100, 0, 0, 2163), 1, '16BUI', 2, 0) AS rast UNION ALL
    SELECT 2, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499600, 600000, 100, -100, 0, 0, 2163), 1, '16BUI', 3, 0) AS rast UNION ALL

    SELECT 3, ST_AddBand(ST_MakeEmptyRaster(2, 2, -500000, 599800, 100, -100, 0, 0, 2163), 1, '16BUI', 10, 0) AS rast UNION ALL
    SELECT 4, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499800, 599800, 100, -100, 0, 0, 2163), 1, '16BUI', 20, 0) AS rast UNION ALL
    SELECT 5, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499600, 599800, 100, -100, 0, 0, 2163), 1, '16BUI', 30, 0) AS rast UNION ALL

    SELECT 6, ST_AddBand(ST_MakeEmptyRaster(2, 2, -500000, 599600, 100, -100, 0, 0, 2163), 1, '16BUI', 100, 0) AS rast UNION ALL
    SELECT 7, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499800, 599600, 100, -100, 0, 0, 2163), 1, '16BUI', 200, 0) AS rast UNION ALL
    SELECT 8, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499600, 599600, 100, -100, 0, 0, 2163), 1, '16BUI', 300, 0) AS rast
), bar AS (
    SELECT
        ST_Transform(rast, 4269) AS alignto
    FROM foo
    LIMIT 1
), baz AS (
    SELECT
        rid,
        rast,
        ST_Transform(rast, 4269) AS not_aligned,
        ST_Transform(rast, alignto) AS aligned
    FROM foo
    CROSS JOIN bar
)
SELECT
    ST_SameAlignment(rast) AS rast,
    ST_SameAlignment(not_aligned) AS not_aligned,
    ST_SameAlignment(aligned) AS aligned
FROM baz

 rast | not_aligned | aligned
------+-------------+---------
 t    | f           | t
                </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform04.png"/><div class="caption"><p>未对齐</p></div></div></div><p>
                          </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform05.png"/><div class="caption"><p>对齐</p></div></div></div><p>
                        </p></td></tr></tbody></table></div></div><div class="refsection" id="idm31655"><h2>相关信息</h2><p><a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#RT_ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a></p></div></div></section><section class="section" id="RasterBand_Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.8. 栅格波段编辑器</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_SetBandNoDataValue">ST_SetBandNoDataValue</a></span><span class="refpurpose"> — 设置代表无数据的给定波段的值。 如果未指定波段，则假定为波段 1。 要将波段标记为没有 nodata 值，请设置 nodata 值 = NULL。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetBandIsNoData">ST_SetBandIsNoData</a></span><span class="refpurpose"> — 将带区的 isnodata 标志设置为 TRUE。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetBandPath">ST_SetBandPath</a></span><span class="refpurpose"> — 更新out-db band的外部路径和band编号</span></li><li><span class="refentrytitle"><a href="#RT_ST_SetBandIndex">ST_SetBandIndex</a></span><span class="refpurpose"> — 更新out-db band的external band编号</span></li></ul></div><div class="refentry" id="RT_ST_SetBandNoDataValue"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetBandNoDataValue — 设置代表无数据的给定波段的值。 如果未指定波段，则假定为波段 1。 要将波段标记为没有 nodata 值，请设置 nodata 值 = NULL。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetBandNoDataValue</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">nodatavalue</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_SetBandNoDataValue</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, double precision  <var class="pdparam">nodatavalue</var>, boolean  <var class="pdparam">forcechecking=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm31692"><h2>描述</h2><p>设置表示该带没有数据的值。 如果未指定，则假定为波段 1。 这将影响<a class="xref" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a>、<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a> 和 ST_PixelAs...() 函数的结果。</p></div><div class="refsection" id="idm31697"><h2>示例</h2><pre class="programlisting">-- change just first band no data value
UPDATE dummy_rast
    SET rast = ST_SetBandNoDataValue(rast,1, 254)
WHERE rid = 2;

-- change no data band value of bands 1,2,3
UPDATE dummy_rast
    SET rast =
        ST_SetBandNoDataValue(
            ST_SetBandNoDataValue(
                ST_SetBandNoDataValue(
                    rast,1, 254)
                ,2,99),
                3,108)
        WHERE rid = 2;

-- wipe out the nodata value this will ensure all pixels are considered for all processing functions
UPDATE dummy_rast
    SET rast = ST_SetBandNoDataValue(rast,1, NULL)
WHERE rid = 2;
                    </pre></div><div class="refsection" id="idm31700"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" id="RT_ST_SetBandIsNoData"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetBandIsNoData — 将带区的 isnodata 标志设置为 TRUE。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetBandIsNoData</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm31720"><h2>描述</h2><p>将带的isnodata标志设置为true。如果未指定，将假定为第1带。只有在被认为是脏标志时才应调用此函数。也就是说，当调用 <a class="xref" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a> 作为最后一个参数使用 TRUE 和不使用 TRUE 时的结果不同时</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm31725"><h2>示例</h2><pre class="programlisting">-- Create dummy table with one raster column
create table dummy_rast (rid integer, rast raster);

-- Add raster with two bands, one pixel/band. In the first band, nodatavalue = pixel value = 3.
-- In the second band, nodatavalue = 13, pixel value = 4
insert into dummy_rast values(1,
(
'01' -- little endian (uint8 ndr)
||
'0000' -- version (uint16 0)
||
'0200' -- nBands (uint16 0)
||
'17263529ED684A3F' -- scaleX (float64 0.000805965234044584)
||
'F9253529ED684ABF' -- scaleY (float64 -0.00080596523404458)
||
'1C9F33CE69E352C0' -- ipX (float64 -75.5533328537098)
||
'718F0E9A27A44840' -- ipY (float64 49.2824585505576)
||
'ED50EB853EC32B3F' -- skewX (float64 0.000211812383858707)
||
'7550EB853EC32B3F' -- skewY (float64 0.000211812383858704)
||
'E6100000' -- SRID (int32 4326)
||
'0100' -- width (uint16 1)
||
'0100' -- height (uint16 1)
||
'4' -- hasnodatavalue set to true, isnodata value set to false (when it should be true)
||
'2' -- first band type (4BUI)
||
'03' -- novalue==3
||
'03' -- pixel(0,0)==3 (same that nodata)
||
'0' -- hasnodatavalue set to false
||
'5' -- second band type (16BSI)
||
'0D00' -- novalue==13
||
'0400' -- pixel(0,0)==4
)::raster
);

select st_bandisnodata(rast, 1) from dummy_rast where rid = 1; -- Expected false
select st_bandisnodata(rast, 1, TRUE) from dummy_rast where rid = 1; -- Expected true

-- The isnodata flag is dirty. We are going to set it to true
update dummy_rast set rast = st_setbandisnodata(rast, 1) where rid = 1;


select st_bandisnodata(rast, 1) from dummy_rast where rid = 1; -- Expected true

                    </pre></div><div class="refsection" id="idm31728"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>, <a class="xref" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a></p></div></div><div class="refentry" id="RT_ST_SetBandPath"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetBandPath — 更新out-db band的外部路径和band编号</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetBandPath</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, text  <var class="pdparam">outdbpath</var>, integer  <var class="pdparam">outdbindex</var>, boolean  <var class="pdparam">force=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm31759"><h2>描述</h2><p>更新 out-db band 的外部栅格文件路径和外部波段 编号。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname">force</code>设置为true，则不会进行任何测试来确保外部栅格文件和PostGIS栅格之间的兼容性（例如对齐、像素支持）。 此模式适用于外部栅格所在的文件系统更改。 </p></td></tr></table></div><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm31766"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT
        ST_AddBand(NULL::raster, '/home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif', NULL::int[]) AS rast
)
SELECT
    1 AS query,
    *
FROM ST_BandMetadata(
    (SELECT rast FROM foo),
    ARRAY[1,3,2]::int[]
)
UNION ALL
SELECT
    2,
    *
FROM ST_BandMetadata(
    (
        SELECT
            <span class="strong"><strong>ST_SetBandPath(
                rast,
                2,
                '/home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected2.tif',
                1
            )</strong></span> AS rast
        FROM foo
    ),
    ARRAY[1,3,2]::int[]
)
ORDER BY 1, 2;

 query | bandnum | pixeltype | nodatavalue | isoutdb |                                      path                                       | outdbbandnum
-------+---------+-----------+-------------+---------+---------------------------------------------------------------------------------+--------------
     1 |       1 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            1
     1 |       2 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            2
     1 |       3 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            3
     2 |       1 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            1
<span class="strong"><strong>     2 |       2 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected2.tif      |            1</strong></span>
     2 |       3 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            3
                </pre></div><div class="refsection" id="idm31771"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>, <a class="xref" href="#RT_ST_SetBandIndex" title="ST_SetBandIndex">ST_SetBandIndex</a> </p></div></div><div class="refentry" id="RT_ST_SetBandIndex"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SetBandIndex — 更新out-db band的external band编号</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_SetBandIndex</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, integer  <var class="pdparam">outdbindex</var>, boolean  <var class="pdparam">force=false</var><code>)</code>;</p></div></div><div class="refsection" id="idm31797"><h2>描述</h2><p>更新 out-db band 的外部 band 编号。 这不会触及与 out-db band 关联的外部栅格文件</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname">force</code>设置为true，则不会进行任何测试来确保外部栅格文件和PostGIS栅格之间的兼容性（例如对齐、像素支持）。 此模式适用于在外部栅格文件中移动波段的情况。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>在内部，此方法将索引<code class="varname">band</code>处的 PostGIS 栅格波段替换为新波段，而不是更新现有的路径信息。 </p></td></tr></table></div><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm31807"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT
        ST_AddBand(NULL::raster, '/home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif', NULL::int[]) AS rast
)
SELECT
    1 AS query,
    *
FROM ST_BandMetadata(
    (SELECT rast FROM foo),
    ARRAY[1,3,2]::int[]
)
UNION ALL
SELECT
    2,
    *
FROM ST_BandMetadata(
    (
        SELECT
            <span class="strong"><strong>ST_SetBandIndex(
                rast,
                2,
                1
            )</strong></span> AS rast
        FROM foo
    ),
    ARRAY[1,3,2]::int[]
)
ORDER BY 1, 2;

 query | bandnum | pixeltype | nodatavalue | isoutdb |                                      path                                       | outdbbandnum
-------+---------+-----------+-------------+---------+---------------------------------------------------------------------------------+--------------
     1 |       1 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            1
     1 |       2 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            2
     1 |       3 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            3
     2 |       1 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            1
<span class="strong"><strong>     2 |       2 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            1</strong></span>
     2 |       3 | 8BUI      |             | t       | /home/pele/devel/geo/postgis-git/raster/test/regress/loader/Projected.tif       |            3
                </pre></div><div class="refsection" id="idm31812"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>, <a class="xref" href="#RT_ST_SetBandPath" title="ST_SetBandPath">ST_SetBandPath</a> </p></div></div></section><section class="section" id="RasterBand_Stats"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.9. 栅格波段统计和分析</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_Count">ST_Count</a></span><span class="refpurpose"> — 返回栅格或栅格覆盖范围的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 nodata 值的像素。</span></li><li><span class="refentrytitle"><a href="#RT_ST_CountAgg">ST_CountAgg</a></span><span class="refpurpose"> — 总计的。 返回一组栅格的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 NODATA 值的像素。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Histogram">ST_Histogram</a></span><span class="refpurpose"> — 返回一组记录，总结了栅格或栅格覆盖数据分布，其中包括分离的分箱范围。如果未指定，将自动计算分箱数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Quantile">ST_Quantile</a></span><span class="refpurpose"> — 计算样本或总体上下文中栅格或栅格表覆盖范围的分位数。 因此，可以检查某个值是否位于栅格的 25%、50%、75% 百分位处。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SummaryStats">ST_SummaryStats</a></span><span class="refpurpose"> — 返回一组总结统计信息，包括给定栅格或栅格覆盖的栅格带的计数、总和、均值、标准差、最小值和最大值。如果未指定带号，则假定为带1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_SummaryStatsAgg">ST_SummaryStatsAgg</a></span><span class="refpurpose"> — 总计的。 返回一组栅格的给定栅格波段的摘要统计信息，其中包含计数、总和、平均值、标准差、最小值、最大值。 如果未指定带号，则假定为带1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_ValueCount">ST_ValueCount</a></span><span class="refpurpose"> — 返回一组记录，其中包含像素带值以及具有给定值集的栅格（或栅格覆盖范围）给定带中的像素数计数。 如果未指定波段，则默认为波段 1。默认情况下，不计算节点数据值像素。 输出像素中的所有其他值，并将像素带值四舍五入到最接近的整数。</span></li></ul></div><div class="refentry" id="RT_ST_Count"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Count — 返回栅格或栅格覆盖范围的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 nodata 值的像素。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bigint <strong class="fsfunc">ST_Count</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_Count</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" id="idm31846"><h2>描述</h2><p>返回栅格或栅格覆盖范围的给定波段中的像素数。 如果未指定 band，则<code class="varname"> nband </code>默认为 1。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname"> excex_nodata_value </code>设置为 true，则仅计算值不等于栅格<code class="varname"> nodata </code>值的像素。 将<code class="varname"> except_nodata_value</code> 设置为 false 以计算所有像素</p></td></tr></table></div><p class="changed">更改：3.1.0 - 删除了 ST_Count(rastertable, rastercolumn, ...) 变体。 请改用 <a class="xref" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a>。</p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm31858"><h2>示例</h2><pre class="programlisting">--example will count all pixels not 249 and one will count all pixels.  --
SELECT rid, ST_Count(ST_SetBandNoDataValue(rast,249)) As exclude_nodata,
        ST_Count(ST_SetBandNoDataValue(rast,249),false) As include_nodata
    FROM dummy_rast WHERE rid=2;

rid | exclude_nodata | include_nodata
-----+----------------+----------------
   2 |             23 |             25
                </pre></div><div class="refsection" id="idm31861"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a>, <a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> </p></div></div><div class="refentry" id="RT_ST_CountAgg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CountAgg — 总计的。 返回一组栅格的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 NODATA 值的像素。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bigint <strong class="fsfunc">ST_CountAgg</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">sample_percent</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_CountAgg</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_CountAgg</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" id="idm31909"><h2>描述</h2><p>返回一组栅格的给定波段中的像素数。 如果未指定 band，则 <code class="varname">nband </code>默认为 1。</p><p>如果<code class="varname"> excex_nodata_value </code>设置为 true，则仅计算值不等于栅格 <code class="varname">NODATA </code>值的像素。 将<code class="varname"> except_nodata_value </code>设置为 false 以计算所有像素 </p><p>默认情况下将对所有像素进行采样。 要获得更快的响应，请将<code class="varname">sample_percent </code>设置为零 (0) 到一 (1) 之间的值</p><p class="availability">可用性：2.2.0 </p></div><div class="refsection" id="idm31920"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT
        rast.rast
    FROM (
        SELECT ST_SetValue(
            ST_SetValue(
                ST_SetValue(
                    ST_AddBand(
                        ST_MakeEmptyRaster(10, 10, 10, 10, 2, 2, 0, 0,0)
                        , 1, '64BF', 0, 0
                    )
                    , 1, 1, 1, -10
                )
                , 1, 5, 4, 0
            )
            , 1, 5, 5, 3.14159
        ) AS rast
    ) AS rast
    FULL JOIN (
        SELECT generate_series(1, 10) AS id
    ) AS id
        ON 1 = 1
)
SELECT
    ST_CountAgg(rast, 1, TRUE)
FROM foo;

 st_countagg
-------------
          20
(1 row)
                </pre></div><div class="refsection" id="idm31923"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> </p></div></div><div class="refentry" id="RT_ST_Histogram"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Histogram — 返回一组记录，总结了栅格或栅格覆盖数据分布，其中包括分离的分箱范围。如果未指定，将自动计算分箱数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Histogram</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, integer  <var class="pdparam">bins=autocomputed</var>, double precision[]  <var class="pdparam">width=NULL</var>, boolean  <var class="pdparam">right=false</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Histogram</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">bins</var>, double precision[]  <var class="pdparam">width=NULL</var>, boolean  <var class="pdparam">right=false</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Histogram</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, integer  <var class="pdparam">bins</var>, boolean  <var class="pdparam">right</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Histogram</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">bins</var>, boolean  <var class="pdparam">right</var><code>)</code>;</p></div></div><div class="refsection" id="idm32007"><h2>描述</h2><p>返回每个 bin 给定栅格波段的记录集，其中包含最小值、最大值、计数、百分比。 如果未指定 band，则 <code class="varname">nband </code>默认为 1。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下，仅考虑不等于<code class="varname">nodata</code>的像素值。 将<code class="varname">except_nodata_value </code>设置为 false 以计算所有像素。</p></td></tr></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">width</code></span></dt><dd><p>width：一个数组，指示每个category/bin 的宽度。 如果箱的数量大于宽度的数量，则宽度会重复。 </p><p>示例：9 个 bin，宽度为 [a, b, c] 将输出为 [a, b, c, a, b, c, a, b, c]</p></dd><dt><span class="term"><code class="varname">bins</code></span></dt><dd><p>分组数量——这是您将从函数中返回的记录数（如果指定）。 如果未指定，则自动计算分组数量。</p></dd><dt><span class="term"><code class="varname">right</code></span></dt><dd><p>从右侧而不是从左侧计算直方图（默认）。 这将评估值 x 的标准从 [a, b) 更改为 (a, b]</p></dd></dl></div><p class="changed">更改：3.1.0 删除了 ST_Histogram(table_name, column_name) 变体。 </p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm32034"><h2>示例：单个栅格图块 - 计算波段 1、2、3 和自动计算 bins的直方图</h2><pre class="programlisting">SELECT band, (stats).*
FROM (SELECT rid, band, ST_Histogram(rast, band) As stats
    FROM dummy_rast CROSS JOIN generate_series(1,3) As band
     WHERE rid=2) As foo;

 band |  min  |  max  | count | percent
------+-------+-------+-------+---------
    1 |   249 |   250 |     2 |    0.08
    1 |   250 |   251 |     2 |    0.08
    1 |   251 |   252 |     1 |    0.04
    1 |   252 |   253 |     2 |    0.08
    1 |   253 |   254 |    18 |    0.72
    2 |    78 | 113.2 |    11 |    0.44
    2 | 113.2 | 148.4 |     4 |    0.16
    2 | 148.4 | 183.6 |     4 |    0.16
    2 | 183.6 | 218.8 |     1 |    0.04
    2 | 218.8 |   254 |     5 |     0.2
    3 |    62 | 100.4 |    11 |    0.44
    3 | 100.4 | 138.8 |     5 |     0.2
    3 | 138.8 | 177.2 |     4 |    0.16
    3 | 177.2 | 215.6 |     1 |    0.04
    3 | 215.6 |   254 |     4 |    0.16</pre></div><div class="refsection" id="idm32037"><h2>示例：只有波段 2，但有 6 个 bins</h2><pre class="programlisting">SELECT (stats).*
FROM (SELECT rid, ST_Histogram(rast, 2,6) As stats
    FROM dummy_rast
     WHERE rid=2) As foo;

    min     |    max     | count | percent
------------+------------+-------+---------
         78 | 107.333333 |     9 |    0.36
 107.333333 | 136.666667 |     6 |    0.24
 136.666667 |        166 |     0 |       0
        166 | 195.333333 |     4 |    0.16
 195.333333 | 224.666667 |     1 |    0.04
 224.666667 |        254 |     5 |     0.2
(6 rows)

-- Same as previous but we explicitly control the pixel value range of each bin.
SELECT (stats).*
FROM (SELECT rid, ST_Histogram(rast, 2,6,ARRAY[0.5,1,4,100,5]) As stats
    FROM dummy_rast
     WHERE rid=2) As foo;

  min  |  max  | count | percent
-------+-------+-------+----------
    78 |  78.5 |     1 |     0.08
  78.5 |  79.5 |     1 |     0.04
  79.5 |  83.5 |     0 |        0
  83.5 | 183.5 |    17 |   0.0068
 183.5 | 188.5 |     0 |        0
 188.5 |   254 |     6 | 0.003664
(6 rows)</pre></div><div class="refsection" id="idm32040"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>, <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> </p></div></div><div class="refentry" id="RT_ST_Quantile"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Quantile — 计算样本或总体上下文中栅格或栅格表覆盖范围的分位数。 因此，可以检查某个值是否位于栅格的 25%、50%、75% 百分位处。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">quantiles=NULL</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, double precision[]  <var class="pdparam">quantiles</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">quantiles</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">quantile=NULL</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Quantile</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p></div></div><div class="refsection" id="idm32148"><h2>描述</h2><p>计算样本或总体上下文中栅格或栅格表覆盖范围的分位数。 因此，可以检查某个值是否位于栅格的 25%、50%、75% 百分位处。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname"> except_nodata_value</code> 设置为 false，还将对没有数据的像素进行计数。</p></td></tr></table></div><p class="changed">更改：3.1.0 删除了 ST_Quantile(table_name, column_name) 变体。 </p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm32156"><h2>示例</h2><pre class="programlisting">UPDATE dummy_rast SET rast = ST_SetBandNoDataValue(rast,249) WHERE rid=2;
--Example will consider only pixels of band 1 that are not 249 and in named quantiles --

SELECT (pvq).*
FROM (SELECT ST_Quantile(rast, ARRAY[0.25,0.75]) As pvq
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvq).quantile;

 quantile | value
----------+-------
     0.25 |   253
     0.75 |   254

SELECT ST_Quantile(rast, 0.75) As value
    FROM dummy_rast WHERE rid=2;

value
------
  254
</pre><pre class="programlisting">--real live example.  Quantile of all pixels in band 2 intersecting a geometry
SELECT rid, (ST_Quantile(rast,2)).* As pvc
    FROM o_4_boston
        WHERE ST_Intersects(rast,
            ST_GeomFromText('POLYGON((224486 892151,224486 892200,224706 892200,224706 892151,224486 892151))',26986)
            )
ORDER BY value, quantile,rid
;


 rid | quantile | value
-----+----------+-------
   1 |        0 |     0
   2 |        0 |     0
  14 |        0 |     1
  15 |        0 |     2
  14 |     0.25 |    37
   1 |     0.25 |    42
  15 |     0.25 |    47
   2 |     0.25 |    50
  14 |      0.5 |    56
   1 |      0.5 |    64
  15 |      0.5 |    66
   2 |      0.5 |    77
  14 |     0.75 |    81
  15 |     0.75 |    87
   1 |     0.75 |    94
   2 |     0.75 |   106
  14 |        1 |   199
   1 |        1 |   244
   2 |        1 |   255
  15 |        1 |   255
</pre></div><div class="refsection" id="idm32160"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>, <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> </p></div></div><div class="refentry" id="RT_ST_SummaryStats"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SummaryStats — 返回一组总结统计信息，包括给定栅格或栅格覆盖的栅格带的计数、总和、均值、标准差、最小值和最大值。如果未指定带号，则假定为带1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">summarystats <strong class="fsfunc">ST_SummaryStats</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">summarystats <strong class="fsfunc">ST_SummaryStats</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" id="idm32194"><h2>描述</h2><p>返回栅格或栅格覆盖范围的给定栅格波段的<a class="xref" href="#summarystats" title="summarystats">summarystats</a>统计信息，其中包含计数、总和、平均值、标准差、最小值、最大值。 如果未指定 band，则 <code class="varname">nband</code> 默认为 1。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下，仅考虑不等于<code class="varname">nodata</code>值的像素值。 将 <code class="varname">except_nodata_value </code>设置为 false 以获取所有像素的计数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下将对所有像素进行采样。 为了获得更快的响应，请将<code class="varname">sample_percent</code>设置为低于1</p></td></tr></table></div><p class="changed">更改：3.1.0 ST_SummaryStats(rastertable, rastercolumn, ...) 变体已删除。 请改用 <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>。 </p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm32209"><h2>示例：单个栅格图块</h2><pre class="programlisting">SELECT rid, band, (stats).*
FROM (SELECT rid, band, ST_SummaryStats(rast, band) As stats
    FROM dummy_rast CROSS JOIN generate_series(1,3) As band
     WHERE rid=2) As foo;

 rid | band | count | sum  |    mean    |  stddev   | min | max
-----+------+-------+------+------------+-----------+-----+-----
   2 |    1 |    23 | 5821 | 253.086957 |  1.248061 | 250 | 254
   2 |    2 |    25 | 3682 |     147.28 | 59.862188 |  78 | 254
   2 |    3 |    25 | 3290 |      131.6 | 61.647384 |  62 | 254
                </pre></div><div class="refsection" id="idm32212"><h2>示例：汇总与感兴趣的建筑物相交的像素</h2><p>此示例在 64 位 PostGIS 窗口上花费了 574 毫秒，包含所有波士顿建筑物和空中图块（每个图块 150x150 像素 ~ 134,000 个图块），约 102,000 个建筑记录</p><pre class="programlisting">
WITH
-- our features of interest
   feat AS (SELECT gid As building_id, geom_26986 As geom FROM buildings AS b
    WHERE gid IN(100, 103,150)
   ),
-- clip band 2 of raster tiles to boundaries of builds
-- then get stats for these clipped regions
   b_stats AS
    (SELECT  building_id, (stats).*
FROM (SELECT building_id, ST_SummaryStats(ST_Clip(rast,2,geom)) As stats
    FROM aerials.boston
        INNER JOIN feat
    ON ST_Intersects(feat.geom,rast)
 ) As foo
 )
-- finally summarize stats
SELECT building_id, SUM(count) As num_pixels
  , MIN(min) As min_pval
  ,  MAX(max) As max_pval
  , SUM(mean*count)/SUM(count) As avg_pval
    FROM b_stats
 WHERE count 
&gt; 0
    GROUP BY building_id
    ORDER BY building_id;
 building_id | num_pixels | min_pval | max_pval |     avg_pval
-------------+------------+----------+----------+------------------
         100 |       1090 |        1 |      255 | 61.0697247706422
         103 |        655 |        7 |      182 | 70.5038167938931
         150 |        895 |        2 |      252 | 185.642458100559
</pre></div><div class="refsection" id="idm32216"><h2>示例：栅格覆盖范围</h2><pre class="programlisting">-- stats for each band --
SELECT band, (stats).*
FROM (SELECT band, ST_SummaryStats('o_4_boston','rast', band) As stats
    FROM generate_series(1,3) As band) As foo;

 band |  count  |  sum   |       mean       |      stddev      | min | max
------+---------+--------+------------------+------------------+-----+-----
    1 | 8450000 | 725799 | 82.7064349112426 | 45.6800222638537 |   0 | 255
    2 | 8450000 | 700487 | 81.4197705325444 | 44.2161184161765 |   0 | 255
    3 | 8450000 | 575943 |  74.682739408284 | 44.2143885481407 |   0 | 255

-- For a table -- will get better speed if set sampling to less than 100%
-- Here we set to 25% and get a much faster answer
SELECT band, (stats).*
FROM (SELECT band, ST_SummaryStats('o_4_boston','rast', band,true,0.25) As stats
    FROM generate_series(1,3) As band) As foo;

 band |  count  |  sum   |       mean       |      stddev      | min | max
------+---------+--------+------------------+------------------+-----+-----
    1 | 2112500 | 180686 | 82.6890480473373 | 45.6961043857248 |   0 | 255
    2 | 2112500 | 174571 |  81.448503668639 | 44.2252623171821 |   0 | 255
    3 | 2112500 | 144364 | 74.6765884023669 | 44.2014869384578 |   0 | 255
                </pre></div><div class="refsection" id="idm32219"><h2>相关信息</h2><p><a class="xref" href="#summarystats" title="summarystats">summarystats</a>, <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>, <a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> </p></div></div><div class="refentry" id="RT_ST_SummaryStatsAgg"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SummaryStatsAgg — 总计的。 返回一组栅格的给定栅格波段的摘要统计信息，其中包含计数、总和、平均值、标准差、最小值、最大值。 如果未指定带号，则假定为带1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">summarystats <strong class="fsfunc">ST_SummaryStatsAgg</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">sample_percent</var><code>)</code>;</p><p><code class="funcdef">summarystats <strong class="fsfunc">ST_SummaryStatsAgg</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">sample_percent</var><code>)</code>;</p><p><code class="funcdef">summarystats <strong class="fsfunc">ST_SummaryStatsAgg</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" id="idm32271"><h2>描述</h2><p>返回栅格或栅格覆盖范围的给定栅格波段的<a class="xref" href="#summarystats" title="summarystats">summarystats</a>统计信息，其中包含计数、总和、平均值、标准差、最小值、最大值。 如果未指定 band，则 <code class="varname">nband</code> 默认为 1。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下，仅考虑不等于 <code class="varname">NODATA </code>值的像素值。 将<code class="varname"> except_nodata_value </code>设置为 False 以获取所有像素的计数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下将对所有像素进行采样。 为了获得更快的响应，请将<code class="varname">sample_percent</code>设置为0到1之间的值</p></td></tr></table></div><p class="availability">可用性：2.2.0 </p></div><div class="refsection" id="idm32284"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT
        rast.rast
    FROM (
        SELECT ST_SetValue(
            ST_SetValue(
                ST_SetValue(
                    ST_AddBand(
                        ST_MakeEmptyRaster(10, 10, 10, 10, 2, 2, 0, 0,0)
                        , 1, '64BF', 0, 0
                    )
                    , 1, 1, 1, -10
                )
                , 1, 5, 4, 0
            )
            , 1, 5, 5, 3.14159
        ) AS rast
    ) AS rast
    FULL JOIN (
        SELECT generate_series(1, 10) AS id
    ) AS id
        ON 1 = 1
)
SELECT
    (stats).count,
    round((stats).sum::numeric, 3),
    round((stats).mean::numeric, 3),
    round((stats).stddev::numeric, 3),
    round((stats).min::numeric, 3),
    round((stats).max::numeric, 3)
FROM (
    SELECT
        ST_SummaryStatsAgg(rast, 1, TRUE, 1) AS stats
    FROM foo
) bar;

 count |  round  | round  | round |  round  | round
-------+---------+--------+-------+---------+-------
    20 | -68.584 | -3.429 | 6.571 | -10.000 | 3.142
(1 row)
                </pre></div><div class="refsection" id="idm32287"><h2>相关信息</h2><p><a class="xref" href="#summarystats" title="summarystats">summarystats</a>, <a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>, <a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> </p></div></div><div class="refentry" id="RT_ST_ValueCount"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ValueCount — 返回一组记录，其中包含像素带值以及具有给定值集的栅格（或栅格覆盖范围）给定带中的像素数计数。 如果未指定波段，则默认为波段 1。默认情况下，不计算节点数据值像素。 输出像素中的所有其他值，并将像素带值四舍五入到最接近的整数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_ValueCount</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">searchvalues=NULL</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_ValueCount</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_ValueCount</strong>(</code>raster  <var class="pdparam">rast</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_ValueCount</strong>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_ValueCount</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_ValueCount</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_ValueCount</strong>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">searchvalues=NULL</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_ValueCount</strong>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <strong class="fsfunc">ST_ValueCount</strong>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">bigint<strong class="fsfunc">ST_ValueCount</strong>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_ValueCount</strong>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <strong class="fsfunc">ST_ValueCount</strong>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p></div></div><div class="refsection" id="idm32534"><h2>描述</h2><p>返回一组具有列<code class="varname">值</code>计数的<code class="varname">记录</code>，其中包含像素波段值以及所选波段的栅格切片或栅格覆盖范围中的像素计数。 </p><p>如果未指定波段，则 <code class="varname">nband </code>默认为 1。如果未指定<code class="varname">搜索值</code>，将返回在栅格或栅格覆盖范围中找到的所有像素值。 如果给定一个搜索值，将返回一个整数，而不是表示具有该像素带值的像素计数的记录</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果<code class="varname"> except_nodata_value</code> 设置为 false，还将对没有数据的像素进行计数。</p></td></tr></table></div><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm32546"><h2>示例</h2><pre class="programlisting">UPDATE dummy_rast SET rast = ST_SetBandNoDataValue(rast,249) WHERE rid=2;
--Example will count only pixels of band 1 that are not 249. --

SELECT (pvc).*
FROM (SELECT ST_ValueCount(rast) As pvc
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvc).value;

 value | count
-------+-------
   250 |     2
   251 |     1
   252 |     2
   253 |     6
   254 |    12

-- Example will coount all pixels of band 1 including 249 --
SELECT (pvc).*
FROM (SELECT ST_ValueCount(rast,1,false) As pvc
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvc).value;

 value | count
-------+-------
   249 |     2
   250 |     2
   251 |     1
   252 |     2
   253 |     6
   254 |    12

-- Example will count only non-nodata value pixels of band 2
SELECT (pvc).*
FROM (SELECT ST_ValueCount(rast,2) As pvc
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvc).value;
 value | count
-------+-------
    78 |     1
    79 |     1
    88 |     1
    89 |     1
    96 |     1
    97 |     1
    98 |     1
    99 |     2
   112 |     2
:

                </pre><pre class="programlisting">--real live example.  Count all the pixels in an aerial raster tile band 2 intersecting a geometry
-- and return only the pixel band values that have a count &gt; 500
SELECT (pvc).value, SUM((pvc).count) As total
FROM (SELECT ST_ValueCount(rast,2) As pvc
    FROM o_4_boston
        WHERE ST_Intersects(rast,
            ST_GeomFromText('POLYGON((224486 892151,224486 892200,224706 892200,224706 892151,224486 892151))',26986)
             )
        ) As foo
    GROUP BY (pvc).value
    HAVING SUM((pvc).count) &gt; 500
    ORDER BY (pvc).value;

 value | total
-------+-----
    51 | 502
    54 | 521
</pre><pre class="programlisting">-- Just return count of pixels in each raster tile that have value of 100 of tiles that intersect  a specific geometry --
SELECT rid, ST_ValueCount(rast,2,100) As count
    FROM o_4_boston
        WHERE ST_Intersects(rast,
            ST_GeomFromText('POLYGON((224486 892151,224486 892200,224706 892200,224706 892151,224486 892151))',26986)
             ) ;

 rid | count
-----+-------
   1 |    56
   2 |    95
  14 |    37
  15 |    64
</pre></div><div class="refsection" id="idm32551"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a></p></div></div></section><section class="section" id="Raster_Inputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.10. 栅格输入</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_RastFromWKB">ST_RastFromWKB</a></span><span class="refpurpose"> — 从熟知的二进制 (WKB) 栅格返回栅格值。</span></li><li><span class="refentrytitle"><a href="#RT_ST_RastFromHexWKB">ST_RastFromHexWKB</a></span><span class="refpurpose"> — 从熟知的二进制 (WKB) 栅格的十六进制表示形式返回栅格值。</span></li></ul></div><div class="refentry" id="RT_ST_RastFromWKB"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RastFromWKB — 从熟知的二进制 (WKB) 栅格返回栅格值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_RastFromWKB</strong>(</code>bytea  <var class="pdparam">wkb</var><code>)</code>;</p></div></div><div class="refsection" id="idm32570"><h2>描述</h2><p>给定熟知的二进制 (WKB) 栅格，返回一个栅格。 </p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm32574"><h2>示例</h2><pre class="programlisting">SELECT (ST_Metadata(
    ST_RastFromWKB(
        '\001\000\000\000\000\000\000\000\000\000\000\000@\000\000\000\000\000\000\010@\000\000\000\000\000\000\340?\000\000\000\000\000\000\340?\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\012\000\000\000\012\000\024\000'::bytea
    )
)).* AS metadata;

 upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
------------+------------+-------+--------+--------+--------+-------+-------+------+----------
        0.5 |        0.5 |    10 |     20 |      2 |      3 |     0 |     0 |   10 |        0
                </pre></div><div class="refsection" id="idm32577"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_RastFromHexWKB" title="ST_RastFromHexWKB">ST_RastFromHexWKB</a>, <a class="xref" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a>, <a class="xref" href="#RT_ST_AsHexWKB" title="ST_AsHexWKB">ST_AsHexWKB</a> </p></div></div><div class="refentry" id="RT_ST_RastFromHexWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_RastFromHexWKB — 从熟知的二进制 (WKB) 栅格的十六进制表示形式返回栅格值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_RastFromHexWKB</strong>(</code>text  <var class="pdparam">wkb</var><code>)</code>;</p></div></div><div class="refsection" id="idm32596"><h2>描述</h2><p>给定十六进制表示形式的熟知的二进制 (WKB) 栅格，返回一个栅格。 </p><p class="availability">可用性：2.5.0</p></div><div class="refsection" id="idm32600"><h2>示例</h2><pre class="programlisting">SELECT (ST_Metadata(
    ST_RastFromHexWKB(
        '010000000000000000000000400000000000000840000000000000E03F000000000000E03F000000000000000000000000000000000A0000000A001400'
    )
)).* AS metadata;

 upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
------------+------------+-------+--------+--------+--------+-------+-------+------+----------
        0.5 |        0.5 |    10 |     20 |      2 |      3 |     0 |     0 |   10 |        0
                </pre></div><div class="refsection" id="idm32603"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_RastFromWKB" title="ST_RastFromWKB">ST_RastFromWKB</a>, <a class="xref" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a>, <a class="xref" href="#RT_ST_AsHexWKB" title="ST_AsHexWKB">ST_AsHexWKB</a> </p></div></div></section><section class="section" id="Raster_Outputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.11. 栅格输出</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_AsBinary">ST_AsBinary/ST_AsWKB</a></span><span class="refpurpose"> — 返回栅格的熟知的二进制 (WKB) 表示形式。</span></li><li><span class="refentrytitle"><a href="#RT_ST_AsHexWKB">ST_AsHexWKB</a></span><span class="refpurpose"> — 返回栅格的十六进制表示形式的熟知的二进制 (WKB)。</span></li><li><span class="refentrytitle"><a href="#RT_ST_AsGDALRaster">ST_AsGDALRaster</a></span><span class="refpurpose"> — 以指定的 GDAL 栅格格式返回栅格图块。 栅格格式是编译库支持的格式之一。 使用 ST_GDALDrivers() 获取您的库支持的格式列表。</span></li><li><span class="refentrytitle"><a href="#RT_ST_AsJPEG">ST_AsJPEG</a></span><span class="refpurpose"> — 将栅格图块选定的波段作为单个联合摄影导出组 (JPEG) 图像（字节数组）返回。 如果未指定波段且有 1 个或 3 个以上波段，则仅使用第一个波段。 如果只有 3 个波段，则使用所有 3 个波段并将其映射到 RGB。</span></li><li><span class="refentrytitle"><a href="#RT_ST_AsPNG">ST_AsPNG</a></span><span class="refpurpose"> — 将栅格图块选定的波段作为单个便携式网络图形 (PNG) 图像（字节数组）返回。 如果栅格中有 1、3 或 4 个波段且未指定波段，则使用所有波段。 如果有 2 个以上或多于 4 个波段且未指定波段，则仅使用波段 1。 波段映射到 RGB 或 RGBA 空间。</span></li><li><span class="refentrytitle"><a href="#RT_ST_AsTIFF">ST_AsTIFF</a></span><span class="refpurpose"> — 将栅格选定的波段作为单个 TIFF 图像（字节数组）返回。 如果未指定波段或栅格中不存在任何指定波段，则将尝试使用所有波段。</span></li></ul></div><div class="refentry" id="RT_ST_AsBinary"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsBinary/ST_AsWKB — 返回栅格的熟知的二进制 (WKB) 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsBinary</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">outasin=FALSE</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsWKB</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">outasin=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm32636"><h2>描述</h2><p>返回栅格的二进制表示形式。 如果 <code class="varname">outasin</code> 为 TRUE，则 out-db 带将被视为 in-db。 有关表示的详细信息，请参阅位于 PostGIS 源文件夹中的 raster/doc/RFC2-WellKnownBinaryFormat。 </p><p>这在二进制游标中非常有用，可以从数据库中提取数据而不将其转换为字符串表示形式。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下，WKB 输出包含 out-db band 的外部文件路径。 如果客户端无权访问 out-db band 下的栅格文件，请将 <code class="varname">outasin </code>设置为 TRUE。</p></td></tr></table></div><p class="enhanced">增强：2.1.0 添加<code class="varname">outasin</code></p><p class="enhanced">增强：2.5.0 添加 <code class="varname">ST_AsWKB</code></p></div><div class="refsection" id="idm32648"><h2>示例</h2><pre class="programlisting">SELECT ST_AsBinary(rast) As rastbin FROM dummy_rast WHERE rid=1;

                     rastbin
---------------------------------------------------------------------------------
\001\000\000\000\000\000\000\000\000\000\000\000@\000\000\000\000\000\000\010@\000\000\000\000\000\000\340?\000\000\000\000\000\000\340?\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\012\000\000\000\012\000\024\000
                </pre></div><div class="refsection" id="idm32651"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_RastFromWKB" title="ST_RastFromWKB">ST_RastFromWKB</a>, <a class="xref" href="#RT_ST_AsHexWKB" title="ST_AsHexWKB">ST_AsHexWKB</a> </p></div></div><div class="refentry" id="RT_ST_AsHexWKB"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsHexWKB — 返回栅格的十六进制表示形式的熟知的二进制 (WKB)。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsHexWKB</strong>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">outasin=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm32671"><h2>描述</h2><p>返回栅格的十六进制表示形式的二进制表示形式。 如果 <code class="varname">outasin </code>为 TRUE，则 out-db 带将被视为 in-db。 有关表示的详细信息，请参阅位于 PostGIS 源文件夹中的 raster/doc/RFC2-WellKnownBinaryFormat。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认情况下，十六进制 WKB 输出包含 out-db band 的外部文件路径。 如果客户端无权访问 out-db band 下的栅格文件，请将 <code class="varname">outasin </code>设置为 TRUE。</p></td></tr></table></div><p class="availability">可用性：2.5.0 </p></div><div class="refsection" id="idm32679"><h2>示例</h2><pre class="programlisting">SELECT ST_AsHexWKB(rast) As rastbin FROM dummy_rast WHERE rid=1;

                                                        st_ashexwkb
----------------------------------------------------------------------------------------------------------------------------
 010000000000000000000000400000000000000840000000000000E03F000000000000E03F000000000000000000000000000000000A0000000A001400
                </pre></div><div class="refsection" id="idm32682"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_RastFromHexWKB" title="ST_RastFromHexWKB">ST_RastFromHexWKB</a>, <a class="xref" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a> </p></div></div><div class="refentry" id="RT_ST_AsGDALRaster"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsGDALRaster — 以指定的 GDAL 栅格格式返回栅格图块。 栅格格式是编译库支持的格式之一。 使用 ST_GDALDrivers() 获取您的库支持的格式列表。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsGDALRaster</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">format</var>, text[]  <var class="pdparam">options=NULL</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p></div></div><div class="refsection" id="idm32708"><h2>描述</h2><p>返回指定格式的栅格图块。 参数逐项列举如下：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">format </code>格式来输出。 这取决于 libgdal 库中编译的驱动程序。 通常可用的有“JPEG”、“GTIff”、“PNG”。 使用 <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>获取您的库支持的格式列表。 </p></li><li class="listitem"><p><code class="varname">options</code> GDAL 选项的文本数组。 有效选项取决于格式。 有关更多详细信息，请参阅 <a class="link" href="http://www.gdal.org/frmt_various.html" target="_top">GDAL 栅格格式选项</a>。 </p></li><li class="listitem"><p><code class="varname">srs</code> 要嵌入图像中的 proj4text 或 srtext（来自Spatial_ref_sys） </p></li></ul></div><p class="availability">可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。 </p></div><div class="refsection" id="idm32724"><h2>JPEG 输出示例，多个图块作为单个光栅</h2><pre class="programlisting">
SELECT ST_AsGDALRaster(ST_Union(rast), 'JPEG', ARRAY['QUALITY=50']) As rastjpg
FROM dummy_rast
WHERE rast &amp;&amp; ST_MakeEnvelope(10, 10, 11, 11);
</pre></div><div class="refsection" id="idm32727"><h2>使用 PostgreSQL 大对象支持导出栅格</h2><p>将栅格导出为另一种格式的一种方法是使用 <a class="link" href="https://www.postgresql.org/docs/current/static/lo-funcs.html" target="_top">PostgreSQL 大对象导出函数</a>。 我们将重复前面的示例，但也会导出。 请注意，您需要拥有对数据库的超级用户访问权限，因为它使用服务器端 lo 函数。 它还将导出到服务器网络上的路径。 如果需要本地导出，请使用 psql 等效的 lo_ 函数，该函数导出到本地文件系统而不是服务器文件系统。</p><pre class="programlisting">
DROP TABLE IF EXISTS tmp_out ;

CREATE TABLE tmp_out AS
SELECT lo_from_bytea(0,
       ST_AsGDALRaster(ST_Union(rast), 'JPEG', ARRAY['QUALITY=50'])
        ) AS loid
  FROM dummy_rast
WHERE rast &amp;&amp; ST_MakeEnvelope(10, 10, 11, 11);

SELECT lo_export(loid, '/tmp/dummy.jpg')
   FROM tmp_out;

SELECT lo_unlink(loid)
  FROM tmp_out;
</pre></div><div class="refsection" id="idm32732"><h2>GTIFF 输出示例</h2><pre class="programlisting">SELECT ST_AsGDALRaster(rast, 'GTiff') As rastjpg
FROM dummy_rast WHERE rid=2;

-- Out GeoTiff with jpeg compression, 90% quality
SELECT ST_AsGDALRaster(rast, 'GTiff',
  ARRAY['COMPRESS=JPEG', 'JPEG_QUALITY=90'],
  4269) As rasttiff
FROM dummy_rast WHERE rid=2;
                </pre></div><div class="refsection" id="idm32735"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Applications" title="10.3. 使用 PostGIS Raster 构建自定义应用程序">Section 10.3, “使用 PostGIS Raster 构建自定义应用程序”</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" id="RT_ST_AsJPEG"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsJPEG — 将栅格图块选定的波段作为单个联合摄影导出组 (JPEG) 图像（字节数组）返回。 如果未指定波段且有 1 个或 3 个以上波段，则仅使用第一个波段。 如果只有 3 个波段，则使用所有 3 个波段并将其映射到 RGB。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsJPEG</strong>(</code>raster  <var class="pdparam">rast</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsJPEG</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">quality</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsJPEG</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsJPEG</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsJPEG</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, integer  <var class="pdparam">quality</var><code>)</code>;</p></div></div><div class="refsection" id="idm32804"><h2>描述</h2><p>将栅格的选定波段作为单个联合摄影导出组图像 (JPEG) 返回。 如果需要导出为不太常见的栅格类型，请使用 <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>。 如果未指定波段且有 1 个或 3 个以上波段，则仅使用第一个波段。 如果有 3 个波段，则使用所有 3 个波段。 该功能有许多变体和许多选项。 以下逐项列出：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">nband </code>用于单波段导出。 </p></li><li class="listitem"><p><code class="varname">nbands </code>是要导出的波段数组（请注意，JPEG 的最大值为 3），波段的顺序为 RGB。 例如 ARRAY[3,2,1] 表示将波段 3 映射到红色，将波段 2 映射到绿色，将波段 1 映射到蓝色 </p></li><li class="listitem"><p><code class="varname">quality</code>数字从 0 到 100。数字越高，图像越清晰。 </p></li><li class="listitem"><p><code class="varname">options</code> text 为 JPEG 定义的 GDAL 选项数组（请查看 JPEG <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> 的 create_options）。 对于 JPEG，有效的是 <code class="varname">PROGRESSIVE</code> ON 或 OFF，<code class="varname">QUALITY </code>的范围为 0 到 100，默认为 75。有关更多详细信息，请参阅<a class="link" href="http://www.gdal.org/frmt_various.html" target="_top"> GDAL 光栅格式选项</a> 。 </p></li></ul></div><p class="availability">可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。 </p></div><div class="refsection" id="idm32826"><h2>示例：输出</h2><pre class="programlisting">-- output first 3 bands 75% quality
SELECT ST_AsJPEG(rast) As rastjpg
    FROM dummy_rast WHERE rid=2;

-- output only first band as 90% quality
SELECT ST_AsJPEG(rast,1,90) As rastjpg
    FROM dummy_rast WHERE rid=2;

-- output first 3 bands (but make band 2 Red, band 1 green, and band 3 blue, progressive and 90% quality
SELECT ST_AsJPEG(rast,ARRAY[2,1,3],ARRAY['QUALITY=90','PROGRESSIVE=ON']) As rastjpg
    FROM dummy_rast WHERE rid=2;</pre></div><div class="refsection" id="idm32829"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Applications" title="10.3. 使用 PostGIS Raster 构建自定义应用程序">Section 10.3, “使用 PostGIS Raster 构建自定义应用程序”</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a> </p></div></div><div class="refentry" id="RT_ST_AsPNG"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsPNG — 将栅格图块选定的波段作为单个便携式网络图形 (PNG) 图像（字节数组）返回。 如果栅格中有 1、3 或 4 个波段且未指定波段，则使用所有波段。 如果有 2 个以上或多于 4 个波段且未指定波段，则仅使用波段 1。 波段映射到 RGB 或 RGBA 空间。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsPNG</strong>(</code>raster  <var class="pdparam">rast</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsPNG</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">compression</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsPNG</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsPNG</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, integer  <var class="pdparam">compression</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsPNG</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm32900"><h2>描述</h2><p>将栅格的选定波段作为单个便携式网络图形图像 (PNG) 返回。 如果需要导出为不太常见的栅格类型，请使用<a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>。 如果未指定波段，则导出前 3 个波段。 该功能有许多变体和许多选项。 如果未指定<code class="varname"> srid</code>，则使用栅格的 srid。 以下逐项列出：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">nband </code>用于单波段导出。 </p></li><li class="listitem"><p><code class="varname">nbands</code> 是要导出的波段数组（请注意，PNG 的最大值为 4），波段的顺序为 RGBA。 例如 ARRAY[3,2,1] 表示将波段 3 映射到红色，将波段 2 映射到绿色，将波段 1 映射到蓝色 </p></li><li class="listitem"><p><code class="varname">compression</code>编号从 1 到 9。数字越大，压缩越大。 </p></li><li class="listitem"><p><code class="varname">options </code> text 为 PNG 定义的 GDAL 选项数组（请查看 <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> 的 PNG 的 create_options）。 对于 PNG 来说，有效的只是 ZLEVEL（压缩所花费的时间——默认 6），例如 数组['ZLEVEL=9']。 不允许 WORLDFILE，因为该函数必须输出两个输出。 有关更多详细信息，请参阅 <a class="link" href="http://www.gdal.org/frmt_various.html" target="_top">GDAL 栅格格式选项</a>。 </p></li></ul></div><p class="availability">可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。 </p></div><div class="refsection" id="idm32921"><h2>示例</h2><pre class="programlisting">SELECT ST_AsPNG(rast) As rastpng
FROM dummy_rast WHERE rid=2;

-- export the first 3 bands and map band 3 to Red, band 1 to Green, band 2 to blue
SELECT ST_AsPNG(rast, ARRAY[3,1,2]) As rastpng
FROM dummy_rast WHERE rid=2;
                </pre></div><div class="refsection" id="idm32924"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_Raster_Applications" title="10.3. 使用 PostGIS Raster 构建自定义应用程序">Section 10.3, “使用 PostGIS Raster 构建自定义应用程序”</a></p></div></div><div class="refentry" id="RT_ST_AsTIFF"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_AsTIFF — 将栅格选定的波段作为单个 TIFF 图像（字节数组）返回。 如果未指定波段或栅格中不存在任何指定波段，则将尝试使用所有波段。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsTIFF</strong>(</code>raster  <var class="pdparam">rast</var>, text[]  <var class="pdparam">options=''</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsTIFF</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">compression=''</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsTIFF</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text  <var class="pdparam">compression=''</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p><p><code class="funcdef">bytea <strong class="fsfunc">ST_AsTIFF</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text[]  <var class="pdparam">options</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p></div></div><div class="refsection" id="idm32991"><h2>描述</h2><p>以单个标记图像文件格式 (TIFF) 返回栅格的选定波段。 如果未指定波段，将尝试使用所有波段。 这是 <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> 的包装。 如果需要导出为不太常见的栅格类型，请使用 <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>。 该功能有许多变体和许多选项。 如果不存在空间参考 SRS 文本，则使用栅格的空间参考。 以下逐项列出：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">nbands</code> 是要导出的波段数组（请注意，PNG 的最大值为 3），波段的顺序为 RGB。 例如 ARRAY[3,2,1] 表示将波段 3 映射到红色，将波段 2 映射到绿色，将波段 1 映射到蓝色 </p></li><li class="listitem"><p><code class="varname">compression</code>Compression表达式——JPEG90（或其他百分比）、LZW、JPEG、DEFLATE9。 </p></li><li class="listitem"><p><code class="varname">options</code> text 为 GTiff 定义的 GDAL 创建选项数组（请查看<a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> 的 GTiff 的 create_options）。 或参阅<a class="link" href="http://www.gdal.org/frmt_various.html" target="_top"> GDAL 栅格格式选项</a>了解更多详细信息。 </p></li><li class="listitem"><p><code class="varname">srid </code>栅格的spatial_ref_sys 的srid。 这用于填充地理参考信息 </p></li></ul></div><p class="availability">可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。 </p></div><div class="refsection" id="idm33012"><h2>示例：使用 jpeg 压缩 90%</h2><pre class="programlisting">SELECT ST_AsTIFF(rast, 'JPEG90') As rasttiff
FROM dummy_rast WHERE rid=2;
                </pre></div><div class="refsection" id="idm33015"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div></section><section class="section" id="Raster_Processing_MapAlgebra"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.12. 栅格处理：地图代数</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_Clip">ST_Clip</a></span><span class="refpurpose"> — Returns the raster clipped by the input geometry. If band number is not specified, all bands are processed. If <code class="varname">crop</code> is not specified or TRUE, the output raster is cropped. If <code class="varname">touched</code> is set to TRUE, then touched pixels are included, otherwise only if the center of the pixel is in the geometry it is included.</span></li><li><span class="refentrytitle"><a href="#RT_ST_ColorMap">ST_ColorMap</a></span><span class="refpurpose"> — 根据源栅格和指定波段创建最多四个 8BUI 波段（灰度、RGB、RGBA）的新栅格。 如果未指定，则假定为波段 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Grayscale">ST_Grayscale</a></span><span class="refpurpose"> — 根据源栅格和代表红色、绿色和蓝色的指定波段创建新的 1-8BUI 波段栅格</span></li><li><span class="refentrytitle"><a href="#RT_ST_Intersection">ST_Intersection</a></span><span class="refpurpose"> — 返回一个栅格或一组几何像素值对，表示两个栅格的共享部分或栅格矢量化和几何图形的几何交集。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebra">ST_MapAlgebra (callback function version)</a></span><span class="refpurpose"> — 回调函数版本 - 给定一个或多个输入栅格、波段索引和一个用户指定的回调函数，返回单波段栅格。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebra_expr">ST_MapAlgebra (expression version)</a></span><span class="refpurpose"> — 表达式版本 - 在给定一两个输入栅格、波段索引和一个或多个用户指定的 SQL 表达式的情况下，返回单波段栅格。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebraExpr">ST_MapAlgebraExpr</a></span><span class="refpurpose"> — 1 栅格波段版本：通过对输入栅格波段和提供的像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebraExpr2">ST_MapAlgebraExpr</a></span><span class="refpurpose"> — 2 栅格波段版本：通过对提供的两个输入栅格波段和像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段编号，则假定每个栅格的波段 1。 生成的栅格将在第一个栅格定义的网格上对齐（比例、倾斜和像素角），并具有由“extenttype”参数定义的范围。 “extenttype”的值可以是：INTERSECTION、UNION、FIRST、SECOND。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebraFct">ST_MapAlgebraFct</a></span><span class="refpurpose"> — 1 波段版本 - 通过在输入栅格波段和提供的像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebraFct2">ST_MapAlgebraFct</a></span><span class="refpurpose"> — 2 波段版本 - 通过在提供的 2 个输入栅格波段和像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。 如果未指定，范围类型默认为 INTERSECTION。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a></span><span class="refpurpose"> — 1-波段版本：使用用户定义的 PostgreSQL 函数映射代数最近邻。 返回一个栅格，其值是涉及输入栅格波段值的邻域的 PLPGSQL 用户函数的结果。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Reclass">ST_Reclass</a></span><span class="refpurpose"> — 创建由从原始数据重新分类的波段类型组成的新栅格。 nband 是要更改的波段。 如果未指定 nband，则假定为 1。所有其他波段均按原样返回。 使用案例：将 16BUI 波段转换为 8BUI 等，以便更简单地呈现为可视格式。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Union">ST_Union</a></span><span class="refpurpose"> — 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</span></li></ul></div><div class="refentry" id="RT_ST_Clip"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Clip — Returns the raster clipped by the input geometry. If band number is not specified, all bands are processed. If <code class="varname">crop</code> is not specified or TRUE, the output raster is cropped. If <code class="varname">touched</code> is set to TRUE, then touched pixels are included, otherwise only if the center of the pixel is in the geometry it is included.</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Clip</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nband</var>, geometry  <var class="pdparam">geom</var>, double precision[]  <var class="pdparam">nodataval=NULL</var>, boolean  <var class="pdparam">crop=TRUE</var>, boolean  <var class="pdparam">touched=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Clip</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">nodataval</var>, boolean  <var class="pdparam">crop=TRUE</var>, boolean  <var class="pdparam">touched=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Clip</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, geometry  <var class="pdparam">geom</var>, boolean  <var class="pdparam">crop</var>, boolean  <var class="pdparam">touched=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Clip</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, double precision[]  <var class="pdparam">nodataval=NULL</var>, boolean  <var class="pdparam">crop=TRUE</var>, boolean  <var class="pdparam">touched=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Clip</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">nodataval</var>, boolean  <var class="pdparam">crop=TRUE</var>, boolean  <var class="pdparam">touched=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Clip</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, boolean  <var class="pdparam">crop</var>, boolean  <var class="pdparam">touched=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm33142"><h2>描述</h2><p>返回由输入几何体<code class="varname"> geom</code> 裁剪的栅格。 如果未指定波段索引，则处理所有波段。 </p><p>ST_Clip 生成的栅格必须为剪切区域分配一个节点数据值，每个波段一个。 如果未提供任何内容，并且输入栅格未定义 nodata 值，则生成的栅格的 nodata 值将设置为 ST_MinPossibleValue(ST_BandPixelType(rast, band))。 当数组中的nodata值的数量小于波段的数量时，数组中的最后一个值用于剩余的波段。 如果节点数据值的数量大于波段数量，则忽略多余的节点数据值。 所有接受节点数据值数组的变体也接受将分配给每个波段的单个值。 </p><p>如果未指定<code class="varname">crop</code>，则假定为true，表示输出栅格将被裁剪到<code class="varname">geom</code>和<code class="varname">rast</code>范围的交集。如果将<code class="varname">crop</code>设置为false，则新的栅格将具有与<code class="varname">rast</code>相同的范围。如果将<code class="varname">touched</code>设置为true，则选择与几何图形相交的<code class="varname">rast</code>中的所有像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>默认行为是touched=false，这将仅选择像素中心被几何图形覆盖的像素。</p></td></tr></table></div><p class="enhanced">增强版：3.5.0 - 添加了touched参数。</p><p class="availability">可用性: 2.0.0 </p><p class="enhanced">增强：2.1.0 用 C 重写</p><p>这里的示例使用马萨诸塞州航拍数据，该数据可在MassGIS网站的<a class="link" href="https://www.mass.gov/info-details/massgis-data-20082009-aerial-imagery" target="_top">MassGIS Aerial Orthos</a>页面上找到。 </p></div><div class="refsection" id="idm33162"><h2>示例：比较选择所有相交的和不选择所有相交的情况</h2><pre class="programlisting">SELECT ST_Count(rast) AS count_pixels_in_orig, ST_Count(rast_touched) AS all_touched_pixels, ST_Count(rast_not_touched) AS default_clip
FROM ST_AsRaster(ST_Letters('R'), scalex =
&gt; 1.0, scaley =
&gt; -1.0) AS r(rast) 
    INNER JOIN ST_GeomFromText('LINESTRING(0 1, 5 6, 10 10)') AS g(geom)
 ON ST_Intersects(r.rast,g.geom)
 , ST_Clip(r.rast, g.geom, touched =
&gt; true) AS rast_touched
 , ST_Clip(r.rast, g.geom, touched =
&gt; false) AS rast_not_touched;
 
 count_pixels_in_orig | all_touched_pixels | default_clip
----------------------+--------------------+--------------
                 2605 |                 16 |           10
(1 row)
 </pre></div><div class="refsection" id="idm33165"><h2>示例：1波段剪裁（不选择所有相交的像素）</h2><pre class="programlisting">-- Clip the first band of an aerial tile by a 20 meter buffer.
SELECT ST_Clip(rast, 1,
        ST_Buffer(ST_Centroid(ST_Envelope(rast)),20)
    ) from aerials.boston
WHERE rid = 4;
                    </pre><pre class="programlisting">-- Demonstrate effect of crop on final dimensions of raster
-- Note how final extent is clipped to that of the geometry
-- if crop = true
SELECT ST_XMax(ST_Envelope(ST_Clip(rast, 1, clipper, true))) As xmax_w_trim,
    ST_XMax(clipper) As xmax_clipper,
    ST_XMax(ST_Envelope(ST_Clip(rast, 1, clipper, false))) As xmax_wo_trim,
    ST_XMax(ST_Envelope(rast)) As xmax_rast_orig
FROM (SELECT rast, ST_Buffer(ST_Centroid(ST_Envelope(rast)),6) As clipper
    FROM aerials.boston
WHERE rid = 6) As foo;

   xmax_w_trim    |   xmax_clipper   |   xmax_wo_trim   |  xmax_rast_orig
------------------+------------------+------------------+------------------
 230657.436173996 | 230657.436173996 | 230666.436173996 | 230666.436173996
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip01.png"/><div class="caption"><p>裁剪前的完整栅格图块</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip02.png"/><div class="caption"><p>裁剪后</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm33189"><h2>示例：裁剪未裁剪的单波段，并将其他波段不变添加回去</h2><pre class="programlisting">-- Same example as before, but we need to set crop to false to be able to use ST_AddBand
-- because ST_AddBand requires all bands be the same Width and height
SELECT ST_AddBand(ST_Clip(rast, 1,
        ST_Buffer(ST_Centroid(ST_Envelope(rast)),20),false
    ), ARRAY[ST_Band(rast,2),ST_Band(rast,3)] ) from aerials.boston
WHERE rid = 6;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip04.png"/><div class="caption"><p>裁剪前的完整栅格图块</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip05.png"/><div class="caption"><p>剪裁后——超现实</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm33212"><h2>示例：裁剪所有波段</h2><pre class="programlisting">-- Clip all bands of an aerial tile by a 20 meter buffer.
-- Only difference is we don't specify a specific band to clip
-- so all bands are clipped
SELECT ST_Clip(rast,
      ST_Buffer(ST_Centroid(ST_Envelope(rast)), 20),
      false
    ) from aerials.boston
WHERE rid = 4;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip01.png"/><div class="caption"><p>裁剪前的完整栅格图块</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip03.png"/><div class="caption"><p>裁剪后</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm33235"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a> </p></div></div><div class="refentry" id="RT_ST_ColorMap"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ColorMap — 根据源栅格和指定波段创建最多四个 8BUI 波段（灰度、RGB、RGBA）的新栅格。 如果未指定，则假定为波段 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_ColorMap</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, text  <var class="pdparam">colormap=grayscale</var>, text  <var class="pdparam">method=INTERPOLATE</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_ColorMap</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">colormap</var>, text  <var class="pdparam">method=INTERPOLATE</var><code>)</code>;</p></div></div><div class="refsection" id="idm33276"><h2>描述</h2><p>将<code class="varname">colormap</code>应用于<code class="varname"> rast</code> 的 <code class="varname">nband </code>处的波段，从而生成最多由四个 8BUI 波段组成的新栅格。 新栅格中的 8BUI 波段数量由<code class="varname">colormap</code>中定义的颜色分量数量决定。 </p><p>如果未指定 <code class="varname">nband</code>，则假定为波段 1。</p><p><code class="varname">colormap</code> 可以是预定义颜色图的关键字或定义值和颜色分量的一组线。 </p><p>有效的预定义<code class="varname">colormap</code>关键字： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">grayscale</code>或<code class="varname">greyscale</code>的一个 8BUI 波段栅格的灰度。 </p></li><li class="listitem"><p><code class="varname">pseudocolor</code>四 8BUI (RGBA) 波段栅格的伪彩色，颜色从蓝色到绿色再到红色。 </p></li><li class="listitem"><p><code class="varname">fire</code>为四 8BUI (RGBA) 波段栅格，颜色从黑色到红色到浅黄色。 </p></li><li class="listitem"><p><code class="varname">bluered</code> 表示四 8BUI (RGBA) 波段栅格，颜色从蓝色到浅白色再到红色。 </p></li></ul></div><p>用户可以通过 <code class="varname">colormap</code> 参数传递一组条目（每行一个）来指定自定义的颜色映射。每个条目通常包括五个值：像素值以及相应的红色、绿色、蓝色、Alpha 组件（颜色组件的取值范围在 0 到 255 之间）。可以使用百分比值代替像素值，其中 0% 和 100% 分别表示栅格带中找到的最小值和最大值。值可以使用逗号（','）、制表符、冒号（':'）和/或空格分隔。像素值可以设置为 <span class="emphasis"><em>nv</em></span>、<span class="emphasis"><em>null</em></span> 或 <span class="emphasis"><em>nodata</em></span>，表示 NODATA 值。以下是一个示例。 </p><pre class="programlisting">5 0 0 0 255
4 100:50 55 255
1 150,100 150 255
0% 255 255 255 255
nv 0 0 0 0
                    </pre><p><code class="varname">colormap</code> 的语法与 GDAL <a class="link" href="http://www.gdal.org/gdaldem.html#gdaldem_color_relief" target="_top">gdaldem </a>的颜色浮雕模式类似。 </p><p><code class="varname">method</code>的有效关键字： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">INTERPOLATE</code> 使用线性插值来平滑地混合给定像素值之间的颜色 </p></li><li class="listitem"><p><code class="varname">EXACT</code> 仅严格匹配颜色图中找到的像素值。 值与颜色图条目不匹配的像素将被设置为 0 0 0 0 (RGBA) </p></li><li class="listitem"><p><code class="varname">NEAREST </code>使用其值最接近像素值的颜色图条目 </p></li></ul></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="link" href="http://www.colorbrewer2.org" target="_top">ColorBrewer </a>是色彩图的一个很好的参考。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>新栅格的结果波段将没有设置 NODATA 值。 如果需要，请使用 <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> 设置 NODATA 值。 </p></td></tr></table></div><p class="availability">可用性：2.1.0 </p></div><div class="refsection" id="idm33331"><h2>示例</h2><p>这是一个用于练习的表格</p><pre class="programlisting">-- setup test raster table --
DROP TABLE IF EXISTS funky_shapes;
CREATE TABLE funky_shapes(rast raster);

INSERT INTO funky_shapes(rast)
WITH ref AS (
    SELECT ST_MakeEmptyRaster( 200, 200, 0, 200, 1, -1, 0, 0) AS rast
)
SELECT
    ST_Union(rast)
FROM (
    SELECT
        ST_AsRaster(
            ST_Rotate(
                ST_Buffer(
                    ST_GeomFromText('LINESTRING(0 2,50 50,150 150,125 50)'),
                    i*2
                ),
                pi() * i * 0.125, ST_Point(50,50)
            ),
            ref.rast, '8BUI'::text, i * 5
        ) AS rast
    FROM ref
    CROSS JOIN generate_series(1, 10, 3) AS i
) AS shapes;
                    </pre><pre class="programlisting">SELECT
    ST_NumBands(rast) As n_orig,
    ST_NumBands(ST_ColorMap(rast,1, 'greyscale')) As ngrey,
    ST_NumBands(ST_ColorMap(rast,1, 'pseudocolor')) As npseudo,
    ST_NumBands(ST_ColorMap(rast,1, 'fire')) As nfire,
    ST_NumBands(ST_ColorMap(rast,1, 'bluered')) As nbluered,
    ST_NumBands(ST_ColorMap(rast,1, '
100% 255   0   0
 80% 160   0   0
 50% 130   0   0
 30%  30   0   0
 20%  60   0   0
  0%   0   0   0
  nv 255 255 255
    ')) As nred
FROM funky_shapes;
                    </pre><pre class="screen">n_orig | ngrey | npseudo | nfire | nbluered | nred
--------+-------+---------+-------+----------+------
      1 |     1 |       4 |     4 |        4 |    3
                    </pre></div><div class="refsection" id="idm33337"><h2>示例：使用 ST_AsPNG 比较不同颜色图的外观</h2><pre class="programlisting">SELECT
    ST_AsPNG(rast) As orig_png,
    ST_AsPNG(ST_ColorMap(rast,1,'greyscale')) As grey_png,
    ST_AsPNG(ST_ColorMap(rast,1, 'pseudocolor')) As pseudo_png,
    ST_AsPNG(ST_ColorMap(rast,1, 'nfire')) As fire_png,
    ST_AsPNG(ST_ColorMap(rast,1, 'bluered')) As bluered_png,
    ST_AsPNG(ST_ColorMap(rast,1, '
100% 255   0   0
 80% 160   0   0
 50% 130   0   0
 30%  30   0   0
 20%  60   0   0
  0%   0   0   0
  nv 255 255 255
    ')) As red_png
FROM funky_shapes;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_orig.png"/><div class="caption"><p>orig_png</p></div></div></div><p>
                                        </p>
                                    </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_grey.png"/><div class="caption"><p>grey_png</p></div></div></div><p>
                                        </p>
                                    </td><td style="border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_pseudo.png"/><div class="caption"><p>pseudo_png</p></div></div></div><p>
                                        </p>
                                    </td></tr><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_fire.png"/><div class="caption"><p>fire_png</p></div></div></div><p>
                                        </p>
                                    </td><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_bluered.png"/><div class="caption"><p>bluered_png</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_red.png"/><div class="caption"><p>red_png</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm33393"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Grayscale" title="ST_Grayscale">ST_Grayscale</a> <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>, <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a> </p></div></div><div class="refentry" id="RT_ST_Grayscale"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Grayscale — 根据源栅格和代表红色、绿色和蓝色的指定波段创建新的 1-8BUI 波段栅格</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(1) raster <strong class="fsfunc">ST_Grayscale</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">redband=1</var>, integer  <var class="pdparam">greenband=2</var>, integer  <var class="pdparam">blueband=3</var>, text  <var class="pdparam">extenttype=INTERSECTION</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">(2) raster <strong class="fsfunc">ST_Grayscale</strong>(</code>rastbandarg[]  <var class="pdparam">rastbandargset</var>, text  <var class="pdparam">extenttype=INTERSECTION</var><code>)</code>;</p></div></div><div class="refsection" id="idm33438"><h2>描述</h2><p>给定三个输入波段（来自一个或多个栅格），创建一个具有 8BUI 波段的栅格。 任何像素类型不是 8BUI 的输入波段都将使用 <a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a> 进行重分类。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数与<a class="xref" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a>不同，ST_ColorMap带有<code class="varname">grayscale</code>关键字，因为 ST_ColorMap 仅在一个波段上运行，而此函数需要 RGB 的三个波段。 此函数应用以下公式将 RGB 转换为灰度： 0.2989 * RED 0.5870 * GREEN 0.1140 * BLUE </p></td></tr></table></div><p class="availability">可用性：2.5.0 </p></div><div class="refsection" id="idm33447"><h2>示例：格式 1</h2><pre class="programlisting">SET postgis.gdal_enabled_drivers = 'ENABLE_ALL';
SET postgis.enable_outdb_rasters = True;

WITH apple AS (
    SELECT ST_AddBand(
        ST_MakeEmptyRaster(350, 246, 0, 0, 1, -1, 0, 0, 0),
        '/tmp/apple.png'::text,
        NULL::int[]
    ) AS rast
)
SELECT
    ST_AsPNG(rast) AS original_png,
    ST_AsPNG(ST_Grayscale(rast)) AS grayscale_png
FROM apple;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/apple.png"/><div class="caption"><p>original_png</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/apple_st_grayscale.png"/><div class="caption"><p>grayscale_png</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm33470"><h2>示例：格式2</h2><pre class="programlisting">SET postgis.gdal_enabled_drivers = 'ENABLE_ALL';
SET postgis.enable_outdb_rasters = True;

WITH apple AS (
    SELECT ST_AddBand(
        ST_MakeEmptyRaster(350, 246, 0, 0, 1, -1, 0, 0, 0),
        '/tmp/apple.png'::text,
        NULL::int[]
    ) AS rast
)
SELECT
    ST_AsPNG(rast) AS original_png,
    ST_AsPNG(ST_Grayscale(
        ARRAY[
            ROW(rast, 1)::rastbandarg, -- red
            ROW(rast, 2)::rastbandarg, -- green
            ROW(rast, 3)::rastbandarg, -- blue
        ]::rastbandarg[]
    )) AS grayscale_png
FROM apple;
                    </pre></div><div class="refsection" id="idm33473"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>, <a class="xref" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a> </p></div></div><div class="refentry" id="RT_ST_Intersection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Intersection — 返回一个栅格或一组几何像素值对，表示两个栅格的共享部分或栅格矢量化和几何图形的几何交集。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof geomval <strong class="fsfunc">ST_Intersection</strong>(</code>geometry  <var class="pdparam">geom</var>, raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band_num=1</var><code>)</code>;</p><p><code class="funcdef">setof geomval <strong class="fsfunc">ST_Intersection</strong>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">setof geomval <strong class="fsfunc">ST_Intersection</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, geometry  <var class="pdparam">geomin</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Intersection</strong>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Intersection</strong>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, text  <var class="pdparam">returnband</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Intersection</strong>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">band1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">band2</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Intersection</strong>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">band1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">band2</var>, text  <var class="pdparam">returnband</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p></div></div><div class="refsection" id="idm33584"><h2>描述</h2><p>返回一个栅格或一组几何像素值对，表示两个栅格的共享部分或栅格矢量化和几何图形的几何交集。 </p><p>前三个变体返回一组 geomval，在向量空间中工作。 首先将栅格矢量化（使用<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>）为一组 geomval 行，然后使用 <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> (geometry, Geometry) PostGIS 函数将这些行与几何相交。 仅与栅格的无数据值区域相交的几何将返回空几何。 通常通过在 WHERE 子句中正确使用 <a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>将它们从结果中排除。 </p><p>您可以通过用括号将它们括起来并在表达式末尾添加“.geom”或“.val”来访问几何图形和生成的 geomval 集的值部分。 例如 (ST_Intersection(rast, geom)).geom </p><p>其他变体返回光栅，在光栅空间中工作。 他们使用 ST_MapAlgebraExpr 的两个栅格版本来执行交集。 </p><p>生成的栅格范围对应于两个栅格范围的几何交集。 生成的栅格包含“BAND1”、“BAND2”或“BOTH”波段，遵循作为<code class="varname"> returnband </code>参数传递的内容。 任何波段中存在的无数据值区域都会导致结果的每个波段中出现无数据值区域。 换句话说，与无数据值像素相交的任何像素都成为结果中的无数据值像素。 </p><p>由 ST_Intersection 生成的栅格必须为不相交的区域分配 nodata 值。 您可以通过提供一个包含一个或两个 nodata 值的 <code class="varname">nodataval[] </code>数组来定义或替换任何结果频段的 nodata 值，具体取决于您是否请求“BAND1”、“BAND2”或“BOTH”频段。 数组中的第一个值替换第一个带中的无数据值，第二个值替换第二个带中的无数据值。 如果一个输入带没有定义 nodata 值并且没有以数组形式提供，则使用 ST_MinPossibleValue 函数选择一个。 所有接受 nodata 值数组的变体也可以接受单个值，该值将分配给每个请求的带。 </p><p>在所有变体中，如果未指定波段编号，则假定波段 1。 如果您需要栅格和返回栅格的几何图形之间的交集，请参阅 <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要更好地控制结果范围或遇到无数据值时返回的内容，请使用 <a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>的两个栅格版本。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要计算栅格波段与栅格空间中几何图形的交集，请使用 <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>。 ST_Clip 适用于多波段栅格，并且不返回与栅格化几何对应的波段。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Intersection 应与 <a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a> 以及栅格列和/或几何列上的索引结合使用。 </p></td></tr></table></div><p>增强：2.0.0 - 引入了光栅空间中的交集。 在 2.0.0 之前的早期版本中，仅支持在向量空间中执行交集。 </p></div><div class="refsection" id="idm33609"><h2>示例：几何、光栅——产生几何值</h2><pre class="programlisting">SELECT
    foo.rid,
    foo.gid,
    ST_AsText((foo.geomval).geom) As geomwkt,
    (foo.geomval).val
FROM (
    SELECT
        A.rid,
        g.gid,
        ST_Intersection(A.rast, g.geom) As geomval
    FROM dummy_rast AS A
    CROSS JOIN (
        VALUES
            (1, ST_Point(3427928, 5793243.85) ),
            (2, ST_GeomFromText('LINESTRING(3427927.85 5793243.75,3427927.8 5793243.75,3427927.8 5793243.8)')),
            (3, ST_GeomFromText('LINESTRING(1 2, 3 4)'))
    ) As g(gid,geom)
    WHERE A.rid = 2
) As foo;

 rid | gid |      geomwkt                                               | val
-----+-----+---------------------------------------------------------------------------------------------
   2 |   1 | POINT(3427928 5793243.85)                                  | 249
   2 |   1 | POINT(3427928 5793243.85)                                  | 253
   2 |   2 | POINT(3427927.85 5793243.75)                               | 254
   2 |   2 | POINT(3427927.8 5793243.8)                                 | 251
   2 |   2 | POINT(3427927.8 5793243.8)                                 | 253
   2 |   2 | LINESTRING(3427927.8 5793243.75,3427927.8 5793243.8)   | 252
   2 |   2 | MULTILINESTRING((3427927.8 5793243.8,3427927.8 5793243.75),...) | 250
   2 |   3 | GEOMETRYCOLLECTION EMPTY
                    </pre></div><div class="refsection" id="idm33612"><h2>相关信息</h2><p><a class="xref" href="#geomval" title="geomval">geomval</a>, <a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>, <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebra"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebra (callback function version) — 回调函数版本 - 给定一个或多个输入栅格、波段索引和一个用户指定的回调函数，返回单波段栅格。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>rastbandarg[]  <var class="pdparam">rastbandargset</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nband</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=FIRST</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=FIRST</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">nband1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">nband2</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">nband</var>, regprocedure  <var class="pdparam">callbackfunc</var>, float8[]  <var class="pdparam">mask</var>, boolean  <var class="pdparam">weighted</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, raster  <var class="pdparam">customextent=NULL</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm33779"><h2>描述</h2><p>给定一个或多个输入栅格、波段索引和一个用户指定的回调函数，返回单波段栅格。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">rast,rast1,rast2, rastbandargset</code></span></dt><dd><p>评估地图代数过程的栅格。</p><p><code class="varname">rastbandargset </code>允许在许多栅格和/或许多波段上使用地图代数运算。 请参见示例变体 1。 </p></dd><dt><span class="term"><code class="varname">nband, nband1, nband2</code></span></dt><dd><p>要评估的栅格的波段号。 nband 可以是表示波段的整数或整数[]。 对于 the 2 raster/2band 情况，nband1 是 rast1 上的波段，nband2 是 rast2 上的波段。 </p></dd><dt><span class="term"><code class="varname">callbackfunc</code></span></dt><dd><p><code class="varname">callbackfunc</code> 参数必须是 SQL 或 PL/pgSQL 函数的名称和签名，转换为 regprocedure。 PL/pgSQL 函数示例如下： </p><pre class="programlisting">CREATE OR REPLACE FUNCTION sample_callbackfunc(value double precision[][][], position integer[][], VARIADIC userargs text[])
    RETURNS double precision
    AS $$
    BEGIN
        RETURN 0;
    END;
    $$ LANGUAGE 'plpgsql' IMMUTABLE;
                                    </pre><p><code class="varname">Callbackfunc</code> 必须具有三个参数：一个 3 维双精度数组、一个 2 维整数数组和一个可变的 1 维文本数组。 第一个参数<code class="varname">value</code>是所有输入栅格的值集（双精度）。 三个维度（其中索引从 1 开始）是：栅格编号、行 y、列 x。 第二个参数<code class="varname">position</code>是输出栅格和输入栅格的像素位置集。 外部维度（索引从 0 开始）是栅格#。 外部维度索引 0 处的位置是输出栅格的像素位置。 对于每个外部维度，内部维度中有两个元素用于 X 和 Y。第三个参数 <code class="varname">userargs </code>用于传递任何用户指定的参数。 </p><p>将<span class="type"> regprocedure </span>参数传递给 SQL 函数需要传递完整的函数签名，然后转换为<span class="type"> regprocedure </span>类型。 要将上述示例 PL/pgSQL 函数作为参数传递，参数的 SQL 为： </p><pre class="programlisting">'sample_callbackfunc(double precision[], integer[], text[])'::regprocedure
                                    </pre><p>请注意，参数包含函数名称、函数参数类型、名称和参数类型周围的引号以及对 <span class="type">regprocedure </span>的强制转换。 </p></dd><dt><span class="term"><code class="varname">mask</code></span></dt><dd><p>n 维数字数组（矩阵），用于过滤传递给映射代数回调函数的单元格。 0 表示相邻像元值应被视为无数据，1 表示值应被视为数据。 如果权重设置为 true，则这些值将用作乘数，以乘以邻域位置中该值的像素值。 </p></dd><dt><span class="term"><code class="varname">weighted</code></span></dt><dd><p>布尔值（true/false）表示掩码值是否应该加权（乘以原始值）（仅适用于采用掩码的原型）。 </p></dd><dt><span class="term"><code class="varname">pixeltype</code></span></dt><dd><p>如果传入<code class="varname">像素类型</code>，则新栅格的一个波段将属于该像素类型。 如果将像素类型传递为 NULL 或省略，则新栅格波段将具有与第一个栅格的指定波段（对于范围类型：INTERSECTION、UNION、FIRST、CUSTOM）或相应栅格的指定波段（对于范围）相同的像素类型。 类型：第二个、最后一个）。 如果有疑问，请始终指定<code class="varname">像素类型</code>。 </p><p>输出栅格的结果像素类型必须是<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中列出的类型，或者省略或设置为 NULL。 </p></dd><dt><span class="term"><code class="varname">extenttype</code></span></dt><dd><p>可能的值为 INTERSECTION（默认）、UNION、FIRST（一个栅格变体的默认值）、SECOND、LAST、CUSTOM。 </p></dd><dt><span class="term"><code class="varname">customextent</code></span></dt><dd><p>如果<code class="varname">extenttype</code>是CUSTOM，则必须为<code class="varname">customextent</code>提供栅格。 请参见变体 1 的示例 4。 </p></dd><dt><span class="term"><code class="varname">distancex</code></span></dt><dd><p>x 方向上距参考单元格的距离（以像素为单位）。 因此，结果矩阵的宽度将为 <code class="code">2*distancex + 1</code>。如果未指定，则仅考虑参考单元（0 的邻域）。 </p></dd><dt><span class="term"><code class="varname">distancey</code></span></dt><dd><p>y 方向上距参考单元的距离（以像素为单位）。 结果矩阵的高度将为 <code class="code">2*distancey + 1</code> 。如果未指定，则仅考虑参考单元格（0 的邻域）。 </p></dd><dt><span class="term"><code class="varname">userargs</code></span></dt><dd><p><code class="varname">callbackfunc </code>的第三个参数是一个<span class="type">可变文本</span>数组。 所有尾随文本参数都传递到指定的<code class="varname">callbackfunc</code>，并包含在 <code class="varname">userargs</code> 参数中。 </p></dd></dl></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关 VARIADIC 关键字的更多信息，请参阅 PostgreSQL 文档和<a class="link" href="http://www.postgresql.org/docs/current/static/xfunc-sql.html" target="_top">查询语言 (SQL) 函数</a>的“具有可变参数数量的 SQL 函数”部分。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>无论您是否选择将任何参数传递给回调函数进行处理， <span class="type">text[] </span>参数在<code class="varname">callbackfunc</code>都是必需的。 </p></td></tr></table></div><p>变体 1 接受<code class="varname"> rastbandarg</code> 数组，允许在许多栅格和/或许多波段上使用地图代数运算。 请参见示例变体 1。 </p><p>变体 2 和 3 对一个栅格的一个或多个波段进行操作。 请参阅示例变体 2 和 3。 </p><p>变体 4 对两个栅格进行操作，每个栅格一个波段。 请参见示例变体 4。 </p><p class="availability">可用性：2.2.0：能够添加遮罩</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm33878"><h2>示例：格式 1</h2><p>一个栅格，一个波段</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        ARRAY[ROW(rast, 1)]::rastbandarg[],
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
    ) AS rast
FROM foo
                    </pre><p>一个栅格，多个波段</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        ARRAY[ROW(rast, 3), ROW(rast, 1), ROW(rast, 3), ROW(rast, 2)]::rastbandarg[],
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
    ) AS rast
FROM foo
                    </pre><p>多个栅格，多个波段</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast UNION ALL
    SELECT 2 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 1, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0), 2, '8BUI', 20, 0), 3, '32BUI', 300, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        ARRAY[ROW(t1.rast, 3), ROW(t2.rast, 1), ROW(t2.rast, 3), ROW(t1.rast, 2)]::rastbandarg[],
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
    ) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 1
    AND t2.rid = 2
                    </pre><p>邻域覆盖图块的完整示例。 此查询仅适用于 PostgreSQL 9.1 或更高版本。</p><pre class="programlisting">WITH foo AS (
    SELECT 0 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0) AS rast UNION ALL
    SELECT 1, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, 0, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0) AS rast UNION ALL
    SELECT 2, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, 0, 1, -1, 0, 0, 0), 1, '16BUI', 3, 0) AS rast UNION ALL

    SELECT 3, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -2, 1, -1, 0, 0, 0), 1, '16BUI', 10, 0) AS rast UNION ALL
    SELECT 4, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -2, 1, -1, 0, 0, 0), 1, '16BUI', 20, 0) AS rast UNION ALL
    SELECT 5, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -2, 1, -1, 0, 0, 0), 1, '16BUI', 30, 0) AS rast UNION ALL

    SELECT 6, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -4, 1, -1, 0, 0, 0), 1, '16BUI', 100, 0) AS rast UNION ALL
    SELECT 7, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -4, 1, -1, 0, 0, 0), 1, '16BUI', 200, 0) AS rast UNION ALL
    SELECT 8, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -4, 1, -1, 0, 0, 0), 1, '16BUI', 300, 0) AS rast
)
SELECT
    t1.rid,
    ST_MapAlgebra(
        ARRAY[ROW(ST_Union(t2.rast), 1)]::rastbandarg[],
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure,
        '32BUI',
        'CUSTOM', t1.rast,
        1, 1
    ) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 4
    AND t2.rid BETWEEN 0 AND 8
    AND ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rid, t1.rast
                    </pre><p>示例类似于前一个具有邻域覆盖范围的图块，但适用于 PostgreSQL 9.0。</p><pre class="programlisting">WITH src AS (
    SELECT 0 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0) AS rast UNION ALL
    SELECT 1, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, 0, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0) AS rast UNION ALL
    SELECT 2, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, 0, 1, -1, 0, 0, 0), 1, '16BUI', 3, 0) AS rast UNION ALL

    SELECT 3, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -2, 1, -1, 0, 0, 0), 1, '16BUI', 10, 0) AS rast UNION ALL
    SELECT 4, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -2, 1, -1, 0, 0, 0), 1, '16BUI', 20, 0) AS rast UNION ALL
    SELECT 5, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -2, 1, -1, 0, 0, 0), 1, '16BUI', 30, 0) AS rast UNION ALL

    SELECT 6, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -4, 1, -1, 0, 0, 0), 1, '16BUI', 100, 0) AS rast UNION ALL
    SELECT 7, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -4, 1, -1, 0, 0, 0), 1, '16BUI', 200, 0) AS rast UNION ALL
    SELECT 8, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -4, 1, -1, 0, 0, 0), 1, '16BUI', 300, 0) AS rast
)
WITH foo AS (
    SELECT
        t1.rid,
        ST_Union(t2.rast) AS rast
    FROM src t1
    JOIN src t2
        ON ST_Intersects(t1.rast, t2.rast)
        AND t2.rid BETWEEN 0 AND 8
    WHERE t1.rid = 4
    GROUP BY t1.rid
), bar AS (
    SELECT
        t1.rid,
        ST_MapAlgebra(
            ARRAY[ROW(t2.rast, 1)]::rastbandarg[],
            'raster_nmapalgebra_test(double precision[], int[], text[])'::regprocedure,
            '32BUI',
            'CUSTOM', t1.rast,
            1, 1
        ) AS rast
    FROM src t1
    JOIN foo t2
        ON t1.rid = t2.rid
)
SELECT
    rid,
    (ST_Metadata(rast)),
    (ST_BandMetadata(rast, 1)),
    ST_Value(rast, 1, 1, 1)
FROM bar;
                    </pre></div><div class="refsection" id="idm33890"><h2>示例：变体 2 和 3</h2><p>一个栅格，多个波段</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        rast, ARRAY[3, 1, 3, 2]::integer[],
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
    ) AS rast
FROM foo
                    </pre><p>一个栅格，一个波段</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        rast, 2,
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
    ) AS rast
FROM foo
                    </pre></div><div class="refsection" id="idm33896"><h2>示例：变体4</h2><p>两个栅格，两个波段</p><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast UNION ALL
    SELECT 2 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 1, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0), 2, '8BUI', 20, 0), 3, '32BUI', 300, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        t1.rast, 2,
        t2.rast, 1,
        'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
    ) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 1
    AND t2.rid = 2
                    </pre></div><div class="refsection" id="idm33900"><h2>示例：使用掩模</h2><pre class="programlisting">WITH foo AS (SELECT
   ST_SetBandNoDataValue(
ST_SetValue(ST_SetValue(ST_AsRaster(
        ST_Buffer(
            ST_GeomFromText('LINESTRING(50 50,100 90,100 50)'), 5,'join=bevel'),
            200,200,ARRAY['8BUI'], ARRAY[100], ARRAY[0]), ST_Buffer('POINT(70 70)'::geometry,10,'quad_segs=1') ,50),
  'LINESTRING(20 20, 100 100, 150 98)'::geometry,1),0)  AS rast )
SELECT 'original' AS title, rast
FROM foo
UNION ALL
SELECT 'no mask mean value' AS title, ST_MapAlgebra(rast,1,'ST_mean4ma(double precision[], int[], text[])'::regprocedure) AS rast
FROM foo
UNION ALL
SELECT 'mask only consider neighbors, exclude center' AS title, ST_MapAlgebra(rast,1,'ST_mean4ma(double precision[], int[], text[])'::regprocedure,
    '{{1,1,1}, {1,0,1}, {1,1,1}}'::double precision[], false) As rast
FROM foo

UNION ALL
SELECT 'mask weighted only consider neighbors, exclude center multi other pixel values by 2' AS title, ST_MapAlgebra(rast,1,'ST_mean4ma(double precision[], int[], text[])'::regprocedure,
    '{{2,2,2}, {2,0,2}, {2,2,2}}'::double precision[], true) As rast
FROM foo;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask01.png"/><div class="caption"><p>原始的</p></div></div></div><p>
                                        </p>
                                    </td><td style="border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask02.png"/><div class="caption"><p>无掩模均值（与遮罩矩阵中全为1相同）</p></div></div></div><p>
                                        </p>
                                    </td></tr><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask03.png"/><div class="caption"><p>掩模 只考虑邻居，排除中心</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask04.png"/><div class="caption"><p>掩模加权仅考虑相邻像素，排除中心像素，并将其他像素值乘以2</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm33940"><h2>相关信息</h2><p><a class="xref" href="#rastbandarg" title="rastbandarg">rastbandarg</a>, <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra (expression version)">ST_MapAlgebra (expression version)</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebra_expr"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebra (expression version) — 表达式版本 - 在给定一两个输入栅格、波段索引和一个或多个用户指定的 SQL 表达式的情况下，返回单波段栅格。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">nband1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">nband2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebra</strong>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm34045"><h2>描述</h2><p>表达式版本 - 在给定一两个输入栅格、波段索引和一个或多个用户指定的 SQL 表达式的情况下，返回单波段栅格。 </p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm34049"><h2>描述：变体 1 和 2（一个栅格）</h2><p>通过应用由输入栅格 (<code class="varname">rast</code>) 上的<code class="varname">expression</code>定义的有效 PostgreSQL 代数运算来创建新的单波段栅格。 如果未提供 <code class="varname">nband</code>，则假定为波段 1。 新栅格将具有与原始栅格相同的地理参考、宽度和高度，但只有一个波段。 </p><p>如果传入<code class="varname">像素类型</code>，则新栅格将具有该像素类型的波段。 如果将像素类型传递为 NULL，则新的栅格带将具有与输入<code class="varname">栅格</code>带相同的像素类型。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许<code class="varname">expression</code>的关键字</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">[rast]</code> - 感兴趣像素的像素值</p></li><li class="listitem"><p><code class="varname">[rast.val]</code>- 感兴趣像素的像素值</p></li><li class="listitem"><p><code class="varname">[rast.x]</code> - 感兴趣像素的基于 1 的像素列</p></li><li class="listitem"><p><code class="varname">[rast.y]</code> - 感兴趣像素的从 1 开始的像素行</p></li></ol></div></li></ul></div></div><div class="refsection" id="idm34075"><h2>描述：变体 3 和 4（两个栅格）</h2><p>通过对两个输入栅格波段<code class="varname"> rast1</code>， (<code class="varname">rast2</code>) 上的<code class="varname">expression</code>定义的两个波段应用有效的 PostgreSQL 代数运算，创建一个新的单波段栅格。 如果没有<code class="varname"> band1</code>，则指定<code class="varname"> band2</code>，则假定为 band 1。 生成的栅格将在第一个栅格定义的网格上对齐（比例、倾斜和像素角）。 生成的栅格将具有由<code class="varname">extenttype </code>参数定义的范围。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">expression</code></span></dt><dd><p>涉及两个栅格的 PostgreSQL 代数表达式和 PostgreSQL 定义的函数/运算符，用于定义像素相交时的像素值。 例如 (([rast1] [rast2])/2.0)::integer </p></dd><dt><span class="term"><code class="varname">pixeltype</code></span></dt><dd><p>输出栅格的结果像素类型。 必须是<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中列出的一项，可省略或设置为 NULL。 如果未传入或设置为 NULL，将默认为第一个栅格的像素类型。 </p></dd><dt><span class="term"><code class="varname">extenttype</code></span></dt><dd><p>控制生成的栅格的范围 </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">INTERSECTION</code> - 新栅格的范围是两个栅格的交集。 这是默认设置。 </p></li><li class="listitem"><p><code class="varname">UNION</code> - 新栅格的范围是两个栅格的并集。 </p></li><li class="listitem"><p><code class="varname">FIRST</code> - 新栅格的范围与第一个栅格的范围相同。 </p></li><li class="listitem"><p><code class="varname">SECOND</code> - 新栅格的范围与第二个栅格的范围相同。 </p></li></ol></div></dd><dt><span class="term"><code class="varname">nodata1expr</code></span></dt><dd><p>仅涉及<code class="varname"> rast2 </code>的代数表达式或定义当 <code class="varname">rast1</code> 的像素为无数据值并且空间对应的 rast2 像素具有值时返回的内容的常量。 </p></dd><dt><span class="term"><code class="varname">nodata2expr</code></span></dt><dd><p>仅涉及 <code class="varname">rast1 </code>常量的代数表达式，该常量定义当 <code class="varname">rast2 </code>的像素为无数据值且空间对应的 rast1 像素具有值时返回的内容。 </p></dd><dt><span class="term"><code class="varname">nodatanodataval</code></span></dt><dd><p>当空间对应的 rast1 和 rast2 像素均为无数据值时要返回的数值常量。 </p></dd></dl></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">expression</code>、<code class="varname">nodata1expr</code> 和 <code class="varname">nodata2expr</code> 中允许使用的关键字</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">[rast1]</code> - <code class="varname">rast1 </code>中感兴趣的像素的像素值</p></li><li class="listitem"><p><code class="varname">[rast1.val] </code>-<code class="varname"> rast1 </code>中感兴趣像素的像素值</p></li><li class="listitem"><p><code class="varname">[rast1.x]</code> - 来自<code class="varname"> rast1 </code>的感兴趣像素的基于 1 的像素列</p></li><li class="listitem"><p><code class="varname">[rast1.y] </code>- 来自 <code class="varname">rast1</code> 的感兴趣像素的基于 1 的像素行</p></li><li class="listitem"><p><code class="varname">[rast2] </code>-<code class="varname"> rast2</code> 中感兴趣像素的像素值</p></li><li class="listitem"><p><code class="varname">[rast2.val] </code>-<code class="varname"> rast2</code> 中感兴趣像素的像素值</p></li><li class="listitem"><p><code class="varname">[rast2.x] </code>- 来自 <code class="varname">rast2 </code>的感兴趣像素的基于 1 的像素列</p></li><li class="listitem"><p><code class="varname">[rast2.y] </code>- 来自<code class="varname"> rast2 </code>的感兴趣像素的基于 1 的像素行</p></li></ol></div></li></ul></div></div><div class="refsection" id="idm34172"><h2>示例：变体1和2</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_AddBand(ST_MakeEmptyRaster(10, 10, 0, 0, 1, 1, 0, 0, 0), '32BF'::text, 1, -1) AS rast
)
SELECT
    ST_MapAlgebra(rast, 1, NULL, 'ceil([rast]*[rast.x]/[rast.y]+[rast.val])')
FROM foo;
                    </pre></div><div class="refsection" id="idm34175"><h2>示例：变体3和4</h2><pre class="programlisting">WITH foo AS (
    SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI'::text, 100, 0) AS rast UNION ALL
    SELECT 2 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 1, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0), 2, '8BUI', 20, 0), 3, '32BUI'::text, 300, 0) AS rast
)
SELECT
    ST_MapAlgebra(
        t1.rast, 2,
        t2.rast, 1,
        '([rast2] + [rast1.val]) / 2'
    ) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 1
    AND t2.rid = 2;
                    </pre></div><div class="refsection" id="idm34178"><h2>相关信息</h2><p><a class="xref" href="#rastbandarg" title="rastbandarg">rastbandarg</a>, <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebraExpr"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraExpr — 1 栅格波段版本：通过对输入栅格波段和提供的像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraExpr</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraExpr</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm34223"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> 自 2.1.0 起已弃用。 使用 <a class="xref" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra (expression version)">ST_MapAlgebra (expression version)</a>（表达式版本）代替。 </p></td></tr></table></div><p>通过应用由输入栅格 (<code class="varname">rast</code>) 上的<code class="varname">expression</code>的有效 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定<code class="varname">波段</code>，则假定为波段 1。 新栅格将具有与原始栅格相同的地理参考、宽度和高度，但只有一个波段。 </p><p>如果传入<code class="varname">像素类型</code>，则新栅格将具有该像素类型的波段。 如果将像素类型传递为 NULL，则新的栅格带将具有与输入<code class="varname">栅格</code>带相同的像素类型。 </p><p>在表达式中，您可以使用术语<code class="varname"> [rast] </code>来引用原始波段的像素值，<code class="varname">[rast.x] </code>来引用基于 1 的像素列索引，<code class="varname">[rast.y] </code>来引用基于 1 的像素列索引。 像素行索引。 </p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm34241"><h2>示例</h2><p>根据原始栅格创建一个新的 1 波段栅格，该栅格是原始栅格波段的模 2 的函数。</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN map_rast raster;
UPDATE dummy_rast SET map_rast = ST_MapAlgebraExpr(rast,NULL,'mod([rast]::numeric,2)') WHERE rid = 2;

SELECT
    ST_Value(rast,1,i,j) As origval,
    ST_Value(map_rast, 1, i, j) As mapval
FROM dummy_rast
CROSS JOIN generate_series(1, 3) AS i
CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     253 |      1
     254 |      0
     253 |      1
     253 |      1
     254 |      0
     254 |      0
     250 |      0
     254 |      0
     254 |      0
                    </pre><p>从我们重新分类的原始栅格中创建一个新的像素类型 2BUI 的 1 波段栅格，并将 nodata 值设置为 0。</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN map_rast2 raster;
UPDATE dummy_rast SET
    map_rast2 = ST_MapAlgebraExpr(rast,'2BUI'::text,'CASE WHEN [rast] BETWEEN 100 and 250 THEN 1 WHEN [rast] = 252 THEN 2 WHEN [rast] BETWEEN 253 and 254 THEN 3 ELSE 0 END'::text, '0')
WHERE rid = 2;

SELECT DISTINCT
    ST_Value(rast,1,i,j) As origval,
    ST_Value(map_rast2, 1, i, j) As mapval
FROM dummy_rast
CROSS JOIN generate_series(1, 5) AS i
CROSS JOIN generate_series(1,5) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     249 |      1
     250 |      1
     251 |
     252 |      2
     253 |      3
     254 |      3

SELECT
    ST_BandPixelType(map_rast2) As b1pixtyp
FROM dummy_rast
WHERE rid = 2;

 b1pixtyp
----------
 2BUI
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr01.png"/><div class="caption"><p>原始（rast_view 列）</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr02.png"/><div class="caption"><p>rast_view_ma</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div><p>从原始 3 波段栅格创建一个与像素类型相同的新 3 波段栅格，其中第一个波段由地图代数更改，其余 2 个波段保持不变。</p><pre class="programlisting">SELECT
    ST_AddBand(
        ST_AddBand(
            ST_AddBand(
                ST_MakeEmptyRaster(rast_view),
                ST_MapAlgebraExpr(rast_view,1,NULL,'tan([rast])*[rast]')
            ),
            ST_Band(rast_view,2)
        ),
        ST_Band(rast_view, 3)
    )  As rast_view_ma
FROM wind
WHERE rid=167;
                    </pre></div><div class="refsection" id="idm34269"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>, <a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebraExpr2"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraExpr — 2 栅格波段版本：通过对提供的两个输入栅格波段和像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段编号，则假定每个栅格的波段 1。 生成的栅格将在第一个栅格定义的网格上对齐（比例、倾斜和像素角），并具有由“extenttype”参数定义的范围。 “extenttype”的值可以是：INTERSECTION、UNION、FIRST、SECOND。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraExpr</strong>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=same_as_rast1_band</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraExpr</strong>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">band1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">band2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=same_as_rast1_band</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm34343"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> 自 2.1.0 起已弃用。 使用 <a class="xref" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra (expression version)">ST_MapAlgebra (expression version)</a>（表达式版本）代替。 </p></td></tr></table></div><p>通过对两个输入栅格波段<code class="varname"> rast1</code>， (<code class="varname">rast2</code>) 上的<code class="varname">expression</code>定义的两个波段应用有效的 PostgreSQL 代数运算，创建一个新的单波段栅格。 如果没有<code class="varname"> band1</code>，则指定<code class="varname"> band2</code>，则假定为 band 1。 生成的栅格将在第一个栅格定义的网格上对齐（比例、倾斜和像素角）。 生成的栅格将具有由<code class="varname">extenttype </code>参数定义的范围。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">expression</code></span></dt><dd><p>涉及两个栅格的 PostgreSQL 代数表达式和 PostgreSQL 定义的函数/运算符，用于定义像素相交时的像素值。 例如 (([rast1] [rast2])/2.0)::integer </p></dd><dt><span class="term"><code class="varname">pixeltype</code></span></dt><dd><p>输出栅格的结果像素类型。 必须是<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中列出的一项，可省略或设置为 NULL。 如果未传入或设置为 NULL，将默认为第一个栅格的像素类型。 </p></dd><dt><span class="term"><code class="varname">extenttype</code></span></dt><dd><p>控制生成的栅格的范围</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">INTERSECTION</code> - 新栅格的范围是两个栅格的交集。 这是默认设置。 </p></li><li class="listitem"><p><code class="varname">UNION</code> - 新栅格的范围是两个栅格的并集。 </p></li><li class="listitem"><p><code class="varname">FIRST</code> - 新栅格的范围与第一个栅格的范围相同。 </p></li><li class="listitem"><p><code class="varname">SECOND</code> - 新栅格的范围与第二个栅格的范围相同。 </p></li></ol></div></dd><dt><span class="term"><code class="varname">nodata1expr</code></span></dt><dd><p>仅涉及<code class="varname"> rast2 </code>的代数表达式或定义当 <code class="varname">rast1</code> 的像素为无数据值并且空间对应的 rast2 像素具有值时返回的内容的常量。 </p></dd><dt><span class="term"><code class="varname">nodata2expr</code></span></dt><dd><p>仅涉及 <code class="varname">rast1 </code>常量的代数表达式，该常量定义当 <code class="varname">rast2 </code>的像素为无数据值且空间对应的 rast1 像素具有值时返回的内容。 </p></dd><dt><span class="term"><code class="varname">nodatanodataval</code></span></dt><dd><p>当空间对应的 rast1 和 rast2 像素均为无数据值时要返回的数值常量。 </p></dd></dl></div><p>如果传入<code class="varname">pixeltype</code>，则新栅格将具有该像素类型的波段。 如果将像素类型传递为 NULL 或未指定像素类型，则新的栅格波段将具有与输入 <code class="varname">rast1 </code>波段相同的像素类型。 </p><p>使用术语 <code class="varname">[rast1.val]</code> <code class="varname"> [rast2.val]</code> 指代原始栅格波段的像素值，使用<code class="varname"> [rast1.x]</code>、<code class="varname">[rast1.y] </code>等指代像素的列/行位置。 </p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm34414"><h2>示例：2 条波段的交集和并集</h2><p>根据原始栅格创建一个新的 1 波段栅格，该栅格是原始栅格波段的模 2 的函数。</p><pre class="programlisting">--Create a cool set of rasters --
DROP TABLE IF EXISTS fun_shapes;
CREATE TABLE fun_shapes(rid serial PRIMARY KEY, fun_name text, rast raster);

-- Insert some cool shapes around Boston in Massachusetts state plane meters --
INSERT INTO fun_shapes(fun_name, rast)
VALUES ('ref', ST_AsRaster(ST_MakeEnvelope(235229, 899970, 237229, 901930,26986),200,200,'8BUI',0,0));

INSERT INTO fun_shapes(fun_name,rast)
WITH ref(rast) AS (SELECT rast FROM fun_shapes WHERE fun_name = 'ref' )
SELECT 'area' AS fun_name, ST_AsRaster(ST_Buffer(ST_SetSRID(ST_Point(236229, 900930),26986), 1000),
            ref.rast,'8BUI', 10, 0) As rast
FROM ref
UNION ALL
SELECT 'rand bubbles',
            ST_AsRaster(
            (SELECT ST_Collect(geom)
    FROM (SELECT ST_Buffer(ST_SetSRID(ST_Point(236229 + i*random()*100, 900930 + j*random()*100),26986), random()*20) As geom
            FROM generate_series(1,10) As i, generate_series(1,10) As j
            ) As foo ), ref.rast,'8BUI', 200, 0)
FROM ref;

--map them -
SELECT  ST_MapAlgebraExpr(
        area.rast, bub.rast, '[rast2.val]', '8BUI', 'INTERSECTION', '[rast2.val]', '[rast1.val]') As interrast,
        ST_MapAlgebraExpr(
            area.rast, bub.rast, '[rast2.val]', '8BUI', 'UNION', '[rast2.val]', '[rast1.val]') As unionrast
FROM
  (SELECT rast FROM fun_shapes WHERE
 fun_name = 'area') As area
CROSS JOIN  (SELECT rast
FROM fun_shapes WHERE
 fun_name = 'rand bubbles') As bub
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_01.png"/><div class="caption"><p>交集代数</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_02.png"/><div class="caption"><p>地图代数并集</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm34438"><h2>示例：将栅格作为单独的波段覆盖在画布上</h2><pre class="programlisting">-- we use ST_AsPNG to render the image so all single band ones look grey --
WITH mygeoms
    AS ( SELECT 2 As bnum, ST_Buffer(ST_Point(1,5),10) As geom
            UNION ALL
            SELECT 3 AS bnum,
                ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'), 10,'join=bevel') As geom
            UNION ALL
            SELECT 1 As bnum,
                ST_Buffer(ST_GeomFromText('LINESTRING(60 50,150 150,150 50)'), 5,'join=bevel') As geom
            ),
   -- define our canvas to be 1 to 1 pixel to geometry
   canvas
    AS (SELECT ST_AddBand(ST_MakeEmptyRaster(200,
        200,
        ST_XMin(e)::integer, ST_YMax(e)::integer, 1, -1, 0, 0) , '8BUI'::text,0) As rast
        FROM (SELECT ST_Extent(geom) As e,
                    Max(ST_SRID(geom)) As srid
                    from mygeoms
                    ) As foo
            ),
   rbands AS (SELECT ARRAY(SELECT ST_MapAlgebraExpr(canvas.rast, ST_AsRaster(m.geom, canvas.rast, '8BUI', 100),
                 '[rast2.val]', '8BUI', 'FIRST', '[rast2.val]', '[rast1.val]') As rast
                FROM mygeoms AS m CROSS JOIN canvas
                ORDER BY m.bnum) As rasts
                )
          SELECT rasts[1] As rast1 , rasts[2] As rast2, rasts[3] As rast3, ST_AddBand(
                    ST_AddBand(rasts[1],rasts[2]), rasts[3]) As final_rast
            FROM rbands;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_04.png"/><div class="caption"><p>rast1</p></div></div></div><p>
                                        </p>
                                    </td><td style="border-bottom: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_05.png"/><div class="caption"><p>rast2</p></div></div></div><p>
                                        </p>
                                    </td></tr><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_06.png"/><div class="caption"><p>rast3</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_07.png"/><div class="caption"><p>final_rast</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm34478"><h2>示例：将选定地块的 2 米边界叠加在航空图像上</h2><pre class="programlisting">-- Create new 3 band raster composed of first 2 clipped bands, and overlay of 3rd band with our geometry
-- This query took 3.6 seconds on PostGIS windows 64-bit install
WITH pr AS
-- Note the order of operation: we clip all the rasters to dimensions of our region
(SELECT ST_Clip(rast,ST_Expand(geom,50) ) As rast, g.geom
    FROM aerials.o_2_boston AS r INNER JOIN
-- union our parcels of interest so they form a single geometry we can later intersect with
        (SELECT ST_Union(ST_Transform(geom,26986)) AS geom
          FROM landparcels WHERE pid IN('0303890000', '0303900000')) As g
        ON ST_Intersects(rast::geometry, ST_Expand(g.geom,50))
),
-- we then union the raster shards together
-- ST_Union on raster is kinda of slow but much faster the smaller you can get the rasters
-- therefore we want to clip first and then union
prunion AS
(SELECT ST_AddBand(NULL, ARRAY[ST_Union(rast,1),ST_Union(rast,2),ST_Union(rast,3)] ) As clipped,geom
FROM pr
GROUP BY geom)
-- return our final raster which is the unioned shard with
-- with the overlay of our parcel boundaries
-- add first 2 bands, then mapalgebra of 3rd band + geometry
SELECT ST_AddBand(ST_Band(clipped,ARRAY[1,2])
    , ST_MapAlgebraExpr(ST_Band(clipped,3), ST_AsRaster(ST_Buffer(ST_Boundary(geom),2),clipped, '8BUI',250),
     '[rast2.val]', '8BUI', 'FIRST', '[rast2.val]', '[rast1.val]') ) As rast
FROM prunion;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_08.png"/><div class="caption"><p>蓝线是选定地块的边界</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm34493"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>, <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a>, <a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebraFct"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraFct — 1 波段版本 - 通过在输入栅格波段和提供的像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p></div></div><div class="refsection" id="idm34620"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> 自 2.1.0 起已弃用。 使用<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）代替。 </p></td></tr></table></div><p>创建一个新的单波段栅格，该栅格是通过在输入栅格 (<code class="varname">rast</code>) 上应用<code class="varname"> oneerasteruserfunc</code> 指定的有效 PostgreSQL 函数而形成的。 如果未指定<code class="varname">波段</code>，则假定为波段 1。 新栅格将具有与原始栅格相同的地理参考、宽度和高度，但只有一个波段。</p><p>如果传入<code class="varname">像素类型</code>，则新栅格将具有该像素类型的波段。 如果将像素类型传递为 NULL，则新的栅格带将具有与输入<code class="varname">栅格</code>带相同的像素类型。</p><p><code class="varname">oneerasteruserfunc</code> 参数必须是 SQL 或 PL/pgSQL 函数的名称和签名，转换为 regprocedure。 一个非常简单且无用的 PL/pgSQL 函数示例是： </p><pre class="programlisting">CREATE OR REPLACE FUNCTION simple_function(pixel FLOAT, pos INTEGER[], VARIADIC args TEXT[])
    RETURNS FLOAT
    AS $$ BEGIN
        RETURN 0.0;
    END; $$
    LANGUAGE 'plpgsql' IMMUTABLE;</pre><p><code class="varname">userfunction</code>可以接受两个或三个参数：一个浮点值、一个可选的整数数组和一个可变文本数组。 第一个参数是单个栅格像元的值（无论栅格数据类型如何）。 第二个参数是当前处理单元的位置，格式为“{x,y}”。 第三个参数指示 <a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> 的所有剩余参数应传递给<code class="varname">userfunction</code>。 </p><p>将 <span class="type">regprodedure </span>参数传递给 SQL 函数需要传递完整的函数签名，然后转换为 <span class="type">regprocedure</span> 类型。 要将上述示例 PL/pgSQL 函数作为参数传递，参数的 SQL 为： </p><pre class="programlisting">'simple_function(float,integer[],text[])'::regprocedure</pre><p>请注意，参数包含函数名称、函数参数类型、名称和参数类型周围的引号以及对 <span class="type">regprocedure </span>的强制转换。 </p><p><code class="varname">userfunction</code>的第三个参数是一个<span class="type">可变文本</span>数组。 任何<a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> 调用的所有尾随文本参数都会传递到指定的<code class="varname">userfunction</code>，并包含在<code class="varname"> args </code>参数中。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关 VARIADIC 关键字的更多信息，请参阅 PostgreSQL 文档和<a class="link" href="http://www.postgresql.org/docs/current/static/xfunc-sql.html" target="_top">查询语言 (SQL) 函数</a>的“具有可变参数数量的 SQL 函数”部分。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>无论您是否选择将任何参数传递给userfunction进行处理， <span class="type">text[] </span>参数在<code class="varname">userfunction</code>都是必需的。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm34660"><h2>示例</h2><p>根据原始栅格创建一个新的 1 波段栅格，该栅格是原始栅格波段的模 2 的函数。</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN map_rast raster;
CREATE FUNCTION mod_fct(pixel float, pos integer[], variadic args text[])
RETURNS float
AS $$
BEGIN
    RETURN pixel::integer % 2;
END;
$$
LANGUAGE 'plpgsql' IMMUTABLE;

UPDATE dummy_rast SET map_rast = ST_MapAlgebraFct(rast,NULL,'mod_fct(float,integer[],text[])'::regprocedure) WHERE rid = 2;

SELECT ST_Value(rast,1,i,j) As origval, ST_Value(map_rast, 1, i, j) As mapval
FROM dummy_rast CROSS JOIN generate_series(1, 3) AS i CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     253 |      1
     254 |      0
     253 |      1
     253 |      1
     254 |      0
     254 |      0
     250 |      0
     254 |      0
     254 |      0
                    </pre><p>从我们的原始栅格中创建一个新的像素类型 2BUI 的 1 波段栅格，并将其重新分类，并将 nodata 值设置为传递给用户函数的参数 (0)。</p><pre class="programlisting">
ALTER TABLE dummy_rast ADD COLUMN map_rast2 raster;
CREATE FUNCTION classify_fct(pixel float, pos integer[], variadic args text[])
RETURNS float
AS
$$
DECLARE
    nodata float := 0;
BEGIN
    IF NOT args[1] IS NULL THEN
        nodata := args[1];
    END IF;
    IF pixel &lt; 251 THEN
        RETURN 1;
    ELSIF pixel = 252 THEN
        RETURN 2;
    ELSIF pixel 
&gt; 252 THEN
        RETURN 3;
    ELSE
        RETURN nodata;
    END IF;
END;
$$
LANGUAGE 'plpgsql';
UPDATE dummy_rast SET map_rast2 = ST_MapAlgebraFct(rast,'2BUI','classify_fct(float,integer[],text[])'::regprocedure, '0') WHERE rid = 2;

SELECT DISTINCT ST_Value(rast,1,i,j) As origval, ST_Value(map_rast2, 1, i, j) As mapval
FROM dummy_rast CROSS JOIN generate_series(1, 5) AS i CROSS JOIN generate_series(1,5) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     249 |      1
     250 |      1
     251 |
     252 |      2
     253 |      3
     254 |      3

SELECT ST_BandPixelType(map_rast2) As b1pixtyp
FROM dummy_rast WHERE rid = 2;

 b1pixtyp
----------
 2BUI

</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; "><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr01.png"/><div class="caption"><p>原始（rast-view列）</p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr02.png"/><div class="caption"><p>rast_view_ma</p></div></div></div></td></tr></tbody></table></div><p>从原始 3 波段栅格创建一个与像素类型相同的新 3 波段栅格，其中第一个波段由地图代数更改，其余 2 个波段保持不变。</p><pre class="programlisting">CREATE FUNCTION rast_plus_tan(pixel float, pos integer[], variadic args text[])
RETURNS float
AS
$$
BEGIN
    RETURN tan(pixel) * pixel;
END;
$$
LANGUAGE 'plpgsql';

SELECT ST_AddBand(
    ST_AddBand(
        ST_AddBand(
            ST_MakeEmptyRaster(rast_view),
            ST_MapAlgebraFct(rast_view,1,NULL,'rast_plus_tan(float,integer[],text[])'::regprocedure)
        ),
        ST_Band(rast_view,2)
    ),
    ST_Band(rast_view, 3) As rast_view_ma
)
FROM wind
WHERE rid=167;
                    </pre></div><div class="refsection" id="idm34688"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebraFct2"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraFct — 2 波段版本 - 通过在提供的 2 个输入栅格波段和像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。 如果未指定，范围类型默认为 INTERSECTION。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast1</var>, raster <var class="pdparam">rast2</var>, regprocedure <var class="pdparam">tworastuserfunc</var>, text <var class="pdparam">pixeltype=same_as_rast1</var>, text <var class="pdparam">extenttype=INTERSECTION</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFct</strong>(</code>raster <var class="pdparam">rast1</var>, integer <var class="pdparam">band1</var>, raster <var class="pdparam">rast2</var>, integer <var class="pdparam">band2</var>, regprocedure <var class="pdparam">tworastuserfunc</var>, text <var class="pdparam">pixeltype=same_as_rast1</var>, text <var class="pdparam">extenttype=INTERSECTION</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm34749"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> 自 2.1.0 起已弃用。 使用<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）代替。 </p></td></tr></table></div><p>创建一个新的单波段栅格，该栅格是通过对输入栅格<code class="varname"> rast1</code>、<code class="varname">rast2</code> 应用由<code class="varname">tworastuserfunc </code>指定的有效 PostgreSQL 函数而形成的。 如果未指定<code class="varname"> band1</code> 或<code class="varname"> band2</code>，则假定为 band 1。 新栅格将具有与原始栅格相同的地理参考、宽度和高度，但只有一个波段。 </p><p>如果传入<code class="varname">pixeltype</code>，则新栅格将具有该像素类型的波段。 如果将像素类型传递为 NULL 或省略，则新的栅格波段将具有与输入 <code class="varname">rast1</code> 波段相同的像素类型。 </p><p><code class="varname">Tworastuserfunc </code>参数必须是 SQL 或 PL/pgSQL 函数的名称和签名，转换为 regprocedure。 PL/pgSQL 函数示例如下： </p><pre class="programlisting">CREATE OR REPLACE FUNCTION simple_function_for_two_rasters(pixel1 FLOAT, pixel2 FLOAT, pos INTEGER[], VARIADIC args TEXT[])
    RETURNS FLOAT
    AS $$ BEGIN
        RETURN 0.0;
    END; $$
    LANGUAGE 'plpgsql' IMMUTABLE;</pre><p><code class="varname">Tworastuserfunc </code>可以接受三个或四个参数：一个双精度值、一个双精度值、一个可选的整数数组和一个可变文本数组。 第一个参数是<code class="varname"> rast1 </code>中单个栅格像元的值（无论栅格数据类型如何）。 第二个参数是 <code class="varname">rast2 </code>中的单个栅格像元值。 第三个参数是当前处理单元的位置，格式为“{x,y}”。 第四个参数指示<a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> 的所有剩余参数均应传递给<code class="varname">tworastuserfunc</code>。 </p><p>将 <span class="type">regprodedure </span>参数传递给 SQL 函数需要传递完整的函数签名，然后转换为 <span class="type">regprocedure</span> 类型。 要将上述示例 PL/pgSQL 函数作为参数传递，参数的 SQL 为： </p><pre class="programlisting">'simple_function(double precision, double precision, integer[], text[])'::regprocedure</pre><p>请注意，参数包含函数名称、函数参数类型、名称和参数类型周围的引号以及对 <span class="type">regprocedure </span>的强制转换。 </p><p><code class="varname">Tworastuserfunc </code>的第四个参数是<span class="type">可变文本</span>数组。 任何 <a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> 调用的所有尾随文本参数都会传递到指定的<code class="varname">tworastuserfunc</code>，并包含在 <code class="varname">userargs </code>参数中。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关 VARIADIC 关键字的更多信息，请参阅 PostgreSQL 文档和<a class="link" href="http://www.postgresql.org/docs/current/static/xfunc-sql.html" target="_top">查询语言 (SQL) 函数</a>的“具有可变参数数量的 SQL 函数”部分。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>无论您是否选择将任何参数传递给用户函数进行处理，<span class="type">text[] </span>参数在<code class="varname">tworastuserfunc</code>都是必需的。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm34793"><h2>示例：将栅格作为单独的波段覆盖在画布上</h2><pre class="programlisting">

-- define our user defined function --
CREATE OR REPLACE FUNCTION raster_mapalgebra_union(
    rast1 double precision,
    rast2 double precision,
    pos integer[],
    VARIADIC userargs text[]
)
    RETURNS double precision
    AS $$
    DECLARE
    BEGIN
        CASE
            WHEN rast1 IS NOT NULL AND rast2 IS NOT NULL THEN
                RETURN ((rast1 + rast2)/2.);
            WHEN rast1 IS NULL AND rast2 IS NULL THEN
                RETURN NULL;
            WHEN rast1 IS NULL THEN
                RETURN rast2;
            ELSE
                RETURN rast1;
        END CASE;

        RETURN NULL;
    END;
    $$ LANGUAGE 'plpgsql' IMMUTABLE COST 1000;

-- prep our test table of rasters
DROP TABLE IF EXISTS map_shapes;
CREATE TABLE map_shapes(rid serial PRIMARY KEY, rast raster, bnum integer, descrip text);
INSERT INTO map_shapes(rast,bnum, descrip)
WITH mygeoms
    AS ( SELECT 2 As bnum, ST_Buffer(ST_Point(90,90),30) As geom, 'circle' As descrip
            UNION ALL
            SELECT 3 AS bnum,
                ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'), 15) As geom, 'big road' As descrip
            UNION ALL
            SELECT 1 As bnum,
                ST_Translate(ST_Buffer(ST_GeomFromText('LINESTRING(60 50,150 150,150 50)'), 8,'join=bevel'), 10,-6) As geom, 'small road' As descrip
            ),
   -- define our canvas to be 1 to 1 pixel to geometry
   canvas
    AS ( SELECT ST_AddBand(ST_MakeEmptyRaster(250,
        250,
        ST_XMin(e)::integer, ST_YMax(e)::integer, 1, -1, 0, 0 ) , '8BUI'::text,0) As rast
        FROM (SELECT ST_Extent(geom) As e,
                    Max(ST_SRID(geom)) As srid
                    from mygeoms
                    ) As foo
            )
-- return our rasters aligned with our canvas
SELECT ST_AsRaster(m.geom, canvas.rast, '8BUI', 240) As rast, bnum, descrip
                FROM mygeoms AS m CROSS JOIN canvas
UNION ALL
SELECT canvas.rast, 4, 'canvas'
FROM canvas;

-- Map algebra on single band rasters and then collect with ST_AddBand
INSERT INTO map_shapes(rast,bnum,descrip)
SELECT ST_AddBand(ST_AddBand(rasts[1], rasts[2]),rasts[3]), 4, 'map bands overlay fct union (canvas)'
    FROM (SELECT ARRAY(SELECT ST_MapAlgebraFct(m1.rast, m2.rast,
            'raster_mapalgebra_union(double precision, double precision, integer[], text[])'::regprocedure, '8BUI', 'FIRST')
                FROM map_shapes As m1 CROSS JOIN map_shapes As m2
    WHERE m1.descrip = 'canvas' AND m2.descrip &lt;
&gt; 'canvas' ORDER BY m2.bnum) As rasts) As foo;

</pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/></colgroup><tbody><tr><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafct2_01.png"/><div class="caption"><p>地图带叠加（画布）（R：小路，G：圆形，B：大路）</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm34808"><h2>需要额外参数的用户定义函数</h2><pre class="programlisting">CREATE OR REPLACE FUNCTION raster_mapalgebra_userargs(
    rast1 double precision,
    rast2 double precision,
    pos integer[],
    VARIADIC userargs text[]
)
    RETURNS double precision
    AS $$
    DECLARE
    BEGIN
        CASE
            WHEN rast1 IS NOT NULL AND rast2 IS NOT NULL THEN
                RETURN least(userargs[1]::integer,(rast1 + rast2)/2.);
            WHEN rast1 IS NULL AND rast2 IS NULL THEN
                RETURN userargs[2]::integer;
            WHEN rast1 IS NULL THEN
                RETURN greatest(rast2,random()*userargs[3]::integer)::integer;
            ELSE
                RETURN greatest(rast1, random()*userargs[4]::integer)::integer;
        END CASE;

        RETURN NULL;
    END;
    $$ LANGUAGE 'plpgsql' VOLATILE COST 1000;

SELECT ST_MapAlgebraFct(m1.rast, 1, m1.rast, 3,
            'raster_mapalgebra_userargs(double precision, double precision, integer[], text[])'::regprocedure,
                '8BUI', 'INTERSECT', '100','200','200','0')
                FROM map_shapes As m1
    WHERE m1.descrip = 'map bands overlay fct union (canvas)';
                    </pre><p>
                        </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafct2_02.png"/><div class="caption"><p>用户使用额外参数和来自同一栅格的不同波段定义</p></div></div></div><p>
                    </p></div><div class="refsection" id="idm34818"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> </p></div></div><div class="refentry" id="RT_ST_MapAlgebraFctNgb"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraFctNgb — 1-波段版本：使用用户定义的 PostgreSQL 函数映射代数最近邻。 返回一个栅格，其值是涉及输入栅格波段值的邻域的 PLPGSQL 用户函数的结果。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_MapAlgebraFctNgb</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, text  <var class="pdparam">pixeltype</var>, integer  <var class="pdparam">ngbwidth</var>, integer  <var class="pdparam">ngbheight</var>, regprocedure  <var class="pdparam">onerastngbuserfunc</var>, text  <var class="pdparam">nodatamode</var>, text[]  <var class="pdparam">VARIADIC args</var><code>)</code>;</p></div></div><div class="refsection" id="idm34858"><h2>描述</h2><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已弃用。 使用<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）代替。 </p></td></tr></table></div><p>（一个栅格版本）返回一个栅格，其值是涉及输入栅格波段值的邻域的 PLPGSQL 用户函数的结果。 用户函数将像素值的邻域作为数字数组，对于每个像素，返回用户函数的结果，用函数结果替换当前检查像素的像素值。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">rast</code></span></dt><dd><p>评估用户函数的栅格。</p></dd><dt><span class="term"><code class="varname">band</code></span></dt><dd><p>要评估的栅格的波段号。 默认为 1。</p></dd><dt><span class="term"><code class="varname">pixeltype</code></span></dt><dd><p>输出栅格的结果像素类型。 必须是<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> 中列出的一项，或者省略或设置为 NULL。 如果未传入或设置为 NULL，将默认为 <code class="varname">rast </code>的像素类型。 如果结果大于像素类型允许的值，则会被截断。</p></dd><dt><span class="term"><code class="varname">ngbwidth</code></span></dt><dd><p>邻域的宽度（以单元格为单位）。</p></dd><dt><span class="term"><code class="varname">ngbheight</code></span></dt><dd><p>邻域的高度（以单元格为单位）。</p></dd><dt><span class="term"><code class="varname">onerastngbuserfunc</code></span></dt><dd><p>PLPGSQL/psql 用户函数应用于栅格单个波段的邻域像素。 第一个元素是表示矩形像素邻域的二维数字数组</p></dd><dt><span class="term"><code class="varname">nodatamode</code></span></dt><dd><p>定义要为无数据或 NULL 的邻域像素传递给函数的值</p><p>'ignore'：计算忽略在邻域中遇到的任何 NODATA 值 - 该标志必须发送到用户回调函数，并且用户函数决定如何忽略它。</p><p>“NULL”：在邻域中遇到的任何 NODATA 值都将导致结果像素为 NULL——在这种情况下将跳过用户回调函数。</p><p>“value”：在邻域中遇到的任何 NODATA 值都将替换为参考像素（邻域中心的像素）。 请注意，如果该值为 NODATA，则行为与“NULL”相同（对于受影响的邻域）</p></dd><dt><span class="term"><code class="varname">args</code></span></dt><dd><p>要传递给用户函数的参数。</p></dd></dl></div><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm34912"><h2>示例</h2><p>示例利用 <a class="link" href="http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html" target="_top">http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html</a> 中描述的作为单个图块加载的卡特里娜栅格，然后在 <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> 示例中准备 </p><pre class="programlisting">--
-- A simple 'callback' user function that averages up all the values in a neighborhood.
--
CREATE OR REPLACE FUNCTION rast_avg(matrix float[][], nodatamode text, variadic args text[])
    RETURNS float AS
    $$
    DECLARE
        _matrix float[][];
        x1 integer;
        x2 integer;
        y1 integer;
        y2 integer;
        sum float;
    BEGIN
        _matrix := matrix;
        sum := 0;
        FOR x in array_lower(matrix, 1)..array_upper(matrix, 1) LOOP
            FOR y in array_lower(matrix, 2)..array_upper(matrix, 2) LOOP
                sum := sum + _matrix[x][y];
            END LOOP;
        END LOOP;
        RETURN (sum*1.0/(array_upper(matrix,1)*array_upper(matrix,2) ))::integer ;
    END;
    $$
LANGUAGE 'plpgsql' IMMUTABLE COST 1000;

-- now we apply to our raster averaging pixels within 2 pixels of each other in X and Y direction --
SELECT ST_MapAlgebraFctNgb(rast, 1,  '8BUI', 4,4,
        'rast_avg(float[][], text, text[])'::regprocedure, 'NULL', NULL) As nn_with_border
    FROM katrinas_rescaled
    limit 1;
                    </pre><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col/><col/></colgroup><tbody><tr><td style="border-right: 1px solid ; ">
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafctngb01.png"/><div class="caption"><p>我们栅格的第一个波段</p></div></div></div><p>
                                        </p>
                                    </td><td>
                                        <p>
                                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafctngb02.png"/><div class="caption"><p>对彼此之间 4x4 像素的像素进行平均后的新栅格</p></div></div></div><p>
                                        </p>
                                    </td></tr></tbody></table></div></div><div class="refsection" id="idm34938"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>, <a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>, <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> </p></div></div><div class="refentry" id="RT_ST_Reclass"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Reclass — 创建由从原始数据重新分类的波段类型组成的新栅格。 nband 是要更改的波段。 如果未指定 nband，则假定为 1。所有其他波段均按原样返回。 使用案例：将 16BUI 波段转换为 8BUI 等，以便更简单地呈现为可视格式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Reclass</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text  <var class="pdparam">reclassexpr</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Reclass</strong>(</code>raster  <var class="pdparam">rast</var>, reclassarg[]  <var class="pdparam">VARIADIC reclassargset</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Reclass</strong>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">reclassexpr</var>, text  <var class="pdparam">pixeltype</var><code>)</code>;</p></div></div><div class="refsection" id="idm34989"><h2>描述</h2><p>通过对输入栅格 (<code class="varname">rast</code>) 应用由 <code class="varname">reclassexpr</code> 定义的有效 PostgreSQL 代数运算来创建新栅格。 如果未指定<code class="varname">波段</code>，则假定为波段 1。 新栅格将具有与原始栅格相同的地理参考、宽度和高度。 未指定的波段将保持不变。 有关有效重分类表达式的说明，请参阅 <a class="xref" href="#reclassarg" title="reclassarg">reclassarg</a>。</p><p>新栅格的波段将具有<code class="varname"> Pixeltype </code>的像素类型。 如果传入<code class="varname"> reclassargset</code>，则每个 reclassarg 定义生成的每个带的行为。</p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm35000"><h2>基本示例</h2><p>从原始栅格创建一个新栅格，其中波段 2 从 8BUI 转换为 4BUI，并且 101-254 中的所有值都设置为 nodata 值。</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN reclass_rast raster;
UPDATE dummy_rast SET reclass_rast = ST_Reclass(rast,2,'0-87:1-10, 88-100:11-15, 101-254:0-0', '4BUI',0) WHERE rid = 2;

SELECT i as col, j as row, ST_Value(rast,2,i,j) As origval,
    ST_Value(reclass_rast, 2, i, j) As reclassval,
    ST_Value(reclass_rast, 2, i, j, false) As reclassval_include_nodata
FROM dummy_rast CROSS JOIN generate_series(1, 3) AS i CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

 col | row | origval | reclassval | reclassval_include_nodata
-----+-----+---------+------------+---------------------------
   1 |   1 |      78 |          9 |                         9
   2 |   1 |      98 |         14 |                        14
   3 |   1 |     122 |            |                         0
   1 |   2 |      96 |         14 |                        14
   2 |   2 |     118 |            |                         0
   3 |   2 |     180 |            |                         0
   1 |   3 |      99 |         15 |                        15
   2 |   3 |     112 |            |                         0
   3 |   3 |     169 |            |                         0
                    </pre></div><div class="refsection" id="idm35004"><h2>示例：高效使用多个重新分类参数</h2><p>从原始栅格创建一个新栅格，其中波段 1、2、3 分别转换为 1BB、4BUI、4BUI 并重新分类。 请注意，这使用可变的<code class="varname">reclassarg</code>参数，该参数可以将不确定数量的重新分类参数作为输入（理论上与您拥有的波段一样多） </p><pre class="programlisting">UPDATE dummy_rast SET reclass_rast =
    ST_Reclass(rast,
        ROW(2,'0-87]:1-10, (87-100]:11-15, (101-254]:0-0', '4BUI',NULL)::reclassarg,
        ROW(1,'0-253]:1, 254:0', '1BB', NULL)::reclassarg,
        ROW(3,'0-70]:1, (70-86:2, [86-150):3, [150-255:4', '4BUI', NULL)::reclassarg
        ) WHERE rid = 2;

SELECT i as col, j as row,ST_Value(rast,1,i,j) As ov1,  ST_Value(reclass_rast, 1, i, j) As rv1,
    ST_Value(rast,2,i,j) As ov2, ST_Value(reclass_rast, 2, i, j) As rv2,
    ST_Value(rast,3,i,j) As ov3, ST_Value(reclass_rast, 3, i, j) As rv3
FROM dummy_rast CROSS JOIN generate_series(1, 3) AS i CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

col | row | ov1 | rv1 | ov2 | rv2 | ov3 | rv3
----+-----+-----+-----+-----+-----+-----+-----
  1 |   1 | 253 |   1 |  78 |   9 |  70 |   1
  2 |   1 | 254 |   0 |  98 |  14 |  86 |   3
  3 |   1 | 253 |   1 | 122 |   0 | 100 |   3
  1 |   2 | 253 |   1 |  96 |  14 |  80 |   2
  2 |   2 | 254 |   0 | 118 |   0 | 108 |   3
  3 |   2 | 254 |   0 | 180 |   0 | 162 |   4
  1 |   3 | 250 |   1 |  99 |  15 |  90 |   3
  2 |   3 | 254 |   0 | 112 |   0 | 108 |   3
  3 |   3 | 254 |   0 | 169 |   0 | 175 |   4
                    </pre></div><div class="refsection" id="idm35009"><h2>示例：高级将单波段 32BF 栅格映射到多个可见波段</h2><p>从只有一个 32bf 波段的栅格创建一个新的 3 波段（8BUI、8BUI、8BUI 可查看栅格） </p><pre class="programlisting">ALTER TABLE wind ADD COLUMN rast_view raster;
UPDATE wind
    set rast_view = ST_AddBand( NULL,
        ARRAY[
    ST_Reclass(rast, 1,'0.1-10]:1-10,9-10]:11,(11-33:0'::text, '8BUI'::text,0),
    ST_Reclass(rast,1, '11-33):0-255,[0-32:0,(34-1000:0'::text, '8BUI'::text,0),
    ST_Reclass(rast,1,'0-32]:0,(32-100:100-255'::text, '8BUI'::text,0)
    ]
    );
                    </pre></div><div class="refsection" id="idm35013"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_Band" title="ST_Band">ST_Band</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>, <a class="xref" href="#reclassarg" title="reclassarg">reclassarg</a>, <a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a> </p></div></div><div class="refentry" id="RT_ST_Union"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Union — 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Union</strong>(</code>setof raster  <var class="pdparam">rast</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Union</strong>(</code>setof raster  <var class="pdparam">rast</var>, unionarg[]  <var class="pdparam">unionargset</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Union</strong>(</code>setof raster <var class="pdparam">rast</var>, integer <var class="pdparam">nband</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Union</strong>(</code>setof raster <var class="pdparam">rast</var>, text <var class="pdparam">uniontype</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Union</strong>(</code>setof raster <var class="pdparam">rast</var>, integer <var class="pdparam">nband</var>, text <var class="pdparam">uniontype</var><code>)</code>;</p></div></div><div class="refsection" id="idm35073"><h2>描述</h2><p>将一组栅格切片的并集返回为由至少一个波段组成的单个栅格。 生成的栅格范围是整个栅格集的范围。 在交集的情况下，结果值由<code class="varname"> uniontype</code> 定义，它是以下之一：LAST（默认）、FIRST、MIN、MAX、COUNT、SUM、MEAN、RANGE。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>为了合并栅格，它们必须具有相同的对齐方式。 使用 <a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a>和 <a class="xref" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a> 获取更多详细信息和帮助。 解决对齐问题的一种方法是使用 <a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>并使用相同的参考栅格进行对齐。</p></td></tr></table></div><p class="availability">可用性: 2.0.0 </p><p class="enhanced">增强：2.1.0 提高速度（完全基于 C）。</p><p class="availability">可用性：2.1.0 引入了 ST_Union(rast, unionarg) 变体。</p><p class="enhanced">增强：2.1.0 ST_Union(rast)（变体 1）合并所有输入栅格的所有波段。 PostGIS 的早期版本采用第一个波段。</p><p class="enhanced">增强：2.1.0 ST_Union(rast, uniontype)（变体 4）合并所有输入栅格的所有波段。</p></div><div class="refsection" id="idm35087"><h2>示例：重建单波段分块栅格图块</h2><pre class="programlisting">-- this creates a single band from first band of raster tiles
-- that form the original file system tile
SELECT filename, ST_Union(rast,1) As file_rast
FROM sometable WHERE filename IN('dem01', 'dem02') GROUP BY filename;
                    </pre></div><div class="refsection" id="idm35090"><h2>示例：返回多波段栅格，它是与几何体相交的图块的并集</h2><pre class="programlisting">-- this creates a multi band raster collecting all the tiles that intersect a line
-- Note: In 2.0, this would have just returned a single band raster
-- , new union works on all bands by default
-- this is equivalent to unionarg: ARRAY[ROW(1, 'LAST'), ROW(2, 'LAST'), ROW(3, 'LAST')]::unionarg[]
SELECT ST_Union(rast)
FROM aerials.boston
WHERE ST_Intersects(rast,  ST_GeomFromText('LINESTRING(230486 887771, 230500 88772)',26986) );
                    </pre></div><div class="refsection" id="idm35093"><h2>示例：返回多波段栅格，它是与几何体相交的图块的并集</h2><p>如果我们只想要波段的子集或者想要更改波段的顺序，则这里我们使用更长的语法</p><pre class="programlisting">-- this creates a multi band raster collecting all the tiles that intersect a line
SELECT ST_Union(rast,ARRAY[ROW(2, 'LAST'), ROW(1, 'LAST'), ROW(3, 'LAST')]::unionarg[])
FROM aerials.boston
WHERE ST_Intersects(rast,  ST_GeomFromText('LINESTRING(230486 887771, 230500 88772)',26986) );
                    </pre></div><div class="refsection" id="idm35097"><h2>相关信息</h2><p><a class="xref" href="#unionarg" title="unionarg">unionarg</a>, <a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>, <a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a> </p></div></div></section><section class="section" id="Raster_Processing_MapAlgebra_Callbacks"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.13. 内置地图代数回调函数</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_Distinct4ma">ST_Distinct4ma</a></span><span class="refpurpose"> — 栅格处理函数，用于计算邻域中唯一像素值的数量。</span></li><li><span class="refentrytitle"><a href="#RT_ST_InvDistWeight4ma">ST_InvDistWeight4ma</a></span><span class="refpurpose"> — 从像素的邻域内插像素值的栅格处理函数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Max4ma">ST_Max4ma</a></span><span class="refpurpose"> — 计算邻域中最大像素值的栅格处理函数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Mean4ma">ST_Mean4ma</a></span><span class="refpurpose"> — 计算邻域中平均像素值的栅格处理函数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Min4ma">ST_Min4ma</a></span><span class="refpurpose"> — 计算邻域中最小像素值的栅格处理函数。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_MinDist4ma">ST_MinDist4ma</a></span><span class="refpurpose"> — 返回感兴趣像素与具有值的相邻像素之间的最小距离（以像素数为单位）的栅格处理函数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Range4ma">ST_Range4ma</a></span><span class="refpurpose"> — 计算邻域中像素值范围的栅格处理函数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_StdDev4ma">ST_StdDev4ma</a></span><span class="refpurpose"> — 计算邻域中像素值的标准偏差的栅格处理函数。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Sum4ma">ST_Sum4ma</a></span><span class="refpurpose"> — 栅格处理函数，计算邻域中所有像素值的总和。</span></li></ul></div><div class="refentry" id="RT_ST_Distinct4ma"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Distinct4ma — 栅格处理函数，用于计算邻域中唯一像素值的数量。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Distinct4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Distinct4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35137"><h2>描述</h2><p>计算像素邻域中唯一像素值的数量。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35151"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_distinct4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |        3
(1 row)
                </pre></div><div class="refsection" id="idm35154"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_InvDistWeight4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_InvDistWeight4ma — 从像素的邻域内插像素值的栅格处理函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_InvDistWeight4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][] <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35183"><h2>描述</h2><p>使用反距离加权方法计算像素的插值。</p><p>有两个可选参数可以通过 <code class="varname">userargs </code>传递。 第一个参数是反距离加权方程中使用的介于 0 和 1 之间的功率因数（下面方程中的变量 k）。 如果未指定，则默认值为 1。第二个参数是仅当感兴趣像素的值包含在邻域的插值中时应用的权重百分比。 如果未指定并且感兴趣的像素具有值，则返回该值。 </p><p>基本反距离权重方程为： </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_invdistweight4ma_equation.png"/><div class="caption"><p>k = 功率因数，0 到 1 之间的实数 </p></div></div></div><p>
                </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数是一个专门的回调函数，用作 <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。</p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm35199"><h2>示例</h2><pre class="programlisting">-- NEEDS EXAMPLE
                </pre></div><div class="refsection" id="idm35202"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_MinDist4ma" title="ST_MinDist4ma">ST_MinDist4ma</a> </p></div></div><div class="refentry" id="RT_ST_Max4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Max4ma — 计算邻域中最大像素值的栅格处理函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Max4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Max4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35237"><h2>描述</h2><p>计算像素邻域中的最大像素值。</p><p>对于格式 2，可以通过将该值传递给 userargs 来指定 NODATA 像素的替换值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35252"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_max4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |      254
(1 row)
                </pre></div><div class="refsection" id="idm35255"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_Mean4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Mean4ma — 计算邻域中平均像素值的栅格处理函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Mean4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Mean4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35296"><h2>描述</h2><p>计算像素邻域中的平均像素值。</p><p>对于格式 2，可以通过将该值传递给 userargs 来指定 NODATA 像素的替换值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35311"><h2>示例：格式 1</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, '32BF', 1, 1, 'st_mean4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid |     st_value
-----+------------------
   2 | 253.222229003906
(1 row)
                </pre></div><div class="refsection" id="idm35314"><h2>示例：格式2</h2><pre class="programlisting">SELECT
    rid,
    st_value(
              ST_MapAlgebra(rast, 1, 'st_mean4ma(double precision[][][], integer[][], text[])'::regprocedure,'32BF', 'FIRST', NULL, 1, 1)
       ,  2, 2)
  FROM dummy_rast
   WHERE rid = 2;
 rid |     st_value
-----+------------------
   2 | 253.222229003906
(1 row)</pre></div><div class="refsection" id="idm35317"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_Min4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Min4ma — 计算邻域中最小像素值的栅格处理函数。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Min4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text  <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Min4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35357"><h2>描述</h2><p>计算像素邻域中的最小像素值。 </p><p>对于格式 2，可以通过将该值传递给 userargs 来指定 NODATA 像素的替换值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35372"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_min4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |      250
(1 row)
                </pre></div><div class="refsection" id="idm35375"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_MinDist4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinDist4ma — 返回感兴趣像素与具有值的相邻像素之间的最小距离（以像素数为单位）的栅格处理函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <strong class="fsfunc">ST_MinDist4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][] <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35404"><h2>描述</h2><p>返回感兴趣的像素与邻域中具有值的最近像素之间的最短距离（以像素数为单位）。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数的目的是提供信息丰富的数据点，帮助从<a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a>推断感兴趣像素的插值的有用性。 当社区人口稀少时，此功能特别有用。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数是一个专门的回调函数，用作 <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。</p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm35414"><h2>示例</h2><pre class="programlisting">-- NEEDS EXAMPLE
                </pre></div><div class="refsection" id="idm35417"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a> </p></div></div><div class="refentry" id="RT_ST_Range4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Range4ma — 计算邻域中像素值范围的栅格处理函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Range4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Range4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35452"><h2>描述</h2><p>计算像素邻域中的像素值范围。</p><p>对于格式 2，可以通过将该值传递给 userargs 来指定 NODATA 像素的替换值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35467"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_range4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |        4
(1 row)
                </pre></div><div class="refsection" id="idm35470"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_StdDev4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_StdDev4ma — 计算邻域中像素值的标准偏差的栅格处理函数。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_StdDev4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text  <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_StdDev4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35511"><h2>描述</h2><p>计算像素邻域中像素值的标准偏差。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35525"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, '32BF', 1, 1, 'st_stddev4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid |     st_value
-----+------------------
   2 | 1.30170822143555
(1 row)
                </pre></div><div class="refsection" id="idm35528"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div><div class="refentry" id="RT_ST_Sum4ma"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Sum4ma — 栅格处理函数，计算邻域中所有像素值的总和。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <strong class="fsfunc">ST_Sum4ma</strong>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <strong class="fsfunc">ST_Sum4ma</strong>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" id="idm35569"><h2>描述</h2><p>计算像素邻域中所有像素值的总和。</p><p>对于格式 2，可以通过将该值传递给 userargs 来指定 NODATA 像素的替换值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 1 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>的回调参数。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>格式 2 是一个专门的回调函数，用作<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>（回调函数版本）的回调参数。 </p></td></tr></table></div><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>不鼓励使用格式 1，因为 <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> 自 2.1.0 起已被弃用。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加格式 2</p></div><div class="refsection" id="idm35584"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, '32BF', 1, 1, 'st_sum4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |     2279
(1 row)
                </pre></div><div class="refsection" id="idm35587"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>, <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>, <a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>, <a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>, <a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>, <a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>, <a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> </p></div></div></section><section class="section" id="Raster_Processing_DEM"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.14. 栅格处理：DEM（高程）</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_Aspect">ST_Aspect</a></span><span class="refpurpose"> — 返回高程栅格波段的坡向（默认以度为单位）。 对于分析地形很有用。</span></li><li><span class="refentrytitle"><a href="#RT_ST_HillShade">ST_HillShade</a></span><span class="refpurpose"> — 使用提供的方位角、高度、亮度和比例输入返回高程栅格带的假设照明。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Roughness">ST_Roughness</a></span><span class="refpurpose"> — 返回一个计算出的数字高程模型（DEM）的 '粗糙度' 的栅格。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Slope">ST_Slope</a></span><span class="refpurpose"> — 返回高程栅格带的坡度（默认以度为单位）。 对于分析地形很有用。</span></li><li><span class="refentrytitle"><a href="#RT_ST_TPI">ST_TPI</a></span><span class="refpurpose"> — 返回一个计算出的地形位置指数（Topographic Position Index）的栅格。</span></li><li><span class="refentrytitle"><a href="#RT_ST_TRI">ST_TRI</a></span><span class="refpurpose"> — 返回具有计算的地形坚固性指数的栅格。</span></li></ul></div><div class="refentry" id="RT_ST_Aspect"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Aspect — 返回高程栅格波段的坡向（默认以度为单位）。 对于分析地形很有用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Aspect</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Aspect</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm35645"><h2>描述</h2><p>返回高程栅格波段的坡向（默认以度为单位）。 利用地图代数并将长宽比方程应用于相邻像素。</p><p><code class="varname">units</code> 表示坡度的单位。可能的取值有：RADIANS（弧度），DEGREES（度，默认值）。 </p><p>当<code class="varname">units</code> = RADIANS 时，值介于 0 到 2 * pi 弧度之间，从北向顺时针测量。 </p><p>当<code class="varname">units</code> = DEGREES 时，值介于 0 到 360 度之间（从北向顺时针测量）。 </p><p>如果像素的斜率为零，则像素的纵横比为-1。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关坡度、坡向和山体阴影的更多信息，请参阅 <a class="link" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Hillshade%20works" target="_top">ESRI - 山体阴影的工作原理</a>和 <a class="link" href="http://e2b.erdas.com/fieldguide/wwhelp/wwhimpl/common/html/wwhelp.htm?context=FieldGuide&amp;file=Aspect_Images.html" target="_top">ERDAS 现场指南 - 坡向图像</a>。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0 </p><p class="enhanced">增强：2.1.0 使用 ST_MapAlgebra() 并添加可选的<code class="varname"> interpolate_nodata </code>函数参数</p><p class="changed">更改：2.1.0 在之前的版本中，返回值以弧度为单位。 现在，返回值默认为度数</p></div><div class="refsection" id="idm35663"><h2>示例：格式 1</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_SetValues(
        ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '32BF', 0, -9999),
        1, 1, 1, ARRAY[
            [1, 1, 1, 1, 1],
            [1, 2, 2, 2, 1],
            [1, 2, 3, 2, 1],
            [1, 2, 2, 2, 1],
            [1, 1, 1, 1, 1]
        ]::double precision[][]
    ) AS rast
)
SELECT
    ST_DumpValues(ST_Aspect(rast, 1, '32BF'))
FROM foo

                                                                                                    st_dumpvalues

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------
 (1,"{{315,341.565063476562,0,18.4349479675293,45},{288.434936523438,315,0,45,71.5650482177734},{270,270,-1,90,90},{251.565048217773,225,180,135,108.434951782227},{225,198.43495178
2227,180,161.565048217773,135}}")
(1 row)
                    </pre></div><div class="refsection" id="idm35666"><h2>示例：格式2</h2><p>覆盖范围图块的完整示例。 此查询仅适用于 PostgreSQL 9.1 或更高版本。</p><pre class="programlisting">WITH foo AS (
    SELECT ST_Tile(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(6, 6, 0, 0, 1, -1, 0, 0, 0),
                1, '32BF', 0, -9999
            ),
            1, 1, 1, ARRAY[
                [1, 1, 1, 1, 1, 1],
                [1, 1, 1, 1, 2, 1],
                [1, 2, 2, 3, 3, 1],
                [1, 1, 3, 2, 1, 1],
                [1, 2, 2, 1, 2, 1],
                [1, 1, 1, 1, 1, 1]
            ]::double precision[]
        ),
        2, 2
    ) AS rast
)
SELECT
    t1.rast,
    ST_Aspect(ST_Union(t2.rast), 1, t1.rast)
FROM foo t1
CROSS JOIN foo t2
WHERE ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rast;
                    </pre></div><div class="refsection" id="idm35670"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>, <a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>, <a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>, <a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>, <a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> </p></div></div><div class="refentry" id="RT_ST_HillShade"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_HillShade — 使用提供的方位角、高度、亮度和比例输入返回高程栅格带的假设照明。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_HillShade</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, text  <var class="pdparam">pixeltype=32BF</var>, double precision  <var class="pdparam">azimuth=315</var>, double precision  <var class="pdparam">altitude=45</var>, double precision  <var class="pdparam">max_bright=255</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_HillShade</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype=32BF</var>, double precision  <var class="pdparam">azimuth=315</var>, double precision  <var class="pdparam">altitude=45</var>, double precision  <var class="pdparam">max_bright=255</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm35742"><h2>描述</h2><p>使用方位角、高度、亮度和比例输入返回高程栅格带的假设照明。 利用地图代数并将山体阴影方程应用于相邻像素。 返回像素值介于 0 到 255 之间。</p><p><code class="varname">方位角（azimuth）</code>是从北向顺时针测量的 0 到 360 度之间的值。 </p><p><code class="varname">高度（altitude）</code>是 0 到 90 度之间的值，其中 0 度位于地平线，90 度位于正上方。 </p><p><code class="varname">亮度（max_bright）</code>是 0 到 255 之间的值，其中 0 表示无亮度，255 表示最大亮度。 </p><p><code class="varname">比例（scale）</code>是垂直单位与水平单位的比率。 对于英尺:LatLon 使用scale=370400，对于米:LatLon 使用scale=111120。 </p><p>如果<code class="varname"> interpolate_nodata</code> 为 TRUE，则在计算山体阴影照明之前，将使用<a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a>对输入栅格中的 NODATA 像素值进行插值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关山体阴影的更多信息，请参阅<a class="link" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Hillshade%20works" target="_top">山体阴影的工作原理</a>。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0 </p><p class="enhanced">增强：2.1.0 使用 ST_MapAlgebra() 并添加可选的<code class="varname"> interpolate_nodata </code>函数参数</p><p class="changed">更改：2.1.0 在之前的版本中，方位角和高度以弧度表示。 现在，方位角和高度以度表示</p></div><div class="refsection" id="idm35763"><h2>示例：格式 1</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_SetValues(
        ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '32BF', 0, -9999),
        1, 1, 1, ARRAY[
            [1, 1, 1, 1, 1],
            [1, 2, 2, 2, 1],
            [1, 2, 3, 2, 1],
            [1, 2, 2, 2, 1],
            [1, 1, 1, 1, 1]
        ]::double precision[][]
    ) AS rast
)
SELECT
    ST_DumpValues(ST_Hillshade(rast, 1, '32BF'))
FROM foo

                                                                                                                       st_dumpvalues

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------
 (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,251.32763671875,220.749786376953,147.224319458008,NULL},{NULL,220.749786376953,180.312225341797,67.7497863769531,NULL},{NULL,147.224319458008
,67.7497863769531,43.1210060119629,NULL},{NULL,NULL,NULL,NULL,NULL}}")
(1 row)
                    </pre></div><div class="refsection" id="idm35766"><h2>示例：格式2</h2><p>覆盖范围图块的完整示例。 此查询仅适用于 PostgreSQL 9.1 或更高版本。</p><pre class="programlisting">WITH foo AS (
    SELECT ST_Tile(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(6, 6, 0, 0, 1, -1, 0, 0, 0),
                1, '32BF', 0, -9999
            ),
            1, 1, 1, ARRAY[
                [1, 1, 1, 1, 1, 1],
                [1, 1, 1, 1, 2, 1],
                [1, 2, 2, 3, 3, 1],
                [1, 1, 3, 2, 1, 1],
                [1, 2, 2, 1, 2, 1],
                [1, 1, 1, 1, 1, 1]
            ]::double precision[]
        ),
        2, 2
    ) AS rast
)
SELECT
    t1.rast,
    ST_Hillshade(ST_Union(t2.rast), 1, t1.rast)
FROM foo t1
CROSS JOIN foo t2
WHERE ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rast;
                    </pre></div><div class="refsection" id="idm35770"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>, <a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>, <a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>, <a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>, <a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> </p></div></div><div class="refentry" id="RT_ST_Roughness"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Roughness — 返回一个计算出的数字高程模型（DEM）的 '粗糙度' 的栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Roughness</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype="32BF"</var> , boolean  <var class="pdparam"> interpolate_nodata=FALSE </var> <code>)</code>;</p></div></div><div class="refsection" id="idm35803"><h2>描述</h2><p>通过给定区域的最小值减去最大值来计算 数字高程模型（DEM ）的“粗糙度”。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm35807"><h2>示例</h2><pre class="programlisting">-- needs examples
                    </pre></div><div class="refsection" id="idm35810"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>, <a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>, <a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>, <a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>, <a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> </p></div></div><div class="refentry" id="RT_ST_Slope"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Slope — 返回高程栅格带的坡度（默认以度为单位）。 对于分析地形很有用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_Slope</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <strong class="fsfunc">ST_Slope</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" id="idm35870"><h2>描述</h2><p>返回高程栅格带的坡度（默认以度为单位）。 利用地图代数并将斜率方程应用于相邻像素。</p><p><code class="varname">units</code>表示斜率的单位。 可能的值为：弧度、度（默认）、百分比。 </p><p><code class="varname">比例（scale）</code>是垂直单位与水平单位的比率。 对于英尺:LatLon 使用scale=370400，对于米:LatLon 使用scale=111120。 </p><p>如果<code class="varname"> interpolate_nodata </code>为 TRUE，则在计算表面坡度之前，将使用 <a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a>对输入栅格中的 NODATA 像素值进行插值。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>有关坡度、坡向和山体阴影的更多信息，请参阅<a class="link" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Hillshade%20works" target="_top"> ESRI - 山体阴影的工作原理</a>和 <a class="link" href="http://e2b.erdas.com/fieldguide/wwhelp/wwhimpl/common/html/wwhelp.htm?context=FieldGuide&amp;file=Slope_Images.html" target="_top">ERDAS 现场指南 - 坡度图像</a>。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0 </p><p class="enhanced">增强：2.1.0 使用 ST_MapAlgebra() 并添加可选<code class="varname">units</code>、<code class="varname">scale</code>、<code class="varname">interpolate_nodata</code> 函数参数</p><p class="changed">更改：2.1.0 在之前的版本中，返回值以弧度为单位。 现在，返回值默认为度数</p></div><div class="refsection" id="idm35890"><h2>示例：格式 1</h2><pre class="programlisting">WITH foo AS (
    SELECT ST_SetValues(
        ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '32BF', 0, -9999),
        1, 1, 1, ARRAY[
            [1, 1, 1, 1, 1],
            [1, 2, 2, 2, 1],
            [1, 2, 3, 2, 1],
            [1, 2, 2, 2, 1],
            [1, 1, 1, 1, 1]
        ]::double precision[][]
    ) AS rast
)
SELECT
    ST_DumpValues(ST_Slope(rast, 1, '32BF'))
FROM foo

                            st_dumpvalues

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------
 (1,"{{10.0249881744385,21.5681285858154,26.5650520324707,21.5681285858154,10.0249881744385},{21.5681285858154,35.2643890380859,36.8698959350586,35.2643890380859,21.5681285858154},
{26.5650520324707,36.8698959350586,0,36.8698959350586,26.5650520324707},{21.5681285858154,35.2643890380859,36.8698959350586,35.2643890380859,21.5681285858154},{10.0249881744385,21.
5681285858154,26.5650520324707,21.5681285858154,10.0249881744385}}")
(1 row)
                    </pre></div><div class="refsection" id="idm35893"><h2>示例：格式2</h2><p>覆盖范围图块的完整示例。 此查询仅适用于 PostgreSQL 9.1 或更高版本。</p><pre class="programlisting">WITH foo AS (
    SELECT ST_Tile(
        ST_SetValues(
            ST_AddBand(
                ST_MakeEmptyRaster(6, 6, 0, 0, 1, -1, 0, 0, 0),
                1, '32BF', 0, -9999
            ),
            1, 1, 1, ARRAY[
                [1, 1, 1, 1, 1, 1],
                [1, 1, 1, 1, 2, 1],
                [1, 2, 2, 3, 3, 1],
                [1, 1, 3, 2, 1, 1],
                [1, 2, 2, 1, 2, 1],
                [1, 1, 1, 1, 1, 1]
            ]::double precision[]
        ),
        2, 2
    ) AS rast
)
SELECT
    t1.rast,
    ST_Slope(ST_Union(t2.rast), 1, t1.rast)
FROM foo t1
CROSS JOIN foo t2
WHERE ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rast;
                    </pre></div><div class="refsection" id="idm35897"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>, <a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>, <a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>, <a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>, <a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> </p></div></div><div class="refentry" id="RT_ST_TPI"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_TPI — 返回一个计算出的地形位置指数（Topographic Position Index）的栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_TPI</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype="32BF"</var> , boolean  <var class="pdparam"> interpolate_nodata=FALSE </var> <code>)</code>;</p></div></div><div class="refsection" id="idm35930"><h2>描述</h2><p>计算地形位置指数，其定义为半径为 1 的焦点平均值减去中心像元。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数仅支持焦点平均半径为 1。</p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm35936"><h2>示例</h2><pre class="programlisting">-- needs examples
                    </pre></div><div class="refsection" id="idm35939"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>, <a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>, <a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>, <a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>, <a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> </p></div></div><div class="refentry" id="RT_ST_TRI"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_TRI — 返回具有计算的地形坚固性指数的栅格。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <strong class="fsfunc">ST_TRI</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype="32BF"</var> , boolean  <var class="pdparam"> interpolate_nodata=FALSE </var> <code>)</code>;</p></div></div><div class="refsection" id="idm35972"><h2>描述</h2><p>地形坚固性指数是通过将中心像素与其相邻像素进行比较、取差异的绝对值并对结果求平均值来计算的。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数仅支持焦点平均半径为 1。</p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm35978"><h2>示例</h2><pre class="programlisting">-- needs examples
                    </pre></div><div class="refsection" id="idm35981"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>, <a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>, <a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>, <a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>, <a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>, <a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> </p></div></div></section><section class="section" id="Raster_Processing_Geometry"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.15. 栅格处理：栅格到几何</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_Box3D">Box3D</a></span><span class="refpurpose"> — 返回栅格封闭框的box 3d 表示形式。</span></li><li><span class="refentrytitle"><a href="#RT_ST_ConvexHull">ST_ConvexHull</a></span><span class="refpurpose"> — 返回栅格的凸包几何形状，包括等于 BandNoDataValue 的像素值。 对于规则形状和非倾斜栅格，这给出与 ST_Envelope 相同的结果，因此仅对不规则形状或倾斜栅格有用。</span></li><li><span class="refentrytitle"><a href="#RT_ST_DumpAsPolygons">ST_DumpAsPolygons</a></span><span class="refpurpose"> — 从给定的栅格带中返回一组 geomval (geom,val) 行。 如果未指定波段 编号，则波段编号默认为 1。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Envelope">ST_Envelope</a></span><span class="refpurpose"> — 返回栅格范围的多边形表示形式。</span></li><li><span class="refentrytitle"><a href="#RT_ST_MinConvexHull">ST_MinConvexHull</a></span><span class="refpurpose"> — 返回栅格的凸包几何形状（不包括 NODATA 像素）。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Polygon">ST_Polygon</a></span><span class="refpurpose"> — 返回由具有非无数据值的像素值的像素并集形成的多多边形几何体。 如果未指定波段 编号，则 波段 编号默认为 1。</span></li></ul></div><div class="refentry" id="RT_Box3D"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Box3D — 返回栅格封闭框的box 3d 表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <strong class="fsfunc">Box3D</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm36004"><h2>描述</h2><p>返回表示栅格范围的框。</p><p>多边形由边界框的角点定义 ((<code class="varname">MINX</code>, <code class="varname">MINY</code>), (<code class="varname">MAXX</code>, <code class="varname">MAXY</code>)) </p><p class="changed">更改：2.0.0 在 2.0 之前的版本中，曾经有 box2d 而不是 box3d。 由于 box2d 是已弃用的类型，因此已更改为 box3d。</p></div><div class="refsection" id="idm36013"><h2>示例</h2><pre class="programlisting">SELECT
    rid,
    Box3D(rast) AS rastbox
FROM dummy_rast;

rid |        rastbox
----+-------------------------------------------------
1   | BOX3D(0.5 0.5 0,20.5 60.5 0)
2   | BOX3D(3427927.75 5793243.5 0,3427928 5793244 0)
                    </pre></div><div class="refsection" id="idm36016"><h2>相关信息</h2><p>
                        <a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>
                    </p></div></div><div class="refentry" id="RT_ST_ConvexHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ConvexHull — 返回栅格的凸包几何形状，包括等于 BandNoDataValue 的像素值。 对于规则形状和非倾斜栅格，这给出与 ST_Envelope 相同的结果，因此仅对不规则形状或倾斜栅格有用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_ConvexHull</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm36032"><h2>描述</h2><p>返回栅格的凸包几何形状，包括 NoDataBandValue 带像素。 对于规则形状和非倾斜栅格，这或多或少会产生与 ST_Envelope 相同的结果，因此仅对不规则形状或倾斜栅格有用。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Envelope 将坐标向下取整，因此在栅格周围添加了一小部分缓冲区，因此结果与不对坐标向下取整的 ST_ConvexHull 稍有不同。</p></td></tr></table></div></div><div class="refsection" id="idm36037"><h2>示例</h2><p>有关此图，请参阅 <a class="link" href="http://trac.osgeo.org/postgis/wiki/WKTRaster/SpecificationWorking01" target="_top">PostGIS Raster Specific</a> 。</p><pre class="programlisting">-- Note envelope and convexhull are more or less the same
SELECT ST_AsText(ST_ConvexHull(rast)) As convhull,
    ST_AsText(ST_Envelope(rast)) As env
FROM dummy_rast WHERE rid=1;

                        convhull                        |                env
--------------------------------------------------------+------------------------------------
 POLYGON((0.5 0.5,20.5 0.5,20.5 60.5,0.5 60.5,0.5 0.5)) | POLYGON((0 0,20 0,20 60,0 60,0 0))
                </pre><pre class="programlisting">-- now we skew the raster
-- note how the convex hull and envelope are now different
SELECT ST_AsText(ST_ConvexHull(rast)) As convhull,
    ST_AsText(ST_Envelope(rast)) As env
FROM (SELECT ST_SetRotation(rast, 0.1, 0.1) As rast
    FROM dummy_rast WHERE rid=1) As foo;

                        convhull                        |                env
--------------------------------------------------------+------------------------------------
 POLYGON((0.5 0.5,20.5 1.5,22.5 61.5,2.5 60.5,0.5 0.5)) | POLYGON((0 0,22 0,22 61,0 61,0 0))
                    </pre></div><div class="refsection" id="idm36043"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>, <a class="xref" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a>, <a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a> </p></div></div><div class="refentry" id="RT_ST_DumpAsPolygons"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DumpAsPolygons — 从给定的栅格带中返回一组 geomval (geom,val) 行。 如果未指定波段 编号，则波段编号默认为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof geomval <strong class="fsfunc">ST_DumpAsPolygons</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band_num=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" id="idm36068"><h2>描述</h2><p>这是一个集合返回函数（SRF）。 它返回一组 geomval 行，由几何图形 (geom) 和像素带值 (val) 组成。 每个多边形是该带的所有像素的并集，这些像素具有由 val 表示的相同像素值。</p><p>ST_DumpAsPolygon 对于多边形化栅格很有用。 它与 GROUP BY 相反，它创建新行。 例如，它可用于将单个栅格扩展为多个 POLYGONS/MULTIPOLYGONS。</p><p>改变 3.3.0，禁用验证和修复以提高性能。 可能会导致无效的几何图形。</p><p class="availability">可用性：需要 GDAL 1.7 或更高版本。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果没有为波段设置数据值，则不会返回具有该值的像素，除非 except_nodata_value=false。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您只关心栅格中具有给定值的像素计数，则使用 <a class="xref" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a> 速度更快。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这与 ST_PixelAsPolygons 不同，在 ST_PixelAsPolygons 中，无论像素值如何，都会为每个像素返回一个几何图形。 </p></td></tr></table></div></div><div class="refsection" id="idm36081"><h2>示例</h2><pre class="programlisting">-- this syntax requires PostgreSQL 9.3+
SELECT val, ST_AsText(geom) As geomwkt
FROM (
SELECT dp.*
FROM dummy_rast, LATERAL ST_DumpAsPolygons(rast) AS dp
WHERE rid = 2
) As foo
WHERE val BETWEEN 249 and 251
ORDER BY val;

 val |                                                       geomwkt
-----+--------------------------------------------------------------------------
 249 | POLYGON((3427927.95 5793243.95,3427927.95 5793243.85,3427928 5793243.85,
        3427928 5793243.95,3427927.95 5793243.95))
 250 | POLYGON((3427927.75 5793243.9,3427927.75 5793243.85,3427927.8 5793243.85,
        3427927.8 5793243.9,3427927.75 5793243.9))
 250 | POLYGON((3427927.8 5793243.8,3427927.8 5793243.75,3427927.85 5793243.75,
        3427927.85 5793243.8, 3427927.8 5793243.8))
 251 | POLYGON((3427927.75 5793243.85,3427927.75 5793243.8,3427927.8 5793243.8,
        3427927.8 5793243.85,3427927.75 5793243.85))
                    </pre></div><div class="refsection" id="idm36084"><h2>相关信息</h2><p><a class="xref" href="#geomval" title="geomval">geomval</a>, <a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a>, <a class="xref" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a> </p></div></div><div class="refentry" id="RT_ST_Envelope"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Envelope — 返回栅格范围的多边形表示形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Envelope</strong>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" id="idm36103"><h2>描述</h2><p>返回栅格范围的多边形表示形式（以 srid 定义的空间坐标单位表示）。 它是一个表示为多边形的 float8 最小边界框。 </p><p>多边形由边界框的角点定义((<code class="varname">MINX</code>, <code class="varname">MINY</code>), (<code class="varname">MINX</code>, <code class="varname">MAXY</code>), (<code class="varname">MAXX</code>, <code class="varname">MAXY</code>), (<code class="varname">MAXX</code>, <code class="varname">MINY</code>), (<code class="varname">MINX</code>, <code class="varname">MINY</code>)) </p></div><div class="refsection" id="idm36117"><h2>示例</h2><pre class="programlisting">SELECT rid, ST_AsText(ST_Envelope(rast)) As envgeomwkt
FROM dummy_rast;

 rid |                                         envgeomwkt
-----+--------------------------------------------------------------------
   1 | POLYGON((0 0,20 0,20 60,0 60,0 0))
   2 | POLYGON((3427927 5793243,3427928 5793243,
        3427928 5793244,3427927 5793244, 3427927 5793243))
                    </pre></div><div class="refsection" id="idm36120"><h2>相关信息</h2><p><a class="xref" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a> </p></div></div><div class="refentry" id="RT_ST_MinConvexHull"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_MinConvexHull — 返回栅格的凸包几何形状（不包括 NODATA 像素）。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_MinConvexHull</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm36141"><h2>描述</h2><p>返回栅格的凸包几何形状（不包括 NODATA 像素）。 如果 <code class="varname">nband </code>为 NULL，则考虑栅格的所有波段。 </p><p class="availability">可用性：2.1.0 </p></div><div class="refsection" id="idm36146"><h2>示例</h2><pre class="programlisting">WITH foo AS (
    SELECT
        ST_SetValues(
            ST_SetValues(
                ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(9, 9, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0), 2, '8BUI', 1, 0),
                1, 1, 1,
                ARRAY[
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 1, 0, 0, 0, 0, 1],
                    [0, 0, 0, 1, 1, 0, 0, 0, 0],
                    [0, 0, 0, 1, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0]
                ]::double precision[][]
            ),
            2, 1, 1,
            ARRAY[
                [0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 1, 0, 0, 0],
                [0, 0, 0, 0, 1, 1, 0, 0, 0],
                [0, 0, 0, 0, 0, 1, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 1, 0, 0, 0, 0, 0, 0]
            ]::double precision[][]
        ) AS rast
)
SELECT
    ST_AsText(ST_ConvexHull(rast)) AS hull,
    ST_AsText(ST_MinConvexHull(rast)) AS mhull,
    ST_AsText(ST_MinConvexHull(rast, 1)) AS mhull_1,
    ST_AsText(ST_MinConvexHull(rast, 2)) AS mhull_2
FROM foo

               hull               |                mhull                |               mhull_1               |               mhull_2
----------------------------------+-------------------------------------+-------------------------------------+-------------------------------------
 POLYGON((0 0,9 0,9 -9,0 -9,0 0)) | POLYGON((0 -3,9 -3,9 -9,0 -9,0 -3)) | POLYGON((3 -3,9 -3,9 -6,3 -6,3 -3)) | POLYGON((0 -3,6 -3,6 -9,0 -9,0 -3))
                    </pre></div><div class="refsection" id="idm36149"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>, <a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a> </p></div></div><div class="refentry" id="RT_ST_Polygon"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Polygon — 返回由具有非无数据值的像素值的像素并集形成的多多边形几何体。 如果未指定波段 编号，则 波段 编号默认为 1。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <strong class="fsfunc">ST_Polygon</strong>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band_num=1</var><code>)</code>;</p></div></div><div class="refsection" id="idm36171"><h2>描述</h2><p>改变 3.3.0，禁用验证和修复以提高性能。 可能会导致无效的几何图形。</p><p class="availability">可用性：0.1.6 需要 GDAL 1.7 或更高版本。</p><p class="enhanced">增强：2.1.0 提高速度（完全基于 C）并且确保返回的多边形有效。</p><p class="changed">更改：2.1.0 在之前的版本中有时会返回多边形，更改为始终返回多多边形。</p></div><div class="refsection" id="idm36177"><h2>示例</h2><pre class="programlisting">-- by default no data band value is 0 or not set, so polygon will return a square polygon
SELECT ST_AsText(ST_Polygon(rast)) As geomwkt
FROM dummy_rast
WHERE rid = 2;

geomwkt
--------------------------------------------
MULTIPOLYGON(((3427927.75 5793244,3427928 5793244,3427928 5793243.75,3427927.75 5793243.75,3427927.75 5793244)))


-- now we change the no data value of first band
UPDATE dummy_rast SET rast = ST_SetBandNoDataValue(rast,1,254)
WHERE rid = 2;
SELECt rid, ST_BandNoDataValue(rast)
from dummy_rast where rid = 2;

-- ST_Polygon excludes the pixel value 254 and returns a multipolygon
SELECT ST_AsText(ST_Polygon(rast)) As geomwkt
FROM dummy_rast
WHERE rid = 2;

geomwkt
---------------------------------------------------------
MULTIPOLYGON(((3427927.9 5793243.95,3427927.85 5793243.95,3427927.85 5793244,3427927.9 5793244,3427927.9 5793243.95)),((3427928 5793243.85,3427928 5793243.8,3427927.95 5793243.8,3427927.95 5793243.85,3427927.9 5793243.85,3427927.9 5793243.9,3427927.9 5793243.95,3427927.95 5793243.95,3427928 5793243.95,3427928 5793243.85)),((3427927.8 5793243.75,3427927.75 5793243.75,3427927.75 5793243.8,3427927.75 5793243.85,3427927.75 5793243.9,3427927.75 5793244,3427927.8 5793244,3427927.8 5793243.9,3427927.8 5793243.85,3427927.85 5793243.85,3427927.85 5793243.8,3427927.85 5793243.75,3427927.8 5793243.75)))

-- Or if you want the no data value different for just one time

SELECT ST_AsText(
    ST_Polygon(
        ST_SetBandNoDataValue(rast,1,252)
        )
    ) As geomwkt
FROM dummy_rast
WHERE rid =2;

geomwkt
---------------------------------
MULTIPOLYGON(((3427928 5793243.85,3427928 5793243.8,3427928 5793243.75,3427927.85 5793243.75,3427927.8 5793243.75,3427927.8 5793243.8,3427927.75 5793243.8,3427927.75 5793243.85,3427927.75 5793243.9,3427927.75 5793244,3427927.8 5793244,3427927.85 5793244,3427927.9 5793244,3427928 5793244,3427928 5793243.95,3427928 5793243.85),(3427927.9 5793243.9,3427927.9 5793243.85,3427927.95 5793243.85,3427927.95 5793243.9,3427927.9 5793243.9)))
                    </pre></div><div class="refsection" id="idm36180"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a> </p></div></div></section><section class="section" id="RT_Operators"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.16. 栅格运算符</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_Raster_Intersect">&amp;&amp;</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框相交，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#RT_Raster_OverLeft">&amp;&lt;</a></span><span class="refpurpose"> — 如果 A 的边界框位于 B 的左侧，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#RT_Raster_OverRight">&amp;&gt;</a></span><span class="refpurpose"> — 如果 A 的边界框位于 B 的右侧，则返回<code class="varname"> TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#RT_Raster_EQ">=</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框相同，则返回 <code class="varname">TRUE</code>。 使用双精度边界框。</span></li><li><span class="refentrytitle"><a href="#RT_Raster_Contained">@</a></span><span class="refpurpose"> — 如果 A 的边界框包含在 B 的边界框中，则返回 <code class="varname">TRUE</code>。 使用双精度边界框。</span></li><li><span class="refentrytitle"><a href="#RT_Raster_Same">~=</a></span><span class="refpurpose"> — 如果 A 的边界框与 B 的边界框相同，则返回 <code class="varname">TRUE</code>。</span></li><li><span class="refentrytitle"><a href="#RT_Raster_Contains">~</a></span><span class="refpurpose"> — 如果 A 的边界框包含 B 的边界框，则返回<code class="varname"> TRUE</code>。 使用双精度边界框。</span></li></ul></div><div class="refentry" id="RT_Raster_Intersect"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&amp; — 如果 A 的边界框与 B 的边界框相交，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> raster  <var class="pdparam">A</var> ,  geometry  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&amp;</strong>(</code> geometry  <var class="pdparam">B</var> ,  raster  <var class="pdparam">A</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36221"><h2>描述</h2><p><code class="varname">&amp;&amp;</code> 运算符在栅格/几何体 A 的边界框与栅格/几何体 B 的边界框相交时返回 <code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用栅格上可能可用的任何索引。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm36229"><h2>示例</h2><pre class="programlisting">SELECT A.rid As a_rid, B.rid As b_rid, A.rast &amp;&amp; B.rast As intersect
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B LIMIT 3;

 a_rid | b_rid | intersect
-------+-------+---------
     2 |     2 | t
     2 |     3 | f
     2 |     1 | f
</pre></div></div><div class="refentry" id="RT_Raster_OverLeft"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&lt; — 如果 A 的边界框位于 B 的左侧，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&lt;</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36248"><h2>描述</h2><p><code class="varname">&amp;&lt;</code> 运算符在栅格 A 的边界框与栅格 B 的边界框重叠或位于栅格 B 的边界框的左侧时返回 <code class="varname">TRUE</code>，或者更准确地说，在栅格 B 的边界框的右侧没有重叠时返回 TRUE。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用栅格上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm36255"><h2>示例</h2><pre class="programlisting">
SELECT A.rid As a_rid, B.rid As b_rid, A.rast &amp;&lt; B.rast As overleft
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B;

a_rid | b_rid | overleft
------+-------+----------
    2 |     2 | t
    2 |     3 | f
    2 |     1 | f
    3 |     2 | t
    3 |     3 | t
    3 |     1 | f
    1 |     2 | t
    1 |     3 | t
    1 |     1 | t

</pre></div></div><div class="refentry" id="RT_Raster_OverRight"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>&amp;&gt; — 如果 A 的边界框位于 B 的右侧，则返回<code class="varname"> TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">&amp;&gt;</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36274"><h2>描述</h2><p><code class="varname">&amp;&gt;</code> 运算符在栅格 A 的边界框与栅格 B 的边界框重叠或位于栅格 B 的边界框的右侧时返回 <code class="varname">TRUE</code>，或者更准确地说，在栅格 B 的边界框的左侧没有重叠时返回 TRUE。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将利用几何上可能可用的任何索引。</p></td></tr></table></div></div><div class="refsection" id="idm36281"><h2>示例</h2><pre class="programlisting">
SELECT A.rid As a_rid, B.rid As b_rid, A.rast &amp;
&gt; B.rast As overright
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B;

 a_rid | b_rid | overright
-------+-------+----------
     2 |     2 | t
     2 |     3 | t
     2 |     1 | t
     3 |     2 | f
     3 |     3 | t
     3 |     1 | f
     1 |     2 | f
     1 |     3 | t
     1 |     1 | t

</pre></div></div><div class="refentry" id="RT_Raster_EQ"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>= — 如果 A 的边界框与 B 的边界框相同，则返回 <code class="varname">TRUE</code>。 使用双精度边界框。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">=</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36300"><h2>描述</h2><p><code class="varname">=</code> 运算符在栅格 A 的边界框与栅格 B 的边界框相同时返回 <code class="varname">TRUE</code>。PostgreSQL 使用为栅格定义的 =、&lt; 和 &gt; 运算符来执行栅格的内部排序和比较（例如，在 GROUP BY 或 ORDER BY 子句中）。</p><div class="caution"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Caution]" src="images/caution.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>这个操作符不会使用可能存在于栅格上的任何索引。请使用 <a class="xref" href="#RT_Raster_Same" title="~=">~=</a> 代替。这个操作符主要存在是为了可以按栅格列进行分组。</p></td></tr></table></div><p class="availability">可用性：2.1.0 </p></div><div class="refsection" id="idm36309"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Same" title="~=">~=</a></p></div></div><div class="refentry" id="RT_Raster_Contained"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>@ — 如果 A 的边界框包含在 B 的边界框中，则返回 <code class="varname">TRUE</code>。 使用双精度边界框。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> geometry  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">@</strong>(</code> raster  <var class="pdparam">B</var> ,  geometry  <var class="pdparam">A</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36347"><h2>描述</h2><p><code class="varname">@</code> 运算符在栅格/几何体 A 的边界框被栅格/几何体 B 的边界框包含时返回 <code class="varname">TRUE</code>。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将使用栅格上的空间索引。 </p></td></tr></table></div><p class="availability">可用性：2.0.0 raster@raster、raster@geometry 引入</p><p class="availability">可用性：2.0.5 geometry @ raster引入 </p></div><div class="refsection" id="idm36356"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Contains" title="~">~</a></p></div></div><div class="refentry" id="RT_Raster_Same"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~= — 如果 A 的边界框与 B 的边界框相同，则返回 <code class="varname">TRUE</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~=</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36376"><h2>描述</h2><p><code class="varname">~=</code> 运算符在栅格 A 的边界框与栅格 B 的边界框相同时返回 <code class="varname">TRUE</code>。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用栅格上可能可用的任何索引。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm36384"><h2>示例</h2><p>非常有用的用例是获取两组具有相同块但代表不同主题的单波段栅格并创建多波段栅格</p><pre class="programlisting">SELECT ST_AddBand(prec.rast, alt.rast) As new_rast
    FROM prec INNER JOIN alt ON (prec.rast ~= alt.rast);
        </pre></div><div class="refsection" id="idm36388"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_Raster_EQ" title="=">=</a></p></div></div><div class="refentry" id="RT_Raster_Contains"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>~ — 如果 A 的边界框包含 B 的边界框，则返回<code class="varname"> TRUE</code>。 使用双精度边界框。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> raster  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> geometry  <var class="pdparam">A</var> ,  raster  <var class="pdparam">B</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">~</strong>(</code> raster  <var class="pdparam">B</var> ,  geometry  <var class="pdparam">A</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36427"><h2>描述</h2><p>如果栅格/几何 A 的边界框包含栅格/几何 B 的边界框，则<code class="varname"> ~</code> 运算符返回 <code class="varname">TRUE</code>。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作符将使用栅格上的空间索引。 </p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm36435"><h2>相关信息</h2><p><a class="xref" href="#RT_Raster_Contained" title="@">@</a></p></div></div></section><section class="section" id="Raster_Relationships"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.17. 栅格和栅格波段空间关系</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#RT_ST_Contains">ST_Contains</a></span><span class="refpurpose"> — 如果栅格 rastB 中没有点位于栅格 rastA 的外部且 rastB 的内部至少有一个点位于 rastA 的内部，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_ContainsProperly">ST_ContainsProperly</a></span><span class="refpurpose"> — 如果 rastB 与 rastA 的内部相交，但不与 rastA 的边界或外部相交，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Covers">ST_Covers</a></span><span class="refpurpose"> — 如果栅格 rastB 中没有点位于栅格 rastA 之外，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_CoveredBy">ST_CoveredBy</a></span><span class="refpurpose"> — 如果栅格 rastA 中没有点位于栅格 rastB 之外，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Disjoint">ST_Disjoint</a></span><span class="refpurpose"> — 如果栅格 rastA 在空间上不与 rastB 相交，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Intersects">ST_Intersects</a></span><span class="refpurpose"> — 如果栅格 rastA 与栅格 rastB 空间相交，则返回 true。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Overlaps">ST_Overlaps</a></span><span class="refpurpose"> — 如果栅格 rastA 和 rastB 相交，但其中一个不完全包含另一个，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_Touches">ST_Touches</a></span><span class="refpurpose"> — 如果栅格 rastA 和 rastB 至少有一个共同点但它们的内部不相交，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_SameAlignment">ST_SameAlignment</a></span><span class="refpurpose"> — 如果栅格具有相同的倾斜、比例、空间参考和偏移（像素可以放在同一网格上而不切割成像素），则返回 true；如果没有注意细节问题，则返回 false。</span></li><li><span class="refentrytitle"><a href="#RT_ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a></span><span class="refpurpose"> — 返回说明栅格是否对齐的文本，如果未对齐，则说明原因。</span></li><li><span class="refentrytitle"><a href="#RT_ST_Within">ST_Within</a></span><span class="refpurpose"> — 如果栅格 rastA 中没有点位于栅格 rastB 的外部且 rastA 的内部至少有一个点位于 rastB 的内部，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_DWithin">ST_DWithin</a></span><span class="refpurpose"> — 如果栅格 rastA 和 rastB 彼此之间的距离在指定距离内，则返回 true。 </span></li><li><span class="refentrytitle"><a href="#RT_ST_DFullyWithin">ST_DFullyWithin</a></span><span class="refpurpose"> — 如果栅格 rastA 和 rastB 彼此完全在指定距离内，则返回 true。 </span></li></ul></div><div class="refentry" id="RT_ST_Contains"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Contains — 如果栅格 rastB 中没有点位于栅格 rastA 的外部且 rastB 的内部至少有一个点位于 rastA 的内部，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Contains</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Contains</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36471"><h2>描述</h2><p>栅格 rastA 包含 rastB 当且仅当 rastB 中没有点位于 rastA 的外部且 rastB 的内部至少有一个点位于 rastA 的内部时。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_Contains（ST_Polygon（raster），geometry）或 ST_Contains（geometry，ST_Polygon（raster））。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Contains() 是 ST_Within() 的逆函数。 因此，ST_Contains(rastA, rastB) 意味着 ST_Within(rastB, rastA)。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36481"><h2>示例</h2><pre class="programlisting">-- specified band numbers
SELECT r1.rid, r2.rid, ST_Contains(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 1;

NOTICE:  The first raster provided has no bands
 rid | rid | st_contains
-----+-----+-------------
   1 |   1 |
   1 |   2 | f
            </pre><pre class="programlisting">-- no band numbers specified
SELECT r1.rid, r2.rid, ST_Contains(r1.rast, r2.rast) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 1;
 rid | rid | st_contains
-----+-----+-------------
   1 |   1 | t
   1 |   2 | f
            </pre></div><div class="refsection" id="idm36485"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#RT_ST_Within" title="ST_Within">ST_Within</a> </p></div></div><div class="refentry" id="RT_ST_ContainsProperly"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_ContainsProperly — 如果 rastB 与 rastA 的内部相交，但不与 rastA 的边界或外部相交，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_ContainsProperly</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_ContainsProperly</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36520"><h2>描述</h2><p>如果 rastB 与 rastA 的内部相交，但不与 rastA 的边界或外部相交，则栅格 rastA 正确包含 rastB。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><p>栅格 rastA 未正确包含其自身，但确实包含其自身。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_ContainsProperly（ST_Polygon（raster），geometry）或 ST_ContainsProperly（geometry，ST_Polygon（raster））。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36529"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_ContainsProperly(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_containsproperly
-----+-----+---------------------
   2 |   1 | f
   2 |   2 | f
            </pre></div><div class="refsection" id="idm36532"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a> </p></div></div><div class="refentry" id="RT_ST_Covers"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Covers — 如果栅格 rastB 中没有点位于栅格 rastA 之外，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Covers</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Covers</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36567"><h2>描述</h2><p>栅格 rastA 覆盖 rastB 当且仅当 rastB 中没有点位于 rastA 的外部。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_Covers（ST_Polygon（raster），geometry）或 ST_Covers（geometry，ST_Polygon（raster））。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36575"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_Covers(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_covers
-----+-----+-----------
   2 |   1 | f
   2 |   2 | t
            </pre></div><div class="refsection" id="idm36578"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> </p></div></div><div class="refentry" id="RT_ST_CoveredBy"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_CoveredBy — 如果栅格 rastA 中没有点位于栅格 rastB 之外，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_CoveredBy</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_CoveredBy</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36613"><h2>描述</h2><p>当且仅当 rastA 中没有点位于 rastB 的外部时，栅格 rastA 才会被 rastB 覆盖。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_CoveredBy(ST_Polygon(raster), geometry) 或 ST_CoveredBy(geometry, ST_Polygon(raster))。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36621"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_CoveredBy(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_coveredby
-----+-----+--------------
   2 |   1 | f
   2 |   2 | t
            </pre></div><div class="refsection" id="idm36624"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a> </p></div></div><div class="refentry" id="RT_ST_Disjoint"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Disjoint — 如果栅格 rastA 在空间上不与 rastB 相交，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Disjoint</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Disjoint</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36659"><h2>描述</h2><p>如果栅格 rastA 和 rastB 不共享任何空间，则它们是脱节的。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该函数不使用任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_Disjoint（ST_Polygon（raster），geometry）。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36667"><h2>示例</h2><pre class="programlisting">-- rid = 1 has no bands, hence the NOTICE and the NULL value for st_disjoint
SELECT r1.rid, r2.rid, ST_Disjoint(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

NOTICE:  The second raster provided has no bands
 rid | rid | st_disjoint
-----+-----+-------------
   2 |   1 |
   2 |   2 | f
            </pre><pre class="programlisting">-- this time, without specifying band numbers
SELECT r1.rid, r2.rid, ST_Disjoint(r1.rast, r2.rast) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_disjoint
-----+-----+-------------
   2 |   1 | t
   2 |   2 | f
            </pre></div><div class="refsection" id="idm36671"><h2>相关信息</h2><p>
                <a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
            </p></div></div><div class="refentry" id="RT_ST_Intersects"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Intersects — 如果栅格 rastA 与栅格 rastB 空间相交，则返回 true。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> raster  <var class="pdparam">rast</var> ,  integer  <var class="pdparam">nband</var> ,  geometry  <var class="pdparam">geommin</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> raster  <var class="pdparam">rast</var> ,  geometry  <var class="pdparam">geommin</var> ,  integer  <var class="pdparam">nband=NULL</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Intersects</strong>(</code> geometry  <var class="pdparam">geommin</var> ,  raster  <var class="pdparam">rast</var> ,  integer  <var class="pdparam">nband=NULL</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36741"><h2>描述</h2><p>如果栅格 rastA 与栅格 rastB 空间相交，则返回 true。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><p>增强：2.0.0引入了 支持栅格/栅格相交。 </p><div class="warning"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Warning]" src="images/warning.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>已更改：2.1.0 ST_Intersects（raster，geometry）变体的行为已更改以匹配 ST_Intersects（geometry，raster）的行为。 </p></td></tr></table></div></div><div class="refsection" id="idm36749"><h2>示例</h2><pre class="programlisting">-- different bands of same raster
SELECT ST_Intersects(rast, 2, rast, 3) FROM dummy_rast WHERE rid = 2;

 st_intersects
---------------
 t
            </pre></div><div class="refsection" id="idm36752"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> </p></div></div><div class="refentry" id="RT_ST_Overlaps"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Overlaps — 如果栅格 rastA 和 rastB 相交，但其中一个不完全包含另一个，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Overlaps</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Overlaps</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36787"><h2>描述</h2><p>如果栅格 rastA 在空间上与栅格 rastB 重叠，则返回 true。 这意味着 rastA 和 rastB 相交，但其中一个不完全包含另一个。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_Overlaps（ST_Polygon（raster），geometry）。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36795"><h2>示例</h2><pre class="programlisting">-- comparing different bands of same raster
SELECT ST_Overlaps(rast, 1, rast, 2) FROM dummy_rast WHERE rid = 2;

 st_overlaps
-------------
 f
            </pre></div><div class="refsection" id="idm36798"><h2>相关信息</h2><p>
                <a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
            </p></div></div><div class="refentry" id="RT_ST_Touches"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Touches — 如果栅格 rastA 和 rastB 至少有一个共同点但它们的内部不相交，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Touches</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Touches</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36832"><h2>描述</h2><p>如果栅格 rastA 在空间上接触栅格 rastB，则返回 true。 这意味着 rastA 和 rastB 至少有一个共同点，但它们的内部不相交。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_Touches(ST_Polygon(raster)，geometry)。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36840"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_Touches(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_touches
-----+-----+------------
   2 |   1 | f
   2 |   2 | f
            </pre></div><div class="refsection" id="idm36843"><h2>相关信息</h2><p>
                <a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
            </p></div></div><div class="refentry" id="RT_ST_SameAlignment"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_SameAlignment — 如果栅格具有相同的倾斜、比例、空间参考和偏移（像素可以放在同一网格上而不切割成像素），则返回 true；如果没有注意细节问题，则返回 false。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_SameAlignment</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_SameAlignment</strong>(</code> double precision  <var class="pdparam">ulx1</var> ,  double precision  <var class="pdparam">uly1</var> ,  double precision  <var class="pdparam">scalex1</var> ,  double precision  <var class="pdparam">scaley1</var> ,  double precision  <var class="pdparam">skewx1</var> ,  double precision  <var class="pdparam">skewy1</var> ,  double precision  <var class="pdparam">ulx2</var> ,  double precision  <var class="pdparam">uly2</var> ,  double precision  <var class="pdparam">scalex2</var> ,  double precision  <var class="pdparam">scaley2</var> ,  double precision  <var class="pdparam">skewx2</var> ,  double precision  <var class="pdparam">skewy2</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_SameAlignment</strong>(</code> raster set  <var class="pdparam">rastfield</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36907"><h2>描述</h2><p>非聚合版本（变体 1 和 2）：如果两个栅格（直接提供或使用左上角、比例、倾斜和 srid 的值制作）具有相同的比例、倾斜、srid 以及至少其中之一，则返回 true ，一个栅格的任何像素的四个角落在另一个栅格的网格的任何角上。 如果不这样做则返回 false 并详细说明对齐问题的通知。 </p><p>聚合版本（变体 3）：从一组栅格中，如果该组中的所有栅格都对齐，则返回 true。 ST_SameAlignment() 函数是 PostgreSQL 术语中的“聚合”函数。 这意味着它对数据行进行操作，与 SUM() 和 AVG() 函数的操作方式相同。 </p><p class="availability">可用性: 2.0.0</p><p class="enhanced">增强：2.1.0 添加聚合变体</p></div><div class="refsection" id="idm36913"><h2>示例：栅格</h2><pre class="programlisting">SELECT ST_SameAlignment(
    ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0),
    ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0)
) as sm;

sm
----
t
</pre><pre class="programlisting">SELECT ST_SameAlignment(A.rast,b.rast)
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B;

 NOTICE:  The two rasters provided have different SRIDs
NOTICE:  The two rasters provided have different SRIDs
 st_samealignment
------------------
 t
 f
 f
 f
</pre></div><div class="refsection" id="idm36917"><h2>相关信息</h2><p><a class="xref" href="#RT_Loading_Rasters" title="10.1. 加载和创建栅格">Section 10.1, “加载和创建栅格”</a>, <a class="xref" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a>, <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a> </p></div></div><div class="refentry" id="RT_ST_NotSameAlignmentReason"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_NotSameAlignmentReason — 返回说明栅格是否对齐的文本，如果未对齐，则说明原因。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">ST_NotSameAlignmentReason</strong>(</code>raster <var class="pdparam">rastA</var>, raster <var class="pdparam">rastB</var><code>)</code>;</p></div></div><div class="refsection" id="idm36938"><h2>描述</h2><p>返回说明栅格是否对齐的文本，如果未对齐，则说明原因。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果栅格未对齐的原因有多种，则仅返回一个原因（第一个失败的测试）。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36944"><h2>示例</h2><pre class="programlisting">SELECT
    ST_SameAlignment(
        ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0),
        ST_MakeEmptyRaster(1, 1, 0, 0, 1.1, 1.1, 0, 0)
    ),
    ST_NotSameAlignmentReason(
        ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0),
        ST_MakeEmptyRaster(1, 1, 0, 0, 1.1, 1.1, 0, 0)
    )
;

 st_samealignment |            st_notsamealignmentreason
------------------+-------------------------------------------------
 f                | The rasters have different scales on the X axis
(1 row)
                </pre></div><div class="refsection" id="idm36947"><h2>相关信息</h2><p><a class="xref" href="#RT_Loading_Rasters" title="10.1. 加载和创建栅格">Section 10.1, “加载和创建栅格”</a>, <a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> </p></div></div><div class="refentry" id="RT_ST_Within"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_Within — 如果栅格 rastA 中没有点位于栅格 rastB 的外部且 rastA 的内部至少有一个点位于 rastB 的内部，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_Within</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_Within</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> <code>)</code>;</p></div></div><div class="refsection" id="idm36982"><h2>描述</h2><p>栅格 rastA 位于 rastB 内当且仅当 rastA 中没有点位于 rastB 的外部且 rastA 内部的至少一个点位于 rastB 的内部时。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_Within（ST_Polygon（raster），geometry）或 ST_Within（geometry，ST_Polygon（raster））。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>ST_Within() 是 ST_Contains() 的逆函数。 因此，ST_Within(rastA, rastB) 意味着 ST_Contains(rastB, rastA)。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm36992"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_Within(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_within
-----+-----+-----------
   2 |   1 | f
   2 |   2 | t
            </pre></div><div class="refsection" id="idm36995"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> </p></div></div><div class="refentry" id="RT_ST_DWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DWithin — 如果栅格 rastA 和 rastB 彼此之间的距离在指定距离内，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_DWithin</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> ,  double precision  <var class="pdparam">distance_of_srid</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_DWithin</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> ,  double precision  <var class="pdparam">distance_of_srid</var> <code>)</code>;</p></div></div><div class="refsection" id="idm37038"><h2>描述</h2><p>如果栅格 rastA 和 rastB 彼此之间的距离在指定距离内，则返回 true。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><p>距离以栅格空间参考系定义的单位指定。 为了使此函数有意义，源栅格必须具有相同的坐标投影并具有相同的 SRID。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_DWithin(ST_Polygon(raster)，geometry)。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm37047"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_DWithin(r1.rast, 1, r2.rast, 1, 3.14) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_dwithin
-----+-----+------------
   2 |   1 | f
   2 |   2 | t
            </pre></div><div class="refsection" id="idm37050"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Within" title="ST_Within">ST_Within</a>, <a class="xref" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> </p></div></div><div class="refentry" id="RT_ST_DFullyWithin"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>ST_DFullyWithin — 如果栅格 rastA 和 rastB 彼此完全在指定距离内，则返回 true。 </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">ST_DFullyWithin</strong>(</code> raster  <var class="pdparam">rastA</var> ,  integer  <var class="pdparam">nbandA</var> ,  raster  <var class="pdparam">rastB</var> ,  integer  <var class="pdparam">nbandB</var> ,  double precision  <var class="pdparam">distance_of_srid</var> <code>)</code>;</p><p><code class="funcdef">boolean <strong class="fsfunc">ST_DFullyWithin</strong>(</code> raster  <var class="pdparam">rastA</var> ,  raster  <var class="pdparam">rastB</var> ,  double precision  <var class="pdparam">distance_of_srid</var> <code>)</code>;</p></div></div><div class="refsection" id="idm37091"><h2>描述</h2><p>如果栅格 rastA 和 rastB 彼此完全在指定距离内，则返回 true。 如果未提供波段编号（或设置为 NULL），则测试中仅考虑栅格的凸包。 如果提供了波段编号，则测试中仅考虑那些具有值（而不是 NODATA）的像素。 </p><p>距离以栅格空间参考系定义的单位指定。 为了使此函数有意义，源栅格必须具有相同的坐标投影并具有相同的 SRID。 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该操作数将利用栅格上可能可用的任何索引。 </p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>要测试栅格和几何图形的空间关系，请在栅格上使用 ST_Polygon，例如 ST_DFullyWithin(ST_Polygon(raster)，geometry)。 </p></td></tr></table></div><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm37100"><h2>示例</h2><pre class="programlisting">SELECT r1.rid, r2.rid, ST_DFullyWithin(r1.rast, 1, r2.rast, 1, 3.14) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_dfullywithin
-----+-----+-----------------
   2 |   1 | f
   2 |   2 | t
            </pre></div><div class="refsection" id="idm37103"><h2>相关信息</h2><p><a class="xref" href="#RT_ST_Within" title="ST_Within">ST_Within</a>, <a class="xref" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a> </p></div></div></section><section class="section" id="Raster_Tips"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.18. 栅格提示</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节记录了与 PostGIS Raster 相关的各种问题和技巧。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#outdb">11.18.1. Out-DB 栅格</a></span></li></ul></div><section class="section" id="outdb"><div class="titlepage"><div><div><h3 class="title">11.18.1. Out-DB 栅格</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#gdal_readdir">11.18.1.1. 包含许多文件的目录</a></span></li><li><span class="section"><a href="#max_open_files">11.18.1.2. 最大打开文件数</a></span></li></ul></div><section class="section" id="gdal_readdir"><div class="titlepage"><div><div><h4 class="title">11.18.1.1. 包含许多文件的目录</h4></div></div></div><p>当 GDAL 打开一个文件时，GDAL 会立即扫描该文件的目录以构建其他文件的目录。 如果此目录包含许多文件（例如数千、数百万），则打开该文件会变得非常慢（特别是如果该文件恰好位于 NFS 等网络驱动器上）。 </p><p>为了控制此行为，GDAL 提供了以下环境变量： <a class="link" href="https://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_DISABLE_READDIR_ON_OPEN" target="_top">GDAL_DISABLE_READDIR_ON_OPEN</a>。 将 <code class="varname">GDAL_DISABLE_READDIR_ON_OPEN</code> 设置为<code class="varname"> TRUE </code>以禁用目录扫描。 </p><p>在 Ubuntu 中（假设您使用的是 PostgreSQL 的 Ubuntu 软件包），可以设置 <code class="varname">GDAL_DISABLE_READDIR_ON_OPEN </code>在 <span class="emphasis"><em>/etc/postgresql/POSTGRESQL_VERSION/CLUSTER_NAME/environment </em></span>中（其中 POSTGRESQL_VERSION 是 PostgreSQL 的版本，例如 9.6，CLUSTER_NAME 是集群的名称，例如 9.6）。 主数据库）。 您还可以在此处设置 PostGIS 环境变量。 </p><pre class="programlisting"># environment variables for postmaster process
# This file has the same syntax as postgresql.conf:
#  VARIABLE = simple_value
#  VARIABLE2 = 'any value!'
# I. e. you need to enclose any value which does not only consist of letters,
# numbers, and '-', '_', '.' in single quotes. Shell commands are not
# evaluated.
POSTGIS_GDAL_ENABLED_DRIVERS = 'ENABLE_ALL'

POSTGIS_ENABLE_OUTDB_RASTERS = 1

<span class="strong"><strong>GDAL_DISABLE_READDIR_ON_OPEN = 'TRUE'</strong></span>
                    </pre><p>
                </p></section><section class="section" id="max_open_files"><div class="titlepage"><div><div><h4 class="title">11.18.1.2. 最大打开文件数</h4></div></div></div><p>Linux 和 PostgreSQL 允许的最大打开文件数通常是相对保守的（通常是每个进程最多 1024 个打开文件），这是基于这样一种假设而设置的，即系统主要由人类用户使用。然而，对于 Out-DB栅格数据，一个有效的查询很容易超过这个限制（例如，一个包含了 10 年的栅格数据集，每天都有一个栅格包含了最低和最高温度数据，我们想要知道该数据集中某个像素的绝对最小和最大值）。 </p><p>最简单的更改是以下 PostgreSQL 设置：<a class="link" href="https://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAX-FILES-PER-PROCESS" target="_top">max_files_per_process</a>。 默认设置为 1000，这对于Out-DB栅格来说太低了。 安全的起始值可能是 65536，但这实际上取决于您的数据集以及针对这些数据集运行的查询。 此设置只能在服务器启动时进行，并且可能只能在 PostgreSQL 配置文件中进行（例如 Ubuntu 环境中的 <span class="emphasis"><em>/etc/postgresql/POSTGRESQL_VERSION/CLUSTER_NAME/postgresql.conf</em></span> ）。 </p><pre class="programlisting">...
# - Kernel Resource Usage -

<span class="strong"><strong>max_files_per_process = 65536</strong></span>           # min 25
                                        # (change requires restart)
...
                    </pre><p>
                </p><p>要做的主要更改是 Linux 内核的打开文件限制。 这有两个部分： </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>整个系统最大打开文件数</p></li><li class="listitem"><p>每个进程的最大打开文件数</p></li></ul></div><p>
                </p><section class="section" id="max_open_files_per_system"><div class="titlepage"><div><div><h5 class="title">11.18.1.2.1. 整个系统最大打开文件数</h5></div></div></div><p>您可以通过以下示例检查整个系统当前最大打开文件数： </p><pre class="programlisting">$ sysctl -a | grep fs.file-max
fs.file-max = 131072
                    </pre><p>如果返回的值不够大，请按照以下示例将文件添加到 <span class="emphasis"><em>/etc/sysctl.d/ </em></span>中： </p><pre class="programlisting">$ echo "fs.file-max = 6145324" &gt;&gt; /etc/sysctl.d/fs.conf

$ cat /etc/sysctl.d/fs.conf
fs.file-max = 6145324

$ sysctl -p --system
* Applying /etc/sysctl.d/fs.conf ...
fs.file-max = 2097152
* Applying /etc/sysctl.conf ...

$ sysctl -a | grep fs.file-max
fs.file-max = 6145324
                    </pre></section><section class="section" id="max_open_files_per_process"><div class="titlepage"><div><div><h5 class="title">11.18.1.2.2. 每个进程的最大打开文件数</h5></div></div></div><p>我们需要增加 PostgreSQL 服务器进程每个进程打开文件的最大数量。 </p><p>要查看当前 PostgreSQL 服务进程使用的最大打开文件数，请按照以下示例执行操作（确保 PostgreSQL 正在运行）： </p><pre class="programlisting">$ ps aux | grep postgres
postgres 31713  0.0  0.4 179012 17564 pts/0    S    Dec26   0:03 /home/dustymugs/devel/postgresql/sandbox/10/usr/local/bin/postgres -D /home/dustymugs/devel/postgresql/sandbox/10/pgdata
postgres 31716  0.0  0.8 179776 33632 ?        Ss   Dec26   0:01 postgres: checkpointer process
postgres 31717  0.0  0.2 179144  9416 ?        Ss   Dec26   0:05 postgres: writer process
postgres 31718  0.0  0.2 179012  8708 ?        Ss   Dec26   0:06 postgres: wal writer process
postgres 31719  0.0  0.1 179568  7252 ?        Ss   Dec26   0:03 postgres: autovacuum launcher process
postgres 31720  0.0  0.1  34228  4124 ?        Ss   Dec26   0:09 postgres: stats collector process
postgres 31721  0.0  0.1 179308  6052 ?        Ss   Dec26   0:00 postgres: bgworker: logical replication launcher

$ cat /proc/31718/limits
Limit                     Soft Limit           Hard Limit           Units
Max cpu time              unlimited            unlimited            seconds
Max file size             unlimited            unlimited            bytes
Max data size             unlimited            unlimited            bytes
Max stack size            8388608              unlimited            bytes
Max core file size        0                    unlimited            bytes
Max resident set          unlimited            unlimited            bytes
Max processes             15738                15738                processes
<span class="strong"><strong>Max open files            1024                 4096                 files</strong></span>
Max locked memory         65536                65536                bytes
Max address space         unlimited            unlimited            bytes
Max file locks            unlimited            unlimited            locks
Max pending signals       15738                15738                signals
Max msgqueue size         819200               819200               bytes
Max nice priority         0                    0
Max realtime priority     0                    0
Max realtime timeout      unlimited            unlimited            us
                    </pre><p>在上面的示例中，我们检查了进程 31718 的打开文件限制。无论是哪个 PostgreSQL 进程，它们中的任何一个都可以。 我们感兴趣的响应是<span class="emphasis"><em>最大打开文件数</em></span>。 </p><p>我们希望将<span class="emphasis"><em>最大打开文件数</em></span>的<span class="emphasis"><em>软限制</em></span>和<span class="emphasis"><em>硬限制</em></span>增加到大于我们为 PostgreSQL 设置 <code class="varname">max_files_per_process</code> 指定的值。 在我们的示例中，我们将<code class="varname"> max_files_per_process </code>设置为 65536。 </p><p>在 Ubuntu 中（假设您使用 Ubuntu 的 PostgreSQL 软件包），更改<span class="emphasis"><em>软限制</em></span>和<span class="emphasis"><em>硬限制</em></span>的最简单方法是编辑 <span class="strong"><strong>/etc/init.d/postgresql </strong></span>(SysV) 或<span class="strong"><strong> /lib/systemd/system/postgresql*.service</strong></span>（系统）。 </p><p>让我们首先解决 SysV Ubuntu 的情况，其中我们将<span class="strong"><strong> ulimit -H -n 262144 </strong></span>和 <span class="strong"><strong>ulimit -n 131072 </strong></span>添加到 <span class="strong"><strong>/etc/init.d/postgresql</strong></span>。 </p><pre class="programlisting">...
case "$1" in
    start|stop|restart|reload)
        if [ "$1" = "start" ]; then
            create_socket_directory
        fi
    if [ -z "`pg_lsclusters -h`" ]; then
        log_warning_msg 'No PostgreSQL clusters exist; see "man pg_createcluster"'
        exit 0
    fi
<span class="strong"><strong>
    ulimit -H -n 262144
    ulimit -n 131072
</strong></span>
    for v in $versions; do
        $1 $v || EXIT=$?
    done
    exit ${EXIT:-0}
        ;;
    status)
...
</pre><p>现在来解决 Ubuntu 中的 systemd 问题。我们将在每个<span class="strong"><strong>/lib/systemd/system/postgresql*.service</strong></span>文件的 <span class="strong"><strong>[Service]</strong></span>部分中添加 <span class="strong"><strong>LimitNOFILE=131072</strong></span>。 </p><pre class="programlisting">...
[Service]
<span class="strong"><strong>
LimitNOFILE=131072
</strong></span>
...

[Install]
WantedBy=multi-user.target
...
</pre><p>进行必要的 systemd 更改后，请确保重新加载守护进程 </p><pre class="programlisting">systemctl daemon-reload
</pre></section></section></section></section></section><section class="chapter" id="Extras"><div class="titlepage"><div><div><h1 class="title">Chapter 12. PostGIS 补充</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#Address_Standardizer">12.1. 地址标准化工具</a></span></li><li><span class="section"><a href="#Tiger_Geocoder">12.2. Tiger地理编码器</a></span></li></ul></div><p>本章记录了 PostGIS 源 tarball 和源存储库的 extras 文件夹中的功能。 这些并不总是与 PostGIS 二进制版本一起打包，但通常是基于 PL/pgSQL 或可以按原样运行的标准 shell 脚本。</p><section class="section" id="Address_Standardizer"><div class="titlepage"><div><div><h2 class="title" style="clear: both">12.1. 地址标准化工具</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#Address_Standardizer_Basics">12.1.1. 解析器如何工作</a></span></li><li><span class="section"><a href="#Address_Standardizer_Types">12.1.2. 地址标准化器类型</a></span></li><li><span class="section"><a href="#Address_Standardizer_Tables">12.1.3. 地址标准化表</a></span></li><li><span class="section"><a href="#Address_Standardizer_Functions">12.1.4. 地址标准化器功能</a></span></li></ul></div><p>这是 <a class="link" href="http://www.pagcgeo.org/docs/html/pagc-11.html" target="_top">PAGC 标准化器</a>的一个分支（这部分的原始代码是 <a class="link" href="http://sourceforge.net/p/pagc/code/360/tree/branches/sew-refactor/postgresql" target="_top">PAGC PostgreSQL 地址标准化器</a>）。 </p><p>地址标准化器是一个单行地址解析器，它获取输入地址并根据存储在表以及辅助 lex 和 gaz 表中的一组规则对其进行规范化。</p><p>该代码内置于一个名为 <code class="code">address_standardizer</code> 的 PostgreSQL 扩展库中，可以使用<code class="code"> CREATE EXTENSION address_standardizer;</code> 安装。 除了address_standardizer 扩展之外，还构建了一个名为<code class="code">address_standardizer_data_us</code> 扩展的示例数据扩展，其中包含US 数据的gaz、lex 和规则表。 该扩展可以通过以下方式安装：<code class="code">CREATE EXTENSION address_standardizer_data_us;</code></p><p>此扩展的代码可以在<code class="filename"> PostGIS extensions/address_standardizer </code>中找到，并且当前是独立的。</p><p>有关安装说明，请参阅：<a class="xref" href="#installing_pagc_address_standardizer" title="2.3. 安装和使用地址标准化工具">Section 2.3, “安装和使用地址标准化工具”</a>。</p><section class="section" id="Address_Standardizer_Basics"><div class="titlepage"><div><div><h3 class="title">12.1.1. 解析器如何工作</h3></div></div></div><p>解析器从右到左工作，首先查看邮政编码、州/省、城市的宏观元素，然后查看微观元素以确定我们是否正在处理门牌号、街道、十字路口或地标。 目前，它不查找国家/地区代码或名称，但将来可能会引入。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">国家代码</span></dt><dd><p>根据邮政编码为美国或加拿大，或者州/省为美国或加拿大，否则为美国</p></dd><dt><span class="term">邮政编码（Postcode）/邮政编码（zipcode）</span></dt><dd><p>这些是使用 Perl 兼容的正则表达式来识别的。 这些正则表达式当前位于 parseaddress-api.c 中，并且在需要时进行更改相对简单。</p></dd><dt><span class="term">州/省</span></dt><dd><p>这些是使用 Perl 兼容的正则表达式来识别的。 这些正则表达式当前位于 parseaddress-api.c 中，但将来可能会被移至包含中以便于维护。</p></dd></dl></div></section><section class="section" id="Address_Standardizer_Types"><div class="titlepage"><div><div><h3 class="title">12.1.2. 地址标准化器类型</h3></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了由 Address Standardizer 扩展安装的 PostgreSQL 数据类型。 请注意，我们描述了这些的强制转换行为，这非常重要，尤其是在设计您自己的函数时。 </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#stdaddr">stdaddr</a></span><span class="refpurpose"> — 由地址元素组成的复合类型。 这是<code class="varname"> standardize_address </code>函数的返回类型。</span></li></ul></div><div class="refentry" id="stdaddr"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>stdaddr — 由地址元素组成的复合类型。 这是<code class="varname"> standardize_address </code>函数的返回类型。</p></div><div class="refsection" id="idm37225"><h2>描述</h2><p>由地址元素组成的复合类型。 这是 <a class="xref" href="#standardize_address" title="standardize_address">standardize_address</a> 函数的返回类型。 一些元素描述借用自<a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12.html#ss12.1" target="_top"> PAGC 邮政属性</a>。</p><p>令牌编号表示<a class="xref" href="#rulestab" title="rules table">rules table</a>中的输出参考编号。</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要address_standardizer扩展。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">building</code></span></dt><dd><p>是文本（标记编号 <code class="code">0</code>）：指建筑物编号或名称。 未解析的建筑物标识符和类型。 大多数地址通常为空白。</p></dd><dt><span class="term"><code class="varname">house_num</code></span></dt><dd><p>这是一段文本（标记号码为 <code class="code">1</code>）：这是街道上的街道号码。例如， <span class="emphasis"><em>75</em></span>在<code class="code">75 State Street</code>中。</p></dd><dt><span class="term"><code class="varname">predir</code></span></dt><dd><p>是文本（标记编号 <code class="code">2</code>）：街道名称预指示，例如北、南、东、西等。</p></dd><dt><span class="term"><code class="varname">qual</code></span></dt><dd><p>是文本（标记编号 <code class="code">3</code>）：街道名称预修饰符示例 <span class="emphasis"><em>OLD</em></span> in <code class="code">3715 OLD HIGHWAY 99</code>。</p></dd><dt><span class="term"><code class="varname">pretype</code></span></dt><dd><p>是文本（标记编号 <code class="code">4</code>）：街道前缀类型</p></dd><dt><span class="term"><code class="varname">name</code></span></dt><dd><p>是文本（标记编号<code class="code"> 5</code>）：街道名称</p></dd><dt><span class="term"><code class="varname">suftype</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">6</code>）：街道后缀类型，例如 St、Ave、Cir。这是跟在根街道名称后面的街道类型。例如，<span class="emphasis"><em>STREET</em></span> 位于 <code class="code">75 State Street</code>中。</p></dd><dt><span class="term"><code class="varname">sufdir</code></span></dt><dd><p>是文本（标记编号 <code class="code">7</code>）：STREET POST-DIRECTIONAL 街道名称后面的方向修饰符。示例<span class="emphasis"><em>WEST</em></span> 位于<code class="code">3715 TENTH AVENUE WEST</code>中。</p></dd><dt><span class="term"><code class="varname">ruralroute</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">8</code>）：农村路线。例如， <span class="emphasis"><em>7</em></span>位于 <code class="code">RR 7</code>中。</p></dd><dt><span class="term"><code class="varname">extra</code></span></dt><dd><p>这是文本：额外信息，例如楼层号码。</p></dd><dt><span class="term"><code class="varname">city</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">10</code>）：例如，波士顿。</p></dd><dt><span class="term"><code class="varname">state</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">11</code>）：例如，<code class="code">MASSACHUSETTS</code></p></dd><dt><span class="term"><code class="varname">country</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">12</code>）：例如，<code class="code">USA</code></p></dd><dt><span class="term"><code class="varname">postcode</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">13</code>）：邮政编码（ZIP CODE）的示例：<code class="code">02109</code></p></dd><dt><span class="term"><code class="varname">box</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">14 和 15</code>）：邮政信箱号码的示例：<code class="code">02109</code></p></dd><dt><span class="term"><code class="varname">unit</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">17</code>）：公寓号码或套房号码的示例，例如，在 <span class="emphasis"><em>3B</em></span> 位于 <code class="code">APT 3B</code>中。</p></dd></dl></div></div></div></section><section class="section" id="Address_Standardizer_Tables"><div class="titlepage"><div><div><h3 class="title">12.1.3. 地址标准化表</h3></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>本节列出了 address_standardizer 用于规范化地址的 PostgreSQL 表格式。 请注意，这些表的名称不需要与此处引用的名称相同。 例如，您可以为每个国家/地区或您的自定义地理编码器设置不同的 lex、gaz、规则表。 这些表的名称被传递到地址标准化器函数中。 </p><p>打包的扩展<code class="varname">address_standardizer_data_us</code>包含用于标准化美国地址的数据。</p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#rulestab">rules table</a></span><span class="refpurpose"> — 规则表包含一组规则，将地址输入序列标记映射到标准化的输出序列。规则被定义为一组输入标记，后跟 -1（终止符），然后是一组输出标记，后跟 -1，后跟表示规则类型的数字，最后是规则的排名。</span></li><li><span class="refentrytitle"><a href="#lextab">lex table</a></span><span class="refpurpose"> — lex 表用于对字母数字输入进行分类，并将该输入与 (a) 输入标记（请参阅the section called “输入令牌”一节）和 (b) 标准化表示相关联。</span></li><li><span class="refentrytitle"><a href="#gaztab">gaz table</a></span><span class="refpurpose"> — gaz 表用于标准化地名，并将该输入与 (a) 输入令牌（请参阅“the section called “输入令牌””一节）和 (b) 标准化表示相关联。</span></li></ul></div><div class="refentry" id="rulestab"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>rules table — 规则表包含一组规则，将地址输入序列标记映射到标准化的输出序列。规则被定义为一组输入标记，后跟 -1（终止符），然后是一组输出标记，后跟 -1，后跟表示规则类型的数字，最后是规则的排名。</p></div><div class="refsection" id="idm37359"><h2>描述</h2><p>规则表必须至少包含以下列，但您可以添加更多列供自己使用。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">id</code></span></dt><dd><p>表的主键</p></dd><dt><span class="term"><code class="varname">rule</code></span></dt><dd><p>表示规则的文本字段。 详细信息请参见<a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-rec--" target="_top">PAGC 地址标准化器规则记录</a>。</p><p>一条规则由一组表示输入标记的非负整数组成，以 -1 结束，然后是相同数量的非负整数，表示邮政属性，以 -1 结束，然后是表示规则类型的整数，最后是表示规则排名的整数。规则的排名从 0（最低）到 17（最高）。</p><p>例如，规则 <code class="code">2 0 2 22 3 -1 5 5 6 7 3 -1 2 6 </code>映射到输出标记序列<span class="emphasis"><em> TYPE NUMBER TYPE DIRECT QUALIF</em></span>到输出序列 <span class="emphasis"><em>STREET STREET SUFTYP SUFDIR QUALIF</em></span>。 该规则是等级 6 的 ARC_C 规则。 </p><p><a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>中列出了相应输出标记的编号。</p></dd></dl></div></div><div class="refsection" id="rule_input_tokens"><h2>输入令牌</h2><p>每个规则都以一组输入标记开始，后跟终止符 <code class="code">-1</code>。 从<a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12.html#ss12.2" target="_top"> PAGC 输入令牌</a>中摘录的有效输入令牌如下：</p><p><span class="bold"><strong>基于表单的输入令牌</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">AMPERS</code></span></dt><dd><p>(13). "&amp;" 符号经常用于缩写单词 "and"。</p></dd><dt><span class="term"><code class="varname">DASH</code></span></dt><dd><p>(9). 标点符号字符。</p></dd><dt><span class="term"><code class="varname">DOUBLE</code></span></dt><dd><p>(21).两个字母的序列。 经常用作标识符。</p></dd><dt><span class="term"><code class="varname">FRACT</code></span></dt><dd><p>(25).分数有时用于公民数字或单位数字。</p></dd><dt><span class="term"><code class="varname">MIXED</code></span></dt><dd><p>(23).包含字母和数字的字母数字字符串。 用于标识符。</p></dd><dt><span class="term"><code class="varname">NUMBER</code></span></dt><dd><p>(0). 一串数字。</p></dd><dt><span class="term"><code class="varname">ORD</code></span></dt><dd><p>(15). 诸如 First 或 1st 之类的表示。 常用于街道名称。</p></dd><dt><span class="term"><code class="varname">ORD</code></span></dt><dd><p>(18).一个字母。</p></dd><dt><span class="term"><code class="varname">WORD</code></span></dt><dd><p>(1). 单词是任意长度的字母串。 单个字母既可以是 SINGLE，也可以是 WORD。</p></dd></dl></div><p><span class="bold"><strong>基于功能的输入令牌</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">BOXH</code></span></dt><dd><p>(14). 用于表示邮政信箱的词汇。例如 <span class="emphasis"><em>Box</em></span> 或 <span class="emphasis"><em>PO Box</em></span>。</p></dd><dt><span class="term"><code class="varname">BUILDH</code></span></dt><dd><p>(19). 用于表示建筑物或建筑群的词汇，通常作为前缀。例如，在 <span class="emphasis"><em>Tower 7A</em></span> 中的 <span class="emphasis"><em>Tower</em></span>。</p></dd><dt><span class="term"><code class="varname">BUILDT</code></span></dt><dd><p>(24).用于表示建筑物或建筑群的单词和缩写，通常作为后缀。 例如：<span class="emphasis"><em>购物中心</em></span>。</p></dd><dt><span class="term"><code class="varname">DIRECT</code></span></dt><dd><p>(22).用于表示方向的单词，例如<span class="emphasis"><em>北</em></span>。</p></dd><dt><span class="term"><code class="varname">MILE</code></span></dt><dd><p>(20). 用于表示里程碑地址的单词。</p></dd><dt><span class="term"><code class="varname">ROAD</code></span></dt><dd><p>(6). 用于表示高速公路和道路的词汇和缩写。例如，在 <span class="emphasis"><em>Interstate 5</em></span> 中的 <span class="emphasis"><em>Interstate</em></span></p></dd><dt><span class="term"><code class="varname">RR</code></span></dt><dd><p>(8).用于表示乡村路线的单词和缩写。 <span class="emphasis"><em>RR</em></span>。</p></dd><dt><span class="term"><code class="varname">TYPE</code></span></dt><dd><p>(2). 用于表示街道类型的单词和缩写。 例如：<span class="emphasis"><em>ST</em></span> or <span class="emphasis"><em>AVE</em></span>。</p></dd><dt><span class="term"><code class="varname">UNITH</code></span></dt><dd><p>(16). 用于表示内部子地址的单词和缩写。 例如，<span class="emphasis"><em>APT </em></span>或 <span class="emphasis"><em>UNIT</em></span>。</p></dd></dl></div><p><span class="bold"><strong>邮政类型输入令牌</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">QUINT</code></span></dt><dd><p>(28).5 位数字。 识别邮政编码</p></dd><dt><span class="term"><code class="varname">QUAD</code></span></dt><dd><p>(29). 一个4位数字，用于识别 ZIP4 编码。</p></dd><dt><span class="term"><code class="varname">PCH</code></span></dt><dd><p>(27). 由字母、数字和字母组成的3个字符序列。用于识别 FSA，即加拿大邮政编码的前3个字符。</p></dd><dt><span class="term"><code class="varname">PCT</code></span></dt><dd><p>(26). 由数字、字母和数字组成的3个字符序列。用于识别 LDU，即加拿大邮政编码的最后3个字符。</p></dd></dl></div><p><span class="bold"><strong>停用词</strong></span></p><p>STOPWORDS 与 WORDS 结合。 在规则中，多个 WORD 和 STOPWORD 组成的字符串将由单个 WORD 标记表示。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">STOPWORD</code></span></dt><dd><p>(7). 具有低词汇重要性的词，可以在解析中省略。例如：<span class="emphasis"><em>THE</em></span>。</p></dd></dl></div></div><div class="refsection" id="idm37528"><h2>输出令牌</h2><p>在第一个 -1（终止符）之后，跟随输出标记及其顺序，然后是终止符<code class="code"> -1</code>。 <a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>中列出了相应输出标记的编号。 允许的内容取决于规则的类型。<a class="xref" href="#rule_types_rank" title="规则类型和等级">the section called “规则类型和等级”</a>部分列出了对每种规则类型有效的输出标记。</p></div><div class="refsection" id="rule_types_rank"><h2>规则类型和等级</h2><p>规则的最后部分是规则类型，由以下之一表示，后跟规则等级。 规则的排名从 0（最低）到 17（最高）。</p><p><span class="bold"><strong><code class="varname">MACRO_C</code></strong></span></p><p>（令牌编号=“<span class="bold"><strong>0</strong></span>”）。 用于解析 MACRO 子句（例如<span class="emphasis"><em> PLACE STATE ZIP</em></span>）的规则类</p><p><span class="bold"><strong><code class="varname">MACRO_C</code> 输出标记</strong></span>（摘自 <a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12. html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">CITY</code></span></dt><dd><p>（令牌编号“10”）。 示例“Albany”</p></dd><dt><span class="term"><code class="varname">STATE</code></span></dt><dd><p>（令牌编号“11”）。 示例“NY”</p></dd><dt><span class="term"><code class="varname">NATION</code></span></dt><dd><p>（令牌编号“12”）。 大多数参考文件中不使用此属性。 示例“USA”</p></dd><dt><span class="term"><code class="varname">POSTAL</code></span></dt><dd><p>（令牌编号“13”）。 （SADS 元素“ZIP CODE”、“PLUS 4”）。 此属性用于美国邮政编码和加拿大邮政编码。</p></dd></dl></div><p><span class="bold"><strong><code class="varname">MICRO_C</code></strong></span></p><p>（令牌编号=“<span class="bold"><strong>1</strong></span>”）。 用于解析完整 MICRO 子句（例如 House、street、sufdir、predir、pretyp、suftype、qualif）的规则类（即 ARC_C 加 CIVIC_C）。 这些规则不会在构建阶段使用。</p><p><span class="bold"><strong><code class="varname">MICRO_C</code> 输出令牌</strong></span>（摘自 <a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12. html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">HOUSE</code></span></dt><dd><p>这是一段文本（标记号码为 <code class="code">1</code>）：这是街道上的街道号码。例如， <span class="emphasis"><em>75</em></span>在<code class="code">75 State Street</code>中。</p></dd><dt><span class="term"><code class="varname">predir</code></span></dt><dd><p>是文本（标记编号 <code class="code">2</code>）：街道名称预指示，例如北、南、东、西等。</p></dd><dt><span class="term"><code class="varname">qual</code></span></dt><dd><p>是文本（标记编号 <code class="code">3</code>）：街道名称预修饰符示例 <span class="emphasis"><em>OLD</em></span> in <code class="code">3715 OLD HIGHWAY 99</code>。</p></dd><dt><span class="term"><code class="varname">pretype</code></span></dt><dd><p>是文本（标记编号 <code class="code">4</code>）：街道前缀类型</p></dd><dt><span class="term"><code class="varname">street</code></span></dt><dd><p>是文本（标记编号<code class="code"> 5</code>）：街道名称</p></dd><dt><span class="term"><code class="varname">suftype</code></span></dt><dd><p>这是文本（标记号码为 <code class="code">6</code>）：街道后缀类型，例如 St、Ave、Cir。这是跟在根街道名称后面的街道类型。例如，<span class="emphasis"><em>STREET</em></span> 位于 <code class="code">75 State Street</code>中。</p></dd><dt><span class="term"><code class="varname">sufdir</code></span></dt><dd><p>是文本（标记编号 <code class="code">7</code>）：STREET POST-DIRECTIONAL 街道名称后面的方向修饰符。示例<span class="emphasis"><em>WEST</em></span> 位于<code class="code">3715 TENTH AVENUE WEST</code>中。</p></dd></dl></div><p><span class="bold"><strong><code class="varname">ARC_C</code></strong></span></p><p>（令牌编号=“<span class="bold"><strong>2</strong></span>”）。 用于解析 MICRO 子句的规则类，不包括 HOUSE 属性。 因此，使用与 MICRO_C 相同的一组输出令牌减去 HOUSE 令牌。</p><p><span class="bold"><strong><code class="varname">CIVIC_C</code></strong></span></p><p>（令牌编号=“<span class="bold"><strong>3</strong></span>”）。 用于解析 HOUSE 属性的规则类。</p><p><span class="bold"><strong><code class="varname">EXTRA_C</code></strong></span></p><p>（令牌编号=“<span class="bold"><strong>4</strong></span>”）。 用于解析额外属性的规则类 - 从地理编码中排除的属性。 这些规则不会在构建阶段使用。</p><p><span class="bold"><strong><code class="varname">EXTRA_C</code> 输出令牌</strong></span>（摘自 <a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12. html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">BLDNG</code></span></dt><dd><p>（令牌编号 <code class="code">0</code>）：未解析的建筑物标识符和类型。</p></dd><dt><span class="term"><code class="varname">BOXH</code></span></dt><dd><p>（令牌编号<code class="code"> 14</code>）：<span class="bold"><strong>BOX</strong></span>位于 <code class="code">BOX 3B</code>中</p></dd><dt><span class="term"><code class="varname">BOXT</code></span></dt><dd><p>（令牌编号 <code class="code">15</code>）： <span class="bold"><strong>3B</strong></span>位于 <code class="code">BOX 3B</code>中</p></dd><dt><span class="term"><code class="varname">RR</code></span></dt><dd><p>（令牌编号 <code class="code">8</code>）：<span class="bold"><strong>RR</strong></span>位于 <code class="code">RR 7</code>中</p></dd><dt><span class="term"><code class="varname">UNITH</code></span></dt><dd><p>（令牌编号 <code class="code">16</code>）： <span class="bold"><strong>APT</strong></span> 位于 <code class="code">APT 3B</code>中</p></dd><dt><span class="term"><code class="varname">UNITT</code></span></dt><dd><p>（令牌编号 <code class="code">17</code>）： <span class="bold"><strong>3B</strong></span>位于<code class="code">APT 3B</code>中</p></dd><dt><span class="term"><code class="varname">UNKNWN</code></span></dt><dd><p>（标记编号<code class="code"> 9</code>）：否则未分类的输出。</p></dd></dl></div></div></div><div class="refentry" id="lextab"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>lex table — lex 表用于对字母数字输入进行分类，并将该输入与 (a) 输入标记（请参阅<a class="xref" href="#rule_input_tokens" title="输入令牌">the section called “输入令牌”</a>一节）和 (b) 标准化表示相关联。</p></div><div class="refsection" id="idm37705"><h2>描述</h2><p>词汇（lex）表用于分类字母数字输入并将该输入与（a）规则<a class="xref" href="#rule_input_tokens" title="输入令牌">the section called “输入令牌”</a>和（b）标准化表示相关联。在这些表中，您会找到例如将 <code class="code">ONE</code> 映射到标准单词 <code class="code">1</code> 的映射关系。</p><p>一个 lex 在表中至少有以下列。 您可以添加</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">id</code></span></dt><dd><p>表的主键</p></dd><dt><span class="term"><code class="varname">seq</code></span></dt><dd><p>整数：定义号？</p></dd><dt><span class="term"><code class="varname">word</code></span></dt><dd><p>文本：输入的单词</p></dd><dt><span class="term"><code class="varname">stdword</code></span></dt><dd><p>text：标准化的替换词</p></dd><dt><span class="term"><code class="varname">token</code></span></dt><dd><p>整数：它是什么类型的单词。 只有在这个上下文中使用它才会被替换。 请参阅 <a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--i-tok--" target="_top">PAGC 令牌</a>。</p></dd></dl></div></div></div><div class="refentry" id="gaztab"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>gaz table — gaz 表用于标准化地名，并将该输入与 (a) 输入令牌（请参阅“<a class="xref" href="#rule_input_tokens" title="输入令牌">the section called “输入令牌”</a>”一节）和 (b) 标准化表示相关联。</p></div><div class="refsection" id="idm37744"><h2>描述</h2><p>gaz（地名词典的缩写）表用于标准化地名，并将该输入与称为“<a class="xref" href="#rule_input_tokens" title="输入令牌">the section called “输入令牌”</a>”的部分和 (b) 标准化表示相关联。 例如，如果您在美国，您可以加载州名称和相关缩写。</p><p>gaz 表中至少包含以下列。 如果您愿意出于自己的目的，可以添加更多列。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">id</code></span></dt><dd><p>表的主键</p></dd><dt><span class="term"><code class="varname">seq</code></span></dt><dd><p>整数：定义号？ - 用于该单词实例的标识符</p></dd><dt><span class="term"><code class="varname">word</code></span></dt><dd><p>文本：输入的单词</p></dd><dt><span class="term"><code class="varname">stdword</code></span></dt><dd><p>text：标准化的替换词</p></dd><dt><span class="term"><code class="varname">token</code></span></dt><dd><p>整数：它是什么类型的单词。 只有在这个上下文中使用它才会被替换。 请参阅 <a class="link" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--i-tok--" target="_top">PAGC 令牌</a>。</p></dd></dl></div></div></div></section><section class="section" id="Address_Standardizer_Functions"><div class="titlepage"><div><div><h3 class="title">12.1.4. 地址标准化器功能</h3></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#debug_standardize_address">debug_standardize_address</a></span><span class="refpurpose"> — 返回 json 格式的文本，列出解析标记和标准化</span></li><li><span class="refentrytitle"><a href="#parse_address">parse_address</a></span><span class="refpurpose"> — 获取 1 行地址并分成几部分</span></li><li><span class="refentrytitle"><a href="#standardize_address">standardize_address</a></span><span class="refpurpose"> — 利用 lex、gaz 和规则表返回输入地址的 stdaddr 形式。</span></li></ul></div><div class="refentry" id="debug_standardize_address"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>debug_standardize_address — 返回 json 格式的文本，列出解析标记和标准化</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">debug_standardize_address</strong>(</code>text  <var class="pdparam">lextab</var>, text  <var class="pdparam">gaztab</var>, text  <var class="pdparam">rultab</var>, text  <var class="pdparam">micro</var>, text  <var class="pdparam">macro=NULL</var><code>)</code>;</p></div></div><div class="refsection" id="idm37802"><h2>描述</h2><p>这是一个用于调试地址标准化器规则和 lex/gaz 映射的函数。 它返回一个 json 格式的文本，其中包括匹配规则、令牌映射以及使用 <a class="xref" href="#lextab" title="lex table">lex table</a>的表名称、<a class="xref" href="#gaztab" title="gaz table">gaz table</a>和<a class="xref" href="#rulestab" title="rules table">rules table</a>的表名称和地址的输入地址的最佳标准化地址<a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a> 形式。</p><p>对于单行地址，仅使用 <code class="varname">micro</code></p><p>对于两行地址，一个是由<code class="varname">micro</code>的邮政地址第一行组成，例如 <code class="code">house_num street</code>，另一个是由标准的邮政地址第二行组成，例如 <code class="code">city, state postal_code country</code>。</p><p>json文档中返回的元素是 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">input_tokens</code></span></dt><dd><p>对于输入地址中的每个单词，返回该单词的位置、该单词的标记类别以及它映射到的标准单词。 请注意，对于某些输入单词，您可能会返回多个记录，因为某些输入可以归类为多个事物。 </p></dd><dt><span class="term"><code class="varname">rules</code></span></dt><dd><p>与输入匹配的规则集以及每个规则对应的分数。 第一条规则（最高分）用于标准化</p></dd><dt><span class="term"><code class="varname">stdaddr</code></span></dt><dd><p>运行 <a class="xref" href="#standardize_address" title="standardize_address">standardize_address</a>时将返回的标准化地址元素 <a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a></p></dd></dl></div><p class="availability">可用性：3.4.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要address_standardizer扩展。 </p></div><div class="refsection" id="idm37839"><h2>示例</h2><p>使用address_standardizer_data_us扩展</p><pre class="programlisting">CREATE EXTENSION address_standardizer_data_us; -- only needs to be done once</pre><p>变体 1：单行地址并返回输入标记</p><pre class="programlisting">SELECT it-&gt;&gt;'pos' AS position, it-&gt;&gt;'word' AS word, it-&gt;&gt;'stdword' AS standardized_word,
            it-&gt;&gt;'token' AS token, it-&gt;&gt;'token-code' AS token_code
    FROM jsonb(
            debug_standardize_address('us_lex',
                'us_gaz', 'us_rules', 'One Devonshire Place, PH 301, Boston, MA 02109')
                 ) AS s, jsonb_array_elements(s-&gt;'input_tokens') AS it;</pre><pre class="screen">position |    word    | standardized_word | token  | token_code
----------+------------+-------------------+--------+------------
 0        | ONE        | 1                 | NUMBER | 0
 0        | ONE        | 1                 | WORD   | 1
 1        | DEVONSHIRE | DEVONSHIRE        | WORD   | 1
 2        | PLACE      | PLACE             | TYPE   | 2
 3        | PH         | PATH              | TYPE   | 2
 3        | PH         | PENTHOUSE         | UNITT  | 17
 4        | 301        | 301               | NUMBER | 0
(7 rows)</pre><p>变体 2：多行地址并返回第一条规则输入映射和分数</p><pre class="programlisting">SELECT (s-&gt;'rules'-&gt;0-&gt;&gt;'score')::numeric AS score, it-&gt;&gt;'pos' AS position,
        it-&gt;&gt;'input-word' AS word, it-&gt;&gt;'input-token' AS input_token, it-&gt;&gt;'mapped-word' AS standardized_word,
            it-&gt;&gt;'output-token' AS output_token
    FROM jsonb(
            debug_standardize_address('us_lex',
                'us_gaz', 'us_rules', 'One Devonshire Place, PH 301', 'Boston, MA 02109')
                 ) AS s, jsonb_array_elements(s-&gt;'rules'-&gt;0-&gt;'rule_tokens') AS it;</pre><pre class="screen">score   | position |    word    | input_token | standardized_word | output_token
----------+----------+------------+-------------+-------------------+--------------
 0.876250 | 0        | ONE        | NUMBER      | 1                 | HOUSE
 0.876250 | 1        | DEVONSHIRE | WORD        | DEVONSHIRE        | STREET
 0.876250 | 2        | PLACE      | TYPE        | PLACE             | SUFTYP
 0.876250 | 3        | PH         | UNITT       | PENTHOUSE         | UNITT
 0.876250 | 4        | 301        | NUMBER      | 301               | UNITT
(5 rows)
</pre></div><div class="refsection" id="idm37849"><h2>相关信息</h2><p><a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>, <a class="xref" href="#rulestab" title="rules table">rules table</a>, <a class="xref" href="#lextab" title="lex table">lex table</a>, <a class="xref" href="#gaztab" title="gaz table">gaz table</a>, <a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a></p></div></div><div class="refentry" id="parse_address"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>parse_address — 获取 1 行地址并分成几部分</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <strong class="fsfunc">parse_address</strong>(</code>text  <var class="pdparam">address</var><code>)</code>;</p></div></div><div class="refsection" id="idm37869"><h2>描述</h2><p>Returns 将地址作为输入，并返回由字段 <span class="emphasis"><em>num</em></span>、<span class="emphasis"><em>street</em></span>、<span class="emphasis"><em>street2</em></span>、<span class="emphasis"><em>address1</em></span>、<span class="emphasis"><em>city</em></span>、<span class="emphasis"><em>state</em></span>、<span class="emphasis"><em>zip</em></span>、<span class="emphasis"><em>zipplus</em></span>、<span class="emphasis"><em>country </em></span>组成的记录输出。</p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要address_standardizer扩展。 </p></div><div class="refsection" id="idm37886"><h2>示例</h2><p>单一地址</p><pre class="programlisting">SELECT num, street, city, zip, zipplus
        FROM parse_address('1 Devonshire Place, Boston, MA 02109-1234') AS a;</pre><pre class="screen">num |      street      |  city  |  zip  | zipplus
-----+------------------+--------+-------+---------
 1   | Devonshire Place | Boston | 02109 | 1234                </pre><p>地址表</p><pre class="programlisting">-- basic table
CREATE TABLE places(addid serial PRIMARY KEY, address text);

INSERT INTO places(address)
VALUES ('529 Main Street, Boston MA, 02129'),
 ('77 Massachusetts Avenue, Cambridge, MA 02139'),
 ('25 Wizard of Oz, Walaford, KS 99912323'),
 ('26 Capen Street, Medford, MA'),
 ('124 Mount Auburn St, Cambridge, Massachusetts 02138'),
 ('950 Main Street, Worcester, MA 01610');

 -- parse the addresses
 -- if you want all fields you can use (a).*
SELECT addid, (a).num, (a).street, (a).city, (a).state, (a).zip, (a).zipplus
FROM (SELECT addid, parse_address(address) As a
 FROM places) AS p;</pre><pre class="screen">addid | num |        street        |   city    | state |  zip  | zipplus
-------+-----+----------------------+-----------+-------+-------+---------
     1 | 529 | Main Street          | Boston    | MA    | 02129 |
     2 | 77  | Massachusetts Avenue | Cambridge | MA    | 02139 |
     3 | 25  | Wizard of Oz         | Walaford  | KS    | 99912 | 323
     4 | 26  | Capen Street         | Medford   | MA    |       |
     5 | 124 | Mount Auburn St      | Cambridge | MA    | 02138 |
     6 | 950 | Main Street          | Worcester | MA    | 01610 |
(6 rows)</pre></div><div class="refsection" id="idm37894"><h2>相关信息</h2><p/></div></div><div class="refentry" id="standardize_address"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>standardize_address — 利用 lex、gaz 和规则表返回输入地址的 stdaddr 形式。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">stdaddr <strong class="fsfunc">standardize_address</strong>(</code>text  <var class="pdparam">lextab</var>, text  <var class="pdparam">gaztab</var>, text  <var class="pdparam">rultab</var>, text  <var class="pdparam">address</var><code>)</code>;</p><p><code class="funcdef">stdaddr <strong class="fsfunc">standardize_address</strong>(</code>text  <var class="pdparam">lextab</var>, text  <var class="pdparam">gaztab</var>, text  <var class="pdparam">rultab</var>, text  <var class="pdparam">micro</var>, text  <var class="pdparam">macro</var><code>)</code>;</p></div></div><div class="refsection" id="idm37936"><h2>描述</h2><p>使用 <a class="xref" href="#lextab" title="lex table">lex table</a>的表名称、<a class="xref" href="#gaztab" title="gaz table">gaz table</a>和<a class="xref" href="#rulestab" title="rules table">rules table</a>的表名称和地址返回输入地址的 <a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a> 形式。</p><p>变体 1：将地址视为一行。</p><p>变体 2：将地址分为 2 部分。 由 <code class="varname">micro</code>第一行邮政地址组成的微信，例如 <code class="code">house_num street</code>，以及由地址的标准邮政第二行组成的宏，例如 <code class="code">city, state postal_code country</code>。</p><p class="availability">可用性：2.2.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要address_standardizer扩展。 </p></div><div class="refsection" id="idm37953"><h2>示例</h2><p>使用address_standardizer_data_us扩展</p><pre class="programlisting">CREATE EXTENSION address_standardizer_data_us; -- only needs to be done once</pre><p>变体 1：单行地址。 这不适用于非美国地址</p><pre class="programlisting">SELECT house_num, name, suftype, city, country, state, unit  FROM standardize_address('us_lex',
                           'us_gaz', 'us_rules', 'One Devonshire Place, PH 301, Boston, MA 02109');</pre><pre class="screen">house_num |    name    | suftype |  city  | country |     state     |      unit
----------+------------+---------+--------+---------+---------------+-----------------
1         | DEVONSHIRE | PLACE   | BOSTON | USA     | MASSACHUSETTS | # PENTHOUSE 301</pre><p>使用与 Tiger 地理编码器打包的表格。 此示例仅在您安装了 <code class="varname">postgis_tiger_geocoder </code>时才有效。</p><pre class="programlisting">SELECT *  FROM standardize_address('tiger.pagc_lex',
         'tiger.pagc_gaz', 'tiger.pagc_rules', 'One Devonshire Place, PH 301, Boston, MA 02109-1234');</pre><p>为了更容易阅读，我们将使用 hstore 扩展转储输出 CREATE EXTENSION hstore; 你需要安装</p><pre class="programlisting">SELECT (each(hstore(p))).*
 FROM standardize_address('tiger.pagc_lex', 'tiger.pagc_gaz',
   'tiger.pagc_rules', 'One Devonshire Place, PH 301, Boston, MA 02109') As p;</pre><pre class="screen">key     |      value
------------+-----------------
 box        |
 city       | BOSTON
 name       | DEVONSHIRE
 qual       |
 unit       | # PENTHOUSE 301
 extra      |
 state      | MA
 predir     |
 sufdir     |
 country    | USA
 pretype    |
 suftype    | PL
 building   |
 postcode   | 02109
 house_num  | 1
 ruralroute |
(16 rows)
                        </pre><p>变体 2：作为两部分地址</p><pre class="programlisting">SELECT (each(hstore(p))).*
 FROM standardize_address('tiger.pagc_lex', 'tiger.pagc_gaz',
   'tiger.pagc_rules', 'One Devonshire Place, PH 301', 'Boston, MA 02109, US') As p;</pre><pre class="screen">key     |      value
------------+-----------------
 box        |
 city       | BOSTON
 name       | DEVONSHIRE
 qual       |
 unit       | # PENTHOUSE 301
 extra      |
 state      | MA
 predir     |
 sufdir     |
 country    | USA
 pretype    |
 suftype    | PL
 building   |
 postcode   | 02109
 house_num  | 1
 ruralroute |
(16 rows)</pre></div><div class="refsection" id="idm37969"><h2>相关信息</h2><p><a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>, <a class="xref" href="#rulestab" title="rules table">rules table</a>, <a class="xref" href="#lextab" title="lex table">lex table</a>, <a class="xref" href="#gaztab" title="gaz table">gaz table</a>, <a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a></p></div></div></section></section><section class="section" id="Tiger_Geocoder"><div class="titlepage"><div><div><h2 class="title" style="clear: both">12.2. Tiger地理编码器</h2></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>一个基于 plpgsql 的地理编码器，旨在与美国人口普查局发布的<a class="link" href="http://www.census.gov/geo/www/tiger/" target="_top"> TIGER（拓扑集成地理编码和参考系统）/线路和主地址数据库导出</a>配合使用。 </p><p>地理编码器有四个组件：数据加载器函数、地址标准化器、地址地理编码器和反向地理编码器。 </p><p>尽管它是专门为美国设计的，但许多概念和功能都是适用的，并且可以适应其他国家的地址和道路网络。</p><p>该脚本构建了一个名为<code class="varname">tiger</code>的模式，以容纳所有与“tiger”相关的功能、可重用的查找数据（例如道路类型前缀、后缀、状态）、用于管理数据加载的各种控制表以及所有“tiger”加载表所继承的骨架基表。</p><p>另一个名为 <code class="varname">tiger_data</code> 的模式也被创建，它存储了加载器从人口普查网站下载并加载到数据库中的每个州的所有人口普查数据。在当前的模型中，每组州的表都以州的代码为前缀，例如 <code class="varname">ma_addr</code>、<code class="varname">ma_edges</code> 等，具有强制执行只包括该州数据的约束。每个这些表都继承自 <code class="varname">tiger schema</code> 中的表 <code class="varname">addr</code>、<code class="varname">faces</code>、<code class="varname">edges</code> 等。 </p><p>所有地理编码函数仅引用基表，因此不需要将数据模式称为<code class="varname">tiger_data</code>，也不要求数据不能进一步划分为其他模式——例如，每个州有不同的模式，只要所有表 从 <code class="varname">Tiger </code>模式中的表继承。</p><p>有关如何在数据库中启用扩展程序以及如何使用它加载数据的说明，请参阅<a class="xref" href="#install_tiger_geocoder_extension" title="2.4.1. 在 PostGIS 数据库中启用Tiger地理编码器">Section 2.4.1, “在 PostGIS 数据库中启用Tiger地理编码器”</a>。</p><p> </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您使用 Tiger 地理编码器 (tiger_2010)，则可以使用 extras/tiger 中随附的 upload_geocoder.bat / .sh 脚本升级脚本。 <code class="varname">Tiger_2010 </code>和 <code class="varname">Tiger_2011+</code> 之间的一个主要变化是 <code class="varname">county</code> 和 <code class="varname">state</code>表不再按州细分。 如果您有 Tiger_2010 的数据并希望替换为 Tiger_2015，请参阅<a class="xref" href="#upgrade_tiger_geocoder" title="2.4.4. 升级您的 Tiger 地理编码器 安装和数据">Section 2.4.4, “升级您的 Tiger 地理编码器 安装和数据”</a>” </p></td></tr></table></div><p>

              </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>PostGIS 2.2.0 版本中的新功能是支持 Tiger 2015 数据并将地址标准化器包含为 PostGIS 的一部分。</p><p>如果您运行的是 PostgreSQL 9.1+，PostGIS 2.1.0 版本中的新功能是能够使用 PostgreSQL 扩展模型安装 Tiger 地理编码器。 有关详细信息，请参阅<a class="xref" href="#install_tiger_geocoder_extension" title="2.4.1. 在 PostGIS 数据库中启用Tiger地理编码器">Section 2.4.1, “在 PostGIS 数据库中启用Tiger地理编码器”</a>。</p></td></tr></table></div><p>
              </p><p><a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a>函数可替代内置 <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>。 有关编译和安装说明，请参阅<a class="xref" href="#installing_pagc_address_standardizer" title="2.3. 安装和使用地址标准化工具">Section 2.3, “安装和使用地址标准化工具”</a>。</p><p>设计：</p><p>该项目的目标是构建一个功能齐全的地理编码器，可以处理任意美国地址字符串并使用标准化的 TIGER 人口普查数据，生成反映给定地址位置和位置可能性的点几何和评级。 评级数字越高，结果越差。</p><p>PostGIS 2.0.0 中引入的<code class="varname">reverse_geocode </code>函数对于导出GPS 位置的街道地址和交叉街道非常有用。</p><p>对于熟悉 PostGIS 的任何人来说，地理编码器都应该易于安装和使用，并且应该可以在 PostGIS 支持的所有平台上轻松安装和使用。</p><p>尽管存在格式和拼写错误，但它应该足够强大，能够正常运行。</p><p>它应该具有足够的可扩展性，以便与未来的数据更新一起使用，或者以最少的编码更改来替代数据源。</p><p>
                </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>必须将 <code class="varname">Tiger </code>模式添加到数据库搜索路径中，函数才能正常工作。</p></td></tr></table></div><p>
            </p></div></div></div></div><div class="toc"><ul class="toc"><li><span class="refentrytitle"><a href="#Drop_Indexes_Generate_Script">Drop_Indexes_Generate_Script</a></span><span class="refpurpose"> — 生成一个脚本，删除 Tiger 架构和用户指定架构上的所有非主键和非唯一索引。 如果未指定架构，则默认架构为<code class="varname"> Tiger_data</code>。</span></li><li><span class="refentrytitle"><a href="#Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a></span><span class="refpurpose"> — 生成一个脚本，删除指定架构中以<code class="varname"> County_all</code>、<code class="varname">state_all</code> 或state代码开头，后跟<code class="varname">county</code>或<code class="varname">state</code>的所有表。</span></li><li><span class="refentrytitle"><a href="#Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a></span><span class="refpurpose"> — 生成一个脚本，该脚本删除指定架构中以state缩写为前缀的所有表。 如果未指定架构，则默认架构为 <code class="varname">Tiger_data</code>。</span></li><li><span class="refentrytitle"><a href="#Geocode">Geocode</a></span><span class="refpurpose"> — 将地址作为字符串（或其他标准化地址）输入，并输出一组可能的位置，其中包括 NAD 83经纬度中的点几何图形、每个位置的标准化地址以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 可以选择传入最大结果数，默认为10，以及restrict_region（默认为NULL）</span></li><li><span class="refentrytitle"><a href="#Geocode_Intersection">Geocode_Intersection</a></span><span class="refpurpose"> — 接收 2 条相交的街道以及state、city、zip，并输出位于交叉路口的第一个交叉街道上的一组可能位置，还包括一个 geomout 作为 NAD 83 经纬度中的点位置，一个<code class="varname">标准化地址</code> (addy ）每个位置以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 可以选择传入最大结果，默认为 10。使用 Tiger 数据（edges、faces、addr）、PostgreSQL 模糊字符串匹配（soundex、levenshtein）。</span></li><li><span class="refentrytitle"><a href="#Get_Geocode_Setting">Get_Geocode_Setting</a></span><span class="refpurpose"> — 返回存储在 Tiger.geocode_settings 表中的特定设置的值。</span></li><li><span class="refentrytitle"><a href="#Get_Tract">Get_Tract</a></span><span class="refpurpose"> — 从几何图形所在的区域表中返回人口普查区域或字段。 默认返回区域的短名称。</span></li><li><span class="refentrytitle"><a href="#Install_Missing_Indexes">Install_Missing_Indexes</a></span><span class="refpurpose"> — 查找具有在地理编码器连接和过滤条件中使用的键列的所有表，这些表缺少这些列上使用的索引，并将添加它们。</span></li><li><span class="refentrytitle"><a href="#Loader_Generate_Census_Script">Loader_Generate_Census_Script</a></span><span class="refpurpose"> — 为指定states的指定平台生成 shell 脚本，该脚本将下载 Tiger 人口普查state区、bg 和 tabblocks 数据表、暂存并加载到 <code class="varname">Tiger_data </code>架构中。 每个状态脚本都作为单独的记录返回。</span></li><li><span class="refentrytitle"><a href="#Loader_Generate_Script">Loader_Generate_Script</a></span><span class="refpurpose"> — 为指定平台的指定状态生成 shell 脚本，该脚本将下载 Tiger 数据、暂存并加载到 <code class="varname">Tiger_data</code> 模式中。 每个状态脚本都作为单独的记录返回。 最新版本支持 Tiger 2010 结构变化，还加载人口普查区、区块组和区块表。</span></li><li><span class="refentrytitle"><a href="#Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></span><span class="refpurpose"> — 为指定平台生成加载到县和州查找表中的 shell 脚本。</span></li><li><span class="refentrytitle"><a href="#Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a></span><span class="refpurpose"> — 查找具有在地理编码器联接中使用的键列的所有表，这些表缺少这些列上的索引，并将输出 SQL DDL 来定义这些表的索引。</span></li><li><span class="refentrytitle"><a href="#Normalize_Address">Normalize_Address</a></span><span class="refpurpose"> — 给定文本街道地址，返回复合的<code class="varname">norm_addy</code>类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。</span></li><li><span class="refentrytitle"><a href="#Pagc_Normalize_Address">Pagc_Normalize_Address</a></span><span class="refpurpose"> — 给定文本街道地址，返回复合的<code class="varname">norm_addy</code>类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。 需要 address_standardizer 扩展。</span></li><li><span class="refentrytitle"><a href="#Pprint_Addy">Pprint_Addy</a></span><span class="refpurpose"> — 给定一个<code class="varname">norm_addy</code>复合类型对象，返回它的漂亮的打印表示。 通常与normalize_address结合使用。</span></li><li><span class="refentrytitle"><a href="#Reverse_Geocode">Reverse_Geocode</a></span><span class="refpurpose"> — 获取已知空间参考系统中的几何点并返回一条记录，其中包含理论上可能的地址数组和交叉街道数组。 如果 include_strnum_range = true，则包括交叉街道中的街道范围。</span></li><li><span class="refentrytitle"><a href="#Topology_Load_Tiger">Topology_Load_Tiger</a></span><span class="refpurpose"> — 将tiger数据的定义区域加载到 PostGIS 拓扑中，并将老虎数据转换为拓扑的空间参考，并捕捉到拓扑的精度公差。</span></li><li><span class="refentrytitle"><a href="#Set_Geocode_Setting">Set_Geocode_Setting</a></span><span class="refpurpose"> — 设置影响地理编码器功能行为的设置。</span></li></ul></div><p>PostGIS 还有其他几个开源地理编码器，与 Tiger 地理编码器不同，它们具有多国家地理编码支持的优势</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://wiki.openstreetmap.org/wiki/Nominatim" target="_top">Nominatim </a> 使用 OpenStreetMap 地名词典格式的数据。 它需要 osm2pgsql 来加载数据、PostgreSQL 8.4 +和 PostGIS 1.5+ 才能运行。 它被打包为Web服务接口，并且似乎被设计为作为Web服务来调用。 就像 Tiger 地理编码器一样，它同时具有地理编码器和反向地理编码器组件。 从文档来看，尚不清楚它是否具有像 Tiger 地理编码器一样的纯 SQL 接口，或者大量逻辑是否在 Web 接口中实现。</p></li><li class="listitem"><p><a class="link" href="http://www.gisgraphy.com/" target="_top">GIS Graphy </a>还利用 PostGIS，并且像 Nominatim 一样使用 OpenStreetMap (OSM) 数据。 它配备了一个加载器来加载 OSM 数据，并且与 Nominatim 类似，不仅能够进行美国地理编码。 与 Nominatim 非常相似，它作为 Web 服务运行并依赖于 Java 1.5、Servlet 应用程序、Solr。 GisGraphy 是跨平台的，并且还具有反向地理编码器以及其他一些简洁的功能。</p></li></ul></div><div class="refentry" id="Drop_Indexes_Generate_Script"><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Drop_Indexes_Generate_Script — 生成一个脚本，删除 Tiger 架构和用户指定架构上的所有非主键和非唯一索引。 如果未指定架构，则默认架构为<code class="varname"> Tiger_data</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Drop_Indexes_Generate_Script</strong>(</code>text  <var class="pdparam">param_schema=tiger_data</var><code>)</code>;</p></div></div><div class="refsection" id="idm38048"><h2>描述</h2><p>生成一个脚本，删除 Tiger 架构和用户指定架构上的所有非主键和非唯一索引。 如果未指定架构，则默认架构为 <code class="varname">Tiger_data</code>。</p><p>这对于最大限度地减少索引膨胀很有用，索引膨胀可能会混淆查询规划器或占用不必要的空间。 与 <a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a>结合使用，仅添加地理编码器使用的索引。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm38055"><h2>示例</h2><pre class="programlisting">SELECT drop_indexes_generate_script() As actionsql;
actionsql
---------------------------------------------------------
DROP INDEX tiger.idx_tiger_countysub_lookup_lower_name;
DROP INDEX tiger.idx_tiger_edges_countyfp;
DROP INDEX tiger.idx_tiger_faces_countyfp;
DROP INDEX tiger.tiger_place_the_geom_gist;
DROP INDEX tiger.tiger_edges_the_geom_gist;
DROP INDEX tiger.tiger_state_the_geom_gist;
DROP INDEX tiger.idx_tiger_addr_least_address;
DROP INDEX tiger.idx_tiger_addr_tlid;
DROP INDEX tiger.idx_tiger_addr_zip;
DROP INDEX tiger.idx_tiger_county_countyfp;
DROP INDEX tiger.idx_tiger_county_lookup_lower_name;
DROP INDEX tiger.idx_tiger_county_lookup_snd_name;
DROP INDEX tiger.idx_tiger_county_lower_name;
DROP INDEX tiger.idx_tiger_county_snd_name;
DROP INDEX tiger.idx_tiger_county_the_geom_gist;
DROP INDEX tiger.idx_tiger_countysub_lookup_snd_name;
DROP INDEX tiger.idx_tiger_cousub_countyfp;
DROP INDEX tiger.idx_tiger_cousub_cousubfp;
DROP INDEX tiger.idx_tiger_cousub_lower_name;
DROP INDEX tiger.idx_tiger_cousub_snd_name;
DROP INDEX tiger.idx_tiger_cousub_the_geom_gist;
DROP INDEX tiger_data.idx_tiger_data_ma_addr_least_address;
DROP INDEX tiger_data.idx_tiger_data_ma_addr_tlid;
DROP INDEX tiger_data.idx_tiger_data_ma_addr_zip;
DROP INDEX tiger_data.idx_tiger_data_ma_county_countyfp;
DROP INDEX tiger_data.idx_tiger_data_ma_county_lookup_lower_name;
DROP INDEX tiger_data.idx_tiger_data_ma_county_lookup_snd_name;
DROP INDEX tiger_data.idx_tiger_data_ma_county_lower_name;
DROP INDEX tiger_data.idx_tiger_data_ma_county_snd_name;
:
:
</pre></div><div class="refsection" id="idm38058"><h2>相关信息</h2><p><a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a>, <a class="xref" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a></p></div></div><div class="refentry" id="Drop_Nation_Tables_Generate_Script"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Drop_Nation_Tables_Generate_Script — 生成一个脚本，删除指定架构中以<code class="varname"> County_all</code>、<code class="varname">state_all</code> 或state代码开头，后跟<code class="varname">county</code>或<code class="varname">state</code>的所有表。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Drop_Nation_Tables_Generate_Script</strong>(</code>text  <var class="pdparam">param_schema=tiger_data</var><code>)</code>;</p></div></div><div class="refsection" id="idm38079"><h2>描述</h2><p>生成一个脚本，删除指定架构中以<code class="varname"> County_all</code>、<code class="varname">state_all </code>或state代码开头，后跟<code class="varname">county</code>或<code class="varname">state</code>的所有表。 如果您要从<code class="varname"> Tiger_2010</code> 数据升级到 <code class="varname">Tiger_2011</code> 数据，则需要执行此操作。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm38089"><h2>示例</h2><pre class="programlisting">SELECT drop_nation_tables_generate_script();
DROP TABLE tiger_data.county_all;
DROP TABLE tiger_data.county_all_lookup;
DROP TABLE tiger_data.state_all;
DROP TABLE tiger_data.ma_county;
DROP TABLE tiger_data.ma_state;</pre></div><div class="refsection" id="idm38092"><h2>相关信息</h2><p><a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></p></div></div><div class="refentry" id="Drop_State_Tables_Generate_Script"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Drop_State_Tables_Generate_Script — 生成一个脚本，该脚本删除指定架构中以state缩写为前缀的所有表。 如果未指定架构，则默认架构为 <code class="varname">Tiger_data</code>。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Drop_State_Tables_Generate_Script</strong>(</code>text  <var class="pdparam">param_state</var>, text  <var class="pdparam">param_schema=tiger_data</var><code>)</code>;</p></div></div><div class="refsection" id="idm38112"><h2>描述</h2><p>生成一个脚本，该脚本删除指定架构中以state缩写为前缀的所有表。 如果未指定架构，则默认架构为 <code class="varname">Tiger_data</code>。 此函数对于在重新加载状态之前删除状态表非常有用，以防在上次加载期间出现问题。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm38117"><h2>示例</h2><pre class="programlisting">SELECT drop_state_tables_generate_script('PA');
DROP TABLE tiger_data.pa_addr;
DROP TABLE tiger_data.pa_county;
DROP TABLE tiger_data.pa_county_lookup;
DROP TABLE tiger_data.pa_cousub;
DROP TABLE tiger_data.pa_edges;
DROP TABLE tiger_data.pa_faces;
DROP TABLE tiger_data.pa_featnames;
DROP TABLE tiger_data.pa_place;
DROP TABLE tiger_data.pa_state;
DROP TABLE tiger_data.pa_zip_lookup_base;
DROP TABLE tiger_data.pa_zip_state;
DROP TABLE tiger_data.pa_zip_state_loc;
        </pre></div><div class="refsection" id="idm38120"><h2>相关信息</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a></p></div></div><div class="refentry" id="Geocode"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Geocode — 将地址作为字符串（或其他标准化地址）输入，并输出一组可能的位置，其中包括 NAD 83经纬度中的点几何图形、每个位置的标准化地址以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 可以选择传入最大结果数，默认为10，以及restrict_region（默认为NULL）</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">geocode</strong>(</code>varchar  <var class="pdparam">address</var>, integer  <var class="pdparam">max_results=10</var>, geometry  <var class="pdparam">restrict_region=NULL</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p><p><code class="funcdef">setof record <strong class="fsfunc">geocode</strong>(</code>norm_addy  <var class="pdparam">in_addy</var>, integer  <var class="pdparam">max_results=10</var>, geometry  <var class="pdparam">restrict_region=NULL</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p></div></div><div class="refsection" id="idm38172"><h2>描述</h2><p>将地址作为字符串（或已经标准化的地址）并输出一组可能的位置，其中包括 NAD 83 经纬度中的点几何形状、每个位置的<code class="varname">标准化地址</code> (addy) 以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 使用 Tiger 数据（edges、faces、addr）、PostgreSQL 模糊字符串匹配（soundex、levenshtein）和 PostGIS 线插值函数沿 Tiger 边缘插值地址。 评级越高，地理编码正确的可能性就越小。 地理编码点默认为从中心线到街道地址所在一侧 (L/R) 的偏移 10 米。</p><p class="enhanced">增强功能：2.0.0支持Tiger 2010结构化数据并修改了一些逻辑以提高地理编码的速度和准确性，并将点从中心线偏移到街道地址所在的一侧。 新参数 <code class="varname">max_results</code> 可用于指定最佳结果的数量或仅返回最佳结果。</p></div><div class="refsection" id="idm38178"><h2>示例：基本</h2><p>下面的示例计时是在一台 3.0 GHZ 单处理器 Windows 7 计算机上进行的，该计算机具有 2GB 内存，运行 PostgreSQL 9.1rc1/PostGIS 2.0，加载了所有 MA、MN、CA、RI state Tiger 数据。</p><p>精确匹配的计算速度更快（61 毫秒）</p><pre class="programlisting">SELECT g.rating, ST_X(g.geomout) As lon, ST_Y(g.geomout) As lat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp, (addy).location As city, (addy).stateabbrev As st,(addy).zip
    FROM geocode('75 State Street, Boston MA 02109', 1) As g;
 rating |        lon        |      lat       | stno | street | styp |  city  | st |  zip
--------+-------------------+----------------+------+--------+------+--------+----+-------
      0 | -71.0557505845646 | 42.35897920691 |   75 | State  | St   | Boston | MA | 02109
</pre><p>即使 zip 没有传入地理编码器也可以猜测（大约需要 122-150 毫秒）</p><pre class="programlisting">SELECT g.rating, ST_AsText(ST_SnapToGrid(g.geomout,0.00001)) As wktlonlat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp, (addy).location As city, (addy).stateabbrev As st,(addy).zip
    FROM geocode('226 Hanover Street, Boston, MA',1) As g;
 rating |         wktlonlat         | stno | street  | styp |  city  | st |  zip
--------+---------------------------+------+---------+------+--------+----+-------
      1 | POINT(-71.05528 42.36316) |  226 | Hanover | St   | Boston | MA | 02113
</pre><p>可以处理拼写错误，并提供不止一种可能的解决方案和评级，并且需要更长的时间（500ms）。</p><pre class="programlisting">SELECT g.rating, ST_AsText(ST_SnapToGrid(g.geomout,0.00001)) As wktlonlat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp, (addy).location As city, (addy).stateabbrev As st,(addy).zip
    FROM geocode('31 - 37 Stewart Street, Boston, MA 02116',1) As g;
 rating |         wktlonlat         | stno | street | styp |  city  | st |  zip
--------+---------------------------+------+--------+------+--------+----+-------
     70 | POINT(-71.06466 42.35114) |   31 | Stuart | St   | Boston | MA | 02116
    </pre><p>用于对地址进行批量地理编码。 最简单的方法是设置 <code class="varname">max_results=1</code>。 仅处理尚未地理编码的内容（没有评级）。</p><pre class="programlisting">CREATE TABLE addresses_to_geocode(addid serial PRIMARY KEY, address text,
        lon numeric, lat numeric, new_address text, rating integer);

INSERT INTO addresses_to_geocode(address)
VALUES ('529 Main Street, Boston MA, 02129'),
 ('77 Massachusetts Avenue, Cambridge, MA 02139'),
 ('25 Wizard of Oz, Walaford, KS 99912323'),
 ('26 Capen Street, Medford, MA'),
 ('124 Mount Auburn St, Cambridge, Massachusetts 02138'),
 ('950 Main Street, Worcester, MA 01610');

-- only update the first 3 addresses (323-704 ms -  there are caching and shared memory effects so first geocode you do is always slower) --
-- for large numbers of addresses you don't want to update all at once
-- since the whole geocode must commit at once
-- For this example we rejoin with LEFT JOIN
-- and set to rating to -1 rating if no match
-- to ensure we don't regeocode a bad address
UPDATE addresses_to_geocode
  SET  (rating, new_address, lon, lat)
    = ( COALESCE(g.rating,-1), pprint_addy(g.addy),
       ST_X(g.geomout)::numeric(8,5), ST_Y(g.geomout)::numeric(8,5) )
FROM (SELECT addid, address
    FROM addresses_to_geocode
    WHERE rating IS NULL ORDER BY addid LIMIT 3) As a
    LEFT JOIN LATERAL geocode(a.address,1) As g ON true
WHERE a.addid = addresses_to_geocode.addid;

result
-----
Query returned successfully: 3 rows affected, 480 ms execution time.

SELECT * FROM addresses_to_geocode WHERE rating is not null;

 addid |                   address                    |    lon    |   lat    |                new_address                | rating
-------+----------------------------------------------+-----------+----------+-------------------------------------------+--------
     1 | 529 Main Street, Boston MA, 02129            | -71.07177 | 42.38357 | 529 Main St, Boston, MA 02129             |      0
     2 | 77 Massachusetts Avenue, Cambridge, MA 02139 | -71.09396 | 42.35961 | 77 Massachusetts Ave, Cambridge, MA 02139 |      0
     3 | 25 Wizard of Oz, Walaford, KS 99912323       | -97.92913 | 38.12717 | Willowbrook, KS 67502                     |    108
(3 rows)</pre></div><div class="refsection" id="idm38190"><h2>示例：使用几何过滤器</h2><pre class="programlisting">SELECT g.rating, ST_AsText(ST_SnapToGrid(g.geomout,0.00001)) As wktlonlat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp,
    (addy).location As city, (addy).stateabbrev As st,(addy).zip
  FROM geocode('100 Federal Street, MA',
        3,
        (SELECT ST_Union(the_geom)
            FROM place WHERE statefp = '25' AND name = 'Lynn')::geometry
        ) As g;

 rating |         wktlonlat         | stno | street  | styp | city | st |  zip
--------+---------------------------+------+---------+------+------+----+-------
      7 | POINT(-70.96796 42.4659)  |  100 | Federal | St   | Lynn | MA | 01905
     16 | POINT(-70.96786 42.46853) | NULL | Federal | St   | Lynn | MA | 01905
(2 rows)

Time: 622.939 ms
          </pre></div><div class="refsection" id="idm38193"><h2>相关信息</h2><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>, <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a></p></div></div><div class="refentry" id="Geocode_Intersection"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Geocode_Intersection — 接收 2 条相交的街道以及state、city、zip，并输出位于交叉路口的第一个交叉街道上的一组可能位置，还包括一个 geomout 作为 NAD 83 经纬度中的点位置，一个<code class="varname">标准化地址</code> (addy ）每个位置以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 可以选择传入最大结果，默认为 10。使用 Tiger 数据（edges、faces、addr）、PostgreSQL 模糊字符串匹配（soundex、levenshtein）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <strong class="fsfunc">geocode_intersection</strong>(</code>text  <var class="pdparam"> roadway1</var>, text  <var class="pdparam"> roadway2</var>, text  <var class="pdparam"> in_state</var>, text  <var class="pdparam"> in_city</var>, text  <var class="pdparam"> in_zip</var>, integer  <var class="pdparam">max_results=10</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p></div></div><div class="refsection" id="idm38239"><h2>描述</h2><p>该函数接受两条交叉的街道、一个state、city、zip作为输入，并输出位于交叉口上的第一条街道上的可能位置集合。每个位置包括 NAD 83 经纬度的点几何、每个位置的规范化地址以及评分。评分越低，匹配度越高。结果按照评分从低到高排序。还可以选择传入最大结果数，默认为 10。函数返回每个结果的<code class="varname">标准化地址</code>（addy）、NAD 83 经纬度的点位置（geomout）以及评分。评分越低，匹配度越高。结果按照评分从低到高排序。此函数使用 Tiger 数据（edges、faces、addr）和 PostgreSQL 模糊字符串匹配（soundex、levenshtein）进行计算 </p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm38244"><h2>示例：基本</h2><p>下面的示例计时是在一台 3.0 GHZ 单处理器 Windows 7 计算机上进行的，该计算机具有 2GB RAM，运行 PostgreSQL 9.0/PostGIS 1.5，并加载了所有 MA 状态 Tiger 数据。 目前有点慢（3000 毫秒）</p><p>在 Windows 2003 64 位 8GB 上测试 PostGIS 2.0 PostgreSQL 64 位 Tiger 2011 数据加载 -- (41ms)</p><pre class="programlisting">SELECT pprint_addy(addy), st_astext(geomout),rating
            FROM geocode_intersection( 'Haverford St','Germania St', 'MA', 'Boston', '02130',1);
           pprint_addy            |         st_astext          | rating
----------------------------------+----------------------------+--------
98 Haverford St, Boston, MA 02130 | POINT(-71.101375 42.31376) |      0
</pre><p>即使没有在地理编码器中传递 zip，也可以猜测（在 Windows 7 上大约花费了 3500 毫秒），在 Windows 2003 64 位上花费了 741 毫秒</p><pre class="programlisting">SELECT pprint_addy(addy), st_astext(geomout),rating
                FROM geocode_intersection('Weld', 'School', 'MA', 'Boston');
          pprint_addy          |        st_astext         | rating
-------------------------------+--------------------------+--------
 98 Weld Ave, Boston, MA 02119 | POINT(-71.099 42.314234) |      3
 99 Weld Ave, Boston, MA 02119 | POINT(-71.099 42.314234) |      3
</pre></div><div class="refsection" id="idm38251"><h2>相关信息</h2><p><a class="xref" href="#Geocode" title="Geocode">Geocode</a>, <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a></p></div></div><div class="refentry" id="Get_Geocode_Setting"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Get_Geocode_Setting — 返回存储在 Tiger.geocode_settings 表中的特定设置的值。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Get_Geocode_Setting</strong>(</code>text  <var class="pdparam"> setting_name</var><code>)</code>;</p></div></div><div class="refsection" id="idm38269"><h2>描述</h2><p>返回存储在 Tiger.geocode_settings 表中的特定设置的值。 设置允许您切换功能的调试。 稍后的计划将是通过设置来控制评级。 当前设置列表如下：</p><pre class="screen">name              | setting |  unit   | category  |                                                             short_desc
--------------------------------+---------+---------+-----------+------------------------------------------------------------------------------------------------------------------------------
 debug_geocode_address          | false   | boolean | debug     | outputs debug information in notice log such as queries when geocode_address is called if true
 debug_geocode_intersection     | false   | boolean | debug     | outputs debug information in notice log such as queries when geocode_intersection is called if true
 debug_normalize_address        | false   | boolean | debug     | outputs debug information in notice log such as queries and intermediate expressions when normalize_address is called if true
 debug_reverse_geocode          | false   | boolean | debug     | if true, outputs debug information in notice log such as queries and intermediate expressions when reverse_geocode
 reverse_geocode_numbered_roads | 0       | integer | rating    | For state and county highways, 0 - no preference in name,
                                                                  1 - prefer the numbered highway name, 2 - prefer local state/county name
 use_pagc_address_parser        | false   | boolean | normalize | If set to true, will try to use the address_standardizer extension (via pagc_normalize_address)
                                                                 instead of tiger normalize_address built one    </pre><p class="changed">更改：2.2.0：默认设置现在保存在名为 geocode_settings_default 的表中。 使用自定义设置a位于geocode_settings中，并且仅包含用户设置的设置。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm38275"><h2>返回调试设置示例</h2><pre class="programlisting">SELECT get_geocode_setting('debug_geocode_address) As result;
result
---------
false
        </pre></div><div class="refsection" id="idm38278"><h2>相关信息</h2><p><a class="xref" href="#Set_Geocode_Setting" title="Set_Geocode_Setting">Set_Geocode_Setting</a></p></div></div><div class="refentry" id="Get_Tract"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Get_Tract — 从几何图形所在的区域表中返回人口普查区域或字段。 默认返回区域的短名称。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">get_tract</strong>(</code>geometry  <var class="pdparam"> loc_geom</var>, text  <var class="pdparam"> output_field=name</var><code>)</code>;</p></div></div><div class="refsection" id="idm38297"><h2>描述</h2><p>给定一个几何图形将返回该几何图形的人口普查区位置。 如果未指定空间参考系统，则假定 NAD 83经纬度。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>此函数使用人口普查的 <code class="varname">tract</code>，默认情况下不会加载。如果您已经加载了state表，可以使用 <a class="xref" href="#Loader_Generate_Census_Script" title="Loader_Generate_Census_Script">Loader_Generate_Census_Script</a> 脚本加载 tract、bg 和 tabblock。</p><p>如果您尚未加载状态数据并希望加载这些附加表，请执行以下操作</p><pre class="programlisting">UPDATE tiger.loader_lookuptables SET load = true WHERE load = false AND lookup_name IN('tract', 'bg', 'tabblock');</pre><p>然后它们将被 <a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>包含。</p></td></tr></table></div><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm38309"><h2>示例：基本</h2><pre class="programlisting">SELECT get_tract(ST_Point(-71.101375, 42.31376) ) As tract_name;
tract_name
---------
1203.01
        </pre><pre class="programlisting">--this one returns the tiger geoid
SELECT get_tract(ST_Point(-71.101375, 42.31376), 'tract_id' ) As tract_id;
tract_id
---------
25025120301</pre></div><div class="refsection" id="idm38313"><h2>相关信息</h2><p><a class="xref" href="#Geocode" title="Geocode">Geocode</a>&gt;</p></div></div><div class="refentry" id="Install_Missing_Indexes"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Install_Missing_Indexes — 查找具有在地理编码器连接和过滤条件中使用的键列的所有表，这些表缺少这些列上使用的索引，并将添加它们。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <strong class="fsfunc">Install_Missing_Indexes</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm38327"><h2>描述</h2><p>查找<code class="varname"> Tiger </code>和 <code class="varname">Tiger_data </code>架构中的所有表，其中包含在地理编码器连接和过滤器中使用的关键列，这些列上缺少索引，并将输出 SQL DDL 来定义这些表的索引，然后执行生成的脚本。 这是一个辅助函数，它添加了使查询更快所需的新索引，而这些索引可能在加载过程中丢失。 此函数是<a class="xref" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a>的配套函数，除了生成创建索引脚本之外，还执行它。 它作为 <code class="filename">update_geocode.sql </code>升级脚本的一部分被调用。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm38335"><h2>示例</h2><pre class="programlisting">SELECT install_missing_indexes();
         install_missing_indexes
-------------------------
 t
        </pre></div><div class="refsection" id="idm38338"><h2>相关信息</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>, <a class="xref" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a></p></div></div><div class="refentry" id="Loader_Generate_Census_Script"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Loader_Generate_Census_Script — 为指定states的指定平台生成 shell 脚本，该脚本将下载 Tiger 人口普查state区、bg 和 tabblocks 数据表、暂存并加载到 <code class="varname">Tiger_data </code>架构中。 每个状态脚本都作为单独的记录返回。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof text <strong class="fsfunc">loader_generate_census_script</strong>(</code>text[] <var class="pdparam">param_states</var>, text <var class="pdparam">os</var><code>)</code>;</p></div></div><div class="refsection" id="idm38359"><h2>描述</h2><p>生成一个用于指定平台和指定州的 shell 脚本，该脚本将下载 Tiger 数据中的人口普查州 <code class="varname">tract</code>、分组区块 <code class="varname">bg</code> 和 <code class="varname">tabblocks</code> 数据表，然后将这些数据表分阶段加载到 <code class="varname">tiger_data</code> 模式中。每个州的脚本将作为一个单独的记录返回。</p><p>它在 Linux 上使用 unzip（默认情况下在 Windows 上使用 7-zip），并使用 wget 进行下载。它使用 <a class="xref" href="#shp2pgsql_usage" title="4.7.2. 使用Shapefile加载器">Section 4.7.2, “使用Shapefile加载器”</a> 来加载数据。请注意，它的最小处理单元是整个州。它只会处理暂存和临时文件夹中的文件。</p><p>它使用以下控制表来控制进程和不同的操作系统 shell 语法变化。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">loader_variables</code> 跟踪各种变量，例如人口普查站点、年份、数据和暂存模式</p></li><li class="listitem"><p><code class="varname">loader_platform</code> 各种平台的配置文件以及各种可执行文件所在的位置。 自带windows和linux。 还可以添加更多。</p></li><li class="listitem"><p><code class="varname">loader_lookuptables</code> 每条记录定义一种表（州、县）、是否处理其中的记录以及如何加载它们。定义每个记录的导入数据、暂存数据、添加、删除列、索引和约束的步骤。 每个表都以状态为前缀，并继承自 Tiger 模式中的表。 例如 创建从<code class="varname">tiger.faces</code>继承的<code class="varname">tiger_data.ma_faces</code></p></li></ol></div><p class="availability">可用性: 2.0.0 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a> 包含此逻辑，但如果您在 PostGIS 2.0.0 alpha5 之前安装了 Tiger 地理编码器，则需要在已完成的状态上运行此逻辑以获得这些附加表。</p></td></tr></table></div></div><div class="refsection" id="idm38385"><h2>示例</h2><p>生成脚本以加载 Windows shell 脚本格式的选定状态的数据。</p><pre class="programlisting">SELECT loader_generate_census_script(ARRAY['MA'], 'windows');
-- result --
set STATEDIR="\gisdata\www2.census.gov\geo\pvs\tiger2010st\25_Massachusetts"
set TMPDIR=\gisdata\temp\
set UNZIPTOOL="C:\Program Files\7-Zip\7z.exe"
set WGETTOOL="C:\wget\wget.exe"
set PGBIN=C:\projects\pg\pg91win\bin\
set PGPORT=5432
set PGHOST=localhost
set PGUSER=postgres
set PGPASSWORD=yourpasswordhere
set PGDATABASE=tiger_postgis20
set PSQL="%PGBIN%psql"
set SHP2PGSQL="%PGBIN%shp2pgsql"
cd \gisdata

%WGETTOOL% http://www2.census.gov/geo/pvs/tiger2010st/25_Massachusetts/25/ --no-parent --relative --accept=*bg10.zip,*tract10.zip,*tabblock10.zip --mirror --reject=html
del %TMPDIR%\*.* /Q
%PSQL% -c "DROP SCHEMA tiger_staging CASCADE;"
%PSQL% -c "CREATE SCHEMA tiger_staging;"
cd %STATEDIR%
for /r %%z in (*.zip) do %UNZIPTOOL% e %%z  -o%TMPDIR%
cd %TMPDIR%
%PSQL% -c "CREATE TABLE tiger_data.MA_tract(CONSTRAINT pk_MA_tract PRIMARY KEY (tract_id) ) INHERITS(tiger.tract); "
%SHP2PGSQL% -c -s 4269 -g the_geom   -W "latin1" tl_2010_25_tract10.dbf tiger_staging.ma_tract10 | %PSQL%
%PSQL% -c "ALTER TABLE tiger_staging.MA_tract10 RENAME geoid10 TO tract_id;  SELECT loader_load_staged_data(lower('MA_tract10'), lower('MA_tract')); "
%PSQL% -c "CREATE INDEX tiger_data_MA_tract_the_geom_gist ON tiger_data.MA_tract USING gist(the_geom);"
%PSQL% -c "VACUUM ANALYZE tiger_data.MA_tract;"
%PSQL% -c "ALTER TABLE tiger_data.MA_tract ADD CONSTRAINT chk_statefp CHECK (statefp = '25');"
: </pre><p>生成sh脚本</p><pre class="programlisting">STATEDIR="/gisdata/www2.census.gov/geo/pvs/tiger2010st/25_Massachusetts"
TMPDIR="/gisdata/temp/"
UNZIPTOOL=unzip
WGETTOOL="/usr/bin/wget"
export PGBIN=/usr/pgsql-9.0/bin
export PGPORT=5432
export PGHOST=localhost
export PGUSER=postgres
export PGPASSWORD=yourpasswordhere
export PGDATABASE=geocoder
PSQL=${PGBIN}/psql
SHP2PGSQL=${PGBIN}/shp2pgsql
cd /gisdata

wget http://www2.census.gov/geo/pvs/tiger2010st/25_Massachusetts/25/ --no-parent --relative --accept=*bg10.zip,*tract10.zip,*tabblock10.zip --mirror --reject=html
rm -f ${TMPDIR}/*.*
${PSQL} -c "DROP SCHEMA tiger_staging CASCADE;"
${PSQL} -c "CREATE SCHEMA tiger_staging;"
cd $STATEDIR
for z in *.zip; do $UNZIPTOOL -o -d $TMPDIR $z; done
:
: </pre></div><div class="refsection" id="idm38391"><h2>相关信息</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a></p></div></div><div class="refentry" id="Loader_Generate_Script"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Loader_Generate_Script — 为指定平台的指定状态生成 shell 脚本，该脚本将下载 Tiger 数据、暂存并加载到 <code class="varname">Tiger_data</code> 模式中。 每个状态脚本都作为单独的记录返回。 最新版本支持 Tiger 2010 结构变化，还加载人口普查区、区块组和区块表。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof text <strong class="fsfunc">loader_generate_script</strong>(</code>text[] <var class="pdparam">param_states</var>, text <var class="pdparam">os</var><code>)</code>;</p></div></div><div class="refsection" id="idm38411"><h2>描述</h2><p>为指定平台的指定状态生成 shell 脚本，该脚本将下载 Tiger 数据、暂存并加载到 <code class="varname">Tiger_data </code>模式中。 每个状态脚本都作为单独的记录返回。</p><p>它在 Linux 上使用 unzip（在 Windows 上默认为 7-zip）和 wget 来进行下载。 它使用<a class="xref" href="#shp2pgsql_usage" title="4.7.2. 使用Shapefile加载器">Section 4.7.2, “使用Shapefile加载器”</a>来加载数据。 请注意，它的最小单位是整个状态，但您可以通过自己下载文件来覆盖它。 它只会处理暂存文件夹和临时文件夹中的文件。</p><p>它使用以下控制表来控制进程和不同的操作系统 shell 语法变化。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">loader_variables</code> 跟踪各种变量，例如人口普查站点、年份、数据和暂存模式</p></li><li class="listitem"><p><code class="varname">loader_platform</code> 各种平台的配置文件以及各种可执行文件所在的位置。 自带windows和linux。 还可以添加更多。</p></li><li class="listitem"><p><code class="varname">loader_lookuptables</code> 每条记录定义一种表（州、县）、是否处理其中的记录以及如何加载它们。定义每个记录的导入数据、暂存数据、添加、删除列、索引和约束的步骤。 每个表都以状态为前缀，并继承自 Tiger 模式中的表。 例如 创建从<code class="varname">tiger.faces</code>继承的<code class="varname">tiger_data.ma_faces</code></p></li></ol></div><p class="availability">可用性：2.0.0支持Tiger 2010结构化数据并加载人口普查区（tract）、区块组（bg）和区块（tabblocks）表。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您使用 pgAdmin 3，请注意默认情况下 pgAdmin 3 会截断长文本。 要修复此问题，请更改<span class="emphasis"><em>文件File -&gt; Options -&gt;Query Tool -&gt; Query Editor -&gt;Max.每列</em></span>字符数大于 50000 个字符。</p></td></tr></table></div></div><div class="refsection" id="idm38434"><h2>示例</h2><p>使用 psql，其中 gitest 是您的数据库，<code class="filename">/gisdata/data_load.sh</code> 是使用要运行的 shell 命令创建的文件。</p><pre class="programlisting">psql -U postgres -h localhost -d gistest -A -t \
 -c "SELECT Loader_Generate_Script(ARRAY['MA'], 'gistest')" &gt; /gisdata/data_load.sh;
</pre><p>生成脚本以加载 Windows shell 脚本格式的 2 个状态的数据。</p><pre class="programlisting">SELECT loader_generate_script(ARRAY['MA','RI'], 'windows') AS result;
-- result --
set TMPDIR=\gisdata\temp\
set UNZIPTOOL="C:\Program Files\7-Zip\7z.exe"
set WGETTOOL="C:\wget\wget.exe"
set PGBIN=C:\Program Files\PostgreSQL\9.4\bin\
set PGPORT=5432
set PGHOST=localhost
set PGUSER=postgres
set PGPASSWORD=yourpasswordhere
set PGDATABASE=geocoder
set PSQL="%PGBIN%psql"
set SHP2PGSQL="%PGBIN%shp2pgsql"
cd \gisdata

cd \gisdata
%WGETTOOL% ftp://ftp2.census.gov/geo/tiger/TIGER2015/PLACE/tl_*_25_* --no-parent --relative --recursive --level=2 --accept=zip --mirror --reject=html
cd \gisdata/ftp2.census.gov/geo/tiger/TIGER2015/PLACE
:
:</pre><p>生成sh脚本</p><pre class="programlisting">SELECT loader_generate_script(ARRAY['MA','RI'], 'sh') AS result;
-- result --
TMPDIR="/gisdata/temp/"
UNZIPTOOL=unzip
WGETTOOL="/usr/bin/wget"
export PGBIN=/usr/lib/postgresql/9.4/bin
-- variables used by psql: https://www.postgresql.org/docs/current/static/libpq-envars.html
export PGPORT=5432
export PGHOST=localhost
export PGUSER=postgres
export PGPASSWORD=yourpasswordhere
export PGDATABASE=geocoder
PSQL=${PGBIN}/psql
SHP2PGSQL=${PGBIN}/shp2pgsql
cd /gisdata

cd /gisdata
wget ftp://ftp2.census.gov/geo/tiger/TIGER2015/PLACE/tl_*_25_* --no-parent --relative --recursive --level=2 --accept=zip --mirror --reject=html
cd /gisdata/ftp2.census.gov/geo/tiger/TIGER2015/PLACE
rm -f ${TMPDIR}/*.*
:
:</pre></div><div class="refsection" id="idm38443"><h2>相关信息</h2><p><a class="xref" href="#install_tiger_geocoder_extension" title="2.4.1. 在 PostGIS 数据库中启用Tiger地理编码器">Section 2.4.1, “在 PostGIS 数据库中启用Tiger地理编码器”</a>, <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a>, <a class="xref" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a></p></div></div><div class="refentry" id="Loader_Generate_Nation_Script"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Loader_Generate_Nation_Script — 为指定平台生成加载到县和州查找表中的 shell 脚本。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">loader_generate_nation_script</strong>(</code>text <var class="pdparam">os</var><code>)</code>;</p></div></div><div class="refsection" id="idm38461"><h2>描述</h2><p>为指定平台生成 shell 脚本，将 <code class="varname">County_all</code>、<code class="varname">county_all_lookup</code>、<code class="varname">state_all </code>表加载到 <code class="varname">Tiger_data</code> 架构中。 它们分别继承自<code class="varname">tiger </code>模式中的 <code class="varname">County</code>、<code class="varname">county_lookup</code>、<code class="varname">state</code> 表。</p><p>它在 Linux 上使用 unzip（在 Windows 上默认为 7-zip）和 wget 来进行下载。 它使用<a class="xref" href="#shp2pgsql_usage" title="4.7.2. 使用Shapefile加载器">Section 4.7.2, “使用Shapefile加载器”</a>来加载数据。 </p><p>它使用以下控制表 <code class="varname">Tiger.loader_platform</code>、<code class="varname">tiger.loader_variables </code>和<code class="varname"> Tiger.loader_lookuptables</code> 来控制进程和不同操作系统 shell 语法变化。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">loader_variables</code> 跟踪各种变量，例如人口普查站点、年份、数据和暂存模式</p></li><li class="listitem"><p><code class="varname">loader_platform</code> 各种平台的配置文件以及各种可执行文件所在的位置。 带有 windows 和 linux/unix。 还可以添加更多。</p></li><li class="listitem"><p><code class="varname">loader_lookuptables</code> 每条记录定义一种表（州、县）、是否处理其中的记录以及如何加载它们。定义每个记录的导入数据、暂存数据、添加、删除列、索引和约束的步骤。 每个表都以状态为前缀，并继承自 Tiger 模式中的表。 例如 创建从<code class="varname">tiger.faces</code>继承的<code class="varname">tiger_data.ma_faces</code></p></li></ol></div><p class="enhanced">增强：2.4.1 邮政编码 5 制表区域 (zcta5) 加载步骤已修复，启用后，zcta5 数据将作为名为 zcta5_all 的单个表加载，作为国家脚本加载的一部分。</p><p class="availability">可用性：2.1.0 </p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您希望将邮政编码 5 制表区域 (zcta5) 包含在您的国家脚本加载中，请执行以下操作：</p><pre class="programlisting">UPDATE tiger.loader_lookuptables SET load = true WHERE table_name = 'zcta510';</pre></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>如果您运行的是<code class="varname"> Tiger_2010 </code>版本，并且想要使用较新的 Tiger 数据重新加载为状态，则在运行此脚本之前，您需要首先加载生成并运行 drop 语句<a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a>。</p></td></tr></table></div></div><div class="refsection" id="idm38499"><h2>示例</h2><p>生成脚本来加载Windows的国家数据。</p><pre class="programlisting">SELECT loader_generate_nation_script('windows'); </pre><p>生成脚本来加载 Linux/Unix 系统的数据。</p><pre class="programlisting">SELECT loader_generate_nation_script('sh'); </pre></div><div class="refsection" id="idm38505"><h2>相关信息</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>, <a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a></p></div></div><div class="refentry" id="Missing_Indexes_Generate_Script"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Missing_Indexes_Generate_Script — 查找具有在地理编码器联接中使用的键列的所有表，这些表缺少这些列上的索引，并将输出 SQL DDL 来定义这些表的索引。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Missing_Indexes_Generate_Script</strong>(</code><code>)</code>;</p></div></div><div class="refsection" id="idm38520"><h2>描述</h2><p>查找 <code class="varname">tiger</code> 和<code class="varname"> Tiger_data</code> 架构中的所有表，其中包含在地理编码器联接中使用的关键列，这些列上缺少索引，并将输出 SQL DDL 来定义这些表的索引。 这是一个辅助函数，它添加了使查询更快所需的新索引，而这些索引可能在加载过程中丢失。 随着地理编码器的改进，该函数将更新以适应正在使用的新索引。 如果此函数没有输出任何内容，则意味着您的所有表都具有我们认为的关键索引。</p><p class="availability">可用性: 2.0.0</p></div><div class="refsection" id="idm38526"><h2>示例</h2><pre class="programlisting">SELECT missing_indexes_generate_script();
-- output: This was run on a database that was created before many corrections were made to the loading script ---
CREATE INDEX idx_tiger_county_countyfp ON tiger.county USING btree(countyfp);
CREATE INDEX idx_tiger_cousub_countyfp ON tiger.cousub USING btree(countyfp);
CREATE INDEX idx_tiger_edges_tfidr ON tiger.edges USING btree(tfidr);
CREATE INDEX idx_tiger_edges_tfidl ON tiger.edges USING btree(tfidl);
CREATE INDEX idx_tiger_zip_lookup_all_zip ON tiger.zip_lookup_all USING btree(zip);
CREATE INDEX idx_tiger_data_ma_county_countyfp ON tiger_data.ma_county USING btree(countyfp);
CREATE INDEX idx_tiger_data_ma_cousub_countyfp ON tiger_data.ma_cousub USING btree(countyfp);
CREATE INDEX idx_tiger_data_ma_edges_countyfp ON tiger_data.ma_edges USING btree(countyfp);
CREATE INDEX idx_tiger_data_ma_faces_countyfp ON tiger_data.ma_faces USING btree(countyfp);
        </pre></div><div class="refsection" id="idm38529"><h2>相关信息</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>, <a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a></p></div></div><div class="refentry" id="Normalize_Address"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Normalize_Address — 给定文本街道地址，返回复合的<code class="varname">norm_addy</code>类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">norm_addy <strong class="fsfunc">normalize_address</strong>(</code>varchar  <var class="pdparam">in_address</var><code>)</code>;</p></div></div><div class="refsection" id="idm38547"><h2>描述</h2><p>给定文本街道地址，返回复合的<code class="varname">norm_addy</code>类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 这是地理编码过程中将所有地址转换为标准化邮政形式的第一步。 除了地理编码器打包的数据之外，不需要其他数据。</p><p>此函数仅使用使用 Tiger_geocoder 预加载并位于<code class="varname">tiger</code>模式中的各种方向/状态/后缀查找表，因此不需要您下载tiger普查数据或任何其他附加数据来使用它。 您可能会发现需要向<code class="varname"> Tiger</code> 模式中的各种查找表添加更多缩写或替代命名。</p><p>它使用位于<code class="varname"> tiger</code> 模式中的各种控制查找表来标准化输入地址。</p><p>该函数返回的<code class="varname">norm_addy</code>类型对象中的字段按以下顺序排列，其中()表示地理编码器所需的字段，[]表示可选字段：</p><p>(address) [predirAbbrev] (streetName) [streetTypeAbbrev] [postdirAbbrev] [internal] [location] [stateAbbrev] [zip] [parsed] [zip4] [address_alphanumeric]</p><p class="enhanced">增强：2.4.0norm_addy对象包括附加字段zip4和address_alphanumeric。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">address</code>是一个整数：街道号码</p></li><li class="listitem"><p><code class="varname">predirAbbrev</code> 是 varchar：道路的方向前缀，例如 N、S、E、W 等。这些是使用 <code class="varname">Direction_lookup</code> 表进行控制的。</p></li><li class="listitem"><p><code class="varname">streetName</code>是varchar</p></li><li class="listitem"><p><code class="varname">streetTypeAbbrev </code>varchar 街道类型的缩写版本：例如 St, Ave, Cir。 这些是使用<code class="varname"> street_type_lookup </code>表进行控制的。</p></li><li class="listitem"><p><code class="varname">postdirAbbrev</code> varchar类型是 道路 N、S、E、W 等方向的缩写。这些是使用 <code class="varname">Direction_lookup </code>表进行控制的。</p></li><li class="listitem"><p><code class="varname">internal</code>varchar类型内部地址，例如公寓或套房号。</p></li><li class="listitem"><p><code class="varname">location</code> varchar类型， 通常是城市或管辖省份。</p></li><li class="listitem"><p><code class="varname">stateAbbrev</code> varchar类型 两个字符的美国州。 例如MA, NY, MI。 这些由<code class="varname"> state_lookup</code> 表控制。</p></li><li class="listitem"><p><code class="varname">zip</code> varchar类型， 5 位邮政编码。 例如 02109。</p></li><li class="listitem"><p><code class="varname">parsed</code> boolean类型 - 表示地址是否是由标准化过程形成的。 Normalize_address 函数在返回地址之前将其设置为 true。</p></li><li class="listitem"><p><code class="varname">zip4</code>9 位邮政编码的最后 4 位数字。 可用性：PostGIS 2.4.0。</p></li><li class="listitem"><p><code class="varname">address_alphanumeric</code> 完整的街道号码，即使它具有字母字符（如 17R）。 对此的解析最好使用<a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> 函数。 可用性：PostGIS 2.4.0。</p></li></ol></div></div><div class="refsection" id="idm38602"><h2>示例</h2><p>输出选择字段。 如果您想要漂亮的文本输出，请使用 <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>。</p><pre class="programlisting">SELECT address As orig, (g.na).streetname, (g.na).streettypeabbrev
 FROM (SELECT address, normalize_address(address) As na
        FROM addresses_to_geocode) As g;

                        orig                         |  streetname   | streettypeabbrev
-----------------------------------------------------+---------------+------------------
 28 Capen Street, Medford, MA                        | Capen         | St
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | Mount Auburn  | St
 950 Main Street, Worcester, MA 01610                | Main          | St
 529 Main Street, Boston MA, 02129                   | Main          | St
 77 Massachusetts Avenue, Cambridge, MA 02139        | Massachusetts | Ave
 25 Wizard of Oz, Walaford, KS 99912323              | Wizard of Oz  |
        </pre></div><div class="refsection" id="idm38607"><h2>相关信息</h2><p><a class="xref" href="#Geocode" title="Geocode">Geocode</a>, <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a></p></div></div><div class="refentry" id="Pagc_Normalize_Address"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Pagc_Normalize_Address — 给定文本街道地址，返回复合的<code class="varname">norm_addy</code>类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。 需要 address_standardizer 扩展。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">norm_addy <strong class="fsfunc">pagc_normalize_address</strong>(</code>varchar  <var class="pdparam">in_address</var><code>)</code>;</p></div></div><div class="refsection" id="idm38625"><h2>描述</h2><p>给定文本街道地址，返回复合的<code class="varname">norm_addy</code>类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 这是地理编码过程中将所有地址转换为标准化邮政形式的第一步。 除了地理编码器打包的数据之外，不需要其他数据。</p><p>该函数仅使用各种 pagc_* 查找表，这些表由 Tiger_geocoder 预加载并位于<code class="varname"> Tiger</code> 模式中，因此不需要您下载tiger普查数据或任何其他附加数据来使用它。 您可能会发现需要向 <code class="varname">Tiger</code> 模式中的各种查找表添加更多缩写或替代命名。</p><p>它使用位于<code class="varname"> tiger</code> 模式中的各种控制查找表来标准化输入地址。</p><p>该函数返回的<code class="varname">norm_addy</code>类型对象中的字段按以下顺序排列，其中()表示地理编码器所需的字段，[]表示可选字段：</p><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> 的大小写和格式略有不同。</p><p class="availability">可用性：2.1.0</p><p>
            <span class="inlinemediaobject"><img src="images/check.png"/></span> 该方法需要address_standardizer扩展。 </p><p>(address) [predirAbbrev] (streetName) [streetTypeAbbrev] [postdirAbbrev] [internal] [location] [stateAbbrev] [zip]</p><p>目前，address_standardizer 扩展的本机 standardaddr 比norm_addy 丰富一些，因为它旨在支持国际地址（包括国家/地区）。 standardaddr 等效字段是：</p><p>house_num,predir, name, suftype, sufdir, unit, city, state, postcode</p><p class="enhanced">增强：2.4.0norm_addy对象包括附加字段zip4和address_alphanumeric。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">address</code>是一个整数：街道号码</p></li><li class="listitem"><p><code class="varname">predirAbbrev</code> 是 varchar：道路的方向前缀，例如 N、S、E、W 等。这些是使用 <code class="varname">Direction_lookup</code> 表进行控制的。</p></li><li class="listitem"><p><code class="varname">streetName</code>是varchar</p></li><li class="listitem"><p><code class="varname">streetTypeAbbrev </code>varchar 街道类型的缩写版本：例如 St, Ave, Cir。 这些是使用<code class="varname"> street_type_lookup </code>表进行控制的。</p></li><li class="listitem"><p><code class="varname">postdirAbbrev</code> varchar类型是 道路 N、S、E、W 等方向的缩写。这些是使用 <code class="varname">Direction_lookup </code>表进行控制的。</p></li><li class="listitem"><p><code class="varname">internal</code>varchar类型内部地址，例如公寓或套房号。</p></li><li class="listitem"><p><code class="varname">location</code> varchar类型， 通常是城市或管辖省份。</p></li><li class="listitem"><p><code class="varname">stateAbbrev</code> varchar类型 两个字符的美国州。 例如MA, NY, MI。 这些由<code class="varname"> state_lookup</code> 表控制。</p></li><li class="listitem"><p><code class="varname">zip</code> varchar类型， 5 位邮政编码。 例如 02109。</p></li><li class="listitem"><p><code class="varname">parsed</code> boolean类型 - 表示地址是否是由标准化过程形成的。 Normalize_address 函数在返回地址之前将其设置为 true。</p></li><li class="listitem"><p><code class="varname">zip4</code>9 位邮政编码的最后 4 位数字。 可用性：PostGIS 2.4.0。</p></li><li class="listitem"><p><code class="varname">address_alphanumeric</code> 完整的街道号码，即使它具有字母字符（如 17R）。 对此的解析最好使用<a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> 函数。 可用性：PostGIS 2.4.0。</p></li></ol></div></div><div class="refsection" id="idm38689"><h2>示例</h2><p>单次调用示例</p><pre class="programlisting">SELECT addy.*
FROM pagc_normalize_address('9000 E ROO ST STE 999, Springfield, CO') AS addy;


 address | predirabbrev | streetname | streettypeabbrev | postdirabbrev | internal  |  location   | stateabbrev | zip | parsed
---------+--------------+------------+------------------+---------------+-----------+-------------+-------------+-----+--------
    9000 | E            | ROO        | ST               |               | SUITE 999 | SPRINGFIELD | CO          |     | t</pre><p>批量调用。 目前，postgis_tiger_geocoder 包装 address_standardizer 的方式存在速度问题。 这些问题有望在以后的版本中得到解决。 为了解决这些问题，如果您需要批量地理编码的速度以批量模式调用生成normaddy，建议您直接调用address_standardizer standardize_address函数，如下所示，这与我们在<a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>中所做的类似，使用在<a class="xref" href="#Geocode" title="Geocode">Geocode</a>中创建的数据 。</p><pre class="programlisting">WITH g AS (SELECT address, ROW((sa).house_num, (sa).predir, (sa).name
  , (sa).suftype, (sa).sufdir, (sa).unit , (sa).city, (sa).state, (sa).postcode, true)::norm_addy As na
 FROM (SELECT address, standardize_address('tiger.pagc_lex'
       , 'tiger.pagc_gaz'
       , 'tiger.pagc_rules', address) As sa
        FROM addresses_to_geocode) As g)
SELECT address As orig, (g.na).streetname, (g.na).streettypeabbrev
 FROM  g;

 orig                                                |  streetname   | streettypeabbrev
-----------------------------------------------------+---------------+------------------
 529 Main Street, Boston MA, 02129                   | MAIN          | ST
 77 Massachusetts Avenue, Cambridge, MA 02139        | MASSACHUSETTS | AVE
 25 Wizard of Oz, Walaford, KS 99912323              | WIZARD OF     |
 26 Capen Street, Medford, MA                        | CAPEN         | ST
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | MOUNT AUBURN  | ST
 950 Main Street, Worcester, MA 01610                | MAIN          | ST</pre></div><div class="refsection" id="idm38697"><h2>相关信息</h2><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>, <a class="xref" href="#Geocode" title="Geocode">Geocode</a></p></div></div><div class="refentry" id="Pprint_Addy"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Pprint_Addy — 给定一个<code class="varname">norm_addy</code>复合类型对象，返回它的漂亮的打印表示。 通常与normalize_address结合使用。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">varchar <strong class="fsfunc">pprint_addy</strong>(</code>norm_addy  <var class="pdparam">in_addy</var><code>)</code>;</p></div></div><div class="refsection" id="idm38715"><h2>描述</h2><p>给定一个<code class="varname">norm_addy</code>复合类型对象，返回它的漂亮的打印表示。 除了地理编码器打包的数据之外，不需要其他数据。</p><p>通常与 <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> 结合使用。</p></div><div class="refsection" id="idm38721"><h2>示例</h2><p>漂亮地打印一个地址</p><pre class="programlisting">SELECT pprint_addy(normalize_address('202 East Fremont Street, Las Vegas, Nevada 89101')) As pretty_address;
            pretty_address
---------------------------------------
 202 E Fremont St, Las Vegas, NV 89101
        </pre><p>漂亮的打印地址地址表</p><pre class="programlisting">SELECT address As orig, pprint_addy(normalize_address(address)) As pretty_address
        FROM addresses_to_geocode;

                        orig                         |              pretty_address
-----------------------------------------------------+-------------------------------------------
 529 Main Street, Boston MA, 02129                   | 529 Main St, Boston MA, 02129
 77 Massachusetts Avenue, Cambridge, MA 02139        | 77 Massachusetts Ave, Cambridge, MA 02139
 28 Capen Street, Medford, MA                        | 28 Capen St, Medford, MA
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | 124 Mount Auburn St, Cambridge, MA 02138
 950 Main Street, Worcester, MA 01610                | 950 Main St, Worcester, MA 01610</pre></div><div class="refsection" id="idm38727"><h2>相关信息</h2><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a></p></div></div><div class="refentry" id="Reverse_Geocode"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Reverse_Geocode — 获取已知空间参考系统中的几何点并返回一条记录，其中包含理论上可能的地址数组和交叉街道数组。 如果 include_strnum_range = true，则包括交叉街道中的街道范围。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <strong class="fsfunc">Reverse_Geocode</strong>(</code>geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">include_strnum_range=false</var>, geometry[]  <var class="pdparam">OUT intpt</var>, norm_addy[]  <var class="pdparam">OUT addy</var>, varchar[]  <var class="pdparam">OUT street</var><code>)</code>;</p></div></div><div class="refsection" id="idm38755"><h2>描述</h2><p>获取已知空间参考中的几何点并返回一条记录，其中包含理论上可能的地址数组和十字街道数组。 如果 include_strnum_range = true，则包括交叉街道中的街道范围。 如果未传入，则 include_strnum_range 默认为 false。地址根据点最接近的道路进行排序，因此第一个地址很可能是正确的地址。</p><p>为什么我们说理论地址而不是实际地址。 Tiger 数据没有真实地址，只有街道范围。 因此，理论地址是基于街道范围的内插地址。 例如，插入我的地址之一会返回 26 Court St. 和 26 Court Sq.，尽管不存在 26 Court Sq. 这样的地方。 这是因为一个点可能位于 2 条街道的拐角处，因此逻辑会沿着两条街道进行插值。 该逻辑还假设地址沿着街道均匀分布，这当然是错误的，因为您可以让市政建筑占据街道范围的很大一部分，而其余建筑物则聚集在末端。</p><p>注意：嗯，这个功能依赖于 Tiger 数据。 如果您还没有加载覆盖该点区域的数据，那么您将得到一条充满 NULL 的记录。</p><p>返回的记录元素如下：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">intpt </code>是一个点数组：这些是街道上最接近输入点的中心线点。 有多少个地址就有多少个点。</p></li><li class="listitem"><p><code class="varname">addy</code> 是一个norm_addy（规范化地址）数组：这些是适合输入点的可能地址数组。 数组中的第一个最有可能。 一般来说应该只有一个，除非某个点位于 2 或 3 条街道的拐角处，或者该点位于道路上的某个位置而不是在侧面。</p></li><li class="listitem"><p><code class="varname">street varchar</code> 数组：这些是交叉街道（或街道）（相交的街道或者是点投影所在的街道）。</p></li></ol></div><p class="enhanced">增强：2.4.1 如果加载了可选的 zcta5 数据集，即使未加载特定的状态数据，reverse_geocode 函数也可以解析为状态和 zip。 有关加载 zcta5 数据的详细信息，请参阅 <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a>。</p><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm38774"><h2>示例</h2><p>位于两条街道拐角处但最接近一条街道的点示例。 这是 MIT 的大致位置：77 Massachusetts Ave, Cambridge, MA 02139 请注意，虽然我们没有 3 条街道，但 PostgreSQL 只会为高于上限的条目返回 null，因此可以安全使用。 这包括街道范围</p><pre class="programlisting">SELECT pprint_addy(r.addy[1]) As st1, pprint_addy(r.addy[2]) As st2, pprint_addy(r.addy[3]) As st3,
            array_to_string(r.street, ',') As cross_streets
        FROM reverse_geocode(ST_GeomFromText('POINT(-71.093902 42.359446)',4269),true) As r;

 result
 ------
      st1                                  | st2 | st3 |               cross_streets
-------------------------------------------+-----+-----+----------------------------------------------
 67 Massachusetts Ave, Cambridge, MA 02139 |     |     | 67 - 127 Massachusetts Ave,32 - 88 Vassar St</pre><p>在这里，我们选择不包括十字路口的地址范围，并选择了一个非常靠近两条街道拐角处的位置，因此可以通过两个不同的地址来识别。</p><pre class="programlisting">SELECT pprint_addy(r.addy[1]) As st1, pprint_addy(r.addy[2]) As st2,
pprint_addy(r.addy[3]) As st3, array_to_string(r.street, ',') As cross_str
FROM reverse_geocode(ST_GeomFromText('POINT(-71.06941 42.34225)',4269)) As r;

result
--------
               st1               |               st2               | st3 | cross_str
---------------------------------+---------------------------------+-----+------------------------
 5 Bradford St, Boston, MA 02118 | 49 Waltham St, Boston, MA 02118 |     | Waltham St
</pre><p>对于这一点，我们重用<a class="xref" href="#Geocode" title="Geocode">Geocode</a> 中的地理编码示例，并且只需要主要地址和最多 2 个交叉街道。</p><pre class="programlisting">
SELECT actual_addr, lon, lat, pprint_addy((rg).addy[1]) As int_addr1,
    (rg).street[1] As cross1, (rg).street[2] As cross2
FROM (SELECT address As actual_addr, lon, lat,
    reverse_geocode( ST_SetSRID(ST_Point(lon,lat),4326) ) As rg
    FROM addresses_to_geocode WHERE rating 
&gt; -1) As foo;

                     actual_addr                     |    lon    |   lat    |                 int_addr1                 |     cross1      |   cross2
-----------------------------------------------------+-----------+----------+-------------------------------------------+-----------------+------------
 529 Main Street, Boston MA, 02129                   | -71.07181 | 42.38359 | 527 Main St, Boston, MA 02129             | Medford St      |
 77 Massachusetts Avenue, Cambridge, MA 02139        | -71.09428 | 42.35988 | 77 Massachusetts Ave, Cambridge, MA 02139 | Vassar St       |
 26 Capen Street, Medford, MA                        | -71.12377 | 42.41101 | 9 Edison Ave, Medford, MA 02155           | Capen St        | Tesla Ave
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | -71.12304 | 42.37328 | 3 University Rd, Cambridge, MA 02138      | Mount Auburn St |
 950 Main Street, Worcester, MA 01610                | -71.82368 | 42.24956 | 3 Maywood St, Worcester, MA 01603         | Main St         | Maywood Pl

</pre></div><div class="refsection" id="idm38783"><h2>相关信息</h2><p><a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="#Geocode" title="Geocode">Geocode</a>, <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></p></div></div><div class="refentry" id="Topology_Load_Tiger"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Topology_Load_Tiger — 将tiger数据的定义区域加载到 PostGIS 拓扑中，并将老虎数据转换为拓扑的空间参考，并捕捉到拓扑的精度公差。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Topology_Load_Tiger</strong>(</code>varchar  <var class="pdparam">topo_name</var>, varchar  <var class="pdparam">region_type</var>, varchar  <var class="pdparam">region_id</var><code>)</code>;</p></div></div><div class="refsection" id="idm38807"><h2>描述</h2><p>将定义的tiger数据区域加载到 PostGIS 拓扑中。 面、节点和边将转换为目标拓扑的空间参考系统，点将捕捉到目标拓扑的容差。 创建的面、节点、边与原始 Tiger 数据面、节点、边保持相同的 ID，以便数据集将来可以更轻松地与 Tiger 数据进行协调。 返回有关流程的摘要详细信息。</p><p>例如，这对于重新划分数据非常有用，在这种情况下，您需要新形成的多边形遵循街道的中心线，并且生成的多边形不重叠。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>该功能依赖Tiger数据以及PostGIS拓扑模块的安装。 有关更多信息，请参阅<a class="xref" href="#Topology" title="Chapter 9. 拓扑结构">Chapter 9, <em>拓扑结构</em></a>和<a class="xref" href="#installation_configuration" title="2.2.3. 构建配置">Section 2.2.3, “构建配置”</a>。 如果您尚未加载覆盖感兴趣区域的数据，则不会创建任何拓扑记录。 如果您没有使用拓扑函数创建拓扑，此函数也会失败。</p></td></tr></table></div><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>大多数拓扑验证错误都是由于公差问题造成的，即变换后边缘点没有完全对齐或重叠。 为了纠正这种情况，如果拓扑验证失败，您可能需要提高或降低精度。</p></td></tr></table></div><p>所需参数：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">topo_name </code>要加载数据的现有 PostGIS 拓扑的名称。</p></li><li class="listitem"><p><code class="varname">Region_type </code>边界区域的类型。 目前仅支持<code class="varname">place</code>和<code class="varname">county</code>。 计划是再多几个。 这是用于定义区域边界的表格。 例如，<code class="varname">tiger.place</code>、<code class="varname">tiger.county</code></p></li><li class="listitem"><p><code class="varname">Region_id</code> 这就是 TIGER 所说的大地水准面。 它是表中区域的唯一标识符。 对于 place，它是<code class="varname"> Tiger.place</code> 中的<code class="varname"> plcidfp </code>列。 对于county，它是 <code class="varname">Tiger.county</code> 中的<code class="varname"> cntyidfp </code>列 </p></li></ol></div><p class="availability">可用性: 2.0.0 </p></div><div class="refsection" id="idm38837"><h2>示例：Boston, Massachusetts拓扑</h2><p>在 Mass State Plane Feet (2249) 中创建马萨诸塞州波士顿的拓扑，容差为 0.25 英尺，然后加载到波士顿城市tiger面、边缘、节点。</p><pre class="programlisting">SELECT topology.CreateTopology('topo_boston', 2249, 0.25);
createtopology
--------------
   15
-- 60,902 ms ~ 1 minute on windows 7 desktop running 9.1 (with 5 states tiger data loaded)
SELECT tiger.topology_load_tiger('topo_boston', 'place', '2507000');
-- topology_loader_tiger --
29722 edges holding in temporary. 11108 faces added. 1875 edges of faces added.  20576 nodes added.
19962 nodes contained in a face.  0 edge start end corrected.  31597 edges added.

-- 41 ms --
SELECT topology.TopologySummary('topo_boston');
 -- topologysummary--
Topology topo_boston (15), SRID 2249, precision 0.25
20576 nodes, 31597 edges, 11109 faces, 0 topogeoms in 0 layers

-- 28,797 ms to validate yeh returned no errors --
SELECT * FROM
    topology.ValidateTopology('topo_boston');

       error       |   id1    |    id2
-------------------+----------+-----------
      </pre></div><div class="refsection" id="idm38841"><h2>示例： Suffolk, Massachusetts拓扑</h2><p>在 Mass State Plane Meters (26986) 中创建马萨诸塞州萨福克市的拓扑，容差为 0.25 米，然后加载到萨福克县tiger面、边、节点。</p><pre class="programlisting">SELECT topology.CreateTopology('topo_suffolk', 26986, 0.25);
-- this took 56,275 ms ~ 1 minute on Windows 7 32-bit with 5 states of tiger loaded
-- must have been warmed up after loading boston
SELECT tiger.topology_load_tiger('topo_suffolk', 'county', '25025');
-- topology_loader_tiger --
 36003 edges holding in temporary. 13518 faces added. 2172 edges of faces added.
 24761 nodes added.  24075 nodes contained in a face.  0 edge start end corrected.  38175 edges added.
-- 31 ms --
SELECT topology.TopologySummary('topo_suffolk');
 -- topologysummary--
 Topology topo_suffolk (14), SRID 26986, precision 0.25
24761 nodes, 38175 edges, 13519 faces, 0 topogeoms in 0 layers

-- 33,606 ms to validate --
SELECT * FROM
    topology.ValidateTopology('topo_suffolk');

       error       |   id1    |    id2
-------------------+----------+-----------
 coincident nodes  | 81045651 |  81064553
 edge crosses node | 81045651 |  85737793
 edge crosses node | 81045651 |  85742215
 edge crosses node | 81045651 | 620628939
 edge crosses node | 81064553 |  85697815
 edge crosses node | 81064553 |  85728168
 edge crosses node | 81064553 |  85733413
      </pre></div><div class="refsection" id="idm38845"><h2>相关信息</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>, <a class="xref" href="#TopologySummary" title="TopologySummary">TopologySummary</a>, <a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a></p></div></div><div class="refentry" id="Set_Geocode_Setting"><div class="refentry.separator"><hr/></div><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>Set_Geocode_Setting — 设置影响地理编码器功能行为的设置。</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <strong class="fsfunc">Set_Geocode_Setting</strong>(</code>text  <var class="pdparam"> setting_name</var>, text  <var class="pdparam"> setting_value</var><code>)</code>;</p></div></div><div class="refsection" id="idm38867"><h2>描述</h2><p>设置存储在<code class="varname"> Tiger.geocode_settings </code>表中的特定设置的值。 设置允许您切换功能的调试。 稍后的计划将是通过设置来控制评级。 当前设置列表列在 <a class="xref" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a> 中。</p><p class="availability">可用性：2.1.0</p></div><div class="refsection" id="idm38873"><h2>返回调试设置示例</h2><p>如果您在该函数为 true 时运行<a class="xref" href="#Geocode" title="Geocode">Geocode</a>，则 NOTICE 日志将输出计时和查询。</p><pre class="programlisting">SELECT set_geocode_setting('debug_geocode_address', 'true') As result;
result
---------
true</pre></div><div class="refsection" id="idm38878"><h2>相关信息</h2><p><a class="xref" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a></p></div></div></section></section><section class="chapter" id="PostGIS_Special_Functions_Index"><div class="titlepage"><div><div><h1 class="title">Chapter 13. PostGIS 特殊函数索引</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#PostGIS_Aggregate_Functions">13.1. PostGIS 聚合函数</a></span></li><li><span class="section"><a href="#PostGIS_Window_Functions">13.2. PostGIS 窗口函数</a></span></li><li><span class="section"><a href="#PostGIS_SQLMM_Functions">13.3. PostGIS SQL-MM 兼容函数</a></span></li><li><span class="section"><a href="#PostGIS_GeographyFunctions">13.4. PostGIS 地理支持函数</a></span></li><li><span class="section"><a href="#PostGIS_RasterFunctions">13.5. PostGIS 栅格支持函数</a></span></li><li><span class="section"><a href="#PostGIS_Geometry_DumpFunctions">13.6. PostGIS 几何/地理/栅格导出函数</a></span></li><li><span class="section"><a href="#PostGIS_BoxFunctions">13.7. PostGIS 边界框函数</a></span></li><li><span class="section"><a href="#PostGIS_3D_Functions">13.8. 支持 3D 的 PostGIS 函数</a></span></li><li><span class="section"><a href="#PostGIS_Curved_GeometryFunctions">13.9. PostGIS 曲线几何支持函数</a></span></li><li><span class="section"><a href="#PostGIS_PS_GeometryFunctions">13.10. PostGIS 多面体曲面支持函数</a></span></li><li><span class="section"><a href="#PostGIS_TypeFunctionMatrix">13.11. PostGIS函数支持矩阵</a></span></li><li><span class="section"><a href="#NewFunctions">13.12. 新的、增强的或更改的 PostGIS 函数</a></span></li></ul></div><section class="section" id="PostGIS_Aggregate_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.1. PostGIS 聚合函数</h2></div></div></div><p>下面的函数是空间聚合函数，其使用方式与 SQL 聚合函数（例如<code class="code"> sum</code> 和<code class="code">average</code>）相同。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> - Perform 3D union using postgis_sfcgal.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - 执行 3D 联合。</li><li class="listitem"><a class="link" href="#ST_AsFlatGeobuf" title="ST_AsFlatGeobuf">ST_AsFlatGeobuf</a> - 返回一组行的 FlatGeobuf 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGeobuf" title="ST_AsGeobuf">ST_AsGeobuf</a> - 返回一组行的 Geobuf 表示。</li><li class="listitem"><a class="link" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a> - 返回一组行的 MVT 表示形式的聚合函数。</li><li class="listitem"><a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a> - 使用 DBSCAN 算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a> - 将输入几何图形聚类成连接集的聚合函数。</li><li class="listitem"><a class="link" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a> - 窗口函数，返回每个输入几何图形的簇 ID，将输入几何图形聚类到连接的集合中。</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a> - 按间隔距离对几何图形进行聚合的聚合函数。</li><li class="listitem"><a class="link" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> - 窗口函数，返回每个输入几何图形的簇 ID，使用分离距离进行聚类。</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - 从一组几何图形创建 GeometryCollection 或 Multi* 几何图形。</li><li class="listitem"><a class="link" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a> - 用于查找多边形无法形成有效覆盖范围的位置的窗口函数。</li><li class="listitem"><a class="link" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a> - 简化多边形覆盖范围边缘的窗口函数。</li><li class="listitem"><a class="link" href="#ST_CoverageUnion" title="ST_CoverageUnion">ST_CoverageUnion</a> - 通过删除共享边来计算形成覆盖范围的一组多边形的并集。</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - 返回几何图形边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - 从Point, MultiPoint,或LineString geometries创建LineString。</li><li class="listitem"><a class="link" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a> - 聚合函数，以内存高效但速度较慢的方式联合几何图形</li><li class="listitem"><a class="link" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a> - 计算由一组几何图形的线条形成的多边形集合。</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - 如果栅格具有相同的倾斜、比例、空间参考和偏移（像素可以放在同一网格上而不切割成像素），则返回 true；如果没有注意细节问题，则返回 false。</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - 计算表示输入几何图形的点集并集的几何图形。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a> - 返回一组 element_id、类型数组 (topoelements) 的 topoelementarray。</li></ul></div></section><section class="section" id="PostGIS_Window_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.2. PostGIS 窗口函数</h2></div></div></div><p>下面的函数是空间窗口函数，其使用方式与 SQL 窗口函数（例如<code class="code"> row_number()</code>、<code class="code">lead()</code>和 <code class="code">lag()</code>）相同。 它们后面必须跟<code class="code">有 OVER() </code>子句。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a> - 使用 DBSCAN 算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a> - 窗口函数，返回每个输入几何图形的簇 ID，将输入几何图形聚类到连接的集合中。</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> - 窗口函数，返回每个输入几何图形的簇 ID，使用分离距离进行聚类。</li><li class="listitem"><a class="link" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a> - 用于查找多边形无法形成有效覆盖范围的位置的窗口函数。</li><li class="listitem"><a class="link" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a> - 简化多边形覆盖范围边缘的窗口函数。</li></ul></div></section><section class="section" id="PostGIS_SQLMM_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.3. PostGIS SQL-MM 兼容函数</h2></div></div></div><p>下面给出的函数是符合 SQL/MM 3 标准的 PostGIS 函数</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a> - 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a> - 执行 3D 差异</li><li class="listitem"><a class="link" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> - 执行 3D 相交</li><li class="listitem"><a class="link" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> - Perform 3D union using postgis_sfcgal.</li><li class="listitem"><a class="link" href="#CG_Volume" title="CG_Volume">CG_Volume</a> - 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - 测试两个 3D 几何图形是否在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - 执行 3D 差异</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - 执行 3D 相交</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域）</li><li class="listitem"><a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a> - 返回线性几何体的 3D 长度。</li><li class="listitem"><a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a> - 返回多边形几何体的 3D 周长。</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - 执行 3D 联合。</li><li class="listitem"><a class="link" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a> - 添加新边，如果这样做会分割面，则修改原始面并添加新面。</li><li class="listitem"><a class="link" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a> - 添加新边，如果这样做会分割一个面，请删除原始面并用两个新面替换它。</li><li class="listitem"><a class="link" href="#ST_AddIsoEdge" title="ST_AddIsoEdge">ST_AddIsoEdge</a> - 将由几何 alinestring 定义的孤立边添加到连接两个现有孤立节点anode和anothernode的拓扑，并返回新边的边id。</li><li class="listitem"><a class="link" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a> - 将一个孤立的节点添加到拓扑结构中的一个面，并返回新节点的节点ID。如果"face"为空（null），仍然会创建节点。</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - 返回多边形几何体的面积。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - 返回几何图形的边界。</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - 计算覆盖距几何体给定距离内所有点的几何体。</li><li class="listitem"><a class="link" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a> - 返回几何体的几何中心。</li><li class="listitem"><a class="link" href="#ST_ChangeEdgeGeom" title="ST_ChangeEdgeGeom">ST_ChangeEdgeGeom</a> - 改变边的形状而不影响拓扑结构。</li><li class="listitem"><a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a> - 测试 B 的每个点是否都位于 A 中，并且它们的内部是否有一个共同点</li><li class="listitem"><a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> - 计算几何体的凸包。</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - 返回几何体的坐标维度。</li><li class="listitem"><a class="link" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a> - 将几何图形集合添加到给定的空拓扑并返回详细说明成功的消息。</li><li class="listitem"><a class="link" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a> - 测试两个几何图形是否有一些（但不是全部）共同的内点</li><li class="listitem"><a class="link" href="#ST_CurveN" title="ST_CurveN">ST_CurveN</a> - Returns the Nth component curve geometry of a CompoundCurve.</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - 将包含曲线的几何图形转换为线性几何图形。</li><li class="listitem"><a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a> - 计算表示几何 A 中不与几何 B 相交的部分的几何。</li><li class="listitem"><a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> - 返回几何图形的拓扑维数。</li><li class="listitem"><a class="link" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - 测试两个几何图形是否没有共同点</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - 返回 LineString 或 CircularLineString 的最后一个点。</li><li class="listitem"><a class="link" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a> - 返回表示几何图形边界框的几何图形。</li><li class="listitem"><a class="link" href="#ST_Equals" title="ST_Equals">ST_Equals</a> - 测试两个几何图形是否包含同一组点</li><li class="listitem"><a class="link" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a> - 返回表示多边形外环的LineString。</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - 从 GML 表示返回指定的 ST_Geometry 值。 这是 ST_GeomFromGML 的别名</li><li class="listitem"><a class="link" href="#ST_GeomCollFromText" title="ST_GeomCollFromText">ST_GeomCollFromText</a> - 使用给定的 SRID 从集合 WKT 中创建集合几何体。 如果未给出 SRID，则默认为 0。</li><li class="listitem"><a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> - 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> - 从已知的二进制几何表示 (WKB) 和可选的 SRID 创建几何实例。</li><li class="listitem"><a class="link" href="#ST_GeometryFromText" title="ST_GeometryFromText">ST_GeometryFromText</a> - 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromText 的别名</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - 返回几何集合的一个元素。</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - 以文本形式返回几何图形的 SQL-MM 类型。</li><li class="listitem"><a class="link" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a> - 返回一组有序的边，这些边界绑定了aface。</li><li class="listitem"><a class="link" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a> - 返回给定拓扑中具有指定面 ID 的多边形。</li><li class="listitem"><a class="link" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a> - 创建一个新的拓扑架构并将其注册到topology.topology 表中。</li><li class="listitem"><a class="link" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a> - 返回多边形的第 N 个内环（孔）。</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 计算表示几何 A 和 B 的共享部分的几何。</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。</li><li class="listitem"><a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - 检测几何图形是否为空。</li><li class="listitem"><a class="link" href="#ST_IsRing" title="ST_IsRing">ST_IsRing</a> - 检测线串是闭合的还是简单的。</li><li class="listitem"><a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a> - 检测几何体的自完整性或自接触点。</li><li class="listitem"><a class="link" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a> - 测试几何图形在 2D 中是否有效。</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - 返回线性几何体的二维长度。</li><li class="listitem"><a class="link" href="#ST_LineFromText" title="ST_LineFromText">ST_LineFromText</a> - 使用给定的 SRID 根据 WKT 表示创建几何图形。 如果未给出 SRID，则默认为 0。</li><li class="listitem"><a class="link" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a> - 使用给定的 SRID 从 WKB 制作 LINESTRING</li><li class="listitem"><a class="link" href="#ST_LinestringFromWKB" title="ST_LinestringFromWKB">ST_LinestringFromWKB</a> - 使用给定的 SRID 从 WKB 创建几何图形。</li><li class="listitem"><a class="link" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a> - 返回几何上与测量值匹配的点。</li><li class="listitem"><a class="link" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a> - 返回与测量范围匹配的几何图形部分。</li><li class="listitem"><a class="link" href="#ST_M" title="ST_M">ST_M</a> - 返回点的 M 值。</li><li class="listitem"><a class="link" href="#ST_MLineFromText" title="ST_MLineFromText">ST_MLineFromText</a> - 从 WKT 表示形式返回指定的 ST_MultiLineString 值。</li><li class="listitem"><a class="link" href="#ST_MPointFromText" title="ST_MPointFromText">ST_MPointFromText</a> - 使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。</li><li class="listitem"><a class="link" href="#ST_MPolyFromText" title="ST_MPolyFromText">ST_MPolyFromText</a> - 使用给定的 SRID 从 WKT 制作多多边形几何体。 如果未给出 SRID，则默认为 0。</li><li class="listitem"><a class="link" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a> - 通过删除连接两条边的节点、修改第一条边并删除第二条边来修复两条边。 返回已删除节点的 id。</li><li class="listitem"><a class="link" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a> - 通过沿现有边创建新节点、修改原始边并添加新边来分割边。</li><li class="listitem"><a class="link" href="#ST_MoveIsoNode" title="ST_MoveIsoNode">ST_MoveIsoNode</a> - 在拓扑结构中将一个孤立节点从一个点移动到另一个点。如果新的apoint几何对象已存在作为一个节点，则会抛出错误。返回移动的描述。</li><li class="listitem"><a class="link" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a> - 通过删除连接两条边的节点、删除两条边并用方向与提供的第一条边相同的边替换它们来修复两条边。</li><li class="listitem"><a class="link" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a> - 通过沿现有边创建新节点、删除原始边并用两条新边替换它来分割边。 返回创建的连接新边的新节点的 id。</li><li class="listitem"><a class="link" href="#ST_NumCurves" title="ST_NumCurves">ST_NumCurves</a> - Return the number of component curves in a CompoundCurve.</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - 返回几何集合中的元素数量。</li><li class="listitem"><a class="link" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a> - 返回多边形的内环（孔）数。</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - 返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。</li><li class="listitem"><a class="link" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a> - 返回 LineString 或 CircularString 中的点数。</li><li class="listitem"><a class="link" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a> - 测试两个几何图形是否表示相同的几何图形并且具有相同方向顺序的点</li><li class="listitem"><a class="link" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - 测试两个几何图形是否具有相同的维度和相交，但每个几何图形至少有一个点不在另一个几何图形中</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - 返回多边形曲面（PolyhedralSurface）的第 N 个几何体（面）。</li><li class="listitem"><a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a> - 返回多边形几何或地理的边界长度。</li><li class="listitem"><a class="link" href="#ST_Point" title="ST_Point">ST_Point</a> - 创建具有 X、Y 和 SRID 值的点。</li><li class="listitem"><a class="link" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a> - 使用给定的 SRID 从 WKT 创建点几何图形。 如果未给出 SRID，则默认为未知。</li><li class="listitem"><a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a> - 使用给定的 SRID 从 WKB 创建几何图形</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - 返回几何图形中第一个线串或圆形线串中的第 N 个点。</li><li class="listitem"><a class="link" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a> - 计算保证位于多边形或几何体上的点。</li><li class="listitem"><a class="link" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a> - 从具有指定 SRID 的线串创建多边形。</li><li class="listitem"><a class="link" href="#ST_PolygonFromText" title="ST_PolygonFromText">ST_PolygonFromText</a> - 使用给定的 SRID 从 WKT 创建几何图形。 如果未给出 SRID，则默认为 0。</li><li class="listitem"><a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a> - 测试两个几何图形是否具有与交集矩阵模式匹配的拓扑关系，或计算它们的交集矩阵</li><li class="listitem"><a class="link" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a> - 删除一条边，如果该边将两个面分开，则删除一个面并修改另一个面以覆盖两个面的空间。</li><li class="listitem"><a class="link" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a> - 删除一条边，如果删除的边将两个面分开，则删除原始面并用新面替换它们。</li><li class="listitem"><a class="link" href="#ST_RemoveIsoEdge" title="ST_RemoveIsoEdge">ST_RemoveIsoEdge</a> - 删除孤立的边并返回操作的描述。 如果边缘未被隔离，则会引发异常。</li><li class="listitem"><a class="link" href="#ST_RemoveIsoNode" title="ST_RemoveIsoNode">ST_RemoveIsoNode</a> - 删除孤立节点并返回操作描述。 如果节点不是孤立的（是边的开始或结束），则会引发异常。</li><li class="listitem"><a class="link" href="#ST_SRID" title="ST_SRID">ST_SRID</a> - 返回几何图形的空间参考标识符。</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - 返回 LineString 的第一个点.</li><li class="listitem"><a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a> - 计算表示几何图形 A 和 B 不相交部分的几何图形。</li><li class="listitem"><a class="link" href="#ST_Touches" title="ST_Touches">ST_Touches</a> - 测试两个几何图形是否至少有一个共同点，但它们的内部不相交</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - 返回坐标转换为不同空间参考系的新几何图形。</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - 计算表示输入几何图形的点集并集的几何图形。</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#ST_WKBToSQL" title="ST_WKBToSQL">ST_WKBToSQL</a> - 从已知的二进制表示 (WKB) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromWKB 的别名，不带 srid</li><li class="listitem"><a class="link" href="#ST_WKTToSQL" title="ST_WKTToSQL">ST_WKTToSQL</a> - 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。 这是 ST_GeomFromText 的别名</li><li class="listitem"><a class="link" href="#ST_Within" title="ST_Within">ST_Within</a> - 测试 A 的每个点是否都位于 B 中，并且它们的内部是否有一个共同点</li><li class="listitem"><a class="link" href="#ST_X" title="ST_X">ST_X</a> - 返回点的 X 坐标。</li><li class="listitem"><a class="link" href="#ST_Y" title="ST_Y">ST_Y</a> - 返回点的Y坐标。</li><li class="listitem"><a class="link" href="#ST_Z" title="ST_Z">ST_Z</a> - 返回点的Z坐标。</li><li class="listitem"><a class="link" href="#TG_ST_SRID" title="ST_SRID">ST_SRID</a> - 返回拓扑几何的空间参考标识符。</li></ul></div></section><section class="section" id="PostGIS_GeographyFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.4. PostGIS 地理支持函数</h2></div></div></div><p>以下列出的函数和操作符是 PostGIS 函数/操作符，它们的输入或输出涉及到 <a class="link" href="#PostGIS_Geography" title="4.3. 地理数据类型">geography</a> 数据类型对象。</p><div class="note"><table style="border: 0; "><tr><td style="text-align: center; vertical-align: top; width: 25px; " rowspan="2"><img alt="[Note]" src="images/note.png"/></td><th style="text-align: left; "/></tr><tr><td style="text-align: left; vertical-align: top; "><p>带有 (T) 的函数不是本机大地测量函数，并且使用与几何之间的 ST_Transform 调用来执行操作。 因此，当越过日期变更线、极点以及覆盖多个 UTM 区域的大型几何图形或几何图形对时，它们可能不会按预期运行。 基本变换 - （有利于 UTM、兰伯特方位角（北/南），并在最坏的情况下依靠墨卡托）</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - 返回多边形几何体的面积。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - 将几何图形作为 KML 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - 返回几何体的 SVG 路径数据。</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> - 返回两点之间直线的基于北方的方位角。</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - 计算覆盖距几何体给定距离内所有点的几何体。</li><li class="listitem"><a class="link" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a> - 返回几何体的几何中心。</li><li class="listitem"><a class="link" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a> - 返回 g1 上最接近 g2 的 2D 点。 这是从一个几何体到另一个几何体的最短直线的第一个点。</li><li class="listitem"><a class="link" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - 测试 A 的每个点是否都位于 B 中</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - 测试 B 的每个点是否都位于 A 中</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - 测试两个几何图形是否在给定距离内</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a> - 从已知的文本表示或扩展 (WKT) 返回指定的地理值。</li><li class="listitem"><a class="link" href="#ST_GeogFromWKB" title="ST_GeogFromWKB">ST_GeogFromWKB</a> - 从已知的二进制几何表示 (WKB) 或扩展的已知的二进制 (EWKB) 创建地理实例。</li><li class="listitem"><a class="link" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a> - 从已知的文本表示或扩展 (WKT) 返回指定的地理值。</li><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - 如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 计算表示几何 A 和 B 的共享部分的几何。</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - 返回线性几何体的二维长度。</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a> - 返回沿线在百分比指示位置的插值点。</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoints" title="ST_LineInterpolatePoints">ST_LineInterpolatePoints</a> - 返回沿直线以分数间隔插值的点。</li><li class="listitem"><a class="link" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> - 返回线上最接近点的分数位置。</li><li class="listitem"><a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a> - 返回两个小数位置之间的直线部分。</li><li class="listitem"><a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a> - 返回多边形几何或地理的边界长度。</li><li class="listitem"><a class="link" href="#ST_Project" title="ST_Project">ST_Project</a> - 返回从起点按距离和方位角（方位角）投影的点。</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - 返回修改后的几何图形/地理，其线段不长于给定距离。</li><li class="listitem"><a class="link" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a> - 返回两个几何图形之间的 2D 最短线</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - 返回几何内容的文本摘要。</li><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - 返回 A 和 B 之间的 2D 距离。</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 TRUE。</li></ul></div></section><section class="section" id="PostGIS_RasterFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.5. PostGIS 栅格支持函数</h2></div></div></div><p>下面给出的函数和运算符是 PostGIS 函数/运算符，它们将<a class="xref" href="#raster" title="raster">raster</a>数据类型对象作为输入或返回作为输出。 按字母顺序列出。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_Box3D" title="Box3D">Box3D</a> - 返回栅格封闭框的box 3d 表示形式。</li><li class="listitem"><a class="link" href="#RT_Raster_Contained" title="@">@</a> - 如果 A 的边界框包含在 B 的边界框中，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#RT_Raster_Contains" title="~">~</a> - 如果 A 的边界框包含 B 的边界框，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#RT_Raster_EQ" title="=">=</a> - 如果 A 的边界框与 B 的边界框相同，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#RT_Raster_Intersect" title="&amp;&amp;">&amp;&amp;</a> - 如果 A 的边界框与 B 的边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#RT_Raster_OverLeft" title="&amp;&lt;">&amp;&lt;</a> - 如果 A 的边界框位于 B 的左侧，则返回 TRUE。</li><li class="listitem"><a class="link" href="#RT_Raster_OverRight" title="&amp;&gt;">&amp;&gt;</a> - 如果 A 的边界框位于 B 的右侧，则返回 TRUE。</li><li class="listitem"><a class="link" href="#RT_Raster_Same" title="~=">~=</a> - 如果 A 的边界框与 B 的边界框相同，则返回 TRUE。</li><li class="listitem"><a class="link" href="#RT_Retile" title="ST_Retile">ST_Retile</a> - 从任意平铺的栅格覆盖范围返回一组配置的平铺。</li><li class="listitem"><a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> - 返回一个栅格，其中在给定索引位置添加了给定类型的新波段和给定初始值。 如果未指定索引，则将带添加到末尾。</li><li class="listitem"><a class="link" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a> - 返回栅格的熟知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> - 以指定的 GDAL 栅格格式返回栅格图块。 栅格格式是编译库支持的格式之一。 使用 ST_GDALDrivers() 获取您的库支持的格式列表。</li><li class="listitem"><a class="link" href="#RT_ST_AsHexWKB" title="ST_AsHexWKB">ST_AsHexWKB</a> - 返回栅格的十六进制表示形式的熟知的二进制 (WKB)。</li><li class="listitem"><a class="link" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a> - 将栅格图块选定的波段作为单个联合摄影导出组 (JPEG) 图像（字节数组）返回。 如果未指定波段且有 1 个或 3 个以上波段，则仅使用第一个波段。 如果只有 3 个波段，则使用所有 3 个波段并将其映射到 RGB。</li><li class="listitem"><a class="link" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a> - 将栅格图块选定的波段作为单个便携式网络图形 (PNG) 图像（字节数组）返回。 如果栅格中有 1、3 或 4 个波段且未指定波段，则使用所有波段。 如果有 2 个以上或多于 4 个波段且未指定波段，则仅使用波段 1。 波段映射到 RGB 或 RGBA 空间。</li><li class="listitem"><a class="link" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> - 将 PostGIS 几何图形转换为 PostGIS 栅格。</li><li class="listitem"><a class="link" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a> - 将栅格选定的波段作为单个 TIFF 图像（字节数组）返回。 如果未指定波段或栅格中不存在任何指定波段，则将尝试使用所有波段。</li><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - 返回高程栅格波段的坡向（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#RT_ST_Band" title="ST_Band">ST_Band</a> - 返回现有栅格的一个或多个波段作为新栅格。 对于从现有栅格构建新栅格非常有用。</li><li class="listitem"><a class="link" href="#RT_ST_BandFileSize" title="ST_BandFileSize">ST_BandFileSize</a> - 返回文件系统中存储的波段的文件大小。 如果未指定波段号，则假定为 1。</li><li class="listitem"><a class="link" href="#RT_ST_BandFileTimestamp" title="ST_BandFileTimestamp">ST_BandFileTimestamp</a> - 返回文件系统中存储的波段的文件时间戳。 如果未指定 波段号，则假定为 1。</li><li class="listitem"><a class="link" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a> - 如果波段仅填充无数据值，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a> - 返回特定栅格波段的基本元数据。 如果未指定，则假定波段编号为 1。</li><li class="listitem"><a class="link" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a> - 返回表示无数据的给定波段中的值。如果没有指定波段编号，默认为波段1。</li><li class="listitem"><a class="link" href="#RT_ST_BandPath" title="ST_BandPath">ST_BandPath</a> - 返回存储在文件系统中的波段的系统文件路径。 如果未指定波段号，则假定为 1。</li><li class="listitem"><a class="link" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> - 返回给定波段的像素类型。 如果未指定 波段号，则假定为 1。</li><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - Returns the raster clipped by the input geometry. If band number is not specified, all bands are processed. If crop is not specified or TRUE, the output raster is cropped. If touched is set to TRUE, then touched pixels are included, otherwise only if the center of the pixel is in the geometry it is included.</li><li class="listitem"><a class="link" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a> - 根据源栅格和指定波段创建最多四个 8BUI 波段（灰度、RGB、RGBA）的新栅格。 如果未指定，则假定为波段 1。</li><li class="listitem"><a class="link" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a> - 如果栅格 rastB 中没有点位于栅格 rastA 的外部且 rastB 的内部至少有一个点位于 rastA 的内部，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - 如果 rastB 与 rastA 的内部相交，但不与 rastA 的边界或外部相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Contour" title="ST_Contour">ST_Contour</a> - 使用 GDAL 轮廓算法从提供的栅格波段生成一组矢量轮廓。</li><li class="listitem"><a class="link" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> - 返回栅格的凸包几何形状，包括等于 BandNoDataValue 的像素值。 对于规则形状和非倾斜栅格，这给出与 ST_Envelope 相同的结果，因此仅对不规则形状或倾斜栅格有用。</li><li class="listitem"><a class="link" href="#RT_ST_Count" title="ST_Count">ST_Count</a> - 返回栅格或栅格覆盖范围的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 nodata 值的像素。</li><li class="listitem"><a class="link" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a> - 总计的。 返回一组栅格的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 NODATA 值的像素。</li><li class="listitem"><a class="link" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - 如果栅格 rastA 中没有点位于栅格 rastB 之外，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a> - 如果栅格 rastB 中没有点位于栅格 rastA 之外，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - 如果栅格 rastA 和 rastB 彼此完全在指定距离内，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a> - 如果栅格 rastA 和 rastB 彼此之间的距离在指定距离内，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - 如果栅格 rastA 在空间上不与 rastB 相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a> - 从给定的栅格带中返回一组 geomval (geom,val) 行。 如果未指定波段 编号，则波段编号默认为 1。</li><li class="listitem"><a class="link" href="#RT_ST_DumpValues" title="ST_DumpValues">ST_DumpValues</a> - 获取指定 band（波段） 的值作为二维数组。</li><li class="listitem"><a class="link" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a> - 返回栅格范围的多边形表示形式。</li><li class="listitem"><a class="link" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a> - 从受支持的 GDAL 栅格文件返回栅格。</li><li class="listitem"><a class="link" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a> - 返回 GDAL 或 ESRI 格式的地理配准元数据，如世界文件中常见的格式。 默认为 GDAL。</li><li class="listitem"><a class="link" href="#RT_ST_Grayscale" title="ST_Grayscale">ST_Grayscale</a> - 根据源栅格和代表红色、绿色和蓝色的指定波段创建新的 1-8BUI 波段栅格</li><li class="listitem"><a class="link" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a> - 如果不存在具有给定波段编号的波段，则返回 true。 如果未指定波段号，则假定波段号为 1。</li><li class="listitem"><a class="link" href="#RT_ST_Height" title="ST_Height">ST_Height</a> - 返回栅格的高度（以像素为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - 使用提供的方位角、高度、亮度和比例输入返回高程栅格带的假设照明。</li><li class="listitem"><a class="link" href="#RT_ST_Histogram" title="ST_Histogram">ST_Histogram</a> - 返回一组记录，总结了栅格或栅格覆盖数据分布，其中包括分离的分箱范围。如果未指定，将自动计算分箱数。</li><li class="listitem"><a class="link" href="#RT_ST_InterpolateRaster" title="ST_InterpolateRaster">ST_InterpolateRaster</a> - 基于输入的 3 维点集插值网格表面，使用 X 和 Y 值在网格上定位点，并使用点的 Z 值作为表面高程。</li><li class="listitem"><a class="link" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 返回一个栅格或一组几何像素值对，表示两个栅格的共享部分或栅格矢量化和几何图形的几何交集。</li><li class="listitem"><a class="link" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 如果栅格 rastA 与栅格 rastB 空间相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - 如果栅格为空（宽度 = 0 且高度 = 0），则返回 true。 否则，返回 false。</li><li class="listitem"><a class="link" href="#RT_ST_MakeEmptyCoverage" title="ST_MakeEmptyCoverage">ST_MakeEmptyCoverage</a> - 用空栅格图块网格覆盖地理参考区域。</li><li class="listitem"><a class="link" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a> - 返回一个空白栅格（不包含波段），其具有给定的尺寸（宽度和高度）、左上角 X 和 Y 坐标、像素大小和旋转参数（scalex、scaley、skewx 和 skewy），以及参考系统（SRID）。如果传递了一个栅格，则返回一个具有相同大小、对齐方式和 SRID 的新栅格。如果省略了 SRID，则空间参考将设置为未知（0）。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a> - 回调函数版本 - 给定一个或多个输入栅格、波段索引和一个用户指定的回调函数，返回单波段栅格。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - 1 栅格波段版本：通过对输入栅格波段和提供的像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - 2 栅格波段版本：通过对提供的两个输入栅格波段和像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段编号，则假定每个栅格的波段 1。 生成的栅格将在第一个栅格定义的网格上对齐（比例、倾斜和像素角），并具有由“extenttype”参数定义的范围。 “extenttype”的值可以是：INTERSECTION、UNION、FIRST、SECOND。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - 1 波段版本 - 通过在输入栅格波段和提供的像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - 2 波段版本 - 通过在提供的 2 个输入栅格波段和像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。 如果未指定，范围类型默认为 INTERSECTION。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> - 1-波段版本：使用用户定义的 PostgreSQL 函数映射代数最近邻。 返回一个栅格，其值是涉及输入栅格波段值的邻域的 PLPGSQL 用户函数的结果。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra (expression version)">ST_MapAlgebra (expression version)</a> - 表达式版本 - 在给定一两个输入栅格、波段索引和一个或多个用户指定的 SQL 表达式的情况下，返回单波段栅格。</li><li class="listitem"><a class="link" href="#RT_ST_MemSize" title="ST_MemSize">ST_MemSize</a> - 返回栅格占用的空间量（以字节为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a> - 返回有关栅格对象的基本元数据，例如像素大小、旋转（倾斜）、左上、左下等。</li><li class="listitem"><a class="link" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a> - 返回栅格的凸包几何形状（不包括 NODATA 像素）。</li><li class="listitem"><a class="link" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a> - 返回由 columnx 和 rowy 指定的给定带像素的最接近的非 NODATA 值或以与栅格相同的空间参考坐标系表示的几何点。</li><li class="listitem"><a class="link" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a> - 返回给定波段像素周围非 NODATA 值的二维双精度数组，该给定波段像素由 columnX 和 rowY 或以与栅格相同的空间参考坐标系表示的几何点指定。</li><li class="listitem"><a class="link" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a> - 返回说明栅格是否对齐的文本，如果未对齐，则说明原因。</li><li class="listitem"><a class="link" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a> - 返回栅格对象中的波段数。</li><li class="listitem"><a class="link" href="#RT_ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - 如果栅格 rastA 和 rastB 相交，但其中一个不完全包含另一个，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a> - 返回像素表示的区域的质心（点几何）。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - 返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a> - 返回像素左上角的点几何形状。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a> - 返回栅格波段的每个像素的点几何图形以及每个像素的值、X 和 Y 栅格坐标。 点几何的坐标是像素的左上角。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a> - 返回限定特定行和列的像素的多边形几何形状。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - 返回包围栅格带的每个像素的多边形几何图形以及每个像素的值、X 和 Y 栅格坐标。</li><li class="listitem"><a class="link" href="#RT_ST_PixelHeight" title="ST_PixelHeight">ST_PixelHeight</a> - 返回空间参考系统的几何单位的像素高度。</li><li class="listitem"><a class="link" href="#RT_ST_PixelOfValue" title="ST_PixelOfValue">ST_PixelOfValue</a> - 获取值等于搜索值的像素的列x、行y坐标。</li><li class="listitem"><a class="link" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a> - 返回空间参考系统的几何单位的像素宽度。</li><li class="listitem"><a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a> - 返回由具有非无数据值的像素值的像素并集形成的多多边形几何体。 如果未指定波段 编号，则 波段 编号默认为 1。</li><li class="listitem"><a class="link" href="#RT_ST_Quantile" title="ST_Quantile">ST_Quantile</a> - 计算样本或总体上下文中栅格或栅格表覆盖范围的分位数。 因此，可以检查某个值是否位于栅格的 25%、50%、75% 百分位处。</li><li class="listitem"><a class="link" href="#RT_ST_RastFromHexWKB" title="ST_RastFromHexWKB">ST_RastFromHexWKB</a> - 从熟知的二进制 (WKB) 栅格的十六进制表示形式返回栅格值。</li><li class="listitem"><a class="link" href="#RT_ST_RastFromWKB" title="ST_RastFromWKB">ST_RastFromWKB</a> - 从熟知的二进制 (WKB) 栅格返回栅格值。</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoord" title="ST_RasterToWorldCoord">ST_RasterToWorldCoord</a> - 在给定列和行的情况下，以几何 X 和 Y（经度和纬度）形式返回栅格的左上角。 列和行从 1 开始。</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a> - 返回栅格、列和行左上角的几何 X 坐标。 列和行的编号从 1 开始。</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a> - 返回栅格、列和行的左上角的几何 Y 坐标。 列和行的编号从 1 开始。</li><li class="listitem"><a class="link" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a> - 创建由从原始数据重新分类的波段类型组成的新栅格。 nband 是要更改的波段。 如果未指定 nband，则假定为 1。所有其他波段均按原样返回。 使用案例：将 16BUI 波段转换为 8BUI 等，以便更简单地呈现为可视格式。</li><li class="listitem"><a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> - 重采样一个栅格图像，可以指定重新采样算法、新的尺寸、任意的栅格角点，以及一组栅格地理参考属性，这些属性可以自己定义，也可以从另一个栅格图像中借用。</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - 通过仅调整栅格的比例（或像素大小）来重新采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline、 Lanczos、Max或Min重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a> - 将栅格大小调整为新的宽度/高度</li><li class="listitem"><a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a> - 通过仅调整栅格的倾斜（或旋转参数）来重采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_Rotation" title="ST_Rotation">ST_Rotation</a> - 返回栅格的旋转弧度。</li><li class="listitem"><a class="link" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a> - 返回一个计算出的数字高程模型（DEM）的 '粗糙度' 的栅格。</li><li class="listitem"><a class="link" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a> - 返回在spatial_ref_sys表中定义的栅格的空间参考标识符。</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - 如果栅格具有相同的倾斜、比例、空间参考和偏移（像素可以放在同一网格上而不切割成像素），则返回 true；如果没有注意细节问题，则返回 false。</li><li class="listitem"><a class="link" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a> - 返回像素宽度的 X 分量（以坐标参考系为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a> - 返回像素高度的 Y 分量（以坐标参考系为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_SetBandIndex" title="ST_SetBandIndex">ST_SetBandIndex</a> - 更新out-db band的external band编号</li><li class="listitem"><a class="link" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a> - 将带区的 isnodata 标志设置为 TRUE。</li><li class="listitem"><a class="link" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> - 设置代表无数据的给定波段的值。 如果未指定波段，则假定为波段 1。 要将波段标记为没有 nodata 值，请设置 nodata 值 = NULL。</li><li class="listitem"><a class="link" href="#RT_ST_SetBandPath" title="ST_SetBandPath">ST_SetBandPath</a> - 更新out-db band的外部路径和band编号</li><li class="listitem"><a class="link" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a> - 在一次调用中设置 Georeference 6 地理配准参数。 数字应该用空格分隔。 接受 GDAL 或 ESRI 格式的输入。 默认为 GDAL。</li><li class="listitem"><a class="link" href="#RT_ST_SetM" title="ST_SetM">ST_SetM</a> - 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 M 维度。</li><li class="listitem"><a class="link" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a> - 以弧度设置栅格的旋转。</li><li class="listitem"><a class="link" href="#RT_ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> - 将栅格的 SRID 设置为在 Spatial_ref_sys 表中定义的特定整数 srid。</li><li class="listitem"><a class="link" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a> - 以坐标参考系为单位设置像素的 X 和 Y 大小。 数字单位/像素宽度/高度。</li><li class="listitem"><a class="link" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a> - 设置地理参考 X 和 Y 倾斜（或旋转参数）。 如果只传入一个，则将X和Y设置为相同的值。</li><li class="listitem"><a class="link" href="#RT_ST_SetUpperLeft" title="ST_SetUpperLeft">ST_SetUpperLeft</a> - 将栅格左上角的值设置为投影的X和Y坐标。</li><li class="listitem"><a class="link" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> - 返回修改后的栅格，其结果是将给定波段中的值设置为指定列x、行y像素或与特定几何图形相交的像素。波段编号从1开始，如果未指定波段，则默认为1。</li><li class="listitem"><a class="link" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a> - 返回通过设置给定波段的值而产生的修改后的栅格。</li><li class="listitem"><a class="link" href="#RT_ST_SetZ" title="ST_SetZ">ST_SetZ</a> - 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 Z 维度。</li><li class="listitem"><a class="link" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a> - 返回地理参考 X 倾斜（或旋转参数）。</li><li class="listitem"><a class="link" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a> - 返回地理参考 Y 倾斜（或旋转参数）。</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - 返回高程栅格带的坡度（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - 通过将栅格捕捉到网格来重采样栅格。 新的像素值是使用NearestNeighbor（英语或美式拼写）、Bilinear, Cubic, CubicSpline 或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_Summary" title="ST_Summary">ST_Summary</a> - 返回栅格内容的文本摘要。</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> - 返回一组总结统计信息，包括给定栅格或栅格覆盖的栅格带的计数、总和、均值、标准差、最小值和最大值。如果未指定带号，则假定为带1。</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> - 总计的。 返回一组栅格的给定栅格波段的摘要统计信息，其中包含计数、总和、平均值、标准差、最小值、最大值。 如果未指定带号，则假定为带1。</li><li class="listitem"><a class="link" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a> - 返回一个计算出的地形位置指数（Topographic Position Index）的栅格。</li><li class="listitem"><a class="link" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a> - 返回具有计算的地形坚固性指数的栅格。</li><li class="listitem"><a class="link" href="#RT_ST_Tile" title="ST_Tile">ST_Tile</a> - 返回根据输出栅格的所需维度分割输入栅格而产生的一组栅格。</li><li class="listitem"><a class="link" href="#RT_ST_Touches" title="ST_Touches">ST_Touches</a> - 如果栅格 rastA 和 rastB 至少有一个共同点但它们的内部不相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> - 使用指定的重采样算法将已知空间参考系统中的栅格重新投影到另一个已知空间参考系统。 选项有 NearestNeighbor、Bilinear、Cubic、CubicSpline、Lanczos（默认为 NearestNeighbor）。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a> - 返回投影空间参考中栅格的左上角 X 坐标。</li><li class="listitem"><a class="link" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a> - 返回投影空间参考中栅格的左上角 Y 坐标。</li><li class="listitem"><a class="link" href="#RT_ST_Value" title="ST_Value">ST_Value</a> - 返回指定列 x、行 y 像素或特定几何点处给定波段的值。波段编号从 1 开始，如果未指定，则默认为 1。如果将参数 exclude_nodata_value 设置为 false，则所有像素都被认为与 nodata 像素相交并返回其值。如果未传递参数 exclude_nodata_value，则从栅格的元数据中读取该值。</li><li class="listitem"><a class="link" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a> - 返回一组记录，其中包含像素带值以及具有给定值集的栅格（或栅格覆盖范围）给定带中的像素数计数。 如果未指定波段，则默认为波段 1。默认情况下，不计算节点数据值像素。 输出像素中的所有其他值，并将像素带值四舍五入到最接近的整数。</li><li class="listitem"><a class="link" href="#RT_ST_Width" title="ST_Width">ST_Width</a> - 返回栅格的宽度（以像素为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_Within" title="ST_Within">ST_Within</a> - 如果栅格 rastA 中没有点位于栅格 rastB 的外部且 rastA 的内部至少有一个点位于 rastB 的内部，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoord" title="ST_WorldToRasterCoord">ST_WorldToRasterCoord</a> - 给定几何 X 和 Y（经度和纬度）或以栅格的空间参考坐标系表示的点几何，将左上角作为列和行返回。</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a> - 返回栅格中点几何 (pt) 的列或以栅格世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a> - 返回点几何图形 (pt) 的栅格中的行或以栅格的世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</li><li class="listitem"><a class="link" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a> - 更改用户指定的列和表中所有栅格的 SRID。</li></ul></div></section><section class="section" id="PostGIS_Geometry_DumpFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.6. PostGIS 几何/地理/栅格导出函数</h2></div></div></div><p>下面给出的函数是 PostGIS 函数，它们将一组或单个 <a class="link" href="#geometry_dump" title="geometry_dump">Geometry_dump</a> 或 <a class="link" href="#geomval" title="geomval">geomval</a> 数据类型对象作为输入或返回作为输出。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a> - 从给定的栅格带中返回一组 geomval (geom,val) 行。 如果未指定波段 编号，则波段编号默认为 1。</li><li class="listitem"><a class="link" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 返回一个栅格或一组几何像素值对，表示两个栅格的共享部分或栅格矢量化和几何图形的几何交集。</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - 返回几何组件的一组 geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a> - 返回多边形外环和内环的一组geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpSegments" title="ST_DumpSegments">ST_DumpSegments</a> - 为几何图形中的各个线段返回一组geometry_dump行。</li></ul></div></section><section class="section" id="PostGIS_BoxFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.7. PostGIS 边界框函数</h2></div></div></div><p>下面给出的函数是 PostGIS 函数，它们将 Box* 系列 PostGIS 空间类型作为输入或返回作为输出。 box 系列类型由<a class="link" href="#box2d_type" title="box2d"> box2d </a>和 <a class="link" href="#box3d_type" title="box3d">box3d </a>组成</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - 返回表示几何图形的 2D 范围的 BOX2D。</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - 返回表示几何体 3D 范围的 BOX3D。</li><li class="listitem"><a class="link" href="#RT_Box3D" title="Box3D">Box3D</a> - 返回栅格封闭框的box 3d 表示形式。</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a> - 创建由两个 3D 点几何图形定义的 BOX3D。</li><li class="listitem"><a class="link" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a> - 将几何图形转换为 MVT 瓦片的坐标空间。</li><li class="listitem"><a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a> - 返回几何形式为 TWKB，又名“微小的已知的二进制”</li><li class="listitem"><a class="link" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a> - 从 GeoHash 字符串返回 BOX2D。</li><li class="listitem"><a class="link" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a> - 计算几何图形落在矩形内的部分。</li><li class="listitem"><a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> - 返回空间表的估计范围。</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - 返回从另一个边界框或几何图形扩展的边界框。</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - 返回几何图形边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_MakeBox2D" title="ST_MakeBox2D">ST_MakeBox2D</a> - 创建由两个 2D 点几何图形定义的 BOX2D。</li><li class="listitem"><a class="link" href="#ST_RemoveIrrelevantPointsForView" title="ST_RemoveIrrelevantPointsForView">ST_RemoveIrrelevantPointsForView</a> - Removes points that are irrelevant for rendering a specific rectangluar view of a geometry.</li><li class="listitem"><a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a> - 返回 2D 或 3D 边界框或几何体的 X 最大值。</li><li class="listitem"><a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a> - 返回 2D 或 3D 边界框或几何体的 X 最小值。</li><li class="listitem"><a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a> - 返回 2D 或 3D 边界框或几何体的 Y 最大值。</li><li class="listitem"><a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a> - 返回 2D 或 3D 边界框或几何体的 Y 最小值。</li><li class="listitem"><a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a> - 返回 2D 或 3D 边界框或几何体的 Z 最大值。</li><li class="listitem"><a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> - 返回 2D 或 3D 边界框或几何体的 Z 最小值。</li><li class="listitem"><a class="link" href="#TP_RemoveUnusedPrimitives" title="RemoveUnusedPrimitives">RemoveUnusedPrimitives</a> - 删除定义现有 TopoGeometry 对象不需要的拓扑基元。</li><li class="listitem"><a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> - 返回一组 validatetopology_returntype 对象，详细说明拓扑问题。</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含另一个 2D 浮点精度边界框 (BOX2DF)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含几何体的 2D 边界框，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - 如果几何体的 2D 粘合框包含 2D 浮点精度边界框 (GIDX)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含在另一个 2D 浮点精度边界框内，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含在几何体的 2D 边界框中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - 如果几何体的 2D 边界框包含在 2D 浮点精度边界框 (BOX2DF) 中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - 如果两个 2D 浮点精度边界框 (BOX2DF) 彼此相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 与几何体的（缓存的）2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - 如果几何体的（缓存的）2D 边界框与 2D 浮点精度边界框 (BOX2DF) 相交，则返回 TRUE。</li></ul></div></section><section class="section" id="PostGIS_3D_Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.8. 支持 3D 的 PostGIS 函数</h2></div></div></div><p>下面给出的函数是不会丢弃 Z-Index 的 PostGIS 函数。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - 将geometry（几何）列添加到现有表。</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - 返回表示几何体 3D 范围的 BOX3D。</li><li class="listitem"><a class="link" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a> - 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#CG_3DConvexHull" title="CG_3DConvexHull">CG_3DConvexHull</a> - 计算几何体的 3D 凸包。</li><li class="listitem"><a class="link" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a> - 执行 3D 差异</li><li class="listitem"><a class="link" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> - 执行 3D 相交</li><li class="listitem"><a class="link" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> - Perform 3D union using postgis_sfcgal.</li><li class="listitem"><a class="link" href="#CG_ApproximateMedialAxis" title="CG_ApproximateMedialAxis">CG_ApproximateMedialAxis</a> - 计算几何区域的近似中轴。</li><li class="listitem"><a class="link" href="#CG_ConstrainedDelaunayTriangles" title="CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a> - 返回围绕给定输入几何体的约束 Delaunay 三角剖分。</li><li class="listitem"><a class="link" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a> - 将曲面挤出到相关体积</li><li class="listitem"><a class="link" href="#CG_ForceLHR" title="CG_ForceLHR">CG_ForceLHR</a> - 强制 LHR 方向</li><li class="listitem"><a class="link" href="#CG_IsPlanar" title="CG_IsPlanar">CG_IsPlanar</a> - 检查表面是否平坦</li><li class="listitem"><a class="link" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a> - 测试几何体是否为实体。 不执行有效性检查。</li><li class="listitem"><a class="link" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a> - 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</li><li class="listitem"><a class="link" href="#CG_Orientation" title="CG_Orientation">CG_Orientation</a> - 确定表面方向</li><li class="listitem"><a class="link" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a> - 从几何体计算直骨架</li><li class="listitem"><a class="link" href="#CG_Tesselate" title="CG_Tesselate">CG_Tesselate</a> - 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</li><li class="listitem"><a class="link" href="#CG_Visibility" title="CG_Visibility">CG_Visibility</a> - 计算一个从点或多边形几何中的线段生成的可见性多边形</li><li class="listitem"><a class="link" href="#CG_Volume" title="CG_Volume">CG_Volume</a> - 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a> - 从空间表中移除geometry（几何）列。</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - 以文本形式返回几何的类型。</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - 返回 g1 上最接近 g2 的 3D 点。 这是 3D 最短线的第一个点。</li><li class="listitem"><a class="link" href="#ST_3DConvexHull" title="ST_3DConvexHull">ST_3DConvexHull</a> - 计算几何体的 3D 凸包。</li><li class="listitem"><a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a> - 测试两个 3D 几何图形是否完全在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - 测试两个 3D 几何图形是否在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - 执行 3D 差异</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - 执行 3D 相交</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域）</li><li class="listitem"><a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a> - 返回线性几何体的 3D 长度。</li><li class="listitem"><a class="link" href="#ST_3DLineInterpolatePoint" title="ST_3DLineInterpolatePoint">ST_3DLineInterpolatePoint</a> - 返回沿 3D 线的小数指示位置插值的点。</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - 返回两个几何体之间的 3D 最长直线</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - 返回两个几何图形之间的 3D 笛卡尔最大距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a> - 返回多边形几何体的 3D 周长。</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - 返回两个几何图形之间的 3D 最短线</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - 执行 3D 联合。</li><li class="listitem"><a class="link" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a> - 沿线性几何形状插值测量值。</li><li class="listitem"><a class="link" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a> - 将点添加到线串（LineString）。</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - 对几何体应用 3D 仿射变换。</li><li class="listitem"><a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> - 计算几何区域的近似中轴。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - 返回带有 SRID 元数据的几何图形的扩展已知的二进制 (EWKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_AsHEXEWKB" title="ST_AsHEXEWKB">ST_AsHEXEWKB</a> - 使用小端 (NDR) 或大端 (XDR) 编码返回 HEXEWKB 格式（作为文本）的几何图形。</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - 将几何图形作为 KML 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - 返回 X3D xml 节点元素格式的几何图形：ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - 返回几何图形的边界。</li><li class="listitem"><a class="link" href="#ST_BoundingDiagonal" title="ST_BoundingDiagonal">ST_BoundingDiagonal</a> - 返回几何边界框的对角线。</li><li class="listitem"><a class="link" href="#ST_CPAWithin" title="ST_CPAWithin">ST_CPAWithin</a> - 测试两条轨迹的最近接近点是否在指定距离内。</li><li class="listitem"><a class="link" href="#ST_ChaikinSmoothing" title="ST_ChaikinSmoothing">ST_ChaikinSmoothing</a> - 使用 Chaikin 算法返回几何图形的平滑版本</li><li class="listitem"><a class="link" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a> - 返回两条轨迹最接近点处的测量值。</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - 从一组几何图形创建 GeometryCollection 或 Multi* 几何图形。</li><li class="listitem"><a class="link" href="#ST_ConstrainedDelaunayTriangles" title="ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a> - 返回围绕给定输入几何体的约束 Delaunay 三角剖分。</li><li class="listitem"><a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> - 计算几何体的凸包。</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - 返回几何体的坐标维度。</li><li class="listitem"><a class="link" href="#ST_CurveN" title="ST_CurveN">ST_CurveN</a> - Returns the Nth component curve geometry of a CompoundCurve.</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - 将包含曲线的几何图形转换为线性几何图形。</li><li class="listitem"><a class="link" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a> - 返回几何体顶点的 Delaunay 三角剖分。</li><li class="listitem"><a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a> - 计算表示几何 A 中不与几何 B 相交的部分的几何。</li><li class="listitem"><a class="link" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a> - 返回两条轨迹的最近接近点之间的距离。</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - 返回几何组件的一组 geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a> - 返回多边形外环和内环的一组geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpSegments" title="ST_DumpSegments">ST_DumpSegments</a> - 为几何图形中的各个线段返回一组geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - 返回 LineString 或 CircularLineString 的最后一个点。</li><li class="listitem"><a class="link" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a> - 返回表示多边形外环的LineString。</li><li class="listitem"><a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> - 将曲面挤出到相关体积</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - 返回 X 轴和 Y 轴转换的几何图形版本。</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - 强制几何图形进入“二维模式”。</li><li class="listitem"><a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a> - 如果适用，将一个几何图形上升到其曲线类型。</li><li class="listitem"><a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> - 强制 LHR 方向</li><li class="listitem"><a class="link" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a> - 将所有外环逆时针定向，将所有内环顺时针定向。</li><li class="listitem"><a class="link" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a> - 顺时针方向调整所有外环，逆时针方向调整所有内环。</li><li class="listitem"><a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a> - 强制多边形顶点的方向遵循右手定则。</li><li class="listitem"><a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a> - 强制几何图形仅使用 SFS 1.1 几何类型。</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - 强制几何图形进入 XYZ 模式。</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a> - 强制几何图形进入XYZM模式。</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - 从扩展已知的二进制表示 (EWKB) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - 从扩展已知的文本表示 (EWKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a> - 将几何图形的 geojson 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeomFromKML" title="ST_GeomFromKML">ST_GeomFromKML</a> - 将几何图形的 KML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">ST_GeometricMedian </a> - 返回多点的几何中位数。</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - 返回几何集合的一个元素。</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - 以文本形式返回几何图形的 SQL-MM 类型。</li><li class="listitem"><a class="link" href="#ST_HasArc" title="ST_HasArc">ST_HasArc</a> - 测试几何图形是否包含圆弧</li><li class="listitem"><a class="link" href="#ST_HasM" title="ST_HasM">ST_HasM</a> - 检查几何体是否具有 M（测量）维度。</li><li class="listitem"><a class="link" href="#ST_HasZ" title="ST_HasZ">ST_HasZ</a> - 检查几何体是否具有 Z 维度。</li><li class="listitem"><a class="link" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a> - 返回多边形的第 N 个内环（孔）。</li><li class="listitem"><a class="link" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a> - 返回最接近点的几何图形的插值测量值。</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 计算表示几何 A 和 B 的共享部分的几何。</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。</li><li class="listitem"><a class="link" href="#ST_IsCollection" title="ST_IsCollection">ST_IsCollection</a> - 测试几何类型是否为几何集合。</li><li class="listitem"><a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> - 检查表面是否平坦</li><li class="listitem"><a class="link" href="#ST_IsPolygonCCW" title="ST_IsPolygonCCW">ST_IsPolygonCCW </a> - 检测多边形是否具有逆时针方向的外环和顺时针方向的内环。</li><li class="listitem"><a class="link" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a> - 检测多边形是否具有顺时针外环和逆时针内环。</li><li class="listitem"><a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a> - 检测几何体的自完整性或自接触点。</li><li class="listitem"><a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> - 测试几何体是否为实体。 不执行有效性检查。</li><li class="listitem"><a class="link" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> - 测试几何图形是否为有效轨迹。</li><li class="listitem"><a class="link" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a> - 返回椭球体上经度/纬度几何体的 2D 或 3D 长度/周长。</li><li class="listitem"><a class="link" href="#ST_LineFromMultiPoint" title="ST_LineFromMultiPoint">ST_LineFromMultiPoint</a> - 从多点几何创建线串。</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a> - 返回沿线在百分比指示位置的插值点。</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoints" title="ST_LineInterpolatePoints">ST_LineInterpolatePoints</a> - 返回沿直线以分数间隔插值的点。</li><li class="listitem"><a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a> - 返回两个小数位置之间的直线部分。</li><li class="listitem"><a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a> - 将线性几何图形转换为曲线几何图形。</li><li class="listitem"><a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a> - 返回位于高程 (Z) 范围内的几何图形部分。</li><li class="listitem"><a class="link" href="#ST_M" title="ST_M">ST_M</a> - 返回点的 M 值。</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - 从Point, MultiPoint,或LineString geometries创建LineString。</li><li class="listitem"><a class="link" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a> - 创建 2D、3DZ 或 4D 点。</li><li class="listitem"><a class="link" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a> - 从壳和可选的孔列表创建多边形。</li><li class="listitem"><a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> - 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - 尝试在不丢失顶点的情况下使无效几何体有效。</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - 返回几何图形占用的内存空间总量。</li><li class="listitem"><a class="link" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a> - 聚合函数，以内存高效但速度较慢的方式联合几何图形</li><li class="listitem"><a class="link" href="#ST_NDims" title="ST_NDims">ST_NDims</a> - 返回几何体的坐标维度。</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - 返回几何图形中的点数（顶点）。</li><li class="listitem"><a class="link" href="#ST_NRings" title="ST_NRings">ST_NRings</a> - 返回多边形几何中的环数。</li><li class="listitem"><a class="link" href="#ST_Node" title="ST_Node">ST_Node</a> - 节点是线的集合。</li><li class="listitem"><a class="link" href="#ST_NumCurves" title="ST_NumCurves">ST_NumCurves</a> - Return the number of component curves in a CompoundCurve.</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - 返回几何集合中的元素数量。</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - 返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。</li><li class="listitem"><a class="link" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a> - 确定表面方向</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - 返回多边形曲面（PolyhedralSurface）的第 N 个几何体（面）。</li><li class="listitem"><a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a> - 使用给定的 SRID 从 WKB 创建几何图形</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - 返回几何图形中第一个线串或圆形线串中的第 N 个点。</li><li class="listitem"><a class="link" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a> - 计算保证位于多边形或几何体上的点。</li><li class="listitem"><a class="link" href="#ST_Points" title="ST_Points">ST_Points</a> - 返回包含几何坐标的 MultiPoint。</li><li class="listitem"><a class="link" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a> - 从具有指定 SRID 的线串创建多边形。</li><li class="listitem"><a class="link" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a> - 从线串中删除一个点。</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - 返回删除了重复点的几何图形。</li><li class="listitem"><a class="link" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a> - 返回顶点顺序相反的几何体。</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - 绕原点旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a> - 绕 X 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a> - 绕 Y 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - 绕 Z 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - 按给定因子缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_Scroll" title="ST_Scroll">ST_Scroll</a> - 更改闭合线串的起点。</li><li class="listitem"><a class="link" href="#ST_SetPoint" title="ST_SetPoint">ST_SetPoint</a> - 用给定点替换线串的点。</li><li class="listitem"><a class="link" href="#ST_ShiftLongitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a> - 在 -180-180 和 0-360 之间移动几何图形的经度坐标。</li><li class="listitem"><a class="link" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - 将输入几何体的所有点捕捉到规则网格。</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - 返回 LineString 的第一个点.</li><li class="listitem"><a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> - 从几何体计算直骨架</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - 返回更改后的几何图形，其中交换了给定的坐标值。</li><li class="listitem"><a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a> - 计算表示几何图形 A 和 B 不相交部分的几何图形。</li><li class="listitem"><a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> - 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</li><li class="listitem"><a class="link" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a> - 按给定的偏移量和系数平移和缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_Translate" title="ST_Translate">ST_Translate</a> - 按给定的偏移量平移几何图形。</li><li class="listitem"><a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> - 计算单个几何体的组件的并集。</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - 计算表示输入几何图形的点集并集的几何图形。</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a> - 将几何体环绕在 X 值周围。</li><li class="listitem"><a class="link" href="#ST_X" title="ST_X">ST_X</a> - 返回点的 X 坐标。</li><li class="listitem"><a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a> - 返回 2D 或 3D 边界框或几何体的 X 最大值。</li><li class="listitem"><a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a> - 返回 2D 或 3D 边界框或几何体的 X 最小值。</li><li class="listitem"><a class="link" href="#ST_Y" title="ST_Y">ST_Y</a> - 返回点的Y坐标。</li><li class="listitem"><a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a> - 返回 2D 或 3D 边界框或几何体的 Y 最大值。</li><li class="listitem"><a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a> - 返回 2D 或 3D 边界框或几何体的 Y 最小值。</li><li class="listitem"><a class="link" href="#ST_Z" title="ST_Z">ST_Z</a> - 返回点的Z坐标。</li><li class="listitem"><a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a> - 返回 2D 或 3D 边界框或几何体的 Z 最大值。</li><li class="listitem"><a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> - 返回 2D 或 3D 边界框或几何体的 Z 最小值。</li><li class="listitem"><a class="link" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a> - 返回指示几何体的 ZM 坐标维度的代码。</li><li class="listitem"><a class="link" href="#TG_Equals" title="Equals">Equals</a> - 如果两个拓扑几何由相同的拓扑基元组成，则返回 true。</li><li class="listitem"><a class="link" href="#TG_Intersects" title="Intersects">Intersects</a> - 如果两个拓扑几何中的任何一对图元相交，则返回 true。</li><li class="listitem"><a class="link" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a> - 更新几何列中所有要素的 SRID 以及表元数据。</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - 如果 A 的 n 维边界框与 B 的 n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - 如果几何体的（缓存的）n 维边界框与 n 维浮点精度边界框 (GIDX) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - 如果 n 维浮点精度边界框 (GIDX) 与几何体的（缓存的）n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - 如果两个 n 维浮点精度边界框 (GIDX) 彼此相交，则返回 TRUE。</li></ul></div></section><section class="section" id="PostGIS_Curved_GeometryFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.9. PostGIS 曲线几何支持函数</h2></div></div></div><p>下面给出的函数是 PostGIS 函数，可以使用 CIRCULARSTRING、CURVEPOLYGON 和其他曲线几何类型</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - 将geometry（几何）列添加到现有表。</li><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - 返回表示几何图形的 2D 范围的 BOX2D。</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - 返回表示几何体 3D 范围的 BOX3D。</li><li class="listitem"><a class="link" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a> - 从空间表中移除geometry（几何）列。</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - 以文本形式返回几何的类型。</li><li class="listitem"><a class="link" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a> - 向几何体添加边界框。</li><li class="listitem"><a class="link" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a> - 从几何体中删除边界框缓存。</li><li class="listitem"><a class="link" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a> - 如果该几何体的 bbox 已缓存，则返回 TRUE，否则返回 FALSE。</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - 对几何体应用 3D 仿射变换。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - 返回带有 SRID 元数据的几何图形的扩展已知的二进制 (EWKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsHEXEWKB" title="ST_AsHEXEWKB">ST_AsHEXEWKB</a> - 使用小端 (NDR) 或大端 (XDR) 编码返回 HEXEWKB 格式（作为文本）的几何图形。</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - 返回几何体的 SVG 路径数据。</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a> - 使用 DBSCAN 算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a> - 按间隔距离对几何图形进行聚合的聚合函数。</li><li class="listitem"><a class="link" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> - 窗口函数，返回每个输入几何图形的簇 ID，使用分离距离进行聚类。</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - 从一组几何图形创建 GeometryCollection 或 Multi* 几何图形。</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - 返回几何体的坐标维度。</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - 将包含曲线的几何图形转换为线性几何图形。</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - 返回几何组件的一组 geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - 返回 LineString 或 CircularLineString 的最后一个点。</li><li class="listitem"><a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> - 返回空间表的估计范围。</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - 返回 X 轴和 Y 轴转换的几何图形版本。</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - 强制几何图形进入“二维模式”。</li><li class="listitem"><a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a> - 如果适用，将一个几何图形上升到其曲线类型。</li><li class="listitem"><a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a> - 强制几何图形仅使用 SFS 1.1 几何类型。</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</li><li class="listitem"><a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a> - 强制几何图形进入 XYM 模式。</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - 强制几何图形进入 XYZ 模式。</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a> - 强制几何图形进入XYZM模式。</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</li><li class="listitem"><a class="link" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a> - 返回几何图形的 GeoHash 表示形式。</li><li class="listitem"><a class="link" href="#ST_GeogFromWKB" title="ST_GeogFromWKB">ST_GeogFromWKB</a> - 从已知的二进制几何表示 (WKB) 或扩展的已知的二进制 (EWKB) 创建地理实例。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - 从扩展已知的二进制表示 (EWKB) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - 从扩展已知的文本表示 (EWKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> - 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> - 从已知的二进制几何表示 (WKB) 和可选的 SRID 创建几何实例。</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - 返回几何集合的一个元素。</li><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - 如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a> - 如果 A 的边界框与 B 的边界框重叠或低于 B 的边界框，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_HasArc" title="ST_HasArc">ST_HasArc</a> - 测试几何图形是否包含圆弧</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。</li><li class="listitem"><a class="link" href="#ST_IsCollection" title="ST_IsCollection">ST_IsCollection</a> - 测试几何类型是否为几何集合。</li><li class="listitem"><a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - 检测几何图形是否为空。</li><li class="listitem"><a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a> - 将线性几何图形转换为曲线几何图形。</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - 返回几何图形占用的内存空间总量。</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - 返回几何图形中的点数（顶点）。</li><li class="listitem"><a class="link" href="#ST_NRings" title="ST_NRings">ST_NRings</a> - 返回多边形几何中的环数。</li><li class="listitem"><a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a> - 使用给定的 SRID 从 WKB 创建几何图形</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - 返回几何图形中第一个线串或圆形线串中的第 N 个点。</li><li class="listitem"><a class="link" href="#ST_Points" title="ST_Points">ST_Points</a> - 返回包含几何坐标的 MultiPoint。</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - 绕原点旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - 绕 Z 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_SRID" title="ST_SRID">ST_SRID</a> - 返回几何图形的空间参考标识符。</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - 按给定因子缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> - 在几何体上设置 SRID。</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - 返回 LineString 的第一个点.</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - 返回几何内容的文本摘要。</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - 返回更改后的几何图形，其中交换了给定的坐标值。</li><li class="listitem"><a class="link" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a> - 按给定的偏移量和系数平移和缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - 返回坐标转换为不同空间参考系的新几何图形。</li><li class="listitem"><a class="link" href="#ST_Translate" title="ST_Translate">ST_Translate</a> - 按给定的偏移量平移几何图形。</li><li class="listitem"><a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a> - 返回 2D 或 3D 边界框或几何体的 X 最大值。</li><li class="listitem"><a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a> - 返回 2D 或 3D 边界框或几何体的 X 最小值。</li><li class="listitem"><a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a> - 返回 2D 或 3D 边界框或几何体的 Y 最大值。</li><li class="listitem"><a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a> - 返回 2D 或 3D 边界框或几何体的 Y 最小值。</li><li class="listitem"><a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a> - 返回 2D 或 3D 边界框或几何体的 Z 最大值。</li><li class="listitem"><a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> - 返回 2D 或 3D 边界框或几何体的 Z 最小值。</li><li class="listitem"><a class="link" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a> - 返回指示几何体的 ZM 坐标维度的代码。</li><li class="listitem"><a class="link" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a> - 更新几何列中所有要素的 SRID 以及表元数据。</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含另一个 2D 浮点精度边界框 (BOX2DF)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含几何体的 2D 边界框，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - 如果几何体的 2D 粘合框包含 2D 浮点精度边界框 (GIDX)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - 如果 A 的 n 维边界框与 B 的 n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含在另一个 2D 浮点精度边界框内，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含在几何体的 2D 边界框中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - 如果几何体的 2D 边界框包含在 2D 浮点精度边界框 (BOX2DF) 中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - 如果两个 2D 浮点精度边界框 (BOX2DF) 彼此相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 与几何体的（缓存的）2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - 如果几何体的（缓存的）2D 边界框与 2D 浮点精度边界框 (BOX2DF) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - 如果几何体的（缓存的）n 维边界框与 n 维浮点精度边界框 (GIDX) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - 如果 n 维浮点精度边界框 (GIDX) 与几何体的（缓存的）n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - 如果两个 n 维浮点精度边界框 (GIDX) 彼此相交，则返回 TRUE。</li></ul></div></section><section class="section" id="PostGIS_PS_GeometryFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.10. PostGIS 多面体曲面支持函数</h2></div></div></div><p>下面给出的函数是可以使用 POLYHEDRALSURFACE、POLYHEDRALSURFACEM 几何图形的 PostGIS 函数</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - 返回表示几何图形的 2D 范围的 BOX2D。</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - 返回表示几何体 3D 范围的 BOX3D。</li><li class="listitem"><a class="link" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a> - 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#CG_3DConvexHull" title="CG_3DConvexHull">CG_3DConvexHull</a> - 计算几何体的 3D 凸包。</li><li class="listitem"><a class="link" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a> - 执行 3D 差异</li><li class="listitem"><a class="link" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> - 执行 3D 相交</li><li class="listitem"><a class="link" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> - Perform 3D union using postgis_sfcgal.</li><li class="listitem"><a class="link" href="#CG_ApproximateMedialAxis" title="CG_ApproximateMedialAxis">CG_ApproximateMedialAxis</a> - 计算几何区域的近似中轴。</li><li class="listitem"><a class="link" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a> - 将曲面挤出到相关体积</li><li class="listitem"><a class="link" href="#CG_ForceLHR" title="CG_ForceLHR">CG_ForceLHR</a> - 强制 LHR 方向</li><li class="listitem"><a class="link" href="#CG_IsPlanar" title="CG_IsPlanar">CG_IsPlanar</a> - 检查表面是否平坦</li><li class="listitem"><a class="link" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a> - 测试几何体是否为实体。 不执行有效性检查。</li><li class="listitem"><a class="link" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a> - 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</li><li class="listitem"><a class="link" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a> - 从几何体计算直骨架</li><li class="listitem"><a class="link" href="#CG_Tesselate" title="CG_Tesselate">CG_Tesselate</a> - 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</li><li class="listitem"><a class="link" href="#CG_Visibility" title="CG_Visibility">CG_Visibility</a> - 计算一个从点或多边形几何中的线段生成的可见性多边形</li><li class="listitem"><a class="link" href="#CG_Volume" title="CG_Volume">CG_Volume</a> - 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - 以文本形式返回几何的类型。</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - 返回 g1 上最接近 g2 的 3D 点。 这是 3D 最短线的第一个点。</li><li class="listitem"><a class="link" href="#ST_3DConvexHull" title="ST_3DConvexHull">ST_3DConvexHull</a> - 计算几何体的 3D 凸包。</li><li class="listitem"><a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a> - 测试两个 3D 几何图形是否完全在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - 测试两个 3D 几何图形是否在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - 执行 3D 差异</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - 执行 3D 相交</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域）</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - 返回两个几何体之间的 3D 最长直线</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - 返回两个几何图形之间的 3D 笛卡尔最大距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - 返回两个几何图形之间的 3D 最短线</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - 执行 3D 联合。</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - 对几何体应用 3D 仿射变换。</li><li class="listitem"><a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> - 计算几何区域的近似中轴。</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - 返回多边形几何体的面积。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - 返回带有 SRID 元数据的几何图形的扩展已知的二进制 (EWKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - 返回 X3D xml 节点元素格式的几何图形：ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - 返回几何体的坐标维度。</li><li class="listitem"><a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> - 返回几何图形的拓扑维数。</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - 返回几何组件的一组 geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - 返回从另一个边界框或几何图形扩展的边界框。</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - 返回几何图形边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> - 将曲面挤出到相关体积</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - 返回 X 轴和 Y 轴转换的几何图形版本。</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - 强制几何图形进入“二维模式”。</li><li class="listitem"><a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> - 强制 LHR 方向</li><li class="listitem"><a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a> - 强制多边形顶点的方向遵循右手定则。</li><li class="listitem"><a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a> - 强制几何图形仅使用 SFS 1.1 几何类型。</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - 强制几何图形进入 XYZ 模式。</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - 从扩展已知的二进制表示 (EWKB) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - 从扩展已知的文本表示 (EWKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - 返回几何集合的一个元素。</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - 以文本形式返回几何图形的 SQL-MM 类型。</li><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - 如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a> - 如果 A 的边界框与 B 的边界框重叠或低于 B 的边界框，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_Geometry_Same" title="~=">~=</a> - 如果 A 的边界框与 B 的边界框相同，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。</li><li class="listitem"><a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> - 检查表面是否平坦</li><li class="listitem"><a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> - 测试几何体是否为实体。 不执行有效性检查。</li><li class="listitem"><a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> - 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - 返回几何图形占用的内存空间总量。</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - 返回几何图形中的点数（顶点）。</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - 返回几何集合中的元素数量。</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - 返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - 返回多边形曲面（PolyhedralSurface）的第 N 个几何体（面）。</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - 返回删除了重复点的几何图形。</li><li class="listitem"><a class="link" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a> - 返回顶点顺序相反的几何体。</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - 绕原点旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a> - 绕 X 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a> - 绕 Y 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - 绕 Z 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - 按给定因子缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_ShiftLongitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a> - 在 -180-180 和 0-360 之间移动几何图形的经度坐标。</li><li class="listitem"><a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> - 从几何体计算直骨架</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - 返回几何内容的文本摘要。</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - 返回更改后的几何图形，其中交换了给定的坐标值。</li><li class="listitem"><a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> - 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - 返回坐标转换为不同空间参考系的新几何图形。</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含另一个 2D 浮点精度边界框 (BOX2DF)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含几何体的 2D 边界框，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - 如果几何体的 2D 粘合框包含 2D 浮点精度边界框 (GIDX)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - 如果 A 的 n 维边界框与 B 的 n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含在另一个 2D 浮点精度边界框内，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 包含在几何体的 2D 边界框中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - 如果几何体的 2D 边界框包含在 2D 浮点精度边界框 (BOX2DF) 中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - 如果两个 2D 浮点精度边界框 (BOX2DF) 彼此相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - 如果 2D 浮点精度边界框 (BOX2DF) 与几何体的（缓存的）2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - 如果几何体的（缓存的）2D 边界框与 2D 浮点精度边界框 (BOX2DF) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - 如果几何体的（缓存的）n 维边界框与 n 维浮点精度边界框 (GIDX) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - 如果 n 维浮点精度边界框 (GIDX) 与几何体的（缓存的）n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - 如果两个 n 维浮点精度边界框 (GIDX) 彼此相交，则返回 TRUE。</li></ul></div></section><section class="section" id="PostGIS_TypeFunctionMatrix"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.11. PostGIS函数支持矩阵</h2></div></div></div><p>下面按字母顺序列出了 PostGIS 中的空间特殊函数以及它们使用的空间类型或它们试图遵守的 OGC/SQL 合规性。</p><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>表示该函数本身适用于类型或子类型。</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_transform.png"/></span> 意味着它可以工作，但会使用内置的转换操作，通过将其强制转换为几何类型、转换到“最佳 SRID（空间参考ID）”空间参考，然后再次强制转换回来。对于大面积地区或极地地区，结果可能不如预期，并且可能会累积浮点数的误差。这是在地理数据处理中可能遇到的一些注意事项。</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>表示该函数适用于该类型，因为它会自动转换为另一个类型（例如 box3d），而不是直接类型支持。</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>表示该功能仅在使用 SFCGAL 支持编译 PostGIS 时可用。</li><li class="listitem">geom - 基本 2D 几何支持 (x,y)。</li><li class="listitem">geog - 基本 2D 地理支持 (x,y)。</li><li class="listitem">2.5D - 3 D/4D 空间中的基本 2D 几何图形（具有 Z 或 M 坐标）。</li><li class="listitem">PS - 多面体曲面</li><li class="listitem">T - 三角形和不规则三角网曲面 (TIN)</li></ul></div><p>
    </p><p>
      </p><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col style="text-align: left; " class="function"/><col style="text-align: center; " class="geometry"/><col style="text-align: center; " class="geography"/><col style="text-align: center; " class="25D"/><col style="text-align: center; " class="Curves"/><col style="text-align: center; " class="SQLMM"/><col style="text-align: center; " class="PS"/><col style="text-align: center; " class="T"/></colgroup><thead><tr><th style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">函数</th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">geom</th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">geog</th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">2.5D</th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">Curves</th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">SQL MM</th><th style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">PS</th><th style="text-align: center; border-bottom: 1px solid ; ">T</th></tr></thead><tbody><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineFromMultiPoint" title="ST_LineFromMultiPoint">ST_LineFromMultiPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakePointM" title="ST_MakePointM">ST_MakePointM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Point" title="ST_Point">ST_Point</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointM" title="ST_PointM">ST_PointM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_HexagonGrid" title="ST_HexagonGrid">ST_HexagonGrid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Hexagon" title="ST_Hexagon">ST_Hexagon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SquareGrid" title="ST_SquareGrid">ST_SquareGrid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Square" title="ST_Square">ST_Square</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Letters" title="ST_Letters">ST_Letters</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GeometryType" title="GeometryType">GeometryType</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_BoundingDiagonal" title="ST_BoundingDiagonal">ST_BoundingDiagonal</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DumpSegments" title="ST_DumpSegments">ST_DumpSegments</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_HasArc" title="ST_HasArc">ST_HasArc</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NumCurves" title="ST_NumCurves">ST_NumCurves</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CurveN" title="ST_CurveN">ST_CurveN</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsCollection" title="ST_IsCollection">ST_IsCollection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsPolygonCCW" title="ST_IsPolygonCCW">ST_IsPolygonCCW </a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsRing" title="ST_IsRing">ST_IsRing</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_M" title="ST_M">ST_M</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NDims" title="ST_NDims">ST_NDims</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NRings" title="ST_NRings">ST_NRings</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NumInteriorRing" title="ST_NumInteriorRing">ST_NumInteriorRing</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Points" title="ST_Points">ST_Points</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_X" title="ST_X">ST_X</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Y" title="ST_Y">ST_Y</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Z" title="ST_Z">ST_Z</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_HasZ" title="ST_HasZ">ST_HasZ</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_HasM" title="ST_HasM">ST_HasM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CollectionHomogenize" title="ST_CollectionHomogenize">ST_CollectionHomogenize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Scroll" title="ST_Scroll">ST_Scroll</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineExtend" title="ST_LineExtend">ST_LineExtend</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Multi" title="ST_Multi">ST_Multi</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Normalize" title="ST_Normalize">ST_Normalize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Project" title="ST_Project">ST_Project</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_QuantizeCoordinates" title="ST_QuantizeCoordinates">ST_QuantizeCoordinates </a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemoveIrrelevantPointsForView" title="ST_RemoveIrrelevantPointsForView">ST_RemoveIrrelevantPointsForView</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemoveSmallParts" title="ST_RemoveSmallParts">ST_RemoveSmallParts</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SetPoint" title="ST_SetPoint">ST_SetPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ShiftLongitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Snap" title="ST_Snap">ST_Snap</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_InverseTransformPipeline" title="ST_InverseTransformPipeline">ST_InverseTransformPipeline</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SRID" title="ST_SRID">ST_SRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_srs_codes" title="postgis_srs_codes">postgis_srs_codes</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_srs" title="postgis_srs">postgis_srs</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_srs_all" title="postgis_srs_all">postgis_srs_all</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_srs_search" title="postgis_srs_search">postgis_srs_search</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_BdMPolyFromText" title="ST_BdMPolyFromText">ST_BdMPolyFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomCollFromText" title="ST_GeomCollFromText">ST_GeomCollFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromMARC21" title="ST_GeomFromMARC21">ST_GeomFromMARC21</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeometryFromText" title="ST_GeometryFromText">ST_GeometryFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineFromText" title="ST_LineFromText">ST_LineFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MLineFromText" title="ST_MLineFromText">ST_MLineFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MPointFromText" title="ST_MPointFromText">ST_MPointFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MPolyFromText" title="ST_MPolyFromText">ST_MPolyFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PolygonFromText" title="ST_PolygonFromText">ST_PolygonFromText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_WKTToSQL" title="ST_WKTToSQL">ST_WKTToSQL</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeogFromWKB" title="ST_GeogFromWKB">ST_GeogFromWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LinestringFromWKB" title="ST_LinestringFromWKB">ST_LinestringFromWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_WKBToSQL" title="ST_WKBToSQL">ST_WKBToSQL</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromKML" title="ST_GeomFromKML">ST_GeomFromKML</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeomFromTWKB" title="ST_GeomFromTWKB">ST_GeomFromTWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineFromEncodedPolyline" title="ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_FromFlatGeobufToTable" title="ST_FromFlatGeobufToTable">ST_FromFlatGeobufToTable</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_FromFlatGeobuf" title="ST_FromFlatGeobuf">ST_FromFlatGeobuf</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsHEXEWKB" title="ST_AsHEXEWKB">ST_AsHEXEWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsEncodedPolyline" title="ST_AsEncodedPolyline">ST_AsEncodedPolyline</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsFlatGeobuf" title="ST_AsFlatGeobuf">ST_AsFlatGeobuf</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsGeobuf" title="ST_AsGeobuf">ST_AsGeobuf</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsLatLonText" title="ST_AsLatLonText">ST_AsLatLonText</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsMARC21" title="ST_AsMARC21">ST_AsMARC21</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_EQ" title="=">=</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Contained" title="@">@</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Contain" title="~">~</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Geometry_Same" title="~=">~=</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geometry_distance_cpa" title="|=|">|=|</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geometry_distance_centroid_nd" title="&lt;&lt;-&gt;&gt;">&lt;&lt;-&gt;&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Equals" title="ST_Equals">ST_Equals</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineCrossingDirection" title="ST_LineCrossingDirection">ST_LineCrossingDirection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Touches" title="ST_Touches">ST_Touches</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Within" title="ST_Within">ST_Within</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointInsideCircle" title="ST_PointInsideCircle">ST_PointInsideCircle</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Area" title="ST_Area">ST_Area</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Angle" title="ST_Angle">ST_Angle</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_FrechetDistance" title="ST_FrechetDistance">ST_FrechetDistance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_HausdorffDistance" title="ST_HausdorffDistance">ST_HausdorffDistance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Length" title="ST_Length">ST_Length</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Length2D" title="ST_Length2D">ST_Length2D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MinimumClearance" title="ST_MinimumClearance">ST_MinimumClearance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MinimumClearanceLine" title="ST_MinimumClearanceLine">ST_MinimumClearanceLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Perimeter2D" title="ST_Perimeter2D">ST_Perimeter2D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_transform.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Node" title="ST_Node">ST_Node</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Split" title="ST_Split">ST_Split</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Union" title="ST_Union">ST_Union</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_transform.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ChaikinSmoothing" title="ST_ChaikinSmoothing">ST_ChaikinSmoothing</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_FilterByM" title="ST_FilterByM">ST_FilterByM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeneratePoints" title="ST_GeneratePoints">ST_GeneratePoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">ST_GeometricMedian </a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MaximumInscribedCircle" title="ST_MaximumInscribedCircle">ST_MaximumInscribedCircle</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LargestEmptyCircle" title="ST_LargestEmptyCircle">ST_LargestEmptyCircle</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_OrientedEnvelope" title="ST_OrientedEnvelope">ST_OrientedEnvelope</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_OffsetCurve" title="ST_OffsetCurve">ST_OffsetCurve</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SharedPaths" title="ST_SharedPaths">ST_SharedPaths</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SimplifyPolygonHull" title="ST_SimplifyPolygonHull">ST_SimplifyPolygonHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CoverageUnion" title="ST_CoverageUnion">ST_CoverageUnion</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Translate" title="ST_Translate">ST_Translate</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Box2D" title="Box2D">Box2D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Box3D" title="Box3D">Box3D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakeBox2D" title="ST_MakeBox2D">ST_MakeBox2D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DLineInterpolatePoint" title="ST_3DLineInterpolatePoint">ST_3DLineInterpolatePoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineInterpolatePoints" title="ST_LineInterpolatePoints">ST_LineInterpolatePoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CPAWithin" title="ST_CPAWithin">ST_CPAWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_backend" title="postgis.backend">postgis.backend</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_gdal_datapath" title="postgis.gdal_datapath">postgis.gdal_datapath</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_gdal_vsi_options" title="postgis.gdal_vsi_options">postgis.gdal_vsi_options</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#postgis_sfcgal_full_version" title="postgis_sfcgal_full_version">postgis_sfcgal_full_version</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_ForceLHR" title="CG_ForceLHR">CG_ForceLHR</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_IsPlanar" title="CG_IsPlanar">CG_IsPlanar</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Orientation" title="CG_Orientation">CG_Orientation</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Area" title="CG_Area">CG_Area</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Volume" title="CG_Volume">CG_Volume</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Intersection" title="CG_Intersection">CG_Intersection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Intersects" title="CG_Intersects">CG_Intersects</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DIntersects" title="CG_3DIntersects">CG_3DIntersects</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Difference" title="CG_Difference">CG_Difference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Distance" title="CG_Distance">CG_Distance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DDistance" title="CG_3DDistance">CG_3DDistance</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DConvexHull" title="ST_3DConvexHull">ST_3DConvexHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DConvexHull" title="CG_3DConvexHull">CG_3DConvexHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Union" title="CG_Union">CG_Union</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AlphaShape" title="ST_AlphaShape">ST_AlphaShape</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_AlphaShape" title="CG_AlphaShape">CG_AlphaShape</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_ApproximateMedialAxis" title="CG_ApproximateMedialAxis">CG_ApproximateMedialAxis</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ConstrainedDelaunayTriangles" title="ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_ConstrainedDelaunayTriangles" title="CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_ExtrudeStraightSkeleton" title="CG_ExtrudeStraightSkeleton">CG_ExtrudeStraightSkeleton</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MinkowskiSum" title="ST_MinkowskiSum">ST_MinkowskiSum</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_MinkowskiSum" title="CG_MinkowskiSum">CG_MinkowskiSum</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_OptimalAlphaShape" title="ST_OptimalAlphaShape">ST_OptimalAlphaShape</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_OptimalAlphaShape" title="CG_OptimalAlphaShape">CG_OptimalAlphaShape</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Tesselate" title="CG_Tesselate">CG_Tesselate</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Triangulate" title="CG_Triangulate">CG_Triangulate</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_Visibility" title="CG_Visibility">CG_Visibility</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#getfaceedges_returntype" title="getfaceedges_returntype">getfaceedges_returntype</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#validatetopology_returntype" title="validatetopology_returntype">validatetopology_returntype</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#topoelement" title="TopoElement">TopoElement</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RenameTopoGeometryColumn" title="RenameTopoGeometryColumn">RenameTopoGeometryColumn</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#DropTopology" title="DropTopology">DropTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RenameTopology" title="RenameTopology">RenameTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#DropTopoGeometryColumn" title="DropTopoGeometryColumn">DropTopoGeometryColumn</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Populate_Topology_Layer" title="Populate_Topology_Layer">Populate_Topology_Layer</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopologySummary" title="TopologySummary">TopologySummary</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ValidateTopologyRelation" title="ValidateTopologyRelation">ValidateTopologyRelation</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#FindTopology" title="FindTopology">FindTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#FindLayer" title="FindLayer">FindLayer</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CreateTopology" title="CreateTopology">CreateTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CopyTopology" title="CopyTopology">CopyTopology</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeo_LoadGeometry" title="TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AddIsoEdge" title="ST_AddIsoEdge">ST_AddIsoEdge</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ChangeEdgeGeom" title="ST_ChangeEdgeGeom">ST_ChangeEdgeGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MoveIsoNode" title="ST_MoveIsoNode">ST_MoveIsoNode</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemoveIsoNode" title="ST_RemoveIsoNode">ST_RemoveIsoNode</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_RemoveIsoEdge" title="ST_RemoveIsoEdge">ST_RemoveIsoEdge</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetFaceContainingPoint" title="GetFaceContainingPoint">GetFaceContainingPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetTopologyID" title="GetTopologyID">GetTopologyID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetTopologyName" title="GetTopologyName">GetTopologyName</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetNodeEdges" title="GetNodeEdges">GetNodeEdges</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopologyPolygonize" title="Polygonize">Polygonize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#AddNode" title="AddNode">AddNode</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#AddEdge" title="AddEdge">AddEdge</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#AddFace" title="AddFace">AddFace</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TP_RemoveUnusedPrimitives" title="RemoveUnusedPrimitives">RemoveUnusedPrimitives</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoElement" title="TopoElement">TopoElement</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TopoGeom_addTopoGeom" title="TopoGeom_addTopoGeom">TopoGeom_addTopoGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#toTopoGeom_editor_proxy" title="toTopoGeom">toTopoGeom</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetTopoGeomElementArray" title="GetTopoGeomElementArray">GetTopoGeomElementArray</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TG_ST_SRID" title="ST_SRID">ST_SRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#AsGML" title="AsGML">AsGML</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#AsTopoJSON" title="AsTopoJSON">AsTopoJSON</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TG_Equals" title="Equals">Equals</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#TG_Intersects" title="Intersects">Intersects</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#geomval" title="geomval">geomval</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#addbandarg" title="addbandarg">addbandarg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#rastbandarg" title="rastbandarg">rastbandarg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#raster" title="raster">raster</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#reclassarg" title="reclassarg">reclassarg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#summarystats" title="summarystats">summarystats</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#unionarg" title="unionarg">unionarg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_DropOverviewConstraints" title="DropOverviewConstraints">DropOverviewConstraints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_PostGIS_GDAL_Version" title="PostGIS_GDAL_Version">PostGIS_GDAL_Version</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_PostGIS_Raster_Lib_Build_Date" title="PostGIS_Raster_Lib_Build_Date">PostGIS_Raster_Lib_Build_Date</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_PostGIS_Raster_Lib_Version" title="PostGIS_Raster_Lib_Version">PostGIS_Raster_Lib_Version</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Contour" title="ST_Contour">ST_Contour</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_InterpolateRaster" title="ST_InterpolateRaster">ST_InterpolateRaster</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Band" title="ST_Band">ST_Band</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MakeEmptyCoverage" title="ST_MakeEmptyCoverage">ST_MakeEmptyCoverage</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Tile" title="ST_Tile">ST_Tile</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Retile" title="ST_Retile">ST_Retile</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Height" title="ST_Height">ST_Height</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MemSize" title="ST_MemSize">ST_MemSize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelHeight" title="ST_PixelHeight">ST_PixelHeight</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_RasterToWorldCoord" title="ST_RasterToWorldCoord">ST_RasterToWorldCoord</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Rotation" title="ST_Rotation">ST_Rotation</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Summary" title="ST_Summary">ST_Summary</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Width" title="ST_Width">ST_Width</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_WorldToRasterCoord" title="ST_WorldToRasterCoord">ST_WorldToRasterCoord</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandPath" title="ST_BandPath">ST_BandPath</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandFileSize" title="ST_BandFileSize">ST_BandFileSize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandFileTimestamp" title="ST_BandFileTimestamp">ST_BandFileTimestamp</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#ST_MinPossibleValue" title="ST_MinPossibleValue">ST_MinPossibleValue</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Value" title="ST_Value">ST_Value</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetZ" title="ST_SetZ">ST_SetZ</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetM" title="ST_SetM">ST_SetM</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_DumpValues" title="ST_DumpValues">ST_DumpValues</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_PixelOfValue" title="ST_PixelOfValue">ST_PixelOfValue</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetUpperLeft" title="ST_SetUpperLeft">ST_SetUpperLeft</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetBandPath" title="ST_SetBandPath">ST_SetBandPath</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SetBandIndex" title="ST_SetBandIndex">ST_SetBandIndex</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Count" title="ST_Count">ST_Count</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Histogram" title="ST_Histogram">ST_Histogram</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Quantile" title="ST_Quantile">ST_Quantile</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_RastFromWKB" title="ST_RastFromWKB">ST_RastFromWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_RastFromHexWKB" title="ST_RastFromHexWKB">ST_RastFromHexWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsHexWKB" title="ST_AsHexWKB">ST_AsHexWKB</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Grayscale" title="ST_Grayscale">ST_Grayscale</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra (expression version)">ST_MapAlgebra (expression version)</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MinDist4ma" title="ST_MinDist4ma">ST_MinDist4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Box3D" title="Box3D">Box3D</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_autocast.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_Intersect" title="&amp;&amp;">&amp;&amp;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_OverLeft" title="&amp;&lt;">&amp;&lt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_OverRight" title="&amp;&gt;">&amp;&gt;</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_EQ" title="=">=</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_Contained" title="@">@</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_Same" title="~=">~=</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_Raster_Contains" title="~">~</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Touches" title="ST_Touches">ST_Touches</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_Within" title="ST_Within">ST_Within</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#stdaddr" title="stdaddr">stdaddr</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#rulestab" title="rules table">rules table</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#lextab" title="lex table">lex table</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#gaztab" title="gaz table">gaz table</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#debug_standardize_address" title="debug_standardize_address">debug_standardize_address</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#parse_address" title="parse_address">parse_address</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#standardize_address" title="standardize_address">standardize_address</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Drop_Indexes_Generate_Script" title="Drop_Indexes_Generate_Script">Drop_Indexes_Generate_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Geocode" title="Geocode">Geocode</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Geocode_Intersection" title="Geocode_Intersection">Geocode_Intersection</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Get_Tract" title="Get_Tract">Get_Tract</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Loader_Generate_Census_Script" title="Loader_Generate_Census_Script">Loader_Generate_Census_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Reverse_Geocode" title="Reverse_Geocode">Reverse_Geocode</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; ">
				<span class="inlinemediaobject"><img src="images/matrix_checkmark.png"/></span>
			</td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; border-bottom: 1px solid ; ">
      <a class="link" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a>
    </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; border-bottom: 1px solid ; "> </td><td style="text-align: center; border-bottom: 1px solid ; "> </td></tr><tr><td style="text-align: left; border-right: 1px solid ; ">
      <a class="link" href="#Set_Geocode_Setting" title="Set_Geocode_Setting">Set_Geocode_Setting</a>
    </td><td style="text-align: center; border-right: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; "> </td><td style="text-align: center; border-right: 1px solid ; "> </td><td style="text-align: center; "> </td></tr></tbody></table></div><p>
    </p></section><section class="section" id="NewFunctions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.12. 新的、增强的或更改的 PostGIS 函数</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#idm50607">13.12.1. PostGIS 新增功能或增强功能（3.5）</a></span></li><li><span class="section"><a href="#idm50739">13.12.2. PostGIS 新增功能或增强功能（3.4）</a></span></li><li><span class="section"><a href="#idm50835">13.12.3. PostGIS 新增功能或增强功能（3.3）</a></span></li><li><span class="section"><a href="#idm50883">13.12.4. PostGIS 新增功能或增强功能（3.2）</a></span></li><li><span class="section"><a href="#idm50988">13.12.5. PostGIS 新增功能或增强功能（3.1）</a></span></li><li><span class="section"><a href="#idm51069">13.12.6. PostGIS 新增功能或增强功能（3.0）</a></span></li><li><span class="section"><a href="#idm51177">13.12.7. PostGIS 新增功能或增强功能（2.5）</a></span></li><li><span class="section"><a href="#idm51270">13.12.8. PostGIS 新增功能或增强功能（2.4）</a></span></li><li><span class="section"><a href="#idm51342">13.12.9. PostGIS 新增功能或增强功能（2.3）</a></span></li><li><span class="section"><a href="#idm51459">13.12.10. PostGIS 新增功能或增强功能（2.2）</a></span></li><li><span class="section"><a href="#idm51648">13.12.11. PostGIS 新增功能或增强功能（2.1）</a></span></li><li><span class="section"><a href="#idm52014">13.12.12. PostGIS 新增功能或增强功能（2.0）</a></span></li><li><span class="section"><a href="#idm52644">13.12.13. PostGIS 新增功能或增强功能（1.5）</a></span></li><li><span class="section"><a href="#idm52742">13.12.14. PostGIS 新增功能或增强功能（1.4）</a></span></li><li><span class="section"><a href="#idm52777">13.12.15. PostGIS 新增功能或增强功能（1.3）</a></span></li></ul></div><section class="section" id="idm50607"><div class="titlepage"><div><div><h3 class="title">13.12.1. PostGIS 新增功能或增强功能（3.5）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 3.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#CG_3DArea" title="CG_3DArea">CG_3DArea</a> - 可用性：3.5.0 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#CG_3DConvexHull" title="CG_3DConvexHull">CG_3DConvexHull</a> - 可用性：3.5.0 计算几何体的 3D 凸包。</li><li class="listitem"><a class="link" href="#CG_3DDifference" title="CG_3DDifference">CG_3DDifference</a> - 可用性：3.5.0 执行 3D 差异</li><li class="listitem"><a class="link" href="#CG_3DDistance" title="CG_3DDistance">CG_3DDistance</a> - 可用性：3.5.0 Computes the minimum 3D distance between two geometries</li><li class="listitem"><a class="link" href="#CG_3DIntersection" title="CG_3DIntersection">CG_3DIntersection</a> - 可用性：3.5.0 执行 3D 相交</li><li class="listitem"><a class="link" href="#CG_3DIntersects" title="CG_3DIntersects">CG_3DIntersects</a> - 可用性：3.5.0 Tests if two 3D geometries intersect</li><li class="listitem"><a class="link" href="#CG_3DUnion" title="CG_3DUnion">CG_3DUnion</a> - 可用性：3.5.0 Perform 3D union using postgis_sfcgal.</li><li class="listitem"><a class="link" href="#CG_AlphaShape" title="CG_AlphaShape">CG_AlphaShape</a> - Availability: 3.5.0 - requires SFCGAL &gt;= 1.4.1. 计算包围几何体的 Alpha 形状</li><li class="listitem"><a class="link" href="#CG_ApproxConvexPartition" title="CG_ApproxConvexPartition">CG_ApproxConvexPartition</a> - 可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。 计算多边形几何图形的近似凸分割</li><li class="listitem"><a class="link" href="#CG_ApproximateMedialAxis" title="CG_ApproximateMedialAxis">CG_ApproximateMedialAxis</a> - 可用性：3.5.0 计算几何区域的近似中轴。</li><li class="listitem"><a class="link" href="#CG_Area" title="CG_Area">CG_Area</a> - 可用性：3.5.0 Calculates the area of a geometry</li><li class="listitem"><a class="link" href="#CG_Difference" title="CG_Difference">CG_Difference</a> - 可用性：3.5.0 Computes the geometric difference between two geometries</li><li class="listitem"><a class="link" href="#CG_Distance" title="CG_Distance">CG_Distance</a> - 可用性：3.5.0 Computes the minimum distance between two geometries</li><li class="listitem"><a class="link" href="#CG_Extrude" title="CG_Extrude">CG_Extrude</a> - 可用性：3.5.0 将曲面挤出到相关体积</li><li class="listitem"><a class="link" href="#CG_ExtrudeStraightSkeleton" title="CG_ExtrudeStraightSkeleton">CG_ExtrudeStraightSkeleton</a> - 可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。 直线骨架外凸</li><li class="listitem"><a class="link" href="#CG_ForceLHR" title="CG_ForceLHR">CG_ForceLHR</a> - 可用性：3.5.0 强制 LHR 方向</li><li class="listitem"><a class="link" href="#CG_GreeneApproxConvexPartition" title="CG_GreeneApproxConvexPartition">CG_GreeneApproxConvexPartition</a> - 可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。 计算多边形几何图形的近似凸分割</li><li class="listitem"><a class="link" href="#CG_Intersection" title="CG_Intersection">CG_Intersection</a> - 可用性：3.5.0 Computes the intersection of two geometries</li><li class="listitem"><a class="link" href="#CG_Intersects" title="CG_Intersects">CG_Intersects</a> - 可用性：3.5.0 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#CG_IsPlanar" title="CG_IsPlanar">CG_IsPlanar</a> - 可用性：3.5.0 检查表面是否平坦</li><li class="listitem"><a class="link" href="#CG_IsSolid" title="CG_IsSolid">CG_IsSolid</a> - 可用性：3.5.0 测试几何体是否为实体。 不执行有效性检查。</li><li class="listitem"><a class="link" href="#CG_MakeSolid" title="CG_MakeSolid">CG_MakeSolid</a> - 可用性：3.5.0 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</li><li class="listitem"><a class="link" href="#CG_MinkowskiSum" title="CG_MinkowskiSum">CG_MinkowskiSum</a> - 可用性：3.5.0 执行 Minkowski sum</li><li class="listitem"><a class="link" href="#CG_OptimalAlphaShape" title="CG_OptimalAlphaShape">CG_OptimalAlphaShape</a> - Availability: 3.5.0 - requires SFCGAL &gt;= 1.4.1. 使用“最佳”alpha 值计算包围几何体的 Alpha 形状。</li><li class="listitem"><a class="link" href="#CG_OptimalConvexPartition" title="CG_OptimalConvexPartition">CG_OptimalConvexPartition</a> - 可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。 计算多边形几何图形的最优凸分割</li><li class="listitem"><a class="link" href="#CG_Orientation" title="CG_Orientation">CG_Orientation</a> - 可用性：3.5.0 确定表面方向</li><li class="listitem"><a class="link" href="#CG_StraightSkeleton" title="CG_StraightSkeleton">CG_StraightSkeleton</a> - 可用性：3.5.0 从几何体计算直骨架</li><li class="listitem"><a class="link" href="#CG_Tesselate" title="CG_Tesselate">CG_Tesselate</a> - 可用性：3.5.0 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</li><li class="listitem"><a class="link" href="#CG_Triangulate" title="CG_Triangulate">CG_Triangulate</a> - 可用性：3.5.0 Triangulates a polygonal geometry</li><li class="listitem"><a class="link" href="#CG_Union" title="CG_Union">CG_Union</a> - 可用性：3.5.0 Computes the union of two geometries</li><li class="listitem"><a class="link" href="#CG_Visibility" title="CG_Visibility">CG_Visibility</a> - 可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。 计算一个从点或多边形几何中的线段生成的可见性多边形</li><li class="listitem"><a class="link" href="#CG_Volume" title="CG_Volume">CG_Volume</a> - 可用性：3.5.0 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#CG_YMonotonePartition" title="CG_YMonotonePartition">CG_YMonotonePartition</a> - 可用性：3.5.0 - 需要 SFCGAL &gt;= 1.5.0。 计算多边形几何的 y 单调分割</li><li class="listitem"><a class="link" href="#ST_HasM" title="ST_HasM">ST_HasM</a> - 可用性：3.5.0 检查几何体是否具有 M（测量）维度。</li><li class="listitem"><a class="link" href="#ST_HasZ" title="ST_HasZ">ST_HasZ</a> - 可用性：3.5.0 检查几何体是否具有 Z 维度。</li><li class="listitem"><a class="link" href="#ST_RemoveIrrelevantPointsForView" title="ST_RemoveIrrelevantPointsForView">ST_RemoveIrrelevantPointsForView</a> - 可用性：3.5.0 Removes points that are irrelevant for rendering a specific rectangluar view of a geometry.</li><li class="listitem"><a class="link" href="#ST_RemoveSmallParts" title="ST_RemoveSmallParts">ST_RemoveSmallParts</a> - 可用性：3.5.0 Removes small parts (polygon rings or linestrings) of a geometry.</li><li class="listitem"><a class="link" href="#TopoGeo_LoadGeometry" title="TopoGeo_LoadGeometry">TopoGeo_LoadGeometry</a> - 可用性：3.5.0 Load a geometry into an existing topology, snapping and splitting as needed.</li></ul></div><p>PostGIS 的功能增强 3.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - 增强版：3.5.0 - 添加了touched参数。 Returns the raster clipped by the input geometry. If band number is not specified, all bands are processed. If crop is not specified or TRUE, the output raster is cropped. If touched is set to TRUE, then touched pixels are included, otherwise only if the center of the pixel is in the geometry it is included.</li></ul></div><p>PostGIS 中的功能发生变化 3.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 更改：3.5.0 允许指定包含要素 ID 的列 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - Changed: 3.5.0 : the logic behind the function now uses a test of containment within a buffer, rather than the ST_MaxDistance algorithm. Results will differ from prior versions, but should be closer to user expectations. Tests if a geometry is entirely inside a distance of another</li></ul></div></section><section class="section" id="idm50739"><div class="titlepage"><div><div><h3 class="title">13.12.2. PostGIS 新增功能或增强功能（3.4）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 3.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#PostGIS_GEOS_Compiled_Version" title="PostGIS_GEOS_Compiled_Version">PostGIS_GEOS_Compiled_Version</a> - 可用性：3.4.0 返回构建 PostGIS 所依据的 GEOS 库的版本号。</li><li class="listitem"><a class="link" href="#PostGIS_PROJ_Compiled_Version" title="PostGIS_PROJ_Compiled_Version">PostGIS_PROJ_Compiled_Version</a> - 可用性：3.5.0 Returns the version number of the PROJ library against which PostGIS was built.</li><li class="listitem"><a class="link" href="#RenameTopoGeometryColumn" title="RenameTopoGeometryColumn">RenameTopoGeometryColumn</a> - 可用性：3.4.0 重命名拓扑几何列</li><li class="listitem"><a class="link" href="#RenameTopology" title="RenameTopology">RenameTopology</a> - 可用性：3.4.0 重命名拓扑</li><li class="listitem"><a class="link" href="#ST_ClusterIntersectingWin" title="ST_ClusterIntersectingWin">ST_ClusterIntersectingWin</a> - 可用性：3.4.0 窗口函数，返回每个输入几何图形的簇 ID，将输入几何图形聚类到连接的集合中。</li><li class="listitem"><a class="link" href="#ST_ClusterWithinWin" title="ST_ClusterWithinWin">ST_ClusterWithinWin</a> - 可用性：3.4.0 窗口函数，返回每个输入几何图形的簇 ID，使用分离距离进行聚类。</li><li class="listitem"><a class="link" href="#ST_CoverageInvalidEdges" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a> - 可用性：3.4.0 用于查找多边形无法形成有效覆盖范围的位置的窗口函数。</li><li class="listitem"><a class="link" href="#ST_CoverageSimplify" title="ST_CoverageSimplify">ST_CoverageSimplify</a> - 可用性：3.4.0 简化多边形覆盖范围边缘的窗口函数。</li><li class="listitem"><a class="link" href="#ST_CoverageUnion" title="ST_CoverageUnion">ST_CoverageUnion</a> - 可用性：3.4.0-需要 GEOS &gt;= 3.8.0 通过删除共享边来计算形成覆盖范围的一组多边形的并集。</li><li class="listitem"><a class="link" href="#ST_InverseTransformPipeline" title="ST_InverseTransformPipeline">ST_InverseTransformPipeline</a> - 可用性：3.4.0 返回一个新的几何体，其坐标值使用定义的坐标变换管道的逆变换变换到不同的空间参考系。</li><li class="listitem"><a class="link" href="#ST_LargestEmptyCircle" title="ST_LargestEmptyCircle">ST_LargestEmptyCircle</a> - 可用性：3.4.0。 计算不与几何图形重叠的最大圆。</li><li class="listitem"><a class="link" href="#ST_LineExtend" title="ST_LineExtend">ST_LineExtend</a> - 可用性：3.4.0 返回一条线，向前和向后延伸指定的距离。</li><li class="listitem"><a class="link" href="#ST_TransformPipeline" title="ST_TransformPipeline">ST_TransformPipeline</a> - 可用性：3.4.0 返回一个新的几何图形，其坐标使用定义的坐标转换管道转换为不同的空间参考系统。</li><li class="listitem"><a class="link" href="#TopoElement" title="TopoElement">TopoElement</a> - 可用性：3.4.0 将拓扑几何转换为拓扑元素。</li><li class="listitem"><a class="link" href="#debug_standardize_address" title="debug_standardize_address">debug_standardize_address</a> - 可用性：3.4.0 返回 json 格式的文本，列出解析标记和标准化</li><li class="listitem"><a class="link" href="#postgis_srs" title="postgis_srs">postgis_srs</a> - 可用性：3.4.0 返回所请求的权限和 srid 的元数据记录。</li><li class="listitem"><a class="link" href="#postgis_srs_all" title="postgis_srs_all">postgis_srs_all</a> - 可用性：3.4.0 返回底层 Proj 数据库中每个空间参考系统的元数据记录。</li><li class="listitem"><a class="link" href="#postgis_srs_codes" title="postgis_srs_codes">postgis_srs_codes</a> - 可用性：3.4.0 返回与给定权限关联的 SRS 代码列表。</li><li class="listitem"><a class="link" href="#postgis_srs_search" title="postgis_srs_search">postgis_srs_search</a> - 可用性：3.4.0 返回具有完全包含边界参数的使用区域的投影坐标系的元数据记录。</li></ul></div><p>PostGIS 的功能增强 3.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a> - 增强功能：3.4.0 现在包括额外的 PROJ 配置 NETWORK_ENABLED、URL_ENDPOINT 和 proj.db 位置的 DATABASE_PATH  报告完整的 PostGIS 版本和构建配置信息。</li><li class="listitem"><a class="link" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a> - 增强功能：3.4.0 现在包括 proj.db 位置的 NETWORK_ENABLED、URL_ENDPOINT 和 DATABASE_PATH  返回 PROJ4 库的版本号。</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - 增强：3.4.0 支持所有曲线类型 返回几何体的 SVG 路径数据。</li><li class="listitem"><a class="link" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a> - 增强：3.4.0 - 支持地理。 返回 g1 上最接近 g2 的 2D 点。 这是从一个几何体到另一个几何体的最短直线的第一个点。</li><li class="listitem"><a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a> - 增强：3.4.0 - 引入了对地理的支持。 返回两个小数位置之间的直线部分。</li><li class="listitem"><a class="link" href="#ST_Project" title="ST_Project">ST_Project</a> - 增强：3.4.0允许几何参数和无方位角的两点格式。 返回从起点按距离和方位角（方位角）投影的点。</li><li class="listitem"><a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> - 增强：3.4.0 添加了最大和最小重采样选项 重采样一个栅格图像，可以指定重新采样算法、新的尺寸、任意的栅格角点，以及一组栅格地理参考属性，这些属性可以自己定义，也可以从另一个栅格图像中借用。</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - 增强：3.4.0 添加了最大和最小重采样选项 通过仅调整栅格的比例（或像素大小）来重新采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline、 Lanczos、Max或Min重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a> - 增强：3.4.0 - 支持地理。 返回两个几何图形之间的 2D 最短线</li></ul></div><p>PostGIS 中的功能发生变化 3.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#PostGIS_Extensions_Upgrade" title="PostGIS_Extensions_Upgrade">PostGIS_Extensions_Upgrade</a> - 更改：3.4.0 添加 target_version 参数。 将 PostGIS 扩展（例如 postgis_raster、postgis_topology、postgis_sfcgal）打包并升级到给定版本或最新版本。</li></ul></div></section><section class="section" id="idm50835"><div class="titlepage"><div><div><h3 class="title">13.12.3. PostGIS 新增功能或增强功能（3.3）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 3.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#TP_RemoveUnusedPrimitives" title="RemoveUnusedPrimitives">RemoveUnusedPrimitives</a> - 可用性： 3.3.0 删除定义现有 TopoGeometry 对象不需要的拓扑基元。</li><li class="listitem"><a class="link" href="#ST_3DConvexHull" title="ST_3DConvexHull">ST_3DConvexHull</a> - 可用性： 3.3.0 计算几何体的 3D 凸包。</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - 可用性：3.3.0 添加了聚合函数格式 执行 3D 联合。</li><li class="listitem"><a class="link" href="#ST_AsMARC21" title="ST_AsMARC21">ST_AsMARC21</a> - 可用性： 3.3.0  将几何图形返回为带有地理数据字段 (034) 的 MARC21/XML 记录。</li><li class="listitem"><a class="link" href="#ST_GeomFromMARC21" title="ST_GeomFromMARC21">ST_GeomFromMARC21</a> - 可用性：3.3.0，需要 libxml2 2.6+ 输入 MARC21/XML 地理数据并返回 PostGIS 几何对象。</li><li class="listitem"><a class="link" href="#ST_Letters" title="ST_Letters">ST_Letters</a> - 可用性： 3.3.0 返回渲染为几何图形的输入字母，默认起始位置位于原点，默认文本高度为 100。</li><li class="listitem"><a class="link" href="#ST_OptimalAlphaShape" title="ST_OptimalAlphaShape">ST_OptimalAlphaShape</a> - 可用性：3.3.0 - 需要 SFCGAL &gt;= 1.4.1。 使用“最佳”alpha 值计算包围几何体的 Alpha 形状。</li><li class="listitem"><a class="link" href="#ST_SimplifyPolygonHull" title="ST_SimplifyPolygonHull">ST_SimplifyPolygonHull</a> - 可用性：3.3.0。 计算多边形几何的简化的保留拓扑的外部或内部外壳。</li><li class="listitem"><a class="link" href="#ST_TriangulatePolygon" title="ST_TriangulatePolygon">ST_TriangulatePolygon</a> - 可用性：3.3.0。 计算多边形的约束 Delaunay 三角剖分</li><li class="listitem"><a class="link" href="#postgis_sfcgal_full_version" title="postgis_sfcgal_full_version">postgis_sfcgal_full_version</a> - 可用性： 3.3.0 返回正在使用的 SFCGAL 的完整版本，包括 CGAL 和 Boost 版本</li></ul></div><p>PostGIS 的功能增强 3.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a> - 增强：3.3.0，为 GEOS 3.11+ 启用 GEOS 本机实现 计算包含所有输入几何顶点的可能凹几何</li><li class="listitem"><a class="link" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a> - 增强：3.3.0 接受定向参数。 返回通过将 MultiLineString 缝合在一起形成的线。</li></ul></div><p>PostGIS 中的功能发生变化 3.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#PostGIS_Extensions_Upgrade" title="PostGIS_Extensions_Upgrade">PostGIS_Extensions_Upgrade</a> - 更改：3.3.0 支持从任何 PostGIS 版本升级。 不适用于所有系统。 将 PostGIS 扩展（例如 postgis_raster、postgis_topology、postgis_sfcgal）打包并升级到给定版本或最新版本。</li></ul></div></section><section class="section" id="idm50883"><div class="titlepage"><div><div><h3 class="title">13.12.4. PostGIS 新增功能或增强功能（3.2）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 3.2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#FindLayer" title="FindLayer">FindLayer</a> - 可用性：3.2.0 通过不同的方式返回topology.layer记录。</li><li class="listitem"><a class="link" href="#FindTopology" title="FindTopology">FindTopology</a> - 可用性：3.2.0 通过不同的方式返回拓扑记录。</li><li class="listitem"><a class="link" href="#GetFaceContainingPoint" title="GetFaceContainingPoint">GetFaceContainingPoint</a> - 可用性：3.2.0 查找包含点的面。</li><li class="listitem"><a class="link" href="#ST_AsFlatGeobuf" title="ST_AsFlatGeobuf">ST_AsFlatGeobuf</a> - 可用性：3.2.0 返回一组行的 FlatGeobuf 表示形式。</li><li class="listitem"><a class="link" href="#RT_ST_Contour" title="ST_Contour">ST_Contour</a> - 可用性：3.2.0 使用 GDAL 轮廓算法从提供的栅格波段生成一组矢量轮廓。</li><li class="listitem"><a class="link" href="#ST_DumpSegments" title="ST_DumpSegments">ST_DumpSegments</a> - 可用性：3.2.0 为几何图形中的各个线段返回一组geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_FromFlatGeobuf" title="ST_FromFlatGeobuf">ST_FromFlatGeobuf</a> - 可用性：3.2.0 读取FlatGeobuf数据。</li><li class="listitem"><a class="link" href="#ST_FromFlatGeobufToTable" title="ST_FromFlatGeobufToTable">ST_FromFlatGeobufToTable</a> - 可用性：3.2.0 根据 FlatGeobuf 数据的结构创建一个表。</li><li class="listitem"><a class="link" href="#RT_ST_InterpolateRaster" title="ST_InterpolateRaster">ST_InterpolateRaster</a> - 可用性：3.2.0 基于输入的 3 维点集插值网格表面，使用 X 和 Y 值在网格上定位点，并使用点的 Z 值作为表面高程。</li><li class="listitem"><a class="link" href="#TG_ST_SRID" title="ST_SRID">ST_SRID</a> - 可用性：3.2.0 返回拓扑几何的空间参考标识符。</li><li class="listitem"><a class="link" href="#ST_Scroll" title="ST_Scroll">ST_Scroll</a> - 可用性：3.2.0 更改闭合线串的起点。</li><li class="listitem"><a class="link" href="#RT_ST_SetM" title="ST_SetM">ST_SetM</a> - 可用性：3.2.0 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 M 维度。</li><li class="listitem"><a class="link" href="#RT_ST_SetZ" title="ST_SetZ">ST_SetZ</a> - 可用性：3.2.0 返回与输入几何图形具有相同 X/Y 坐标的几何图形，并使用请求的重采样算法将栅格中的值复制到 Z 维度。</li><li class="listitem"><a class="link" href="#TopoGeom_addTopoGeom" title="TopoGeom_addTopoGeom">TopoGeom_addTopoGeom</a> - 可用性：3.2 将一个 TopoGeometry 的元素添加到另一个 TopoGeometry 的定义中。</li><li class="listitem"><a class="link" href="#ValidateTopologyRelation" title="ValidateTopologyRelation">ValidateTopologyRelation</a> - 可用性：3.2.0 返回有关无效拓扑关系记录的信息</li><li class="listitem"><a class="link" href="#postgis_gdal_vsi_options" title="postgis.gdal_vsi_options">postgis.gdal_vsi_options</a> - 可用性：3.2.0 用于设置处理外部数据库栅格时使用的选项的字符串配置。</li></ul></div><p>PostGIS 的功能增强 3.2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a> - 增强：3.2.0 更高效的实施和更清晰的契约，停止使用无效的拓扑。 查找与给定点相交的面。</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - 增强：3.2.0 支持 max_radius 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - 增强：在 3.2.0 中，添加了可选的算法参数“linework”和“structure”。 需要 GEOS&gt;= 3.10.0 或更高版本。 尝试在不丢失顶点的情况下使无效几何体有效。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a> - 增强：3.2.0 Faster 现在用 C 实现。 返回像素表示的区域的质心（点几何）。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - 增强：3.2.0 Faster 现在用 C 实现。 返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。</li><li class="listitem"><a class="link" href="#ST_Point" title="ST_Point">ST_Point</a> - 增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。 创建具有 X、Y 和 SRID 值的点。</li><li class="listitem"><a class="link" href="#ST_PointM" title="ST_PointM">ST_PointM</a> - 增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。 创建具有 X、Y、M 和 SRID 值的点。</li><li class="listitem"><a class="link" href="#ST_PointZ" title="ST_PointZ">ST_PointZ</a> - 增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。 创建具有 X、Y、Z 和 SRID 值的点。</li><li class="listitem"><a class="link" href="#ST_PointZM" title="ST_PointZM">ST_PointZM</a> - 增强：3.2.0 srid作为额外的可选参数被添加。 较旧的安装需要与 ST_SetSRID 结合以在几何体上标记 srid。 创建具有 X、Y、Z、M 和 SRID 值的点。</li><li class="listitem"><a class="link" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a> - 增强：3.2.0 从线串中删除一个点。</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - 增强：3.2.0 返回删除了重复点的几何图形。</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - 增强：3.2.0 返回所有几何图形的点。 如果输入不是 LineString，则先前的行为将返回 NULL。 返回 LineString 的第一个点.</li><li class="listitem"><a class="link" href="#RT_ST_Value" title="ST_Value">ST_Value</a> - 增强：添加了 3.2.0 重新采样可选参数。 返回指定列 x、行 y 像素或特定几何点处给定波段的值。波段编号从 1 开始，如果未指定，则默认为 1。如果将参数 exclude_nodata_value 设置为 false，则所有像素都被认为与 nodata 像素相交并返回其值。如果未传递参数 exclude_nodata_value，则从栅格的元数据中读取该值。</li><li class="listitem"><a class="link" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a> - Enhanced: 3.2.0 added support for returning signed identifier. Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces.</li></ul></div><p>PostGIS 中的功能发生变化 3.2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - 更改：3.2.0 支持 TIN，不使用地理，不线性化曲线 返回几何图形的边界。</li><li class="listitem"><a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> - 更改：3.2.0 添加了可选的 bbox 参数，执行面标记和边链接检查。 返回一组 validatetopology_returntype 对象，详细说明拓扑问题。</li></ul></div></section><section class="section" id="idm50988"><div class="titlepage"><div><div><h3 class="title">13.12.5. PostGIS 新增功能或增强功能（3.1）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 3.1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_Hexagon" title="ST_Hexagon">ST_Hexagon</a> - 可用性：3.1.0 使用提供的边尺寸和六边形网格空间内的单元坐标返回单个六边形。</li><li class="listitem"><a class="link" href="#ST_HexagonGrid" title="ST_HexagonGrid">ST_HexagonGrid</a> - 可用性：3.1.0 返回一组完全覆盖几何参数边界的六边形和单元格索引。</li><li class="listitem"><a class="link" href="#ST_MaximumInscribedCircle" title="ST_MaximumInscribedCircle">ST_MaximumInscribedCircle</a> - 可用性：3.1.0。 计算几何体中包含的最大圆。</li><li class="listitem"><a class="link" href="#ST_ReducePrecision" title="ST_ReducePrecision">ST_ReducePrecision</a> - 可用性：3.1.0。 返回有效的几何图形，其点舍入到网格公差。</li><li class="listitem"><a class="link" href="#ST_Square" title="ST_Square">ST_Square</a> - 可用性：3.1.0 使用提供的边缘大小和正方形网格空间内的单元格坐标返回单个正方形。</li><li class="listitem"><a class="link" href="#ST_SquareGrid" title="ST_SquareGrid">ST_SquareGrid</a> - 可用性：3.1.0 返回一组完全覆盖几何参数边界的网格正方形和单元格索引。</li></ul></div><p>PostGIS 的功能增强 3.1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - 增强：3.1.0 支持可选精度参数。 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - 增强：3.1.0 支持 3D 几何和权重 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a> - 增强：3.1.0 接受 gridSize 参数。 计算表示几何 A 中不与几何 B 相交的部分的几何。</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 增强：3.1.0 接受 gridSize 参数 计算表示几何 A 和 B 的共享部分的几何。</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - 增强：3.1.0删除了具有NaN值的坐标。 尝试在不丢失顶点的情况下使无效几何体有效。</li><li class="listitem"><a class="link" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a> - 增强：3.1.0 接受 gridSize 参数。 计算几何体的直线细分。</li><li class="listitem"><a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a> - 增强：3.1.0 接受 gridSize 参数。 计算表示几何图形 A 和 B 不相交部分的几何图形。</li><li class="listitem"><a class="link" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a> - 增强：添加了3.1.0 margin 参数。 使用 XYZ 切片系统在 Web Mercator （SRID：3857） 中创建矩形多边形。</li><li class="listitem"><a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> - 增强：3.1.0 接受 gridSize 参数。 计算单个几何体的组件的并集。</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - 增强：3.1.0 接受 gridSize 参数。 计算表示输入几何图形的点集并集的几何图形。</li></ul></div><p>PostGIS 中的功能发生变化 3.1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_Count" title="ST_Count">ST_Count</a> - 更改：3.1.0 - 删除了 ST_Count(rastertable, rastercolumn, ...) 变体。 请改用 。 返回栅格或栅格覆盖范围的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 nodata 值的像素。</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - 更改： 3.1.0. 您现在可以指定一个非零 Z 值。 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</li><li class="listitem"><a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a> - 更改： 3.1.0. 现在可以指定一个非零 M 值。 强制几何图形进入 XYM 模式。</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - 更改： 3.1.0. 您现在可以指定一个非零 Z 值。 强制几何图形进入 XYZ 模式。</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a> - 更改： 3.1.0. 现在可以指定非零 Z 和 M 值。 强制几何图形进入XYZM模式。</li><li class="listitem"><a class="link" href="#RT_ST_Histogram" title="ST_Histogram">ST_Histogram</a> - 更改：3.1.0 删除了 ST_Histogram(table_name, column_name) 变体。  返回一组记录，总结了栅格或栅格覆盖数据分布，其中包括分离的分箱范围。如果未指定，将自动计算分箱数。</li><li class="listitem"><a class="link" href="#RT_ST_Quantile" title="ST_Quantile">ST_Quantile</a> - 更改：3.1.0 删除了 ST_Quantile(table_name, column_name) 变体。  计算样本或总体上下文中栅格或栅格表覆盖范围的分位数。 因此，可以检查某个值是否位于栅格的 25%、50%、75% 百分位处。</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> - 更改：3.1.0 ST_SummaryStats(rastertable, rastercolumn, ...) 变体已删除。 请改用 。  返回一组总结统计信息，包括给定栅格或栅格覆盖的栅格带的计数、总和、均值、标准差、最小值和最大值。如果未指定带号，则假定为带1。</li></ul></div></section><section class="section" id="idm51069"><div class="titlepage"><div><div><h3 class="title">13.12.6. PostGIS 新增功能或增强功能（3.0）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 3.0</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#CG_ConstrainedDelaunayTriangles" title="CG_ConstrainedDelaunayTriangles">CG_ConstrainedDelaunayTriangles</a> - 可用性：3.0.0 返回围绕给定输入几何体的约束 Delaunay 三角剖分。</li><li class="listitem"><a class="link" href="#ST_3DLineInterpolatePoint" title="ST_3DLineInterpolatePoint">ST_3DLineInterpolatePoint</a> - 可用性：3.0.0 返回沿 3D 线的小数指示位置插值的点。</li><li class="listitem"><a class="link" href="#ST_ConstrainedDelaunayTriangles" title="ST_ConstrainedDelaunayTriangles">ST_ConstrainedDelaunayTriangles</a> - 可用性：3.0.0 返回围绕给定输入几何体的约束 Delaunay 三角剖分。</li><li class="listitem"><a class="link" href="#ST_TileEnvelope" title="ST_TileEnvelope">ST_TileEnvelope</a> - 可用性：3.0.0 使用 XYZ 切片系统在 Web Mercator （SRID：3857） 中创建矩形多边形。</li></ul></div><p>PostGIS 的功能增强 3.0</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a> - 增强：3.0 - 添加了对要素 ID 的支持。 返回一组行的 MVT 表示形式的聚合函数。</li><li class="listitem"><a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试 B 的每个点是否都位于 A 中，并且它们的内部是否有一个共同点</li><li class="listitem"><a class="link" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试 B 的每个点是否都位于 A 的内部</li><li class="listitem"><a class="link" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试 A 的每个点是否都位于 B 中</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试 B 的每个点是否都位于 A 中</li><li class="listitem"><a class="link" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试两个几何图形是否有一些（但不是全部）共同的内点</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - 增强：3.0.0 实现了每弧的最小线性分数。 防止拓扑崩溃。 将包含曲线的几何图形转换为线性几何图形。</li><li class="listitem"><a class="link" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试两个几何图形是否没有共同点</li><li class="listitem"><a class="link" href="#ST_Equals" title="ST_Equals">ST_Equals</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试两个几何图形是否包含同一组点</li><li class="listitem"><a class="link" href="#ST_GeneratePoints" title="ST_GeneratePoints">ST_GeneratePoints</a> - 增强：3.0.0，添加种子参数 生成一个包含在多边形（Polygon）或多重多边形（MultiPolygon）内的随机点的多点对象。</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a> - 增强：3.0.0如果未指定其他 SRID解析几何，则默认 SRID 为 4326。 将几何图形的 geojson 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a> - 增强：3.0.0 - 添加了对多边形、TIN、三角形的支持。 返回与测量范围匹配的几何图形部分。</li><li class="listitem"><a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a> - 增强：3.0.0 - 添加了对多边形、TIN、三角形的支持。 返回位于高程 (Z) 范围内的几何图形部分。</li><li class="listitem"><a class="link" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试两个几何图形是否具有相同的维度和相交，但每个几何图形至少有一个点不在另一个几何图形中</li><li class="listitem"><a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试两个几何图形是否具有与交集矩阵模式匹配的拓扑关系，或计算它们的交集矩阵</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - 增强：3.0.0 分段几何现在可生成等长的子分段 返回修改后的几何图形/地理，其线段不长于给定距离。</li><li class="listitem"><a class="link" href="#ST_Touches" title="ST_Touches">ST_Touches</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试两个几何图形是否至少有一个共同点，但它们的内部不相交</li><li class="listitem"><a class="link" href="#ST_Within" title="ST_Within">ST_Within</a> - 增强：3.0.0 启用了对 GEOMETRYCOLLECTION 的支持 测试 A 的每个点是否都位于 B 中，并且它们的内部是否有一个共同点</li></ul></div><p>PostGIS 中的功能发生变化 3.0</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#PostGIS_Extensions_Upgrade" title="PostGIS_Extensions_Upgrade">PostGIS_Extensions_Upgrade</a> - 更改：3.0.0 重新打包松散扩展并支持 postgis_raster。 将 PostGIS 扩展（例如 postgis_raster、postgis_topology、postgis_sfcgal）打包并升级到给定版本或最新版本。</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - 更改：3.0.0 - SFCGAL 版本已删除 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - 更改：3.0.0 删除了 SFCGAL 后端，GEOS 后端支持 TIN。 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域）</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - 更改：3.0.0 - 不再依赖 SFCGAL。 返回多边形几何体的面积。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 更改：3.0.0 支持记录作为输入 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 更改：3.0.0 输出 SRID（如果不是 EPSG：4326）。 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - 更改：3.0.0 - 删除了“版本化”变体签名 将几何图形作为 KML 元素返回。</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 更改：3.0.0 - 不再依赖 SFCGAL。 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 更改：3.0.0 不依赖于 SFCGAL。 计算表示几何 A 和 B 的共享部分的几何。</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 更改：3.0.0删除了 SFCGAL 版本并添加了对 2D TINS 的本机支持。 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - 更改：3.0.0 不依赖于 SFCGAL。 计算表示输入几何图形的点集并集的几何图形。</li></ul></div></section><section class="section" id="idm51177"><div class="titlepage"><div><div><h3 class="title">13.12.7. PostGIS 新增功能或增强功能（2.5）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 2.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#PostGIS_Extensions_Upgrade" title="PostGIS_Extensions_Upgrade">PostGIS_Extensions_Upgrade</a> - 可用性：2.5.0 将 PostGIS 扩展（例如 postgis_raster、postgis_topology、postgis_sfcgal）打包并升级到给定版本或最新版本。</li><li class="listitem"><a class="link" href="#ST_Angle" title="ST_Angle">ST_Angle</a> - 可用性：2.5.0 返回由 3 或 4 个点或 2 条线定义的两个向量之间的角度。</li><li class="listitem"><a class="link" href="#RT_ST_AsHexWKB" title="ST_AsHexWKB">ST_AsHexWKB</a> - 可用性：2.5.0  返回栅格的十六进制表示形式的熟知的二进制 (WKB)。</li><li class="listitem"><a class="link" href="#RT_ST_BandFileSize" title="ST_BandFileSize">ST_BandFileSize</a> - 可用性：2.5.0 返回文件系统中存储的波段的文件大小。 如果未指定波段号，则假定为 1。</li><li class="listitem"><a class="link" href="#RT_ST_BandFileTimestamp" title="ST_BandFileTimestamp">ST_BandFileTimestamp</a> - 可用性：2.5.0 返回文件系统中存储的波段的文件时间戳。 如果未指定 波段号，则假定为 1。</li><li class="listitem"><a class="link" href="#ST_ChaikinSmoothing" title="ST_ChaikinSmoothing">ST_ChaikinSmoothing</a> - 可用性：2.5.0 使用 Chaikin 算法返回几何图形的平滑版本</li><li class="listitem"><a class="link" href="#ST_FilterByM" title="ST_FilterByM">ST_FilterByM</a> - 可用性：2.5.0 根据 M 值删除顶点</li><li class="listitem"><a class="link" href="#RT_ST_Grayscale" title="ST_Grayscale">ST_Grayscale</a> - 可用性：2.5.0  根据源栅格和代表红色、绿色和蓝色的指定波段创建新的 1-8BUI 波段栅格</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoints" title="ST_LineInterpolatePoints">ST_LineInterpolatePoints</a> - 可用性：2.5.0 返回沿直线以分数间隔插值的点。</li><li class="listitem"><a class="link" href="#ST_OrientedEnvelope" title="ST_OrientedEnvelope">ST_OrientedEnvelope</a> - 可用性：2.5.0。  返回包含几何图形的最小面积矩形。</li><li class="listitem"><a class="link" href="#ST_QuantizeCoordinates" title="ST_QuantizeCoordinates">ST_QuantizeCoordinates </a> - 可用性：2.5.0 将坐标的最低有效位设置为零</li><li class="listitem"><a class="link" href="#RT_ST_RastFromHexWKB" title="ST_RastFromHexWKB">ST_RastFromHexWKB</a> - 可用性：2.5.0 从熟知的二进制 (WKB) 栅格的十六进制表示形式返回栅格值。</li><li class="listitem"><a class="link" href="#RT_ST_RastFromWKB" title="ST_RastFromWKB">ST_RastFromWKB</a> - 可用性：2.5.0 从熟知的二进制 (WKB) 栅格返回栅格值。</li><li class="listitem"><a class="link" href="#RT_ST_SetBandIndex" title="ST_SetBandIndex">ST_SetBandIndex</a> - 可用性：2.5.0 更新out-db band的external band编号</li><li class="listitem"><a class="link" href="#RT_ST_SetBandPath" title="ST_SetBandPath">ST_SetBandPath</a> - 可用性：2.5.0 更新out-db band的外部路径和band编号</li></ul></div><p>PostGIS 的功能增强 2.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a> - 增强：2.5.0 添加 ST_AsWKB 返回栅格的熟知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a> - 增强：2.5.0 - 添加了对并行查询的支持。 返回一组行的 MVT 表示形式的聚合函数。</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - 增强：2.5 - 引入了可选的精度参数。 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a> - 增强：2.5.0 包括 outdbbandnum、文件大小和文件时间戳 for outdb 栅格。 返回特定栅格波段的基本元数据。 如果未指定，则假定波段编号为 1。</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - 增强：2.5.0 - ST_Buffer的几何感知版本已得到增强，允许您指定要缓冲的一侧。side=both|left|right。 计算覆盖距几何体给定距离内所有点的几何体。</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a> - 增强：2.5.0 现在可以接受 json 和 jsonb 作为输入。 将几何图形的 geojson 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">ST_GeometricMedian </a> - 增强：2.5.0 添加了对 M 作为点权重的支持。 返回多点的几何中位数。</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 增强：2.5.0 支持 GEOMETRYCOLLECTION。 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_OffsetCurve" title="ST_OffsetCurve">ST_OffsetCurve</a> - 增强：2.5 - 添加了对 GEOMETRYCOLLECTION 和 MULTILINESTRING 的支持 返回距输入线给定距离和方向的偏移线。</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - 增强：2.5.0 引入了对相对于本地原点（origin 参数）进行缩放的支持。 按给定因子缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_Split" title="ST_Split">ST_Split</a> - 增强：2.5.0 引入了通过多线分割多边形的支持。 返回通过将一个几何体分割为另一个几何体而创建的几何体集合。</li><li class="listitem"><a class="link" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a> - 增强：2.5.0 重用多边形分割上的现有点，顶点数从 8 减少到 5。 计算几何体的直线细分。</li></ul></div><p>PostGIS 中的功能发生变化 2.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> - 更改：2.5.0 - 添加 can_read 和 can_write 列。 通过 GDAL 返回 PostGIS 支持的栅格格式列表。 ST_AsGDALRaster 仅可使用 can_write=True 的格式</li></ul></div></section><section class="section" id="idm51270"><div class="titlepage"><div><div><h3 class="title">13.12.8. PostGIS 新增功能或增强功能（2.4）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 2.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_AsGeobuf" title="ST_AsGeobuf">ST_AsGeobuf</a> - 可用性：2.4.0 返回一组行的 Geobuf 表示。</li><li class="listitem"><a class="link" href="#ST_AsMVT" title="ST_AsMVT">ST_AsMVT</a> - 可用性：2.4.0 返回一组行的 MVT 表示形式的聚合函数。</li><li class="listitem"><a class="link" href="#ST_AsMVTGeom" title="ST_AsMVTGeom">ST_AsMVTGeom</a> - 可用性：2.4.0 将几何图形转换为 MVT 瓦片的坐标空间。</li><li class="listitem"><a class="link" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a> - 可用性：2.4.0 引入了对地理的支持。 返回几何体的几何中心。</li><li class="listitem"><a class="link" href="#ST_ForcePolygonCCW" title="ST_ForcePolygonCCW">ST_ForcePolygonCCW </a> - 可用性：2.4.0 将所有外环逆时针定向，将所有内环顺时针定向。</li><li class="listitem"><a class="link" href="#ST_ForcePolygonCW" title="ST_ForcePolygonCW">ST_ForcePolygonCW </a> - 可用性：2.4.0 顺时针方向调整所有外环，逆时针方向调整所有内环。</li><li class="listitem"><a class="link" href="#ST_FrechetDistance" title="ST_FrechetDistance">ST_FrechetDistance</a> - 可用性：2.4.0 - 需要 GEOS &gt;= 3.7.0 返回两个几何图形之间的 Fréchet 距离。</li><li class="listitem"><a class="link" href="#ST_IsPolygonCCW" title="ST_IsPolygonCCW">ST_IsPolygonCCW </a> - 可用性：2.4.0 检测多边形是否具有逆时针方向的外环和顺时针方向的内环。</li><li class="listitem"><a class="link" href="#ST_IsPolygonCW" title="ST_IsPolygonCW">ST_IsPolygonCW </a> - 可用性：2.4.0 检测多边形是否具有顺时针外环和逆时针内环。</li><li class="listitem"><a class="link" href="#RT_ST_MakeEmptyCoverage" title="ST_MakeEmptyCoverage">ST_MakeEmptyCoverage</a> - 可用性：2.4.0  用空栅格图块网格覆盖地理参考区域。</li></ul></div><p>PostGIS 的功能增强 2.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> - 增强：2.4.1 邮政编码 5 制表区域 (zcta5) 加载步骤已修复，启用后，zcta5 数据将作为名为 zcta5_all 的单个表加载，作为国家脚本加载的一部分。 为指定平台生成加载到县和州查找表中的 shell 脚本。</li><li class="listitem"><a class="link" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> - 增强：2.4.0norm_addy对象包括附加字段zip4和address_alphanumeric。 给定文本街道地址，返回复合的norm_addy类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。</li><li class="listitem"><a class="link" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> - 增强：2.4.0norm_addy对象包括附加字段zip4和address_alphanumeric。 给定文本街道地址，返回复合的norm_addy类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。 需要 address_standardizer 扩展。</li><li class="listitem"><a class="link" href="#Reverse_Geocode" title="Reverse_Geocode">Reverse_Geocode</a> - 增强：2.4.1 如果加载了可选的 zcta5 数据集，即使未加载特定的状态数据，reverse_geocode 函数也可以解析为状态和 zip。 有关加载 zcta5 数据的详细信息，请参阅 。 获取已知空间参考系统中的几何点并返回一条记录，其中包含理论上可能的地址数组和交叉街道数组。 如果 include_strnum_range = true，则包括交叉街道中的街道范围。</li><li class="listitem"><a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a> - 增强：2.4.0 内存和速度改进。 返回几何形式为 TWKB，又名“微小的已知的二进制”</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - 增强：2.4.0 为地理类型添加了对多边形中的多边形和多边形中的线的支持 测试 B 的每个点是否都位于 A 中</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - 增强：2.4.0 支持最大距离差公差和最大角度公差，支持对称输出。 将包含曲线的几何图形转换为线性几何图形。</li><li class="listitem"><a class="link" href="#ST_Project" title="ST_Project">ST_Project</a> - 增强：2.4.0 允许负距离和非标准化方位角。 返回从起点按距离和方位角（方位角）投影的点。</li><li class="listitem"><a class="link" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a> - 增强：2.4.0引入了曲线支持。 返回顶点顺序相反的几何体。</li></ul></div><p>PostGIS 中的功能发生变化 2.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - 更改：2.4.0，在之前的版本中，这是边界框相等而不是几何相等。 如果需要边界框相等，请使用代替。 如果几何/地理 A 的坐标和坐标顺序与几何/地理 B 的坐标和坐标顺序相同，则返回 TRUE。</li><li class="listitem"><a class="link" href="#ST_Node" title="ST_Node">ST_Node</a> - 更改：2.4.0 该函数在内部使用 GEOSNode 而不是 GEOSUnaryUnion。 与 PostGIS &lt; 2.4 相比，这可能会导致生成的线串具有不同的顺序和方向。  节点是线的集合。</li></ul></div></section><section class="section" id="idm51342"><div class="titlepage"><div><div><h3 class="title">13.12.9. PostGIS 新增功能或增强功能（2.3）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 2.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果几何体的（缓存的）n 维边界框与 n 维浮点精度边界框 (GIDX) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果 n 维浮点精度边界框 (GIDX) 与几何体的（缓存的）n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果两个 n 维浮点精度边界框 (GIDX) 彼此相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果两个 2D 浮点精度边界框 (BOX2DF) 彼此相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果 2D 浮点精度边界框 (BOX2DF) 与几何体的（缓存的）2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果几何体的（缓存的）2D 边界框与 2D 浮点精度边界框 (BOX2DF) 相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果 2D 浮点精度边界框 (BOX2DF) 包含在另一个 2D 浮点精度边界框内，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果 2D 浮点精度边界框 (BOX2DF) 包含在几何体的 2D 边界框中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果几何体的 2D 边界框包含在 2D 浮点精度边界框 (BOX2DF) 中，则返回 TRUE。</li><li class="listitem"><a class="link" href="#Populate_Topology_Layer" title="Populate_Topology_Layer">Populate_Topology_Layer</a> - 可用性：2.3.0 通过从拓扑表读取元数据，将缺失的条目添加到topology.layer表中。</li><li class="listitem"><a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a> - 可用性：2.3.0 使用 DBSCAN 算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - 可用性：2.3.0 使用 K 均值算法返回每个输入几何图形的簇 id 的窗口函数。</li><li class="listitem"><a class="link" href="#ST_GeneratePoints" title="ST_GeneratePoints">ST_GeneratePoints</a> - 可用性：2.3.0 生成一个包含在多边形（Polygon）或多重多边形（MultiPolygon）内的随机点的多点对象。</li><li class="listitem"><a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">ST_GeometricMedian </a> - 可用性：2.3.0 返回多点的几何中位数。</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - 可用性：2.3.0 - 引入了对MultiPoint输入元素的支持 从Point, MultiPoint,或LineString geometries创建LineString。</li><li class="listitem"><a class="link" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a> - 可用性-2.3.0 返回包含几何图形的最小圆的中心点和半径。</li><li class="listitem"><a class="link" href="#ST_MinimumClearance" title="ST_MinimumClearance">ST_MinimumClearance</a> - 可用性：2.3.0 返回几何体的最小间隙，这是几何体稳健性的度量。</li><li class="listitem"><a class="link" href="#ST_MinimumClearanceLine" title="ST_MinimumClearanceLine">ST_MinimumClearanceLine</a> - 可用性：2.3.0-需要GEOS &gt;= 3.6.0 返回跨越几何体最小间隙的两点线串。</li><li class="listitem"><a class="link" href="#ST_Normalize" title="ST_Normalize">ST_Normalize</a> - 可用性：2.3.0 返回规范形式的几何图形。</li><li class="listitem"><a class="link" href="#ST_Points" title="ST_Points">ST_Points</a> - 可用性：2.3.0 返回包含几何坐标的 MultiPoint。</li><li class="listitem"><a class="link" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a> - 可用性：2.3.0 返回几何体顶点的 Voronoi 图的边界。</li><li class="listitem"><a class="link" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a> - 可用性：2.3.0 返回几何体顶点的 Voronoi 图的单元格。</li><li class="listitem"><a class="link" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a> - 可用性：2.3.0 需要 GEOS 将几何体环绕在 X 值周围。</li><li class="listitem"><a class="link" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a> - 可用性：2.3 将元素添加到 TopoGeometry 的定义中。</li><li class="listitem"><a class="link" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a> - 可用性：2.3 从 TopoGeometry 的定义中删除元素。</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果 2D 浮点精度边界框 (BOX2DF) 包含另一个 2D 浮点精度边界框 (BOX2DF)，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果 2D 浮点精度边界框 (BOX2DF) 包含几何体的 2D 边界框，则返回 TRUE。</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - 可用性：2.3.0 引入了对块范围索引 (BRIN) 的支持。 需要 PostgreSQL 9.5+。 如果几何体的 2D 粘合框包含 2D 浮点精度边界框 (GIDX)，则返回 TRUE。</li></ul></div><p>PostGIS 的功能增强 2.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a> - 增强：2.3.0 PIP 短路（快速判断仅限于多边形和点）已得到增强，以支持具有更少点的多点。 以前的版本仅支持面和点组合。 测试 B 的每个点是否都位于 A 中，并且它们的内部是否有一个共同点</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - 增强：对于 2.3.0 几何图形，PIP 短路（仅限于多边形和点的快速判断）已得到增强，以支持由更少点组成的多点。 以前的版本仅支持面和点组合。 测试 B 的每个点是否都位于 A 中</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - 增强：2.3.0 添加了对不同维度的盒子进行不同数量扩展的支持。 返回从另一个边界框或几何图形扩展的边界框。</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 增强：2.3.0 PIP 短路（快速判断仅限于多边形和点）已得到增强，以支持具有更少点的多点。 以前的版本仅支持面和点组合。 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - 增强：2.3.0 地理分段现在可生成等长的子分段 返回修改后的几何图形/地理，其线段不长于给定距离。</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - 增强：2.3.0 引入了对直接 PROJ.4 字符串的支持。 返回坐标转换为不同空间参考系的新几何图形。</li><li class="listitem"><a class="link" href="#ST_Within" title="ST_Within">ST_Within</a> - 增强：对于 2.3.0 几何图形，PIP 短路（仅限于多边形和点的快速判断）已得到增强，以支持由更少点组成的多点。 以前的版本仅支持面和点组合。 测试 A 的每个点是否都位于 B 中，并且它们的内部是否有一个共同点</li></ul></div><p>PostGIS 中的功能发生变化 2.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - 更改：2.3.0：负索引可用（-1 是最后一点）  返回几何图形中第一个线串或圆形线串中的第 N 个点。</li></ul></div></section><section class="section" id="idm51459"><div class="titlepage"><div><div><h3 class="title">13.12.10. PostGIS 新增功能或增强功能（2.2）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 2.2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#geometry_distance_centroid_nd" title="&lt;&lt;-&gt;&gt;">&lt;&lt;-&gt;&gt;</a> - 可用性：2.2.0——KNN 仅适用于 PostgreSQL 9.1+ 返回 A 和 B 几何图形或边界框之间的 n 维距离</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - 可用性：2.2.0 执行 3D 差异</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - 可用性：2.2.0 执行 3D 联合。</li><li class="listitem"><a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> - 可用性：2.2.0 计算几何区域的近似中轴。</li><li class="listitem"><a class="link" href="#ST_AsEncodedPolyline" title="ST_AsEncodedPolyline">ST_AsEncodedPolyline</a> - 可用性：2.2.0 从 LineString 几何体返回编码折线。</li><li class="listitem"><a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a> - 可用性：2.2.0 返回几何形式为 TWKB，又名“微小的已知的二进制”</li><li class="listitem"><a class="link" href="#ST_BoundingDiagonal" title="ST_BoundingDiagonal">ST_BoundingDiagonal</a> - 可用性：2.2.0 返回几何边界框的对角线。</li><li class="listitem"><a class="link" href="#ST_CPAWithin" title="ST_CPAWithin">ST_CPAWithin</a> - 可用性：2.2.0 测试两条轨迹的最近接近点是否在指定距离内。</li><li class="listitem"><a class="link" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a> - 可用性：2.2.0 计算几何图形落在矩形内的部分。</li><li class="listitem"><a class="link" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a> - 可用性：2.2.0 返回两条轨迹最接近点处的测量值。</li><li class="listitem"><a class="link" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a> - 可用性：2.2.0 将输入几何图形聚类成连接集的聚合函数。</li><li class="listitem"><a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a> - 可用性：2.2.0 按间隔距离对几何图形进行聚合的聚合函数。</li><li class="listitem"><a class="link" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a> - 可用性：2.2.0  总计的。 返回一组栅格的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 NODATA 值的像素。</li><li class="listitem"><a class="link" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a> - 可用性：2.2.0 创建给定栅格覆盖范围的降低分辨率版本。</li><li class="listitem"><a class="link" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a> - 可用性：2.2.0 返回两条轨迹的最近接近点之间的距离。</li><li class="listitem"><a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a> - 可用性：2.2.0 如果适用，将一个几何图形上升到其曲线类型。</li><li class="listitem"><a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> - 可用性：2.2.0：这在 2.1.0 中已记录，但在 2.1 版本中意外遗漏。 检查表面是否平坦</li><li class="listitem"><a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> - 可用性：2.2.0 测试几何体是否为实体。 不执行有效性检查。</li><li class="listitem"><a class="link" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> - 可用性：2.2.0 测试几何图形是否为有效轨迹。</li><li class="listitem"><a class="link" href="#ST_LineFromEncodedPolyline" title="ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a> - 可用性：2.2.0 从编码折线创建 LineString。</li><li class="listitem"><a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> - 可用性：2.2.0 将几何体铸造成实体。 不执行任何检查。 要获得有效的实体，输入几何图形必须是闭合多面体曲面或闭合 TIN。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a> - 可用性：2.2.0：能够添加遮罩 回调函数版本 - 给定一个或多个输入栅格、波段索引和一个用户指定的回调函数，返回单波段栅格。</li><li class="listitem"><a class="link" href="#RT_ST_MemSize" title="ST_MemSize">ST_MemSize</a> - 可用性：2.2.0 返回栅格占用的空间量（以字节为单位）。</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - 可用性：2.2.0 返回删除了重复点的几何图形。</li><li class="listitem"><a class="link" href="#RT_Retile" title="ST_Retile">ST_Retile</a> - 可用性：2.2.0 从任意平铺的栅格覆盖范围返回一组配置的平铺。</li><li class="listitem"><a class="link" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a> - 可用性：2.2.0 使用 Visvalingam-Whyatt 算法设置每个顶点的有效区域。</li><li class="listitem"><a class="link" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a> - 可用性：2.2.0 使用Visvalingam-Whyatt算法返回几何图形的简化表示</li><li class="listitem"><a class="link" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a> - 可用性：2.2.0 计算几何体的直线细分。</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> - 可用性：2.2.0  总计的。 返回一组栅格的给定栅格波段的摘要统计信息，其中包含计数、总和、平均值、标准差、最小值、最大值。 如果未指定带号，则假定为带1。</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - 可用性：2.2.0 返回更改后的几何图形，其中交换了给定的坐标值。</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - 可用性：2.2.0 计算 3D 实体的体积。 如果应用于表面（甚至闭合）几何图形将返回 0。</li><li class="listitem"><a class="link" href="#parse_address" title="parse_address">parse_address</a> - 可用性：2.2.0 获取 1 行地址并分成几部分</li><li class="listitem"><a class="link" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a> - 可用性：2.2.0 一个布尔配置选项，用于启用对数据库外栅格波段的访问。</li><li class="listitem"><a class="link" href="#postgis_gdal_datapath" title="postgis.gdal_datapath">postgis.gdal_datapath</a> - 可用性：2.2.0 用于分配 GDAL 的 GDAL_DATA 选项值的配置选项。 如果未设置，则使用环境设置的 GDAL_DATA 变量。</li><li class="listitem"><a class="link" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a> - 可用性：2.2.0 用于设置 PostGIS 环境中启用的 GDAL 驱动程序的配置选项。 影响 GDAL 配置变量 GDAL_SKIP。</li><li class="listitem"><a class="link" href="#standardize_address" title="standardize_address">standardize_address</a> - 可用性：2.2.0 利用 lex、gaz 和规则表返回输入地址的 stdaddr 形式。</li><li class="listitem"><a class="link" href="#geometry_distance_cpa" title="|=|">|=|</a> - 可用性：2.2.0。 索引支持仅适用于 PostgreSQL 9.5+ 返回 A 和 B 轨迹在最接近点处的距离。</li></ul></div><p>PostGIS 的功能增强 2.2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - 增强：2.2.0 -几何和地理之间的 KNN（k 最近邻）行为现在是真实的。 请注意，地理的 KNN 是在球面上计算的，而不是在椭球体平面上计算的。 PostgreSQL 9.4 及更低版本支持地理，但仅支持边界框的重心。 返回 A 和 B 之间的 2D 距离。</li><li class="listitem"><a class="link" href="#AsTopoJSON" title="AsTopoJSON">AsTopoJSON</a> - 增强：2.2.1 添加了对 puntal 输入的支持 返回拓扑几何的 TopoJSON 表示形式。</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - 增强：2.2.0 - 使用 GeographicLib 对球体进行测量，以提高准确性和稳健性。 需要 PROJ 
&gt;= 4.9.0 才能利用新功能。 返回多边形几何体的面积。</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - 增强：2.2.0：添加了对反转地理坐标和轴（x/y、经度/纬度）的支持。 有关详细信息，请参阅选项。 返回 X3D xml 节点元素格式的几何图形：ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> - 增强：2.2.0使用 GeographicLib 对球体进行测量，以提高准确性和稳健性。 需要 PROJ &gt;= 4.9.0 才能利用新功能。 返回两点之间直线的基于北方的方位角。</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 增强：2.2.0 - 使用 GeographicLib 对球体进行测量，以提高准确性和稳健性。 需要 PROJ 
&gt;= 4.9.0 才能利用新功能。 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - 增强：2.2.0 引入了对缩放所有维度（factor 参数）的支持。 按给定因子缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_Split" title="ST_Split">ST_Split</a> - 增强：2.2.0 引入了对通过多线、多点或（多）多边形边界分割线的支持。 返回通过将一个几何体分割为另一个几何体而创建的几何体集合。</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - 增强：添加了对 2.2.0 TIN 和曲线的支持 返回几何内容的文本摘要。</li></ul></div><p>PostGIS 中的功能发生变化 2.2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - 更改： 2.2.0 -在PostgreSQL 9.5中，旧的混合格式可能很慢。 因此，如果您只想在 PostGIS 2.2 或更高版本和 PostgreSQL 9.5 或更高版本上运行，则可能需要消除该方法。 返回 A 和 B 之间的 2D 距离。</li><li class="listitem"><a class="link" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a> - 更改：2.2.0：默认设置现在保存在名为 geocode_settings_default 的表中。 使用自定义设置a位于geocode_settings中，并且仅包含用户设置的设置。 返回存储在 Tiger.geocode_settings 表中的特定设置的值。</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - 更改：2.2.0 - 如果输入 2 个 2D 几何图形，则返回 2D 点（而不是假设缺失 Z 为 0 的旧行为）。 在 2D 和 3D 情况下，对于缺失的 Z，Z 不再被假定为 0。 返回 g1 上最接近 g2 的 3D 点。 这是 3D 最短线的第一个点。</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - 更改：2.2.0 - 在 2D 和 3D 的情况下，对于缺失的 Z，Z 不再被假定为 0。 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - 更改：2.2.0 - 如果输入 2 个 2D 几何图形，则返回 2D 点（而不是假设缺失 Z 为 0 的旧行为）。 在 2D 和 3D 情况下，对于缺失的 Z，Z 不再被假定为 0。 返回两个几何体之间的 3D 最长直线</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - 更改：2.2.0 - 在 2D 和 3D 的情况下，对于缺失的 Z，Z 不再被假定为 0。 返回两个几何图形之间的 3D 笛卡尔最大距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - 更改：2.2.0 - 如果输入 2 个 2D 几何图形，则返回 2D 点（而不是假设缺失 Z 为 0 的旧行为）。 在 2D 和 3D 情况下，对于缺失的 Z，Z 不再被假定为 0。 返回两个几何图形之间的 3D 最短线</li><li class="listitem"><a class="link" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a> - 更改：2.2.0 在之前的版本中，这曾经被称为 ST_Distance_Sphere 使用球形地球模型返回两个经度/纬度几何形状之间的最小距离（以米为单位）。</li><li class="listitem"><a class="link" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a> - 更改：2.2.0 在之前的版本中，这称为 ST_Distance_Spheroid 使用球体模型返回两个经度/纬度几何形状之间的最小距离。</li><li class="listitem"><a class="link" href="#ST_Equals" title="ST_Equals">ST_Equals</a> - 更改：2.2.0 即使对于无效几何图形，如果它们二进制相等，也会返回 true 测试两个几何图形是否包含同一组点</li><li class="listitem"><a class="link" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a> - 更改：2.2.0 在之前的版本中，这称为 ST_Length_Spheroid 并具有别名 ST_3DLength_Spheroid 返回椭球体上经度/纬度几何体的 2D 或 3D 长度/周长。</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - 更改：2.2.0 名称更改为 ST_MemSize 以遵循命名约定。 返回几何图形占用的内存空间总量。</li><li class="listitem"><a class="link" href="#ST_PointInsideCircle" title="ST_PointInsideCircle">ST_PointInsideCircle</a> - 更改：2.2.0 在之前的版本中，这称为 ST_Point_Inside_Circle 测试点几何图形是否位于由圆心和半径定义的圆内</li><li class="listitem"><a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> - 更改：2.2.0 id1 和 id2 的值被交换为“边缘交叉节点”，以与错误描述一致。 返回一组 validatetopology_returntype 对象，详细说明拓扑问题。</li></ul></div></section><section class="section" id="idm51648"><div class="titlepage"><div><div><h3 class="title">13.12.11. PostGIS 新增功能或增强功能（2.1）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 2.1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_Raster_EQ" title="=">=</a> - 可用性：2.1.0  如果 A 的边界框与 B 的边界框相同，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#AsTopoJSON" title="AsTopoJSON">AsTopoJSON</a> - 可用性：2.1.0  返回拓扑几何的 TopoJSON 表示形式。</li><li class="listitem"><a class="link" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a> - 可用性：2.1.0 生成一个脚本，删除指定架构中以 County_all、state_all 或state代码开头，后跟county或state的所有表。</li><li class="listitem"><a class="link" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a> - 可用性：2.1.0 返回存储在 Tiger.geocode_settings 表中的特定设置的值。</li><li class="listitem"><a class="link" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> - 可用性：2.1.0  为指定平台生成加载到县和州查找表中的 shell 脚本。</li><li class="listitem"><a class="link" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> - 可用性：2.1.0 给定文本街道地址，返回复合的norm_addy类型，该类型具有道路后缀、前缀和标准化类型、街道、街道名称等，分为单独的字段。 该函数仅适用于与 Tiger_geocoder 打包的查找数据（不需要tiger普查数据）。 需要 address_standardizer 扩展。</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - 可用性：2.1.0 计算 3D 表面几何形状的面积。 对于固体将返回 0。</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - 可用性：2.1.0 执行 3D 相交</li><li class="listitem"><a class="link" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a> - 可用性：2.1.0 从 GeoHash 字符串返回 BOX2D。</li><li class="listitem"><a class="link" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a> - 可用性：2.1.0  根据源栅格和指定波段创建最多四个 8BUI 波段（灰度、RGB、RGBA）的新栅格。 如果未指定，则假定为波段 1。</li><li class="listitem"><a class="link" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a> - 可用性：2.1.0 如果栅格 rastB 中没有点位于栅格 rastA 的外部且 rastB 的内部至少有一个点位于 rastA 的内部，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - 可用性：2.1.0 如果 rastB 与 rastA 的内部相交，但不与 rastA 的边界或外部相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - 可用性：2.1.0 如果栅格 rastA 中没有点位于栅格 rastB 之外，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a> - 可用性：2.1.0 如果栅格 rastB 中没有点位于栅格 rastA 之外，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - 可用性：2.1.0 如果栅格 rastA 和 rastB 彼此完全在指定距离内，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a> - 可用性：2.1.0 如果栅格 rastA 和 rastB 彼此之间的距离在指定距离内，则返回 true。</li><li class="listitem"><a class="link" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a> - 可用性：2.1.0 返回几何体顶点的 Delaunay 三角剖分。</li><li class="listitem"><a class="link" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - 可用性：2.1.0 如果栅格 rastA 在空间上不与 rastB 相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_DumpValues" title="ST_DumpValues">ST_DumpValues</a> - 可用性：2.1.0 获取指定 band（波段） 的值作为二维数组。</li><li class="listitem"><a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> - 可用性：2.1.0 将曲面挤出到相关体积</li><li class="listitem"><a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> - 可用性：2.1.0 强制 LHR 方向</li><li class="listitem"><a class="link" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a> - 可用性：2.1.0 从受支持的 GDAL 栅格文件返回栅格。</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a> - 可用性：2.1.0 从 GeoHash 字符串返回几何图形。</li><li class="listitem"><a class="link" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a> - 可用性：2.1.0 从像素的邻域内插像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra (callback function version)">ST_MapAlgebra (callback function version)</a> - 可用性：2.1.0 回调函数版本 - 给定一个或多个输入栅格、波段索引和一个用户指定的回调函数，返回单波段栅格。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra (expression version)">ST_MapAlgebra (expression version)</a> - 可用性：2.1.0 表达式版本 - 在给定一两个输入栅格、波段索引和一个或多个用户指定的 SQL 表达式的情况下，返回单波段栅格。</li><li class="listitem"><a class="link" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a> - 可用性：2.1.0  返回栅格的凸包几何形状（不包括 NODATA 像素）。</li><li class="listitem"><a class="link" href="#RT_ST_MinDist4ma" title="ST_MinDist4ma">ST_MinDist4ma</a> - 可用性：2.1.0 返回感兴趣像素与具有值的相邻像素之间的最小距离（以像素数为单位）的栅格处理函数。</li><li class="listitem"><a class="link" href="#ST_MinkowskiSum" title="ST_MinkowskiSum">ST_MinkowskiSum</a> - 可用性：2.1.0 执行 Minkowski sum</li><li class="listitem"><a class="link" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a> - 可用性：2.1.0 返回由 columnx 和 rowy 指定的给定带像素的最接近的非 NODATA 值或以与栅格相同的空间参考坐标系表示的几何点。</li><li class="listitem"><a class="link" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a> - 可用性：2.1.0 返回给定波段像素周围非 NODATA 值的二维双精度数组，该给定波段像素由 columnX 和 rowY 或以与栅格相同的空间参考坐标系表示的几何点指定。</li><li class="listitem"><a class="link" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a> - 可用性：2.1.0 返回说明栅格是否对齐的文本，如果未对齐，则说明原因。</li><li class="listitem"><a class="link" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a> - 可用性：2.1.0 确定表面方向</li><li class="listitem"><a class="link" href="#RT_ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - 可用性：2.1.0 如果栅格 rastA 和 rastB 相交，但其中一个不完全包含另一个，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a> - 可用性：2.1.0 返回像素表示的区域的质心（点几何）。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - 可用性：2.1.0 返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a> - 可用性：2.1.0 返回像素左上角的点几何形状。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a> - 可用性：2.1.0 返回栅格波段的每个像素的点几何图形以及每个像素的值、X 和 Y 栅格坐标。 点几何的坐标是像素的左上角。</li><li class="listitem"><a class="link" href="#RT_ST_PixelOfValue" title="ST_PixelOfValue">ST_PixelOfValue</a> - 可用性：2.1.0 获取值等于搜索值的像素的列x、行y坐标。</li><li class="listitem"><a class="link" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a> - 可用性：2.1.0 从 GeoHash 字符串返回一个点。</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoord" title="ST_RasterToWorldCoord">ST_RasterToWorldCoord</a> - 可用性：2.1.0 在给定列和行的情况下，以几何 X 和 Y（经度和纬度）形式返回栅格的左上角。 列和行从 1 开始。</li><li class="listitem"><a class="link" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a> - 可用性：2.1.0 需要 GDAL 1.6.1+ 将栅格大小调整为新的宽度/高度</li><li class="listitem"><a class="link" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a> - 可用性：2.1.0 返回一个计算出的数字高程模型（DEM）的 '粗糙度' 的栅格。</li><li class="listitem"><a class="link" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a> - 可用性：2.1.0 返回通过设置给定波段的值而产生的修改后的栅格。</li><li class="listitem"><a class="link" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a> - 可用性：2.1.0 使用 Douglas-Peucker 算法返回给定 TopoGeometry 的“简化”几何版本。</li><li class="listitem"><a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> - 可用性：2.1.0 从几何体计算直骨架</li><li class="listitem"><a class="link" href="#RT_ST_Summary" title="ST_Summary">ST_Summary</a> - 可用性：2.1.0 返回栅格内容的文本摘要。</li><li class="listitem"><a class="link" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a> - 可用性：2.1.0 返回一个计算出的地形位置指数（Topographic Position Index）的栅格。</li><li class="listitem"><a class="link" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a> - 可用性：2.1.0 返回具有计算的地形坚固性指数的栅格。</li><li class="listitem"><a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> - 可用性：2.1.0 对多边形或多面体表面执行曲面细分，并以 TIN 或 TINS 集合的形式返回</li><li class="listitem"><a class="link" href="#RT_ST_Tile" title="ST_Tile">ST_Tile</a> - 可用性：2.1.0 返回根据输出栅格的所需维度分割输入栅格而产生的一组栅格。</li><li class="listitem"><a class="link" href="#RT_ST_Touches" title="ST_Touches">ST_Touches</a> - 可用性：2.1.0 如果栅格 rastA 和 rastB 至少有一个共同点但它们的内部不相交，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 可用性：2.1.0 引入了 ST_Union(rast, unionarg) 变体。 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#RT_ST_Within" title="ST_Within">ST_Within</a> - 可用性：2.1.0 如果栅格 rastA 中没有点位于栅格 rastB 的外部且 rastA 的内部至少有一个点位于 rastB 的内部，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoord" title="ST_WorldToRasterCoord">ST_WorldToRasterCoord</a> - 可用性：2.1.0 给定几何 X 和 Y（经度和纬度）或以栅格的空间参考坐标系表示的点几何，将左上角作为列和行返回。</li><li class="listitem"><a class="link" href="#Set_Geocode_Setting" title="Set_Geocode_Setting">Set_Geocode_Setting</a> - 可用性：2.1.0 设置影响地理编码器功能行为的设置。</li><li class="listitem"><a class="link" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a> - 可用性：2.1.0 更改用户指定的列和表中所有栅格的 SRID。</li><li class="listitem"><a class="link" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a> - 可用性：2.1 清除拓扑几何的内容。</li><li class="listitem"><a class="link" href="#postgis_backend" title="postgis.backend">postgis.backend</a> - 可用性：2.1.0 为 GEOS 和 SFCGAL 重叠的功能提供服务的后端。 选项：geos 或 sfcgal。 默认为geos。</li><li class="listitem"><a class="link" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a> - 可用性：2.1.0 返回正在使用的 SFCGAL 版本</li></ul></div><p>PostGIS 的功能增强 2.1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> - 增强：2.1.0 添加了对 addbandarg 的支持。 返回一个栅格，其中在给定索引位置添加了给定类型的新波段和给定初始值。 如果未指定索引，则将带添加到末尾。</li><li class="listitem"><a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> - 增强：2.1.0 添加了对新的 out-db波段的支持。 返回一个栅格，其中在给定索引位置添加了给定类型的新波段和给定初始值。 如果未指定索引，则将带添加到末尾。</li><li class="listitem"><a class="link" href="#RT_ST_AsBinary" title="ST_AsBinary/ST_AsWKB">ST_AsBinary/ST_AsWKB</a> - 增强：2.1.0 添加outasin 返回栅格的熟知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 增强：针对 GML 3 引入了 2.1.0 id 支持。 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - 增强：2.1.0 使用 ST_MapAlgebra() 并添加可选的 interpolate_nodata 函数参数 返回高程栅格波段的坡向（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - 增强：引入了 2.1.0 三角函数支持 返回几何图形的边界。</li><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - 增强：2.1.0 用 C 重写 Returns the raster clipped by the input geometry. If band number is not specified, all bands are processed. If crop is not specified or TRUE, the output raster is cropped. If touched is set to TRUE, then touched pixels are included, otherwise only if the center of the pixel is in the geometry it is included.</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - 增强：2.1.0 提高了地理速度。 有关详细信息，请参阅使地理更快。 测试两个几何图形是否在给定距离内</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - 增强：2.1.0 引入了对弯曲几何形状的支持。 测试两个几何图形是否在给定距离内</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 增强：2.1.0 提高了地理速度。 有关详细信息，请参阅使地理更快。 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 增强：2.1.0 - 引入了对弯曲几何形状的支持。 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a> - 增强：2.1.0 添加格式 2 栅格处理函数，用于计算邻域中唯一像素值的数量。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 增强：2.1.0 速度更快。重新实现为原生C语言。 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - 增强：2.1.0 使用 ST_MapAlgebra() 并添加可选的 interpolate_nodata 函数参数 使用提供的方位角、高度、亮度和比例输入返回高程栅格带的假设照明。</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - 增强：2.1.0添加了对几何集合和多点的支持。 尝试在不丢失顶点的情况下使无效几何体有效。</li><li class="listitem"><a class="link" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a> - 增强：2.1.0 添加格式 2 计算邻域中最大像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a> - 增强：2.1.0 添加格式 2 计算邻域中平均像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a> - 增强：2.1.0 添加格式 2 计算邻域中最小像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - 增强：2.1.0 添加了 except_nodata_value 可选参数。 返回包围栅格带的每个像素的多边形几何图形以及每个像素的值、X 和 Y 栅格坐标。</li><li class="listitem"><a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a> - 增强：2.1.0 提高速度（完全基于 C）并且确保返回的多边形有效。 返回由具有非无数据值的像素值的像素并集形成的多多边形几何体。 如果未指定波段 编号，则 波段 编号默认为 1。</li><li class="listitem"><a class="link" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a> - 增强：2.1.0 添加格式 2 计算邻域中像素值范围的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - 增强：2.1.0 添加聚合变体 如果栅格具有相同的倾斜、比例、空间参考和偏移（像素可以放在同一网格上而不切割成像素），则返回 true；如果没有注意细节问题，则返回 false。</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - 增强：2.1.0 引入了对地理的支持。 返回修改后的几何图形/地理，其线段不长于给定距离。</li><li class="listitem"><a class="link" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a> - 增强：2.1.0 添加 ST_SetGeoReference(raster, double precision, ...) 变体 在一次调用中设置 Georeference 6 地理配准参数。 数字应该用空格分隔。 接受 GDAL 或 ESRI 格式的输入。 默认为 GDAL。</li><li class="listitem"><a class="link" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> - 增强：2.1.0 ST_SetValue() 的 几何变体现在支持任何几何类型，而不仅仅是点。 几何变体是 ST_SetValues() 的 geomval[] 变体的包装 返回修改后的栅格，其结果是将给定波段中的值设置为指定列x、行y像素或与特定几何图形相交的像素。波段编号从1开始，如果未指定波段，则默认为1。</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - 增强：2.1.0 使用 ST_MapAlgebra() 并添加可选units、scale、interpolate_nodata 函数参数 返回高程栅格带的坡度（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> - 增强：2.1.0 添加格式 2 计算邻域中像素值的标准偏差的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a> - 增强：2.1.0 添加格式 2 栅格处理函数，计算邻域中所有像素值的总和。</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - 增强：添加了 S 标志以指示其是否具有 2.1.0 空间参考系统 返回几何内容的文本摘要。</li><li class="listitem"><a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> - 增强：2.1.0 添加 ST_Transform(rast,alignto) 变体 使用指定的重采样算法将已知空间参考系统中的栅格重新投影到另一个已知空间参考系统。 选项有 NearestNeighbor、Bilinear、Cubic、CubicSpline、Lanczos（默认为 NearestNeighbor）。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 增强：2.1.0 提高速度（完全基于 C）。 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 增强：2.1.0 ST_Union(rast)（变体 1）合并所有输入栅格的所有波段。 PostGIS 的早期版本采用第一个波段。 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 增强：2.1.0 ST_Union(rast, uniontype)（变体 4）合并所有输入栅格的所有波段。 将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> - 增强：2.1.0添加了采用现有TopoGeometry的版本。 将简单几何图形转换为拓扑几何图形。</li></ul></div><p>PostGIS 中的功能发生变化 2.1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - 更改：2.1.0 在之前的版本中，返回值以弧度为单位。 现在，返回值默认为度数 返回高程栅格波段的坡向（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> - 更改：2.1.0。 在 2.0.x 之前，这称为 ST_Estimated_Extent。 返回空间表的估计范围。</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - 更改： 2.1.0 在 2.0.x 期间，它被称为ST_Force_2D。 强制几何图形进入“二维模式”。</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - 更改： 2.1.0 在 2.0.x 期间，它被称为 ST_Force_3D。 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</li><li class="listitem"><a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a> - 更改： 2.1.0 。在 2.0.x 期间，它被称为ST_Force_3DM。 强制几何图形进入 XYM 模式。</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - 更改： 2.1.0。在 2.0.x 期间，它被称为 ST_Force_3DZ。 强制几何图形进入 XYZ 模式。</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a> - 更改： 2.1.0。在 2.0.x 期间，它被称为ST_Force_4D。 强制几何图形进入XYZM模式。</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - 更改： 2.1.0 。在 2.0.x 期间，它被称为ST_Force_Collection。 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - 更改：2.1.0 在之前的版本中，方位角和高度以弧度表示。 现在，方位角和高度以度表示 使用提供的方位角、高度、亮度和比例输入返回高程栅格带的假设照明。</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a> - 更改：2.1.0。 在 2.0.x 之前，这称为 ST_Line_Interpolate_Point。 返回沿线在百分比指示位置的插值点。</li><li class="listitem"><a class="link" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> - 更改：2.1.0。 在 2.0.x 之前，这称为 ST_Line_Locate_Point。 返回线上最接近点的分数位置。</li><li class="listitem"><a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a> - 更改：2.1.0。 在 2.0.x 之前，这被称为 ST_Line_Substring。 返回两个小数位置之间的直线部分。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - 更改：2.1.1 更改了 except_nodata_value 的行为。 返回栅格波段的每个像素的质心（点几何）以及每个像素的值、X 和 Y 栅格坐标。 点几何是像素表示的区域的质心。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a> - 更改：2.1.1 更改了 except_nodata_value 的行为。 返回栅格波段的每个像素的点几何图形以及每个像素的值、X 和 Y 栅格坐标。 点几何的坐标是像素的左上角。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - 更改：2.1.1 更改了 except_nodata_value 的行为。 返回包围栅格带的每个像素的多边形几何图形以及每个像素的值、X 和 Y 栅格坐标。</li><li class="listitem"><a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a> - 更改：2.1.0 在之前的版本中有时会返回多边形，更改为始终返回多多边形。 返回由具有非无数据值的像素值的像素并集形成的多多边形几何体。 如果未指定波段 编号，则 波段 编号默认为 1。</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a> - 更改：2.1.0 在之前的版本中，这称为 ST_Raster2WorldCoordX 返回栅格、列和行左上角的几何 X 坐标。 列和行的编号从 1 开始。</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a> - 更改：2.1.0 在之前的版本中，这称为 ST_Raster2WorldCoordY 返回栅格、列和行的左上角的几何 Y 坐标。 列和行的编号从 1 开始。</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - 更改：2.1.0 适用于没有 SRID 的栅格 通过仅调整栅格的比例（或像素大小）来重新采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline、 Lanczos、Max或Min重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a> - 更改：2.1.0 适用于没有 SRID 的栅格 通过仅调整栅格的倾斜（或旋转参数）来重采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - 更改：2.1.0 由于引入了地理支持，使用 ST_Segmentize('LINESTRING(1 2, 3 4)', 0.5) 会导致不明确的函数错误。 输入需要正确键入为几何或地理。 使用 ST_GeomFromText、ST_GeogFromText 或转换为所需类型（例如 ST_Segmentize('LINESTRING(1 2, 3 4)'::geometry, 0.5) ) ） 返回修改后的几何图形/地理，其线段不长于给定距离。</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - 更改：2.1.0 在之前的版本中，返回值以弧度为单位。 现在，返回值默认为度数 返回高程栅格带的坡度（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - 更改：2.1.0 适用于没有 SRID 的栅格 通过将栅格捕捉到网格来重采样栅格。 新的像素值是使用NearestNeighbor（英语或美式拼写）、Bilinear, Cubic, CubicSpline 或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a> - 更改：2.1.0 在之前的版本中，这称为 ST_World2RasterCoordX 返回栅格中点几何 (pt) 的列或以栅格世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a> - 更改：2.1.0 在之前的版本中，这称为 ST_World2RasterCoordY 返回点几何图形 (pt) 的栅格中的行或以栅格的世界空间参考系表示的 X 和 Y 世界坐标 (xw, yw)。</li></ul></div></section><section class="section" id="idm52014"><div class="titlepage"><div><div><h3 class="title">13.12.12. PostGIS 新增功能或增强功能（2.0）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 2.0</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#RT_Raster_Intersect" title="&amp;&amp;">&amp;&amp;</a> - 可用性: 2.0.0 如果 A 的边界框与 B 的边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - 可用性: 2.0.0 如果 A 的 n 维边界框与 B 的 n 维边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a> - 可用性：2.0.0——KNN 仅适用于 PostgreSQL 9.1+ 返回 A 和 B 边界框之间的 2D 距离。</li><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - 可用性：2.0.0——弱 KNN 根据几何质心距离而不是真实距离提供最近邻。 点的结果精确，所有其他类型的结果不精确。 适用于 PostgreSQL 9.1+ 返回 A 和 B 之间的 2D 距离。</li><li class="listitem"><a class="link" href="#RT_Raster_Contained" title="@">@</a> - 可用性：2.0.0 raster@raster、raster@geometry 引入 如果 A 的边界框包含在 B 的边界框中，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#RT_Raster_Contained" title="@">@</a> - 可用性：2.0.5 geometry @ raster引入  如果 A 的边界框包含在 B 的边界框中，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#AddEdge" title="AddEdge">AddEdge</a> - 可用性: 2.0.0 使用指定的线串几何将线串边添加到边表，并将关联的起点和终点添加到指定拓扑方案的点节点表，并返回新（或现有）边的edgeid。</li><li class="listitem"><a class="link" href="#AddFace" title="AddFace">AddFace</a> - 可用性: 2.0.0 将面基元注册到拓扑并获取其标识符。</li><li class="listitem"><a class="link" href="#AddNode" title="AddNode">AddNode</a> - 可用性: 2.0.0 将点节点添加到指定拓扑模式的节点表中，并返回新节点的nodeid。 如果点已经作为节点存在，则返回现有的nodeid。</li><li class="listitem"><a class="link" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a> - 可用性: 2.0.0 将栅格列标记为另一栅格列的概述。</li><li class="listitem"><a class="link" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a> - 可用性: 2.0.0 将栅格约束添加到已加载的栅格表中，用于特定列，该列约束了空间参考、比例、块大小、对齐、波段、波段类型以及一个标志，用于表示栅格列是否被规则地分块。表必须加载数据才能推断出约束。如果约束设置成功，则返回 true，否则会发出通知。</li><li class="listitem"><a class="link" href="#AsGML" title="AsGML">AsGML</a> - 可用性: 2.0.0  返回拓扑几何的 GML 表示形式。</li><li class="listitem"><a class="link" href="#CopyTopology" title="CopyTopology">CopyTopology</a> - 可用性: 2.0.0 将拓扑（节点、边、面、层和拓扑几何）的副本复制到新模式中</li><li class="listitem"><a class="link" href="#RT_DropOverviewConstraints" title="DropOverviewConstraints">DropOverviewConstraints</a> - 可用性: 2.0.0 取消栅格列作为另一栅格列概览的标记。</li><li class="listitem"><a class="link" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a> - 可用性: 2.0.0 删除引用栅格表列的 PostGIS 栅格约束。 如果您需要重新加载数据或更新栅格列数据，则非常有用。</li><li class="listitem"><a class="link" href="#Drop_Indexes_Generate_Script" title="Drop_Indexes_Generate_Script">Drop_Indexes_Generate_Script</a> - 可用性: 2.0.0 生成一个脚本，删除 Tiger 架构和用户指定架构上的所有非主键和非唯一索引。 如果未指定架构，则默认架构为 Tiger_data。</li><li class="listitem"><a class="link" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a> - 可用性: 2.0.0 生成一个脚本，该脚本删除指定架构中以state缩写为前缀的所有表。 如果未指定架构，则默认架构为 Tiger_data。</li><li class="listitem"><a class="link" href="#Geocode_Intersection" title="Geocode_Intersection">Geocode_Intersection</a> - 可用性: 2.0.0 接收 2 条相交的街道以及state、city、zip，并输出位于交叉路口的第一个交叉街道上的一组可能位置，还包括一个 geomout 作为 NAD 83 经纬度中的点位置，一个标准化地址 (addy ）每个位置以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 可以选择传入最大结果，默认为 10。使用 Tiger 数据（edges、faces、addr）、PostgreSQL 模糊字符串匹配（soundex、levenshtein）。</li><li class="listitem"><a class="link" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a> - 可用性: 2.0.0 查找与给定点相交的边的边 ID。</li><li class="listitem"><a class="link" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a> - 可用性: 2.0.0 查找与给定点相交的面。</li><li class="listitem"><a class="link" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a> - 可用性: 2.0.0 查找某个点位置处节点的节点 ID。</li><li class="listitem"><a class="link" href="#GetNodeEdges" title="GetNodeEdges">GetNodeEdges</a> - 可用性：2.0  返回与给定节点相关的一组有序边。</li><li class="listitem"><a class="link" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a> - 可用性: 2.0.0  返回按顺序排列的边标识符集合，这些标识符是通过沿给定边的一侧行走时遇到的。</li><li class="listitem"><a class="link" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a> - 可用性: 2.0.0 返回一组 topoelement 对象，其中包含给定 TopoGeometry（原始元素）的拓扑 element_id、element_type。</li><li class="listitem"><a class="link" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a> - 可用性: 2.0.0 返回拓扑表中给定拓扑名称的拓扑的 SRID。</li><li class="listitem"><a class="link" href="#Get_Tract" title="Get_Tract">Get_Tract</a> - 可用性: 2.0.0 从几何图形所在的区域表中返回人口普查区域或字段。 默认返回区域的短名称。</li><li class="listitem"><a class="link" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a> - 可用性: 2.0.0 查找具有在地理编码器连接和过滤条件中使用的键列的所有表，这些表缺少这些列上使用的索引，并将添加它们。</li><li class="listitem"><a class="link" href="#Loader_Generate_Census_Script" title="Loader_Generate_Census_Script">Loader_Generate_Census_Script</a> - 可用性: 2.0.0  为指定states的指定平台生成 shell 脚本，该脚本将下载 Tiger 人口普查state区、bg 和 tabblocks 数据表、暂存并加载到 Tiger_data 架构中。 每个状态脚本都作为单独的记录返回。</li><li class="listitem"><a class="link" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a> - 可用性：2.0.0支持Tiger 2010结构化数据并加载人口普查区（tract）、区块组（bg）和区块（tabblocks）表。 为指定平台的指定状态生成 shell 脚本，该脚本将下载 Tiger 数据、暂存并加载到 Tiger_data 模式中。 每个状态脚本都作为单独的记录返回。 最新版本支持 Tiger 2010 结构变化，还加载人口普查区、区块组和区块表。</li><li class="listitem"><a class="link" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a> - 可用性: 2.0.0 查找具有在地理编码器联接中使用的键列的所有表，这些表缺少这些列上的索引，并将输出 SQL DDL 来定义这些表的索引。</li><li class="listitem"><a class="link" href="#TopologyPolygonize" title="Polygonize">Polygonize</a> - 可用性: 2.0.0 查找并注册由拓扑边定义的所有面。</li><li class="listitem"><a class="link" href="#Reverse_Geocode" title="Reverse_Geocode">Reverse_Geocode</a> - 可用性: 2.0.0  获取已知空间参考系统中的几何点并返回一条记录，其中包含理论上可能的地址数组和交叉街道数组。 如果 include_strnum_range = true，则包括交叉街道中的街道范围。</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - 可用性: 2.0.0 返回 g1 上最接近 g2 的 3D 点。 这是 3D 最短线的第一个点。</li><li class="listitem"><a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a> - 可用性: 2.0.0 测试两个 3D 几何图形是否完全在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - 可用性: 2.0.0 测试两个 3D 几何图形是否在给定的 3D 距离内</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - 可用性: 2.0.0 返回两个几何图形之间的 3D 笛卡尔最小距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - 可用性: 2.0.0 检测两个几何图形在 3D 空间中是否相交 - 仅适用于点、线串、多边形、多面体曲面（区域）</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - 可用性: 2.0.0 返回两个几何体之间的 3D 最长直线</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - 可用性: 2.0.0 返回两个几何图形之间的 3D 笛卡尔最大距离（基于空间参考）（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - 可用性: 2.0.0 返回两个几何图形之间的 3D 最短线</li><li class="listitem"><a class="link" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a> - 可用性：2.0  添加新边，如果这样做会分割面，则修改原始面并添加新面。</li><li class="listitem"><a class="link" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a> - 可用性：2.0  添加新边，如果这样做会分割一个面，请删除原始面并用两个新面替换它。</li><li class="listitem"><a class="link" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> - 可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。  以指定的 GDAL 栅格格式返回栅格图块。 栅格格式是编译库支持的格式之一。 使用 ST_GDALDrivers() 获取您的库支持的格式列表。</li><li class="listitem"><a class="link" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a> - 可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。  将栅格图块选定的波段作为单个联合摄影导出组 (JPEG) 图像（字节数组）返回。 如果未指定波段且有 1 个或 3 个以上波段，则仅使用第一个波段。 如果只有 3 个波段，则使用所有 3 个波段并将其映射到 RGB。</li><li class="listitem"><a class="link" href="#ST_AsLatLonText" title="ST_AsLatLonText">ST_AsLatLonText</a> - 可用性：2.0 返回给定点的度、分、秒表示形式。</li><li class="listitem"><a class="link" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a> - 可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。  将栅格图块选定的波段作为单个便携式网络图形 (PNG) 图像（字节数组）返回。 如果栅格中有 1、3 或 4 个波段且未指定波段，则使用所有波段。 如果有 2 个以上或多于 4 个波段且未指定波段，则仅使用波段 1。 波段映射到 RGB 或 RGBA 空间。</li><li class="listitem"><a class="link" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> - 可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。  将 PostGIS 几何图形转换为 PostGIS 栅格。</li><li class="listitem"><a class="link" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a> - 可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。  将栅格选定的波段作为单个 TIFF 图像（字节数组）返回。 如果未指定波段或栅格中不存在任何指定波段，则将尝试使用所有波段。</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - 可用性： 2.0.0： ISO-IEC-19776-1.2-X3DEncodings-XML 返回 X3D xml 节点元素格式的几何图形：ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - 可用性: 2.0.0  返回高程栅格波段的坡向（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#RT_ST_Band" title="ST_Band">ST_Band</a> - 可用性: 2.0.0 返回现有栅格的一个或多个波段作为新栅格。 对于从现有栅格构建新栅格非常有用。</li><li class="listitem"><a class="link" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a> - 可用性: 2.0.0 如果波段仅填充无数据值，则返回 true。</li><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - 可用性: 2.0.0  Returns the raster clipped by the input geometry. If band number is not specified, all bands are processed. If crop is not specified or TRUE, the output raster is cropped. If touched is set to TRUE, then touched pixels are included, otherwise only if the center of the pixel is in the geometry it is included.</li><li class="listitem"><a class="link" href="#ST_CollectionHomogenize" title="ST_CollectionHomogenize">ST_CollectionHomogenize</a> - 可用性: 2.0.0 返回几何集合的最简单表示。</li><li class="listitem"><a class="link" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a> - 可用性: 2.0.0 计算包含所有输入几何顶点的可能凹几何</li><li class="listitem"><a class="link" href="#RT_ST_Count" title="ST_Count">ST_Count</a> - 可用性: 2.0.0  返回栅格或栅格覆盖范围的给定波段中的像素数。 如果未指定 band，则默认为 band 1。如果 except_nodata_value 设置为 true，则仅计算不等于 nodata 值的像素。</li><li class="listitem"><a class="link" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a> - 可用性：2.0  将几何图形集合添加到给定的空拓扑并返回详细说明成功的消息。</li><li class="listitem"><a class="link" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a> - 可用性: 2.0.0 栅格处理函数，用于计算邻域中唯一像素值的数量。</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - 可用性: 2.0.0 返回 X 轴和 Y 轴转换的几何图形版本。</li><li class="listitem"><a class="link" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> - 可用性：2.0.0 - 需要 GDAL 
&gt;= 1.6.0。  通过 GDAL 返回 PostGIS 支持的栅格格式列表。 ST_AsGDALRaster 仅可使用 can_write=True 的格式</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a> - 可用性：2.0.0需要 JSON-C 0.9 或更高版本 将几何图形的 geojson 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a> - 可用性：2.0  返回一组有序的边，这些边界绑定了aface。</li><li class="listitem"><a class="link" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a> - 可用性: 2.0.0 如果不存在具有给定波段编号的波段，则返回 true。 如果未指定波段号，则假定波段号为 1。</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - 可用性: 2.0.0  使用提供的方位角、高度、亮度和比例输入返回高程栅格带的假设照明。</li><li class="listitem"><a class="link" href="#RT_ST_Histogram" title="ST_Histogram">ST_Histogram</a> - 可用性: 2.0.0  返回一组记录，总结了栅格或栅格覆盖数据分布，其中包括分离的分箱范围。如果未指定，将自动计算分箱数。</li><li class="listitem"><a class="link" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a> - 可用性: 2.0.0 返回最接近点的几何图形的插值测量值。</li><li class="listitem"><a class="link" href="#RT_ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - 可用性: 2.0.0 如果栅格为空（宽度 = 0 且高度 = 0），则返回 true。 否则，返回 false。</li><li class="listitem"><a class="link" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a> - 可用性: 2.0.0 返回 valid_detail 行，说明几何图形是否有效或无效，说明原因和位置。</li><li class="listitem"><a class="link" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a> - 有效性：2.0 版本正在接受标记。 返回说明几何图形是否有效或无效原因的文本。</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - 可用性：2.0.0 - 引入了对 LineString 输入元素的支持 从Point, MultiPoint,或LineString geometries创建LineString。</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - 可用性: 2.0.0 尝试在不丢失顶点的情况下使无效几何体有效。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - 可用性: 2.0.0  1 栅格波段版本：通过对输入栅格波段和提供的像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - 可用性: 2.0.0  2 栅格波段版本：通过对提供的两个输入栅格波段和像素类型应用有效的 PostgreSQL 代数运算来创建新的单波段栅格。 如果未指定波段编号，则假定每个栅格的波段 1。 生成的栅格将在第一个栅格定义的网格上对齐（比例、倾斜和像素角），并具有由“extenttype”参数定义的范围。 “extenttype”的值可以是：INTERSECTION、UNION、FIRST、SECOND。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - 可用性: 2.0.0 1 波段版本 - 通过在输入栅格波段和提供的像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - 可用性: 2.0.0 2 波段版本 - 通过在提供的 2 个输入栅格波段和像素类型上应用有效的 PostgreSQL 函数来创建新的单波段栅格。 如果未指定波段，则假定为波段 1。 如果未指定，范围类型默认为 INTERSECTION。</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> - 可用性: 2.0.0  1-波段版本：使用用户定义的 PostgreSQL 函数映射代数最近邻。 返回一个栅格，其值是涉及输入栅格波段值的邻域的 PLPGSQL 用户函数的结果。</li><li class="listitem"><a class="link" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a> - 可用性: 2.0.0 计算邻域中最大像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a> - 可用性: 2.0.0 计算邻域中平均像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a> - 可用性: 2.0.0 计算邻域中最小像素值的栅格处理函数。</li><li class="listitem"><a class="link" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a> - 可用性：2.0 通过删除连接两条边的节点、修改第一条边并删除第二条边来修复两条边。 返回已删除节点的 id。</li><li class="listitem"><a class="link" href="#ST_MoveIsoNode" title="ST_MoveIsoNode">ST_MoveIsoNode</a> - 可用性: 2.0.0  在拓扑结构中将一个孤立节点从一个点移动到另一个点。如果新的apoint几何对象已存在作为一个节点，则会抛出错误。返回移动的描述。</li><li class="listitem"><a class="link" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a> - 可用性：2.0 通过删除连接两条边的节点、删除两条边并用方向与提供的第一条边相同的边替换它们来修复两条边。</li><li class="listitem"><a class="link" href="#ST_Node" title="ST_Node">ST_Node</a> - 可用性: 2.0.0 节点是线的集合。</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - 可用性: 2.0.0 返回多面体曲面上的面数。 对于非多面体几何形状将返回 null。</li><li class="listitem"><a class="link" href="#ST_OffsetCurve" title="ST_OffsetCurve">ST_OffsetCurve</a> - 可用性：2.0 返回距输入线给定距离和方向的偏移线。</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - 可用性: 2.0.0 返回多边形曲面（PolyhedralSurface）的第 N 个几何体（面）。</li><li class="listitem"><a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a> - 可用性 2.0.0：引入了对地理的支持 返回多边形几何或地理的边界长度。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a> - 可用性: 2.0.0 返回限定特定行和列的像素的多边形几何形状。</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - 可用性: 2.0.0 返回包围栅格带的每个像素的多边形几何图形以及每个像素的值、X 和 Y 栅格坐标。</li><li class="listitem"><a class="link" href="#ST_Project" title="ST_Project">ST_Project</a> - 可用性: 2.0.0 返回从起点按距离和方位角（方位角）投影的点。</li><li class="listitem"><a class="link" href="#RT_ST_Quantile" title="ST_Quantile">ST_Quantile</a> - 可用性: 2.0.0  计算样本或总体上下文中栅格或栅格表覆盖范围的分位数。 因此，可以检查某个值是否位于栅格的 25%、50%、75% 百分位处。</li><li class="listitem"><a class="link" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a> - 可用性: 2.0.0 计算邻域中像素值范围的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a> - 可用性: 2.0.0  创建由从原始数据重新分类的波段类型组成的新栅格。 nband 是要更改的波段。 如果未指定 nband，则假定为 1。所有其他波段均按原样返回。 使用案例：将 16BUI 波段转换为 8BUI 等，以便更简单地呈现为可视格式。</li><li class="listitem"><a class="link" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a> - 可用性: 2.0.0 测试 DE-9IM 交集矩阵是否与交集矩阵模式匹配</li><li class="listitem"><a class="link" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a> - 可用性：2.0  删除一条边，如果该边将两个面分开，则删除一个面并修改另一个面以覆盖两个面的空间。</li><li class="listitem"><a class="link" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a> - 可用性：2.0  删除一条边，如果删除的边将两个面分开，则删除原始面并用新面替换它们。</li><li class="listitem"><a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> - 可用性：2.0.0 需要 GDAL 1.6.1+ 重采样一个栅格图像，可以指定重新采样算法、新的尺寸、任意的栅格角点，以及一组栅格地理参考属性，这些属性可以自己定义，也可以从另一个栅格图像中借用。</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - 可用性：2.0.0 需要 GDAL 1.6.1+ 通过仅调整栅格的比例（或像素大小）来重新采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline、 Lanczos、Max或Min重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a> - 可用性：2.0.0 需要 GDAL 1.6.1+ 通过仅调整栅格的倾斜（或旋转参数）来重采样栅格。 新的像素值是使用 NearestNeighbor（英语或美式拼写）、Bilinear、Cubic、CubicSpline或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - 可用性: 2.0.0 如果栅格具有相同的倾斜、比例、空间参考和偏移（像素可以放在同一网格上而不切割成像素），则返回 true；如果没有注意细节问题，则返回 false。</li><li class="listitem"><a class="link" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a> - 可用性: 2.0.0 将带区的 isnodata 标志设置为 TRUE。</li><li class="listitem"><a class="link" href="#ST_SharedPaths" title="ST_SharedPaths">ST_SharedPaths</a> - 可用性: 2.0.0 返回一个集合，其中包含两个输入线串/多线串共享的路径。</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - 可用性: 2.0.0  返回高程栅格带的坡度（默认以度为单位）。 对于分析地形很有用。</li><li class="listitem"><a class="link" href="#ST_Snap" title="ST_Snap">ST_Snap</a> - 可用性: 2.0.0 将输入几何体的线段和顶点捕捉到参考几何体的顶点。</li><li class="listitem"><a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - 可用性：2.0.0 需要 GDAL 1.6.1+ 通过将栅格捕捉到网格来重采样栅格。 新的像素值是使用NearestNeighbor（英语或美式拼写）、Bilinear, Cubic, CubicSpline 或 Lanczos 重采样算法计算的。 默认为NearestNeighbor。</li><li class="listitem"><a class="link" href="#ST_Split" title="ST_Split">ST_Split</a> - 可用性：2.0.0需要GEOS 返回通过将一个几何体分割为另一个几何体而创建的几何体集合。</li><li class="listitem"><a class="link" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> - 可用性: 2.0.0 计算邻域中像素值的标准偏差的栅格处理函数。</li><li class="listitem"><a class="link" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a> - 可用性: 2.0.0 栅格处理函数，计算邻域中所有像素值的总和。</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> - 可用性: 2.0.0  返回一组总结统计信息，包括给定栅格或栅格覆盖的栅格带的计数、总和、均值、标准差、最小值和最大值。如果未指定带号，则假定为带1。</li><li class="listitem"><a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> - 可用性：2.0.0 需要 GDAL 1.6.1+ 使用指定的重采样算法将已知空间参考系统中的栅格重新投影到另一个已知空间参考系统。 选项有 NearestNeighbor、Bilinear、Cubic、CubicSpline、Lanczos（默认为 NearestNeighbor）。</li><li class="listitem"><a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> - 可用性: 2.0.0 计算单个几何体的组件的并集。</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - 可用性: 2.0.0  将一组栅格切片的并集返回为由 1 个或多个波段组成的单个栅格。</li><li class="listitem"><a class="link" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a> - 可用性: 2.0.0  返回一组记录，其中包含像素带值以及具有给定值集的栅格（或栅格覆盖范围）给定带中的像素数计数。 如果未指定波段，则默认为波段 1。默认情况下，不计算节点数据值像素。 输出像素中的所有其他值，并将像素带值四舍五入到最接近的整数。</li><li class="listitem"><a class="link" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a> - 可用性: 2.0.0 返回一组 element_id、类型数组 (topoelements) 的 topoelementarray。</li><li class="listitem"><a class="link" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a> - 可用性: 2.0.0 Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces.</li><li class="listitem"><a class="link" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a> - 可用性: 2.0.0 使用容差并可能分割现有边向现有拓扑添加点。</li><li class="listitem"><a class="link" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a> - 可用性: 2.0.0 使用公差并可能分割现有边/面将多边形添加到现有拓扑。 返回面标识符。</li><li class="listitem"><a class="link" href="#TopologySummary" title="TopologySummary">TopologySummary</a> - 可用性: 2.0.0 获取拓扑名称并提供拓扑中对象类型的汇总总数。</li><li class="listitem"><a class="link" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a> - 可用性: 2.0.0  将tiger数据的定义区域加载到 PostGIS 拓扑中，并将老虎数据转换为拓扑的空间参考，并捕捉到拓扑的精度公差。</li><li class="listitem"><a class="link" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> - 可用性：2.0 将简单几何图形转换为拓扑几何图形。</li><li class="listitem"><a class="link" href="#RT_Raster_Contains" title="~">~</a> - 可用性: 2.0.0 如果 A 的边界框包含 B 的边界框，则返回 TRUE。 使用双精度边界框。</li><li class="listitem"><a class="link" href="#RT_Raster_Same" title="~=">~=</a> - 可用性: 2.0.0 如果 A 的边界框与 B 的边界框相同，则返回 TRUE。</li></ul></div><p>PostGIS 的功能增强 2.0</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - 增强：2.0.0 引入了 use_typmod 参数。 默认创建typmod几何列而不是基于约束。 将geometry（几何）列添加到现有表。</li><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回表示几何图形的 2D 范围的 BOX2D。</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回表示几何体 3D 范围的 BOX3D。</li><li class="listitem"><a class="link" href="#CreateTopology" title="CreateTopology">CreateTopology</a> - 增强：2.0添加接受hasZ的格式 创建一个新的拓扑架构并将其注册到topology.topology 表中。</li><li class="listitem"><a class="link" href="#Geocode" title="Geocode">Geocode</a> - 增强功能：2.0.0支持Tiger 2010结构化数据并修改了一些逻辑以提高地理编码的速度和准确性，并将点从中心线偏移到街道地址所在的一侧。 新参数 max_results 可用于指定最佳结果的数量或仅返回最佳结果。 将地址作为字符串（或其他标准化地址）输入，并输出一组可能的位置，其中包括 NAD 83经纬度中的点几何图形、每个位置的标准化地址以及评级。 评级越低，匹配的可能性越大。 结果首先按最低评分排序。 可以选择传入最大结果数，默认为10，以及restrict_region（默认为NULL）</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 以文本形式返回几何的类型。</li><li class="listitem"><a class="link" href="#Populate_Geometry_Columns" title="Populate_Geometry_Columns">Populate_Geometry_Columns</a> - 增强：2.0.0 引入了use_typmod可选参数，允许控制是否使用typmodifiers或检查约束创建列。 确保几何列由类型修饰符定义或具有适当的空间约束。</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 对几何体应用 3D 仿射变换。</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - 增强：2.0.0 - 引入了对 2D 多面体曲面的支持。 返回多边形几何体的面积。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 增强：2.0.0支持更高坐标维度。 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 增强：2.0.0支持地理中的字节序。 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回带有 SRID 元数据的几何图形的扩展已知的二进制 (EWKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - 增强：2.0.0 引入了对地理、多面体曲面、三角形和 TIN 的支持。 使用 SRID 元数据返回几何图形的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 增强： 2.0.0 引入了前缀支持。 引入了 GML3 的选项 4，以允许使用 LineString 而不是线条的 Curve 标记。 引入了对多面体曲面和 TINS 的 GML3 支持。 引入选项 32 来输出该框。 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - 增强：2.0.0 - 添加前缀命名空间，使用默认和命名参数 将几何图形作为 KML 元素返回。</li><li class="listitem"><a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> - 增强：2.0.0 引入了对地理的支持。 返回两点之间直线的基于北方的方位角。</li><li class="listitem"><a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> - 增强：2.0.0 引入了多面体曲面支持和 TIN 支持。当给定空几何时，它不再引发异常。 返回几何图形的拓扑维数。</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回几何组件的一组 geometry_dump行。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回从另一个边界框或几何图形扩展的边界框。</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回几何图形边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 强制几何图形进入“二维模式”。</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 强制几何图形进入 XYZ 模式。 这是 ST_Force3DZ 的别名。</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 强制几何图形进入 XYZ 模式。</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 将几何图形转换为几何集合（GEOMETRYCOLLECTION）。</li><li class="listitem"><a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 强制多边形顶点的方向遵循右手定则。</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - 增强功能：2.0.0支持多面体曲面和 TIN 。 从 GML 表示返回指定的 ST_Geometry 值。 这是 ST_GeomFromGML 的别名</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - 增强：2.0.0 引入了多面体曲面支持和 TIN 支持。 从 GML 表示返回指定的 ST_Geometry 值。 这是 ST_GeomFromGML 的别名</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - 增强功能：2.0.0支持多面体曲面和 TIN 。 从扩展已知的二进制表示 (EWKB) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - 增强功能：2.0.0支持多面体曲面和 TIN 。 从扩展已知的文本表示 (EWKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - 增强功能：2.0.0支持多面体曲面和 TIN 。 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - 增强：2.0.0 引入了多面体曲面支持和 TIN 支持。 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回几何集合的一个元素。</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 以文本形式返回几何图形的 SQL-MM 类型。</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 测试 LineStrings 的起点和终点是否重合。 对于多面体表面测试是否闭合（实心）。</li><li class="listitem"><a class="link" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a> - 增强：2.0：引入了在不指定 SRID 的情况下指定外包矩形的功能。 根据最小和最大坐标创建矩形多边形。</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - 增强：2.0.1 速度提升 尝试在不丢失顶点的情况下使无效几何体有效。</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 返回几何图形中的点数（顶点）。</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 返回几何集合中的元素数量。</li><li class="listitem"><a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a> - 增强：2.0.0 - 添加了对指定边界节点规则的支持。 测试两个几何图形是否具有与交集矩阵模式匹配的拓扑关系，或计算它们的交集矩阵</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 绕原点旋转几何体。</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - 增强：2.0.0 添加了用于指定旋转原点的附加参数。 绕原点旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 绕 X 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 绕 Y 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 绕 Z 轴旋转几何体。</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - 增强功能：引入了2.0.0 对多面体曲面、三角形和三角网的支持。 按给定因子缩放几何图形。</li><li class="listitem"><a class="link" href="#ST_ShiftLongitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a> - 增强功能：2.0.0支持多面体曲面和 TIN 。 在 -180-180 和 0-360 之间移动几何图形的经度坐标。</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - 增强：在 2.0.0 中添加了地理支持 返回几何内容的文本摘要。</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - 增强： 2.0.0 引入了对多面体曲面的支持。 返回坐标转换为不同空间参考系的新几何图形。</li><li class="listitem"><a class="link" href="#RT_ST_Value" title="ST_Value">ST_Value</a> - 增强：2.0.0 添加了 except_nodata_value 可选参数。 返回指定列 x、行 y 像素或特定几何点处给定波段的值。波段编号从 1 开始，如果未指定，则默认为 1。如果将参数 exclude_nodata_value 设置为 false，则所有像素都被认为与 nodata 像素相交并返回其值。如果未传递参数 exclude_nodata_value，则从栅格的元数据中读取该值。</li><li class="listitem"><a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> - 增强：2.0.0 更有效的边缘交叉检测并修复了先前版本中存在的误报。 返回一组 validatetopology_returntype 对象，详细说明拓扑问题。</li></ul></div><p>PostGIS 中的功能发生变化 2.0</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - 更改：2.0.0 此函数不再更新geometry_columns，因为geometry_columns 是从系统目录读取的视图。默认情况下，它也不创建约束，而是使用 PostgreSQL 内置的类型修饰符行为。 因此，例如，使用此函数构建wgs84 POINT 列现在相当于： ALTER TABLE some_table ADD COLUMN geom geometry(Point,4326);  将geometry（几何）列添加到现有表。</li><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - 更改：2.0.0 如果您需要约束的旧行为，请使用默认的use_typmod，但将其设置为 false。 将geometry（几何）列添加到现有表。</li><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - 更改：2.0.0 视图不能再在 Geometry_columns 中手动注册，但是根据几何 Typmod 表几何图形构建并在没有包装器函数的情况下使用的视图将正确注册自身，因为它们继承了父表列的 Typmod 行为。 使用输出其他几何图形的几何函数的视图需要转换为typmod 几何图形，以便这些视图几何列能够在geometry_columns 中正确注册。请参阅。  将geometry（几何）列添加到现有表。</li><li class="listitem"><a class="link" href="#RT_Box3D" title="Box3D">Box3D</a> - 更改：2.0.0 在 2.0 之前的版本中，曾经有 box2d 而不是 box3d。 由于 box2d 是已弃用的类型，因此已更改为 box3d。 返回栅格封闭框的box 3d 表示形式。</li><li class="listitem"><a class="link" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a> - 更改：2.0.0 提供此函数是为了向后兼容。现在，由于 Geometry_columns 现在是针对系统目录的视图，因此您可以使用ALTER TABLE 删除几何列，就像删除任何其他表列一样 从空间表中移除geometry（几何）列。</li><li class="listitem"><a class="link" href="#DropGeometryTable" title="DropGeometryTable">DropGeometryTable</a> - 更改：2.0.0 提供此函数是为了向后兼容。现在，由于 Geometry_columns 现在是针对系统目录的视图，因此您可以使用DROP TABLE删除具有几何列的表，就像任何其他表一样 删除表及其在geometry_columns中的所有引用。</li><li class="listitem"><a class="link" href="#Populate_Geometry_Columns" title="Populate_Geometry_Columns">Populate_Geometry_Columns</a> - 更改：2.0.0 默认情况下，现在使用类型修饰符而不是检查约束来约束几何类型。您仍然可以通过使用新的 use_typmod并将其设置为 false 来使用检查约束行为。 确保几何列由类型修饰符定义或具有适当的空间约束。</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - 更改：2.0.0 在之前的版本中，这曾经被称为 ST_Extent3D 返回几何图形的 3D 边界框的聚合函数。</li><li class="listitem"><a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a> - 更改：2.0.0 在之前的版本中，这曾经被称为 ST_Length3D 返回线性几何体的 3D 长度。</li><li class="listitem"><a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a> - 更改：2.0.0 在之前的版本中，这曾经被称为 ST_MakeBox3D 创建由两个 3D 点几何图形定义的 BOX3D。</li><li class="listitem"><a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a> - 更改：2.0.0 在之前的版本中，这曾经被称为 ST_Perimeter3D 返回多边形几何体的 3D 周长。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 更改：2.0.0 此函数的输入不能是未知的——必须是几何图形。 ST_AsBinary('POINT(1 2)') 等结构不再有效，您将收到 n st_asbinary(unknown) is not unique error。 类似的代码需要更改为 ST_AsBinary('POINT(1 2)'::geometry);。 如果不可能，请安装legacy.sql。 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 更改：2.0.0 使用默认命名参数 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 更改：2.0.0 支持默认参数和命名参数。 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - 更改： 2.0.0 - 添加了对默认参数和命名参数的支持 返回几何体的 SVG 路径数据。</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - 更改：2.0.0 不再适用于单个几何体 MultiLineStrings。 在旧版本的 PostGIS 中，单行 MultiLineString 可以使用此函数并返回终点。 在 2.0.0 中，它像任何其他 MultiLineString 一样返回 NULL。 旧的行为是一个未记录的功能，但是那些假设将数据存储为 LINESTRING 的人可能会在 2.0.0 中遇到这些返回 NULL 的情况。 返回 LineString 或 CircularLineString 的最后一个点。</li><li class="listitem"><a class="link" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> - 更改：2.0.6、2.1.3 - 默认情况下不启用任何驱动程序，除非设置了 GUC 或环境变量 gdal_enabled_drivers。 通过 GDAL 返回 PostGIS 支持的栅格格式列表。 ST_AsGDALRaster 仅可使用 can_write=True 的格式</li><li class="listitem"><a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> - 更改：2.0.0 在 PostGIS 的早期版本中，允许 ST_GeomFromText('GEOMETRYCOLLECTION(EMPTY)') 。 为了更好地符合 SQL/MM 标准，这在 PostGIS 2.0.0 中现在是非法的。 现在应该写成 ST_GeomFromText('GEOMETRYCOLLECTION EMPTY') 从已知的文本表示 (WKT) 返回指定的 ST_Geometry 值。</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - 更改：2.0.0 版本。之前的版本对于奇异几何图形会返回 NULL。现在已更改为在 ST_GeometryN(..,1) 情况下返回几何图形。 返回几何集合的一个元素。</li><li class="listitem"><a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - 已更改：2.0.0 之前的 PostGIS 版本允许ST_GeomFromText（“GEOMETRYCOLLECTION(EMPTY)”）。在 PostGIS 2.0.0 中，这是不正确的，因为它更符合 SQL/MM 标准 检测几何图形是否为空。</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - 更改：2.0.0 重大更改 - 在之前的版本中，将此应用于地理类型的多/多边形将为您提供多边形/多多边形的周长。 在 2.0.0 中，这已更改为返回 0 以符合几何行为。 如果您想要多边形的周长，请使用 ST_Perimeter 返回线性几何体的二维长度。</li><li class="listitem"><a class="link" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a> - 更改：2.0.0 在之前的版本中，这曾经被称为 ST_Locate_Along_Measure。 返回几何上与测量值匹配的点。</li><li class="listitem"><a class="link" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a> - 更改：2.0.0 - 在之前的版本中，这曾经被称为 ST_Locate_Between_Measures。 返回与测量范围匹配的几何图形部分。</li><li class="listitem"><a class="link" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a> - 更改：2.0 - 在之前的版本中，它被错误命名为 ST_ModEdgesSplit 通过沿现有边创建新节点、修改原始边并添加新边来分割边。</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - 更改：2.0.0 在之前的版本中，如果几何图形不是collection/MULTI 类型，则会返回 NULL。 2.0.0 现在对于单个几何图形返回 1，例如 POLYGON、LINESTRING、POINT。 返回几何集合中的元素数量。</li><li class="listitem"><a class="link" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a> - 更改：2.0.0 - 在之前的版本中，它允许传递 MULTIPOLYGON，返回第一个 POLYGON 的内环数量。 返回多边形的内环（孔）数。</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - 更改：2.0.0 不再适用于单个几何multilinestrings。 在旧版本的 PostGIS 中——单行 multilinestring可以与此函数很好地配合并返回起点。 在 2.0.0 中，它像任何其他 multilinestring一样只返回 NULL。 返回几何图形中第一个线串或圆形线串中的第 N 个点。</li><li class="listitem"><a class="link" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a> - 更改：2.0.0。 在 WKTRaster 版本中，这称为 ST_PixelSizeX。 返回像素宽度的 X 分量（以坐标参考系为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a> - 更改：2.0.0。 在 WKTRaster 版本中，这称为 ST_PixelSizeY。 返回像素高度的 Y 分量（以坐标参考系为单位）。</li><li class="listitem"><a class="link" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a> - 更改：2.0.0 在 WKTRaster 版本中，这称为 ST_SetPixelSize。 这在 2.0.0 中发生了变化。 以坐标参考系为单位设置像素的 X 和 Y 大小。 数字单位/像素宽度/高度。</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - 更改：2.0.0 不再适用于单个几何体 MultiLineStrings。 在旧版本的 PostGIS 中，单行 MultiLineString 可以与此函数很好地配合并返回起点。 在 2.0.0 中，它像任何其他 MultiLineString 一样只返回 NULL。 旧的行为是一个未记录的功能，但是那些假设将数据存储为 LINESTRING 的人可能会在 2.0.0 中遇到这些返回 NULL 的情况。 返回 LineString 的第一个点.</li></ul></div></section><section class="section" id="idm52644"><div class="titlepage"><div><div><h3 class="title">13.12.13. PostGIS 新增功能或增强功能（1.5）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 1.5</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - 可用性： 1.5.0 引入了对地理的支持。 如果 A 的 2D 边界框与 B 的 2D 边界框相交，则返回 TRUE。</li><li class="listitem"><a class="link" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a> - 可用性：1.5 返回 libxml2 库的版本号。</li><li class="listitem"><a class="link" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a> - 可用性：1.1.0 沿线性几何形状插值测量值。</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - 可用性：1.5.0支持地理位置。 返回不带 SRID 元数据的几何/地理的 OGC/ISO 已知的二进制 (WKB) 表示形式。</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 可用性：1.5.0支持地理位置。 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 可用性：1.5.0支持地理位置。 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - 可用性：1.5 - 引入了地理支持。 返回不带 SRID 元数据的几何/地理的已知文本 (WKT) 表示形式。</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - 可用性：1.5 - ST_Buffer 已得到增强，以适应各种端接和接缝。 例如，您可能希望将道路线串转换为街道面，并希望将端点视为平面或正方形而不是圆。 添加了地理的薄包装器。  计算覆盖距几何体给定距离内所有点的几何体。</li><li class="listitem"><a class="link" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a> - 可用性：1.1.0 返回 g1 上最接近 g2 的 2D 点。 这是从一个几何体到另一个几何体的最短直线的第一个点。</li><li class="listitem"><a class="link" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a> - 可用性：1.1.0 给定一个几何集合，返回仅包含指定类型元素的多几何图形。</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - 可用性：1.5 - 引入了地理支持。  测试 B 的每个点是否都位于 A 中</li><li class="listitem"><a class="link" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - 可用性：1.1.0 Tests if a geometry is entirely inside a distance of another</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - 可用性：1.5.0 引入了对地理的支持 测试两个几何图形是否在给定距离内</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - 可用性：1.5.0 地理支持在 1.5 中引入。 提高了平面的速度，以更好地处理大型或多个顶点几何图形 返回两个几何或地理值之间的距离。</li><li class="listitem"><a class="link" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a> - 可用性：1.5 - 引入了对除点之外的其他几何类型的支持。 之前的版本仅适用于点。 使用球形地球模型返回两个经度/纬度几何形状之间的最小距离（以米为单位）。</li><li class="listitem"><a class="link" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a> - 可用性：1.5 - 引入了对除点之外的其他几何类型的支持。 之前的版本仅适用于点。 使用球体模型返回两个经度/纬度几何形状之间的最小距离。</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - 可用性：1.1.0 返回几何图形中坐标的一组 geometry_dump 行。</li><li class="listitem"><a class="link" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a> - 可用性：1.5.0 行为更改为输出双精度而不是 float4 返回表示几何图形边界框的几何图形。</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - 可用性：1.5.0 行为更改为输出双精度而不是 float4 坐标。 返回从另一个边界框或几何图形扩展的边界框。</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - 可用性：需要 1.5 libxml2 1.6+ 从 GML 表示返回指定的 ST_Geometry 值。 这是 ST_GeomFromGML 的别名</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - 可用性：需要 1.5 libxml2 1.6+ 将几何图形的 GML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_GeomFromKML" title="ST_GeomFromKML">ST_GeomFromKML</a> - 可用性：1.5，需要 libxml2 2.6+ 将几何图形的 KML 表示形式作为输入并输出 PostGIS 几何对象</li><li class="listitem"><a class="link" href="#ST_HausdorffDistance" title="ST_HausdorffDistance">ST_HausdorffDistance</a> - 可用性：1.1.0 返回两个几何图形之间的Hausdorff 距离。</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 可用性：1.5 引入了对地理数据类型的支持。 计算表示几何 A 和 B 的共享部分的几何。</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 可用性：1.5 引入了对地理的支持。 测试两个几何图形是否相交（它们至少有一个共同点）</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - 可用性：1.5.0 地理支持在 1.5 中引入。 返回线性几何体的二维长度。</li><li class="listitem"><a class="link" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a> - 可用性：1.1.0 返回两个几何图形之间的二维最长线。</li><li class="listitem"><a class="link" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a> - 可用性：1.5 根据最小和最大坐标创建矩形多边形。</li><li class="listitem"><a class="link" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a> - 可用性：1.1.0 返回两个几何图形之间的二维最大距离（以投影单位表示）。</li><li class="listitem"><a class="link" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a> - 可用性：1.1.0 返回两个几何图形之间的 2D 最短线</li><li class="listitem"><a class="link" href="#ST_Geometry_Same" title="~=">~=</a> - 可用性：1.5.0 改变了行为 如果 A 的边界框与 B 的边界框相同，则返回 TRUE。</li></ul></div></section><section class="section" id="idm52742"><div class="titlepage"><div><div><h3 class="title">13.12.14. PostGIS 新增功能或增强功能（1.4）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 1.4</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#Populate_Geometry_Columns" title="Populate_Geometry_Columns">Populate_Geometry_Columns</a> - 可用性：1.4.0 确保几何列由类型修饰符定义或具有适当的空间约束。</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - 可用性：引入了 1.4.0 - ST_Collect（几何）。 ST_Collect已得到增强，可以更快地处理更多几何图形。 从一组几何图形创建 GeometryCollection 或 Multi* 几何图形。</li><li class="listitem"><a class="link" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - 可用性：1.4.0 测试 B 的每个点是否都位于 A 的内部</li><li class="listitem"><a class="link" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a> - 可用性：1.4.0 返回几何图形的 GeoHash 表示形式。</li><li class="listitem"><a class="link" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a> - 有效性：1.4 返回说明几何图形是否有效或无效原因的文本。</li><li class="listitem"><a class="link" href="#ST_LineCrossingDirection" title="ST_LineCrossingDirection">ST_LineCrossingDirection</a> - 有效性：1.4 返回一个数字，指示两个 LineString 的交叉行为</li><li class="listitem"><a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a> - 可用性：1.4.0 返回位于高程 (Z) 范围内的几何图形部分。</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - 可用性：1.4.0 - 引入了 ST_MakeLine(geomarray)。 ST_MakeLine 聚合函数得到增强，可以更快地处理更多点。 从Point, MultiPoint,或LineString geometries创建LineString。</li><li class="listitem"><a class="link" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a> - 可用性：1.4.0 返回包含几何图形的最小圆形多边形。</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - 可用性：1.4.0 - ST_Union 得到增强。 PostgreSQL 中引入了 ST_Union(geomarray) 以及更快的集合聚合。 计算表示输入几何图形的点集并集的几何图形。</li></ul></div></section><section class="section" id="idm52777"><div class="titlepage"><div><div><h3 class="title">13.12.15. PostGIS 新增功能或增强功能（1.3）</h3></div></div></div><p>下面给出的功能是添加或增强的 PostGIS 功能。</p><p>PostGIS 中的新功能 1.3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - 可用性：1.3.2 将几何图形作为 GML 版本 2 或 3 元素返回。</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - 可用性：1.3.4 以GeoJSON格式返回一个几何体或要素。</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - 可用性：1.3.0 将包含曲线的几何图形转换为线性几何图形。</li><li class="listitem"><a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a> - 可用性：1.3.0 将线性几何图形转换为曲线几何图形。</li><li class="listitem"><a class="link" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a> - 可用性：1.3.3 使用Douglas-Peucker算法返回几何图形的简化且有效表示。</li></ul></div></section></section></section><section class="chapter" id="idm52797"><div class="titlepage"><div><div><h1 class="title">Chapter 14. 报告问题</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#idm52799">14.1. 报告软件错误</a></span></li><li><span class="section"><a href="#idm52810">14.2. 报告文档问题</a></span></li></ul></div><section class="section" id="idm52799"><div class="titlepage"><div><div><h2 class="title" style="clear: both">14.1. 报告软件错误</h2></div></div></div><p>有效报告错误是帮助 PostGIS 开发的基本方法。 最有效的错误报告是使 PostGIS 开发人员能够重现它，因此它最好包含触发它的脚本以及有关检测到它的环境的所有信息。 运行 <code class="code">SELECT postgis_full_version()</code> [对于 PostGIS] 和 <code class="code">SELECT version()</code> [对于 postgresql] 可以提取足够好的信息。</p><p>如果您没有使用最新版本，则值得先查看其<a class="link" href="https://git.osgeo.org/gitea/postgis/postgis/raw/branch/master/NEWS" target="_top">版本变更日志</a>，以了解您的错误是否已得到修复。</p><p>使用 <a class="link" href="http://trac.osgeo.org/postgis/" target="_top">PostGIS 错误跟踪器</a>将确保您的报告不会被丢弃，并让您随时了解其处理过程。 在报告新错误之前，请查询数据库以查看它是否是已知错误，如果是，请添加您所掌握的有关它的任何新信息。</p><p>在提交新报告之前，您可能需要阅读 Simon Tatham 关于<a class="link" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">如何有效报告错误</a> 。</p></section><section class="section" id="idm52810"><div class="titlepage"><div><div><h2 class="title" style="clear: both">14.2. 报告文档问题</h2></div></div></div><p>文档应准确反映软件的功能和行为。 如果没有，可能是因为软件错误或文档错误或缺陷。</p><p>文档问题也可以报告给 <a class="link" href="http://trac.osgeo.org/postgis" target="_top">PostGIS bug 跟踪器</a>。</p><p>如果您的修订很简单，只需在新的错误跟踪器问题中对其进行描述，并具体说明其在文档中的位置。</p><p>如果您的更改更广泛，那么补丁绝对是首选。 这是 Unix 上的四步过程（假设您已经安装了 <a class="link" href="https://git-scm.com/" target="_top">git</a> ）：</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>克隆 PostGIS 的 git 存储库。 在 Unix 上，输入：</p><p><span class="command"><strong>git clone https://git.osgeo.org/gitea/postgis/postgis.git</strong></span></p><p>这将存储在 postgis 目录中</p></li><li class="listitem"><p>使用您最喜欢的文本编辑器对文档进行更改。 在 Unix 上，键入（例如）：</p><p><span class="command"><strong>vim doc/postgis.xml</strong></span></p><p>请注意，该文档是用 DocBook XML 而不是 HTML 编写的，因此如果您不熟悉它，请按照文档其余部分的示例进行操作。</p></li><li class="listitem"><p>制作一个包含与文档主副本的差异的补丁文件。 在 Unix 上，输入：</p><p><span class="command"><strong>git diff doc/postgis.xml &gt; doc.patch</strong></span></p></li><li class="listitem"><p>将补丁附加到错误跟踪器中的新问题。</p></li></ol></div></section></section><section class="appendix" id="release_notes"><div class="titlepage"><div><div><h1 class="title">Appendix A. 附录</h1></div><div><h3 class="subtitle"><em>发行说明</em></h3></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="#idm52838">A.1. PostGIS 3.5.2</a></span></li><li><span class="section"><a href="#idm52850">A.2. PostGIS 3.5.1</a></span></li><li><span class="section"><a href="#idm52891">A.3. PostGIS 3.5.0</a></span></li></ul></div><section class="section" id="idm52838"><div class="titlepage"><div><div><h2 class="title" style="clear: both">A.1. PostGIS 3.5.2</h2></div></div></div><p>2025/01/18</p><p>This version requires PostgreSQL 12-17, GEOS 3.8 or higher, and Proj 6.1+. To take advantage of all features, GEOS 3.12+ is needed. To take advantage of all SFCGAL features, SFCGAL 1.5.0+ is needed.</p><section class="simplesect" id="idm52842"><div class="titlepage"><div><div><h3 class="title">Bug Fixes</h3></div></div></div><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5677" target="_top">#5677</a>, Retain SRID during unary union (Paul Ramsey)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5833" target="_top">#5833</a>, pg_upgrade fix for postgis_sfcgal (Regina Obe)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5564" target="_top">#5564</a>, BRIN crash fix and support for parallel in PG17+ (Paul Ramsey, Regina Obe)</p></section></section><section class="section" id="idm52850"><div class="titlepage"><div><div><h2 class="title" style="clear: both">A.2. PostGIS 3.5.1</h2></div></div></div><p>2024/12/22</p><p>This version requires PostgreSQL 12-17, GEOS 3.8 or higher, and Proj 6.1+. To take advantage of all features, GEOS 3.12+ is needed. To take advantage of all SFCGAL features, SFCGAL 1.5.0+ is needed.</p><section class="simplesect" id="idm52854"><div class="titlepage"><div><div><h3 class="title">重大变化</h3></div></div></div><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5677" target="_top">#5677</a>, Retain SRID during unary union (Paul Ramsey)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5792" target="_top">#5792</a>, [topology] Prevent topology corruption with TopoGeo_addPoint near almost collinear edges (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5795" target="_top">#5795</a>, [topology] Fix ST_NewEdgesSplit can cause invalid topology (Björn Harrtell)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5794" target="_top">#5794</a>, [topology] Fix crash in TopoGeo_addPoint (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5785" target="_top">#5785</a>, [raster] ST_MapAlgebra segfaults when expression references a supernumerary rast argument (Dian M Fay)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5787" target="_top">#5787</a>, Check that ST_ChangeEdgeGeom doesn't change winding of rings (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5791" target="_top">#5791</a>, Add legacy stubs for old transaction functions to allow pg_upgrade (Regina Obe)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5800" target="_top">#5800</a>, PROJ compiled version reading the wrong minor and micro (Regina Obe)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5790" target="_top">#5790</a>, Non-schema qualified calls causing issue with materialized views (Regina Obe)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5812" target="_top">#5812</a>, Performance regression in ST_Within (Paul Ramsey)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5815" target="_top">#5815</a>, Remove hash/merge promise from &lt;&gt; operator (Paul Ramsey)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5823" target="_top">#5823</a>, Build support for Pg18 (Paul Ramsey)</p></section><section class="simplesect" id="idm52880"><div class="titlepage"><div><div><h3 class="title">增强功能</h3></div></div></div><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5782" target="_top">#5782</a>, Improve robustness of min distance calculation (Sandro Santilli)</p><p>[topology] Speedup topology building when closing large rings with many holes (Björn Harrtell)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5810" target="_top">#5810</a>, Update tiger geocoder to handle TIGER 2024 data (Regina Obe)</p></section><section class="simplesect" id="idm52887"><div class="titlepage"><div><div><h3 class="title">重大变化</h3></div></div></div><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5799" target="_top">#5799</a>, make ST_TileEnvelope clip envelopes to tile plane extent (Paul Ramsey)</p></section></section><section class="section" id="idm52891"><div class="titlepage"><div><div><h2 class="title" style="clear: both">A.3. PostGIS 3.5.0</h2></div></div></div><p>2024/09/25</p><p>This version requires PostgreSQL 12-17, GEOS 3.8 or higher, and Proj 6.1+. To take advantage of all features, GEOS 3.12+ is needed. To take advantage of all SFCGAL features, SFCGAL 1.5.0+ is needed.</p><p>非常感谢我们的翻译团队，特别是：</p><p>Dapeng Wang, Zuo Chenwei from HighGo (Chinese Team)</p><p>Teramoto Ikuhiro (Japanese Team)</p><p>Vincent Bre (French Team)</p><section class="simplesect" id="idm52899"><div class="titlepage"><div><div><h3 class="title">重大变化</h3></div></div></div><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5546" target="_top">#5546</a>, TopoGeometry &lt;&gt; TopoGeometry is now ambiguous, to get the old behaviour, assuming your TopoGeometry objects are named tg1 and tg2, use: ( id(tg1) &lt;&gt; id(tg2) OR topology_id(tg1) &lt;&gt; topology_id(tg2) OR layer_id(tg1) &lt;&gt; layer_id(tg2) OR type(tg1) &lt;&gt; type(tg2) ) (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5536" target="_top">#5536</a>, comments are not anymore included in PostGIS extensions (Sandro Santilli)</p><p>xmllint is now required to build comments (Sandro Santilli)</p><p>DocBook5 XSL is now required to build html (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5602" target="_top">#5602</a>, Drop support for GEOS 3.6 and 3.7 (Regina Obe)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5571" target="_top">#5571</a>, Improve ST_GeneratePoints performance, but old seeded pseudo random points will need to be regenerated.</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5596" target="_top">#5596</a>, GH-749, Allow promoting column as an id in ST_AsGeoJson(record,..). Views and materialized views that use the ST_AsGeoJSON(record ..) will need rebuilding to upgrade to new signature (Jan Tojnar)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5496" target="_top">#5496</a>, ST_Clip all variants replaced, will require rebuilding of materialized views that use them (funding from The National Institute for Agricultural and Food Research and Technology (INIA-CSIC)), Regina Obe</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5659" target="_top">#5659</a>, ST_DFullyWithin behaviour has changed to be ST_Contains(ST_Buffer(A, R), B) (Paul Ramsey)</p><p>Remove the WFS_locks extra package. (Paul Ramsey)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5747" target="_top">5747</a>, <a class="link" href="https://github.com/postgis/postgis/pull/776" target="_top">GH-776</a>, ST_Length: Return 0 for CurvePolygon (Dan Baston)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5770" target="_top">5770</a>, support for GEOS 3.13 and RelateNG. Most functionality remains the same, but new GEOS predicate implementation has a few small changes.</p><p>Boundary Node Rule relate matrices might be different when using the "multi-valent end point" rule.</p><p>Relate matrices for situations with invalid MultiPolygons with shared boundaries might be different. Run ST_MakeValid to get valid inputs to feed to the calculation.</p><p>Zero length LineStrings are treated as if they are the equivalent Point object.</p></section><section class="simplesect" id="idm52926"><div class="titlepage"><div><div><h3 class="title">Deprecated signatures</h3></div></div></div><p><a class="link" href="https://github.com/postgis/postgis/pull/761" target="_top">GH-761</a>, ST_StraightSkeleton =
&gt; CG_StraightSkeleton (Loïc Bartoletti)</p><p><a class="link" href="https://git.osgeo.org/gitea/postgis/postgis/pulls/189" target="_top">GH-189</a>, All SFCGAL functions now use the prefix CG_, with the old ones using ST_ being deprecated. (Loïc Bartoletti)</p></section><section class="simplesect" id="idm52932"><div class="titlepage"><div><div><h3 class="title">新特性</h3></div></div></div><p>Improvements in the 'postgis' script: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>new command list-enabled</p></li><li class="listitem"><p>new command list-all</p></li><li class="listitem"><p>command upgrade upgrades all databases that need to be</p></li><li class="listitem"><p>command status reports status of all databases</p></li></ul></div><p> (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5742" target="_top">#5742</a>, expose version of PROJ at compile time (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5721" target="_top">#5721</a>, postgis_topology: Allow sharing sequences between different topologies (Lars Opsahl)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5667" target="_top">#5667</a>, postgis_topology: TopoGeo_LoadGeometry (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5055" target="_top">#5055</a>, add explicit &lt;&gt; geometry operator to prevent non-unique error with &lt;&gt; and != (Paul Ramsey)</p><p>Add ST_HasZ/ST_HasM (Loïc Bartoletti)</p><p><a class="link" href="https://git.osgeo.org/gitea/postgis/postgis/pulls/123" target="_top">GT-123</a>, postgis_sfcgal: CG_YMonotonePartition, CG_ApproxConvexPartition, CG_GreeneApproxConvexPartition and CG_OptimalConvexPartition (Loïc Bartoletti)</p><p><a class="link" href="https://git.osgeo.org/gitea/postgis/postgis/pulls/156" target="_top">GT-156</a>, postgis_sfcgal: CG_Visibility (Loïc Bartoletti)</p><p><a class="link" href="https://git.osgeo.org/gitea/postgis/postgis/pulls/157" target="_top">GT-157</a>, postgis_sfcgal: Add ST_ExtrudeStraightSkeleton (Loïc Bartoletti)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5496" target="_top">#5496</a>, postgis_raster: ST_Clip support for touched (Regina Obe)</p><p><a class="link" href="https://github.com/postgis/postgis/pull/760" target="_top">GH-760</a>, postgis_sfcgal: CG_Intersection, CG_3DIntersects, CG_Intersects, CG_Difference, CG_Union (and aggregate), CG_Triangulate, CG_Area, CG_3DDistance, CG_Distance (Loïc Bartoletti)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5687" target="_top">#5687</a>, Don't rely on search_path to determine postgis schema Fix for PG17 security change (Regina Obe)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5705" target="_top">#5705</a>, <a class="link" href="https://github.com/postgis/postgis/pull/767" target="_top">GH-767</a>, ST_RemoveIrrelevantPointsForView (Sam Peters)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5706" target="_top">#5706</a>, <a class="link" href="https://github.com/postgis/postgis/pull/768" target="_top">GH-768</a>, ST_RemoveSmallParts (Sam Peters)</p></section><section class="simplesect" id="idm52971"><div class="titlepage"><div><div><h3 class="title">增强功能</h3></div></div></div><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5550" target="_top">5550</a>, Fix upgrades from 2.x in sandboxed systems (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/3587" target="_top">#3587</a>, postgis_topology: faster load of big lines in topologies (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5670" target="_top">#5670</a>, postgis_topology: faster ST_CreateTopoGeo (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5531" target="_top">#5531</a>, documentation format upgraded to DocBook 5 (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5543" target="_top">#5543</a>, allow building without documentation (Sandro Santilli)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5596" target="_top">#5596</a>, <a class="link" href="https://github.com/postgis/postgis/pull/749" target="_top">GH-749</a>, Allow promoting column as an id in ST_AsGeoJson(record,..). (Jan Tojnar)</p><p><a class="link" href="https://github.com/postgis/postgis/pull/744" target="_top">GH-744</a>, Don't create docbook.css for the HTML manual, use style.css instead (Chris Mayo)</p><p>Faster implementation of point-in-poly cached index (Paul Ramsey)</p><p>Improve performance of ST_GeneratePoints (Paul Ramsey)</p><p><a class="link" href="https://trac.osgeo.org/postgis/ticket/5361" target="_top">#5361</a>, ST_CurveN, ST_NumCurves and consistency in accessors on curved geometry (Paul Ramsey)</p><p><a class="link" href="https://github.com/postgis/postgis/pull/761" target="_top">GH-761</a>, postgis_sfcgal: Add an optional parameter to CG_StraightSkeleton (was ST_StraightSkeleton) to use m as a distance in result (Hannes Janetzek, Loïc Bartoletti)</p></section></section></section></div></body></html>
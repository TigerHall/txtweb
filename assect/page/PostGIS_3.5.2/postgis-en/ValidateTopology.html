<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>ValidateTopology</title>
    <link rel="stylesheet" type="text/css" href="../style.css"/>
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.2"/>
    <link rel="prev" href="TopologySummary.html" title="TopologySummary"/>
    <link rel="next" href="ValidateTopologyRelation.html" title="ValidateTopologyRelation"/>
  </head>
  <body>
    <header>
      <div class="navheader">
        <table style="width: 100%; ">
          <tr>
            <th style="text-align: center; " colspan="3">ValidateTopology</th>
          </tr>
          <tr>
            <td style="width: 20%; text-align: left; "><a accesskey="p" href="TopologySummary.html">Prev</a> </td>
            <th style="width: 60%; text-align: center; ">9.3. Topology and TopoGeometry Management</th>
            <td style="width: 20%; text-align: right; "> <a accesskey="n" href="ValidateTopologyRelation.html">Next</a></td>
          </tr>
        </table>
      </div>
    </header>
    <div class="refentry" id="ValidateTopology">
      <div class="titlepage"/>
      <div class="refnamediv">
        <h2>Name</h2>
        <p>ValidateTopology — Returns a set of validatetopology_returntype objects detailing issues with topology.</p>
      </div>
      <div class="refsynopsisdiv">
        <h2>Synopsis</h2>
        <div class="funcsynopsis">
          <p><code class="funcdef">setof validatetopology_returntype <strong class="fsfunc">ValidateTopology</strong>(</code>varchar  <var class="pdparam">toponame</var>, geometry <var class="pdparam">bbox</var><code>)</code>;</p>
        </div>
      </div>
      <div class="refsection" id="idm23939">
        <h2>Description</h2>
        <p>
Returns a set of <a class="xref" href="validatetopology_returntype.html" title="validatetopology_returntype">validatetopology_returntype</a> objects
detailing issues with topology, optionally limiting the check to the
area specified by the <code class="varname">bbox</code> parameter.
                </p>
        <p>List of possible errors, what they mean and what the returned ids represent are displayed below:</p>
        <div class="informaltable">
          <table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; ">
            <colgroup>
              <col/>
              <col/>
              <col/>
              <col/>
            </colgroup>
            <thead>
              <tr>
                <th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Error</th>
                <th style="border-right: 1px solid ; border-bottom: 1px solid ; ">id1</th>
                <th style="border-right: 1px solid ; border-bottom: 1px solid ; ">id2</th>
                <th style="border-bottom: 1px solid ; ">Meaning</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">coincident nodes</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of first node.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of second node.</td>
                <td style="border-bottom: 1px solid ; ">
Two nodes have the same geometry.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">edge crosses node</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of the edge.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of the node.</td>
                <td style="border-bottom: 1px solid ; ">
An edge has a node in its interior.
See <a class="xref" href="ST_Relate.html" title="ST_Relate">ST_Relate</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">invalid edge</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of the edge.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
An edge geometry is invalid.
See <a class="xref" href="ST_IsValid.html" title="ST_IsValid">ST_IsValid</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">edge not simple</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of the edge.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
An edge geometry has self-intersections.
See <a class="xref" href="ST_IsSimple.html" title="ST_IsSimple">ST_IsSimple</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">edge crosses edge</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of first edge.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of second edge.</td>
                <td style="border-bottom: 1px solid ; ">
Two edges have an interior intersection.
See <a class="xref" href="ST_Relate.html" title="ST_Relate">ST_Relate</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">edge start node geometry mismatch</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of the edge.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the indicated start node.
                                    </td>
                <td style="border-bottom: 1px solid ; ">
The geometry of the node indicated as the starting node for an edge does
not match the first point of the edge geometry.
See <a class="xref" href="ST_StartPoint.html" title="ST_StartPoint">ST_StartPoint</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">edge end node geometry mismatch</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Identifier of the edge.</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the indicated end node.
                                    </td>
                <td style="border-bottom: 1px solid ; ">
The geometry of the node indicated as the ending node for an edge does
not match the last point of the edge geometry.
See <a class="xref" href="ST_EndPoint.html" title="ST_EndPoint">ST_EndPoint</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">face without edges</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the orphaned face.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
No edge reports an existing face on either of its sides
(left_face, right_face).
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">face has no rings</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the partially-defined face.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
Edges reporting a face on their sides do not form a ring.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">face has wrong mbr</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the face with wrong mbr cache.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
Minimum bounding rectangle of a face does not match minimum bounding
box of the collection of edges reporting the face on their sides.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">hole not in advertised face</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Signed identifier of an edge, identifying the ring.
See <a class="xref" href="GetRingEdges.html" title="GetRingEdges">GetRingEdges</a>.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
A ring of edges reporting a face on its exterior
is contained in different face.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">not-isolated node has not- containing_face</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the ill-defined node.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
A node which is reported as being on the boundary of one or more edges
is indicating a containing face.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">isolated node has  containing_face</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the ill-defined node.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
A node which is not reported as being on the boundary of any edges
is lacking the indication of a containing face.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">isolated node has wrong containing_face</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the misrepresented node.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
A node which is not reported as being on the boundary of any edges
indicates a containing face which is not the actual face containing it.
See <a class="xref" href="GetFaceContainingPoint.html" title="GetFaceContainingPoint">GetFaceContainingPoint</a>.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">invalid next_right_edge</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the misrepresented edge.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Signed id of the edge which should be indicated as the next right edge.
                                    </td>
                <td style="border-bottom: 1px solid ; ">
The edge indicated as the next edge encountered walking on the right
side of an edge is wrong.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">invalid next_left_edge</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Identifier of the misrepresented edge.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Signed id of the edge which should be indicated as the next left edge.
                                    </td>
                <td style="border-bottom: 1px solid ; ">
The edge indicated as the next edge encountered walking on the
left side of an edge is wrong.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">mixed face labeling in ring</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Signed identifier of an edge, identifying the ring.
See <a class="xref" href="GetRingEdges.html" title="GetRingEdges">GetRingEdges</a>.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
Edges in a ring indicate conflicting faces on the walking side.
This is also known as a "Side Location Conflict".
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">non-closed ring</td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
Signed identifier of an edge, identifying the ring.
See <a class="xref" href="GetRingEdges.html" title="GetRingEdges">GetRingEdges</a>.
                                    </td>
                <td style="border-right: 1px solid ; border-bottom: 1px solid ; "> </td>
                <td style="border-bottom: 1px solid ; ">
A ring of edges formed by following next_left_edge/next_right_edge
attributes starts and ends on different nodes.
                                    </td>
              </tr>
              <tr>
                <td style="border-right: 1px solid ; ">face has multiple shells</td>
                <td style="border-right: 1px solid ; ">
Identifier of the contended face.
                                    </td>
                <td style="border-right: 1px solid ; ">
Signed identifier of an edge, identifying the ring.
See <a class="xref" href="GetRingEdges.html" title="GetRingEdges">GetRingEdges</a>.
                                    </td>
                <td>
More than a one ring of edges indicate the same face on its interior.
                                    </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="availability">Availability: 1.0.0</p>
        <p class="enhanced">Enhanced: 2.0.0 more efficient edge crossing detection and fixes for false positives that were existent in prior versions.</p>
        <p class="changed">Changed: 2.2.0 values for id1 and id2 were swapped for 'edge crosses node' to be consistent with error description.</p>
        <p class="changed">Changed: 3.2.0 added optional bbox parameter, perform face labeling and edge linking checks.</p>
      </div>
      <div class="refsection" id="idm24064">
        <h2>Examples</h2>
        <pre class="programlisting">SELECT * FROM  topology.ValidateTopology('ma_topo');
      error        | id1 | id2
-------------------+-----+-----
face without edges |   1 |
				</pre>
      </div>
      <div class="refsection" id="idm24067">
        <h2>See Also</h2>
        <p><a class="xref" href="validatetopology_returntype.html" title="validatetopology_returntype">validatetopology_returntype</a>, <a class="xref" href="Topology_Load_Tiger.html" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p>
      </div>
    </div>
    <footer>
      <div class="navfooter">
        <table style="width: 100%; ">
          <tr>
            <td style="width: 40%; text-align: left; "><a accesskey="p" href="TopologySummary.html">Prev</a> </td>
            <td style="width: 20%; text-align: center; ">
              <a accesskey="u" href="Topology.html#Topology_ManagementFunctions">Up</a>
            </td>
            <td style="width: 40%; text-align: right; "> <a accesskey="n" href="ValidateTopologyRelation.html">Next</a></td>
          </tr>
          <tr>
            <td style="width: 40%; text-align: left; vertical-align: top; ">TopologySummary </td>
            <td style="width: 20%; text-align: center; ">
              <a accesskey="h" href="index.html">Home</a>
            </td>
            <td style="width: 40%; text-align: right; vertical-align: top; "> ValidateTopologyRelation</td>
          </tr>
        </table>
      </div>
    </footer>
  </body>
</html>
